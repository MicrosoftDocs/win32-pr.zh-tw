---
title: 對話方塊程式設計考量
description: 本總覽討論一些有關對話方塊的程式設計考慮。
ms.assetid: 49024a0f-ea92-4d56-b063-8e5fcdbd884a
keywords:
- Windows 消費者介面、視窗化
- Windows 消費者介面，對話方塊
- 視窗化，對話方塊
- 對話方塊，關於
- 對話方塊程式
- 對話方塊、程式
- WM_INITDIALOG 訊息
- WM_COMMAND 訊息
- WM_PARENTNOTIFY 訊息
- 控制項色彩訊息
- 對話方塊，訊息處理
- 對話方塊、鍵盤介面
- 對話方塊、助憶鍵
- 對話方塊，自訂
- 自訂對話方塊
- 對話方塊，設定
ms.topic: article
ms.date: 08/25/2020
ms.openlocfilehash: 790abe7c76cdb99f86b2a90a133b15faae721e0e
ms.sourcegitcommit: f7cf41ffc79d1ffead9de2fc61677201f94b423a
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/26/2020
ms.locfileid: "106969543"
---
# <a name="dialog-box-programming-considerations"></a><span data-ttu-id="64761-119">對話方塊程式設計考量</span><span class="sxs-lookup"><span data-stu-id="64761-119">Dialog Box Programming Considerations</span></span>

<span data-ttu-id="64761-120">本總覽討論一些有關對話方塊的程式設計考慮。</span><span class="sxs-lookup"><span data-stu-id="64761-120">This overview discusses some programming considerations concerning dialog boxes.</span></span>

<span data-ttu-id="64761-121">此總覽包含下列主題。</span><span class="sxs-lookup"><span data-stu-id="64761-121">The overview includes the following topics.</span></span>

-   [<span data-ttu-id="64761-122">對話方塊程式</span><span class="sxs-lookup"><span data-stu-id="64761-122">Dialog Box Procedures</span></span>](#dialog-box-procedures)
    -   [<span data-ttu-id="64761-123">WM \_ INITDIALOG 訊息</span><span class="sxs-lookup"><span data-stu-id="64761-123">The WM\_INITDIALOG Message</span></span>](wm-initdialog.md)
    -   [<span data-ttu-id="64761-124">WM \_ 命令訊息</span><span class="sxs-lookup"><span data-stu-id="64761-124">The WM\_COMMAND Message</span></span>](/windows/desktop/menurc/wm-command)
    -   [<span data-ttu-id="64761-125">WM \_ PARENTNOTIFY 訊息</span><span class="sxs-lookup"><span data-stu-id="64761-125">The WM\_PARENTNOTIFY Message</span></span>](/previous-versions/windows/desktop/inputmsg/wm-parentnotify)
    -   [<span data-ttu-id="64761-126">控制項色彩訊息</span><span class="sxs-lookup"><span data-stu-id="64761-126">Control-Color Messages</span></span>](#control-color-messages)
    -   [<span data-ttu-id="64761-127">對話方塊預設訊息處理</span><span class="sxs-lookup"><span data-stu-id="64761-127">Dialog Box Default Message Processing</span></span>](#dialog-box-default-message-processing)
-   [<span data-ttu-id="64761-128">對話方塊鍵盤介面</span><span class="sxs-lookup"><span data-stu-id="64761-128">Dialog Box Keyboard Interface</span></span>](#dialog-box-keyboard-interface)
    -   [<span data-ttu-id="64761-129">WS \_ TABSTOP 樣式</span><span class="sxs-lookup"><span data-stu-id="64761-129">The WS\_TABSTOP Style</span></span>](/windows/desktop/winmsg/window-styles)
    -   [<span data-ttu-id="64761-130">WS \_ 群組樣式</span><span class="sxs-lookup"><span data-stu-id="64761-130">The WS\_GROUP Style</span></span>](/windows/desktop/winmsg/window-styles)
    -   [<span data-ttu-id="64761-131">符號</span><span class="sxs-lookup"><span data-stu-id="64761-131">Mnemonics</span></span>](#mnemonics)
-   [<span data-ttu-id="64761-132">對話方塊設定</span><span class="sxs-lookup"><span data-stu-id="64761-132">Dialog Box Settings</span></span>](#dialog-box-settings)
    -   [<span data-ttu-id="64761-133">選項按鈕和核取方塊</span><span class="sxs-lookup"><span data-stu-id="64761-133">Radio Buttons and Check Boxes</span></span>](#radio-buttons-and-check-boxes)
    -   [<span data-ttu-id="64761-134">對話方塊編輯控制項</span><span class="sxs-lookup"><span data-stu-id="64761-134">Dialog Box Edit Controls</span></span>](#dialog-box-edit-controls)
    -   [<span data-ttu-id="64761-135">清單方塊、下拉式方塊和目錄清單</span><span class="sxs-lookup"><span data-stu-id="64761-135">List Boxes, Combo Boxes, and Directory Listings</span></span>](#list-boxes-combo-boxes-and-directory-listings)
    -   [<span data-ttu-id="64761-136">對話方塊控制項訊息</span><span class="sxs-lookup"><span data-stu-id="64761-136">Dialog Box Control Messages</span></span>](#dialog-box-control-messages)
-   [<span data-ttu-id="64761-137">自訂對話方塊</span><span class="sxs-lookup"><span data-stu-id="64761-137">Custom Dialog Boxes</span></span>](#custom-dialog-boxes)

## <a name="dialog-box-procedures"></a><span data-ttu-id="64761-138">對話方塊程式</span><span class="sxs-lookup"><span data-stu-id="64761-138">Dialog Box Procedures</span></span>

<span data-ttu-id="64761-139">對話方塊程式類似于中的視窗程式，系統會將訊息傳送至程式，以提供要執行的資訊或執行工作。與視窗程式不同的是，對話方塊程式永遠不會呼叫 [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) 函數。</span><span class="sxs-lookup"><span data-stu-id="64761-139">A dialog box procedure is similar to a window procedure in that the system sends messages to the procedure when it has information to give or tasks to carry out. Unlike a window procedure, a dialog box procedure never calls the [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) function.</span></span> <span data-ttu-id="64761-140">相反地，如果處理訊息，則會傳回 **TRUE** ; 否則會傳回 **FALSE** 。</span><span class="sxs-lookup"><span data-stu-id="64761-140">Instead, it returns **TRUE** if it processes a message or **FALSE** if it does not.</span></span>

<span data-ttu-id="64761-141">每個對話方塊程式都有下列形式：</span><span class="sxs-lookup"><span data-stu-id="64761-141">Every dialog box procedure has the following form:</span></span>

```cpp
BOOL CALLBACK DlgProc(HWND hwndDlg, UINT message, WPARAM wParam, LPARAM lParam) 
{ 
    switch (message) 
    { 
 
        // Place message cases here. 
 
        default: 
            return FALSE; 
    } 
}
```

<span data-ttu-id="64761-142">程式參數的作用與視窗程式相同，且 *hwndDlg* 參數會接收對話方塊的視窗控制碼。</span><span class="sxs-lookup"><span data-stu-id="64761-142">The procedure parameters serve the same purpose as in a window procedure, with the *hwndDlg* parameter receiving the window handle of the dialog box.</span></span>

<span data-ttu-id="64761-143">大部分的對話方塊程式都會處理該控制項所傳送的 [**wm \_ INITDIALOG**](wm-initdialog.md) 訊息和 [**WM \_ 命令**](/windows/desktop/menurc/wm-command) 訊息，但如果有任何其他訊息，則會進行一些處理。</span><span class="sxs-lookup"><span data-stu-id="64761-143">Most dialog box procedures process the [**WM\_INITDIALOG**](wm-initdialog.md) message and the [**WM\_COMMAND**](/windows/desktop/menurc/wm-command) messages sent by the controls, but process few if any other messages.</span></span> <span data-ttu-id="64761-144">如果對話方塊程式未處理訊息，則必須傳回 **FALSE** ，指示系統在內部處理訊息。</span><span class="sxs-lookup"><span data-stu-id="64761-144">If a dialog box procedure does not process a message, it must return **FALSE** to direct the system to process the messages internally.</span></span> <span data-ttu-id="64761-145">這項規則的唯一例外狀況是 **WM \_ INITDIALOG** 訊息。</span><span class="sxs-lookup"><span data-stu-id="64761-145">The only exception to this rule is the **WM\_INITDIALOG** message.</span></span> <span data-ttu-id="64761-146">對話方塊程式必須傳回 **TRUE** ，指示系統進一步處理 **WM \_ INITDIALOG** 訊息。</span><span class="sxs-lookup"><span data-stu-id="64761-146">The dialog box procedure must return **TRUE** to direct the system to further process the **WM\_INITDIALOG** message.</span></span> <span data-ttu-id="64761-147">在任何情況下，程式都不能呼叫 [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca)。</span><span class="sxs-lookup"><span data-stu-id="64761-147">In any case, the procedure must not call [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca).</span></span>

- [<span data-ttu-id="64761-148">WM \_ INITDIALOG 訊息</span><span class="sxs-lookup"><span data-stu-id="64761-148">The WM\_INITDIALOG Message</span></span>](#the-wm_initdialog-message)
- [<span data-ttu-id="64761-149">WM \_ 命令訊息</span><span class="sxs-lookup"><span data-stu-id="64761-149">The WM\_COMMAND Message</span></span>](#the-wm_command-message)
- [<span data-ttu-id="64761-150">WM \_ PARENTNOTIFY 訊息</span><span class="sxs-lookup"><span data-stu-id="64761-150">The WM\_PARENTNOTIFY Message</span></span>](#the-wm_parentnotify-message)
- [<span data-ttu-id="64761-151">控制項色彩訊息</span><span class="sxs-lookup"><span data-stu-id="64761-151">Control-Color Messages</span></span>](#control-color-messages)
- [<span data-ttu-id="64761-152">對話方塊預設訊息處理</span><span class="sxs-lookup"><span data-stu-id="64761-152">Dialog Box Default Message Processing</span></span>](#dialog-box-default-message-processing)

### <a name="the-wm_initdialog-message"></a><span data-ttu-id="64761-153">WM \_ INITDIALOG 訊息</span><span class="sxs-lookup"><span data-stu-id="64761-153">The WM\_INITDIALOG Message</span></span>

<span data-ttu-id="64761-154">系統不會將 [**WM \_ 建立**](/windows/desktop/winmsg/wm-create) 訊息傳送至對話方塊程式。</span><span class="sxs-lookup"><span data-stu-id="64761-154">The system does not send a [**WM\_CREATE**](/windows/desktop/winmsg/wm-create) message to the dialog box procedure.</span></span> <span data-ttu-id="64761-155">相反地，它會在建立對話方塊及其所有控制項時，但在顯示對話方塊之前，傳送 [**WM \_ INITDIALOG**](wm-initdialog.md) 訊息。</span><span class="sxs-lookup"><span data-stu-id="64761-155">Instead, it sends a [**WM\_INITDIALOG**](wm-initdialog.md) message when it creates the dialog box and all its controls but before it displays the dialog box.</span></span> <span data-ttu-id="64761-156">程式應該執行任何必要的初始化，以確保對話方塊顯示與工作相關聯的目前設定。</span><span class="sxs-lookup"><span data-stu-id="64761-156">The procedure should carry out any initialization required to ensure that the dialog box displays the current settings associated with the task.</span></span> <span data-ttu-id="64761-157">例如，當對話方塊包含可顯示目前磁片磁碟機和目錄的控制項時，此程式必須判斷目前的磁片磁碟機和目錄，並將控制項設定為該值。</span><span class="sxs-lookup"><span data-stu-id="64761-157">For example, when a dialog box contains a control to show the current drive and directory, the procedure must determine the current drive and directory and set the control to that value.</span></span>

<span data-ttu-id="64761-158">此程式可以使用 [**SetDlgItemText**](/windows/desktop/api/Winuser/nf-winuser-setdlgitemtexta) 和 [**CheckDlgButton**](https://msdn.microsoft.com/library/Cc410649(v=MSDN.10).aspx)等函數來初始化控制項。</span><span class="sxs-lookup"><span data-stu-id="64761-158">The procedure can initialize controls by using functions such as [**SetDlgItemText**](/windows/desktop/api/Winuser/nf-winuser-setdlgitemtexta) and [**CheckDlgButton**](https://msdn.microsoft.com/library/Cc410649(v=MSDN.10).aspx).</span></span> <span data-ttu-id="64761-159">由於控制項是 windows，因此程式也可以使用視窗管理函數（例如 [**EnableWindow**](/windows/desktop/api/winuser/nf-winuser-enablewindow) 和 [**SetFocus**](/windows/desktop/api/winuser/nf-winuser-setfocus)）來操作它們。</span><span class="sxs-lookup"><span data-stu-id="64761-159">Because controls are windows, the procedure can also manipulate them by using window-management functions such as [**EnableWindow**](/windows/desktop/api/winuser/nf-winuser-enablewindow) and [**SetFocus**](/windows/desktop/api/winuser/nf-winuser-setfocus).</span></span> <span data-ttu-id="64761-160">此程式可以使用 [**GetDlgItem**](/windows/desktop/api/Winuser/nf-winuser-getdlgitem) 函式來抓取控制項的視窗控制碼。</span><span class="sxs-lookup"><span data-stu-id="64761-160">The procedure can retrieve the window handle to a control by using the [**GetDlgItem**](/windows/desktop/api/Winuser/nf-winuser-getdlgitem) function.</span></span>

<span data-ttu-id="64761-161">對話方塊程式可以視需要變更任何控制項的內容、狀態和位置。</span><span class="sxs-lookup"><span data-stu-id="64761-161">The dialog box procedure can change the contents, state, and position of any control as needed.</span></span> <span data-ttu-id="64761-162">例如，在包含檔案名清單方塊和 [ **開啟** ] 按鈕的對話方塊中，程式可以停用 [ **開啟** ] 按鈕，直到使用者從清單中選取檔案為止。</span><span class="sxs-lookup"><span data-stu-id="64761-162">For example, in a dialog box that contains a list box of filenames and an **Open** button, the procedure can disable the **Open** button until the user selects a file from the list.</span></span> <span data-ttu-id="64761-163">在此範例中，對話方塊範本會指定 [**開啟**] 按鈕的 [**WS \_ DISABLED**](/windows/desktop/winmsg/window-styles)樣式，而且系統會在建立時自動停用按鈕。</span><span class="sxs-lookup"><span data-stu-id="64761-163">In this example, the dialog box template specifies the [**WS\_DISABLED**](/windows/desktop/winmsg/window-styles) style for the **Open** button and the system automatically disables the button when creating it.</span></span> <span data-ttu-id="64761-164">當對話方塊程式從清單方塊收到通知訊息，指出使用者已選取檔案時，此程式會呼叫 [**EnableWindow**](/windows/desktop/api/winuser/nf-winuser-enablewindow) 函式來啟用 [ **開啟** ] 按鈕。</span><span class="sxs-lookup"><span data-stu-id="64761-164">When the dialog box procedure receives a notification message from the list box indicating that the user has selected a file, the procedure calls the [**EnableWindow**](/windows/desktop/api/winuser/nf-winuser-enablewindow) function to enable the **Open** button.</span></span>

<span data-ttu-id="64761-165">若要在對話方塊的標題列上顯示自訂圖示，您的 [**wm \_ INITDIALOG**](wm-initdialog.md) 處理常式可以將 [**WM \_ SETICON**](/windows/desktop/winmsg/wm-seticon) 訊息傳送至對話方塊。</span><span class="sxs-lookup"><span data-stu-id="64761-165">To display a custom icon on the caption bar of the dialog box, your [**WM\_INITDIALOG**](wm-initdialog.md) handler can send the [**WM\_SETICON**](/windows/desktop/winmsg/wm-seticon) message to the dialog box.</span></span>

<span data-ttu-id="64761-166">如果應用程式使用其中一個函式 [**DialogBoxParam**](/windows/desktop/api/Winuser/nf-winuser-dialogboxparama)、 [**DialogBoxIndirectParam**](/windows/desktop/api/Winuser/nf-winuser-dialogboxindirectparama)、 [**CreateDialogParam**](/windows/desktop/api/Winuser/nf-winuser-createdialogparama)或 [**CreateDialogIndirectParam**](/windows/desktop/api/Winuser/nf-winuser-createdialogindirectparama)來建立對話方塊，則 [**WM \_ lParam**](wm-initdialog.md)訊息的 *INITDIALOG* 參數會包含傳遞至函數的額外參數。</span><span class="sxs-lookup"><span data-stu-id="64761-166">If the application creates the dialog box by using one of the functions [**DialogBoxParam**](/windows/desktop/api/Winuser/nf-winuser-dialogboxparama), [**DialogBoxIndirectParam**](/windows/desktop/api/Winuser/nf-winuser-dialogboxindirectparama), [**CreateDialogParam**](/windows/desktop/api/Winuser/nf-winuser-createdialogparama), or [**CreateDialogIndirectParam**](/windows/desktop/api/Winuser/nf-winuser-createdialogindirectparama), the *lParam* parameter for the [**WM\_INITDIALOG**](wm-initdialog.md) message contains the extra parameter passed to the function.</span></span> <span data-ttu-id="64761-167">應用程式通常會使用這個額外的參數將其他初始化資訊的指標傳遞至對話方塊程式，但對話方塊程式必須判斷參數的意義。</span><span class="sxs-lookup"><span data-stu-id="64761-167">Applications typically use this extra parameter to pass a pointer to additional initialization information to the dialog box procedure, but the dialog box procedure must determine the meaning of the parameter.</span></span> <span data-ttu-id="64761-168">如果應用程式使用另一個函式來建立對話方塊，則系統會將 *lParam* 參數設定為 **Null**。</span><span class="sxs-lookup"><span data-stu-id="64761-168">If the application uses another function to create the dialog box, the system sets the *lParam* parameter to **NULL**.</span></span>

<span data-ttu-id="64761-169">從 [**WM \_ INITDIALOG**](wm-initdialog.md) 訊息傳回之前，程式應判斷是否應該將輸入焦點設定為指定的控制項。</span><span class="sxs-lookup"><span data-stu-id="64761-169">Before returning from the [**WM\_INITDIALOG**](wm-initdialog.md) message, the procedure should determine whether it should set the input focus to a specified control.</span></span> <span data-ttu-id="64761-170">如果對話方塊程式傳回 **TRUE**，系統就會自動將輸入焦點設定至控制項，而控制項的視窗控制碼位於 *wParam* 參數中。</span><span class="sxs-lookup"><span data-stu-id="64761-170">If the dialog box procedure returns **TRUE**, the system automatically sets the input focus to the control whose window handle is in the *wParam* parameter.</span></span> <span data-ttu-id="64761-171">如果接收預設焦點的控制項不適當，則可以使用 [**SetFocus**](/windows/desktop/api/winuser/nf-winuser-setfocus) 函數將焦點設定為適當的控制項。</span><span class="sxs-lookup"><span data-stu-id="64761-171">If the control receiving the default focus is not appropriate, it can set the focus to the appropriate control by using the [**SetFocus**](/windows/desktop/api/winuser/nf-winuser-setfocus) function.</span></span> <span data-ttu-id="64761-172">如果程式設定了輸入焦點，則必須傳回 **FALSE** ，以防止系統設定預設焦點。</span><span class="sxs-lookup"><span data-stu-id="64761-172">If the procedure sets the input focus, it must return **FALSE** to prevent the system from setting the default focus.</span></span> <span data-ttu-id="64761-173">接收預設輸入焦點的控制項一律是範本中所指定的第一個控制項，而該控制項是可見、未停用的，而且具有 [WS \_ TABSTOP](/windows/desktop/winmsg/window-styles) 樣式。</span><span class="sxs-lookup"><span data-stu-id="64761-173">The control receiving the default input focus is always the first control specified in the template that is visible, not disabled, and has the [WS\_TABSTOP](/windows/desktop/winmsg/window-styles) style.</span></span> <span data-ttu-id="64761-174">如果沒有這類控制項存在，系統會將預設的輸入焦點設定為範本中的第一個控制項。</span><span class="sxs-lookup"><span data-stu-id="64761-174">If no such control exists, the system sets the default input focus to the first control in the template.</span></span>

### <a name="the-wm_command-message"></a><span data-ttu-id="64761-175">WM \_ 命令訊息</span><span class="sxs-lookup"><span data-stu-id="64761-175">The WM\_COMMAND Message</span></span>

<span data-ttu-id="64761-176">當使用者在控制項中執行動作時，控制項可以傳送 [**WM \_ 命令**](/windows/desktop/menurc/wm-command) 訊息至對話方塊程式。</span><span class="sxs-lookup"><span data-stu-id="64761-176">A control can send a [**WM\_COMMAND**](/windows/desktop/menurc/wm-command) message to the dialog box procedure when the user carries out an action in the control.</span></span> <span data-ttu-id="64761-177">這些訊息稱為通知訊息，會通知使用者輸入，並允許它執行適當的回應。</span><span class="sxs-lookup"><span data-stu-id="64761-177">These messages, called notification messages, inform the procedure of user input and permit it to carry out appropriate responses.</span></span>

<span data-ttu-id="64761-178">所有預先定義的控制項（靜態控制項除外）都會針對選取的使用者動作傳送通知訊息。</span><span class="sxs-lookup"><span data-stu-id="64761-178">All predefined controls, except static controls, send notification messages for selected user actions.</span></span> <span data-ttu-id="64761-179">例如，每當使用者按下按鈕時，按下按鈕就會傳送 [**BN \_ 點擊**](../controls/bn-clicked.md) 通知訊息。</span><span class="sxs-lookup"><span data-stu-id="64761-179">For example, a push button sends the [**BN\_CLICKED**](../controls/bn-clicked.md) notification message whenever the user clicks the button.</span></span> <span data-ttu-id="64761-180">在所有情況下， *wParam* 參數的低序位字包含控制項識別碼、 *wParam* 的高序位字包含通知碼，而 *lParam* 參數則包含控制視窗控制碼。</span><span class="sxs-lookup"><span data-stu-id="64761-180">In all cases, the low-order word of the *wParam* parameter contains the control identifier, the high-order word of *wParam* contains the notification code, and the *lParam* parameter contains the control window handle.</span></span>

<span data-ttu-id="64761-181">對話方塊程式應該會監視及處理通知訊息。</span><span class="sxs-lookup"><span data-stu-id="64761-181">The dialog box procedure should monitor and process notification messages.</span></span> <span data-ttu-id="64761-182">尤其是，此程式必須處理具有 IDOK 或 IDCANCEL 識別碼的訊息;這些訊息代表使用者要求關閉對話方塊。</span><span class="sxs-lookup"><span data-stu-id="64761-182">In particular, the procedure must process messages having the IDOK or IDCANCEL identifiers; these messages represent a request by the user to close the dialog box.</span></span> <span data-ttu-id="64761-183">此程式應該會使用強制回應對話方塊的 [**EndDialog**](/windows/desktop/api/Winuser/nf-winuser-enddialog) 函數和非強制回應對話方塊的 [**DestroyWindow**](/windows/desktop/api/winuser/nf-winuser-destroywindow) 函式，來關閉對話方塊。</span><span class="sxs-lookup"><span data-stu-id="64761-183">The procedure should close the dialog box by using the [**EndDialog**](/windows/desktop/api/Winuser/nf-winuser-enddialog) function for modal dialog boxes and the [**DestroyWindow**](/windows/desktop/api/winuser/nf-winuser-destroywindow) function for modeless dialog boxes.</span></span>

<span data-ttu-id="64761-184">如果對話方塊具有功能表（例如 [**視窗]** 功能表），而且使用者按一下功能表項目，則系統也會將 [**WM \_ 命令**](/windows/desktop/menurc/wm-command)訊息傳送至對話方塊程式。</span><span class="sxs-lookup"><span data-stu-id="64761-184">The system also sends [**WM\_COMMAND**](/windows/desktop/menurc/wm-command) messages to the dialog box procedure if the dialog box has a menu, such as the **window** menu, and the user clicks a menu item.</span></span> <span data-ttu-id="64761-185">尤其是，只要使用者在對話方塊的 [視窗] 功能表中按一下 [**關閉**]，系統就會傳送包含 *WParam* 參數的 **WM \_ 命令** 訊息，並將其設定為 **IDCANCEL** 。</span><span class="sxs-lookup"><span data-stu-id="64761-185">In particular, the system sends a **WM\_COMMAND** message with the *wParam* parameter set to **IDCANCEL** whenever the user clicks **Close** in the dialog box's window menu.</span></span> <span data-ttu-id="64761-186">此訊息與 [ **取消** ] 按鈕所傳送的通知訊息幾乎完全相同，而且應該以完全相同的方式處理。</span><span class="sxs-lookup"><span data-stu-id="64761-186">The message is nearly identical to the notification message sent by the **Cancel** button and should be processed in exactly the same way.</span></span>

### <a name="the-wm_parentnotify-message"></a><span data-ttu-id="64761-187">WM \_ PARENTNOTIFY 訊息</span><span class="sxs-lookup"><span data-stu-id="64761-187">The WM\_PARENTNOTIFY Message</span></span>

<span data-ttu-id="64761-188">當使用者在指向控制項時按下滑鼠按鍵時，控制項會傳送 [**WM \_ PARENTNOTIFY**](/previous-versions/windows/desktop/inputmsg/wm-parentnotify) 訊息。</span><span class="sxs-lookup"><span data-stu-id="64761-188">A control sends a [**WM\_PARENTNOTIFY**](/previous-versions/windows/desktop/inputmsg/wm-parentnotify) message whenever the user presses a mouse button while pointing to the control.</span></span> <span data-ttu-id="64761-189">有些應用程式會將此訊息解讀為指示，以執行與控制項相關的動作，例如，顯示描述控制項用途的文字行。</span><span class="sxs-lookup"><span data-stu-id="64761-189">Some applications interpret this message as a signal to carry out an action related to the control, such as displaying a line of text describing the purpose of the control.</span></span>

<span data-ttu-id="64761-190">系統也會在建立和終結視窗時傳送 [**WM \_ PARENTNOTIFY**](/previous-versions/windows/desktop/inputmsg/wm-parentnotify) 訊息，但不會傳送自對話方塊範本所建立的控制項。</span><span class="sxs-lookup"><span data-stu-id="64761-190">The system also sends [**WM\_PARENTNOTIFY**](/previous-versions/windows/desktop/inputmsg/wm-parentnotify) messages when it creates and destroys a window, but not for controls created from a dialog box template.</span></span> <span data-ttu-id="64761-191">系統會在建立控制項時指定 **WS \_ EX \_ NOPARENTNOTIFY** 樣式，以防止這些訊息。</span><span class="sxs-lookup"><span data-stu-id="64761-191">The system prevents these messages by specifying the **WS\_EX\_NOPARENTNOTIFY** style when creating the controls.</span></span> <span data-ttu-id="64761-192">應用程式無法覆寫這個預設行為，除非它為對話方塊建立自己的控制項。</span><span class="sxs-lookup"><span data-stu-id="64761-192">An application cannot override this default behavior unless it creates its own controls for the dialog box.</span></span>

### <a name="control-color-messages"></a><span data-ttu-id="64761-193">Control-Color 訊息</span><span class="sxs-lookup"><span data-stu-id="64761-193">Control-Color Messages</span></span>

<span data-ttu-id="64761-194">控制項和系統可以在希望對話方塊程式使用特定筆刷和色彩繪製控制項或其他視窗的背景時，傳送控制項色彩訊息。</span><span class="sxs-lookup"><span data-stu-id="64761-194">Controls and the system can send control-color messages when they want the dialog box procedure to paint the background of a control or other window by using a specific brush and colors.</span></span> <span data-ttu-id="64761-195">當應用程式覆寫對話方塊及其控制項中使用的預設色彩時，這會很有用。</span><span class="sxs-lookup"><span data-stu-id="64761-195">This can be useful when applications override the default colors used in dialog boxes and their controls.</span></span> <span data-ttu-id="64761-196">以下是已取代了 **WM \_ CTLCOLOR** 訊息的控制項色彩訊息。</span><span class="sxs-lookup"><span data-stu-id="64761-196">Following are the control-color messages, which have replaced the **WM\_CTLCOLOR** message.</span></span>

-   [<span data-ttu-id="64761-197">**WM \_ CTLCOLORBTN**</span><span class="sxs-lookup"><span data-stu-id="64761-197">**WM\_CTLCOLORBTN**</span></span>](../controls/wm-ctlcolorbtn.md)
-   [<span data-ttu-id="64761-198">**WM \_ CTLCOLORDLG**</span><span class="sxs-lookup"><span data-stu-id="64761-198">**WM\_CTLCOLORDLG**</span></span>](wm-ctlcolordlg.md)
-   [<span data-ttu-id="64761-199">**WM \_ CTLCOLOREDIT**</span><span class="sxs-lookup"><span data-stu-id="64761-199">**WM\_CTLCOLOREDIT**</span></span>](../controls/wm-ctlcoloredit.md)
-   [<span data-ttu-id="64761-200">**WM \_ CTLCOLORLISTBOX**</span><span class="sxs-lookup"><span data-stu-id="64761-200">**WM\_CTLCOLORLISTBOX**</span></span>](../controls/wm-ctlcolorlistbox.md)
-   [<span data-ttu-id="64761-201">**WM \_ CTLCOLORSCROLLBAR**</span><span class="sxs-lookup"><span data-stu-id="64761-201">**WM\_CTLCOLORSCROLLBAR**</span></span>](../controls/wm-ctlcolorscrollbar.md)
-   [<span data-ttu-id="64761-202">**WM \_ CTLCOLORSTATIC**</span><span class="sxs-lookup"><span data-stu-id="64761-202">**WM\_CTLCOLORSTATIC**</span></span>](../controls/wm-ctlcolorstatic.md)

<span data-ttu-id="64761-203">控制項只會在繪製其本身的背景之前，將控制項色彩訊息傳送至對話方塊程式。</span><span class="sxs-lookup"><span data-stu-id="64761-203">A control sends a control-color message to the dialog box procedure just before it paints its own background.</span></span> <span data-ttu-id="64761-204">此訊息可讓程式指定要使用的筆刷，以及設定背景和前景色彩。</span><span class="sxs-lookup"><span data-stu-id="64761-204">The message allows the procedure to specify which brush to use and to set the background and foreground colors.</span></span> <span data-ttu-id="64761-205">此程式會藉由傳回筆刷控點來指定筆刷。</span><span class="sxs-lookup"><span data-stu-id="64761-205">The procedure specifies a brush by returning the brush handle.</span></span> <span data-ttu-id="64761-206">若要設定背景和前景色彩，程式會使用 [**SetBkColor**](/windows/desktop/api/wingdi/nf-wingdi-setbkcolor) 和 [**SetTextColor**](/windows/desktop/api/wingdi/nf-wingdi-settextcolor) 函式與控制項的顯示裝置內容。</span><span class="sxs-lookup"><span data-stu-id="64761-206">To set the background and foreground colors, the procedure uses the [**SetBkColor**](/windows/desktop/api/wingdi/nf-wingdi-setbkcolor) and [**SetTextColor**](/windows/desktop/api/wingdi/nf-wingdi-settextcolor) functions with the control's display device context.</span></span> <span data-ttu-id="64761-207">控制項色彩訊息會將顯示裝置內容的控制碼傳遞給訊息的 *wParam* 參數中的程式。</span><span class="sxs-lookup"><span data-stu-id="64761-207">The control-color message passes a handle to the display device context to the procedure in the message's *wParam* parameter.</span></span>

<span data-ttu-id="64761-208">如果程式未處理 [**wm \_ ERASEBKGND**](/windows/desktop/winmsg/wm-erasebkgnd)訊息，系統會將 [**wm \_ CTLCOLORDLG**](wm-ctlcolordlg.md)訊息傳送至對話方塊程式。</span><span class="sxs-lookup"><span data-stu-id="64761-208">The system sends a [**WM\_CTLCOLORDLG**](wm-ctlcolordlg.md) message to the dialog box procedure if the procedure does not process the [**WM\_ERASEBKGND**](/windows/desktop/winmsg/wm-erasebkgnd) message.</span></span> <span data-ttu-id="64761-209">預先定義的對話方塊類別沒有類別背景筆刷，因此此訊息可讓程式定義自己的背景，而不需要包含程式碼來執行工作。</span><span class="sxs-lookup"><span data-stu-id="64761-209">The predefined dialog box class does not have a class background brush, so this message lets the procedure define its own background without having to include the code to carry out the work.</span></span>

<span data-ttu-id="64761-210">在任何情況下，當對話方塊程式未處理控制項色彩訊息時，系統會使用具有預設視窗色彩的筆刷來繪製所有控制項和視窗的背景（捲軸除外）。</span><span class="sxs-lookup"><span data-stu-id="64761-210">In any case, when a dialog box procedure does not process a control-color message, the system uses a brush with the default window color to paint the background for all controls and windows except scroll bars.</span></span> <span data-ttu-id="64761-211">應用程式可以藉由將 **色彩 \_ 視窗** 值傳遞至 [**GetSysColor**](/windows/desktop/api/winuser/nf-winuser-getsyscolor) 函式，來取出預設的視窗色彩。</span><span class="sxs-lookup"><span data-stu-id="64761-211">An application can retrieve the default window color by passing the **COLOR\_WINDOW** value to the [**GetSysColor**](/windows/desktop/api/winuser/nf-winuser-getsyscolor) function.</span></span> <span data-ttu-id="64761-212">繪製背景時，顯示裝置內容的前景色彩會設定為預設的文字色彩 (**色彩 \_ WINDOWTEXT**) 。</span><span class="sxs-lookup"><span data-stu-id="64761-212">While the background is painted, the foreground color for the display device context is set to the default text color (**COLOR\_WINDOWTEXT**).</span></span> <span data-ttu-id="64761-213">如果是捲軸，系統會使用具有預設捲軸色彩 (**色彩 \_ 滾動** 條) 的筆刷。</span><span class="sxs-lookup"><span data-stu-id="64761-213">For scroll bars, the system uses a brush having the default scroll bar color (**COLOR\_SCROLLBAR**).</span></span> <span data-ttu-id="64761-214">在此情況下，顯示裝置內容的背景和前景色彩會分別設定為白色和黑色。</span><span class="sxs-lookup"><span data-stu-id="64761-214">In this case, the background and foreground colors for the display device context are set to white and black, respectively.</span></span>

### <a name="dialog-box-default-message-processing"></a><span data-ttu-id="64761-215">對話方塊預設訊息處理</span><span class="sxs-lookup"><span data-stu-id="64761-215">Dialog Box Default Message Processing</span></span>

<span data-ttu-id="64761-216">預先定義之對話方塊類別的視窗程式會執行對話方塊程式未處理之所有訊息的預設處理。</span><span class="sxs-lookup"><span data-stu-id="64761-216">The window procedure for the predefined dialog box class carries out default processing for all messages that the dialog box procedure does not process.</span></span> <span data-ttu-id="64761-217">當對話方塊程式針對任何訊息傳回 **FALSE** 時，預先定義的視窗程式會檢查訊息，並執行下列預設動作：</span><span class="sxs-lookup"><span data-stu-id="64761-217">When the dialog box procedure returns **FALSE** for any message, the predefined window procedure checks the messages and carries out the following default actions:</span></span>



| <span data-ttu-id="64761-218">訊息</span><span class="sxs-lookup"><span data-stu-id="64761-218">Message</span></span>                                            | <span data-ttu-id="64761-219">預設動作</span><span class="sxs-lookup"><span data-stu-id="64761-219">Default action</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
|----------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="64761-220">**DM \_ GETDEFID**</span><span class="sxs-lookup"><span data-stu-id="64761-220">**DM\_GETDEFID**</span></span>](dm-getdefid.md)                | <span data-ttu-id="64761-221">您可以將此訊息傳送至對話方塊。</span><span class="sxs-lookup"><span data-stu-id="64761-221">You can send this message to a dialog box.</span></span> <span data-ttu-id="64761-222">如果對話方塊有一個，對話方塊會傳回預設推播按鈕的控制項識別碼。否則，它會傳回零。</span><span class="sxs-lookup"><span data-stu-id="64761-222">The dialog box returns the control identifier of the default push button, if the dialog box has one; otherwise, it returns zero.</span></span>                                                                                                                                                                                                                                                                                                                      |
| [<span data-ttu-id="64761-223">**DM 重新 \_ 定位**</span><span class="sxs-lookup"><span data-stu-id="64761-223">**DM\_REPOSITION**</span></span>](dm-reposition.md)            | <span data-ttu-id="64761-224">您可以將此訊息傳送至最上層對話方塊。</span><span class="sxs-lookup"><span data-stu-id="64761-224">You can send this message to a top-level dialog box.</span></span> <span data-ttu-id="64761-225">對話方塊會自行重新置放，使其符合桌面區域。</span><span class="sxs-lookup"><span data-stu-id="64761-225">The dialog box repositions itself so it fits within the desktop area.</span></span>                                                                                                                                                                                                                                                                                                                                                                       |
| [<span data-ttu-id="64761-226">**DM \_ SETDEFID**</span><span class="sxs-lookup"><span data-stu-id="64761-226">**DM\_SETDEFID**</span></span>](dm-setdefid.md)                | <span data-ttu-id="64761-227">您可以將此訊息傳送至對話方塊。</span><span class="sxs-lookup"><span data-stu-id="64761-227">You can send this message to a dialog box.</span></span> <span data-ttu-id="64761-228">對話方塊會將預設的 [推送] 按鈕設定為 *wParam* 參數中控制項識別碼所指定的控制項。</span><span class="sxs-lookup"><span data-stu-id="64761-228">The dialog box sets the default push button to the control specified by the control identifier in the *wParam* parameter.</span></span>                                                                                                                                                                                                                                                                                                                             |
| [<span data-ttu-id="64761-229">**WM \_ 啟用**</span><span class="sxs-lookup"><span data-stu-id="64761-229">**WM\_ACTIVATE**</span></span>](/windows/desktop/inputdev/wm-activate)           | <span data-ttu-id="64761-230">將輸入焦點還原至先前儲存之控制碼所識別的控制項（如果已啟用此對話方塊）。</span><span class="sxs-lookup"><span data-stu-id="64761-230">Restores the input focus to the control identified by the previously saved handle if the dialog box is activated.</span></span> <span data-ttu-id="64761-231">否則，程式會將控制碼儲存至具有輸入焦點的控制項。</span><span class="sxs-lookup"><span data-stu-id="64761-231">Otherwise, the procedure saves the handle to the control having the input focus.</span></span>                                                                                                                                                                                                                                                                                               |
| [<span data-ttu-id="64761-232">**WM \_ CHARTOITEM**</span><span class="sxs-lookup"><span data-stu-id="64761-232">**WM\_CHARTOITEM**</span></span>](../controls/wm-chartoitem.md)         | <span data-ttu-id="64761-233">傳回零。</span><span class="sxs-lookup"><span data-stu-id="64761-233">Returns zero.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| [<span data-ttu-id="64761-234">**WM \_ 關閉**</span><span class="sxs-lookup"><span data-stu-id="64761-234">**WM\_CLOSE**</span></span>](/windows/desktop/winmsg/wm-close)                   | <span data-ttu-id="64761-235">將 [**BN \_ 按一下**](../controls/bn-clicked.md) 的通知訊息張貼至對話方塊，並將 **IDCANCEL** 指定為控制項識別碼。</span><span class="sxs-lookup"><span data-stu-id="64761-235">Posts the [**BN\_CLICKED**](../controls/bn-clicked.md) notification message to the dialog box, specifying **IDCANCEL** as the control identifier.</span></span> <span data-ttu-id="64761-236">如果對話方塊具有 IDCANCEL 控制項識別碼，且控制項目前已停用，則程式會產生警告，且不會張貼訊息。</span><span class="sxs-lookup"><span data-stu-id="64761-236">If the dialog box has an IDCANCEL control identifier and the control is currently disabled, the procedure sounds a warning and does not post the message.</span></span>                                                                                                                                                                                              |
| [<span data-ttu-id="64761-237">**WM \_ COMPAREITEM**</span><span class="sxs-lookup"><span data-stu-id="64761-237">**WM\_COMPAREITEM**</span></span>](../controls/wm-compareitem.md)       | <span data-ttu-id="64761-238">傳回零。</span><span class="sxs-lookup"><span data-stu-id="64761-238">Returns zero.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| [<span data-ttu-id="64761-239">**WM \_ ERASEBKGND**</span><span class="sxs-lookup"><span data-stu-id="64761-239">**WM\_ERASEBKGND**</span></span>](/windows/desktop/winmsg/wm-erasebkgnd)         | <span data-ttu-id="64761-240">使用從 [**WM \_ CTLCOLORDLG**](wm-ctlcolordlg.md) 訊息傳回的筆刷或預設的視窗色彩，填滿對話方塊工作區。</span><span class="sxs-lookup"><span data-stu-id="64761-240">Fills the dialog box client area by using either the brush returned from the [**WM\_CTLCOLORDLG**](wm-ctlcolordlg.md) message or with the default window color.</span></span>                                                                                                                                                                                                                                                                                                                                 |
| [<span data-ttu-id="64761-241">**WM \_ GETFONT**</span><span class="sxs-lookup"><span data-stu-id="64761-241">**WM\_GETFONT**</span></span>](/windows/desktop/winmsg/wm-getfont)               | <span data-ttu-id="64761-242">傳回應用程式定義之對話方塊字型的控制碼。</span><span class="sxs-lookup"><span data-stu-id="64761-242">Returns a handle to the application-defined dialog box font.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| [<span data-ttu-id="64761-243">**WM \_ INITDIALOG**</span><span class="sxs-lookup"><span data-stu-id="64761-243">**WM\_INITDIALOG**</span></span>](wm-initdialog.md)            | <span data-ttu-id="64761-244">傳回零。</span><span class="sxs-lookup"><span data-stu-id="64761-244">Returns zero.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| [<span data-ttu-id="64761-245">**WM \_ LBUTTONDOWN**</span><span class="sxs-lookup"><span data-stu-id="64761-245">**WM\_LBUTTONDOWN**</span></span>](/windows/desktop/inputdev/wm-lbuttondown)     | <span data-ttu-id="64761-246">將 [**CB \_ SHOWDROPDOWN**](../controls/cb-showdropdown.md) 訊息傳送至具有輸入焦點的下拉式方塊，導向控制項以隱藏其下拉式清單方塊。</span><span class="sxs-lookup"><span data-stu-id="64761-246">Sends a [**CB\_SHOWDROPDOWN**](../controls/cb-showdropdown.md) message to the combo box having the input focus, directing the control to hide its drop-down list box.</span></span> <span data-ttu-id="64761-247">此程式會呼叫 [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) 以完成預設動作。</span><span class="sxs-lookup"><span data-stu-id="64761-247">The procedure calls [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) to complete the default action.</span></span>                                                                                                                                                                                                                                      |
| [<span data-ttu-id="64761-248">**WM \_ NCDESTROY**</span><span class="sxs-lookup"><span data-stu-id="64761-248">**WM\_NCDESTROY**</span></span>](/windows/desktop/winmsg/wm-ncdestroy)           | <span data-ttu-id="64761-249">釋放配置給對話方塊中編輯控制項的全域記憶體 (適用于指定 [**ds \_ LOCALEDIT**](dialog-box-styles.md) 樣式的對話方塊) 並釋出任何應用程式定義的字型 (適用于指定 [**ds \_ SETFONT**](dialog-box-styles.md) 或 [**ds \_ SHELLFONT**](dialog-box-styles.md) 樣式) 的對話方塊。</span><span class="sxs-lookup"><span data-stu-id="64761-249">Releases global memory allocated for edit controls in the dialog box (applies to dialog boxes that specify the [**DS\_LOCALEDIT**](dialog-box-styles.md) style) and frees any application-defined font (applies to dialog boxes that specify the [**DS\_SETFONT**](dialog-box-styles.md) or [**DS\_SHELLFONT**](dialog-box-styles.md) style).</span></span> <span data-ttu-id="64761-250">此程式會呼叫 [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) 函數來完成預設動作。</span><span class="sxs-lookup"><span data-stu-id="64761-250">The procedure calls the [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) function to complete the default action.</span></span> |
| [<span data-ttu-id="64761-251">**WM \_ NCLBUTTONDOWN**</span><span class="sxs-lookup"><span data-stu-id="64761-251">**WM\_NCLBUTTONDOWN**</span></span>](/windows/desktop/inputdev/wm-nclbuttondown) | <span data-ttu-id="64761-252">將 [**CB \_ SHOWDROPDOWN**](../controls/cb-showdropdown.md) 訊息傳送至具有輸入焦點的下拉式方塊，導向控制項以隱藏其下拉式清單方塊。</span><span class="sxs-lookup"><span data-stu-id="64761-252">Sends a [**CB\_SHOWDROPDOWN**](../controls/cb-showdropdown.md) message to the combo box having the input focus, directing the control to hide its drop-down list box.</span></span> <span data-ttu-id="64761-253">此程式會呼叫 [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) 以完成預設動作。</span><span class="sxs-lookup"><span data-stu-id="64761-253">The procedure calls [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) to complete the default action.</span></span>                                                                                                                                                                                                                                      |
| [<span data-ttu-id="64761-254">**WM \_ NEXTDLGCTL**</span><span class="sxs-lookup"><span data-stu-id="64761-254">**WM\_NEXTDLGCTL**</span></span>](wm-nextdlgctl.md)            | <span data-ttu-id="64761-255">將輸入焦點設定至對話方塊中的下一個或上一個控制項、由 *wParam* 參數中的控制碼所識別的控制項，或設定為可見、未停用之對話方塊中的第一個控制項，而且具有 [**WS \_ TABSTOP**](/windows/desktop/winmsg/window-styles) 樣式。</span><span class="sxs-lookup"><span data-stu-id="64761-255">Sets the input focus to the next or previous control in the dialog box, to the control identified by the handle in the *wParam* parameter, or to the first control in the dialog box that is visible, not disabled, and has the [**WS\_TABSTOP**](/windows/desktop/winmsg/window-styles) style.</span></span> <span data-ttu-id="64761-256">如果具有輸入焦點的目前視窗不是控制項，則程式會忽略此訊息。</span><span class="sxs-lookup"><span data-stu-id="64761-256">The procedure ignores this message if the current window with the input focus is not a control.</span></span>                                                                                                                  |
| [<span data-ttu-id="64761-257">**WM \_ SETFOCUS**</span><span class="sxs-lookup"><span data-stu-id="64761-257">**WM\_SETFOCUS**</span></span>](/windows/desktop/inputdev/wm-setfocus)           | <span data-ttu-id="64761-258">將輸入焦點設定為先前儲存的控制項視窗控制碼所識別的控制項。</span><span class="sxs-lookup"><span data-stu-id="64761-258">Sets the input focus to the control identified by a previously saved control window handle.</span></span> <span data-ttu-id="64761-259">如果沒有這樣的控制碼存在，程式就會將輸入焦點設定為對話方塊範本中可見、未停用的第一個控制項，而且具有 [**WS \_ TABSTOP**](/windows/desktop/winmsg/window-styles) 樣式。</span><span class="sxs-lookup"><span data-stu-id="64761-259">If no such handle exists, the procedure sets the input focus to the first control in the dialog box template that is visible, not disabled, and has the [**WS\_TABSTOP**](/windows/desktop/winmsg/window-styles) style.</span></span> <span data-ttu-id="64761-260">如果沒有這類控制項存在，程式會將輸入焦點設定為範本中的第一個控制項。</span><span class="sxs-lookup"><span data-stu-id="64761-260">If no such control exists, the procedure sets the input focus to the first control in the template.</span></span>                                                                                          |
| [<span data-ttu-id="64761-261">**WM \_ SHOWWINDOW**</span><span class="sxs-lookup"><span data-stu-id="64761-261">**WM\_SHOWWINDOW**</span></span>](/windows/desktop/winmsg/wm-showwindow)         | <span data-ttu-id="64761-262">如果對話方塊已隱藏，則將控制碼儲存至具有輸入焦點的控制項，然後呼叫 [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) 以完成預設動作。</span><span class="sxs-lookup"><span data-stu-id="64761-262">Saves a handle to the control having the input focus if the dialog box is being hidden, then calls [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) to complete the default action.</span></span>                                                                                                                                                                                                                                                                                                                     |
| [<span data-ttu-id="64761-263">**WM \_ SYSCOMMAND**</span><span class="sxs-lookup"><span data-stu-id="64761-263">**WM\_SYSCOMMAND**</span></span>](/windows/desktop/menurc/wm-syscommand)         | <span data-ttu-id="64761-264">如果對話方塊已最小化，則將控制碼儲存至具有輸入焦點的控制項，然後呼叫 [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) 以完成預設動作。</span><span class="sxs-lookup"><span data-stu-id="64761-264">Saves a handle to the control having the input focus if the dialog box is being minimized, then calls [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) to complete the default action.</span></span>                                                                                                                                                                                                                                                                                                                  |
| [<span data-ttu-id="64761-265">**WM \_ VKEYTOITEM**</span><span class="sxs-lookup"><span data-stu-id="64761-265">**WM\_VKEYTOITEM**</span></span>](../controls/wm-vkeytoitem.md)         | <span data-ttu-id="64761-266">傳回零。</span><span class="sxs-lookup"><span data-stu-id="64761-266">Returns zero.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |

<span data-ttu-id="64761-267">預先定義的視窗程式會將所有其他訊息傳遞給 [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) ，以進行預設處理。</span><span class="sxs-lookup"><span data-stu-id="64761-267">The predefined window procedure passes all other messages to [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) for default processing.</span></span>

## <a name="dialog-box-keyboard-interface"></a><span data-ttu-id="64761-268">對話方塊鍵盤介面</span><span class="sxs-lookup"><span data-stu-id="64761-268">Dialog Box Keyboard Interface</span></span>

<span data-ttu-id="64761-269">系統會為對話方塊提供特殊的鍵盤介面，以執行數個索引鍵的特殊處理。</span><span class="sxs-lookup"><span data-stu-id="64761-269">The system provides a special keyboard interface for dialog boxes that carries out special processing for several keys.</span></span> <span data-ttu-id="64761-270">介面會產生對應至對話方塊中特定按鈕的訊息，或將輸入焦點從一個控制項變更為另一個控制項。</span><span class="sxs-lookup"><span data-stu-id="64761-270">The interface generates messages that correspond to certain buttons in the dialog box or changes the input focus from one control to another.</span></span> <span data-ttu-id="64761-271">以下是在此介面中使用的金鑰及其各自的動作。</span><span class="sxs-lookup"><span data-stu-id="64761-271">Following are the keys used in this interface and their respective actions.</span></span>


| <span data-ttu-id="64761-272">Key</span><span class="sxs-lookup"><span data-stu-id="64761-272">Key</span></span>            | <span data-ttu-id="64761-273">動作</span><span class="sxs-lookup"><span data-stu-id="64761-273">Action</span></span>                                                                                                                                                                    |
|----------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="64761-274">ALT +*助憶鍵*</span><span class="sxs-lookup"><span data-stu-id="64761-274">ALT+*mnemonic*</span></span> | <span data-ttu-id="64761-275">將輸入焦點移至第一個控制項 (具有 [**WS \_ TABSTOP**](/windows/desktop/winmsg/window-styles) 樣式) 在包含指定助憶鍵的靜態控制項之後。</span><span class="sxs-lookup"><span data-stu-id="64761-275">Moves the input focus to the first control (having the [**WS\_TABSTOP**](/windows/desktop/winmsg/window-styles) style) after the static control containing the specified mnemonic.</span></span>        |
| <span data-ttu-id="64761-276">DOWN</span><span class="sxs-lookup"><span data-stu-id="64761-276">DOWN</span></span>           | <span data-ttu-id="64761-277">將輸入焦點移至群組中的下一個控制項。</span><span class="sxs-lookup"><span data-stu-id="64761-277">Moves the input focus to the next control in the group.</span></span>                                                                                                                   |
| <span data-ttu-id="64761-278">ENTER</span><span class="sxs-lookup"><span data-stu-id="64761-278">ENTER</span></span>          | <span data-ttu-id="64761-279">將 [**WM \_ 命令**](/windows/desktop/menurc/wm-command) 訊息傳送至對話方塊程式。</span><span class="sxs-lookup"><span data-stu-id="64761-279">Sends a [**WM\_COMMAND**](/windows/desktop/menurc/wm-command) message to the dialog box procedure.</span></span> <span data-ttu-id="64761-280">*WParam* 參數會設定為 IDOK 或預設 push 按鈕的控制項識別碼。</span><span class="sxs-lookup"><span data-stu-id="64761-280">The *wParam* parameter is set to IDOK or control identifier of the default push button.</span></span> |
| <span data-ttu-id="64761-281">ESC</span><span class="sxs-lookup"><span data-stu-id="64761-281">ESC</span></span>            | <span data-ttu-id="64761-282">將 [**WM \_ 命令**](/windows/desktop/menurc/wm-command) 訊息傳送至對話方塊程式。</span><span class="sxs-lookup"><span data-stu-id="64761-282">Sends a [**WM\_COMMAND**](/windows/desktop/menurc/wm-command) message to the dialog box procedure.</span></span> <span data-ttu-id="64761-283">*WParam* 參數設定為 IDCANCEL。</span><span class="sxs-lookup"><span data-stu-id="64761-283">The *wParam* parameter is set to IDCANCEL.</span></span>                                              |
| <span data-ttu-id="64761-284">LEFT</span><span class="sxs-lookup"><span data-stu-id="64761-284">LEFT</span></span>           | <span data-ttu-id="64761-285">將輸入焦點移至群組中的上一個控制項。</span><span class="sxs-lookup"><span data-stu-id="64761-285">Moves the input focus to the previous control in the group.</span></span>                                                                                                               |
| <span data-ttu-id="64761-286">*記憶*</span><span class="sxs-lookup"><span data-stu-id="64761-286">*mnemonic*</span></span>     | <span data-ttu-id="64761-287">將輸入焦點移至第一個控制項 (具有 [**WS \_ TABSTOP**](/windows/desktop/winmsg/window-styles) 樣式) 在包含指定助憶鍵的靜態控制項之後。</span><span class="sxs-lookup"><span data-stu-id="64761-287">Moves the input focus to the first control (having the [**WS\_TABSTOP**](/windows/desktop/winmsg/window-styles) style) after the static control containing the specified mnemonic.</span></span>        |
| <span data-ttu-id="64761-288">RIGHT</span><span class="sxs-lookup"><span data-stu-id="64761-288">RIGHT</span></span>          | <span data-ttu-id="64761-289">將輸入焦點移至群組中的下一個控制項。</span><span class="sxs-lookup"><span data-stu-id="64761-289">Moves the input focus to the next control in the group.</span></span>                                                                                                                   |
| <span data-ttu-id="64761-290">SHIFT+TAB</span><span class="sxs-lookup"><span data-stu-id="64761-290">SHIFT+TAB</span></span>      | <span data-ttu-id="64761-291">將輸入焦點移至具有 [**WS \_ TABSTOP**](/windows/desktop/winmsg/window-styles) 樣式的上一個控制項。</span><span class="sxs-lookup"><span data-stu-id="64761-291">Moves the input focus to the previous control that has the [**WS\_TABSTOP**](/windows/desktop/winmsg/window-styles) style.</span></span>                                                                |
| <span data-ttu-id="64761-292">TAB</span><span class="sxs-lookup"><span data-stu-id="64761-292">TAB</span></span>            | <span data-ttu-id="64761-293">將輸入焦點移至具有 [**WS \_ TABSTOP**](/windows/desktop/winmsg/window-styles) 樣式的下一個控制項。</span><span class="sxs-lookup"><span data-stu-id="64761-293">Moves the input focus to the next control that has the [**WS\_TABSTOP**](/windows/desktop/winmsg/window-styles) style.</span></span>                                                                    |
| <span data-ttu-id="64761-294">UP</span><span class="sxs-lookup"><span data-stu-id="64761-294">UP</span></span>             | <span data-ttu-id="64761-295">將輸入焦點移至群組中的上一個控制項。</span><span class="sxs-lookup"><span data-stu-id="64761-295">Moves the input focus to the previous control in the group.</span></span>                                                                                                               |

<span data-ttu-id="64761-296">系統會自動提供所有強制回應對話方塊的鍵盤介面。</span><span class="sxs-lookup"><span data-stu-id="64761-296">The system automatically provides the keyboard interface for all modal dialog boxes.</span></span> <span data-ttu-id="64761-297">除非應用程式呼叫 [**IsDialogMessage**](/windows/desktop/api/Winuser/nf-winuser-isdialogmessagea) 函式來篩選其主要訊息迴圈中的訊息，否則它不會提供非強制回應對話方塊的介面。</span><span class="sxs-lookup"><span data-stu-id="64761-297">It does not provide the interface for modeless dialog boxes unless the application calls the [**IsDialogMessage**](/windows/desktop/api/Winuser/nf-winuser-isdialogmessagea) function to filter messages in its main message loop.</span></span> <span data-ttu-id="64761-298">這表示應用程式必須在從訊息佇列中取出訊息之後，立即將訊息傳遞至 **IsDialogMessage** 。</span><span class="sxs-lookup"><span data-stu-id="64761-298">This means that the application must pass the message to **IsDialogMessage** immediately after retrieving the message from the message queue.</span></span> <span data-ttu-id="64761-299">如果訊息適用于對話方塊，而且會傳回非零值以表示訊息已經過處理，而且不得傳遞給 [**TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) 或 [**DispatchMessage**](/windows/desktop/api/winuser/nf-winuser-dispatchmessage) 函數，則函式會處理這些訊息。</span><span class="sxs-lookup"><span data-stu-id="64761-299">The function processes the messages if it is for the dialog box and returns a nonzero value to indicate that the message has been processed and must not be passed to the [**TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) or [**DispatchMessage**](/windows/desktop/api/winuser/nf-winuser-dispatchmessage) function.</span></span>

<span data-ttu-id="64761-300">由於對話方塊鍵盤介面會使用方向按鍵在對話方塊中的控制項之間移動，因此應用程式無法使用這些索引鍵來滾動任何強制回應對話方塊的內容，或呼叫 [**IsDialogMessage**](/windows/desktop/api/Winuser/nf-winuser-isdialogmessagea) 的任何非強制回應對話方塊。</span><span class="sxs-lookup"><span data-stu-id="64761-300">Because the dialog box keyboard interface uses direction keys to move between controls in a dialog box, an application cannot use these keys to scroll the contents of any modal dialog box or any modeless dialog box for which [**IsDialogMessage**](/windows/desktop/api/Winuser/nf-winuser-isdialogmessagea) is called.</span></span> <span data-ttu-id="64761-301">當對話方塊有捲軸時，應用程式必須為捲軸提供替代的鍵盤介面。</span><span class="sxs-lookup"><span data-stu-id="64761-301">When a dialog box has scroll bars, the application must provide an alternate keyboard interface for the scroll bars.</span></span> <span data-ttu-id="64761-302">請注意，當系統包含滑鼠時，可使用滑鼠介面進行滾動。</span><span class="sxs-lookup"><span data-stu-id="64761-302">Note that the mouse interface for scrolling is available when the system includes a mouse.</span></span>

### <a name="the-ws_tabstop-style"></a><span data-ttu-id="64761-303">WS \_ TABSTOP 樣式</span><span class="sxs-lookup"><span data-stu-id="64761-303">The WS\_TABSTOP Style</span></span>

<span data-ttu-id="64761-304">[**WS \_ TABSTOP**](/windows/desktop/winmsg/window-styles)樣式指定使用者可以藉由按下 TAB 鍵或 SHIFT + tab 鍵來移動的控制項。</span><span class="sxs-lookup"><span data-stu-id="64761-304">The [**WS\_TABSTOP**](/windows/desktop/winmsg/window-styles) style specifies the controls to which the user can move by pressing the TAB key or SHIFT+TAB keys.</span></span>

<span data-ttu-id="64761-305">當使用者按下 TAB 或 SHIFT + TAB 時，系統會先判斷這些按鍵是否由目前具有輸入焦點的控制項處理。</span><span class="sxs-lookup"><span data-stu-id="64761-305">When the user presses TAB or SHIFT+TAB, the system first determines whether these keys are processed by the control that currently has the input focus.</span></span> <span data-ttu-id="64761-306">它會將一個 [**WM \_ GETDLGCODE**](wm-getdlgcode.md) 訊息傳送給控制項，而且如果控制項傳回 DLGC WANTTAB，系統就會將索引 \_ 鍵傳遞給控制項。</span><span class="sxs-lookup"><span data-stu-id="64761-306">It sends the control a [**WM\_GETDLGCODE**](wm-getdlgcode.md) message, and if the control returns DLGC\_WANTTAB, the system passes the keys to the control.</span></span> <span data-ttu-id="64761-307">否則，系統會使用 [**GetNextDlgTabItem**](/windows/desktop/api/Winuser/nf-winuser-getnextdlgtabitem) 函式來尋找可見、未停用且具有 [**WS \_ TABSTOP**](/windows/desktop/winmsg/window-styles) 樣式的下一個控制項。</span><span class="sxs-lookup"><span data-stu-id="64761-307">Otherwise, the system uses the [**GetNextDlgTabItem**](/windows/desktop/api/Winuser/nf-winuser-getnextdlgtabitem) function to locate the next control that is visible, not disabled, and that has the [**WS\_TABSTOP**](/windows/desktop/winmsg/window-styles) style.</span></span> <span data-ttu-id="64761-308">搜尋會從目前具有輸入焦點的控制項開始，並依照控制項的建立順序進行（也就是在對話方塊範本中定義它們的順序）。</span><span class="sxs-lookup"><span data-stu-id="64761-308">The search starts with the control currently having the input focus and proceeds in the order in which the controls were created—that is, the order in which they are defined in the dialog box template.</span></span> <span data-ttu-id="64761-309">當系統找出具有必要特性的控制項時，系統會將輸入焦點移至該控制項。</span><span class="sxs-lookup"><span data-stu-id="64761-309">When the system locates a control having the required characteristics, the system moves the input focus to it.</span></span>

<span data-ttu-id="64761-310">如果搜尋下一個具有 [**ws \_ TABSTOP**](/windows/desktop/winmsg/window-styles) 樣式的控制項遇到具有 **ws \_ EX \_ CONTROLPARENT** 樣式的視窗，系統會以遞迴方式搜尋視窗的子系。</span><span class="sxs-lookup"><span data-stu-id="64761-310">If the search for the next control with the [**WS\_TABSTOP**](/windows/desktop/winmsg/window-styles) style encounters a window with the **WS\_EX\_CONTROLPARENT** style, the system recursively searches the window's children.</span></span>

<span data-ttu-id="64761-311">應用程式也可以使用 [**GetNextDlgTabItem**](/windows/desktop/api/Winuser/nf-winuser-getnextdlgtabitem) 來找出具有 [**WS \_ TABSTOP**](/windows/desktop/winmsg/window-styles) 樣式的控制項。</span><span class="sxs-lookup"><span data-stu-id="64761-311">An application can also use [**GetNextDlgTabItem**](/windows/desktop/api/Winuser/nf-winuser-getnextdlgtabitem) to locate controls having the [**WS\_TABSTOP**](/windows/desktop/winmsg/window-styles) style.</span></span> <span data-ttu-id="64761-312">函式會抓取具有 **WS \_ TABSTOP** 樣式的下一個或上一個控制項的視窗控制碼，而不會移動輸入焦點。</span><span class="sxs-lookup"><span data-stu-id="64761-312">The function retrieves the window handle of the next or previous control having the **WS\_TABSTOP** style without moving the input focus.</span></span>

### <a name="the-ws_group-style"></a><span data-ttu-id="64761-313">WS \_ 群組樣式</span><span class="sxs-lookup"><span data-stu-id="64761-313">The WS\_GROUP Style</span></span>

<span data-ttu-id="64761-314">根據預設，每當使用者按下方向鍵時，系統就會將輸入焦點移至下一個或上一個控制項。</span><span class="sxs-lookup"><span data-stu-id="64761-314">By default, the system moves the input focus to the next or previous control whenever the user presses a direction key.</span></span> <span data-ttu-id="64761-315">只要具有輸入焦點的目前控制項不會處理這些索引鍵，而下一個或上一個控制項不是靜態控制項，系統就會繼續將輸入焦點移到對話方塊中的所有控制項，因為使用者繼續按下方向鍵。</span><span class="sxs-lookup"><span data-stu-id="64761-315">As long as the current control with the input focus does not process these keys and the next or previous control is not a static control, the system continues to move the input focus through all controls in the dialog box as the user continues to press the direction keys.</span></span>

<span data-ttu-id="64761-316">應用程式可以使用 [**WS \_ GROUP**](/windows/desktop/winmsg/window-styles) 樣式來修改此預設行為。</span><span class="sxs-lookup"><span data-stu-id="64761-316">An application can use the [**WS\_GROUP**](/windows/desktop/winmsg/window-styles) style to modify this default behavior.</span></span> <span data-ttu-id="64761-317">樣式會標示控制項群組的開頭。</span><span class="sxs-lookup"><span data-stu-id="64761-317">The style marks the beginning of a group of controls.</span></span> <span data-ttu-id="64761-318">如果群組中的控制項在使用者開始按下方向按鍵時具有輸入焦點，則焦點會保留在群組中。</span><span class="sxs-lookup"><span data-stu-id="64761-318">If a control in the group has the input focus when the user begins pressing direction keys, the focus remains in the group.</span></span> <span data-ttu-id="64761-319">一般而言，群組中的第一個控制項必須具有 **WS \_ 群組** 樣式，而且群組中的所有其他控制項都不能有這個樣式。</span><span class="sxs-lookup"><span data-stu-id="64761-319">In general, the first control in a group must have the **WS\_GROUP** style and all other controls in the group must not have this style.</span></span> <span data-ttu-id="64761-320">群組中的所有控制項都必須是連續的，也就是說，它們必須連續建立，且沒有任何仲介控制項。</span><span class="sxs-lookup"><span data-stu-id="64761-320">All controls in the group must be contiguous—that is, they must have been created consecutively with no intervening controls.</span></span>

<span data-ttu-id="64761-321">當使用者按下方向鍵時，系統會先判斷具有輸入焦點的目前控制項是否處理方向按鍵。</span><span class="sxs-lookup"><span data-stu-id="64761-321">When the user presses a direction key, the system first determines whether the current control having the input focus processes the direction keys.</span></span> <span data-ttu-id="64761-322">系統會將 [**WM \_ GETDLGCODE**](wm-getdlgcode.md) 訊息傳送給控制項，如果控制項傳回 **DLGC \_ WANTARROWS** 值，就會將索引鍵傳遞給控制項。</span><span class="sxs-lookup"><span data-stu-id="64761-322">The system sends a [**WM\_GETDLGCODE**](wm-getdlgcode.md) message to the control and if the control returns the **DLGC\_WANTARROWS** value, passes the key to the control.</span></span> <span data-ttu-id="64761-323">否則，系統會使用 [**GetNextDlgGroupItem**](/windows/desktop/api/Winuser/nf-winuser-getnextdlggroupitem) 函數來判斷群組中的下一個控制項。</span><span class="sxs-lookup"><span data-stu-id="64761-323">Otherwise, the system uses the [**GetNextDlgGroupItem**](/windows/desktop/api/Winuser/nf-winuser-getnextdlggroupitem) function to determine the next control in the group.</span></span>

<span data-ttu-id="64761-324">[**GetNextDlgGroupItem**](/windows/desktop/api/Winuser/nf-winuser-getnextdlggroupitem) 會依順序 (或反向順序搜尋控制項，) 它們建立的順序。</span><span class="sxs-lookup"><span data-stu-id="64761-324">[**GetNextDlgGroupItem**](/windows/desktop/api/Winuser/nf-winuser-getnextdlggroupitem) searches controls in the order (or reverse order) they were created.</span></span> <span data-ttu-id="64761-325">如果使用者按下向右鍵或向下鍵，則 **GetNextDlgGroupItem** 會傳回下一個控制項（如果該控制項沒有 [**WS \_ 群組**](/windows/desktop/winmsg/window-styles) 樣式）。</span><span class="sxs-lookup"><span data-stu-id="64761-325">If the user presses the RIGHT or DOWN key, **GetNextDlgGroupItem** returns the next control if that control does not have the [**WS\_GROUP**](/windows/desktop/winmsg/window-styles) style.</span></span> <span data-ttu-id="64761-326">否則，函式會反轉搜尋的順序，並傳回具有 **WS \_ 群組** 樣式的第一個控制項。</span><span class="sxs-lookup"><span data-stu-id="64761-326">Otherwise, the function reverses the order of the search and returns the first control that has the **WS\_GROUP** style.</span></span> <span data-ttu-id="64761-327">如果使用者按下左鍵或向上鍵，則函式會傳回前一個控制項，除非目前的控制項已經有 **WS \_ 群組** 樣式。</span><span class="sxs-lookup"><span data-stu-id="64761-327">If the user presses the LEFT or UP key, the function returns the previous control unless the current control already has the **WS\_GROUP** style.</span></span> <span data-ttu-id="64761-328">如果目前的控制項具有此樣式，則函式會反轉搜尋的順序、找出具有 **WS \_ 群組** 樣式的第一個控制項，並傳回緊接在定位控制項之前的控制項。</span><span class="sxs-lookup"><span data-stu-id="64761-328">If the current control has this style, the function reverses the order of the search, locates the first control having the **WS\_GROUP** style, and returns the control that immediately precedes the located control.</span></span>

<span data-ttu-id="64761-329">如果搜尋群組中的下一個控制項遇到 **WS \_ EX \_ CONTROLPARENT** 樣式的視窗，系統會以遞迴方式搜尋視窗的子系。</span><span class="sxs-lookup"><span data-stu-id="64761-329">If the search for the next control in the group encounters a window with the **WS\_EX\_CONTROLPARENT** style, the system recursively searches the window's children.</span></span>

<span data-ttu-id="64761-330">系統有下一個或上一個控制項之後，它會將 [**WM \_ GETDLGCODE**](wm-getdlgcode.md) 訊息傳送給控制項，以決定控制項類型。</span><span class="sxs-lookup"><span data-stu-id="64761-330">After the system has the next or previous control, it sends a [**WM\_GETDLGCODE**](wm-getdlgcode.md) message to the control to determine the control type.</span></span> <span data-ttu-id="64761-331">系統接著會移動輸入焦點，以控制它是否不是靜態控制項。</span><span class="sxs-lookup"><span data-stu-id="64761-331">The system then moves the input focus to control if it is not a static control.</span></span> <span data-ttu-id="64761-332">如果控制項是自動選項按鈕，系統就會傳送 [**BM \_ CLICK**](../controls/bm-click.md) 訊息給它。</span><span class="sxs-lookup"><span data-stu-id="64761-332">If the control is an automatic radio button, the system sends a [**BM\_CLICK**](../controls/bm-click.md) message to it.</span></span> <span data-ttu-id="64761-333">應用程式也可以使用 [**GetNextDlgGroupItem**](/windows/desktop/api/Winuser/nf-winuser-getnextdlggroupitem) 來尋找群組中的控制項。</span><span class="sxs-lookup"><span data-stu-id="64761-333">An application can also use [**GetNextDlgGroupItem**](/windows/desktop/api/Winuser/nf-winuser-getnextdlggroupitem) to locate controls in a group.</span></span>

<span data-ttu-id="64761-334">一般而言，群組中的第一個控制項會結合 [**ws \_ 群組**](/windows/desktop/winmsg/window-styles) 和 [**ws \_ TABSTOP**](/windows/desktop/winmsg/window-styles) 樣式，讓使用者可以使用 TAB 鍵從群組移至群組。</span><span class="sxs-lookup"><span data-stu-id="64761-334">Generally, the first control in the group combines the [**WS\_GROUP**](/windows/desktop/winmsg/window-styles) and [**WS\_TABSTOP**](/windows/desktop/winmsg/window-styles) styles so that the user can move from group to group by using the TAB key.</span></span> <span data-ttu-id="64761-335">如果群組包含選項按鈕，應用程式應該只將 **WS \_ TABSTOP** 樣式套用至群組中的第一個控制項。</span><span class="sxs-lookup"><span data-stu-id="64761-335">If the group contains radio buttons, the application should apply the **WS\_TABSTOP** style only to the first control in the group.</span></span> <span data-ttu-id="64761-336">當使用者在群組的控制項之間移動時，系統會自動移動樣式。</span><span class="sxs-lookup"><span data-stu-id="64761-336">The system automatically moves the style when the user moves between controls in the group.</span></span> <span data-ttu-id="64761-337">這可確保當使用者使用 TAB 鍵移至群組時，輸入焦點一律會位於最近選取的控制項上。</span><span class="sxs-lookup"><span data-stu-id="64761-337">This ensures that the input focus will always be on the most recently selected control when the user moves to the group using the TAB key.</span></span>

### <a name="mnemonics"></a><span data-ttu-id="64761-338">符號</span><span class="sxs-lookup"><span data-stu-id="64761-338">Mnemonics</span></span>

<span data-ttu-id="64761-339">助憶鍵是在按鈕的標籤或靜態控制項文字中選取的字母或數位。</span><span class="sxs-lookup"><span data-stu-id="64761-339">A mnemonic is a selected letter or digit in the label of a button or in the text of a static control.</span></span> <span data-ttu-id="64761-340">當使用者按下對應于助憶鍵的按鍵，或按下此按鍵和 ALT 鍵組合時，系統就會將輸入焦點移至與助憶鍵相關聯的控制項。</span><span class="sxs-lookup"><span data-stu-id="64761-340">The system moves the input focus to the control associated with the mnemonic whenever the user either presses the key that corresponds to the mnemonic or presses this key and the ALT key in combination.</span></span> <span data-ttu-id="64761-341">助憶鍵提供快速的方法，讓使用者使用鍵盤移至指定的控制項。</span><span class="sxs-lookup"><span data-stu-id="64761-341">Mnemonics provide a quick way for the user to move to a specified control by using the keyboard.</span></span>

<span data-ttu-id="64761-342">應用程式會建立控制項的助憶鍵，方法是在標籤中的選取字母或數位之前插入連字號 (&) ，或將控制項的文字。</span><span class="sxs-lookup"><span data-stu-id="64761-342">An application creates a mnemonic for a control by inserting the ampersand (&) immediately before the selected letter or digit in the label or text for the control.</span></span> <span data-ttu-id="64761-343">在大部分的情況下，對話方塊範本中的控制項提供的以 null 終止的字串包含連字號。</span><span class="sxs-lookup"><span data-stu-id="64761-343">In most cases, the null-terminated string provided with the control in the dialog box template contains the ampersand.</span></span> <span data-ttu-id="64761-344">不過，應用程式可以使用 [**SetDlgItemText**](/windows/desktop/api/Winuser/nf-winuser-setdlgitemtexta) 函式來取代控制項的現有標籤或文字，以隨時建立助憶鍵。</span><span class="sxs-lookup"><span data-stu-id="64761-344">However, an application can create a mnemonic at any time by replacing a control's existing label or text by using the [**SetDlgItemText**](/windows/desktop/api/Winuser/nf-winuser-setdlgitemtexta) function.</span></span> <span data-ttu-id="64761-345">只能為每個控制項指定一個助憶鍵。</span><span class="sxs-lookup"><span data-stu-id="64761-345">Only one mnemonic can be specified for each control.</span></span> <span data-ttu-id="64761-346">雖然建議使用，但對話方塊中的助憶鍵不需要是唯一的。</span><span class="sxs-lookup"><span data-stu-id="64761-346">Although it is recommended, mnemonics in a dialog box need not be unique.</span></span>

<span data-ttu-id="64761-347">當使用者按下字母或數位鍵時，系統會先判斷具有輸入焦點的目前控制項是否處理該索引鍵。</span><span class="sxs-lookup"><span data-stu-id="64761-347">When the user presses a letter or digit key, the system first determines whether the current control having the input focus processes the key.</span></span> <span data-ttu-id="64761-348">系統會將 [**WM \_ GETDLGCODE**](wm-getdlgcode.md) 訊息傳送給控制項，如果控制項傳回 **DLGC \_ WANTALLKEYS** 或 **DLG \_ WANTMESSAGE** 值，系統就會將索引鍵傳遞給控制項。</span><span class="sxs-lookup"><span data-stu-id="64761-348">The system sends a [**WM\_GETDLGCODE**](wm-getdlgcode.md) message to the control, and if the control returns the **DLGC\_WANTALLKEYS** or **DLG\_WANTMESSAGE** value, the system passes the key to the control.</span></span> <span data-ttu-id="64761-349">否則，它會搜尋其助憶鍵符合指定字母或數位的控制項。</span><span class="sxs-lookup"><span data-stu-id="64761-349">Otherwise, it searches for a control whose mnemonic matches the specified letter or digit.</span></span> <span data-ttu-id="64761-350">它會繼續搜尋，直到它找到控制項或檢查過所有控制項為止。</span><span class="sxs-lookup"><span data-stu-id="64761-350">It continues to search until it locates a control or has examined all controls.</span></span> <span data-ttu-id="64761-351">在搜尋期間，它會略過具有 [**SS \_ NOPREFIX**](../controls/static-control-styles.md) 樣式的任何靜態控制項。</span><span class="sxs-lookup"><span data-stu-id="64761-351">During the search, it skips any static controls that have the [**SS\_NOPREFIX**](../controls/static-control-styles.md) style.</span></span>

<span data-ttu-id="64761-352">如果搜尋具有相符助憶鍵的控制項遇到具有 **WS \_ EX \_ CONTROLPARENT** 樣式的視窗，系統會以遞迴方式搜尋視窗的子系。</span><span class="sxs-lookup"><span data-stu-id="64761-352">If the search for a control with a matching mnemonic encounters a window with the **WS\_EX\_CONTROLPARENT** style, the system recursively searches the window's children.</span></span>

<span data-ttu-id="64761-353">如果系統找出靜態控制項，而且控制項並未停用，系統會將輸入焦點移至可見、未停用且具有 [**WS \_ TABSTOP**](/windows/desktop/winmsg/window-styles) 樣式的靜態控制項之後的第一個控制項。</span><span class="sxs-lookup"><span data-stu-id="64761-353">If the system locates a static control and the control is not disabled, the system moves the input focus to the first control after the static control that is visible, not disabled, and that has the [**WS\_TABSTOP**](/windows/desktop/winmsg/window-styles) style.</span></span> <span data-ttu-id="64761-354">如果系統找到具有相符助憶鍵的其他控制項，則會將輸入焦點移至該控制項。</span><span class="sxs-lookup"><span data-stu-id="64761-354">If the system locates some other control that has a matching mnemonic, it moves the input focus to that control.</span></span> <span data-ttu-id="64761-355">如果控制項是預設的 [按下] 按鈕，系統就會將 [**BN \_ 按一下**](../controls/bn-clicked.md) 的通知訊息傳送至對話方塊程式。</span><span class="sxs-lookup"><span data-stu-id="64761-355">If the control is a default push button, the system sends a [**BN\_CLICKED**](../controls/bn-clicked.md) notification message to the dialog box procedure.</span></span> <span data-ttu-id="64761-356">如果控制項是另一種按鈕樣式，而對話方塊中沒有其他控制項具有相同的助憶鍵，則系統會將 [**BM \_ 按一下**](../controls/bm-click.md) 訊息傳送至控制項。</span><span class="sxs-lookup"><span data-stu-id="64761-356">If the control is another style of button and there is no other control in the dialog box having the same mnemonic, the system sends the [**BM\_CLICK**](../controls/bm-click.md) message to the control.</span></span>

## <a name="dialog-box-settings"></a><span data-ttu-id="64761-357">對話方塊設定</span><span class="sxs-lookup"><span data-stu-id="64761-357">Dialog Box Settings</span></span>

<span data-ttu-id="64761-358">對話方塊設定是對話方塊中控制項的目前選項和值。</span><span class="sxs-lookup"><span data-stu-id="64761-358">The dialog box settings are the current selections and values for the controls in the dialog box.</span></span> <span data-ttu-id="64761-359">對話方塊程式在建立對話方塊時，負責將控制項初始化為這些設定。</span><span class="sxs-lookup"><span data-stu-id="64761-359">The dialog box procedure is responsible for initializing the controls to these settings when creating the dialog box.</span></span> <span data-ttu-id="64761-360">它也負責在終結對話方塊之前，先從控制項中取出目前的設定。</span><span class="sxs-lookup"><span data-stu-id="64761-360">It is also responsible for retrieving the current settings from the controls before destroying the dialog box.</span></span> <span data-ttu-id="64761-361">用來初始化和抓取設定的方法取決於控制項的類型。</span><span class="sxs-lookup"><span data-stu-id="64761-361">The methods used to initialize and retrieve settings depend on the type of control.</span></span>

<span data-ttu-id="64761-362">如需詳細資訊，請參閱下列主題：</span><span class="sxs-lookup"><span data-stu-id="64761-362">For more information, see the following topics:</span></span>

-   [<span data-ttu-id="64761-363">選項按鈕和核取方塊</span><span class="sxs-lookup"><span data-stu-id="64761-363">Radio Buttons and Check Boxes</span></span>](#radio-buttons-and-check-boxes)
-   [<span data-ttu-id="64761-364">對話方塊編輯控制項</span><span class="sxs-lookup"><span data-stu-id="64761-364">Dialog Box Edit Controls</span></span>](#dialog-box-edit-controls)
-   [<span data-ttu-id="64761-365">清單方塊、下拉式方塊和目錄清單</span><span class="sxs-lookup"><span data-stu-id="64761-365">List Boxes, Combo Boxes, and Directory Listings</span></span>](#list-boxes-combo-boxes-and-directory-listings)
-   [<span data-ttu-id="64761-366">對話方塊控制項訊息</span><span class="sxs-lookup"><span data-stu-id="64761-366">Dialog Box Control Messages</span></span>](#dialog-box-control-messages)

### <a name="radio-buttons-and-check-boxes"></a><span data-ttu-id="64761-367">選項按鈕和核取方塊</span><span class="sxs-lookup"><span data-stu-id="64761-367">Radio Buttons and Check Boxes</span></span>

<span data-ttu-id="64761-368">對話方塊使用選項按鈕和核取方塊，讓使用者從選項清單中選擇。</span><span class="sxs-lookup"><span data-stu-id="64761-368">Dialog boxes use radio buttons and check boxes to let the user choose from a list of options.</span></span> <span data-ttu-id="64761-369">選項按鈕可讓使用者從互斥的選項中選擇;核取方塊可讓使用者挑選選項的組合。</span><span class="sxs-lookup"><span data-stu-id="64761-369">Radio buttons let the user choose from mutually exclusive options; check boxes let the user pick a combination of options.</span></span>

<span data-ttu-id="64761-370">對話方塊程式可以使用 [**CheckDlgButton**](https://msdn.microsoft.com/library/Cc410649(v=MSDN.10).aspx) 函數設定或清除核取方塊，以設定核取方塊的初始狀態。</span><span class="sxs-lookup"><span data-stu-id="64761-370">The dialog box procedure can set the initial state of a check box by using the [**CheckDlgButton**](https://msdn.microsoft.com/library/Cc410649(v=MSDN.10).aspx) function, which sets or clears the check box.</span></span> <span data-ttu-id="64761-371">針對互斥選項按鈕群組中的選項按鈕，對話方塊程式可以使用 [**CheckRadioButton**](https://msdn.microsoft.com/library/Cc410654(v=MSDN.10).aspx) 函式來設定適當的選項按鈕，並自動清除任何其他選項按鈕。</span><span class="sxs-lookup"><span data-stu-id="64761-371">For radio buttons in a group of mutually exclusive radio buttons, the dialog box procedure can use the [**CheckRadioButton**](https://msdn.microsoft.com/library/Cc410654(v=MSDN.10).aspx) function to set the appropriate radio button and automatically clear any other radio button.</span></span>

<span data-ttu-id="64761-372">在對話方塊終止之前，對話方塊程式可以檢查每個選項按鈕的狀態，並使用 [**IsDlgButtonChecked**](https://msdn.microsoft.com/library/Cc364806(v=MSDN.10).aspx) 函式來檢查按鈕的目前狀態。</span><span class="sxs-lookup"><span data-stu-id="64761-372">Before a dialog box terminates, the dialog box procedure can check the state of each radio button and check box by using the [**IsDlgButtonChecked**](https://msdn.microsoft.com/library/Cc364806(v=MSDN.10).aspx) function, which returns the current state of the button.</span></span> <span data-ttu-id="64761-373">對話方塊通常會儲存此資訊，以在下一次建立對話方塊時初始化按鈕。</span><span class="sxs-lookup"><span data-stu-id="64761-373">A dialog box typically saves this information to initialize the buttons the next time it creates the dialog box.</span></span>

### <a name="dialog-box-edit-controls"></a><span data-ttu-id="64761-374">對話方塊編輯控制項</span><span class="sxs-lookup"><span data-stu-id="64761-374">Dialog Box Edit Controls</span></span>

<span data-ttu-id="64761-375">許多對話方塊都有編輯控制項可讓使用者提供文字做為輸入。</span><span class="sxs-lookup"><span data-stu-id="64761-375">Many dialog boxes have edit controls that let the user supply text as input.</span></span> <span data-ttu-id="64761-376">當對話方塊初次開機時，大部分的對話方塊程式都會初始化編輯控制項。</span><span class="sxs-lookup"><span data-stu-id="64761-376">Most dialog box procedures initialize an edit control when the dialog box first starts.</span></span> <span data-ttu-id="64761-377">例如，對話方塊程式可能會在控制項中放置建議的檔案名，讓使用者可以選取、修改或取代。</span><span class="sxs-lookup"><span data-stu-id="64761-377">For example, the dialog box procedure may place a proposed filename in the control that the user can then select, modify, or replace.</span></span> <span data-ttu-id="64761-378">對話方塊程式可以使用 [**SetDlgItemText**](/windows/desktop/api/Winuser/nf-winuser-setdlgitemtexta) 函式來設定編輯控制項中的文字，此函數會將文字從指定的緩衝區複製到編輯控制項。</span><span class="sxs-lookup"><span data-stu-id="64761-378">The dialog box procedure can set the text in an edit control by using the [**SetDlgItemText**](/windows/desktop/api/Winuser/nf-winuser-setdlgitemtexta) function, which copies text from a specified buffer to the edit control.</span></span> <span data-ttu-id="64761-379">當編輯控制項收到輸入焦點時，會自動選取完整的文字進行編輯。</span><span class="sxs-lookup"><span data-stu-id="64761-379">When the edit control receives the input focus, it automatically selects the complete text for editing.</span></span>

<span data-ttu-id="64761-380">因為編輯控制項不會自動將其文字傳回至對話方塊，所以對話方塊程式必須在結束之前取出文字。</span><span class="sxs-lookup"><span data-stu-id="64761-380">Because edit controls do not automatically return their text to the dialog box, the dialog box procedure must retrieve the text before it terminates.</span></span> <span data-ttu-id="64761-381">它可以使用 [**GetDlgItemText**](/windows/desktop/api/Winuser/nf-winuser-getdlgitemtexta) 函式來取出文字，此函式會將編輯控制項文字複製到緩衝區。</span><span class="sxs-lookup"><span data-stu-id="64761-381">It can retrieve the text by using the [**GetDlgItemText**](/windows/desktop/api/Winuser/nf-winuser-getdlgitemtexta) function, which copies the edit control text to a buffer.</span></span> <span data-ttu-id="64761-382">對話方塊程式通常會儲存此文字，稍後再將編輯控制項初始化，或將其傳遞至父視窗進行處理。</span><span class="sxs-lookup"><span data-stu-id="64761-382">The dialog box procedure typically saves this text to initialize the edit control later or passes it on to the parent window for processing.</span></span>

<span data-ttu-id="64761-383">某些對話方塊使用編輯控制項，讓使用者輸入數位。</span><span class="sxs-lookup"><span data-stu-id="64761-383">Some dialog boxes use edit controls that let the user enter numbers.</span></span> <span data-ttu-id="64761-384">對話方塊程式可以使用 [**GetDlgItemInt**](/windows/desktop/api/Winuser/nf-winuser-getdlgitemint) 函式從編輯控制項取出數位，此函式會從編輯控制項中取出文字，然後將文字轉換成十進位值。</span><span class="sxs-lookup"><span data-stu-id="64761-384">The dialog box procedure can retrieve a number from an edit control by using the [**GetDlgItemInt**](/windows/desktop/api/Winuser/nf-winuser-getdlgitemint) function, which retrieves the text from the edit control and converts the text to a decimal value.</span></span> <span data-ttu-id="64761-385">使用者以小數位數輸入數位。</span><span class="sxs-lookup"><span data-stu-id="64761-385">The user types the number in decimal digits.</span></span> <span data-ttu-id="64761-386">它可以是帶正負號或不帶正負號的。</span><span class="sxs-lookup"><span data-stu-id="64761-386">It can be either signed or unsigned.</span></span> <span data-ttu-id="64761-387">對話方塊程式可以使用 [**SetDlgItemInt**](/windows/desktop/api/Winuser/nf-winuser-setdlgitemint) 函數來顯示整數。</span><span class="sxs-lookup"><span data-stu-id="64761-387">The dialog box procedure can display an integer by using the [**SetDlgItemInt**](/windows/desktop/api/Winuser/nf-winuser-setdlgitemint) function.</span></span> <span data-ttu-id="64761-388">**SetDlgItemInt** 會將帶正負號或不帶正負號的整數轉換成十進位數的字串。</span><span class="sxs-lookup"><span data-stu-id="64761-388">**SetDlgItemInt** converts a signed or unsigned integer to a string of decimal digits.</span></span>

### <a name="list-boxes-combo-boxes-and-directory-listings"></a><span data-ttu-id="64761-389">清單方塊、下拉式方塊和目錄清單</span><span class="sxs-lookup"><span data-stu-id="64761-389">List Boxes, Combo Boxes, and Directory Listings</span></span>

<span data-ttu-id="64761-390">某些對話方塊會顯示名稱清單，使用者可以從中選取一或多個名稱。</span><span class="sxs-lookup"><span data-stu-id="64761-390">Some dialog boxes display lists of names from which the user can select one or more names.</span></span> <span data-ttu-id="64761-391">例如，若要顯示檔案名清單，對話方塊通常會使用清單方塊和 [**DlgDirList**](https://msdn.microsoft.com/library/Cc410788(v=MSDN.10).aspx) 和 [**DlgDirSelectEx**](https://msdn.microsoft.com/library/Cc410769(v=MSDN.10).aspx) 函數。</span><span class="sxs-lookup"><span data-stu-id="64761-391">To display a list of filenames, for example, a dialog box typically uses a list box and the [**DlgDirList**](https://msdn.microsoft.com/library/Cc410788(v=MSDN.10).aspx) and [**DlgDirSelectEx**](https://msdn.microsoft.com/library/Cc410769(v=MSDN.10).aspx) functions.</span></span> <span data-ttu-id="64761-392">**DlgDirList** 函式會自動在清單方塊中填入目前目錄中的檔案名。</span><span class="sxs-lookup"><span data-stu-id="64761-392">The **DlgDirList** function automatically fills a list box with the filenames in the current directory.</span></span> <span data-ttu-id="64761-393">**DlgDirSelect** 函式會從清單方塊中抓取選取的檔案名。</span><span class="sxs-lookup"><span data-stu-id="64761-393">The **DlgDirSelect** function retrieves the selected filename from the list box.</span></span> <span data-ttu-id="64761-394">這兩個函式一起提供一個方便的方式，讓對話方塊顯示目錄清單，讓使用者可以選取檔案，而不需要輸入其名稱和位置。</span><span class="sxs-lookup"><span data-stu-id="64761-394">Together, these two functions provide a convenient way for a dialog box to display a directory listing so the user can select a file without having to type its name and location.</span></span>

<span data-ttu-id="64761-395">對話方塊也可以使用下拉式方塊來顯示檔案名清單。</span><span class="sxs-lookup"><span data-stu-id="64761-395">A dialog box can also use a combo box to display a list of filenames.</span></span> <span data-ttu-id="64761-396">[**DlgDirListComboBox**](https://msdn.microsoft.com/library/Cc410798(v=MSDN.10).aspx)函式會自動將目前目錄中的檔案名填滿下拉式方塊的清單方塊部分。</span><span class="sxs-lookup"><span data-stu-id="64761-396">The [**DlgDirListComboBox**](https://msdn.microsoft.com/library/Cc410798(v=MSDN.10).aspx) function automatically fills a list box portion of the combo box with the filenames in the current directory.</span></span> <span data-ttu-id="64761-397">[**DlgDirSelectComboBoxEx**](https://msdn.microsoft.com/library/Cc410768(v=MSDN.10).aspx)函式會從清單方塊部分抓取選取的檔案名。</span><span class="sxs-lookup"><span data-stu-id="64761-397">The [**DlgDirSelectComboBoxEx**](https://msdn.microsoft.com/library/Cc410768(v=MSDN.10).aspx) function retrieves a selected filename from the list box portion.</span></span>

### <a name="dialog-box-control-messages"></a><span data-ttu-id="64761-398">對話方塊控制項訊息</span><span class="sxs-lookup"><span data-stu-id="64761-398">Dialog Box Control Messages</span></span>

<span data-ttu-id="64761-399">許多控制項都可辨識預先定義的訊息，當控制項收到這些訊息時，會導致這些訊息執行某些動作。</span><span class="sxs-lookup"><span data-stu-id="64761-399">Many controls recognize predefined messages that, when received by controls, cause them to carry out some action.</span></span> <span data-ttu-id="64761-400">例如， [**BM \_ SETCHECK**](../controls/bm-setcheck.md) 訊息會設定核取方塊中的核取方塊，而 [**EM \_ GETSEL**](../controls/em-getsel.md) 訊息會抓取目前選取之控制項文字的部分。</span><span class="sxs-lookup"><span data-stu-id="64761-400">For example, the [**BM\_SETCHECK**](../controls/bm-setcheck.md) message sets the check in a check box and the [**EM\_GETSEL**](../controls/em-getsel.md) message retrieves the portion of the control's text that is currently selected.</span></span> <span data-ttu-id="64761-401">控制訊息提供的對話方塊程式比標準函式更大且更有彈性地存取控制項，因此通常會在對話方塊需要與使用者進行複雜互動時使用。</span><span class="sxs-lookup"><span data-stu-id="64761-401">The control messages give a dialog procedure greater and more flexible access to the controls than the standard functions, so they are often used when the dialog box requires complex interactions with the user.</span></span>

<span data-ttu-id="64761-402">對話方塊程式可以傳送訊息給控制項，方法是提供控制項識別碼並使用 [**SendDlgItemMessage**](/windows/desktop/api/Winuser/nf-winuser-senddlgitemmessagea) 函式，這與 [**SendMessage**](/windows/desktop/api/winuser/nf-winuser-sendmessage) 函式相同，不同之處在于它會使用控制項識別碼而非視窗控制碼來識別要接收訊息的控制項。</span><span class="sxs-lookup"><span data-stu-id="64761-402">A dialog box procedure can send a message to a control by supplying the control identifier and using the [**SendDlgItemMessage**](/windows/desktop/api/Winuser/nf-winuser-senddlgitemmessagea) function, which is identical to the [**SendMessage**](/windows/desktop/api/winuser/nf-winuser-sendmessage) function, except that it uses a control identifier instead of a window handle to identify the control that is to receive the message.</span></span> <span data-ttu-id="64761-403">指定的訊息可能會要求對話程式傳送參數和訊息，而且訊息可能會有對應的傳回值。</span><span class="sxs-lookup"><span data-stu-id="64761-403">A specified message may require that the dialog procedure send parameters with the message, and the message may have corresponding return values.</span></span> <span data-ttu-id="64761-404">每個控制訊息的作業和需求取決於訊息的用途以及處理它的控制項。</span><span class="sxs-lookup"><span data-stu-id="64761-404">The operation and requirements of each control message depends on the purpose of the message and the control that processes it.</span></span>

<span data-ttu-id="64761-405">如需控制訊息的詳細資訊，請參閱 [Windows 控制項](../controls/window-controls.md)。</span><span class="sxs-lookup"><span data-stu-id="64761-405">For more information about the control messages, see [Windows Controls](../controls/window-controls.md).</span></span>

## <a name="custom-dialog-boxes"></a><span data-ttu-id="64761-406">自訂對話方塊</span><span class="sxs-lookup"><span data-stu-id="64761-406">Custom Dialog Boxes</span></span>

<span data-ttu-id="64761-407">應用程式可以使用對話方塊的應用程式定義視窗類別來建立自訂對話方塊，而不使用預先定義的對話方塊類別。</span><span class="sxs-lookup"><span data-stu-id="64761-407">An application can create custom dialog boxes by using an application-defined window class for the dialog boxes instead of using the predefined dialog box class.</span></span> <span data-ttu-id="64761-408">應用程式通常會在對話方塊是其主視窗時使用這個方法，但是針對具有標準重迭視窗的應用程式建立強制回應和非強制回應對話方塊也很有用。</span><span class="sxs-lookup"><span data-stu-id="64761-408">Applications typically use this method when a dialog box is their main window, but it is also useful for creating modal and modeless dialog boxes for applications that have standard overlapping windows.</span></span>

<span data-ttu-id="64761-409">應用程式定義的視窗類別可讓應用程式定義對話方塊的視窗程式，並在將訊息傳送至對話方塊程式之前處理訊息。</span><span class="sxs-lookup"><span data-stu-id="64761-409">The application-defined window class allows the application to define a window procedure for the dialog box and process messages before sending them to the dialog box procedure.</span></span> <span data-ttu-id="64761-410">它也可讓應用程式定義類別圖示、類別背景筆刷，以及對話方塊的類別功能表。</span><span class="sxs-lookup"><span data-stu-id="64761-410">It also lets the application define a class icon, a class background brush, and a class menu for the dialog box.</span></span> <span data-ttu-id="64761-411">應用程式必須先註冊視窗類別，然後再嘗試建立對話方塊，而且必須提供對話方塊範本，其中包含 atom 值或視窗類別的名稱。</span><span class="sxs-lookup"><span data-stu-id="64761-411">The application must register the window class before attempting to create a dialog box and must provide the dialog box template with the atom value or name of the window class.</span></span>

<span data-ttu-id="64761-412">許多應用程式會先取得預先定義之對話方塊類別的類別資訊，然後將其傳遞至 [**GetClassInfo**](/windows/desktop/api/winuser/nf-winuser-getclassinfoa) 函式，並將資訊填入 [**WNDCLASS**](/windows/win32/api/winuser/ns-winuser-wndclassa) 結構，藉以建立新的對話方塊類別。</span><span class="sxs-lookup"><span data-stu-id="64761-412">Many applications create a new dialog box class by first retrieving the class information for the predefined dialog box class, and passing it to the [**GetClassInfo**](/windows/desktop/api/winuser/nf-winuser-getclassinfoa) function, which fills a [**WNDCLASS**](/windows/win32/api/winuser/ns-winuser-wndclassa) structure with the information.</span></span> <span data-ttu-id="64761-413">應用程式會修改結構的個別成員，例如類別名稱、筆刷和圖示，然後使用 [**RegisterClass**](/windows/desktop/api/winuser/nf-winuser-registerclassa) 函式來註冊新的類別。</span><span class="sxs-lookup"><span data-stu-id="64761-413">The application modifies individual members of the structure, such as the class name, brush, and icon, then registers the new class by using the [**RegisterClass**](/windows/desktop/api/winuser/nf-winuser-registerclassa) function.</span></span> <span data-ttu-id="64761-414">如果應用程式本身填入 **WNDCLASS** 結構，則必須將 **cbWndExtra** 成員設定為 **DLGWINDOWEXTRA**，也就是系統針對每個對話方塊所需的額外位元組數目。</span><span class="sxs-lookup"><span data-stu-id="64761-414">If an application fills the **WNDCLASS** structure on its own, it must set the **cbWndExtra** member to the **DLGWINDOWEXTRA**, which is the number of extra bytes the system requires for each dialog box.</span></span> <span data-ttu-id="64761-415">如果應用程式也針對每個對話方塊使用額外的位元組，它們必須超過系統所需的額外位元組。</span><span class="sxs-lookup"><span data-stu-id="64761-415">If an application also uses extra bytes for each dialog box, they must be beyond the extra bytes required by the system.</span></span>

<span data-ttu-id="64761-416">自訂對話方塊的視窗程式具有與任何其他視窗程式相同的參數和需求。</span><span class="sxs-lookup"><span data-stu-id="64761-416">The window procedure for the custom dialog box has the same parameters and requirements as any other window procedure.</span></span> <span data-ttu-id="64761-417">不過，與其他視窗程式不同的是，此對話方塊的視窗程式應該呼叫 [**DefDlgProc**](/windows/desktop/api/Winuser/nf-winuser-defdlgprocw) 函式，而不是針對它未處理的任何訊息呼叫 [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) 函數。</span><span class="sxs-lookup"><span data-stu-id="64761-417">Unlike other window procedures, however, the window procedure for this dialog box should call the [**DefDlgProc**](/windows/desktop/api/Winuser/nf-winuser-defdlgprocw) function instead of the [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) function for any messages it does not process.</span></span> <span data-ttu-id="64761-418">**DefDlgProc** 會執行與預先定義之對話方塊的視窗程式相同的預設訊息處理，包括呼叫對話方塊程式。</span><span class="sxs-lookup"><span data-stu-id="64761-418">**DefDlgProc** carries out the same default message processing as the window procedure for the predefined dialog box, which includes calling the dialog box procedure.</span></span>

<span data-ttu-id="64761-419">應用程式也可以藉由子類別化預先定義之對話方塊的視窗程式來建立自訂對話方塊。</span><span class="sxs-lookup"><span data-stu-id="64761-419">An application can also create custom dialog boxes by subclassing the window procedure of the predefined dialog box.</span></span> <span data-ttu-id="64761-420">[**SetWindowLong**](/windows/desktop/api/winuser/nf-winuser-setwindowlonga)函式可讓應用程式指定指定之視窗的視窗程式。</span><span class="sxs-lookup"><span data-stu-id="64761-420">The [**SetWindowLong**](/windows/desktop/api/winuser/nf-winuser-setwindowlonga) function lets an application specify the window procedure for a specified window.</span></span> <span data-ttu-id="64761-421">應用程式也可以使用 [**SetClassLong**](/windows/desktop/api/winuser/nf-winuser-setclasslonga) 函式嘗試子類別，但是這樣做會影響系統中的所有對話方塊，而不只是屬於應用程式的對話方塊。</span><span class="sxs-lookup"><span data-stu-id="64761-421">The application may also attempt to subclass by using the [**SetClassLong**](/windows/desktop/api/winuser/nf-winuser-setclasslonga) function, but doing so affects all dialog boxes in the system, not just those belonging to the application.</span></span>

<span data-ttu-id="64761-422">建立自訂對話方塊的應用程式有時會為對話方塊提供替代的鍵盤介面。</span><span class="sxs-lookup"><span data-stu-id="64761-422">Applications that create custom dialog boxes sometimes provide an alternate keyboard interface for the dialog boxes.</span></span> <span data-ttu-id="64761-423">若為非強制回應對話方塊，這可能表示應用程式不會呼叫 [**IsDialogMessage**](/windows/desktop/api/Winuser/nf-winuser-isdialogmessagea) 函式，而是會處理自訂視窗程式中的所有鍵盤輸入。</span><span class="sxs-lookup"><span data-stu-id="64761-423">For modeless dialog boxes, this may mean the application does not call the [**IsDialogMessage**](/windows/desktop/api/Winuser/nf-winuser-isdialogmessagea) function and instead processes all keyboard input in the custom window procedure.</span></span> <span data-ttu-id="64761-424">在這種情況下，應用程式可以使用 [**WM \_ NEXTDLGCTL**](wm-nextdlgctl.md) 訊息，將輸入焦點從一個控制項移至另一個控制項所需的程式碼降至最低。</span><span class="sxs-lookup"><span data-stu-id="64761-424">In such cases, the application can use the [**WM\_NEXTDLGCTL**](wm-nextdlgctl.md) message to minimize the code needed to move the input focus from one control to another.</span></span> <span data-ttu-id="64761-425">此訊息傳遞至 [**DefDlgProc**](/windows/desktop/api/Winuser/nf-winuser-defdlgprocw)時，會將輸入焦點移至指定的控制項，並更新控制項的外觀，例如移動預設的按鈕框線或設定自動選項按鈕。</span><span class="sxs-lookup"><span data-stu-id="64761-425">This message, when passed to [**DefDlgProc**](/windows/desktop/api/Winuser/nf-winuser-defdlgprocw), moves the input focus to a specified control and updates the appearance of the controls, such as moving the default push button border or setting an automatic radio button.</span></span>
