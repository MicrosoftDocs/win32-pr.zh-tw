---
title: 外掛程式架構
description: 生物識別單位會透過由感應器、引擎和存放裝置介面卡組成的標準介面，將裝置的功能公開至架構。
ms.assetid: d2835413-70a3-45fa-93e2-3fe78097554f
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 52e43af9c0ea5a8db57cc0e0970b5625b1ba118f
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/20/2020
ms.locfileid: "104463441"
---
# <a name="plug-in-architecture"></a><span data-ttu-id="cf818-103">外掛程式架構</span><span class="sxs-lookup"><span data-stu-id="cf818-103">Plug-in architecture</span></span>

<span data-ttu-id="cf818-104">生物識別單元會以各種不同的類型和設定制造。</span><span class="sxs-lookup"><span data-stu-id="cf818-104">Biometric devices are manufactured in a wide variety of types and configurations.</span></span> <span data-ttu-id="cf818-105">Windows 生物特徵辨識架構提供可延伸的架構，讓協力廠商開發人員建立自訂外掛程式元件，藉此解決這種情況。</span><span class="sxs-lookup"><span data-stu-id="cf818-105">The Windows Biometric Framework addresses this variety by providing an extensible architecture that enables third party developers to create custom plug-in components.</span></span> <span data-ttu-id="cf818-106">主要元件是稱為生物特徵辨識單位的軟體物件。</span><span class="sxs-lookup"><span data-stu-id="cf818-106">The primary component is a software object called a biometric unit.</span></span> <span data-ttu-id="cf818-107">生物識別單位會透過由感應器、引擎和存放裝置介面卡組成的標準介面，將裝置的功能公開至架構。</span><span class="sxs-lookup"><span data-stu-id="cf818-107">Biometric units expose the capabilities of a device to the framework through a standard interface that consists of sensor, engine, and storage adapters.</span></span> <span data-ttu-id="cf818-108">下列主題將討論生物特徵辨識單位及其組成元件。</span><span class="sxs-lookup"><span data-stu-id="cf818-108">Biometric units and their constituent components are discussed in the following topics.</span></span>

## <a name="biometric-unit"></a><span data-ttu-id="cf818-109">生物識別單位</span><span class="sxs-lookup"><span data-stu-id="cf818-109">Biometric unit</span></span>

<span data-ttu-id="cf818-110">Windows 生物特徵辨識架構外掛程式架構的核心元件是生物特徵辨識單位，這是一個軟體物件，可透過標準介面，將生物特徵辨識裝置的功能公開至架構。</span><span class="sxs-lookup"><span data-stu-id="cf818-110">The central component of the Windows Biometric Framework plug-in architecture is the biometric unit, a software object that exposes the capabilities of a biometric device to the framework through a standard interface.</span></span>

<span data-ttu-id="cf818-111">單一實體感應器會與每個生物特徵辨識單位相關聯。</span><span class="sxs-lookup"><span data-stu-id="cf818-111">A single physical sensor is associated with each biometric unit.</span></span> <span data-ttu-id="cf818-112">感應器會捕獲生物特徵辨識資料，也可能根據其硬體功能，執行其他生物特徵辨識作業，例如範本比對和儲存。</span><span class="sxs-lookup"><span data-stu-id="cf818-112">The sensor captures biometric data and may also, depending on its hardware capabilities, perform other biometric operations such as template matching and storage.</span></span> <span data-ttu-id="cf818-113">不支援上架比對或儲存體的感應器，需要額外的軟體模組來執行這些功能。</span><span class="sxs-lookup"><span data-stu-id="cf818-113">Sensors that do not support onboard matching or storage require additional software modules to perform these functions.</span></span> <span data-ttu-id="cf818-114">如需詳細資訊，請參閱 [介面卡](/previous-versions//dd401508(v=vs.85))。</span><span class="sxs-lookup"><span data-stu-id="cf818-114">For more information, see [Adapters](/previous-versions//dd401508(v=vs.85)).</span></span>

<span data-ttu-id="cf818-115">下圖顯示資料如何流經生物特徵辨識單位。</span><span class="sxs-lookup"><span data-stu-id="cf818-115">The following illustration shows how data flows through a biometric unit.</span></span> <span data-ttu-id="cf818-116">基本上，資料流程會形成一種管線。</span><span class="sxs-lookup"><span data-stu-id="cf818-116">Essentially, the data flow forms a type of pipeline.</span></span> <span data-ttu-id="cf818-117">管線的初始輸入是實體感應器所捕獲的生物特徵辨識範例。</span><span class="sxs-lookup"><span data-stu-id="cf818-117">The initial input to the pipeline is a biometric sample captured by a physical sensor.</span></span> <span data-ttu-id="cf818-118">引擎會嘗試比對範例與範本存放區中已存在的範本，或者，如果找不到相符的，則會從重複的實體範例建立新的範本，並將範本儲存在存放區中。</span><span class="sxs-lookup"><span data-stu-id="cf818-118">The engine attempts to match the sample to templates that already exist in the template store or, if no match is found, builds a new template from repeated physical samples and saves the template in the store.</span></span>

![透過生物特徵辨識單位流動的資料](images/biometricunit-dataflow.png)

## <a name="biometric-unit-life-cycle"></a><span data-ttu-id="cf818-120">生物識別單位生命週期</span><span class="sxs-lookup"><span data-stu-id="cf818-120">Biometric unit life cycle</span></span>

### <a name="creation"></a><span data-ttu-id="cf818-121">建立</span><span class="sxs-lookup"><span data-stu-id="cf818-121">Creation</span></span>

<span data-ttu-id="cf818-122">當 Windows 生物特徵辨識服務啟動時，或收到來自隨插即用 manager 的硬體通知時，它會掃描是否有任何支援知名介面 GUID \_ DEVINTERFACE \_ 生物特徵辨識 \_ 讀取器 (E2B5183A-99EA-4cc3-AD6B-80CA8D715B80) 的硬體。</span><span class="sxs-lookup"><span data-stu-id="cf818-122">When the Windows Biometric Service starts or when it receives a hardware notification from the Plug and Play manager, it scans for any hardware that supports the well-known interface GUID\_DEVINTERFACE\_BIOMETRIC\_READER (E2B5183A-99EA-4cc3-AD6B-80CA8D715B80).</span></span> <span data-ttu-id="cf818-123">針對每個生物特徵辨識裝置，請執行下列動作：</span><span class="sxs-lookup"><span data-stu-id="cf818-123">For each biometric device discovered it then:</span></span>

-   <span data-ttu-id="cf818-124">開啟裝置的控制碼。</span><span class="sxs-lookup"><span data-stu-id="cf818-124">Opens a handle to the device.</span></span>
-   <span data-ttu-id="cf818-125">使用 Windows 生物特徵辨識驅動程式控制介面來查詢裝置功能。</span><span class="sxs-lookup"><span data-stu-id="cf818-125">Queries the device capabilities by using a Windows Biometric Driver control interface.</span></span>
-   <span data-ttu-id="cf818-126">開啟裝置登錄機碼，並嘗試尋找任何相關聯的介面卡外掛程式的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="cf818-126">Opens the device registry key and attempts to locate information about any associated adapter plug-ins.</span></span>
-   <span data-ttu-id="cf818-127">開啟 Windows 生物特徵辨識服務登錄機碼，並搜尋任何應覆寫上一個步驟中所找到之裝置特定值的全域外掛程式的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="cf818-127">Opens the Windows Biometric Service registry key and searches for information about any global plug-ins that should override the device specific values found in the preceding step.</span></span>
-   <span data-ttu-id="cf818-128">建立代表裝置的生物識別單位，並將單位傳遞給生物特徵辨識服務提供者。</span><span class="sxs-lookup"><span data-stu-id="cf818-128">Builds a biometric unit to represent the device and passes the unit to a biometric service provider.</span></span>

### <a name="configuration"></a><span data-ttu-id="cf818-129">組態</span><span class="sxs-lookup"><span data-stu-id="cf818-129">Configuration</span></span>

<span data-ttu-id="cf818-130">在生物識別服務提供者 (BSP) 接受生物識別單位後，它會設定單位並將其指派給感應器集區。</span><span class="sxs-lookup"><span data-stu-id="cf818-130">After a biometric service provider (BSP) accepts a biometric unit, it configures the unit and assigns it to a sensor pool.</span></span> <span data-ttu-id="cf818-131">如需詳細資訊，請參閱 [感應器](sensor-pools.md)集區。</span><span class="sxs-lookup"><span data-stu-id="cf818-131">For more information, see [Sensor Pools](sensor-pools.md).</span></span> <span data-ttu-id="cf818-132">單位是透過載入適當的介面卡、連接到範本存放區，以及可能變更作業模式來設定。</span><span class="sxs-lookup"><span data-stu-id="cf818-132">The unit is configured by loading the appropriate adapters, connecting to a template store, and possibly changing the operating mode.</span></span> <span data-ttu-id="cf818-133">您可以設定生物特徵辨識單位，以下列兩種模式的其中一種方式運作：</span><span class="sxs-lookup"><span data-stu-id="cf818-133">A biometric unit can be configured to operate in one of two modes:</span></span>

-   <span data-ttu-id="cf818-134">在基本模式中，單位會作為簡單的捕獲裝置。</span><span class="sxs-lookup"><span data-stu-id="cf818-134">In the basic mode, the unit acts as a simple capture device.</span></span> <span data-ttu-id="cf818-135">它不會使用上架處理或儲存體，但完全依賴軟體配接器來取得額外支援。</span><span class="sxs-lookup"><span data-stu-id="cf818-135">It does not use onboard processing or storage but relies entirely on software adapters for additional support.</span></span> <span data-ttu-id="cf818-136">它應該能夠以標準格式產生範例。</span><span class="sxs-lookup"><span data-stu-id="cf818-136">It should be able to generate samples in a standard format.</span></span> <span data-ttu-id="cf818-137">例如，指紋辨識器應該會產生符合 ANSI INCITS 381-2004 的範例。</span><span class="sxs-lookup"><span data-stu-id="cf818-137">For example, fingerprint readers should generate samples that comply with ANSI INCITS 381-2004.</span></span> <span data-ttu-id="cf818-138">基本模式的目的是要支援來自不同廠商的元件之間的互通性。</span><span class="sxs-lookup"><span data-stu-id="cf818-138">The purpose of the basic mode is to support interoperability among components from different vendors.</span></span>
-   <span data-ttu-id="cf818-139">在 advanced 模式中，生物特徵辨識單位會使用上架處理和儲存功能。</span><span class="sxs-lookup"><span data-stu-id="cf818-139">In the advanced mode, the biometric unit uses onboard processing and storage functions.</span></span> <span data-ttu-id="cf818-140">它必須公開標準介面，但可以產生和處理任何所需格式的範例。</span><span class="sxs-lookup"><span data-stu-id="cf818-140">It must expose the standard interfaces but can generate and process samples in any format desired.</span></span>

<span data-ttu-id="cf818-141">當生物識別單位從某個感應器集區移至另一個感應器集區時，會卸載其介面卡，並重新設定新感應器集區的介面卡。</span><span class="sxs-lookup"><span data-stu-id="cf818-141">When a biometric unit is moved from one sensor pool to another, its adapters are unloaded and it is reconfigured for the new sensor pool.</span></span> <span data-ttu-id="cf818-142">生物識別單位的身分識別會維持不變;只有硬體設定和介面卡外掛程式會變更。</span><span class="sxs-lookup"><span data-stu-id="cf818-142">The identity of the biometric unit remains constant; only the hardware configuration and adapter plug-ins change.</span></span>

### <a name="shut-down"></a><span data-ttu-id="cf818-143">關閉</span><span class="sxs-lookup"><span data-stu-id="cf818-143">Shut Down</span></span>

<span data-ttu-id="cf818-144">當 Windows 生物特徵辨識服務關閉，或當隨插即用管理員通知已移除某個單位時，服務會刪除所有生物特徵辨識單位。</span><span class="sxs-lookup"><span data-stu-id="cf818-144">When the Windows Biometric Service shuts down or when the Plug and Play manager notifies it that a unit has been removed, the service deletes all biometric units.</span></span>

## <a name="adapters"></a><span data-ttu-id="cf818-145">配接器</span><span class="sxs-lookup"><span data-stu-id="cf818-145">Adapters</span></span>

<span data-ttu-id="cf818-146">稱為介面卡的外掛程式軟體元件會將生物特徵辨識單位連接至其基礎硬體，並提供感應器硬體可能遺失的任何功能。</span><span class="sxs-lookup"><span data-stu-id="cf818-146">Plug-in software components called adapters connect a biometric unit to its underlying hardware and supply any functionality that may be missing from the sensor hardware.</span></span> <span data-ttu-id="cf818-147">您可以建立三種類型的介面卡：</span><span class="sxs-lookup"><span data-stu-id="cf818-147">There are three types of adapters that you can create:</span></span>

-   <span data-ttu-id="cf818-148">感應器介面卡會包裝生物特徵辨識裝置，並提供標準介面來設定感應器、捕獲範例，以及控制生物特徵辨識資料流程向處理引擎的流程。</span><span class="sxs-lookup"><span data-stu-id="cf818-148">A sensor adapter wraps a biometric device and provides a standard interface for configuring the sensor, capturing samples, and controlling the flow of biometric data to the processing engine.</span></span>
-   <span data-ttu-id="cf818-149">引擎介面卡會從已捕捉的範例產生生物特徵辨識範本、比對現有範本的範例和索引範本。</span><span class="sxs-lookup"><span data-stu-id="cf818-149">An engine adapter generates biometric templates from captured samples, matches samples to existing templates, and indexes templates.</span></span>
-   <span data-ttu-id="cf818-150">儲存體介面卡會管理範本資料庫。</span><span class="sxs-lookup"><span data-stu-id="cf818-150">A storage adapter manages template databases.</span></span>

<span data-ttu-id="cf818-151">介面卡可以在執行時間載入和卸載。</span><span class="sxs-lookup"><span data-stu-id="cf818-151">Adapters can be loaded and unloaded at runtime.</span></span> <span data-ttu-id="cf818-152">這可讓 Windows 生物特徵辨識服務將生物識別單位連接到不同的介面卡集，以動態方式重新設定。</span><span class="sxs-lookup"><span data-stu-id="cf818-152">This enables the Windows Biometric Service to dynamically reconfigure a biometric unit by connecting it to a different set of adapters.</span></span>

<span data-ttu-id="cf818-153">最後，每個感應器、引擎和儲存體介面卡介面都會公開兩種方法： **ControlUnit** 和 **ControlUnitPrivileged**，可讓用戶端應用程式存取廠商所定義的自訂介面卡功能。</span><span class="sxs-lookup"><span data-stu-id="cf818-153">Finally, each of the sensor, engine, and storage adapter interfaces expose two methods, **ControlUnit** and **ControlUnitPrivileged**, that enable client applications to access custom adapter capabilities defined by the vendor.</span></span> <span data-ttu-id="cf818-154">這可讓廠商針對裝置定義一組幾乎不受限制的控制作業。</span><span class="sxs-lookup"><span data-stu-id="cf818-154">This allows the vendor to define an almost unlimited set of control operations for a device.</span></span> <span data-ttu-id="cf818-155">此外，藉由選擇要執行的函式，廠商可以選擇讓非特殊許可權的使用者可以使用一些控制作業，同時將其他作業限制為具有特殊許可權的使用者。</span><span class="sxs-lookup"><span data-stu-id="cf818-155">Further, by choosing which function to implement, a vendor can choose to make some control operations available to non-privileged users while restricting other operations to privileged users.</span></span>

<span data-ttu-id="cf818-156">如需有關如何建立介面卡的詳細資訊，請參閱 [建立介面卡外掛程式](creating-adapter-plug-ins.md)。</span><span class="sxs-lookup"><span data-stu-id="cf818-156">For more information about how to create adapters, see [Create adapter plug-ins](creating-adapter-plug-ins.md).</span></span>

## <a name="adapter-performance-requirements"></a><span data-ttu-id="cf818-157">介面卡效能需求</span><span class="sxs-lookup"><span data-stu-id="cf818-157">Adapter performance requirements</span></span>

<span data-ttu-id="cf818-158">因為目標是整體的回應速度，所以不會根據特定常式的時間限制來指定介面卡的效能。</span><span class="sxs-lookup"><span data-stu-id="cf818-158">Because the objective is fast response overall, the performance of an adapter isn't specified in terms of time limits on specific routines.</span></span> <span data-ttu-id="cf818-159">相反地，會將效能指定為整體使用者體驗的一組需求。</span><span class="sxs-lookup"><span data-stu-id="cf818-159">Instead, performance is specified as a set of requirements for the overall user experience.</span></span>

<span data-ttu-id="cf818-160">有兩個需求：</span><span class="sxs-lookup"><span data-stu-id="cf818-160">There are two requirements:</span></span>

-   <span data-ttu-id="cf818-161">使用者與需要生物識別之作業系統之間的任何互動都必須在兩秒鐘內完成。</span><span class="sxs-lookup"><span data-stu-id="cf818-161">Any interaction between the user and the operating system that involves biometrics must complete within two seconds.</span></span> <span data-ttu-id="cf818-162">該間隔會測量使用者從觸控或滑動感應器的時間開始到完成的時間，直到裝置螢幕上出現的時間發生為止。</span><span class="sxs-lookup"><span data-stu-id="cf818-162">That interval measures the start-to-finish time that the user perceives from the time they touch or swipe the sensor until the time something visible happens on the device screen.</span></span> <span data-ttu-id="cf818-163"> (比方說，在解除鎖定期間，使用者觸及或輕觸指紋感應器和鎖定畫面，並確認使用者的身分識別時，必須不超過兩秒的延遲。 ) </span><span class="sxs-lookup"><span data-stu-id="cf818-163">(For example, during unlock, there must be no more than a two-second delay between the user touching or swiping the fingerprint sensor and the lock screen acknowledging the user's identity.)</span></span>
-   <span data-ttu-id="cf818-164">在登入或鎖定畫面上，針對認證磚的初始外觀，我們允許更多時間 (三秒、最大) ，但我們還是偏好較早的時間。</span><span class="sxs-lookup"><span data-stu-id="cf818-164">For the initial appearance of credential tiles on the sign-in or lock screen, we allow a little more time (three seconds, maximum), but we still prefer sooner rather than later.</span></span> <span data-ttu-id="cf818-165">具體而言，在鎖定或登入面板的三秒內，螢幕上必須可以看到 [簡歷] 磚。</span><span class="sxs-lookup"><span data-stu-id="cf818-165">Specifically, the bio tile needs to be visible on screen within three seconds of the appearance of the lock or sign-in panel.</span></span>

<span data-ttu-id="cf818-166">這些數位不是任意的。</span><span class="sxs-lookup"><span data-stu-id="cf818-166">These numbers are not arbitrary.</span></span> <span data-ttu-id="cf818-167">有許多研究顯示，人類傾向于在 "now" 時間內，經歷兩秒間隔內發生的一切。</span><span class="sxs-lookup"><span data-stu-id="cf818-167">Numerous studies have shown that human beings tend to experience everything that happens within a two-second interval as part of the "now" moment.</span></span> <span data-ttu-id="cf818-168">如果事件 A 和事件 B 在彼此的兩秒內發生，人們會同時察覺這些事件。</span><span class="sxs-lookup"><span data-stu-id="cf818-168">If event A and event B happen within two seconds of each other, people perceive those events as being simultaneous.</span></span> <span data-ttu-id="cf818-169">如果事件以超過三秒的時間分隔，人們認為會有延遲的現象，也就是「花太多時間」。</span><span class="sxs-lookup"><span data-stu-id="cf818-169">If the events are separated by more than about three seconds, people think there's a delay—they feel that something is "taking too long."</span></span> <span data-ttu-id="cf818-170">這是寫死人為心理學的問題。</span><span class="sxs-lookup"><span data-stu-id="cf818-170">So this is an issue of hardwired human psychology.</span></span>

 

 