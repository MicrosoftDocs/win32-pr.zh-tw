---
description: 取捨是強制執行安全性的固有功能。
ms.assetid: f01573f3-aae6-400e-bdd9-6f34f4e262f6
title: 決定要在哪裡強制執行安全性
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4ac994fb98d50a7e26f1b8142e77dc9ff771f6b2
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/07/2021
ms.locfileid: "104510476"
---
# <a name="deciding-where-to-enforce-security"></a>決定要在哪裡強制執行安全性

取捨是強制執行安全性的固有功能。 資料庫可以是放置安全性邏輯的自然位置，因為最終資料是要保護的最重要的一件事。 不過，這麼做會造成顯著的效能影響。 在資料庫上強制執行安全性可能會非常昂貴、規模不佳，而且沒有彈性。

## <a name="enforcing-security-in-the-middle-tier"></a>在中介層強制執行安全性

使用 COM + 進行可擴充的多層式應用程式要遵循的一般規則，可能的話，您應該盡可能在中介層的 COM + 應用程式中強制執行詳細的安全性。 這樣做可讓您充分利用 COM + 所提供的可擴充服務。 只有在您絕對需要時，才在資料庫上強制執行驗證，並完全衡量這麼做的效能含意。

最佳情況是能夠保護資料庫資料表，讓 COM + 應用程式能夠以自己的身分識別來存取它們。 資料庫應只驗證 COM + 應用程式，並信任它以正確驗證及授權將存取資料的用戶端。 這種方法的優點如下：

-   它會啟用所有用戶端之間的連接共用，因為連接是完全泛型的。
-   它通常會將資料存取優化，通常是在調整應用程式時有問題的扼點。
-   它可以將強制執行安全性的邏輯負擔降至最低，特別是在可以使用宣告式角色型安全性的情況下。
-   它可以在安全性原則中提供絕佳的彈性。 您可以輕鬆地設定和重新設定，如以 [角色為基礎的安全性管理](role-based-security-administration.md)中所述。

但是，如同 [有效設計角色](designing-roles-effectively.md)所述，雖然角色可以輕鬆且有效地套用至某些使用者資料的關聯性，但它們並不是安全性存取決策的通用解決方案。

## <a name="enforcing-security-at-the-database"></a>在資料庫中強制執行安全性

儘管在中介層強制執行安全性的 preferability，還是有許多原因會在資料庫上強制執行安全性，如下所示：

-   您沒有任何選擇，可能是基於舊版的原因，或可能是因為決策其實不是您的手。
-   資料庫是由各種不同的應用程式存取，而且無法以單一應用程式為基礎來設定其安全性。
-   資料庫可透過可預測的方式進行保護。 如果您將企業關鍵資料保留在資料庫中，您可以在其周圍繪製緊密旅行車，並協助控制誰可以看到它。
-   在資料庫中驗證原始用戶端，可以詳細記錄資料庫中已完成的工作。
-   有些資料會本質系結至特定的使用者，而進行極細微存取決策的邏輯可能會在資料庫本身最有效率地執行，接近資料。

當您在一起設計資料庫和 COM + 應用程式的安全性時，大部分的問題都是關於資料本身的特性，以及其與存取它的使用者之間的關聯性。 使用可預測的使用者類別可存取的資料，可讓您有效率地使用角色來控制仲介層中的存取。 使用 intricately 系結至極小使用者類別的資料時，這些關聯性通常必須以資料本身表示，因此您必須在資料庫中強制執行某些安全性。

### <a name="performance-implications-of-enforcing-security-at-the-database"></a>在資料庫中強制執行安全性的效能含意

如果您在資料庫上驗證或授權使用者，則必須將使用者身分識別傳播至資料庫以支援這種情況。 如果資料庫信任中介層應用程式，則可以在參數中傳遞使用者安全性資訊。 否則，必須在使用者的身分識別下進行對資料庫的呼叫，這表示伺服器應用程式必須模擬用戶端。 這可能會影響效能，如下所示：

-   模擬用戶端可能會比直接在應用程式識別下進行呼叫更慢。 如需詳細資訊，請參閱 [用戶端模擬和委派](client-impersonation-and-delegation.md)。
-   在特定使用者身分識別下建立的資料庫連接無法共用。
-   在資料庫本身中新增邏輯，會造成建立調整瓶頸的風險。

## <a name="related-topics"></a>相關主題

<dl> <dt>

[在多層式應用程式中保護資料的基本案例](basic-scenarios-for-securing-data-in-multi-tier-applications.md)
</dt> <dt>

[多層式應用程式安全性](multi-tier-application-security.md)
</dt> </dl>

 

 



