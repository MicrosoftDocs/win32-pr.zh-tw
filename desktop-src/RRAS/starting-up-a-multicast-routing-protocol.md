---
title: 啟動多播路由通訊協定
description: 下表摘要說明路由通訊協定與多播群組管理員之間啟動互動的一連串步驟。
ms.assetid: 14524745-5cf9-442c-a5b4-b1ef313151cf
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 63fc5dc5b25541c798ac0907a54dd19105a4c641
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/20/2020
ms.locfileid: "104463496"
---
# <a name="starting-up-a-multicast-routing-protocol"></a><span data-ttu-id="7a4ee-103">啟動多播路由通訊協定</span><span class="sxs-lookup"><span data-stu-id="7a4ee-103">Starting Up a Multicast Routing Protocol</span></span>

<span data-ttu-id="7a4ee-104">下表摘要說明路由通訊協定與多播群組管理員之間啟動互動的一連串步驟。</span><span class="sxs-lookup"><span data-stu-id="7a4ee-104">The following table summarizes a series of steps in a startup interaction between a routing protocol and the multicast group manager.</span></span> <span data-ttu-id="7a4ee-105">第一個資料行描述路由通訊協定執行的動作，以及路由通訊協定對多播群組管理員的回應。</span><span class="sxs-lookup"><span data-stu-id="7a4ee-105">The first column describes actions that the routing protocol performs and the responses of the routing protocol to the multicast group manager.</span></span> <span data-ttu-id="7a4ee-106">第二個數據行描述多播群組管理員對路由通訊協定的回應，以及多播群組管理員執行的任何動作，例如回呼。</span><span class="sxs-lookup"><span data-stu-id="7a4ee-106">The second column describes the multicast group manager's responses to the routing protocol and any actions the multicast group manager performs such as callbacks.</span></span> <span data-ttu-id="7a4ee-107">第三個數據行顯示任何其他資訊。</span><span class="sxs-lookup"><span data-stu-id="7a4ee-107">The third column presents any additional information.</span></span>

<span data-ttu-id="7a4ee-108">資料表的每個資料列都代表一個步驟。</span><span class="sxs-lookup"><span data-stu-id="7a4ee-108">Each row of the table represents one step.</span></span>



| <span data-ttu-id="7a4ee-109">路由通訊協定動作</span><span class="sxs-lookup"><span data-stu-id="7a4ee-109">Routing protocol action</span></span>                                                                                                                                                                                                                                                                                                                 | <span data-ttu-id="7a4ee-110">多播群組管理員動作</span><span class="sxs-lookup"><span data-stu-id="7a4ee-110">Multicast group manager action</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                            | <span data-ttu-id="7a4ee-111">備註</span><span class="sxs-lookup"><span data-stu-id="7a4ee-111">Notes</span></span>                                                                                                                                                                                                                                   |
|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="7a4ee-112">使用 [**MgmRegisterMProtocol**](/windows/desktop/api/Mgm/nf-mgm-mgmregistermprotocol) 函數向多播群組管理員註冊。</span><span class="sxs-lookup"><span data-stu-id="7a4ee-112">Register with the multicast group manager using the [**MgmRegisterMProtocol**](/windows/desktop/api/Mgm/nf-mgm-mgmregistermprotocol) function.</span></span>                                                                                                                                                                                                                      | <span data-ttu-id="7a4ee-113">返回路由通訊協定，在後續的 MGM API 呼叫中，通訊協定必須用來識別其本身的控制碼。</span><span class="sxs-lookup"><span data-stu-id="7a4ee-113">Return to the routing protocol a handle that the protocol must use to identify itself in subsequent MGM API calls.</span></span>                                                                                                                                                                                                                                                                                                                                                        |                                                                                                                                                                                                                                         |
| <span data-ttu-id="7a4ee-114">判斷介面是否已擁有，以及使用 [**MgmGetProtocolOnInterface**](/windows/desktop/api/Mgm/nf-mgm-mgmgetprotocoloninterface) 函式所擁有的路由通訊協定。</span><span class="sxs-lookup"><span data-stu-id="7a4ee-114">Determine if an interface is already owned, and the routing protocol that owns it using the [**MgmGetProtocolOnInterface**](/windows/desktop/api/Mgm/nf-mgm-mgmgetprotocoloninterface) function.</span></span>                                                                                                                                                                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | <span data-ttu-id="7a4ee-115">IGMP 可以使用此函式來判斷介面的擁有者，並使用這個函式所傳回的資訊執行特定通訊協定的處理。</span><span class="sxs-lookup"><span data-stu-id="7a4ee-115">IGMP can use this function to determine the owner of an interface, and perform protocol-specific processing with the information returned by this function.</span></span>                                                                             |
| <span data-ttu-id="7a4ee-116">使用 [**MgmTakeInterfaceOwnership**](/windows/desktop/api/Mgm/nf-mgm-mgmtakeinterfaceownership) 函式取得已啟用通訊協定之所有介面的擁有權。</span><span class="sxs-lookup"><span data-stu-id="7a4ee-116">Take ownership of all the interfaces on which the protocol is enabled using the [**MgmTakeInterfaceOwnership**](/windows/desktop/api/Mgm/nf-mgm-mgmtakeinterfaceownership) function.</span></span>                                                                                                                                                                                | <span data-ttu-id="7a4ee-117">如果 IGMP 已取得介面的擁有權，而且收到相同介面的 [**MgmTakeInterfaceOwnership**](/windows/desktop/api/Mgm/nf-mgm-mgmtakeinterfaceownership) 函式呼叫，請使用 [**PMGM \_ 停用 \_ IGMP \_ 回呼**](/windows/win32/api/mgm/nc-mgm-pmgm_disable_igmp_callback) 回呼來聯繫 IGMP。</span><span class="sxs-lookup"><span data-stu-id="7a4ee-117">If IGMP has already taken ownership of an interface and the [**MgmTakeInterfaceOwnership**](/windows/desktop/api/Mgm/nf-mgm-mgmtakeinterfaceownership) function call is received for the same interface, contact IGMP using the [**PMGM\_DISABLE\_IGMP\_CALLBACK**](/windows/win32/api/mgm/nc-mgm-pmgm_disable_igmp_callback) callback.</span></span> <span data-ttu-id="7a4ee-118">一旦完成所有關于介面擁有權的多播資料變更，請使用 [**PMGM \_ 啟用 \_ igmp \_ 回呼**](/windows/desktop/api/Mgm/nc-mgm-pmgm_enable_igmp_callback)，再次聯繫 igmp。</span><span class="sxs-lookup"><span data-stu-id="7a4ee-118">Once all changes to multicast data regarding interface ownership have been made, contact IGMP again using [**PMGM\_ENABLE\_IGMP\_CALLBACK**](/windows/desktop/api/Mgm/nc-mgm-pmgm_enable_igmp_callback).</span></span><br/> | <span data-ttu-id="7a4ee-119">除了 IGMP 之外，只有一個通訊協定可以擁有指定時間的介面。</span><span class="sxs-lookup"><span data-stu-id="7a4ee-119">Only one protocol can own an interface at a given time, in addition to IGMP.</span></span>                                                                                                                                                            |
| <span data-ttu-id="7a4ee-120">判斷路由器上群組成員資格的目前狀態。</span><span class="sxs-lookup"><span data-stu-id="7a4ee-120">Determine the current state of group membership on the router.</span></span> <span data-ttu-id="7a4ee-121">這個動作是使用群組成員資格列舉函數來執行： [**MgmGroupEnumerationStart**](/windows/desktop/api/Mgm/nf-mgm-mgmgroupenumerationstart)、 [**MgmGroupEnumerationGetNext**](/windows/desktop/api/Mgm/nf-mgm-mgmgroupenumerationgetnext)和 [**MgmGroupEnumerationEnd**](/windows/desktop/api/Mgm/nf-mgm-mgmgroupenumerationend)。</span><span class="sxs-lookup"><span data-stu-id="7a4ee-121">This action is performed using the group membership enumeration functions: [**MgmGroupEnumerationStart**](/windows/desktop/api/Mgm/nf-mgm-mgmgroupenumerationstart), [**MgmGroupEnumerationGetNext**](/windows/desktop/api/Mgm/nf-mgm-mgmgroupenumerationgetnext), and [**MgmGroupEnumerationEnd**](/windows/desktop/api/Mgm/nf-mgm-mgmgroupenumerationend).</span></span> | <span data-ttu-id="7a4ee-122">傳回群組的清單。</span><span class="sxs-lookup"><span data-stu-id="7a4ee-122">Return the list of groups.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                | <span data-ttu-id="7a4ee-123">路由通訊協定可以使用結果，根據已經加入的群組來決定要採取的動作。</span><span class="sxs-lookup"><span data-stu-id="7a4ee-123">Routing protocols can use the results to determine what actions to take based on the groups that have already been joined.</span></span> <span data-ttu-id="7a4ee-124">如需使用這些函數的完整範例，請參閱 [列舉群組](enumerating-groups.md) 。</span><span class="sxs-lookup"><span data-stu-id="7a4ee-124">See [Enumerating Groups](enumerating-groups.md) for a complete example of using these functions.</span></span><br/> |



 

 

