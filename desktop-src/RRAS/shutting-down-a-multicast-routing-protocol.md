---
title: 關閉多播路由通訊協定
description: 下表摘要說明在關閉路由通訊協定時，多播群組管理員與路由通訊協定之間的一系列步驟。
ms.assetid: d868218d-7939-45d1-9e2f-3415c40f1a62
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 08d35285bdf613cb8ec5966fa438742004a97c0a
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/20/2020
ms.locfileid: "103682864"
---
# <a name="shutting-down-a-multicast-routing-protocol"></a><span data-ttu-id="22675-103">關閉多播路由通訊協定</span><span class="sxs-lookup"><span data-stu-id="22675-103">Shutting Down a Multicast Routing Protocol</span></span>

<span data-ttu-id="22675-104">下表摘要說明在關閉路由通訊協定時，多播群組管理員與路由通訊協定之間的一系列步驟。</span><span class="sxs-lookup"><span data-stu-id="22675-104">The following table summarizes a series of steps in a shutdown interaction between the multicast group manager and the routing protocol when the routing protocol is shutting down.</span></span> <span data-ttu-id="22675-105">第一個資料行描述路由通訊協定執行的動作，以及路由通訊協定對多播群組管理員的回應。</span><span class="sxs-lookup"><span data-stu-id="22675-105">The first column describes the actions that the routing protocol performs and the routing protocol's responses to the multicast group manager.</span></span> <span data-ttu-id="22675-106">第二個數據行描述多播群組管理員對路由通訊協定的回應，以及多播群組管理員執行的任何動作，例如回呼。</span><span class="sxs-lookup"><span data-stu-id="22675-106">The second column describes the multicast group manager's responses to the routing protocol and any actions the multicast group manager performs such as callbacks.</span></span> <span data-ttu-id="22675-107">第三個數據行顯示任何其他資訊。</span><span class="sxs-lookup"><span data-stu-id="22675-107">The third column presents any additional information.</span></span>

<span data-ttu-id="22675-108">資料表的每個資料列都代表一個步驟。</span><span class="sxs-lookup"><span data-stu-id="22675-108">Each row of the table represents one step.</span></span>



| <span data-ttu-id="22675-109">路由通訊協定動作</span><span class="sxs-lookup"><span data-stu-id="22675-109">Routing protocol action</span></span>                                                                                                                                     | <span data-ttu-id="22675-110">多播群組管理員動作</span><span class="sxs-lookup"><span data-stu-id="22675-110">Multicast group manager action</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                            | <span data-ttu-id="22675-111">備註</span><span class="sxs-lookup"><span data-stu-id="22675-111">Notes</span></span>                                                                     |
|-------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------|
| <span data-ttu-id="22675-112">使用 [**MgmReleaseInterfaceOwnership**](/windows/desktop/api/Mgm/nf-mgm-mgmreleaseinterfaceownership) 函式來發行路由通訊協定所擁有之每個介面的擁有權。</span><span class="sxs-lookup"><span data-stu-id="22675-112">Release ownership of each interface that the routing protocol owns using the [**MgmReleaseInterfaceOwnership**](/windows/desktop/api/Mgm/nf-mgm-mgmreleaseinterfaceownership) function.</span></span> | <span data-ttu-id="22675-113">如果 IGMP 也是在路由通訊協定剛發行的介面上執行，請使用 [**PMGM \_ 停用 \_ igmp \_ 回呼**](/windows/win32/api/mgm/nc-mgm-pmgm_disable_igmp_callback) 回呼來聯繫 igmp。</span><span class="sxs-lookup"><span data-stu-id="22675-113">If IGMP is also running on the interface that was just released by a routing protocol, contact IGMP using the [**PMGM\_DISABLE\_IGMP\_CALLBACK**](/windows/win32/api/mgm/nc-mgm-pmgm_disable_igmp_callback) callback.</span></span> <span data-ttu-id="22675-114">一旦完成所有關于介面擁有權的多播資料變更，請使用 [**PMGM \_ 啟用 \_ igmp \_ 回呼**](/windows/desktop/api/Mgm/nc-mgm-pmgm_enable_igmp_callback) 回呼，再次聯繫 igmp。</span><span class="sxs-lookup"><span data-stu-id="22675-114">Once all changes to multicast data regarding interface ownership have been made, contact IGMP again using [**PMGM\_ENABLE\_IGMP\_CALLBACK**](/windows/desktop/api/Mgm/nc-mgm-pmgm_enable_igmp_callback) callback.</span></span><br/> <span data-ttu-id="22675-115">刪除與此介面相關聯的所有轉送專案。</span><span class="sxs-lookup"><span data-stu-id="22675-115">Delete all the forwarding entries associated with this interface.</span></span><br/> |                                                                           |
| <span data-ttu-id="22675-116">使用 [**MgmDeRegisterMProtocol**](/windows/desktop/api/Mgm/nf-mgm-mgmderegistermprotocol) 函式取消註冊多播群組管理員。</span><span class="sxs-lookup"><span data-stu-id="22675-116">Deregister with the multicast group manager using the [**MgmDeRegisterMProtocol**](/windows/desktop/api/Mgm/nf-mgm-mgmderegistermprotocol) function.</span></span>                                    | <span data-ttu-id="22675-117">終結先前對 [**MgmDeRegisterMProtocol**](/windows/desktop/api/Mgm/nf-mgm-mgmderegistermprotocol) 函式的呼叫，以終結傳回給路由通訊協定的控制碼。</span><span class="sxs-lookup"><span data-stu-id="22675-117">Destroy the handle that was returned to the routing protocol by a previous call to the [**MgmDeRegisterMProtocol**](/windows/desktop/api/Mgm/nf-mgm-mgmderegistermprotocol) function.</span></span>                                                                                                                                                                                                                                                                                                                 | <span data-ttu-id="22675-118">路由通訊協定無法再使用這個控制碼來呼叫 MGM 函數。</span><span class="sxs-lookup"><span data-stu-id="22675-118">The routing protocol can no longer use this handle to call MGM functions.</span></span> |



 

 

