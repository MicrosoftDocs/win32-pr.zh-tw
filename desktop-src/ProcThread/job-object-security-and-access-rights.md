---
description: Microsoft Windows 安全性模型可讓您控制對工作物件的存取。 如需安全性的詳細資訊，請參閱 Access-Control 模型。
ms.assetid: 8d212292-f087-41e4-884e-cec4423dac49
title: 工作物件安全性和存取權限
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d6f5207e459bab2ae444282355844401e0b82e9c
ms.sourcegitcommit: 18023a15a4312c653a8dcc0feef23e3413a7f5dd
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/25/2021
ms.locfileid: "106981907"
---
# <a name="job-object-security-and-access-rights"></a><span data-ttu-id="2f2fc-104">工作物件安全性和存取權限</span><span class="sxs-lookup"><span data-stu-id="2f2fc-104">Job Object Security and Access Rights</span></span>

<span data-ttu-id="2f2fc-105">Microsoft Windows 安全性模型可讓您控制對工作物件的存取。</span><span class="sxs-lookup"><span data-stu-id="2f2fc-105">The Microsoft Windows security model enables you to control access to job objects.</span></span> <span data-ttu-id="2f2fc-106">如需安全性的詳細資訊，請參閱 [存取控制模型](../secauthz/access-control-model.md)。</span><span class="sxs-lookup"><span data-stu-id="2f2fc-106">For more information about security, see [Access-Control Model](../secauthz/access-control-model.md).</span></span>

<span data-ttu-id="2f2fc-107">當您呼叫 [**CreateJobObject**](/windows/desktop/api/WinBase/nf-winbase-createjobobjecta)函式時，可以指定工作物件的 [安全描述項](../secauthz/security-descriptors.md)。</span><span class="sxs-lookup"><span data-stu-id="2f2fc-107">You can specify a [security descriptor](../secauthz/security-descriptors.md) for a job object when you call the [**CreateJobObject**](/windows/desktop/api/WinBase/nf-winbase-createjobobjecta) function.</span></span> <span data-ttu-id="2f2fc-108">如果您指定 Null，工作物件會取得預設安全描述項。</span><span class="sxs-lookup"><span data-stu-id="2f2fc-108">If you specify NULL, the job object gets a default security descriptor.</span></span> <span data-ttu-id="2f2fc-109">工作物件之預設安全描述項中的 Acl 來自于建立者的主要或模擬權杖。</span><span class="sxs-lookup"><span data-stu-id="2f2fc-109">The ACLs in the default security descriptor for a job object come from the primary or impersonation token of the creator.</span></span>

<span data-ttu-id="2f2fc-110">若要取得或設定工作物件的安全描述項，請呼叫 [**GetNamedSecurityInfo**](/windows/win32/api/aclapi/nf-aclapi-getnamedsecurityinfoa)、 [**SetNamedSecurityInfo**](/windows/win32/api/aclapi/nf-aclapi-setnamedsecurityinfoa)、 [**GetSecurityInfo**](/windows/win32/api/aclapi/nf-aclapi-getsecurityinfo)或 [**SetSecurityInfo**](/windows/win32/api/aclapi/nf-aclapi-setsecurityinfo) 函數。</span><span class="sxs-lookup"><span data-stu-id="2f2fc-110">To get or set the security descriptor for a job object, call the [**GetNamedSecurityInfo**](/windows/win32/api/aclapi/nf-aclapi-getnamedsecurityinfoa), [**SetNamedSecurityInfo**](/windows/win32/api/aclapi/nf-aclapi-setnamedsecurityinfoa), [**GetSecurityInfo**](/windows/win32/api/aclapi/nf-aclapi-getsecurityinfo), or [**SetSecurityInfo**](/windows/win32/api/aclapi/nf-aclapi-setsecurityinfo) function.</span></span>

<span data-ttu-id="2f2fc-111">工作物件的有效存取權限包括 [標準存取權限](../secauthz/standard-access-rights.md) ，以及某些特定作業的存取權限。</span><span class="sxs-lookup"><span data-stu-id="2f2fc-111">The valid access rights for job objects include the [standard access rights](../secauthz/standard-access-rights.md) and some job-specific access rights.</span></span> <span data-ttu-id="2f2fc-112">下表列出所有物件使用的標準存取權限。</span><span class="sxs-lookup"><span data-stu-id="2f2fc-112">The following table lists the standard access rights used by all objects.</span></span>

| <span data-ttu-id="2f2fc-113">值</span><span class="sxs-lookup"><span data-stu-id="2f2fc-113">Value</span></span>                           | <span data-ttu-id="2f2fc-114">意義</span><span class="sxs-lookup"><span data-stu-id="2f2fc-114">Meaning</span></span>                                                                                                                                                                                                                                                                                  |
|---------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="2f2fc-115">**刪除** (0x00010000L) </span><span class="sxs-lookup"><span data-stu-id="2f2fc-115">**DELETE** (0x00010000L)</span></span>        | <span data-ttu-id="2f2fc-116">刪除物件的必要參數。</span><span class="sxs-lookup"><span data-stu-id="2f2fc-116">Required to delete the object.</span></span>                                                                                                                                                                                                                                                           |
| <span data-ttu-id="2f2fc-117">**讀取 \_控制** (0x00020000L) </span><span class="sxs-lookup"><span data-stu-id="2f2fc-117">**READ\_CONTROL** (0x00020000L)</span></span> | <span data-ttu-id="2f2fc-118">需要讀取物件安全描述項中的資訊，而不包含 SACL 中的資訊。</span><span class="sxs-lookup"><span data-stu-id="2f2fc-118">Required to read information in the security descriptor for the object, not including the information in the SACL.</span></span> <span data-ttu-id="2f2fc-119">若要讀取或寫入 SACL，您必須要求 **存取 \_ 系統 \_ 安全性** 存取權限。</span><span class="sxs-lookup"><span data-stu-id="2f2fc-119">To read or write the SACL, you must request the **ACCESS\_SYSTEM\_SECURITY** access right.</span></span> <span data-ttu-id="2f2fc-120">如需詳細資訊，請參閱 [SACL 訪問](../secauthz/sacl-access-right.md)許可權。</span><span class="sxs-lookup"><span data-stu-id="2f2fc-120">For more information, see [SACL Access Right](../secauthz/sacl-access-right.md).</span></span> |
| <span data-ttu-id="2f2fc-121">**同步處理** (0x00100000L) </span><span class="sxs-lookup"><span data-stu-id="2f2fc-121">**SYNCHRONIZE** (0x00100000L)</span></span>   | <span data-ttu-id="2f2fc-122">使用同步物件的權限。</span><span class="sxs-lookup"><span data-stu-id="2f2fc-122">The right to use the object for synchronization.</span></span> <span data-ttu-id="2f2fc-123">這可讓執行緒等候，直到物件處於已發出信號的狀態。</span><span class="sxs-lookup"><span data-stu-id="2f2fc-123">This enables a thread to wait until the object is in the signaled state.</span></span>                                                                                                                                                                |
| <span data-ttu-id="2f2fc-124">**寫入 \_DAC** (0x00040000L) </span><span class="sxs-lookup"><span data-stu-id="2f2fc-124">**WRITE\_DAC** (0x00040000L)</span></span>    | <span data-ttu-id="2f2fc-125">修改物件安全描述項中的 DACL 時需要。</span><span class="sxs-lookup"><span data-stu-id="2f2fc-125">Required to modify the DACL in the security descriptor for the object.</span></span>                                                                                                                                                                                                                   |
| <span data-ttu-id="2f2fc-126">**寫入 \_擁有** 者 (0x00080000L) </span><span class="sxs-lookup"><span data-stu-id="2f2fc-126">**WRITE\_OWNER** (0x00080000L)</span></span>  | <span data-ttu-id="2f2fc-127">需要變更物件之安全描述項中的擁有者。</span><span class="sxs-lookup"><span data-stu-id="2f2fc-127">Required to change the owner in the security descriptor for the object.</span></span>                                                                                                                                                                                                                  |



 

<span data-ttu-id="2f2fc-128">下表列出特定作業的存取權限。</span><span class="sxs-lookup"><span data-stu-id="2f2fc-128">The following table lists the job-specific access rights.</span></span>



| <span data-ttu-id="2f2fc-129">值</span><span class="sxs-lookup"><span data-stu-id="2f2fc-129">Value</span></span>                                               | <span data-ttu-id="2f2fc-130">意義</span><span class="sxs-lookup"><span data-stu-id="2f2fc-130">Meaning</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|-----------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="2f2fc-131">**作業 \_物件的 \_ 所有 \_ 存取** (0x1F001F) </span><span class="sxs-lookup"><span data-stu-id="2f2fc-131">**JOB\_OBJECT\_ALL\_ACCESS** (0x1F001F)</span></span>             | <span data-ttu-id="2f2fc-132">結合所有有效的工作物件存取權限。</span><span class="sxs-lookup"><span data-stu-id="2f2fc-132">Combines all valid job object access rights.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="2f2fc-133">**作業 \_物件 \_ 指派 \_ 進程** (0x0001) </span><span class="sxs-lookup"><span data-stu-id="2f2fc-133">**JOB\_OBJECT\_ASSIGN\_PROCESS** (0x0001)</span></span>           | <span data-ttu-id="2f2fc-134">需要呼叫 [**AssignProcessToJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-assignprocesstojobobject) 函式，才能將進程指派給工作物件。</span><span class="sxs-lookup"><span data-stu-id="2f2fc-134">Required to call the [**AssignProcessToJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-assignprocesstojobobject) function to assign processes to the job object.</span></span>                                                                                                                                                                                                                                                                                                                                                                |
| <span data-ttu-id="2f2fc-135">**作業 \_物件 \_ 查詢** (0x0004) </span><span class="sxs-lookup"><span data-stu-id="2f2fc-135">**JOB\_OBJECT\_QUERY** (0x0004)</span></span>                     | <span data-ttu-id="2f2fc-136">若要取得工作物件的特定資訊（例如屬性和帳戶處理資訊）， (參閱 [**QueryInformationJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-queryinformationjobobject) 和 [**IsProcessInJob**](/windows/win32/api/jobapi/nf-jobapi-isprocessinjob)) 。</span><span class="sxs-lookup"><span data-stu-id="2f2fc-136">Required to retrieve certain information about a job object, such as attributes and accounting information (see [**QueryInformationJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-queryinformationjobobject) and [**IsProcessInJob**](/windows/win32/api/jobapi/nf-jobapi-isprocessinjob)).</span></span>                                                                                                                                                                                                                                                                    |
| <span data-ttu-id="2f2fc-137">**作業 \_ (0x0002) 的物件 \_ 集 \_ 屬性**</span><span class="sxs-lookup"><span data-stu-id="2f2fc-137">**JOB\_OBJECT\_SET\_ATTRIBUTES** (0x0002)</span></span>           | <span data-ttu-id="2f2fc-138">需要呼叫 [**SetInformationJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-setinformationjobobject) 函式來設定工作物件的屬性。</span><span class="sxs-lookup"><span data-stu-id="2f2fc-138">Required to call the [**SetInformationJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-setinformationjobobject) function to set the attributes of the job object.</span></span>                                                                                                                                                                                                                                                                                                                                                                |
| <span data-ttu-id="2f2fc-139">**作業 \_ (0x0010) 的物件 \_ 集 \_ 安全性 \_ 屬性**</span><span class="sxs-lookup"><span data-stu-id="2f2fc-139">**JOB\_OBJECT\_SET\_SECURITY\_ATTRIBUTES** (0x0010)</span></span> | <span data-ttu-id="2f2fc-140">不支援此旗標。</span><span class="sxs-lookup"><span data-stu-id="2f2fc-140">This flag is not supported.</span></span> <span data-ttu-id="2f2fc-141">您必須針對與工作物件相關聯的每個進程個別設定安全性限制。**Windows Server 2003 和 WINDOWS XP：** 需要使用 **JobObjectSecurityLimitInformation** 資訊類別呼叫 [**SetInformationJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-setinformationjobobject)函式，以設定與工作物件相關聯之進程的安全性限制。</span><span class="sxs-lookup"><span data-stu-id="2f2fc-141">You must set security limitations individually for each process associated with a job object.**Windows Server 2003 and Windows XP:** Required to call the [**SetInformationJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-setinformationjobobject) function with the **JobObjectSecurityLimitInformation** information class to set security limitations for the processes associated with the job object.</span></span> <span data-ttu-id="2f2fc-142">Windows Vista 和 Windows Server 2008 已移除對此旗標的支援。</span><span class="sxs-lookup"><span data-stu-id="2f2fc-142">Support for this flag was removed in Windows Vista and Windows Server 2008.</span></span> <br/> |
| <span data-ttu-id="2f2fc-143">**作業 \_物件 \_ 終止** (0x0008) </span><span class="sxs-lookup"><span data-stu-id="2f2fc-143">**JOB\_OBJECT\_TERMINATE** (0x0008)</span></span>                 | <span data-ttu-id="2f2fc-144">需要呼叫 [**TerminateJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-terminatejobobject) 函式，以終止工作物件中的所有進程。</span><span class="sxs-lookup"><span data-stu-id="2f2fc-144">Required to call the [**TerminateJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-terminatejobobject) function to terminate all processes in the job object.</span></span>                                                                                                                                                                                                                                                                                                                                                                     |



 

<span data-ttu-id="2f2fc-145">[**CreateJobObject**](/windows/desktop/api/WinBase/nf-winbase-createjobobjecta)傳回的控制碼具有工作物件的 **\_ \_ 所有 \_ 存取** 權。</span><span class="sxs-lookup"><span data-stu-id="2f2fc-145">The handle returned by [**CreateJobObject**](/windows/desktop/api/WinBase/nf-winbase-createjobobjecta) has **JOB\_OBJECT\_ALL\_ACCESS** access to the job object.</span></span> <span data-ttu-id="2f2fc-146">當您呼叫 [**OpenJobObject**](/windows/desktop/api/WinBase/nf-winbase-openjobobjecta) 函式時，系統會針對物件的安全描述項，檢查要求的存取權限。</span><span class="sxs-lookup"><span data-stu-id="2f2fc-146">When you call the [**OpenJobObject**](/windows/desktop/api/WinBase/nf-winbase-openjobobjecta) function, the system checks the requested access rights against the object's security descriptor.</span></span> <span data-ttu-id="2f2fc-147">如果工作物件是在 [嵌套的作業](nested-jobs.md)階層中，具有工作物件存取權的呼叫端會隱含地存取階層中的所有子工作。</span><span class="sxs-lookup"><span data-stu-id="2f2fc-147">If a job object is in a hierarchy of [nested jobs](nested-jobs.md), a caller with access to the job object implicitly has access to all of its child jobs in the hierarchy.</span></span>

<span data-ttu-id="2f2fc-148">如果您想要讀取或寫入物件的 SACL，您可以向工作物件要求 **存取 \_ 系統 \_ 安全性** 存取權。</span><span class="sxs-lookup"><span data-stu-id="2f2fc-148">You can request the **ACCESS\_SYSTEM\_SECURITY** access right to a job object if you want to read or write the object's SACL.</span></span> <span data-ttu-id="2f2fc-149">如需詳細資訊，請參閱 (Acl) 和[SACL 訪問](../secauthz/sacl-access-right.md)許可權[的存取控制清單](../secauthz/access-control-lists.md)。</span><span class="sxs-lookup"><span data-stu-id="2f2fc-149">For more information, see [Access-Control Lists (ACLs)](../secauthz/access-control-lists.md) and [SACL Access Right](../secauthz/sacl-access-right.md).</span></span>

<span data-ttu-id="2f2fc-150">您必須針對與工作物件相關聯的每個進程個別設定安全性限制，而不是為工作物件本身設定它們。</span><span class="sxs-lookup"><span data-stu-id="2f2fc-150">You must set security limitations individually for each process associated with a job object, rather than setting them for the job object itself.</span></span> <span data-ttu-id="2f2fc-151">如需詳細資訊，請參閱 [進程安全性和存取權限](process-security-and-access-rights.md)。</span><span class="sxs-lookup"><span data-stu-id="2f2fc-151">For information, see [Process Security and Access Rights](process-security-and-access-rights.md).</span></span>

<span data-ttu-id="2f2fc-152">**Windows Server 2003 和 WINDOWS XP：** 您可以使用 [**SetInformationJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-setinformationjobobject) 函數來設定工作物件的安全性限制。</span><span class="sxs-lookup"><span data-stu-id="2f2fc-152">**Windows Server 2003 and Windows XP:** You can use the [**SetInformationJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-setinformationjobobject) function to set security limitations for the job object.</span></span> <span data-ttu-id="2f2fc-153">這項功能已在 Windows Vista 和 Windows Server 2008 中移除。</span><span class="sxs-lookup"><span data-stu-id="2f2fc-153">This capability was removed in Windows Vista and Windows Server 2008.</span></span>

 

 
