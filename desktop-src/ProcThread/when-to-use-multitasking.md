---
description: 有兩種方式可執行多工處理：作為多個執行緒或多個進程的單一進程，每個進程都有一個或多個執行緒。
ms.assetid: ac0a8163-1498-4274-acfc-6a36b4c02a27
title: 使用多工的時機
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b17e52f39a08120d3038663a95307ad72f228cfc
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/08/2021
ms.locfileid: "106980319"
---
# <a name="when-to-use-multitasking"></a>使用多工的時機

有兩種方式可執行多工處理：作為多個執行緒或多個進程的單一進程，每個進程都有一個或多個執行緒。 應用程式可以將需要私人位址空間和私用資源的每個執行緒放入自己的進程，以保護它免于其他進程執行緒的活動。

多執行緒進程可以使用執行緒管理互斥的工作，例如提供使用者介面和執行背景計算。 建立多執行緒程式也是一種方便的方式，可讓您以同時執行數個類似或相同工作的程式為結構。 例如，具名管道伺服器可以針對附加至管道的每個用戶端進程建立執行緒。 此執行緒會管理伺服器與用戶端之間的通訊。 您的進程可能會使用多個執行緒來完成下列工作：

-   管理多個視窗的輸入。
-   從數個通訊裝置管理輸入。
-   區分不同優先順序的工作。 例如，高優先順序執行緒會應付緊急工作，而低優先順序執行緒則執行其他工作。
-   讓使用者介面保持回應，同時又配置時間給背景工作。

藉由建立單一、多執行緒進程，而不是建立多個進程，讓應用程式更有效率地執行多工處理，原因如下：

-   系統可以更快速地對執行緒執行內容切換，而不是處理常式，因為進程的額外負荷比執行緒 (進程內容大於執行緒內容) 。
-   進程的所有線程都共用相同的位址空間，而且可以存取進程的全域變數，這可簡化執行緒之間的通訊。
-   進程的所有線程都可以共用開啟的控制碼給資源，例如檔案和管道。

您可以使用其他技巧來取代多執行緒。 最重要的是：非同步輸入和輸出 (i/o) 、i/o 完成埠、非同步程序呼叫 (APC) ，以及等待多個事件的能力。

單一線程可以起始多個耗時的 i/o 要求，這些要求可以使用非同步 i/o 並存執行。 非同步 i/o 可以在檔案、管道和序列通訊裝置上執行。 如需詳細資訊，請參閱 [同步處理和重迭的輸入和輸出](../sync/synchronization-and-overlapped-input-and-output.md)。

單一線程可以封鎖其本身的執行，同時等候數個或所有的事件發生。 這比使用多個執行緒，每個執行緒都在等候單一事件時更有效率，而且比使用單一執行緒來取用處理器時間更有效率，因為持續檢查事件是否發生。 如需詳細資訊，請參閱 [Wait 函數](../sync/wait-functions.md)。

 

 
