---
description: 服務品質表示執行緒的效能和電源效率，這可能會影響執行緒排程和處理器電源管理。
title: 服務品質
ms.topic: article
ms.date: 07/09/2021
ms.openlocfilehash: c506e810bafad41e9a5f14112c1398b0d6fb3ffc
ms.sourcegitcommit: 2805e19a2738a408d3c5ab69a8d84ec92ca25e36
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 07/14/2021
ms.locfileid: "113989787"
---
# <a name="quality-of-service"></a><span data-ttu-id="af343-103">服務品質</span><span class="sxs-lookup"><span data-stu-id="af343-103">Quality of Service</span></span>

<span data-ttu-id="af343-104">與執行緒相關聯的服務品質 (QoS) 用來指出所需的效能和電源效率。</span><span class="sxs-lookup"><span data-stu-id="af343-104">The Quality of Service (QoS) associated with a thread is used to indicate the desired performance and power efficiency.</span></span> <span data-ttu-id="af343-105">每個執行緒都會指派給 QoS 層級。</span><span class="sxs-lookup"><span data-stu-id="af343-105">Each thread is assigned to a QoS level.</span></span> <span data-ttu-id="af343-106">雖然排程優先權仍是系統決定接下來要排程之執行緒的主要度量，但 QoS 可能會影響核心選取和處理器電源管理。</span><span class="sxs-lookup"><span data-stu-id="af343-106">While scheduling priority remains the main metric by which the system determines which thread to schedule next, QoS can influence core selection and processor power management.</span></span> <span data-ttu-id="af343-107">在具有異類處理器的平臺上，執行緒的 QoS 可能會將排程限制在處理器的子集，或表示特定處理器類別的喜好設定。</span><span class="sxs-lookup"><span data-stu-id="af343-107">On platforms with heterogeneous processors, the QoS of a thread may restrict scheduling to a subset of processors, or indicate a preference for a particular class of processor.</span></span>

<span data-ttu-id="af343-108">開發人員可能已採用其他設備來控制何時執行，例如，使用者不存在時、只有在 AC/收費上，或根據電池計量。</span><span class="sxs-lookup"><span data-stu-id="af343-108">Developers may already be employing other facilities to control when to execute, such as when the user is not present, only on AC/charging, or depending on the battery level.</span></span> <span data-ttu-id="af343-109">QoS 提供了一種影響如何執行的設備。</span><span class="sxs-lookup"><span data-stu-id="af343-109">QoS provides a facility to influence how to execute.</span></span> <span data-ttu-id="af343-110">此設備可協助改善 CPU 效率，進而延長電池壽命。</span><span class="sxs-lookup"><span data-stu-id="af343-110">This facility can help to improve CPU efficiency and thus extend battery life.</span></span> <span data-ttu-id="af343-111">此外，此程式可協助降低 CPU 電源耗用量，並在使用 AC 電源來減少可能導致高風扇雜訊或甚至熱節流的熱輸出。</span><span class="sxs-lookup"><span data-stu-id="af343-111">In addition, this process can assist in reducing CPU power consumption while operating on AC power to reduce thermal output which can lead to high fan noise, or even thermal throttling.</span></span>

## <a name="quality-of-service-levels"></a><span data-ttu-id="af343-112">服務等級品質</span><span class="sxs-lookup"><span data-stu-id="af343-112">Quality of Service levels</span></span>

<span data-ttu-id="af343-113">系統會維護多個 QoS 層級，而每個層級都有差異的效能和電源效率。</span><span class="sxs-lookup"><span data-stu-id="af343-113">The system maintains multiple QoS levels, each with differentiated performance and power efficiency.</span></span> <span data-ttu-id="af343-114">Windows 針對每個 QoS 層級提供排程和處理器電源管理的標準預設設定。</span><span class="sxs-lookup"><span data-stu-id="af343-114">Windows provides standard default settings for scheduling and processor power management for each QoS level.</span></span> <span data-ttu-id="af343-115">您可以透過 Windows 布建來修改每個 QoS 層級的處理器電源管理和異類排程的精確調整。</span><span class="sxs-lookup"><span data-stu-id="af343-115">The precise tuning of each QoS level for processor power management and heterogeneous scheduling can be modified through Windows Provisioning.</span></span> <span data-ttu-id="af343-116">如需效能微調和布建的詳細資訊，請參閱 [處理器電源管理選項](/windows-hardware/customize/power-settings/configure-processor-power-management-options)。</span><span class="sxs-lookup"><span data-stu-id="af343-116">For more information on performance tuning and provisioning, see [Processor power management options](/windows-hardware/customize/power-settings/configure-processor-power-management-options).</span></span>

| <span data-ttu-id="af343-117">QoS 層級</span><span class="sxs-lookup"><span data-stu-id="af343-117">QoS level</span></span> | <span data-ttu-id="af343-118">Description</span><span class="sxs-lookup"><span data-stu-id="af343-118">Description</span></span>|<span data-ttu-id="af343-119">效能和威力</span><span class="sxs-lookup"><span data-stu-id="af343-119">Performance and power</span></span> | <span data-ttu-id="af343-120">版本</span><span class="sxs-lookup"><span data-stu-id="af343-120">Release</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="af343-121">高</span><span class="sxs-lookup"><span data-stu-id="af343-121">High</span></span> | <span data-ttu-id="af343-122">以視窗化的應用程式，其位於前景和焦點，或可聽見</span><span class="sxs-lookup"><span data-stu-id="af343-122">Windowed applications that are in the foreground and in focus, or audible</span></span> | <span data-ttu-id="af343-123">標準高效能</span><span class="sxs-lookup"><span data-stu-id="af343-123">Standard high performance</span></span> |<span data-ttu-id="af343-124">1709</span><span class="sxs-lookup"><span data-stu-id="af343-124">1709</span></span> |
| <span data-ttu-id="af343-125">中</span><span class="sxs-lookup"><span data-stu-id="af343-125">Medium</span></span> | <span data-ttu-id="af343-126">可對終端使用者顯示但不在焦點中的視窗化應用程式</span><span class="sxs-lookup"><span data-stu-id="af343-126">Windowed applications that may be visible to the end user but are not in focus</span></span> | <span data-ttu-id="af343-127">依平臺而異，介於高與低</span><span class="sxs-lookup"><span data-stu-id="af343-127">Varies by platform, between High and Low</span></span> | <span data-ttu-id="af343-128">1709</span><span class="sxs-lookup"><span data-stu-id="af343-128">1709</span></span> |
| <span data-ttu-id="af343-129">低</span><span class="sxs-lookup"><span data-stu-id="af343-129">Low</span></span> | <span data-ttu-id="af343-130">以視窗化的應用程式，對使用者而言看不到或無法聽見</span><span class="sxs-lookup"><span data-stu-id="af343-130">Windowed applications that are not visible or audible to the end user</span></span> | <span data-ttu-id="af343-131">在電池上，選取最有效率的 CPU 頻率和排程來提高核心</span><span class="sxs-lookup"><span data-stu-id="af343-131">On battery, selects most efficient CPU frequency and schedules to efficient cores</span></span> | <span data-ttu-id="af343-132">1709</span><span class="sxs-lookup"><span data-stu-id="af343-132">1709</span></span> |
| <span data-ttu-id="af343-133">生態</span><span class="sxs-lookup"><span data-stu-id="af343-133">Eco</span></span> | <span data-ttu-id="af343-134">使用[SetThreadInformation](/windows/desktop/api/processthreadsapi/nf-processthreadsapi-setprocessinformation)以[SetProcessInformation](/windows/desktop/api/processthreadsapi/nf-processthreadsapi-setprocessinformation)或執行緒明確標記進程的應用程式</span><span class="sxs-lookup"><span data-stu-id="af343-134">Applications which explicitly tag processes with [SetProcessInformation](/windows/desktop/api/processthreadsapi/nf-processthreadsapi-setprocessinformation) or threads with [SetThreadInformation](/windows/desktop/api/processthreadsapi/nf-processthreadsapi-setprocessinformation)</span></span> | <span data-ttu-id="af343-135">一律為有效率的核心選取最有效率的 CPU 頻率和排程</span><span class="sxs-lookup"><span data-stu-id="af343-135">Always selects most efficient CPU frequency and schedules to efficient cores</span></span> | <span data-ttu-id="af343-136">Windows 11</span><span class="sxs-lookup"><span data-stu-id="af343-136">Windows 11</span></span> |
| <span data-ttu-id="af343-137">媒體</span><span class="sxs-lookup"><span data-stu-id="af343-137">Media</span></span> | <span data-ttu-id="af343-138">由 [多媒體類別](/windows/desktop/procthread/multimedia-class-scheduler-service) 排程器服務明確標記以表示多媒體批次緩衝的執行緒</span><span class="sxs-lookup"><span data-stu-id="af343-138">Threads explicitly tagged by the [Multimedia Class Scheduler Service](/windows/desktop/procthread/multimedia-class-scheduler-service) to denote multimedia batch buffering</span></span> | <span data-ttu-id="af343-139">降低 CPU 頻率以有效率地處理批次處理</span><span class="sxs-lookup"><span data-stu-id="af343-139">CPU frequency reduced for efficient batch processing</span></span> | <span data-ttu-id="af343-140">2004</span><span class="sxs-lookup"><span data-stu-id="af343-140">2004</span></span> |
| <span data-ttu-id="af343-141">期限</span><span class="sxs-lookup"><span data-stu-id="af343-141">Deadline</span></span> | <span data-ttu-id="af343-142">由 [多媒體類別](/windows/desktop/procthread/multimedia-class-scheduler-service) 排程器服務明確標記的執行緒，表示音訊執行緒需要效能才能符合期限</span><span class="sxs-lookup"><span data-stu-id="af343-142">Threads explicitly tagged by [Multimedia Class Scheduler Service](/windows/desktop/procthread/multimedia-class-scheduler-service) to denote that audio threads require performance to meet deadlines</span></span> | <span data-ttu-id="af343-143">符合媒體期限的高效能</span><span class="sxs-lookup"><span data-stu-id="af343-143">High performance to meet media deadlines</span></span> | <span data-ttu-id="af343-144">2004</span><span class="sxs-lookup"><span data-stu-id="af343-144">2004</span></span> |

## <a name="quality-of-service-classification"></a><span data-ttu-id="af343-145">服務分類品質</span><span class="sxs-lookup"><span data-stu-id="af343-145">Quality of Service classification</span></span>

<span data-ttu-id="af343-146">下表顯示支援的 QoS 分類。</span><span class="sxs-lookup"><span data-stu-id="af343-146">The following table shows the supported QoS classifications.</span></span>

| <span data-ttu-id="af343-147">來源</span><span class="sxs-lookup"><span data-stu-id="af343-147">Source</span></span> | <span data-ttu-id="af343-148">描述</span><span class="sxs-lookup"><span data-stu-id="af343-148">Description</span></span> |
| --- | --- |
| <span data-ttu-id="af343-149">多媒體基礎</span><span class="sxs-lookup"><span data-stu-id="af343-149">Multimedia Foundation</span></span> | <span data-ttu-id="af343-150">[多媒體類別](/windows/desktop/procthread/multimedia-class-scheduler-service)排程器服務會排定多媒體案例的 CPU 資源。</span><span class="sxs-lookup"><span data-stu-id="af343-150">The [Multimedia Class Scheduler Service](/windows/desktop/procthread/multimedia-class-scheduler-service) prioritizes CPU resources for multimedia scenarios.</span></span> <span data-ttu-id="af343-151">服務會將負責多媒體處理的特定執行緒標記為使用媒體和期限 QoS 層級，以提供電源效率，同時符合效能期限。</span><span class="sxs-lookup"><span data-stu-id="af343-151">The service tags specific threads responsible for multimedia processing using the Media and Deadline QoS levels to provide power efficiency while meeting performance deadlines.</span></span>  |
| <span data-ttu-id="af343-152">API</span><span class="sxs-lookup"><span data-stu-id="af343-152">API</span></span> | <span data-ttu-id="af343-153">[SetProcessInformation](/windows/desktop/api/processthreadsapi/nf-processthreadsapi-setprocessinformation)可讓開發人員藉由切換 ProcessPowerThrottling 中的功能，將進程明確標記為 HighQoS 或 EcoQoS `PROCESS_POWER_THROTTLING_EXECUTION_SPEED` 。 </span><span class="sxs-lookup"><span data-stu-id="af343-153">[SetProcessInformation](/windows/desktop/api/processthreadsapi/nf-processthreadsapi-setprocessinformation) lets developers explicitly tag a process as HighQoS or EcoQoS by toggling the `PROCESS_POWER_THROTTLING_EXECUTION_SPEED` feature in **ProcessPowerThrottling**.</span></span></br><span data-ttu-id="af343-154">[SetThreadInformation](/windows/desktop/api/processthreadsapi/nf-processthreadsapi-setprocessinformation)可讓開發人員藉由切換 ThreadPowerThrottling 中的功能，將執行緒明確標記為 HighQoS 或 EcoQoS `THREAD_POWER_THROTTLING_EXECUTION_SPEED` 。 </span><span class="sxs-lookup"><span data-stu-id="af343-154">[SetThreadInformation](/windows/desktop/api/processthreadsapi/nf-processthreadsapi-setprocessinformation) lets developers explicitly tag a thread as HighQoS or EcoQoS by toggling the `THREAD_POWER_THROTTLING_EXECUTION_SPEED` feature in **ThreadPowerThrottling** .</span></span>  |
| <span data-ttu-id="af343-155">發聲</span><span class="sxs-lookup"><span data-stu-id="af343-155">Audible</span></span> | <span data-ttu-id="af343-156">決定要播放音訊的進程會 HighQoS。</span><span class="sxs-lookup"><span data-stu-id="af343-156">Processes which are determined to be playing audio are HighQoS.</span></span> |
| <span data-ttu-id="af343-157">可見</span><span class="sxs-lookup"><span data-stu-id="af343-157">Visible</span></span> | <span data-ttu-id="af343-158">直接擁有視窗的進程 (或屬於視窗擁有進程的下階，) 會根據其可見度和焦點狀態指派 QoS 層級：</span><span class="sxs-lookup"><span data-stu-id="af343-158">Processes which directly own a window (or are descendants of window owning processes) are assigned a QoS level according to their visibility and focus state:</span></span></br></br><table><tr><th><span data-ttu-id="af343-159">視窗狀態</span><span class="sxs-lookup"><span data-stu-id="af343-159">Window State</span></span></th><th><span data-ttu-id="af343-160">服務品質</span><span class="sxs-lookup"><span data-stu-id="af343-160">Quality of Service</span></span></th></tr><tr><td><span data-ttu-id="af343-161">聚焦</span><span class="sxs-lookup"><span data-stu-id="af343-161">In Focus</span></span></td><td><span data-ttu-id="af343-162">高</span><span class="sxs-lookup"><span data-stu-id="af343-162">High</span></span></td></tr><tr><td><span data-ttu-id="af343-163">可見</span><span class="sxs-lookup"><span data-stu-id="af343-163">Visible</span></span></td><td><span data-ttu-id="af343-164">中</span><span class="sxs-lookup"><span data-stu-id="af343-164">Medium</span></span></td></tr><tr><td><span data-ttu-id="af343-165">最小化或完全 Pixels occluded</span><span class="sxs-lookup"><span data-stu-id="af343-165">Minimized, or Fully Occluded</span></span></td><td><span data-ttu-id="af343-166">低</span><span class="sxs-lookup"><span data-stu-id="af343-166">Low</span></span></td></tr></table> |
| <span data-ttu-id="af343-167">啟發式</span><span class="sxs-lookup"><span data-stu-id="af343-167">Heuristic</span></span> | <span data-ttu-id="af343-168">未由上述來源分類的執行緒會由系統自動指派 QoS 層級。</span><span class="sxs-lookup"><span data-stu-id="af343-168">Threads which are not classified by the above sources are automatically assigned a QoS level by the system.</span></span> <span data-ttu-id="af343-169">這些啟發學習法包含 (但不限於) 執行緒優先順序，其中以降低執行緒優先順序執行的執行緒可以表示較低的 QoS 層級。</span><span class="sxs-lookup"><span data-stu-id="af343-169">These heuristics include (but are not limited to) thread priority, where threads running with reduced thread priority can imply a lower QoS level.</span></span> |
