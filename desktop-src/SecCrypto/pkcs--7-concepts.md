---
description: CryptoAPI 訊息函式遵守 PKCS \# 7 密碼編譯訊息語法 (CMS) 標準。 開發人員必須熟悉此規格，以最有效率的方式使用低層級的訊息功能。 這裡有幾個定義會反白顯示。
ms.assetid: 99b633fe-9898-4570-ba8b-16ee78d351da
title: PKCS \# 7 密碼編譯訊息語法概念
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5ead1c5e75737db80adbca725a30cb730b547be4
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/08/2021
ms.locfileid: "106984996"
---
# <a name="pkcs-7-cryptographic-messaging-syntax-concepts"></a><span data-ttu-id="d5434-105">PKCS \# 7 密碼編譯訊息語法概念</span><span class="sxs-lookup"><span data-stu-id="d5434-105">PKCS \#7 Cryptographic Messaging Syntax Concepts</span></span>

<span data-ttu-id="d5434-106">CryptoAPI 訊息函式遵守 [*PKCS \# 7*](../secgloss/p-gly.md) [密碼編譯訊息語法 (CMS) 標準](https://www.ietf.org/rfc/rfc3369.txt)。</span><span class="sxs-lookup"><span data-stu-id="d5434-106">The CryptoAPI message functions adhere to [*PKCS \#7*](../secgloss/p-gly.md) [Cryptographic Message Syntax (CMS) Standard](https://www.ietf.org/rfc/rfc3369.txt).</span></span> <span data-ttu-id="d5434-107">開發人員必須熟悉此規格，以最有效率的方式使用 [*低層級的訊息功能*](../secgloss/l-gly.md)。</span><span class="sxs-lookup"><span data-stu-id="d5434-107">Developers need to be familiar with this specification to most effectively use the [*low-level message functions*](../secgloss/l-gly.md).</span></span> <span data-ttu-id="d5434-108">這裡有幾個定義會反白顯示。</span><span class="sxs-lookup"><span data-stu-id="d5434-108">A few of its definitions are highlighted here.</span></span>

<span data-ttu-id="d5434-109">PKCS \# 7 standard 描述可能已套用 [*加密*](../secgloss/c-gly.md) 的資料的一般語法，例如 [*數位簽章*](../secgloss/d-gly.md) 和 [*數位信封*](../secgloss/d-gly.md)。</span><span class="sxs-lookup"><span data-stu-id="d5434-109">The PKCS \#7 standard describes a general syntax for data that may have [*cryptography*](../secgloss/c-gly.md) applied to it, such as [*digital signatures*](../secgloss/d-gly.md) and [*digital envelopes*](../secgloss/d-gly.md).</span></span> <span data-ttu-id="d5434-110">語法認可遞迴，如此一來，就可以將一個信封放在另一個，或一個合作物件簽署已放入信封中的數位資料。</span><span class="sxs-lookup"><span data-stu-id="d5434-110">The syntax admits recursion, so that, for example, one envelope can be nested inside another, or one party can sign digital data that has already been put into an envelope.</span></span> <span data-ttu-id="d5434-111">它也可讓您使用任意屬性，例如簽章時間，以及訊息的內容進行驗證。</span><span class="sxs-lookup"><span data-stu-id="d5434-111">It also allows arbitrary attributes, such as signing time, to be authenticated along with the content of a message.</span></span> <span data-ttu-id="d5434-112">此外，它還提供其他屬性（例如 [*副署*](../secgloss/c-gly.md)）與簽章相關聯。</span><span class="sxs-lookup"><span data-stu-id="d5434-112">Further, it provides for other attributes, such as [*countersignatures*](../secgloss/c-gly.md), to be associated with a signature.</span></span>

<span data-ttu-id="d5434-113">PKCS 7 訊息中包含的資料類型 \# 稱為其內容類型。</span><span class="sxs-lookup"><span data-stu-id="d5434-113">The type of data contained in a PKCS \#7 message is called its content type.</span></span> <span data-ttu-id="d5434-114">有兩種類別的內容類型： Base 和增強型別。</span><span class="sxs-lookup"><span data-stu-id="d5434-114">There are two classes of content types: Base and Enhanced.</span></span>

-   <span data-ttu-id="d5434-115">基底內容類型只包含沒有密碼編譯增強功能的資料。</span><span class="sxs-lookup"><span data-stu-id="d5434-115">Base content types contain only data with no cryptographic enhancements.</span></span> <span data-ttu-id="d5434-116">目前這個類別中只有一個內容類型，也就是 [*資料內容類型*](../secgloss/d-gly.md)。</span><span class="sxs-lookup"><span data-stu-id="d5434-116">Presently there is only one content type in this class, the [*data content type*](../secgloss/d-gly.md).</span></span>
-   <span data-ttu-id="d5434-117">[*增強的內容類型*](../secgloss/e-gly.md) 包含某些類型 (可能已加密) 的資料，以及其他 (例如雜湊或簽章) 的密碼編譯增強功能。</span><span class="sxs-lookup"><span data-stu-id="d5434-117">[*Enhanced content types*](../secgloss/e-gly.md) contain data of some type (possibly encrypted), and other cryptographic enhancements (such as hashes or signatures).</span></span>

<span data-ttu-id="d5434-118">增強型類別中的內容採用封裝，提供 [*外部內容*](../secgloss/o-gly.md) (，其中包含增強功能) 和 [*內部內容*](../secgloss/i-gly.md) ， () 的增強功能。</span><span class="sxs-lookup"><span data-stu-id="d5434-118">The content in the Enhanced class employs encapsulation, giving rise to the terms [*outer content*](../secgloss/o-gly.md) (the one containing the enhancements) and [*inner content*](../secgloss/i-gly.md) (the one being enhanced).</span></span> <span data-ttu-id="d5434-119">例如，增強型類別可能包含 (基類) 的 [*資料內容類型*](../secgloss/d-gly.md) ，其中包含簽章。</span><span class="sxs-lookup"><span data-stu-id="d5434-119">For example, an Enhanced class might contain the [*data content type*](../secgloss/d-gly.md) (Base class) that has a signature included with it.</span></span> <span data-ttu-id="d5434-120">在此情況下，資料內容類型是 *內部內容* ，且資料內容類型和簽章的組合會形成外部內容。</span><span class="sxs-lookup"><span data-stu-id="d5434-120">In this case, the data content type is the *inner content* and the combination of the data content type and the signature forms the outer content.</span></span>

<span data-ttu-id="d5434-121">PKCS 7 標準中定義的內容類型如下所示 \# 。</span><span class="sxs-lookup"><span data-stu-id="d5434-121">The content types defined in the PKCS \#7 standard are as follows.</span></span>



| <span data-ttu-id="d5434-122">內容類型</span><span class="sxs-lookup"><span data-stu-id="d5434-122">Content type</span></span>              | <span data-ttu-id="d5434-123">Description</span><span class="sxs-lookup"><span data-stu-id="d5434-123">Description</span></span>                                                                                                                                                                                                                                                                                                           |
|---------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="d5434-124">資料</span><span class="sxs-lookup"><span data-stu-id="d5434-124">Data</span></span>                      | <span data-ttu-id="d5434-125">八位 (**位元組**) 字串。</span><span class="sxs-lookup"><span data-stu-id="d5434-125">An octet (**BYTE**) string.</span></span>                                                                                                                                                                                                                                                                                           |
| <span data-ttu-id="d5434-126">簽署的資料</span><span class="sxs-lookup"><span data-stu-id="d5434-126">Signed Data</span></span>               | <span data-ttu-id="d5434-127">任何類型和加密訊息 [*雜湊*](../secgloss/h-gly.md) 的內容 () 或多個簽署者的內容 [*摘要*](../secgloss/m-gly.md) 。</span><span class="sxs-lookup"><span data-stu-id="d5434-127">Content of any type and encrypted message [*hashes*](../secgloss/h-gly.md) ([*digests*](../secgloss/m-gly.md)) of the content for zero or more signers.</span></span>                                                                           |
| <span data-ttu-id="d5434-128">封包資料</span><span class="sxs-lookup"><span data-stu-id="d5434-128">Enveloped Data</span></span>            | <span data-ttu-id="d5434-129">一或多個收件者的任何類型和加密內容加密金鑰的加密內容。</span><span class="sxs-lookup"><span data-stu-id="d5434-129">Encrypted content of any type and encrypted content-encryption keys for one or more recipients.</span></span> <span data-ttu-id="d5434-130">收件者的加密內容和加密內容加密金鑰的組合是該收件者的 [*數位信封*](../secgloss/d-gly.md) 。</span><span class="sxs-lookup"><span data-stu-id="d5434-130">The combination of encrypted content and encrypted content-encryption key for a recipient is a [*digital envelope*](../secgloss/d-gly.md) for that recipient.</span></span> |
| <span data-ttu-id="d5434-131">已簽署和封包的資料</span><span class="sxs-lookup"><span data-stu-id="d5434-131">Signed-and-Enveloped Data</span></span> | <span data-ttu-id="d5434-132">針對一或多個收件者的任何類型、加密的內容加密金鑰加密的內容，以及一或多個簽署者的雙向加密訊息摘要。</span><span class="sxs-lookup"><span data-stu-id="d5434-132">Encrypted content of any type, encrypted content-encryption keys for one or more recipients, and doubly encrypted message digests for one or more signers.</span></span> <span data-ttu-id="d5434-133">雙重加密包含使用簽署者的私密金鑰進行加密，後面接著具有內容加密金鑰的加密。</span><span class="sxs-lookup"><span data-stu-id="d5434-133">The double encryption consists of an encryption with a signer's private key followed by an encryption with the content-encryption key.</span></span>                     |
| <span data-ttu-id="d5434-134">子集資料</span><span class="sxs-lookup"><span data-stu-id="d5434-134">Digested Data</span></span>             | <span data-ttu-id="d5434-135">任何類型的內容和訊息 [*雜湊*](../secgloss/h-gly.md) (內容的摘要) 。</span><span class="sxs-lookup"><span data-stu-id="d5434-135">Content of any type and a message [*hash*](../secgloss/h-gly.md) (digest) of the content.</span></span>                                                                                                                                                                                             |
| <span data-ttu-id="d5434-136">加密的資料</span><span class="sxs-lookup"><span data-stu-id="d5434-136">Encrypted Data</span></span>            | <span data-ttu-id="d5434-137">任何類型的加密內容。</span><span class="sxs-lookup"><span data-stu-id="d5434-137">Encrypted content of any type.</span></span> <span data-ttu-id="d5434-138">與封包 [*資料內容類型*](../secgloss/d-gly.md)不同的是，加密資料內容類型不具有收件者和加密的內容加密金鑰。</span><span class="sxs-lookup"><span data-stu-id="d5434-138">Unlike the enveloped-[*data content type*](../secgloss/d-gly.md), the encrypted-data content type has neither recipients nor encrypted content-encryption keys.</span></span> <span data-ttu-id="d5434-139">系統會假設您可以使用其他方法來管理金鑰。</span><span class="sxs-lookup"><span data-stu-id="d5434-139">Keys are assumed to be managed by other means.</span></span>               |



 

> [!Note]  
> <span data-ttu-id="d5434-140">在 PKCS \# 7 規格中，「 *摘要* 」和「 [*子集*](../secgloss/d-gly.md) 」一詞指的是將 [*雜湊演算法*](../secgloss/h-gly.md) 套用至資料所產生的值。</span><span class="sxs-lookup"><span data-stu-id="d5434-140">Throughout the PKCS \#7 specification, the terms *digest* and [*digested*](../secgloss/d-gly.md) refer to the value produced from applying a [*hashing algorithm*](../secgloss/h-gly.md) to data.</span></span> <span data-ttu-id="d5434-141">本檔 *會針對相同* 的目的使用「[*雜湊*](../secgloss/h-gly.md)」和「雜湊」這一詞。</span><span class="sxs-lookup"><span data-stu-id="d5434-141">This documentation uses the terms [*hash*](../secgloss/h-gly.md) and *hashed* for the same purpose.</span></span> <span data-ttu-id="d5434-142">例如，搭配 [*低層級訊息函數*](../secgloss/l-gly.md) 使用的資料類型稱為雜湊，而不是子集。</span><span class="sxs-lookup"><span data-stu-id="d5434-142">For example, the data type used with the [*low-level message functions*](../secgloss/l-gly.md) is called hashed rather than digested.</span></span> <span data-ttu-id="d5434-143">基於本檔的目的，您可以交替使用這兩組條款。</span><span class="sxs-lookup"><span data-stu-id="d5434-143">For the purposes of this documentation, the two sets of terms may be used interchangeably.</span></span>

 

 

 
