---
description: 用來代表登錄專案，這些登錄專案是由以 Microsoft 軟體為基礎的 Csp 來控制私密金鑰快取。
ms.assetid: 67909072-72fe-4777-ae52-a7b9047c9dd5
title: '私密金鑰快取常數 (Wincrypt .h) '
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: 87d4caf6a3973a5113e03cbe24882241609ff83b8be65a20492f8f967abb734f
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/11/2021
ms.locfileid: "117978559"
---
# <a name="private-key-caching-constants"></a>私密金鑰快取常數

下列常數可用來代表登錄專案，這些登錄專案會控制以 Microsoft 軟體為基礎的 Csp 的 [*私密金鑰*](../secgloss/p-gly.md) 快取。



| 常數/值                                                                                                                                                                                                                                                                                                                                                                                    | 描述                                                                                                |
|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:-----------------------------------------------------------------------------------------------------------|
| <span id="szKEY_CRYPTOAPI_PRIVATE_KEY_OPTIONS"></span><span id="szkey_cryptoapi_private_key_options"></span><span id="SZKEY_CRYPTOAPI_PRIVATE_KEY_OPTIONS"></span><dl> <dt>**szKEY \_CRYPTOAPI \_ 私密金鑰 \_ \_ 選項**</dt>「<dt>軟體 \\ \\ 原則 \\ \\ Microsoft \\ \\ 密碼</dt>編譯」 </dl> | 私密金鑰快取登錄專案在 **HKEY \_ 本機 \_ 電腦** 根目錄下的路徑。<br/> |



下列常數可用來識別登錄值，以針對 Microsoft 軟體為基礎的 Csp，針對特定進程全域控制私密金鑰快取。



| 常數/值                                                                                                                                                                                                                                                                                                                                                                                    | 描述                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span id="szPRIV_KEY_CACHE_MAX_ITEMS"></span><span id="szpriv_key_cache_max_items"></span><span id="SZPRIV_KEY_CACHE_MAX_ITEMS"></span><dl> <dt>**szPRIV \_金鑰快取 \_ \_ \_ 專案數上限**</dt> <dt>"PrivKeyCacheMaxItems"</dt> </dl>                                                                  | **SzKEY \_ CRYPTOAPI \_ 私密金鑰 \_ \_ 選項** 登錄機碼下的 **REG \_ DWORD** 值，可指定一次可針對單一進程快取的最大私密金鑰數目。 每次讀取儲存的私密金鑰時，就會執行這項檢查。 如果超過最大數目，就會從快取中移除最少最近使用的索引鍵。<br/> 如果此值為零，則不會快取任何索引鍵。 如果此值不存在，就會使用 **cPRIV 金鑰快取 \_ \_ \_ 最大 \_ 專案 \_ 預設** 值作為預設值。<br/> 如果目前在開啟的內容中參考從快取中刪除的私密金鑰，則會在下次嘗試使用金鑰時，從儲存體讀取金鑰。<br/> **Windows Server 2003 和 Windows XP SP1 及更早版本：** 不支援這個登錄值。<br/>                                  |
| <span id="cPRIV_KEY_CACHE_MAX_ITEMS_DEFAULT"></span><span id="cpriv_key_cache_max_items_default"></span><span id="CPRIV_KEY_CACHE_MAX_ITEMS_DEFAULT"></span><dl> <dt>**cPRIV \_金鑰快取 \_ \_ 最大 \_ 專案數 \_ 預設**</dt>為 <dt>20</dt> </dl>                                                         | 如果未指定任何值，則為 SzPRIV 索引鍵快取 **\_ \_ \_ 最大 \_ 專案** 登錄專案的預設值。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| <span id="szPRIV_KEY_CACHE_PURGE_INTERVAL_SECONDS"></span><span id="szpriv_key_cache_purge_interval_seconds"></span><span id="SZPRIV_KEY_CACHE_PURGE_INTERVAL_SECONDS"></span><dl> <dt>**szPRIV \_金鑰快取 \_ \_ 清除 \_ 間隔 \_ 秒數**</dt> <dt>"PrivKeyCachePurgeIntervalSeconds"</dt> </dl> | **SzKEY \_ CRYPTOAPI \_ 私密金鑰 \_ \_ 選項** 登錄機碼下的 **REG \_ DWORD** 值，可指定任何快取私密金鑰的最長存留期（以秒為單位）。 每當使用或讀取已儲存的私密金鑰時，就會執行這項檢查。 如果自從上次清除之後已經過這段時間，就會從快取中移除所有尚未參考的快取索引鍵。<br/> 如果此值不存在，就會使用 **cPRIV 金鑰快取 \_ \_ \_ 清除 \_ 間隔秒的 \_ \_ 預設** 值作為預設值。<br/> 如果從快取中清除的私密金鑰目前是在開啟的內容中參考，則在下次嘗試使用金鑰時，會從儲存體讀取金鑰。<br/> **Windows Server 2003 和 Windows XP SP1 及更早版本：** 不支援這個登錄值。<br/> |
| <span id="cPRIV_KEY_CACHE_PURGE_INTERVAL_SECONDS_DEFAULT"></span><span id="cpriv_key_cache_purge_interval_seconds_default"></span><span id="CPRIV_KEY_CACHE_PURGE_INTERVAL_SECONDS_DEFAULT"></span><dl> <dt>**cPRIV \_金鑰快取 \_ \_ 清除 \_ 間隔 \_ 秒數 \_ 預設為**</dt> <dt>86400</dt> </dl> | 如果未指定任何值，則為 SzPRIV 索引鍵快取 **\_ \_ \_ 清除 \_ 間隔 \_ 秒數** 的預設值。 此值相當於一天。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |



下列常數可用來識別登錄值，以控制單一 Microsoft 軟體型 [*密碼編譯服務提供者*](../secgloss/c-gly.md) (CSP) 實例的私密金鑰快取。



| 常數/值                                                                                                                                                                                                                                                                                          | 描述                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <dl> <dt></dt><dt>"AllowCachePW"</dt> </dl>                                                                                                                                                         | **HKEY \_ 本機 \_ 電腦 \\ 軟體 \\ 原則 \\ \\ \\** 下的 **REG \_ DWORD** 值 microsoft 密碼編譯會保護登錄機碼，此登錄機碼會指定是否在 Microsoft 軟體為基礎的 csp 中啟用密碼保護的金鑰的密碼快取。 如果此值為0，則會 disabeld 密碼快取，並在每次使用受密碼保護的金鑰時提示使用者輸入密碼。 任何其他值或缺少此值，表示將會快取密碼。 在此案例中，每個這類金鑰的每個進程只會提示使用者一次。 <br/> |
| <span id="szKEY_CACHE_ENABLED"></span><span id="szkey_cache_enabled"></span><span id="SZKEY_CACHE_ENABLED"></span><dl> <dt>**szKEY \_快取 \_ 已啟用**</dt> <dt>"CachePrivateKeys"</dt> </dl>          | **SzKEY \_ CRYPTOAPI \_ 私密金鑰 \_ \_ 選項** 登錄機碼底下的 **REG \_ DWORD** 值，可指定是否啟用私密金鑰快取。 如果這個值是1，則會啟用私密金鑰快取。 任何其他值或缺少此值，表示私密金鑰快取已停用。<br/> **Windows vista SP1、Windows vista 和 Windows XP：** 不支援這個登錄值。<br/>                                                                                                                                                        |
| <span id="szKEY_CACHE_SECONDS"></span><span id="szkey_cache_seconds"></span><span id="SZKEY_CACHE_SECONDS"></span><dl> <dt>**szKEY \_快取 \_ 秒數**</dt> <dt>"PrivateKeyLifetimeSeconds"</dt> </dl> | **SzKEY \_ CRYPTOAPI \_ 私密金鑰 \_ \_ 選項** 登錄機碼下的 **REG \_ DWORD** 值，可指定任何快取私密金鑰的最長存留期（以秒為單位）。<br/> **Windows XP：** 不支援這個登錄值。<br/>                                                                                                                                                                                                                                                                                                                                          |



## <a name="remarks"></a>備註

**SzKEY \_ CACHE \_ seconds** 和 **szPRIV \_ KEY \_ CACHE \_ 清除 \_ 間隔 \_ 秒** 值之間的差異如下：

 **szKEY 快取 \_ \_ 秒數**  

-   此值只適用于特定的 CSP。 在 CSP 發行之後，CSP 的快取也會釋出。  
-   只有在嘗試使用特定的私密金鑰搭配特定的內容控制碼時，才會套用這個值。  

**szPRIV \_ 金鑰快取 \_ \_ 清除 \_ 間隔 \_ 秒數**  

-   此值適用于進程中的所有 Csp。 即使已發行 CSP，也不會釋出此快取。  
-   每當在單一進程中使用任何已儲存的私密金鑰或從儲存體讀取時，就會套用這個值。  



## <a name="requirements"></a>規格需求



| 需求 | 值 |
|-------------------------------------|---------------------------------------------------------------------------------------|
| 最低支援的用戶端<br/> | Windows\[僅限 XP desktop 應用程式\]<br/>                                           |
| 最低支援的伺服器<br/> | Windows\[僅限 Server 2003 desktop 應用程式\]<br/>                                  |
| 標頭<br/>                   | <dl> <dt>Wincrypt。h</dt> </dl> |



 

 
