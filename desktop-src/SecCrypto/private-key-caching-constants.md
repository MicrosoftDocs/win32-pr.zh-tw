---
description: 用來代表登錄專案，這些登錄專案是由以 Microsoft 軟體為基礎的 Csp 來控制私密金鑰快取。
ms.assetid: 67909072-72fe-4777-ae52-a7b9047c9dd5
title: '私密金鑰快取常數 (Wincrypt .h) '
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: 6afa1394b33f4e36e31934e813b7c9fc41814e28
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/08/2021
ms.locfileid: "103852891"
---
# <a name="private-key-caching-constants"></a><span data-ttu-id="ca6be-103">私密金鑰快取常數</span><span class="sxs-lookup"><span data-stu-id="ca6be-103">Private Key Caching Constants</span></span>

<span data-ttu-id="ca6be-104">下列常數可用來代表登錄專案，這些登錄專案會控制以 Microsoft 軟體為基礎的 Csp 的 [*私密金鑰*](../secgloss/p-gly.md) 快取。</span><span class="sxs-lookup"><span data-stu-id="ca6be-104">The following constants are used to represent registry entries that control [*private key*](../secgloss/p-gly.md) caching by Microsoft software-based CSPs.</span></span>



| <span data-ttu-id="ca6be-105">常數/值</span><span class="sxs-lookup"><span data-stu-id="ca6be-105">Constant/value</span></span>                                                                                                                                                                                                                                                                                                                                                                                    | <span data-ttu-id="ca6be-106">Description</span><span class="sxs-lookup"><span data-stu-id="ca6be-106">Description</span></span>                                                                                                |
|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:-----------------------------------------------------------------------------------------------------------|
| <span id="szKEY_CRYPTOAPI_PRIVATE_KEY_OPTIONS"></span><span id="szkey_cryptoapi_private_key_options"></span><span id="SZKEY_CRYPTOAPI_PRIVATE_KEY_OPTIONS"></span><dl> <span data-ttu-id="ca6be-107"><dt>**szKEY \_CRYPTOAPI \_ 私密金鑰 \_ \_ 選項**</dt>「<dt>軟體 \\ \\ 原則 \\ \\ Microsoft \\ \\ 密碼</dt>編譯」</span><span class="sxs-lookup"><span data-stu-id="ca6be-107"><dt>**szKEY\_CRYPTOAPI\_PRIVATE\_KEY\_OPTIONS**</dt> <dt>"Software\\\\Policies\\\\Microsoft\\\\Cryptography"</dt></span></span> </dl> | <span data-ttu-id="ca6be-108">私密金鑰快取登錄專案在 **HKEY \_ 本機 \_ 電腦** 根目錄下的路徑。</span><span class="sxs-lookup"><span data-stu-id="ca6be-108">The path, under the **HKEY\_LOCAL\_MACHINE** root, of the private key caching registry entries.</span></span><br/> |



<span data-ttu-id="ca6be-109">下列常數可用來識別登錄值，以針對 Microsoft 軟體為基礎的 Csp，針對特定進程全域控制私密金鑰快取。</span><span class="sxs-lookup"><span data-stu-id="ca6be-109">The following constants are used to identify registry values that control private key caching globally for a specific process by Microsoft software-based CSPs.</span></span>



| <span data-ttu-id="ca6be-110">常數/值</span><span class="sxs-lookup"><span data-stu-id="ca6be-110">Constant/value</span></span>                                                                                                                                                                                                                                                                                                                                                                                    | <span data-ttu-id="ca6be-111">Description</span><span class="sxs-lookup"><span data-stu-id="ca6be-111">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span id="szPRIV_KEY_CACHE_MAX_ITEMS"></span><span id="szpriv_key_cache_max_items"></span><span id="SZPRIV_KEY_CACHE_MAX_ITEMS"></span><dl> <span data-ttu-id="ca6be-112"><dt>**szPRIV \_金鑰快取 \_ \_ \_ 專案數上限**</dt> <dt>"PrivKeyCacheMaxItems"</dt></span><span class="sxs-lookup"><span data-stu-id="ca6be-112"><dt>**szPRIV\_KEY\_CACHE\_MAX\_ITEMS**</dt> <dt>"PrivKeyCacheMaxItems"</dt></span></span> </dl>                                                                  | <span data-ttu-id="ca6be-113">**SzKEY \_ CRYPTOAPI \_ 私密金鑰 \_ \_ 選項** 登錄機碼下的 **REG \_ DWORD** 值，可指定一次可針對單一進程快取的最大私密金鑰數目。</span><span class="sxs-lookup"><span data-stu-id="ca6be-113">A **REG\_DWORD** value under the **szKEY\_CRYPTOAPI\_PRIVATE\_KEY\_OPTIONS** registry key that specifies the maximum number of private keys that can be cached at one time for a single process.</span></span> <span data-ttu-id="ca6be-114">每次讀取儲存的私密金鑰時，就會執行這項檢查。</span><span class="sxs-lookup"><span data-stu-id="ca6be-114">This check is performed whenever a stored private key is read.</span></span> <span data-ttu-id="ca6be-115">如果超過最大數目，就會從快取中移除最少最近使用的索引鍵。</span><span class="sxs-lookup"><span data-stu-id="ca6be-115">If the maximum number is exceeded, the least recently used key is removed from the cache.</span></span><br/> <span data-ttu-id="ca6be-116">如果此值為零，則不會快取任何索引鍵。</span><span class="sxs-lookup"><span data-stu-id="ca6be-116">If this value is zero, no keys are cached.</span></span> <span data-ttu-id="ca6be-117">如果此值不存在，就會使用 **cPRIV 金鑰快取 \_ \_ \_ 最大 \_ 專案 \_ 預設** 值作為預設值。</span><span class="sxs-lookup"><span data-stu-id="ca6be-117">If this value is not present, the **cPRIV\_KEY\_CACHE\_MAX\_ITEMS\_DEFAULT** value is used as the default.</span></span><br/> <span data-ttu-id="ca6be-118">如果目前在開啟的內容中參考從快取中刪除的私密金鑰，則會在下次嘗試使用金鑰時，從儲存體讀取金鑰。</span><span class="sxs-lookup"><span data-stu-id="ca6be-118">If a private key that is deleted from the cache is currently referenced in an open context, then the key is read from storage the next time an attempt is made to use the key.</span></span><br/> <span data-ttu-id="ca6be-119">**Windows Server 2003 和 WINDOWS XP （含 SP1）及更早版本：** 不支援這個登錄值。</span><span class="sxs-lookup"><span data-stu-id="ca6be-119">**Windows Server 2003 and Windows XP with SP1 and earlier:** This registry value is not supported.</span></span><br/>                                  |
| <span id="cPRIV_KEY_CACHE_MAX_ITEMS_DEFAULT"></span><span id="cpriv_key_cache_max_items_default"></span><span id="CPRIV_KEY_CACHE_MAX_ITEMS_DEFAULT"></span><dl> <span data-ttu-id="ca6be-120"><dt>**cPRIV \_金鑰快取 \_ \_ 最大 \_ 專案數 \_ 預設**</dt>為 <dt>20</dt></span><span class="sxs-lookup"><span data-stu-id="ca6be-120"><dt>**cPRIV\_KEY\_CACHE\_MAX\_ITEMS\_DEFAULT**</dt> <dt>20</dt></span></span> </dl>                                                         | <span data-ttu-id="ca6be-121">如果未指定任何值，則為 SzPRIV 索引鍵快取 **\_ \_ \_ 最大 \_ 專案** 登錄專案的預設值。</span><span class="sxs-lookup"><span data-stu-id="ca6be-121">The default value of the **szPRIV\_KEY\_CACHE\_MAX\_ITEMS** registry entry if no value is specified.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| <span id="szPRIV_KEY_CACHE_PURGE_INTERVAL_SECONDS"></span><span id="szpriv_key_cache_purge_interval_seconds"></span><span id="SZPRIV_KEY_CACHE_PURGE_INTERVAL_SECONDS"></span><dl> <span data-ttu-id="ca6be-122"><dt>**szPRIV \_金鑰快取 \_ \_ 清除 \_ 間隔 \_ 秒數**</dt> <dt>"PrivKeyCachePurgeIntervalSeconds"</dt></span><span class="sxs-lookup"><span data-stu-id="ca6be-122"><dt>**szPRIV\_KEY\_CACHE\_PURGE\_INTERVAL\_SECONDS**</dt> <dt>"PrivKeyCachePurgeIntervalSeconds"</dt></span></span> </dl> | <span data-ttu-id="ca6be-123">**SzKEY \_ CRYPTOAPI \_ 私密金鑰 \_ \_ 選項** 登錄機碼下的 **REG \_ DWORD** 值，可指定任何快取私密金鑰的最長存留期（以秒為單位）。</span><span class="sxs-lookup"><span data-stu-id="ca6be-123">A **REG\_DWORD** value under the **szKEY\_CRYPTOAPI\_PRIVATE\_KEY\_OPTIONS** registry key that specifies the maximum age, in seconds, of any cached private key.</span></span> <span data-ttu-id="ca6be-124">每當使用或讀取已儲存的私密金鑰時，就會執行這項檢查。</span><span class="sxs-lookup"><span data-stu-id="ca6be-124">This check is performed whenever a stored private key is used or read.</span></span> <span data-ttu-id="ca6be-125">如果自從上次清除之後已經過這段時間，就會從快取中移除所有尚未參考的快取索引鍵。</span><span class="sxs-lookup"><span data-stu-id="ca6be-125">If this amount of time has elapsed since the last clearing occurred, all cached keys that have not been referenced since the last clearing will be removed from the cache.</span></span><br/> <span data-ttu-id="ca6be-126">如果此值不存在，就會使用 **cPRIV 金鑰快取 \_ \_ \_ 清除 \_ 間隔秒的 \_ \_ 預設** 值作為預設值。</span><span class="sxs-lookup"><span data-stu-id="ca6be-126">If this value is not present, the **cPRIV\_KEY\_CACHE\_PURGE\_INTERVAL\_SECONDS\_DEFAULT** value is used as the default.</span></span><br/> <span data-ttu-id="ca6be-127">如果從快取中清除的私密金鑰目前是在開啟的內容中參考，則在下次嘗試使用金鑰時，會從儲存體讀取金鑰。</span><span class="sxs-lookup"><span data-stu-id="ca6be-127">If a private key that is cleared from the cache is currently referenced in an open context, then the key will be read from storage the next time an attempt is made to use the key.</span></span><br/> <span data-ttu-id="ca6be-128">**Windows Server 2003 和 WINDOWS XP （含 SP1）及更早版本：** 不支援這個登錄值。</span><span class="sxs-lookup"><span data-stu-id="ca6be-128">**Windows Server 2003 and Windows XP with SP1 and earlier:** This registry value is not supported.</span></span><br/> |
| <span id="cPRIV_KEY_CACHE_PURGE_INTERVAL_SECONDS_DEFAULT"></span><span id="cpriv_key_cache_purge_interval_seconds_default"></span><span id="CPRIV_KEY_CACHE_PURGE_INTERVAL_SECONDS_DEFAULT"></span><dl> <span data-ttu-id="ca6be-129"><dt>**cPRIV \_金鑰快取 \_ \_ 清除 \_ 間隔 \_ 秒數 \_ 預設為**</dt> <dt>86400</dt></span><span class="sxs-lookup"><span data-stu-id="ca6be-129"><dt>**cPRIV\_KEY\_CACHE\_PURGE\_INTERVAL\_SECONDS\_DEFAULT**</dt> <dt>86400</dt></span></span> </dl> | <span data-ttu-id="ca6be-130">如果未指定任何值，則為 SzPRIV 索引鍵快取 **\_ \_ \_ 清除 \_ 間隔 \_ 秒數** 的預設值。</span><span class="sxs-lookup"><span data-stu-id="ca6be-130">The default value of the **szPRIV\_KEY\_CACHE\_PURGE\_INTERVAL\_SECONDS** registry entry if no value is specified.</span></span> <span data-ttu-id="ca6be-131">此值相當於一天。</span><span class="sxs-lookup"><span data-stu-id="ca6be-131">This value is equivalent to one day.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |



<span data-ttu-id="ca6be-132">下列常數可用來識別登錄值，以控制單一 Microsoft 軟體型 [*密碼編譯服務提供者*](../secgloss/c-gly.md) (CSP) 實例的私密金鑰快取。</span><span class="sxs-lookup"><span data-stu-id="ca6be-132">The following constants are used to identify registry values that control private key caching for a single Microsoft software-based [*cryptographic service provider*](../secgloss/c-gly.md) (CSP) instance.</span></span>



| <span data-ttu-id="ca6be-133">常數/值</span><span class="sxs-lookup"><span data-stu-id="ca6be-133">Constant/value</span></span>                                                                                                                                                                                                                                                                                          | <span data-ttu-id="ca6be-134">Description</span><span class="sxs-lookup"><span data-stu-id="ca6be-134">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <dl> <span data-ttu-id="ca6be-135"><dt></dt><dt>"AllowCachePW"</dt></span><span class="sxs-lookup"><span data-stu-id="ca6be-135"><dt></dt> <dt>"AllowCachePW"</dt></span></span> </dl>                                                                                                                                                         | <span data-ttu-id="ca6be-136">**HKEY \_ 本機 \_ 電腦 \\ 軟體 \\ 原則 \\ \\ \\** 下的 **REG \_ DWORD** 值 microsoft 密碼編譯會保護登錄機碼，此登錄機碼會指定是否在 Microsoft 軟體為基礎的 csp 中啟用密碼保護的金鑰的密碼快取。</span><span class="sxs-lookup"><span data-stu-id="ca6be-136">A **REG\_DWORD** value under the **HKEY\_LOCAL\_MACHINE\\SOFTWARE\\Policies\\Microsoft\\Cryptography\\Protect** registry key that specifies whether password caching is enabled for password-protected keys in the Microsoft software-based CSPs.</span></span> <span data-ttu-id="ca6be-137">如果此值為0，則會 disabeld 密碼快取，並在每次使用受密碼保護的金鑰時提示使用者輸入密碼。</span><span class="sxs-lookup"><span data-stu-id="ca6be-137">If this value is 0, then password caching is disabeld and the user is prompted for the password every time a password-protected key is used.</span></span> <span data-ttu-id="ca6be-138">任何其他值或缺少此值，表示將會快取密碼。</span><span class="sxs-lookup"><span data-stu-id="ca6be-138">Any other value, or the absence of this value, indicates that the password will be cached.</span></span> <span data-ttu-id="ca6be-139">在此案例中，每個這類金鑰的每個進程只會提示使用者一次。</span><span class="sxs-lookup"><span data-stu-id="ca6be-139">In this scenario, the user is only prompted once per process for each such key.</span></span> <br/> |
| <span id="szKEY_CACHE_ENABLED"></span><span id="szkey_cache_enabled"></span><span id="SZKEY_CACHE_ENABLED"></span><dl> <span data-ttu-id="ca6be-140"><dt>**szKEY \_快取 \_ 已啟用**</dt> <dt>"CachePrivateKeys"</dt></span><span class="sxs-lookup"><span data-stu-id="ca6be-140"><dt>**szKEY\_CACHE\_ENABLED**</dt> <dt>"CachePrivateKeys"</dt></span></span> </dl>          | <span data-ttu-id="ca6be-141">**SzKEY \_ CRYPTOAPI \_ 私密金鑰 \_ \_ 選項** 登錄機碼底下的 **REG \_ DWORD** 值，可指定是否啟用私密金鑰快取。</span><span class="sxs-lookup"><span data-stu-id="ca6be-141">A **REG\_DWORD** value under the **szKEY\_CRYPTOAPI\_PRIVATE\_KEY\_OPTIONS** registry key that specifies whether private key caching is enabled.</span></span> <span data-ttu-id="ca6be-142">如果這個值是1，則會啟用私密金鑰快取。</span><span class="sxs-lookup"><span data-stu-id="ca6be-142">If this value is 1, then private key caching is enabled.</span></span> <span data-ttu-id="ca6be-143">任何其他值或缺少此值，表示私密金鑰快取已停用。</span><span class="sxs-lookup"><span data-stu-id="ca6be-143">Any other value, or the absence of this value, indicates that private key caching is disabled.</span></span><br/> <span data-ttu-id="ca6be-144">**Windows VISTA SP1、Windows vista 和 WINDOWS XP：** 不支援這個登錄值。</span><span class="sxs-lookup"><span data-stu-id="ca6be-144">**Windows Vista with SP1, Windows Vista and Windows XP:** This registry value is not supported.</span></span><br/>                                                                                                                                                        |
| <span id="szKEY_CACHE_SECONDS"></span><span id="szkey_cache_seconds"></span><span id="SZKEY_CACHE_SECONDS"></span><dl> <span data-ttu-id="ca6be-145"><dt>**szKEY \_快取 \_ 秒數**</dt> <dt>"PrivateKeyLifetimeSeconds"</dt></span><span class="sxs-lookup"><span data-stu-id="ca6be-145"><dt>**szKEY\_CACHE\_SECONDS**</dt> <dt>"PrivateKeyLifetimeSeconds"</dt></span></span> </dl> | <span data-ttu-id="ca6be-146">**SzKEY \_ CRYPTOAPI \_ 私密金鑰 \_ \_ 選項** 登錄機碼下的 **REG \_ DWORD** 值，可指定任何快取私密金鑰的最長存留期（以秒為單位）。</span><span class="sxs-lookup"><span data-stu-id="ca6be-146">A **REG\_DWORD** value under the **szKEY\_CRYPTOAPI\_PRIVATE\_KEY\_OPTIONS** registry key that specifies the maximum age, in seconds, of any cached private key.</span></span><br/> <span data-ttu-id="ca6be-147">**WINDOWS XP：** 不支援這個登錄值。</span><span class="sxs-lookup"><span data-stu-id="ca6be-147">**Windows XP:** This registry value is not supported.</span></span><br/>                                                                                                                                                                                                                                                                                                                                          |



## <a name="remarks"></a><span data-ttu-id="ca6be-148">備註</span><span class="sxs-lookup"><span data-stu-id="ca6be-148">Remarks</span></span>

<span data-ttu-id="ca6be-149">**SzKEY \_ CACHE \_ seconds** 和 **szPRIV \_ KEY \_ CACHE \_ 清除 \_ 間隔 \_ 秒** 值之間的差異如下：</span><span class="sxs-lookup"><span data-stu-id="ca6be-149">The differences between the **szKEY\_CACHE\_SECONDS** and the **szPRIV\_KEY\_CACHE\_PURGE\_INTERVAL\_SECONDS** values are as follows:</span></span>

 <span data-ttu-id="ca6be-150">**szKEY 快取 \_ \_ 秒數**</span><span class="sxs-lookup"><span data-stu-id="ca6be-150">**szKEY\_CACHE\_SECONDS**</span></span>  

-   <span data-ttu-id="ca6be-151">此值只適用于特定的 CSP。</span><span class="sxs-lookup"><span data-stu-id="ca6be-151">This value only applies to a specific CSP.</span></span> <span data-ttu-id="ca6be-152">在 CSP 發行之後，CSP 的快取也會釋出。</span><span class="sxs-lookup"><span data-stu-id="ca6be-152">After the CSP is released, the CSP's cache is released as well.</span></span>  
-   <span data-ttu-id="ca6be-153">只有在嘗試使用特定的私密金鑰搭配特定的內容控制碼時，才會套用這個值。</span><span class="sxs-lookup"><span data-stu-id="ca6be-153">This value is only applied when an attempt is made to use a specific private key with a specific context handle.</span></span>  

<span data-ttu-id="ca6be-154">**szPRIV \_ 金鑰快取 \_ \_ 清除 \_ 間隔 \_ 秒數**</span><span class="sxs-lookup"><span data-stu-id="ca6be-154">**szPRIV\_KEY\_CACHE\_PURGE\_INTERVAL\_SECONDS**</span></span>  

-   <span data-ttu-id="ca6be-155">此值適用于進程中的所有 Csp。</span><span class="sxs-lookup"><span data-stu-id="ca6be-155">This value applies to all CSPs in a process.</span></span> <span data-ttu-id="ca6be-156">即使已發行 CSP，也不會釋出此快取。</span><span class="sxs-lookup"><span data-stu-id="ca6be-156">Even if the CSP is released, this cache is not released.</span></span>  
-   <span data-ttu-id="ca6be-157">每當在單一進程中使用任何已儲存的私密金鑰或從儲存體讀取時，就會套用這個值。</span><span class="sxs-lookup"><span data-stu-id="ca6be-157">This value applies whenever any stored private key is used or read from storage in a single process.</span></span>  



## <a name="requirements"></a><span data-ttu-id="ca6be-158">規格需求</span><span class="sxs-lookup"><span data-stu-id="ca6be-158">Requirements</span></span>



| <span data-ttu-id="ca6be-159">需求</span><span class="sxs-lookup"><span data-stu-id="ca6be-159">Requirement</span></span> | <span data-ttu-id="ca6be-160">值</span><span class="sxs-lookup"><span data-stu-id="ca6be-160">Value</span></span> |
|-------------------------------------|---------------------------------------------------------------------------------------|
| <span data-ttu-id="ca6be-161">最低支援的用戶端</span><span class="sxs-lookup"><span data-stu-id="ca6be-161">Minimum supported client</span></span><br/> | <span data-ttu-id="ca6be-162">\[僅限 WINDOWS XP desktop 應用程式\]</span><span class="sxs-lookup"><span data-stu-id="ca6be-162">Windows XP \[desktop apps only\]</span></span><br/>                                           |
| <span data-ttu-id="ca6be-163">最低支援的伺服器</span><span class="sxs-lookup"><span data-stu-id="ca6be-163">Minimum supported server</span></span><br/> | <span data-ttu-id="ca6be-164">僅限 Windows Server 2003 \[ desktop 應用程式\]</span><span class="sxs-lookup"><span data-stu-id="ca6be-164">Windows Server 2003 \[desktop apps only\]</span></span><br/>                                  |
| <span data-ttu-id="ca6be-165">標頭</span><span class="sxs-lookup"><span data-stu-id="ca6be-165">Header</span></span><br/>                   | <dl> <span data-ttu-id="ca6be-166"><dt>Wincrypt。h</dt></span><span class="sxs-lookup"><span data-stu-id="ca6be-166"><dt>Wincrypt.h</dt></span></span> </dl> |



 

 
