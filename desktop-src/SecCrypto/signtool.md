---
title: SignTool
description: SignTool 是一種命令列工具，可數位簽署檔案、驗證檔案中的簽章，以及時間戳記檔案。
ms.assetid: aa59cb35-5fba-4ce8-97ea-fc767c83f88e
ms.topic: article
ms.date: 10/12/2020
ms.openlocfilehash: 884d4c132a2877a51cef7610dd32e8ef6b9c4bc3
ms.sourcegitcommit: 25e1fa2b3641ae13b79e0afdf9cb7a168d99e009
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/16/2020
ms.locfileid: "104383186"
---
# <a name="signtool"></a><span data-ttu-id="b4fea-103">SignTool</span><span class="sxs-lookup"><span data-stu-id="b4fea-103">SignTool</span></span>

<span data-ttu-id="b4fea-104">SignTool 是一種命令列工具，可數位簽署檔案、驗證檔案中的簽章，以及時間戳記檔案。</span><span class="sxs-lookup"><span data-stu-id="b4fea-104">SignTool is a command-line tool that digitally signs files, verifies the signatures in files, and timestamps files.</span></span> <span data-ttu-id="b4fea-105">如需有關為什麼簽署檔案很重要的詳細資訊，請參閱程式 [代碼簽署簡介](cryptography-tools.md)。</span><span class="sxs-lookup"><span data-stu-id="b4fea-105">For information about why signing files is important, see [Introduction to Code Signing](cryptography-tools.md).</span></span> <span data-ttu-id="b4fea-106">此工具會安裝在 \\ Microsoft Windows 軟體開發套件 (SDK) 安裝路徑的 Bin 資料夾中。</span><span class="sxs-lookup"><span data-stu-id="b4fea-106">The tool is installed in the \\Bin folder of the Microsoft Windows Software Development Kit (SDK) installation path.</span></span>

<span data-ttu-id="b4fea-107">SignTool 可做為 Windows SDK 的一部分，可供您下載 <https://developer.microsoft.com/windows/downloads/windows-10-sdk/> 。</span><span class="sxs-lookup"><span data-stu-id="b4fea-107">SignTool is available as part of the Windows SDK, which you can download from <https://developer.microsoft.com/windows/downloads/windows-10-sdk/>.</span></span>

> [!Note]  
> <span data-ttu-id="b4fea-108">Windows 10 SDK、Windows 10 的 HLK、Windows 10 WDK 和 Windows 10 ADK **組建20236和更新版本** 現在都需要指定摘要演算法。</span><span class="sxs-lookup"><span data-stu-id="b4fea-108">The Windows 10 SDK, Windows 10 HLK, Windows 10 WDK and Windows 10 ADK **builds 20236 and above** will now require specifying the digest algorithm.</span></span> <span data-ttu-id="b4fea-109">SignTool sign 命令需要在 `file digest algorithm` `timestamp digest algorithm` 簽署和時間戳記期間分別指定/fd 和/td 選項。</span><span class="sxs-lookup"><span data-stu-id="b4fea-109">The SignTool sign command requires the /fd `file digest algorithm` and the /td `timestamp digest algorithm` option to be specified during signing and timestamping, respectively.</span></span> <span data-ttu-id="b4fea-110">警告 (錯誤碼0，如果在簽署期間未指定/fd，而且在時間戳記期間未指定/td，則會擲回) 。</span><span class="sxs-lookup"><span data-stu-id="b4fea-110">A warning (error code 0, initially) will be thrown if /fd is not specified during signing and if /td is not specified during timestamping.</span></span> <span data-ttu-id="b4fea-111">在 SignTool 的較新版本中，警告會變成錯誤。</span><span class="sxs-lookup"><span data-stu-id="b4fea-111">In later versions of SignTool, the warning will become an error.</span></span> <span data-ttu-id="b4fea-112">建議您將 SHA256 視為比產業的 SHA1 更安全。</span><span class="sxs-lookup"><span data-stu-id="b4fea-112">SHA256 is recommended and considered to be more secure than SHA1 by the industry.</span></span>  


## <a name="syntax"></a><span data-ttu-id="b4fea-113">語法</span><span class="sxs-lookup"><span data-stu-id="b4fea-113">Syntax</span></span>  
  
```console  
signtool [command] [options] [file_name | ...]  
```  

## <a name="parameters"></a><span data-ttu-id="b4fea-114">參數</span><span class="sxs-lookup"><span data-stu-id="b4fea-114">Parameters</span></span>  
  
|<span data-ttu-id="b4fea-115">引數</span><span class="sxs-lookup"><span data-stu-id="b4fea-115">Argument</span></span>|<span data-ttu-id="b4fea-116">描述</span><span class="sxs-lookup"><span data-stu-id="b4fea-116">Description</span></span>|  
|----|----|  
|`command`|<span data-ttu-id="b4fea-117">四個命令之一 (`catdb`、`sign`、`Timestamp` 或 `Verify`)，指定要對檔案執行的操作。</span><span class="sxs-lookup"><span data-stu-id="b4fea-117">One of four commands (`catdb`, `sign`, `Timestamp`, or `Verify`) that specifies an operation to perform on a file.</span></span> <span data-ttu-id="b4fea-118">如需每個命令的描述，請參閱下一個表格。</span><span class="sxs-lookup"><span data-stu-id="b4fea-118">For a description of each command, see the next table.</span></span>|  
|`options`|<span data-ttu-id="b4fea-119">修改命令的選項。</span><span class="sxs-lookup"><span data-stu-id="b4fea-119">An option that modifies a command.</span></span> <span data-ttu-id="b4fea-120">除了全域 `/q` 和 `/v` 選項外，每個命令支援一組唯一的選項。</span><span class="sxs-lookup"><span data-stu-id="b4fea-120">In addition to the global `/q` and `/v` options, each command supports a unique set of options.</span></span>|  
|`file_name`|<span data-ttu-id="b4fea-121">要簽署之檔案的路徑。</span><span class="sxs-lookup"><span data-stu-id="b4fea-121">The path to a file to sign.</span></span>| 


<span data-ttu-id="b4fea-122">SignTool 支援下列命令。</span><span class="sxs-lookup"><span data-stu-id="b4fea-122">The following commands are supported by SignTool.</span></span>

|<span data-ttu-id="b4fea-123">命令</span><span class="sxs-lookup"><span data-stu-id="b4fea-123">Command</span></span>|<span data-ttu-id="b4fea-124">描述</span><span class="sxs-lookup"><span data-stu-id="b4fea-124">Description</span></span>|  
|----|----|  
|`Catdb`|<span data-ttu-id="b4fea-125">在目錄資料庫中加入或移除目錄檔。</span><span class="sxs-lookup"><span data-stu-id="b4fea-125">Adds a catalog file to, or removes it from, a catalog database.</span></span> <span data-ttu-id="b4fea-126">目錄資料庫可以用來自動查閱目錄檔，並且是由 GUID 所識別。</span><span class="sxs-lookup"><span data-stu-id="b4fea-126">Catalog databases are used for automatic lookup of catalog files and are identified by GUID.</span></span> <span data-ttu-id="b4fea-127">如需 `catdb` 命令支援選項的清單，請參閱 [catdb 命令選項](/dotnet/framework/tools/signtool-exe#catdb-command-options)。</span><span class="sxs-lookup"><span data-stu-id="b4fea-127">For a list of the options supported by the `catdb` command, see [catdb Command Options](/dotnet/framework/tools/signtool-exe#catdb-command-options).</span></span>|  
|`Sign`|<span data-ttu-id="b4fea-128">數位簽署檔案。</span><span class="sxs-lookup"><span data-stu-id="b4fea-128">Digitally signs files.</span></span> <span data-ttu-id="b4fea-129">數位簽章可以防止檔案遭到篡改，而且可讓使用者根據簽署憑證確認簽署者。</span><span class="sxs-lookup"><span data-stu-id="b4fea-129">Digital signatures protect files from tampering, and enable users to verify the signer based on a signing certificate.</span></span> <span data-ttu-id="b4fea-130">如需 `sign` 命令支援選項的清單，請參閱 [sign 命令選項](/dotnet/framework/tools/signtool-exe#sign-command-options)。</span><span class="sxs-lookup"><span data-stu-id="b4fea-130">For a list of the options supported by the `sign` command, see [sign Command Options](/dotnet/framework/tools/signtool-exe#sign-command-options).</span></span>|  
|`Timestamp`|<span data-ttu-id="b4fea-131">為檔案加上時間戳記。</span><span class="sxs-lookup"><span data-stu-id="b4fea-131">Time-stamps files.</span></span> <span data-ttu-id="b4fea-132">如需 `TimeStamp` 命令支援選項的清單，請參閱 [TimeStamp 命令選項](/dotnet/framework/tools/signtool-exe#timestamp-command-options)。</span><span class="sxs-lookup"><span data-stu-id="b4fea-132">For a list of the options supported by the `TimeStamp` command, see [TimeStamp Command Options](/dotnet/framework/tools/signtool-exe#timestamp-command-options).</span></span>|  
|`Verify`|<span data-ttu-id="b4fea-133">藉由判斷簽署憑證是否由受信任的授權單位所發佈、簽署憑證是否已撤銷，以及簽署憑證是否為特定原則的有效憑證，來驗證檔案的數位簽章。</span><span class="sxs-lookup"><span data-stu-id="b4fea-133">Verifies the digital signature of files by determining whether the signing certificate was issued by a trusted authority, whether the signing certificate has been revoked, and, optionally, whether the signing certificate is valid for a specific policy.</span></span> <span data-ttu-id="b4fea-134">如需 `Verify` 命令支援選項的清單，請參閱 [Verify 命令選項](/dotnet/framework/tools/signtool-exe#verify-command-options)。</span><span class="sxs-lookup"><span data-stu-id="b4fea-134">For a list of the options supported by the `Verify` command, see [Verify Command Options](/dotnet/framework/tools/signtool-exe#verify-command-options).</span></span>|

 <span data-ttu-id="b4fea-135">下列選項適用於所有簽署工具命令。</span><span class="sxs-lookup"><span data-stu-id="b4fea-135">The following options apply to all Sign Tool commands.</span></span>  
  
|<span data-ttu-id="b4fea-136">Global 選項</span><span class="sxs-lookup"><span data-stu-id="b4fea-136">Global option</span></span>|<span data-ttu-id="b4fea-137">Description</span><span class="sxs-lookup"><span data-stu-id="b4fea-137">Description</span></span>|  
|----|----|  
|<span data-ttu-id="b4fea-138">**/q**</span><span class="sxs-lookup"><span data-stu-id="b4fea-138">**/q**</span></span>|<span data-ttu-id="b4fea-139">如果命令成功執行則不顯示任何輸出，如果命令失敗則顯示最少的輸出。</span><span class="sxs-lookup"><span data-stu-id="b4fea-139">Displays no output if the command runs successfully, and displays minimal output if the command fails.</span></span>|  
|<span data-ttu-id="b4fea-140">**/v**</span><span class="sxs-lookup"><span data-stu-id="b4fea-140">**/v**</span></span>|<span data-ttu-id="b4fea-141">不論命令執行成功或失敗，都顯示詳細資訊輸出，並顯示警告訊息。</span><span class="sxs-lookup"><span data-stu-id="b4fea-141">Displays verbose output regardless of whether the command runs successfully or fails, and displays warning messages.</span></span>|  
|<span data-ttu-id="b4fea-142">**/debug**</span><span class="sxs-lookup"><span data-stu-id="b4fea-142">**/debug**</span></span>|<span data-ttu-id="b4fea-143">顯示偵錯資訊。</span><span class="sxs-lookup"><span data-stu-id="b4fea-143">Displays debugging information.</span></span>|  

 
## <a name="catdb-command-options"></a><span data-ttu-id="b4fea-144">Catdb 命令選項</span><span class="sxs-lookup"><span data-stu-id="b4fea-144">Catdb command options</span></span>  

 <span data-ttu-id="b4fea-145">下表列出可以搭配 `Catdb` 命令使用的選項。</span><span class="sxs-lookup"><span data-stu-id="b4fea-145">The following table lists the options that can be used with the `Catdb` command.</span></span>

| <span data-ttu-id="b4fea-146">Catdb 選項</span><span class="sxs-lookup"><span data-stu-id="b4fea-146">Catdb option</span></span> | <span data-ttu-id="b4fea-147">Description</span><span class="sxs-lookup"><span data-stu-id="b4fea-147">Description</span></span> |
|----|----| 
| <span data-ttu-id="b4fea-148">**/d**</span><span class="sxs-lookup"><span data-stu-id="b4fea-148">**/d**</span></span> | <span data-ttu-id="b4fea-149">指定要更新的預設目錄資料庫。</span><span class="sxs-lookup"><span data-stu-id="b4fea-149">Specifies that the default catalog database be updated.</span></span> <span data-ttu-id="b4fea-150">如果 **/d** 和 **/g** 選項都不是使用，SignTool 會更新系統元件和驅動程式資料庫。</span><span class="sxs-lookup"><span data-stu-id="b4fea-150">If neither the **/d** nor **/g** option is used, SignTool updates the system component and driver database.</span></span> |
| <span data-ttu-id="b4fea-151">**/G** *GUID*</span><span class="sxs-lookup"><span data-stu-id="b4fea-151">**/g** *GUID*</span></span> | <span data-ttu-id="b4fea-152">指定由 GUID 所識別的目錄資料庫已更新。</span><span class="sxs-lookup"><span data-stu-id="b4fea-152">Specifies that the catalog database identified by the GUID be updated.</span></span>|
| <span data-ttu-id="b4fea-153">**/r**</span><span class="sxs-lookup"><span data-stu-id="b4fea-153">**/r**</span></span> | <span data-ttu-id="b4fea-154">從目錄資料庫移除指定的目錄。</span><span class="sxs-lookup"><span data-stu-id="b4fea-154">Removes the specified catalog from the catalog database.</span></span> <span data-ttu-id="b4fea-155">如果未指定此選項，SignTool 會將指定的目錄新增至目錄資料庫。</span><span class="sxs-lookup"><span data-stu-id="b4fea-155">If this option is not specified, SignTool will add the specified catalog to the catalog database.</span></span>|
| <span data-ttu-id="b4fea-156">**u**</span><span class="sxs-lookup"><span data-stu-id="b4fea-156">**/u**</span></span> | <span data-ttu-id="b4fea-157">指定自動為新增的類別目錄檔案產生唯一的名稱。</span><span class="sxs-lookup"><span data-stu-id="b4fea-157">Specifies that a unique name be automatically generated for the added catalog files.</span></span> <span data-ttu-id="b4fea-158">必要時，目錄檔會重新命名，以避免與現有的目錄檔發生名稱衝突。</span><span class="sxs-lookup"><span data-stu-id="b4fea-158">If necessary, the catalog files are renamed to prevent name conflicts with existing catalog files.</span></span> <span data-ttu-id="b4fea-159">如果未指定此選項，SignTool 會覆寫任何與所加入之目錄同名的現有目錄。</span><span class="sxs-lookup"><span data-stu-id="b4fea-159">If this option is not specified, SignTool overwrites any existing catalog that has the same name as the catalog being added.</span></span>|

> [!Note]  
> <span data-ttu-id="b4fea-160">目錄資料庫是用來自動查閱目錄檔案。</span><span class="sxs-lookup"><span data-stu-id="b4fea-160">Catalog databases are used for automatic lookup of catalog files.</span></span>


## <a name="sign-command-options"></a><span data-ttu-id="b4fea-161">Sign 命令選項</span><span class="sxs-lookup"><span data-stu-id="b4fea-161">Sign command options</span></span>  

 <span data-ttu-id="b4fea-162">下表列出可以搭配 `sign` 命令使用的選項。</span><span class="sxs-lookup"><span data-stu-id="b4fea-162">The following table lists the options that can be used with the `sign` command.</span></span>  
  
|<span data-ttu-id="b4fea-163">Sign 命令選項</span><span class="sxs-lookup"><span data-stu-id="b4fea-163">Sign command option</span></span>|<span data-ttu-id="b4fea-164">Description</span><span class="sxs-lookup"><span data-stu-id="b4fea-164">Description</span></span>|  
|----|----| 
|`/a`|<span data-ttu-id="b4fea-165">自動選取最佳的簽署憑證。</span><span class="sxs-lookup"><span data-stu-id="b4fea-165">Automatically selects the best signing certificate.</span></span> <span data-ttu-id="b4fea-166">簽署工具會找到滿足所有指定條件的所有有效憑證，並且選取有效時間最長的一個。</span><span class="sxs-lookup"><span data-stu-id="b4fea-166">Sign Tool will find all valid certificates that satisfy all specified conditions and select the one that is valid for the longest time.</span></span> <span data-ttu-id="b4fea-167">如果沒有這個選項，簽署工具只需要找出一個有效的簽署憑證。</span><span class="sxs-lookup"><span data-stu-id="b4fea-167">If this option is not present, Sign Tool expects to find only one valid signing certificate.</span></span>|  
|<span data-ttu-id="b4fea-168">`/ac`  *檔*</span><span class="sxs-lookup"><span data-stu-id="b4fea-168">`/ac`  *file*</span></span>|<span data-ttu-id="b4fea-169">從 *file* 將其他憑證加入至簽章區塊。</span><span class="sxs-lookup"><span data-stu-id="b4fea-169">Adds an additional certificate from *file* to the signature block.</span></span>|  
|`/as`|<span data-ttu-id="b4fea-170">附加這個簽章。</span><span class="sxs-lookup"><span data-stu-id="b4fea-170">Appends this signature.</span></span> <span data-ttu-id="b4fea-171">如果主要簽章不存在，則會設定這個簽章做為主要簽章。</span><span class="sxs-lookup"><span data-stu-id="b4fea-171">If no primary signature is present, this signature is made the primary signature instead.</span></span>|  
|<span data-ttu-id="b4fea-172">`/c`  *CertTemplateName*</span><span class="sxs-lookup"><span data-stu-id="b4fea-172">`/c`  *CertTemplateName*</span></span>|<span data-ttu-id="b4fea-173">指定適用於簽署憑證的「憑證範本名稱」(Certificate Template Name)，這是一個 Microsoft 擴充功能。</span><span class="sxs-lookup"><span data-stu-id="b4fea-173">Specifies the Certificate Template Name (a Microsoft extension) for the signing certificate.</span></span>|  
|<span data-ttu-id="b4fea-174">`/csp`  *CSPName*</span><span class="sxs-lookup"><span data-stu-id="b4fea-174">`/csp`  *CSPName*</span></span>|<span data-ttu-id="b4fea-175">指定包含私密金鑰容器的密碼編譯服務提供者 (Cryptographic Service Provider，CSP)。</span><span class="sxs-lookup"><span data-stu-id="b4fea-175">Specifies the cryptographic service provider (CSP) that contains the private key container.</span></span>|  
|<span data-ttu-id="b4fea-176">`/d`  *Desc*</span><span class="sxs-lookup"><span data-stu-id="b4fea-176">`/d`  *Desc*</span></span>|<span data-ttu-id="b4fea-177">指定簽署內容的描述。</span><span class="sxs-lookup"><span data-stu-id="b4fea-177">Specifies a description of the signed content.</span></span>|  
|<span data-ttu-id="b4fea-178">`/dg`  *路徑*</span><span class="sxs-lookup"><span data-stu-id="b4fea-178">`/dg`  *Path*</span></span>|<span data-ttu-id="b4fea-179">產生要簽署的摘要和未簽署的 PKCS7 檔案。</span><span class="sxs-lookup"><span data-stu-id="b4fea-179">Generates the digest to be signed and the unsigned PKCS7 files.</span></span> <span data-ttu-id="b4fea-180">輸出摘要和 PKCS7 檔案將會是： *Path\FileName.dig* 和 *Path\FileName.p7u*。</span><span class="sxs-lookup"><span data-stu-id="b4fea-180">The output digest and PKCS7 files will be: *Path\FileName.dig* and *Path\FileName.p7u*.</span></span> <span data-ttu-id="b4fea-181">若要輸出額外的 XML 檔案，請參閱 <strong>/dxml</strong>。</span><span class="sxs-lookup"><span data-stu-id="b4fea-181">To output an additional XML file, see <strong>/dxml</strong>.</span></span>|  
|<span data-ttu-id="b4fea-182">`/di`  *路徑*</span><span class="sxs-lookup"><span data-stu-id="b4fea-182">`/di`  *Path*</span></span>|<span data-ttu-id="b4fea-183">藉由將簽署的摘要擷取至未簽署的 PKCS7 檔案來建立簽章。</span><span class="sxs-lookup"><span data-stu-id="b4fea-183">Creates the signature by ingesting the signed digest to the unsigned PKCS7 file.</span></span> <span data-ttu-id="b4fea-184">輸入簽署的摘要和未簽署的 PKCS7 檔案應該是： *Path\FileName.dig.signed* 和 *Path\FileName.p7u*。</span><span class="sxs-lookup"><span data-stu-id="b4fea-184">The input signed digest and unsigned PKCS7 files should be: *Path\FileName.dig.signed* and *Path\FileName.p7u*.</span></span>|  
|<span data-ttu-id="b4fea-185">`/dlib`  *DLL*</span><span class="sxs-lookup"><span data-stu-id="b4fea-185">`/dlib`  *DLL*</span></span>|<span data-ttu-id="b4fea-186">指定執行函式 <code>AuthenticodeDigestSign</code> 以簽署摘要的 DLL。</span><span class="sxs-lookup"><span data-stu-id="b4fea-186">Specifies the DLL implementing the <code>AuthenticodeDigestSign</code> function to sign the digest with.</span></span> <span data-ttu-id="b4fea-187">此選項相當於使用 <strong>SignTool</strong> 與 <strong>/dg</strong>、 <strong>/ds</strong>和 <strong>/di</strong> 參數分開，但這個選項會將三個全部叫用為一個不可部分完成的作業。</span><span class="sxs-lookup"><span data-stu-id="b4fea-187">This option is equivalent to using <strong>SignTool</strong> separately with the <strong>/dg</strong>, <strong>/ds</strong>, and <strong>/di</strong> switches, except this option invokes all three as one atomic operation.</span></span>|  
|<span data-ttu-id="b4fea-188">`/dmdf`  *檔案名*</span><span class="sxs-lookup"><span data-stu-id="b4fea-188">`/dmdf`  *Filename*</span></span>|<span data-ttu-id="b4fea-189">搭配 <strong>/dg</strong> 選項使用時，會將檔案的內容傳遞至函式， <code>AuthenticodeDigestSign</code> 而不需要修改。</span><span class="sxs-lookup"><span data-stu-id="b4fea-189">When used with the <strong>/dg</strong> option, passes the file’s contents to the <code>AuthenticodeDigestSign</code> function without modification.</span></span>|  
|`/ds`  |<span data-ttu-id="b4fea-190">只簽署摘要。</span><span class="sxs-lookup"><span data-stu-id="b4fea-190">Signs the digest only.</span></span> <span data-ttu-id="b4fea-191">輸入檔應該是 <strong>/dg</strong> 選項所產生的摘要。</span><span class="sxs-lookup"><span data-stu-id="b4fea-191">The input file should be the digest generated by the <strong>/dg</strong> option.</span></span> <span data-ttu-id="b4fea-192">輸出檔案將會是： *file. 簽署*。</span><span class="sxs-lookup"><span data-stu-id="b4fea-192">The output file will be: *File.signed*.</span></span>|  
|<span data-ttu-id="b4fea-193">`/du`  *URL*</span><span class="sxs-lookup"><span data-stu-id="b4fea-193">`/du`  *URL*</span></span>|<span data-ttu-id="b4fea-194">為已簽署的內容之擴充描述指定統一資源定位器 (Uniform Resource Locator，URL)。</span><span class="sxs-lookup"><span data-stu-id="b4fea-194">Specifies a Uniform Resource Locator (URL) for the expanded description of the signed content.</span></span>|  
|`/dxml`  |<span data-ttu-id="b4fea-195">搭配 <strong>/dg</strong> 選項使用時，會產生 XML 檔案。</span><span class="sxs-lookup"><span data-stu-id="b4fea-195">When used with the <strong>/dg</strong> option, produces an XML file.</span></span> <span data-ttu-id="b4fea-196">輸出檔案將會是： *Path\FileName.dig.xml*。</span><span class="sxs-lookup"><span data-stu-id="b4fea-196">The output file will be: *Path\FileName.dig.xml*.</span></span>|  
|<span data-ttu-id="b4fea-197">`/f`  *SignCertFile*</span><span class="sxs-lookup"><span data-stu-id="b4fea-197">`/f`  *SignCertFile*</span></span>|<span data-ttu-id="b4fea-198">指定檔案中的簽署憑證。</span><span class="sxs-lookup"><span data-stu-id="b4fea-198">Specifies the signing certificate in a file.</span></span> <span data-ttu-id="b4fea-199">如果檔案為「個人資訊交換」(PFX) 格式並且受密碼保護，請使用 `/p` 選項指定密碼。</span><span class="sxs-lookup"><span data-stu-id="b4fea-199">If the file is in Personal Information Exchange (PFX) format and protected by a password, use the `/p` option to specify the password.</span></span> <span data-ttu-id="b4fea-200">如果檔案不包含私密金鑰，請使用 `/csp` 和 `/kc` 選項，以指定 CSP 和私密金鑰容器的名稱。</span><span class="sxs-lookup"><span data-stu-id="b4fea-200">If the file does not contain private keys, use the `/csp` and `/kc` options to specify the CSP and private key container name.</span></span>|  
|<span data-ttu-id="b4fea-201">`/fd`*alg*</span><span class="sxs-lookup"><span data-stu-id="b4fea-201">`/fd` *alg*</span></span>|<span data-ttu-id="b4fea-202">指定要用於建立檔案簽章的檔案摘要演算法。</span><span class="sxs-lookup"><span data-stu-id="b4fea-202">Specifies the file digest algorithm to use for creating file signatures.</span></span> </br> <span data-ttu-id="b4fea-203">**注意：** 如果在簽署時未提供 <strong>/fd</strong> 參數，則會產生警告。</span><span class="sxs-lookup"><span data-stu-id="b4fea-203">**Note:** A warning is generated if <strong>/fd</strong> switch is not provided while signing.</span></span> <span data-ttu-id="b4fea-204">預設的 alg 為 SHA1，但建議使用 SHA256。</span><span class="sxs-lookup"><span data-stu-id="b4fea-204">The default alg is SHA1 but SHA256 is recommended.</span></span>|
|<span data-ttu-id="b4fea-205">`/fd`  *certHash*</span><span class="sxs-lookup"><span data-stu-id="b4fea-205">`/fd`  *certHash*</span></span>|<span data-ttu-id="b4fea-206">指定字串 certHash 會預設為用於簽署憑證的演算法。</span><span class="sxs-lookup"><span data-stu-id="b4fea-206">Specifying the string certHash will default to the algorithm used on the signing certificate.</span></span> </br> <span data-ttu-id="b4fea-207">**注意：** 僅在 Windows 10 套件中提供20236版和更新版本。</span><span class="sxs-lookup"><span data-stu-id="b4fea-207">**Note:** Only available in Windows 10 kit builds 20236 and greater.</span></span>|  
|<span data-ttu-id="b4fea-208">`/i`  *IssuerName*</span><span class="sxs-lookup"><span data-stu-id="b4fea-208">`/i`  *IssuerName*</span></span>|<span data-ttu-id="b4fea-209">指定簽署憑證的簽發者名稱。</span><span class="sxs-lookup"><span data-stu-id="b4fea-209">Specifies the name of the issuer of the signing certificate.</span></span> <span data-ttu-id="b4fea-210">這個值可以是完整簽發者名稱的子字串。</span><span class="sxs-lookup"><span data-stu-id="b4fea-210">This value can be a substring of the entire issuer name.</span></span>|  
|<span data-ttu-id="b4fea-211">`/kc`  *PrivKeyContainerName*</span><span class="sxs-lookup"><span data-stu-id="b4fea-211">`/kc`  *PrivKeyContainerName*</span></span>|<span data-ttu-id="b4fea-212">指定私密金鑰容器名稱。</span><span class="sxs-lookup"><span data-stu-id="b4fea-212">Specifies the private key container name.</span></span>|  
|<span data-ttu-id="b4fea-213">`/n`  *SubjectName*</span><span class="sxs-lookup"><span data-stu-id="b4fea-213">`/n`  *SubjectName*</span></span>|<span data-ttu-id="b4fea-214">指定簽署憑證的主體名稱。</span><span class="sxs-lookup"><span data-stu-id="b4fea-214">Specifies the name of the subject of the signing certificate.</span></span> <span data-ttu-id="b4fea-215">這個值可以是完整主體名稱的子字串。</span><span class="sxs-lookup"><span data-stu-id="b4fea-215">This value can be a substring of the entire subject name.</span></span>|  
|`/nph`|<span data-ttu-id="b4fea-216">如果支援，則隱藏可執行檔的頁面雜湊。</span><span class="sxs-lookup"><span data-stu-id="b4fea-216">If supported, suppresses page hashes for executable files.</span></span> <span data-ttu-id="b4fea-217">預設取決於 SIGNTOOL_PAGE_HASHES 環境變數和 wintrust.dll 版本。</span><span class="sxs-lookup"><span data-stu-id="b4fea-217">The default is determined by the SIGNTOOL_PAGE_HASHES environment variable and by the wintrust.dll version.</span></span> <span data-ttu-id="b4fea-218">若為非 PE 檔案，則會忽略這個選項。</span><span class="sxs-lookup"><span data-stu-id="b4fea-218">This option is ignored for non-PE files.</span></span>|  
|<span data-ttu-id="b4fea-219">`/p`  *密碼*</span><span class="sxs-lookup"><span data-stu-id="b4fea-219">`/p`  *Password*</span></span>|<span data-ttu-id="b4fea-220">指定用來開啟 PFX 檔案的密碼 </span><span class="sxs-lookup"><span data-stu-id="b4fea-220">Specifies the password to use when opening a PFX file.</span></span> <span data-ttu-id="b4fea-221">(使用 `/f` 選項指定 PFX 檔)。</span><span class="sxs-lookup"><span data-stu-id="b4fea-221">(Use the `/f` option to specify a PFX file.)</span></span>|  
|<span data-ttu-id="b4fea-222">`/p7` *路徑*</span><span class="sxs-lookup"><span data-stu-id="b4fea-222">`/p7` *Path*</span></span>|<span data-ttu-id="b4fea-223">指定為每個指定內容檔產生公開金鑰加密標準 (PKCS) #7 檔案。</span><span class="sxs-lookup"><span data-stu-id="b4fea-223">Specifies that a Public Key Cryptography Standards (PKCS) #7 file is produced for each specified content file.</span></span> <span data-ttu-id="b4fea-224">PKCS #7 的檔案會 *命名為* \\ \*\* p7。</span><span class="sxs-lookup"><span data-stu-id="b4fea-224">PKCS #7 files are named *path*\\*filename*.p7.</span></span>|  
|<span data-ttu-id="b4fea-225">`/p7ce` *值*</span><span class="sxs-lookup"><span data-stu-id="b4fea-225">`/p7ce` *Value*</span></span>|<span data-ttu-id="b4fea-226">指定已簽署的 PKCS #7 內容的選項。</span><span class="sxs-lookup"><span data-stu-id="b4fea-226">Specifies options for the signed PKCS #7 content.</span></span> <span data-ttu-id="b4fea-227">將 *Value* 設定為 "Embedded" 會將簽署內容內嵌在 PKCS #7 檔案中，設定為 "DetachedSignedData" 會產生已中斷連結的 PKCS #7 檔案的簽署資料部分。</span><span class="sxs-lookup"><span data-stu-id="b4fea-227">Set *Value* to "Embedded" to embed the signed content in the PKCS #7 file, or to "DetachedSignedData" to produce the signed data portion of a detached PKCS #7 file.</span></span> <span data-ttu-id="b4fea-228">如果未使用 `/p7ce` 選項，則預設會內嵌簽署的內容。</span><span class="sxs-lookup"><span data-stu-id="b4fea-228">If the `/p7ce` option is not used, the signed content is embedded by default.</span></span>|  
|<span data-ttu-id="b4fea-229">`/p7co` *\<OID>*</span><span class="sxs-lookup"><span data-stu-id="b4fea-229">`/p7co` *\<OID>*</span></span>|<span data-ttu-id="b4fea-230">指定識別已簽署 PKCS #7 內容的物件識別項 (OID)。</span><span class="sxs-lookup"><span data-stu-id="b4fea-230">Specifies the object identifier (OID) that identifies the signed PKCS #7 content.</span></span>|  
|`/ph`|<span data-ttu-id="b4fea-231">如果支援，則產生可執行檔的頁面雜湊。</span><span class="sxs-lookup"><span data-stu-id="b4fea-231">If supported, generates page hashes for executable files.</span></span>|  
|<span data-ttu-id="b4fea-232">`/r`  *RootSubjectName*</span><span class="sxs-lookup"><span data-stu-id="b4fea-232">`/r`  *RootSubjectName*</span></span>|<span data-ttu-id="b4fea-233">指定簽署憑證必須鏈結之根憑證的主體名稱。</span><span class="sxs-lookup"><span data-stu-id="b4fea-233">Specifies the name of the subject of the root certificate that the signing certificate must chain to.</span></span> <span data-ttu-id="b4fea-234">這個值可以是完整根憑證主體名稱的子字串。</span><span class="sxs-lookup"><span data-stu-id="b4fea-234">This value may be a substring of the entire subject name of the root certificate.</span></span>|  
|<span data-ttu-id="b4fea-235">`/s`  *StoreName*</span><span class="sxs-lookup"><span data-stu-id="b4fea-235">`/s`  *StoreName*</span></span>|<span data-ttu-id="b4fea-236">指定搜尋憑證時要開啟的存放區。</span><span class="sxs-lookup"><span data-stu-id="b4fea-236">Specifies the store to open when searching for the certificate.</span></span> <span data-ttu-id="b4fea-237">如果沒有指定這個選項，則會開啟 `My` 存放區。</span><span class="sxs-lookup"><span data-stu-id="b4fea-237">If this option is not specified, the `My` store is opened.</span></span>|  
|<span data-ttu-id="b4fea-238">`/sha1`  *散 列*</span><span class="sxs-lookup"><span data-stu-id="b4fea-238">`/sha1`  *Hash*</span></span>|<span data-ttu-id="b4fea-239">指定簽署憑證的 SHA1 雜湊。</span><span class="sxs-lookup"><span data-stu-id="b4fea-239">Specifies the SHA1 hash of the signing certificate.</span></span> <span data-ttu-id="b4fea-240">在多重憑證符合其餘參數指定的準則時，SHA1 雜湊最常被指定。</span><span class="sxs-lookup"><span data-stu-id="b4fea-240">The SHA1 hash is commonly specified when multiple certificates satisfy the criteria specified by the remaining switches.</span></span>|  
|`/sm`|<span data-ttu-id="b4fea-241">指定使用電腦存放區，而非使用者存放區。</span><span class="sxs-lookup"><span data-stu-id="b4fea-241">Specifies that a machine store, instead of a user store, is used.</span></span>|  
|<span data-ttu-id="b4fea-242">`/t`  *URL*</span><span class="sxs-lookup"><span data-stu-id="b4fea-242">`/t`  *URL*</span></span>|<span data-ttu-id="b4fea-243">指定時間戳記伺服器的 URL。</span><span class="sxs-lookup"><span data-stu-id="b4fea-243">Specifies the URL of the time stamp server.</span></span> <span data-ttu-id="b4fea-244">如果沒有這個選項 (或 `/tr`)，簽署的檔案就不會加上時間戳記。</span><span class="sxs-lookup"><span data-stu-id="b4fea-244">If this option (or `/tr`) is not present, the signed file will not be time stamped.</span></span> <span data-ttu-id="b4fea-245">如果加上時間戳記失敗，便會產生警告。</span><span class="sxs-lookup"><span data-stu-id="b4fea-245">A warning is generated if time stamping fails.</span></span> <span data-ttu-id="b4fea-246">這個選項無法與 `/tr` 選項搭配使用。</span><span class="sxs-lookup"><span data-stu-id="b4fea-246">This option cannot be used with the `/tr` option.</span></span>|  
|<span data-ttu-id="b4fea-247">`/td`  *alg*</span><span class="sxs-lookup"><span data-stu-id="b4fea-247">`/td`  *alg*</span></span>|<span data-ttu-id="b4fea-248">與 `/tr` 選項一起使用以要求 RFC 3161 時間戳記伺服器使用的摘要演算法。</span><span class="sxs-lookup"><span data-stu-id="b4fea-248">Used with the `/tr` option to request a digest algorithm used by the RFC 3161 time stamp server.</span></span> </br> <span data-ttu-id="b4fea-249">**注意：** 如果在時間戳記時未提供 <strong>/td</strong> 參數，則會產生警告。</span><span class="sxs-lookup"><span data-stu-id="b4fea-249">**Note:** A warning is generated if <strong>/td</strong> switch is not provided while timestamping.</span></span> <span data-ttu-id="b4fea-250">預設的 alg 為 SHA1，但建議使用 SHA256。</span><span class="sxs-lookup"><span data-stu-id="b4fea-250">The default alg is SHA1 but SHA256 is recommended.</span></span> <br/> <span data-ttu-id="b4fea-251"><strong>/Td</strong>參數必須在<strong>/tr</strong>參數之後宣告，而不是在之前。</span><span class="sxs-lookup"><span data-stu-id="b4fea-251">The <strong>/td</strong> switch must be declared after the <strong>/tr</strong> switch, not before.</span></span> <span data-ttu-id="b4fea-252">如果在<strong>/tr</strong>參數之前宣告<strong>/td</strong>參數，則傳回的時間戳記是來自 SHA1 演算法，而不是預期的 SHA256 演算法。</span><span class="sxs-lookup"><span data-stu-id="b4fea-252">If the <strong>/td</strong> switch is declared before the <strong>/tr</strong> switch, the timestamp that is returned is from an SHA1 algorithm instead of the intended SHA256 algorithm.</span></span> |
|<span data-ttu-id="b4fea-253">`/tr`  *URL*</span><span class="sxs-lookup"><span data-stu-id="b4fea-253">`/tr`  *URL*</span></span>|<span data-ttu-id="b4fea-254">指定 RFC 3161 時間戳記伺服器的 URL。</span><span class="sxs-lookup"><span data-stu-id="b4fea-254">Specifies the URL of the RFC 3161 time stamp server.</span></span> <span data-ttu-id="b4fea-255">如果沒有這個選項 (或 `/t`)，簽署的檔案就不會加上時間戳記。</span><span class="sxs-lookup"><span data-stu-id="b4fea-255">If this option (or `/t`) is not present, the signed file will not be time stamped.</span></span> <span data-ttu-id="b4fea-256">如果加上時間戳記失敗，便會產生警告。</span><span class="sxs-lookup"><span data-stu-id="b4fea-256">A warning is generated if time stamping fails.</span></span> <span data-ttu-id="b4fea-257">這個選項無法與 `/t` 選項搭配使用。</span><span class="sxs-lookup"><span data-stu-id="b4fea-257">This option cannot be used with the `/t` option.</span></span>|  
|<span data-ttu-id="b4fea-258">`/u`  *使用方式*</span><span class="sxs-lookup"><span data-stu-id="b4fea-258">`/u`  *Usage*</span></span>|<span data-ttu-id="b4fea-259">指定在簽署憑證時必須存在的增強金鑰使用方法 (Enhanced Key Usage，EKU)。</span><span class="sxs-lookup"><span data-stu-id="b4fea-259">Specifies the enhanced key usage (EKU) that must be present in the signing certificate.</span></span> <span data-ttu-id="b4fea-260">使用方法的值可以利用 OID 或字串指定。</span><span class="sxs-lookup"><span data-stu-id="b4fea-260">The usage value can be specified by OID or string.</span></span> <span data-ttu-id="b4fea-261">預設的使用方法為 "Code Signing" (1.3.6.1.5.5.7.3.3)。</span><span class="sxs-lookup"><span data-stu-id="b4fea-261">The default usage is "Code Signing" (1.3.6.1.5.5.7.3.3).</span></span>|  
|`/uw`|<span data-ttu-id="b4fea-262">指定「Windows 系統元件驗證」(1.3.6.1.4.1.311.10.3.6) 的使用方式。</span><span class="sxs-lookup"><span data-stu-id="b4fea-262">Specifies usage of "Windows System Component Verification" (1.3.6.1.4.1.311.10.3.6).</span></span>|  
  
 <span data-ttu-id="b4fea-263">如需使用方式範例，請參閱[使用 SignTool 簽署檔案](using-signtool-to-sign-a-file.md)。</span><span class="sxs-lookup"><span data-stu-id="b4fea-263">For usage examples, see [Using SignTool to Sign a File](using-signtool-to-sign-a-file.md).</span></span>  
  

## <a name="timestamp-command-options"></a><span data-ttu-id="b4fea-264">時間戳記命令選項</span><span class="sxs-lookup"><span data-stu-id="b4fea-264">TimeStamp command options</span></span>  

 <span data-ttu-id="b4fea-265">下表列出可以搭配 `TimeStamp` 命令使用的選項。</span><span class="sxs-lookup"><span data-stu-id="b4fea-265">The following table lists the options that can be used with the `TimeStamp` command.</span></span>  
  
|<span data-ttu-id="b4fea-266">TimeStamp 選項</span><span class="sxs-lookup"><span data-stu-id="b4fea-266">TimeStamp option</span></span>|<span data-ttu-id="b4fea-267">Description</span><span class="sxs-lookup"><span data-stu-id="b4fea-267">Description</span></span>|  
|----|----|  
|`/p7`|<span data-ttu-id="b4fea-268">為 PKCS #7 檔案加上時間戳記。</span><span class="sxs-lookup"><span data-stu-id="b4fea-268">Time stamps PKCS #7 files.</span></span>|  
|<span data-ttu-id="b4fea-269">`/t`  *URL*</span><span class="sxs-lookup"><span data-stu-id="b4fea-269">`/t`  *URL*</span></span>|<span data-ttu-id="b4fea-270">指定時間戳記伺服器的 URL。</span><span class="sxs-lookup"><span data-stu-id="b4fea-270">Specifies the URL of the time stamp server.</span></span> <span data-ttu-id="b4fea-271">要加上時間戳記的檔案必須先經過簽署。</span><span class="sxs-lookup"><span data-stu-id="b4fea-271">The file being time stamped must have previously been signed.</span></span> <span data-ttu-id="b4fea-272">必須有 `/t` 或 `/tr` 任一選項。</span><span class="sxs-lookup"><span data-stu-id="b4fea-272">Either the `/t` or the `/tr` option is required.</span></span>|  
|<span data-ttu-id="b4fea-273">`/td`  *alg*</span><span class="sxs-lookup"><span data-stu-id="b4fea-273">`/td`  *alg*</span></span>|<span data-ttu-id="b4fea-274">與 `/tr` 選項一起使用以要求 RFC 3161 時間戳記伺服器使用的摘要演算法。</span><span class="sxs-lookup"><span data-stu-id="b4fea-274">Used with the `/tr` option to request a digest algorithm used by the RFC 3161 time stamp server.</span></span> </br> <span data-ttu-id="b4fea-275">**注意：** 如果在時間戳記時未提供 <strong>/td</strong> 參數，則會產生警告。</span><span class="sxs-lookup"><span data-stu-id="b4fea-275">**Note:** A warning is generated if <strong>/td</strong> switch is not provided while timestamping.</span></span> <span data-ttu-id="b4fea-276">預設的 alg 為 SHA1，但建議使用 SHA256。</span><span class="sxs-lookup"><span data-stu-id="b4fea-276">The default alg is SHA1 but SHA256 is recommended.</span></span> <br/> <span data-ttu-id="b4fea-277"><strong>/Td</strong>參數必須在<strong>/tr</strong>參數之後宣告，而不是在之前。</span><span class="sxs-lookup"><span data-stu-id="b4fea-277">The <strong>/td</strong> switch must be declared after the <strong>/tr</strong> switch, not before.</span></span> <span data-ttu-id="b4fea-278">如果在<strong>/tr</strong>參數之前宣告<strong>/td</strong>參數，則傳回的時間戳記是來自 SHA1 演算法，而不是預期的 SHA256 演算法。</span><span class="sxs-lookup"><span data-stu-id="b4fea-278">If the <strong>/td</strong> switch is declared before the <strong>/tr</strong> switch, the timestamp that is returned is from an SHA1 algorithm instead of the intended SHA256 algorithm.</span></span> |
|<span data-ttu-id="b4fea-279">`/tp`*索引*</span><span class="sxs-lookup"><span data-stu-id="b4fea-279">`/tp` *index*</span></span>|<span data-ttu-id="b4fea-280">在 *index* 的簽章加上時間戳記。</span><span class="sxs-lookup"><span data-stu-id="b4fea-280">Time stamps the signature at *index*.</span></span>|  
|<span data-ttu-id="b4fea-281">`/tr`  *URL*</span><span class="sxs-lookup"><span data-stu-id="b4fea-281">`/tr`  *URL*</span></span>|<span data-ttu-id="b4fea-282">指定 RFC 3161 時間戳記伺服器的 URL。</span><span class="sxs-lookup"><span data-stu-id="b4fea-282">Specifies the URL of the RFC 3161 time stamp server.</span></span> <span data-ttu-id="b4fea-283">要加上時間戳記的檔案必須先經過簽署。</span><span class="sxs-lookup"><span data-stu-id="b4fea-283">The file being time stamped must have previously been signed.</span></span> <span data-ttu-id="b4fea-284">必須有 `/tr` 或 `/t` 任一選項。</span><span class="sxs-lookup"><span data-stu-id="b4fea-284">Either the `/tr` or the `/t` option is required.</span></span>|  


## <a name="verify-command-options"></a><span data-ttu-id="b4fea-285">驗證命令選項</span><span class="sxs-lookup"><span data-stu-id="b4fea-285">Verify command options</span></span>  

|<span data-ttu-id="b4fea-286">Verify 選項</span><span class="sxs-lookup"><span data-stu-id="b4fea-286">Verify option</span></span>|<span data-ttu-id="b4fea-287">Description</span><span class="sxs-lookup"><span data-stu-id="b4fea-287">Description</span></span>|
|----|----|
| <span data-ttu-id="b4fea-288">**/a**</span><span class="sxs-lookup"><span data-stu-id="b4fea-288">**/a**</span></span> | <span data-ttu-id="b4fea-289">指定所有方法都可以用來驗證檔案。</span><span class="sxs-lookup"><span data-stu-id="b4fea-289">Specifies that all methods can be used to verify the file.</span></span> <span data-ttu-id="b4fea-290">首先會搜尋目錄資料庫，判斷檔案是否已在目錄中簽署。</span><span class="sxs-lookup"><span data-stu-id="b4fea-290">First, the catalog databases are searched to determine whether the file is signed in a catalog.</span></span> <span data-ttu-id="b4fea-291">如果檔案未登入任何目錄，SignTool 會嘗試驗證檔案的內嵌簽章。</span><span class="sxs-lookup"><span data-stu-id="b4fea-291">If the file is not signed in any catalog, SignTool attempts to verify the file's embedded signature.</span></span> <span data-ttu-id="b4fea-292">驗證不一定已在目錄中簽署的檔案時，建議您採用這個選項。</span><span class="sxs-lookup"><span data-stu-id="b4fea-292">This option is recommended when verifying files that may or may not be signed in a catalog.</span></span> <span data-ttu-id="b4fea-293">可能或可能未簽署的檔案範例包括 Windows 檔案或驅動程式。</span><span class="sxs-lookup"><span data-stu-id="b4fea-293">Examples of files that may or may not be signed include Windows files or drivers.</span></span> |
| <span data-ttu-id="b4fea-294">**/ad**</span><span class="sxs-lookup"><span data-stu-id="b4fea-294">**/ad**</span></span> | <span data-ttu-id="b4fea-295">使用預設目錄資料庫尋找目錄。</span><span class="sxs-lookup"><span data-stu-id="b4fea-295">Finds the catalog by using the default catalog database.</span></span> |
| <span data-ttu-id="b4fea-296">**/all**</span><span class="sxs-lookup"><span data-stu-id="b4fea-296">**/all**</span></span> | <span data-ttu-id="b4fea-297">驗證具有多個簽章之檔案中的所有簽章。</span><span class="sxs-lookup"><span data-stu-id="b4fea-297">Verifies all signatures in a file with multiple signatures.</span></span> |
| <span data-ttu-id="b4fea-298">**/as**</span><span class="sxs-lookup"><span data-stu-id="b4fea-298">**/as**</span></span> | <span data-ttu-id="b4fea-299">使用系統元件 (驅動程式) 目錄資料庫尋找目錄。</span><span class="sxs-lookup"><span data-stu-id="b4fea-299">Finds the catalog by using the system component (driver) catalog database.</span></span> |
| <span data-ttu-id="b4fea-300">**/Ag** *CatDBGUID*</span><span class="sxs-lookup"><span data-stu-id="b4fea-300">**/ag** *CatDBGUID*</span></span> | <span data-ttu-id="b4fea-301">在 **GUID** 所識別的目錄資料庫中尋找目錄。</span><span class="sxs-lookup"><span data-stu-id="b4fea-301">Finds the catalog in the catalog database identified by the **GUID**.</span></span> |
| <span data-ttu-id="b4fea-302">**/c** *CatFile*</span><span class="sxs-lookup"><span data-stu-id="b4fea-302">**/c** *CatFile*</span></span> | <span data-ttu-id="b4fea-303">依名稱指定目錄檔。</span><span class="sxs-lookup"><span data-stu-id="b4fea-303">Specifies the catalog file by name.</span></span> |
| <span data-ttu-id="b4fea-304">**/d**</span><span class="sxs-lookup"><span data-stu-id="b4fea-304">**/d**</span></span> | <span data-ttu-id="b4fea-305">列印 [描述] 和 [描述] URL。</span><span class="sxs-lookup"><span data-stu-id="b4fea-305">Print the description and description URL.</span></span><br/> <span data-ttu-id="b4fea-306">**Windows Vista 及更早版本：** 不支援此旗標。</span><span class="sxs-lookup"><span data-stu-id="b4fea-306">**Windows Vista and earlier:** This flag is not supported.</span></span><br/> |
| <span data-ttu-id="b4fea-307">**/Ds** *索引*</span><span class="sxs-lookup"><span data-stu-id="b4fea-307">**/ds** *Index*</span></span> | <span data-ttu-id="b4fea-308">在特定位置驗證簽章。</span><span class="sxs-lookup"><span data-stu-id="b4fea-308">Verifies the signature at a certain position.</span></span> |
| <span data-ttu-id="b4fea-309">**/hash**{**SHA1** \| **SHA256**}</span><span class="sxs-lookup"><span data-stu-id="b4fea-309">**/hash**{**SHA1**\|**SHA256**}</span></span> | <span data-ttu-id="b4fea-310">指定在目錄中搜尋檔案時，要使用的選擇性雜湊演算法。</span><span class="sxs-lookup"><span data-stu-id="b4fea-310">Specifies an optional hash algorithm to use when searching for a file in a catalog.</span></span> |
| <span data-ttu-id="b4fea-311">**/kp**</span><span class="sxs-lookup"><span data-stu-id="b4fea-311">**/kp**</span></span> | <span data-ttu-id="b4fea-312">使用 x64 核心模式驅動程式簽署原則來執行驗證。</span><span class="sxs-lookup"><span data-stu-id="b4fea-312">Performs the verification by using the x64 kernel-mode driver signing policy.</span></span> |
| <span data-ttu-id="b4fea-313">**/ms**</span><span class="sxs-lookup"><span data-stu-id="b4fea-313">**/ms**</span></span> | <span data-ttu-id="b4fea-314">使用多個驗證語意。</span><span class="sxs-lookup"><span data-stu-id="b4fea-314">Uses multiple verification semantics.</span></span> <span data-ttu-id="b4fea-315">這是 [**WinVerifyTrust**](/windows/desktop/api/Wintrust/nf-wintrust-winverifytrust) 呼叫的預設行為。</span><span class="sxs-lookup"><span data-stu-id="b4fea-315">This is the default behavior of a [**WinVerifyTrust**](/windows/desktop/api/Wintrust/nf-wintrust-winverifytrust) call.</span></span> |
| <span data-ttu-id="b4fea-316">**/O** *版本*</span><span class="sxs-lookup"><span data-stu-id="b4fea-316">**/o** *Version*</span></span> | <span data-ttu-id="b4fea-317">根據作業系統版本驗證檔案。</span><span class="sxs-lookup"><span data-stu-id="b4fea-317">Verifies the file by operating system version.</span></span> <span data-ttu-id="b4fea-318">Version 參數的格式如下：</span><span class="sxs-lookup"><span data-stu-id="b4fea-318">The version parameter is of the form:</span></span><br/> <span data-ttu-id="b4fea-319">*PlatformID ***：***>vermajor ***。***>verminor ***。*** BuildNumber*</span><span class="sxs-lookup"><span data-stu-id="b4fea-319">*PlatformID ***:*** VerMajor ***.*** VerMinor ***.*** BuildNumber*</span></span><br/> <span data-ttu-id="b4fea-320">建議使用 */o* 參數。</span><span class="sxs-lookup"><span data-stu-id="b4fea-320">The use of the */o* switch is recommended.</span></span> <span data-ttu-id="b4fea-321">如果未指定 */o* ，SignTool 可能會傳回非預期的結果。</span><span class="sxs-lookup"><span data-stu-id="b4fea-321">If */o* is not specified SignTool may return unexpected results.</span></span> <span data-ttu-id="b4fea-322">例如，如果您未包含 */o* 參數，則在較舊 os 上正確驗證的系統目錄可能無法在較新的作業系統上正確地進行驗證。</span><span class="sxs-lookup"><span data-stu-id="b4fea-322">For example, if you do not include the */o* switch, then system catalogs that validate correctly on an older OS may not validate correctly on a newer OS.</span></span> |
| <span data-ttu-id="b4fea-323">**/p7**</span><span class="sxs-lookup"><span data-stu-id="b4fea-323">**/p7**</span></span> | <span data-ttu-id="b4fea-324">確認 PKCS \# 7 檔案。</span><span class="sxs-lookup"><span data-stu-id="b4fea-324">Verify PKCS \#7 files.</span></span> <span data-ttu-id="b4fea-325">PKCS 7 驗證不會使用任何現有的原則 \# 。</span><span class="sxs-lookup"><span data-stu-id="b4fea-325">No existing policies are used for PKCS \#7 validation.</span></span> <span data-ttu-id="b4fea-326">檢查簽章，並建置簽署憑證鏈結。</span><span class="sxs-lookup"><span data-stu-id="b4fea-326">The signature is checked and a chain is built for the signing certificate.</span></span> |
| <span data-ttu-id="b4fea-327">**/pa**</span><span class="sxs-lookup"><span data-stu-id="b4fea-327">**/pa**</span></span> | <span data-ttu-id="b4fea-328">指定使用預設驗證驗證原則。</span><span class="sxs-lookup"><span data-stu-id="b4fea-328">Specifies that the Default Authentication Verification Policy is used.</span></span> <span data-ttu-id="b4fea-329">如果未指定 **/pa** 選項，SignTool 會使用 Windows 驅動程式驗證原則。</span><span class="sxs-lookup"><span data-stu-id="b4fea-329">If the **/pa** option is not specified, SignTool uses the Windows Driver Verification Policy.</span></span> <span data-ttu-id="b4fea-330">此選項不能與 **catdb** 選項搭配使用。</span><span class="sxs-lookup"><span data-stu-id="b4fea-330">This option cannot be used with the **catdb** options.</span></span> |
| <span data-ttu-id="b4fea-331">**/Pg** *PolicyGUID*</span><span class="sxs-lookup"><span data-stu-id="b4fea-331">**/pg** *PolicyGUID*</span></span> | <span data-ttu-id="b4fea-332">依 **GUID** 指定驗證原則。</span><span class="sxs-lookup"><span data-stu-id="b4fea-332">Specifies a verification policy by **GUID**.</span></span> <span data-ttu-id="b4fea-333">**GUID** 對應于驗證原則的 ActionID。</span><span class="sxs-lookup"><span data-stu-id="b4fea-333">The **GUID** corresponds to the ActionID of the verification policy.</span></span> <span data-ttu-id="b4fea-334">此選項不能與 **catdb** 選項搭配使用。</span><span class="sxs-lookup"><span data-stu-id="b4fea-334">This option cannot be used with the **catdb** options.</span></span> |
| <span data-ttu-id="b4fea-335">**/ph**</span><span class="sxs-lookup"><span data-stu-id="b4fea-335">**/ph**</span></span> | <span data-ttu-id="b4fea-336">列印並確認頁面雜湊值。</span><span class="sxs-lookup"><span data-stu-id="b4fea-336">Print and verify page hash values.</span></span><br/> <span data-ttu-id="b4fea-337">**Windows Vista 及更早版本：** 不支援此旗標。</span><span class="sxs-lookup"><span data-stu-id="b4fea-337">**Windows Vista and earlier:** This flag is not supported.</span></span><br/>  |
| <span data-ttu-id="b4fea-338">**/R** *RootSubjectName*</span><span class="sxs-lookup"><span data-stu-id="b4fea-338">**/r** *RootSubjectName*</span></span> | <span data-ttu-id="b4fea-339">指定簽署憑證必須鏈結之根憑證的主體名稱。</span><span class="sxs-lookup"><span data-stu-id="b4fea-339">Specifies the name of the subject of the root certificate that the signing certificate must chain to.</span></span> <span data-ttu-id="b4fea-340">這個值可以是完整根憑證主體名稱的子字串。</span><span class="sxs-lookup"><span data-stu-id="b4fea-340">This value can be a substring of the entire subject name of the root certificate.</span></span> |
| <span data-ttu-id="b4fea-341">**/tw**</span><span class="sxs-lookup"><span data-stu-id="b4fea-341">**/tw**</span></span> | <span data-ttu-id="b4fea-342">指定如果簽章未加上時間戳記，就會產生警告。</span><span class="sxs-lookup"><span data-stu-id="b4fea-342">Specifies that a warning is generated if the signature is not time stamped.</span></span>|


<span data-ttu-id="b4fea-343">SignTool **verify** 命令可判斷簽署憑證是否由受信任的授權單位發出、簽署憑證是否已撤銷，以及是否可選擇性地指定簽署憑證是否對特定原則有效。</span><span class="sxs-lookup"><span data-stu-id="b4fea-343">The SignTool **verify** command determines whether the signing certificate was issued by a trusted authority, whether the signing certificate has been revoked, and, optionally, whether the signing certificate is valid for a specific policy.</span></span>  

<span data-ttu-id="b4fea-344">除非指定了選項來搜尋目錄 (/a、/ad、/as、/ag、/c) ，否則 SignTool **verify** 命令會輸出 **內嵌** 的簽章狀態。</span><span class="sxs-lookup"><span data-stu-id="b4fea-344">The SignTool **verify** command will output the **embedded** signature status unless an option is specified to search a catalog (/a, /ad, /as, /ag, /c).</span></span>


## <a name="return-value"></a><span data-ttu-id="b4fea-345">傳回值</span><span class="sxs-lookup"><span data-stu-id="b4fea-345">Return value</span></span>  

 <span data-ttu-id="b4fea-346">簽署工具終止時會傳回下列其中一個結束代碼。</span><span class="sxs-lookup"><span data-stu-id="b4fea-346">Sign Tool returns one of the following exit codes when it terminates.</span></span>  
  
|<span data-ttu-id="b4fea-347">結束碼</span><span class="sxs-lookup"><span data-stu-id="b4fea-347">Exit code</span></span>|<span data-ttu-id="b4fea-348">描述</span><span class="sxs-lookup"><span data-stu-id="b4fea-348">Description</span></span>|  
|----|----| 
|<span data-ttu-id="b4fea-349">0</span><span class="sxs-lookup"><span data-stu-id="b4fea-349">0</span></span>|<span data-ttu-id="b4fea-350">執行成功。</span><span class="sxs-lookup"><span data-stu-id="b4fea-350">Execution was successful.</span></span>|  
|<span data-ttu-id="b4fea-351">1</span><span class="sxs-lookup"><span data-stu-id="b4fea-351">1</span></span>|<span data-ttu-id="b4fea-352">執行失敗。</span><span class="sxs-lookup"><span data-stu-id="b4fea-352">Execution has failed.</span></span>|  
|<span data-ttu-id="b4fea-353">2</span><span class="sxs-lookup"><span data-stu-id="b4fea-353">2</span></span>|<span data-ttu-id="b4fea-354">執行已完成，但出現警告。</span><span class="sxs-lookup"><span data-stu-id="b4fea-354">Execution has completed with warnings.</span></span>|


## <a name="examples"></a><span data-ttu-id="b4fea-355">範例</span><span class="sxs-lookup"><span data-stu-id="b4fea-355">Examples</span></span>  

 <span data-ttu-id="b4fea-356">下列命令會將目錄檔 MyCatalogFileName.cat 加入至系統元件和驅動程式資料庫。</span><span class="sxs-lookup"><span data-stu-id="b4fea-356">The following command adds the catalog file MyCatalogFileName.cat to the system component and driver database.</span></span> <span data-ttu-id="b4fea-357">如有必要防止取代名為 `/u` 的現有目錄檔案，`MyCatalogFileName.cat` 選項會產生一個唯一的名稱。</span><span class="sxs-lookup"><span data-stu-id="b4fea-357">The `/u` option generates a unique name if necessary to prevent replacing an existing catalog file named `MyCatalogFileName.cat`.</span></span>  
  
```console  
signtool catdb /v /u MyCatalogFileName.cat  
```  
  
 <span data-ttu-id="b4fea-358">下列命令會使用最佳憑證自動簽署檔案。</span><span class="sxs-lookup"><span data-stu-id="b4fea-358">The following command signs a file automatically by using the best certificate.</span></span>  
  
```console  
signtool sign /a /fd SHA256 MyFile.exe 
```  
  
 <span data-ttu-id="b4fea-359">下列命令使用儲存在受密碼保護之 PFX 檔中的憑證存放區，對檔案進行數位簽署。</span><span class="sxs-lookup"><span data-stu-id="b4fea-359">The following command digitally signs a file by using a certificate stored in a password-protected PFX file.</span></span>  
  
```console  
signtool sign /f MyCert.pfx /p MyPassword /fd SHA256 MyFile.exe 
```  
  
 <span data-ttu-id="b4fea-360">下列命令會對檔案進行數位簽署和時間戳記。</span><span class="sxs-lookup"><span data-stu-id="b4fea-360">The following command digitally signs and time-stamps a file.</span></span> <span data-ttu-id="b4fea-361">用於簽署檔案的憑證存放在 PFX 檔中。</span><span class="sxs-lookup"><span data-stu-id="b4fea-361">The certificate used to sign the file is stored in a PFX file.</span></span>  
  
```console  
signtool sign /f MyCert.pfx /t http://timestamp.digicert.com /fd SHA256 MyFile.exe 
```  
  
 <span data-ttu-id="b4fea-362">下列命令會使用位於主旨名稱為 `My` 之 `My Company Certificate` 存放區中的憑證來簽署檔案。</span><span class="sxs-lookup"><span data-stu-id="b4fea-362">The following command signs a file by using a certificate located in the `My` store that has a subject name of `My Company Certificate`.</span></span>  
  
```console  
signtool sign /n "My Company Certificate" /fd SHA256 MyFile.exe 
```  
  
 <span data-ttu-id="b4fea-363">下列命令會簽署 ActiveX 控制項，並在提示使用者安裝該控制項時，提供由 Internet Explorer 顯示的資訊。</span><span class="sxs-lookup"><span data-stu-id="b4fea-363">The following command signs an ActiveX control and provides information that is displayed by Internet Explorer when the user is prompted to install the control.</span></span>  
  
```console  
Signtool sign /f MyCert.pfx /d: "MyControl" /du http://www.example.com/MyControl/info.html /fd SHA256 MyControl.exe 
```  
  
 <span data-ttu-id="b4fea-364">下列命令會為已數位簽署的檔案加上時間戳記。</span><span class="sxs-lookup"><span data-stu-id="b4fea-364">The following command time-stamps a file that has already been digitally signed.</span></span>  
  
```console  
signtool timestamp /t http://timestamp.digicert.com MyFile.exe
```  

<span data-ttu-id="b4fea-365">下列命令會將使用 RFC 3161 時間戳記伺服器的檔案加上戳記。</span><span class="sxs-lookup"><span data-stu-id="b4fea-365">The following command time-stamps a file using an RFC 3161 timestamp server.</span></span>  
  
```console  
signtool timestamp /tr http://timestamp.digicert.com /td SHA256 MyFile.exe
```  
  
 <span data-ttu-id="b4fea-366">下列命令會確認檔案是否已簽署。</span><span class="sxs-lookup"><span data-stu-id="b4fea-366">The following command verifies that a file has been signed.</span></span>  
  
```console  
signtool verify MyFile.exe  
```  
  
 <span data-ttu-id="b4fea-367">下列命令會驗證可能已在目錄中簽署的系統檔。</span><span class="sxs-lookup"><span data-stu-id="b4fea-367">The following command verifies a system file that may be signed in a catalog.</span></span>  
  
```console  
signtool verify /a SystemFile.dll  
```  
  
 <span data-ttu-id="b4fea-368">下列命令會驗證已在名為 `MyCatalog.cat` 之目錄中簽署的系統檔。</span><span class="sxs-lookup"><span data-stu-id="b4fea-368">The following command verifies a system file that is signed in a catalog named `MyCatalog.cat`.</span></span>  
  
```console  
signtool verify /c MyCatalog.cat SystemFile.dll  
```  
