---
description: 簽署和驗證 XML 數位簽章的應用程式應該根據下列最佳作法來撰寫，以避免阻斷服務攻擊、資料遺失，以及洩漏私用資訊。
ms.assetid: aa972946-9860-49c1-ae94-3f315684c291
title: XML 數位簽章安全性考慮
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4e54b4c5f3f863e0bc84172a7507bfe8609e2df7
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/08/2021
ms.locfileid: "106985029"
---
# <a name="xml-digital-signature-security-considerations"></a><span data-ttu-id="ef372-103">XML 數位簽章安全性考慮</span><span class="sxs-lookup"><span data-stu-id="ef372-103">XML Digital Signature Security Considerations</span></span>

<span data-ttu-id="ef372-104">簽署和驗證 XML 數位簽章的應用程式應該根據下列最佳作法來撰寫，以避免阻斷服務攻擊、資料遺失，以及洩漏私用資訊。</span><span class="sxs-lookup"><span data-stu-id="ef372-104">Applications that sign and verify XML digital signatures should be written according to the following best practices to avoid denial of service attacks, data loss, and compromise of private information.</span></span> <span data-ttu-id="ef372-105">下列清單提供一般指引;不過，我們鼓勵開發人員針對其應用程式執行額外的安全性分析，並查看 W3C 所發行的最新數位簽章最佳作法。</span><span class="sxs-lookup"><span data-stu-id="ef372-105">The list below provides general guidance; however, developers are encouraged to perform additional security analysis specific to their applications and review the latest digital signatures best practices published by the W3C.</span></span>

-   [<span data-ttu-id="ef372-106">確認簽署金鑰的信任</span><span class="sxs-lookup"><span data-stu-id="ef372-106">Verify trust of the signing key</span></span>](#verify-trust-of-the-signing-key)
-   [<span data-ttu-id="ef372-107">先確認簽署金鑰並驗證 SignedInfo，然後驗證參考</span><span class="sxs-lookup"><span data-stu-id="ef372-107">First verify the signing key and validate SignedInfo, then validate references</span></span>](#first-verify-the-signing-key-and-validate-signedinfo-then-validate-references)
-   [<span data-ttu-id="ef372-108">使用所需的一組最基本的標準化演算法和轉換</span><span class="sxs-lookup"><span data-stu-id="ef372-108">Use the minimal set of canonicalization algorithms and transforms required</span></span>](#use-the-minimal-set-of-canonicalization-algorithms-and-transforms-required)
-   [<span data-ttu-id="ef372-109">確定目標 Uri 指向預期範圍內的目的地</span><span class="sxs-lookup"><span data-stu-id="ef372-109">Ensure target URIs point to destinations within the expected scope</span></span>](#ensure-target-uris-point-to-destinations-within-the-expected-scope)
-   [<span data-ttu-id="ef372-110">確認應用程式所使用的資料是由簽章驗證</span><span class="sxs-lookup"><span data-stu-id="ef372-110">Verify the data consumed by the application is verified by the signature</span></span>](#verify-the-data-consumed-by-the-application-is-verified-by-the-signature)
-   [<span data-ttu-id="ef372-111">遵循最佳的密碼編譯作法</span><span class="sxs-lookup"><span data-stu-id="ef372-111">Follow best cryptographic practices</span></span>](#follow-best-cryptographic-practices)

## <a name="verify-trust-of-the-signing-key"></a><span data-ttu-id="ef372-112">確認簽署金鑰的信任</span><span class="sxs-lookup"><span data-stu-id="ef372-112">Verify trust of the signing key</span></span>

<span data-ttu-id="ef372-113">確認簽署金鑰是受信任的，方法是確認已簽署的訊息中包含對應的 [*x.509*](../secgloss/x-gly.md) 憑證 (和憑證鏈) 。</span><span class="sxs-lookup"><span data-stu-id="ef372-113">Ensure that the signing key is trusted by verifying the corresponding [*X.509*](../secgloss/x-gly.md) certificate (and certificate chain) included in the signed message.</span></span> <span data-ttu-id="ef372-114">或者，您可以用頻外方式建立簽署金鑰的信任，例如系統管理員設定一組受信任的金鑰，或透過安全通道查詢受信任服務的應用程式。</span><span class="sxs-lookup"><span data-stu-id="ef372-114">Alternately, trust in the signing key can be established in an out-of-band fashion, such as an administrator configuring a set of trusted keys, or an application querying a trusted service over a secure channel.</span></span>

## <a name="first-verify-the-signing-key-and-validate-signedinfo-then-validate-references"></a><span data-ttu-id="ef372-115">先確認簽署金鑰並驗證 SignedInfo，然後驗證參考</span><span class="sxs-lookup"><span data-stu-id="ef372-115">First verify the signing key and validate SignedInfo, then validate references</span></span>

<span data-ttu-id="ef372-116">驗證參考之前，請先確認簽署金鑰和 **SignedInfo** 元素完整性的信任。</span><span class="sxs-lookup"><span data-stu-id="ef372-116">Verify trust in the signing key and the integrity of the **SignedInfo** element prior to validating references.</span></span> <span data-ttu-id="ef372-117">同樣地，應用程式應該先驗證 **資訊清單** 專案，再解析 **資訊清單** 專案中包含的參考。</span><span class="sxs-lookup"><span data-stu-id="ef372-117">Similarly, applications should validate **Manifest** elements prior to resolving references contained in the **Manifest** elements.</span></span> <span data-ttu-id="ef372-118">**Reference** 元素允許指定目標 uri、轉換和標準化演算法。</span><span class="sxs-lookup"><span data-stu-id="ef372-118">**Reference** elements allow the specification of target URIs, transforms, and canonicalization algorithms.</span></span> <span data-ttu-id="ef372-119">如果未經過驗證，這些欄位可能會用來建立拒絕服務、資料遺失或其他攻擊。</span><span class="sxs-lookup"><span data-stu-id="ef372-119">If not validated, these fields can potentially be used to create denial of service, data loss, or other attacks.</span></span>

## <a name="use-the-minimal-set-of-canonicalization-algorithms-and-transforms-required"></a><span data-ttu-id="ef372-120">使用所需的一組最基本的標準化演算法和轉換</span><span class="sxs-lookup"><span data-stu-id="ef372-120">Use the minimal set of canonicalization algorithms and transforms required</span></span>

<span data-ttu-id="ef372-121">XSLT 和 XPATH 不應使用於未驗證的元素中，例如 **KeyInfo**。</span><span class="sxs-lookup"><span data-stu-id="ef372-121">XSLT and XPATH should not be used within unauthenticated elements, such as **KeyInfo**.</span></span> <span data-ttu-id="ef372-122">如果應用程式需要使用 XPath，請將一組 XPATH 運算式限制為只允許使用上階或本身軸的運算式，而且不會計算元素的字串值。</span><span class="sxs-lookup"><span data-stu-id="ef372-122">If an application requires use of XPath, constrain the set of XPATH expressions allowed to only those that use the ancestor or self axes and do not compute the string value of elements.</span></span> <span data-ttu-id="ef372-123">根據預設，CryptXML 支援一組有限的標準化演算法 (查看 [XML 數位簽章密碼編譯演算法](xml-digital-signature-cryptographic-algorithms.md) 中支援的 uri) 。</span><span class="sxs-lookup"><span data-stu-id="ef372-123">By default, CryptXML supports a limited set of canonicalization algorithms (see supported URIs in [XML Digital Signature Cryptographic Algorithms](xml-digital-signature-cryptographic-algorithms.md)).</span></span> <span data-ttu-id="ef372-124">開發人員可以在其應用程式中執行其他轉換或正常化演算法來使用。</span><span class="sxs-lookup"><span data-stu-id="ef372-124">Developers can implement additional transforms or canonicalization algorithms for use within their application.</span></span> <span data-ttu-id="ef372-125">不過，使用複雜的演算法可能會導致阻絕服務攻擊或破壞簽章的否認性特性。</span><span class="sxs-lookup"><span data-stu-id="ef372-125">However, the use of complex algorithms creates the possibility of denial of service attacks or of breaking a signature's repudiation characteristics.</span></span> <span data-ttu-id="ef372-126">在應用程式需要轉換的情況下，將每個參考可指定的轉換數目限制為應用程式所需的最高數目。</span><span class="sxs-lookup"><span data-stu-id="ef372-126">In cases where transforms are required by the application, limit the number of transforms that can be specified per reference to the highest number required by the application.</span></span> <span data-ttu-id="ef372-127">這種作法會根據過度使用的轉換，減少阻斷服務的攻擊。</span><span class="sxs-lookup"><span data-stu-id="ef372-127">This practice mitigates denial of service attacks based on excessive use of transforms.</span></span>

## <a name="ensure-target-uris-point-to-destinations-within-the-expected-scope"></a><span data-ttu-id="ef372-128">確定目標 Uri 指向預期範圍內的目的地</span><span class="sxs-lookup"><span data-stu-id="ef372-128">Ensure target URIs point to destinations within the expected scope</span></span>

<span data-ttu-id="ef372-129">應用程式應該將目標 Uri 限制為應用程式所需的最小範圍。</span><span class="sxs-lookup"><span data-stu-id="ef372-129">Applications should limit target URIs to the smallest scope required by the application.</span></span> <span data-ttu-id="ef372-130">例如，Uri 可能預期會指向相同檔中的目的地、特定目標目錄中的檔案，或特定 DNS 網域內的網路位置。</span><span class="sxs-lookup"><span data-stu-id="ef372-130">For example, URIs might be expected to point to destinations within the same document, files in a specific target directory, or network locations within a specific DNS domain.</span></span> <span data-ttu-id="ef372-131">攻擊者設定為指向預期網域以外的 Uri 可能會導致應用程式取出惡意內容、傳送惡意 HTTP 要求 (可能包含查詢字串) ，或導致應用程式向惡意伺服器驗證。</span><span class="sxs-lookup"><span data-stu-id="ef372-131">URIs set by an attacker to point outside the expected domain could cause an application to retrieve malicious content, send malicious HTTP requests (possibly containing query strings), or cause applications to authenticate to malicious servers.</span></span>

## <a name="verify-the-data-consumed-by-the-application-is-verified-by-the-signature"></a><span data-ttu-id="ef372-132">確認應用程式所使用的資料是由簽章驗證</span><span class="sxs-lookup"><span data-stu-id="ef372-132">Verify the data consumed by the application is verified by the signature</span></span>

<span data-ttu-id="ef372-133">如果應用程式驗證簽署金鑰和 **SignedInfo** 和 **參考** 元素，但應用程式取用簽章未參考的重要資料，則簽章不會提供有意義的保護。</span><span class="sxs-lookup"><span data-stu-id="ef372-133">If the application validates the signing key and the **SignedInfo** and **Reference** elements, but the application consumes important data not referenced by the signature, the signature provides no meaningful protection.</span></span> <span data-ttu-id="ef372-134">簽章的語義意義可能會根據簽章在檔內的位置而有所不同。</span><span class="sxs-lookup"><span data-stu-id="ef372-134">The semantic meaning of a signature may vary based on the signature's position within the document.</span></span> <span data-ttu-id="ef372-135">建議應用程式檢查檔中簽章的位置。</span><span class="sxs-lookup"><span data-stu-id="ef372-135">Applications are encouraged to check the position of the signature within a document.</span></span> <span data-ttu-id="ef372-136">此外，請檢查參考資料和專案名稱的位置，以減少替代和包裝攻擊。</span><span class="sxs-lookup"><span data-stu-id="ef372-136">Additionally, check the position of referenced data and element names to mitigate substitution and wrapping attacks.</span></span>

## <a name="follow-best-cryptographic-practices"></a><span data-ttu-id="ef372-137">遵循最佳的密碼編譯作法</span><span class="sxs-lookup"><span data-stu-id="ef372-137">Follow best cryptographic practices</span></span>

<span data-ttu-id="ef372-138">當發現新的攻擊，且有更多運算能力可供使用時，密碼編譯演算法會變得較弱。</span><span class="sxs-lookup"><span data-stu-id="ef372-138">Cryptographic algorithms become weaker over time as new attacks are discovered and more computing power becomes available.</span></span> <span data-ttu-id="ef372-139">請勿將密碼編譯演算法識別碼或金鑰大小硬的編碼到您的應用程式中。</span><span class="sxs-lookup"><span data-stu-id="ef372-139">Do not hard code cryptographic algorithm identifiers or key sizes into your applications.</span></span> <span data-ttu-id="ef372-140">如需最佳密碼編譯作法的完整清單，請參閱 Michael Howard 和 Steve Lipner *《安全性開發生命 (週期* 中的《 SDL 基本密碼編譯標準》（美國華盛頓州的《 Microsoft，2006) ，251–258》）。</span><span class="sxs-lookup"><span data-stu-id="ef372-140">For a more complete list of best cryptographic practices, see Michael Howard and Steve Lipner, "SDL Minimum Cryptographic Standards," in *The Security Development Lifecycle* (Redmond, Washington: Microsoft Press, 2006), 251–258.</span></span>

<span data-ttu-id="ef372-141">其他最佳作法可在 W3C 網站上找到： https://www.w3.org 。</span><span class="sxs-lookup"><span data-stu-id="ef372-141">Additional best practices can be found on the W3C website: https://www.w3.org.</span></span>

> [!Note]  
> <span data-ttu-id="ef372-142">這些資源可能無法在某些語言及國家/地區中使用。</span><span class="sxs-lookup"><span data-stu-id="ef372-142">These resources may not be available in some languages and countries or regions.</span></span>

 

 

 
