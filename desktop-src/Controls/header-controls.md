---
title: 關於標題控制項
description: 標題控制項是通常位於文字或數位資料行上方的視窗。 它包含每個資料行的標題，而且可以分成幾個部分。
ms.assetid: b464fb9a-e342-4209-ba6f-15b5388f3914
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a6d9beaa9dc3bd8eb94d749ec271902a480b853e
ms.sourcegitcommit: 5f33645661bf8c825a7a2e73950b1f4ea0f1cd82
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/21/2020
ms.locfileid: "103683133"
---
# <a name="about-header-controls"></a><span data-ttu-id="a1c5c-104">關於標題控制項</span><span class="sxs-lookup"><span data-stu-id="a1c5c-104">About Header Controls</span></span>

<span data-ttu-id="a1c5c-105">標題控制項是通常位於文字或數位資料行上方的視窗。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-105">A header control is a window that is usually positioned above columns of text or numbers.</span></span> <span data-ttu-id="a1c5c-106">它包含每個資料行的標題，而且可以分成幾個部分。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-106">It contains a title for each column, and it can be divided into parts.</span></span> <span data-ttu-id="a1c5c-107">使用者可以拖曳分隔各個部分的分隔線，以設定每個資料行的寬度。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-107">The user can drag the dividers that separate the parts to set the width of each column.</span></span> <span data-ttu-id="a1c5c-108">下圖顯示的標題控制項具有標記的資料行，可提供目錄中檔案的詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-108">The following illustration shows a header control that has labeled columns that give detailed information about files in a directory.</span></span>

![具有三欄標題控制項之對話方塊的螢幕擷取畫面](images/header.png)

<span data-ttu-id="a1c5c-110">您可以使用 [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) 函式來建立標題控制項，並指定 [**WC \_ 標頭**](common-control-window-classes.md) 視窗類別和適當的 [標題控制項樣式](header-control-styles.md)。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-110">You can create a header control by using the [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) function, specifying the [**WC\_HEADER**](common-control-window-classes.md) window class and the appropriate [Header Control Styles](header-control-styles.md).</span></span> <span data-ttu-id="a1c5c-111">載入通用控制項 DLL 時，會註冊此視窗類別。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-111">This window class is registered when the common control DLL is loaded.</span></span> <span data-ttu-id="a1c5c-112">若要確定已載入此 DLL，請使用 [**InitCommonControlsEx**](/windows/desktop/api/Commctrl/nf-commctrl-initcommoncontrolsex) 函數。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-112">To ensure that this DLL is loaded, use the [**InitCommonControlsEx**](/windows/desktop/api/Commctrl/nf-commctrl-initcommoncontrolsex) function.</span></span> <span data-ttu-id="a1c5c-113">建立標題控制項之後，您可以將它分割成部分、設定每個元件中的文字，以及使用標頭視窗訊息控制視窗的外觀。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-113">After you create a header control, you can divide it into parts, set the text in each part, and control the appearance of the window by using header window messages.</span></span>

<span data-ttu-id="a1c5c-114">標題控制項可以建立為另一個控制項（例如清單方塊）的子視窗。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-114">A header control can be created as a child window of another control, such as a list box.</span></span> <span data-ttu-id="a1c5c-115">不過，父控制項並不知道標題控制項，而且不允許標頭所佔用的空間，結果清單專案將出現在標頭後方。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-115">However, the parent control is not aware of the header control and does not allow for the space taken up by the header, with the result that list items will appear behind the header.</span></span> <span data-ttu-id="a1c5c-116">如果您想要在清單方塊或其他控制項中使用標題控制項，父控制項必須是主控描繪，才能將所有專案顯示在正確的位置。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-116">If you wish to use a header control in a list box or other control, the parent control must be owner-drawn so that all items are displayed in the correct position.</span></span>

<span data-ttu-id="a1c5c-117">清單視圖控制項已經有標題控制項。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-117">List-view controls already have header controls.</span></span> <span data-ttu-id="a1c5c-118">您可以使用 [**LVM \_ Messageheaders**](lvm-getheader.md) 或 [**ListView \_ messageheaders**](/windows/desktop/api/Commctrl/nf-commctrl-listview_getheader) 來取出現有的控制項，而不是建立清單視圖控制項的標題控制項。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-118">Instead of creating a header control for a list-view control, you use [**LVM\_GETHEADER**](lvm-getheader.md) or [**ListView\_GetHeader**](/windows/desktop/api/Commctrl/nf-commctrl-listview_getheader) to retrieve the existing control.</span></span>

-   [<span data-ttu-id="a1c5c-119">標題控制項大小和位置</span><span class="sxs-lookup"><span data-stu-id="a1c5c-119">Header Control Size and Position</span></span>](#header-control-size-and-position)
-   [<span data-ttu-id="a1c5c-120">項目</span><span class="sxs-lookup"><span data-stu-id="a1c5c-120">Items</span></span>](#items)
-   [<span data-ttu-id="a1c5c-121">擁有者繪製的標題控制項</span><span class="sxs-lookup"><span data-stu-id="a1c5c-121">Owner-Drawn Header Controls</span></span>](#owner-drawn-header-controls)
-   [<span data-ttu-id="a1c5c-122">標題控制項篩選</span><span class="sxs-lookup"><span data-stu-id="a1c5c-122">Header Control Filters</span></span>](#header-control-filters)
-   [<span data-ttu-id="a1c5c-123">預設標頭控制訊息處理</span><span class="sxs-lookup"><span data-stu-id="a1c5c-123">Default Header Control Message Processing</span></span>](#default-header-control-message-processing)

## <a name="header-control-size-and-position"></a><span data-ttu-id="a1c5c-124">標題控制項大小和位置</span><span class="sxs-lookup"><span data-stu-id="a1c5c-124">Header Control Size and Position</span></span>

<span data-ttu-id="a1c5c-125">一般而言，您必須設定標題控制項的大小和位置，以符合特定矩形的界限，例如視窗的工作區。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-125">Typically, you must set the size and position of a header control to fit within the boundaries of a particular rectangle, such as the client area of a window.</span></span> <span data-ttu-id="a1c5c-126">藉由使用 [**HDM \_ 版面**](hdm-layout.md) 配置訊息，您可以從標題控制項取出適當的大小和位置值。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-126">By using the [**HDM\_LAYOUT**](hdm-layout.md) message, you can retrieve the appropriate size and position values from the header control.</span></span>

<span data-ttu-id="a1c5c-127">傳送 HDM 配置時，您可以指定 [**HDLAYOUT**](/windows/win32/api/commctrl/ns-commctrl-hdlayout)結構的位址，其中包含標題控制項要佔用的矩形座標，並提供 [**WINDOWPOS**](/windows/win32/api/winuser/ns-winuser-windowpos)結構的指標。 [**\_**](hdm-layout.md)</span><span class="sxs-lookup"><span data-stu-id="a1c5c-127">When sending [**HDM\_LAYOUT**](hdm-layout.md), you specify the address of an [**HDLAYOUT**](/windows/win32/api/commctrl/ns-commctrl-hdlayout) structure that contains the coordinates of the rectangle that the header control is to occupy and provides a pointer to a [**WINDOWPOS**](/windows/win32/api/winuser/ns-winuser-windowpos) structure.</span></span> <span data-ttu-id="a1c5c-128">控制項會以適當的大小和位置值來填滿 **WINDOWPOS** 結構，以將控制項放置在指定矩形的上方。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-128">The control fills the **WINDOWPOS** structure with size and position values appropriate for positioning the control along the top of the specified rectangle.</span></span> <span data-ttu-id="a1c5c-129">高度值是控制項的水準框線高度，以及目前在控制項裝置內容中所選取之字型的平均高度。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-129">The height value is the sum of the heights of the control's horizontal borders and the average height of characters in the font currently selected into the control's device context.</span></span>

<span data-ttu-id="a1c5c-130">如果您想要使用 [**HDM \_ 版面**](hdm-layout.md) 配置來設定標題控制項的初始大小和位置，請設定控制項的初始可見度狀態，使其隱藏。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-130">If you want to use [**HDM\_LAYOUT**](hdm-layout.md) to set the initial size and position of a header control, set the initial visibility state of the control so that it is hidden.</span></span> <span data-ttu-id="a1c5c-131">傳送 HDM 配置以抓取大小和位置值之後，您可以使用 [**SetWindowPos**](/windows/desktop/api/winuser/nf-winuser-setwindowpos)函式來設定新的大小、位置和可見度狀態。 **\_**</span><span class="sxs-lookup"><span data-stu-id="a1c5c-131">After sending **HDM\_LAYOUT** to retrieve the size and position values, you can use the [**SetWindowPos**](/windows/desktop/api/winuser/nf-winuser-setwindowpos) function to set the new size, position, and visibility state.</span></span>

## <a name="items"></a><span data-ttu-id="a1c5c-132">項目</span><span class="sxs-lookup"><span data-stu-id="a1c5c-132">Items</span></span>

<span data-ttu-id="a1c5c-133">標題控制項通常會有數個定義控制項資料行的標頭專案。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-133">A header control typically has several header items that define the columns of the control.</span></span> <span data-ttu-id="a1c5c-134">您可以藉由將 [**HDM \_ INSERTITEM**](hdm-insertitem.md) 訊息傳送至控制項，將專案加入至標題控制項。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-134">You add an item to a header control by sending the [**HDM\_INSERTITEM**](hdm-insertitem.md) message to the control.</span></span> <span data-ttu-id="a1c5c-135">訊息包含 [**HDITEM**](/windows/win32/api/commctrl/ns-commctrl-hditema) 結構的位址。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-135">The message includes the address of an [**HDITEM**](/windows/win32/api/commctrl/ns-commctrl-hditema) structure.</span></span> <span data-ttu-id="a1c5c-136">此結構會定義標頭專案的屬性，其中可包含字串、點陣圖影像、初始大小，以及應用程式定義的 **LPARAM** 值。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-136">This structure defines the properties of the header item, which can include a string, a bitmapped image, an initial size, and an application-defined **LPARAM** value.</span></span>

<span data-ttu-id="a1c5c-137">專案 [**HDITEM**](/windows/win32/api/commctrl/ns-commctrl-hditema)結構的 **bcp.fmt** 成員可以包含 **HDF \_ 字串** 或 **HDF \_ 點陣圖** 旗標，以指出控制項是否顯示專案的字串或點陣圖。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-137">The **fmt** member of an item's [**HDITEM**](/windows/win32/api/commctrl/ns-commctrl-hditema) structure can include either the **HDF\_STRING** or **HDF\_BITMAP** flag to indicate whether the control displays the item's string or bitmap.</span></span> <span data-ttu-id="a1c5c-138">如果您想要同時顯示字串和點陣圖，請將 **bcp.fmt** 成員設定為包含 **HDF \_ OWNERDRAW** 旗標，以建立主控描繪專案。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-138">If you want to display both a string and a bitmap, create an owner-drawn item by setting the **fmt** member to include the **HDF\_OWNERDRAW** flag.</span></span> <span data-ttu-id="a1c5c-139">**HDITEM** 結構也會指定格式化旗標，告知控制項是要置中、靠左對齊還是靠右對齊專案矩形中的字串或點陣圖。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-139">The **HDITEM** structure also specifies formatting flags that tell the control whether to center, left-align, or right-align the string or bitmap in the item's rectangle.</span></span>

<span data-ttu-id="a1c5c-140">[**HDM \_INSERTITEM**](hdm-insertitem.md) 會傳回新加入之專案的索引。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-140">[**HDM\_INSERTITEM**](hdm-insertitem.md) returns the index of the newly added item.</span></span> <span data-ttu-id="a1c5c-141">您可以使用其他訊息中的索引來設定屬性或取得專案的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-141">You can use the index in other messages to set properties or retrieve information about the item.</span></span> <span data-ttu-id="a1c5c-142">您可以使用 [**HDM \_ DELETEITEM**](hdm-deleteitem.md) 訊息來刪除專案，並指定要刪除之專案的索引。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-142">You can delete an item by using the [**HDM\_DELETEITEM**](hdm-deleteitem.md) message, specifying the index of the item to delete.</span></span>

<span data-ttu-id="a1c5c-143">您可以使用 [**HDM \_ SETITEM**](hdm-setitem.md) 訊息來設定現有標題專案的屬性，以及使用 [**HDM \_ GETITEM**](hdm-getitem.md) 訊息來取得專案的目前屬性。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-143">You can use the [**HDM\_SETITEM**](hdm-setitem.md) message to set the properties of an existing header item and the [**HDM\_GETITEM**](hdm-getitem.md) message to retrieve the current properties of an item.</span></span> <span data-ttu-id="a1c5c-144">若要取出標題控制項中的專案計數，請使用 [**HDM \_ GETITEMCOUNT**](hdm-getitemcount.md) 訊息。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-144">To retrieve a count of the items in a header control, use the [**HDM\_GETITEMCOUNT**](hdm-getitemcount.md) message.</span></span>

## <a name="owner-drawn-header-controls"></a><span data-ttu-id="a1c5c-145">Owner-Drawn 標題控制項</span><span class="sxs-lookup"><span data-stu-id="a1c5c-145">Owner-Drawn Header Controls</span></span>

<span data-ttu-id="a1c5c-146">您可以將標題控制項的個別專案定義為主控描繪專案。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-146">You can define individual items of a header control to be owner-drawn items.</span></span> <span data-ttu-id="a1c5c-147">使用這項技術可讓您擁有更多的控制，而不是標頭專案的外觀。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-147">Using this technique gives you more control than you would otherwise have over the appearance of a header item.</span></span>

<span data-ttu-id="a1c5c-148">您可以使用 [**HDM \_ INSERTITEM**](hdm-insertitem.md) 訊息，將新的主控描繪專案插入至標題控制項或 [**HDM \_ SETITEM**](hdm-setitem.md) 訊息，以將現有專案變更為主控描繪專案。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-148">You can use the [**HDM\_INSERTITEM**](hdm-insertitem.md) message to insert a new owner-drawn item into a header control or the [**HDM\_SETITEM**](hdm-setitem.md) message to change an existing item to an owner-drawn item.</span></span> <span data-ttu-id="a1c5c-149">這兩個訊息都包含 [**HDITEM**](/windows/win32/api/commctrl/ns-commctrl-hditema) 結構的位址，其 **bcp.fmt** 成員應設定為 **HDF \_ OWNERDRAW** 值。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-149">Both messages include the address of an [**HDITEM**](/windows/win32/api/commctrl/ns-commctrl-hditema) structure, which should have the **fmt** member set to the **HDF\_OWNERDRAW** value.</span></span>

<span data-ttu-id="a1c5c-150">當標題控制項必須繪製主控描繪的專案時，它會將 [**WM \_ DRAWITEM**](wm-drawitem.md) 訊息傳送至父視窗。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-150">When a header control must draw an owner-drawn item, it sends the [**WM\_DRAWITEM**](wm-drawitem.md) message to the parent window.</span></span> <span data-ttu-id="a1c5c-151">訊息的 *wParam* 參數是標題控制項的子視窗識別碼，而 *LParam* 參數是 [**DRAWITEMSTRUCT**](/windows/win32/api/winuser/ns-winuser-drawitemstruct) 結構的位址。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-151">The *wParam* parameter of the message is the child window identifier of the header control, and the *lParam* parameter is an address of a [**DRAWITEMSTRUCT**](/windows/win32/api/winuser/ns-winuser-drawitemstruct) structure.</span></span> <span data-ttu-id="a1c5c-152">父視窗會使用結構中的資訊來繪製專案。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-152">The parent window uses the information in the structure to draw the item.</span></span> <span data-ttu-id="a1c5c-153">如果是標題控制項中的主控描繪專案， **DRAWITEMSTRUCT** 結構會包含下列資訊。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-153">For an owner-drawn item in a header control, the **DRAWITEMSTRUCT** structure contains the following information.</span></span>



| <span data-ttu-id="a1c5c-154">member</span><span class="sxs-lookup"><span data-stu-id="a1c5c-154">Member</span></span>         | <span data-ttu-id="a1c5c-155">描述</span><span class="sxs-lookup"><span data-stu-id="a1c5c-155">Description</span></span>                                                                                                                                            |
|----------------|--------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="a1c5c-156">**CtlType**</span><span class="sxs-lookup"><span data-stu-id="a1c5c-156">**CtlType**</span></span>    | <span data-ttu-id="a1c5c-157">[**ODT \_標頭**](/windows/win32/api/winuser/ns-winuser-drawitemstruct) 擁有者繪製控制項類型。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-157">[**ODT\_HEADER**](/windows/win32/api/winuser/ns-winuser-drawitemstruct) owner-drawn control type.</span></span>                                                                                        |
| <span data-ttu-id="a1c5c-158">**CtlID**</span><span class="sxs-lookup"><span data-stu-id="a1c5c-158">**CtlID**</span></span>      | <span data-ttu-id="a1c5c-159">標題控制項的子視窗識別碼。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-159">Child-window identifier of the header control.</span></span>                                                                                                         |
| <span data-ttu-id="a1c5c-160">**itemID**</span><span class="sxs-lookup"><span data-stu-id="a1c5c-160">**itemID**</span></span>     | <span data-ttu-id="a1c5c-161">要繪製之專案的索引。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-161">Index of the item to be drawn.</span></span>                                                                                                                         |
| <span data-ttu-id="a1c5c-162">**itemAction**</span><span class="sxs-lookup"><span data-stu-id="a1c5c-162">**itemAction**</span></span> | <span data-ttu-id="a1c5c-163">[**ODA \_DRAWENTIRE**](/windows/win32/api/winuser/ns-winuser-drawitemstruct) 繪圖-動作旗標。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-163">[**ODA\_DRAWENTIRE**](/windows/win32/api/winuser/ns-winuser-drawitemstruct) drawing-action flag.</span></span>                                                                                         |
| <span data-ttu-id="a1c5c-164">**itemState**</span><span class="sxs-lookup"><span data-stu-id="a1c5c-164">**itemState**</span></span>  | <span data-ttu-id="a1c5c-165">[**ODS \_選取**](/windows/win32/api/winuser/ns-winuser-drawitemstruct) 的繪圖-動作旗標（如果游標位於專案上且滑鼠按鍵已關閉）。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-165">[**ODS\_SELECTED**](/windows/win32/api/winuser/ns-winuser-drawitemstruct) drawing-action flag if the cursor is on the item and the mouse button is down.</span></span> <span data-ttu-id="a1c5c-166">否則，此成員為零。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-166">Otherwise, this member is zero.</span></span> |
| <span data-ttu-id="a1c5c-167">**hwndItem**</span><span class="sxs-lookup"><span data-stu-id="a1c5c-167">**hwndItem**</span></span>   | <span data-ttu-id="a1c5c-168">標題控制項的控制碼。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-168">Handle to the header control.</span></span>                                                                                                                          |
| <span data-ttu-id="a1c5c-169">**hDC**</span><span class="sxs-lookup"><span data-stu-id="a1c5c-169">**hDC**</span></span>        | <span data-ttu-id="a1c5c-170">標題控制項的裝置內容控制碼。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-170">Handle to the device context of the header control.</span></span>                                                                                                    |
| <span data-ttu-id="a1c5c-171">**rcItem**</span><span class="sxs-lookup"><span data-stu-id="a1c5c-171">**rcItem**</span></span>     | <span data-ttu-id="a1c5c-172">要繪製之標頭專案的座標。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-172">Coordinates of the header item to be drawn.</span></span> <span data-ttu-id="a1c5c-173">座標是相對於標題控制項的左上角。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-173">The coordinates are relative to the upper-left corner of the header control.</span></span>                               |
| <span data-ttu-id="a1c5c-174">**itemData**</span><span class="sxs-lookup"><span data-stu-id="a1c5c-174">**itemData**</span></span>   | <span data-ttu-id="a1c5c-175">與專案相關聯的應用程式定義32位值。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-175">Application-defined 32-bit value associated with the item.</span></span>                                                                                             |



 

## <a name="header-control-filters"></a><span data-ttu-id="a1c5c-176">標題控制項篩選</span><span class="sxs-lookup"><span data-stu-id="a1c5c-176">Header Control Filters</span></span>

<span data-ttu-id="a1c5c-177">藉由指定標題控制項的 [**HDS \_ FILTERBAR**](header-control-styles.md) 視窗樣式，您可以在資料行標題底下啟用篩選編輯方塊的位置。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-177">By specifying the [**HDS\_FILTERBAR**](header-control-styles.md) window style for a header control, you can enable the placement of filter edit boxes underneath the column headings.</span></span> <span data-ttu-id="a1c5c-178">篩選按鈕會出現在編輯方塊旁邊。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-178">A filter button appears beside the edit box.</span></span> <span data-ttu-id="a1c5c-179">您可以藉由回應 [HDN \_ BEGINFILTEREDIT](hdn-beginfilteredit.md)、 [HDN \_ ENDFILTEREDIT](hdn-endfilteredit.md)、 [HDN \_ FILTERBTNCLICK](hdn-filterbtnclick.md)或 [HDN \_ FILTERCHANGE](hdn-filterchange.md) 通知碼來執行篩選。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-179">You can implement filtering by responding to [HDN\_BEGINFILTEREDIT](hdn-beginfilteredit.md), [HDN\_ENDFILTEREDIT](hdn-endfilteredit.md), [HDN\_FILTERBTNCLICK](hdn-filterbtnclick.md), or [HDN\_FILTERCHANGE](hdn-filterchange.md) notification codes.</span></span>

<span data-ttu-id="a1c5c-180">根據預設，編輯方塊包含提示讓使用者輸入文字。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-180">By default, the edit box contains a prompt for the user to enter text.</span></span> <span data-ttu-id="a1c5c-181">您可以使用 [**標頭 \_ ClearFilter**](/windows/desktop/api/Commctrl/nf-commctrl-header_clearfilter) 或 [**標頭 \_ ClearAllFilters**](/windows/desktop/api/Commctrl/nf-commctrl-header_clearallfilters)，將編輯方塊還原為此預設狀態。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-181">You can restore the edit box to this default state by using [**Header\_ClearFilter**](/windows/desktop/api/Commctrl/nf-commctrl-header_clearfilter) or [**Header\_ClearAllFilters**](/windows/desktop/api/Commctrl/nf-commctrl-header_clearallfilters).</span></span>

<span data-ttu-id="a1c5c-182">下列程式碼範例示範如何從清單視圖控制項取出標題控制項，以及加入篩選列。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-182">The following code example shows how to retrieve the header control from a list-view control and add a filter bar.</span></span>


```
// hList is the HWND of the list-view control.
HWND hHeader = ListView_GetHeader(hList);
LONG_PTR styles = GetWindowLongPtr(hHeader, GWL_STYLE);
SetWindowLongPtr(g_hHeader, GWL_STYLE, styles | HDS_FILTERBAR);
```



## <a name="default-header-control-message-processing"></a><span data-ttu-id="a1c5c-183">預設標頭控制訊息處理</span><span class="sxs-lookup"><span data-stu-id="a1c5c-183">Default Header Control Message Processing</span></span>

<span data-ttu-id="a1c5c-184">本節說明 [**WC \_ 標頭**](common-control-window-classes.md) 視窗類別的視窗程式所處理的視窗訊息。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-184">This section describes the window messages handled by the window procedure for the [**WC\_HEADER**](common-control-window-classes.md) window class.</span></span>



| <span data-ttu-id="a1c5c-185">訊息</span><span class="sxs-lookup"><span data-stu-id="a1c5c-185">Message</span></span>                                            | <span data-ttu-id="a1c5c-186">處理已執行</span><span class="sxs-lookup"><span data-stu-id="a1c5c-186">Processing performed</span></span>                                                                                                                                                                                                                                                                                          |
|----------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="a1c5c-187">**WM \_ 建立**</span><span class="sxs-lookup"><span data-stu-id="a1c5c-187">**WM\_CREATE**</span></span>](/windows/desktop/winmsg/wm-create)                 | <span data-ttu-id="a1c5c-188">初始化標題控制項。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-188">Initializes the header control.</span></span>                                                                                                                                                                                                                                                                               |
| [<span data-ttu-id="a1c5c-189">**WM 損 \_ 毀**</span><span class="sxs-lookup"><span data-stu-id="a1c5c-189">**WM\_DESTROY**</span></span>](/windows/desktop/winmsg/wm-destroy)               | <span data-ttu-id="a1c5c-190">取消初始化標題控制項。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-190">Uninitializes the header control.</span></span>                                                                                                                                                                                                                                                                             |
| [<span data-ttu-id="a1c5c-191">**WM \_ ERASEBKGND**</span><span class="sxs-lookup"><span data-stu-id="a1c5c-191">**WM\_ERASEBKGND**</span></span>](/windows/desktop/winmsg/wm-erasebkgnd)         | <span data-ttu-id="a1c5c-192">使用控制項目前的背景色彩，填滿標題控制項的背景。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-192">Fills the background of the header control using the control's current background color.</span></span>                                                                                                                                                                                                                      |
| [<span data-ttu-id="a1c5c-193">**WM \_ GETDLGCODE**</span><span class="sxs-lookup"><span data-stu-id="a1c5c-193">**WM\_GETDLGCODE**</span></span>](/windows/desktop/dlgbox/wm-getdlgcode)         | <span data-ttu-id="a1c5c-194">傳回 [**DLGC \_ WANTTAB**](/windows/desktop/dlgbox/wm-getdlgcode) 和 [**DLGC \_ WANTARROWS**](/windows/desktop/dlgbox/wm-getdlgcode) 值的組合。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-194">Returns a combination of the [**DLGC\_WANTTAB**](/windows/desktop/dlgbox/wm-getdlgcode) and [**DLGC\_WANTARROWS**](/windows/desktop/dlgbox/wm-getdlgcode) values.</span></span>                                                                                                                     |
| [<span data-ttu-id="a1c5c-195">**WM \_ GETFONT**</span><span class="sxs-lookup"><span data-stu-id="a1c5c-195">**WM\_GETFONT**</span></span>](/windows/desktop/winmsg/wm-getfont)               | <span data-ttu-id="a1c5c-196">傳回目前字型的控制碼，標題控制項會使用此控制碼來繪製其文字。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-196">Returns the handle to the current font, which is used by the header control to draw its text.</span></span>                                                                                                                                                                                                                 |
| [<span data-ttu-id="a1c5c-197">**WM \_ LBUTTONDBLCLK**</span><span class="sxs-lookup"><span data-stu-id="a1c5c-197">**WM\_LBUTTONDBLCLK**</span></span>](/windows/desktop/inputdev/wm-lbuttondblclk) | <span data-ttu-id="a1c5c-198">捕捉滑鼠輸入。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-198">Captures mouse input.</span></span> <span data-ttu-id="a1c5c-199">如果滑鼠游標位於分隔線上，控制項會傳送 [HDN \_ BEGINTRACK](hdn-begintrack.md) 通知碼並開始拖曳分隔線。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-199">If the mouse cursor is on a divider, the control sends the [HDN\_BEGINTRACK](hdn-begintrack.md) notification code and begins dragging the divider.</span></span> <span data-ttu-id="a1c5c-200">如果資料指標位於專案上，則專案會顯示為已按下的狀態。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-200">If the cursor is on an item, the item is displayed in the pressed state.</span></span>                                                            |
| [<span data-ttu-id="a1c5c-201">**WM \_ LBUTTONDOWN**</span><span class="sxs-lookup"><span data-stu-id="a1c5c-201">**WM\_LBUTTONDOWN**</span></span>](/windows/desktop/inputdev/wm-lbuttondown)     | <span data-ttu-id="a1c5c-202">與 [**WM \_ LBUTTONDBLCLK**](/windows/desktop/inputdev/wm-lbuttondblclk) 訊息相同。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-202">Same as the [**WM\_LBUTTONDBLCLK**](/windows/desktop/inputdev/wm-lbuttondblclk) message.</span></span>                                                                                                                                                                                                                                       |
| [<span data-ttu-id="a1c5c-203">**WM \_ LBUTTONUP**</span><span class="sxs-lookup"><span data-stu-id="a1c5c-203">**WM\_LBUTTONUP**</span></span>](/windows/desktop/inputdev/wm-lbuttonup)         | <span data-ttu-id="a1c5c-204">釋放滑鼠捕捉。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-204">Releases the mouse capture.</span></span> <span data-ttu-id="a1c5c-205">如果控制項是追蹤滑鼠移動，它會傳送 [HDN \_ ENDTRACK](hdn-endtrack.md) 通知碼，並重新繪製標題控制項。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-205">If the control was tracking mouse movement, it sends the [HDN\_ENDTRACK](hdn-endtrack.md) notification code and redraws the header control.</span></span> <span data-ttu-id="a1c5c-206">否則，控制項會傳送 [HDN \_ ITEMCLICK](hdn-itemclick.md) 通知碼，並重新繪製已按下的標頭專案。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-206">Otherwise, the control sends the [HDN\_ITEMCLICK](hdn-itemclick.md) notification code and redraws the header item that was clicked.</span></span> |
| [<span data-ttu-id="a1c5c-207">**WM \_ MOUSEMOVE**</span><span class="sxs-lookup"><span data-stu-id="a1c5c-207">**WM\_MOUSEMOVE**</span></span>](/windows/desktop/inputdev/wm-mousemove)         | <span data-ttu-id="a1c5c-208">如果正在拖曳分隔線，控制項會傳送 [HDN \_ TRACK](hdn-track.md) 通知程式碼，並在新位置顯示該專案。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-208">If a divider is being dragged, the control sends the [HDN\_TRACK](hdn-track.md) notification code and displays the item at the new position.</span></span> <span data-ttu-id="a1c5c-209">如果滑鼠左鍵已關閉，且游標位於某個專案上，則專案會顯示為 [已按下] 狀態。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-209">If the left mouse button is down and the cursor is on an item, the item is displayed in the pressed state.</span></span>                                                      |
| [<span data-ttu-id="a1c5c-210">**WM \_ NCCREATE**</span><span class="sxs-lookup"><span data-stu-id="a1c5c-210">**WM\_NCCREATE**</span></span>](/windows/desktop/winmsg/wm-nccreate)             | <span data-ttu-id="a1c5c-211">配置並初始化內部資料結構。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-211">Allocates and initializes an internal data structure.</span></span>                                                                                                                                                                                                                                                         |
| [<span data-ttu-id="a1c5c-212">**WM \_ NCDESTROY**</span><span class="sxs-lookup"><span data-stu-id="a1c5c-212">**WM\_NCDESTROY**</span></span>](/windows/desktop/winmsg/wm-ncdestroy)           | <span data-ttu-id="a1c5c-213">在標題控制項未初始化之後，釋出標題控制項所配置的資源。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-213">Frees the resources allocated by the header control after the header control is uninitialized.</span></span>                                                                                                                                                                                                                |
| [<span data-ttu-id="a1c5c-214">**WM \_ 油漆**</span><span class="sxs-lookup"><span data-stu-id="a1c5c-214">**WM\_PAINT**</span></span>](/windows/desktop/gdi/wm-paint)                      | <span data-ttu-id="a1c5c-215">繪製標題控制項的無效區域。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-215">Paints the invalid region of the header control.</span></span> <span data-ttu-id="a1c5c-216">如果 *wParam* 參數不是 Null，則控制項會假設值為 HDC，並且使用該裝置內容繪製。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-216">If the *wParam* parameter is non-NULL, the control assumes that the value is an HDC and paints using that device context.</span></span>                                                                                                                                    |
| [<span data-ttu-id="a1c5c-217">**WM \_ SETCURSOR**</span><span class="sxs-lookup"><span data-stu-id="a1c5c-217">**WM\_SETCURSOR**</span></span>](/windows/desktop/menurc/wm-setcursor)           | <span data-ttu-id="a1c5c-218">設定資料指標圖形，視資料指標位於分割線或在標頭專案中而定。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-218">Sets the cursor shape, depending on whether the cursor is on a divider or in a header item.</span></span>                                                                                                                                                                                                                   |
| [<span data-ttu-id="a1c5c-219">**WM \_ SETFONT**</span><span class="sxs-lookup"><span data-stu-id="a1c5c-219">**WM\_SETFONT**</span></span>](/windows/desktop/winmsg/wm-setfont)               | <span data-ttu-id="a1c5c-220">在標題控制項的裝置內容中選取新的字型控點。</span><span class="sxs-lookup"><span data-stu-id="a1c5c-220">Selects a new font handle into the device context for the header control.</span></span>                                                                                                                                                                                                                                     |



 

 

 