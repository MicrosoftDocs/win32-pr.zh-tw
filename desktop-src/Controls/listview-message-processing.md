---
title: 預設 List-View 訊息處理
description: 此區段會列出由清單視圖控制項所執行的視窗訊息處理。
ms.assetid: c634c446-37e5-4f7c-b337-306c29961e58
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 27daa334b8640c855c150216f68e8b243cacbc7b2fe9a218a7e3e17bf69402b8
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/11/2021
ms.locfileid: "119698838"
---
# <a name="default-list-view-message-processing"></a>預設 List-View 訊息處理

此區段會列出由清單視圖控制項所執行的視窗訊息處理。

## <a name="message-processing"></a>訊息處理

下表描述由清單視圖控制項所執行的視窗訊息處理。



| 訊息                  | 處理已執行                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|--------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **WM \_ 字元**             | 搜尋以指定字元開頭的清單視圖專案，如果找到該專案，則選取並將焦點設定至專案。 在逾時間隔內收到多個要串連的字元（目前已固定一秒），而且清單視圖控制項會搜尋以產生的字串開頭的專案。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **WM \_ 命令**          | 處理 [en \_ UPDATE](en-update.md) 和 [en \_ KILLFOCUS](en-killfocus.md) 通知代碼，並將所有其他編輯控制項通知轉送至父視窗。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| **WM \_ 建立**           | 對 [**WM \_ NCCREATE**](/windows/desktop/winmsg/wm-nccreate)執行額外的初始化。 如果未指定 [**lvs) \_ SHAREIMAGELISTS**](list-view-window-styles.md) 視窗樣式，則清單視圖控制項會在此時建立圖示和小型圖示影像清單。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **WM 損 \_ 毀**          | 釋出在 [**WM \_ 建立**](/windows/desktop/winmsg/wm-create)期間配置的資源。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **WM \_ ERASEBKGND**       | 使用清單視圖控制項目前的背景色彩，清除視窗背景。 如果背景色彩為 [CLR \_ 無] 值，則清單視圖控制項會將訊息轉送至父視窗。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **WM \_ GETDLGCODE**       | 傳回 DLGC \_ WANTTAB 和 DLGC WANTARROWS 值的組合 \_ 。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| **WM \_ GETFONT**          | 傳回目前標籤字型的控制碼。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| **WM \_ HSCROLL**          | 水準滾動清單視圖控制項。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **WM \_ KEYDOWN**          | 處理空格鍵、ENTER 和箭號，並將 [LVN \_ KEYDOWN](lvn-keydown.md) 通知程式碼傳送至父視窗。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| **WM \_ KILLFOCUS**        | 重新繪製焦點清單專案（如果有的話），並將 [NM \_ KILLFOCUS](nm-killfocus.md) 通知程式碼傳送至父視窗。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| **WM \_ LBUTTONDBLCLK**    | 以 [NM \_ DBLCLK (清單視圖 ](nm-dblclk-list-view.md) 的形式傳送父視窗) 通知碼。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| **WM \_ LBUTTONDOWN**      | 以不同的方式處理，視是否正在起始按一下或拖曳操作而定。 為了判斷牽涉到的作業，清單視圖控制項會進入強制回應訊息迴圈，直到按鈕放開或移動滑鼠為止。 如果按一下，清單視圖控制項可能會變更哪個專案具有焦點，以及要選取哪些專案、將游標位置納入考慮、SHIFT 和 CTRL 鍵的狀態等等。 然後，清單視圖控制項會傳送其父視窗，即 [NM \_ CLICK (清單視圖) ](nm-click-list-view.md) 通知碼。<br/> 如果從專案開始拖曳，清單視圖控制項會選取焦點，並將焦點設定至專案。 然後，它會將 [LVN \_ BEGINDRAG](lvn-begindrag.md) 通知程式碼傳送至父視窗。 父視窗負責實際執行拖曳作業。<br/> 如果從視窗背景拖曳開始，則清單視圖控制項會進入另一個強制回應的訊息迴圈，讓使用者藉由拖曳滑鼠來形成矩形。 選取矩形內的專案。<br/> |
| **WM \_ NCCREATE**         | 配置並初始化內部資料結構，然後呼叫 [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) 函數。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **WM \_ NCDESTROY**        | 釋放由清單視圖控制項配置的資源。 除非使用 [**lvs) \_ SHAREIMAGELISTS**](list-view-window-styles.md) 樣式，這包括刪除完整大小和小型影像清單。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **WM \_ 通知**           | 處理標題控制項通知碼。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **WM \_ 油漆**            | 顯示更新區域中的任何專案。 針對回呼專案，控制項會先將 [LVN \_ GETDISPINFO](lvn-getdispinfo.md) 通知程式碼傳送至主控視窗，以要求顯示資訊。 如果 *wParam* 參數不是 Null，則控制項會假設值為 HDC，並且使用該裝置內容繪製。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| **WM \_ RBUTTONDOWN**      | 其處理方式與 [**WM \_ LBUTTONDOWN**](/windows/desktop/inputdev/wm-lbuttondown) 訊息相同，不同之處在于控制項傳送了 [nm \_ RCLICK (清單)](nm-rclick-list-view.md) 通知碼 (而不是 [) \_ 按一下 (清單視圖)](nm-click-list-view.md) (和 [LVN \_ BEGINRDRAG](lvn-beginrdrag.md) 通知碼) ，而不是 [LVN \_ BEGINDRAG](lvn-begindrag.md) 。 請注意，此控制項會處理對應的 [**WM \_ RBUTTONUP**](/windows/desktop/inputdev/wm-rbuttonup) 訊息，而不會將其分派。 如此一來，應用程式就無法看到這個訊息，即使是子類別化控制項也一樣。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **WM \_ SETFOCUS**         | 重新繪製焦點清單專案（如果有的話），並將 [NM \_ SETFOCUS](nm-setfocus.md) 的通知程式碼傳送至父視窗。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **WM \_ SETFONT**          | 儲存指定的字型控制碼、將訊息轉送至頁首視窗（如果有的話），然後使用新字型重新繪製。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **WM \_ SETREDRAW**        | 開啟或關閉重繪。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| **WM \_ 計時器**            | 開始編輯專案標籤。 如果使用者按一下焦點專案的標籤，清單視圖控制項會設定計時器，而不是立即進入編輯模式。 如果使用者按兩下標籤，計時器可以讓清單視圖控制項 *不* 進入編輯模式。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **WM \_ VSCROLL**          | 垂直捲動清單視圖控制項。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **WM \_ WINDOWPOSCHANGED** | 更新視窗捲軸。 如果目前的視圖是圖示或小型圖示視圖，而且指定了 [**lvs) \_ AUTOARRANGE**](list-view-window-styles.md) 樣式，則清單視圖控制項也會排列清單專案。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| **WM \_ WININICHANGE**     | 處理系統計量的變更。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |



 

 

