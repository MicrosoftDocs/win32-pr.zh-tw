---
title: 遊戲的安裝與維護
description: 本文說明一組最佳作法，可協助降低使用者對安裝遊戲所需時間的挫折、防止不必要的支援電話，並讓使用者能夠快速且輕鬆地開始玩遊戲。
ms.assetid: c953165d-2318-ca06-a895-abedcbcb594c
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: de171fd76654eb3b6edb8818ec073c4ef5ba8ca4
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/20/2020
ms.locfileid: "104316375"
---
# <a name="installation-and-maintenance-of-games"></a><span data-ttu-id="5620c-103">遊戲的安裝與維護</span><span class="sxs-lookup"><span data-stu-id="5620c-103">Installation and Maintenance of Games</span></span>

<span data-ttu-id="5620c-104">本文說明一組最佳作法，可協助降低使用者對安裝遊戲所需時間的挫折、防止不必要的支援電話，並讓使用者能夠快速且輕鬆地開始玩遊戲。</span><span class="sxs-lookup"><span data-stu-id="5620c-104">This article describes a set of best practices that can help reduce user frustration about the time required to install a game, prevent unnecessary support calls, and allow users to start playing your game as quickly and painlessly as possible.</span></span>

-   [<span data-ttu-id="5620c-105">初始安裝</span><span class="sxs-lookup"><span data-stu-id="5620c-105">Initial Installation</span></span>](#initial-installation)
    -   [<span data-ttu-id="5620c-106">簡化安裝 UI</span><span class="sxs-lookup"><span data-stu-id="5620c-106">Streamlining the Installation UI</span></span>](#streamlining-the-installation-ui)
    -   [<span data-ttu-id="5620c-107">縮短安裝所需的時間</span><span class="sxs-lookup"><span data-stu-id="5620c-107">Reducing the Time Required for Installation</span></span>](#reducing-the-time-required-for-installation)
    -   [<span data-ttu-id="5620c-108">基本安裝</span><span class="sxs-lookup"><span data-stu-id="5620c-108">Minimal Installation</span></span>](#minimal-installation)
    -   [<span data-ttu-id="5620c-109">隨選安裝</span><span class="sxs-lookup"><span data-stu-id="5620c-109">Install on Demand</span></span>](#install-on-demand)
-   [<span data-ttu-id="5620c-110">安裝後遊戲-Play</span><span class="sxs-lookup"><span data-stu-id="5620c-110">Post-Installation Game-Play</span></span>](#post-installation-game-play)
    -   [<span data-ttu-id="5620c-111">自動</span><span class="sxs-lookup"><span data-stu-id="5620c-111">AutoRun</span></span>](#autorun)
    -   [<span data-ttu-id="5620c-112">將安裝隨選安裝轉換成完整安裝</span><span class="sxs-lookup"><span data-stu-id="5620c-112">Converting an Install-on-Demand Installation to a Full Installation</span></span>](#converting-an-install-on-demand-installation-to-a-full-installation)
    -   [<span data-ttu-id="5620c-113">遊戲軟體和內容的維護</span><span class="sxs-lookup"><span data-stu-id="5620c-113">Maintenance of Game Software and Content</span></span>](#maintenance-of-game-software-and-content)
    -   [<span data-ttu-id="5620c-114">自動檢查更新</span><span class="sxs-lookup"><span data-stu-id="5620c-114">Checking for Updates Automatically</span></span>](#checking-for-updates-automatically)
    -   [<span data-ttu-id="5620c-115">自動下載修補程式</span><span class="sxs-lookup"><span data-stu-id="5620c-115">Downloading Patches Automatically</span></span>](#downloading-patches-automatically)
-   [<span data-ttu-id="5620c-116">其他資源</span><span class="sxs-lookup"><span data-stu-id="5620c-116">Other Resources</span></span>](#other-resources)
-   [<span data-ttu-id="5620c-117">相關主題</span><span class="sxs-lookup"><span data-stu-id="5620c-117">Related topics</span></span>](#related-topics)

## <a name="initial-installation"></a><span data-ttu-id="5620c-118">初始安裝</span><span class="sxs-lookup"><span data-stu-id="5620c-118">Initial Installation</span></span>

<span data-ttu-id="5620c-119">使用者購買遊戲是因為他們喜歡玩遊戲，而不是因為他們喜歡安裝遊戲。</span><span class="sxs-lookup"><span data-stu-id="5620c-119">Users buy games because they enjoy playing them, not because they enjoy installing them.</span></span> <span data-ttu-id="5620c-120">安裝遊戲應該是快速、直接的，且盡可能讓終端使用者更輕鬆。</span><span class="sxs-lookup"><span data-stu-id="5620c-120">Installing a game should be as quick, straightforward, and as painless as possible for the end user.</span></span> <span data-ttu-id="5620c-121">在理想的情況下，終端使用者甚至不應該看到安裝 UI;他們應該只要把遊戲光碟放入紙匣，就可以開始播放了。</span><span class="sxs-lookup"><span data-stu-id="5620c-121">Ideally, end users should not even see an installation UI; they should be able to just drop the game disc into the tray and begin playing.</span></span>

### <a name="streamlining-the-installation-ui"></a><span data-ttu-id="5620c-122">簡化安裝 UI</span><span class="sxs-lookup"><span data-stu-id="5620c-122">Streamlining the Installation UI</span></span>

<span data-ttu-id="5620c-123">現有遊戲安裝 Ui 的常見層面會干擾所需的終端使用者體驗：</span><span class="sxs-lookup"><span data-stu-id="5620c-123">Common aspects of existing game installation UIs interfere with the desired end-user experience:</span></span>

-   <span data-ttu-id="5620c-124">詢問使用者不必要的問題。</span><span class="sxs-lookup"><span data-stu-id="5620c-124">Asking the user unnecessary questions.</span></span>

    <span data-ttu-id="5620c-125">例如，許多遊戲會詢問使用者是否要安裝 DirectX。</span><span class="sxs-lookup"><span data-stu-id="5620c-125">For example, many games ask if the user wants to install DirectX.</span></span> <span data-ttu-id="5620c-126">如果遊戲需要執行 Microsoft DirectX，且尚未安裝正確版本的 DirectX，則遊戲應該只安裝 DirectX。</span><span class="sxs-lookup"><span data-stu-id="5620c-126">If the game requires Microsoft DirectX to run, and the right version of DirectX isn't installed already, the game should simply install DirectX.</span></span>

-   <span data-ttu-id="5620c-127">詢問使用者問題，大部分的使用者都會以相同的方式回答這些問題。</span><span class="sxs-lookup"><span data-stu-id="5620c-127">Asking the user questions that a vast majority of users will answer in the same way.</span></span>

    <span data-ttu-id="5620c-128">若是一般使用者，安裝路徑、[開始] 功能表位置等的預設設定全都沒問題。</span><span class="sxs-lookup"><span data-stu-id="5620c-128">For typical users, the default settings for installation path, Start menu location, and so on, are all fine.</span></span> <span data-ttu-id="5620c-129">為想要變更這些設定的使用者提供先進的選項。</span><span class="sxs-lookup"><span data-stu-id="5620c-129">Offer advanced options for users who want to change these settings.</span></span>

<span data-ttu-id="5620c-130">安裝 UI 的設計目的，是要讓一般使用者能夠儘快開始玩遊戲。</span><span class="sxs-lookup"><span data-stu-id="5620c-130">The installation UI should be designed to allow the typical user to begin playing the game as soon as possible.</span></span> <span data-ttu-id="5620c-131">如果使用者電腦上已啟用自動啟動功能（預設值），安裝程式應該假設使用者想要儘快播放遊戲，略過任何不必要的問題。</span><span class="sxs-lookup"><span data-stu-id="5620c-131">If AutoRun is enabled on the user's computer, which is the default, the setup program should assume that the user wants to be playing the game as soon as possible, bypassing any unnecessary questions.</span></span> <span data-ttu-id="5620c-132">安裝 progra[隨選安裝](#install-on-demand)m 應該會開始將遊戲安裝到預設安裝路徑，最好是使用如中所述的安裝程式。</span><span class="sxs-lookup"><span data-stu-id="5620c-132">The setup progra[Install on Demand](#install-on-demand)m should begin installing the game to the default installation path, preferably using a setup like that described in .</span></span> <span data-ttu-id="5620c-133">讓使用者有機會在自動開始安裝之前變更安裝設定。</span><span class="sxs-lookup"><span data-stu-id="5620c-133">It is appropriate to give users a chance to change the installation settings before automatically starting the installation.</span></span> <span data-ttu-id="5620c-134">不過，若要完成此動作，請提示使用者按下按鍵以取得 advanced 安裝選項，如果使用者未在五到十秒內達到該索引鍵，則會以預設選項自動繼續。</span><span class="sxs-lookup"><span data-stu-id="5620c-134">However, this should be accomplished by prompting the user to hit a key for advanced setup options, and then proceeding automatically with the default options if the user does not hit that key within five to ten seconds.</span></span>

<span data-ttu-id="5620c-135">如果使用者的電腦上未啟用自動執行功能，安裝程式應該假設使用者不希望安裝程式自動開始安裝遊戲。</span><span class="sxs-lookup"><span data-stu-id="5620c-135">If AutoRun is not enabled on the user's computer, the setup program should assume that the user does not want the setup program to begin installing the game automatically.</span></span> <span data-ttu-id="5620c-136">如果安裝程式是以非自動執行時間以外的方式啟動，它應該會啟動 advanced 安裝程式 UI。</span><span class="sxs-lookup"><span data-stu-id="5620c-136">If the setup program is started by some means other than AutoRun, it should launch the advanced setup UI.</span></span>

### <a name="reducing-the-time-required-for-installation"></a><span data-ttu-id="5620c-137">縮短安裝所需的時間</span><span class="sxs-lookup"><span data-stu-id="5620c-137">Reducing the Time Required for Installation</span></span>

<span data-ttu-id="5620c-138">現今大部分的 Microsoft Windows 遊戲都需要五分鐘到半小時的時間，才能完成安裝程式。</span><span class="sxs-lookup"><span data-stu-id="5620c-138">Most Microsoft Windows games today take anywhere from five minutes to half an hour to finish the installation process.</span></span> <span data-ttu-id="5620c-139">相較之下，大部分的主控台遊戲在使用者將遊戲 CD 插入遊戲時，不會花費30秒以上的時間。</span><span class="sxs-lookup"><span data-stu-id="5620c-139">In contrast, most console games take no more than thirty seconds from the time the user inserts the game CD to the time the user can play the game.</span></span> <span data-ttu-id="5620c-140">這項差異是因為大部分的 Windows 遊戲都是設計成從電腦的硬碟執行大部分的內容（如果不是全部），如果主控台缺少可永久儲存大量內容的位置，則需要從來源媒體執行內容。</span><span class="sxs-lookup"><span data-stu-id="5620c-140">This difference is due to the fact that most Windows games are designed to run most, if not all, of their content from the computer's hard drive; consoles, which lack a place to permanently store large amounts of content, require that the content be run from the source media.</span></span> <span data-ttu-id="5620c-141">從本機硬碟載入內容時，可加快遊戲的載入時間，缺點是所有內容都必須在某個時間點從源媒體複製到硬碟。</span><span class="sxs-lookup"><span data-stu-id="5620c-141">While loading content from the local hard drive makes for faster in-game load times, the downside is that all of that content has to be copied from the source media to the hard drive at some point.</span></span> <span data-ttu-id="5620c-142">大部分的 Windows 遊戲都選擇在安裝過程中，一次將所有內容複寫到硬碟上。</span><span class="sxs-lookup"><span data-stu-id="5620c-142">Most Windows games choose to copy all of the content to the hard drive all at once, as part of an installation process.</span></span> <span data-ttu-id="5620c-143">這會使由使用者的遊戲初始體驗，讓使用者在玩遊戲之前，先觀賞幾分鐘的進度列。</span><span class="sxs-lookup"><span data-stu-id="5620c-143">This detracts from the user's initial experience with the game by making the user watch a progress bar for several minutes before being able to play the game.</span></span>

<span data-ttu-id="5620c-144">有兩種方法可用來將最初安裝遊戲所花費的時間降到最低： [最少安裝](#minimal-installation) 並 [隨選安裝](#install-on-demand)。</span><span class="sxs-lookup"><span data-stu-id="5620c-144">There are two approaches that can be used to minimize the time spent initially installing the game: [Minimal Installation](#minimal-installation) and [Install on Demand](#install-on-demand).</span></span>

### <a name="minimal-installation"></a><span data-ttu-id="5620c-145">基本安裝</span><span class="sxs-lookup"><span data-stu-id="5620c-145">Minimal Installation</span></span>

<span data-ttu-id="5620c-146">在最小的安裝案例中，遊戲只會在硬碟上安裝最小的一組內容。</span><span class="sxs-lookup"><span data-stu-id="5620c-146">In a minimal installation scenario, the game installs only a bare minimum set of content to the hard drive.</span></span> <span data-ttu-id="5620c-147">這通常只包含遊戲可執行檔和 Dll。</span><span class="sxs-lookup"><span data-stu-id="5620c-147">Usually, this consists of only the game executable and DLLs.</span></span> <span data-ttu-id="5620c-148">內容的其餘部分則是直接從來源媒體存取。</span><span class="sxs-lookup"><span data-stu-id="5620c-148">The remainder of the content is accessed directly from the source media.</span></span> <span data-ttu-id="5620c-149">這可大幅縮短安裝所需的時間，因為遊戲的可執行檔很少會超過 10-20 MB。</span><span class="sxs-lookup"><span data-stu-id="5620c-149">This drastically reduces the time required to install, since a game's executable is rarely larger than 10-20 MB.</span></span> <span data-ttu-id="5620c-150">缺點是遊戲需要較長的時間才能在遊戲中載入內容，因為它必須從較慢的來源媒體載入。</span><span class="sxs-lookup"><span data-stu-id="5620c-150">The drawback is that the game takes longer to load content during the game, since it must load it from the slower source media.</span></span>

<span data-ttu-id="5620c-151">若要在以 Windows Installer 為基礎的安裝程式中建立基本安裝設定：</span><span class="sxs-lookup"><span data-stu-id="5620c-151">To create a minimal installation configuration in a Windows Installer-based setup:</span></span>

-   <span data-ttu-id="5620c-152">將安裝至硬碟的所有元件組成標示為在本機安裝的功能。</span><span class="sxs-lookup"><span data-stu-id="5620c-152">Group all of the components to be installed to the hard drive into a feature that is marked to install locally.</span></span>

    <span data-ttu-id="5620c-153">這項功能將稱為「啟動程式」功能。</span><span class="sxs-lookup"><span data-stu-id="5620c-153">This feature will be referred to as the "Bootstrap" feature.</span></span>

-   <span data-ttu-id="5620c-154">將從來源媒體執行的所有元件，組成標示為「從來源執行」的功能。</span><span class="sxs-lookup"><span data-stu-id="5620c-154">Group all of the components that are to be run from the source media into a feature that is marked as "run from source."</span></span>
-   <span data-ttu-id="5620c-155">開啟可能位於來源媒體的檔案時，請使用 [**MsiGetComponentPath**](/windows/desktop/api/msi/nf-msi-msigetcomponentpatha) 函式來判斷檔案的路徑，而不是硬式編碼路徑。</span><span class="sxs-lookup"><span data-stu-id="5620c-155">When opening a file that might be on the source media, use the [**MsiGetComponentPath**](/windows/desktop/api/msi/nf-msi-msigetcomponentpatha) function to determine the path to the file, instead of hard-coding the path.</span></span>

    <span data-ttu-id="5620c-156">這樣做可確保即使使用者的 CD/DVD 磁片磁碟機的磁碟機號有所變更，也可以找到該檔案。</span><span class="sxs-lookup"><span data-stu-id="5620c-156">Doing so ensures that the file can be found even if the drive letter of the user's CD/DVD drive changes.</span></span>

-   <span data-ttu-id="5620c-157">壓縮保留在 CD/DVD 上的內容。</span><span class="sxs-lookup"><span data-stu-id="5620c-157">Compress content that stays on the CD/DVD.</span></span>

    <span data-ttu-id="5620c-158">用來解壓縮內容的 CPU 時間量通常會因 CD/DVD 磁片磁碟機的資料傳送速率緩慢而隱藏。</span><span class="sxs-lookup"><span data-stu-id="5620c-158">The amount of CPU time spent decompressing the content will usually be hidden by the slow transfer rate of data from the CD/DVD drive.</span></span>

-   <span data-ttu-id="5620c-159">將內容分組成大型、連續的檔案，並依序存取。</span><span class="sxs-lookup"><span data-stu-id="5620c-159">Group content into large, contiguous files and access it in sequential order.</span></span>

    <span data-ttu-id="5620c-160">CD/DVD 光碟機的搜尋時間與硬碟的 abysmal 相比，大部分的 CD/DVD 磁片磁碟機都不會達到尖峰傳輸速率，除非它們正在讀取大型的連續檔案。</span><span class="sxs-lookup"><span data-stu-id="5620c-160">The seek times of CD/DVD drives are abysmal compared to those of hard drives, and most CD/DVD drives don't reach peak transfer rates unless they are reading a large, contiguous file.</span></span>

-   <span data-ttu-id="5620c-161">依照可能存取的順序，在 CD/DVD 上配置內容。</span><span class="sxs-lookup"><span data-stu-id="5620c-161">Lay out content on the CD/DVD in the order that it is likely to be accessed.</span></span>

    <span data-ttu-id="5620c-162">以與磁片上配置相同的順序存取檔案時，搜尋時間會大幅降低。</span><span class="sxs-lookup"><span data-stu-id="5620c-162">Seek times are greatly reduced when files are accessed in the same order as their on-disk layout.</span></span>

### <a name="install-on-demand"></a><span data-ttu-id="5620c-163">隨選安裝</span><span class="sxs-lookup"><span data-stu-id="5620c-163">Install on Demand</span></span>

<span data-ttu-id="5620c-164">在隨選安裝的案例中，只是為了進行最基本的安裝，遊戲一開始只會在硬碟上安裝啟動遊戲所需的檔案。</span><span class="sxs-lookup"><span data-stu-id="5620c-164">In an install-on-demand scenario, as for minimal installation, the game initially installs to the hard drive only those files necessary to start the game.</span></span> <span data-ttu-id="5620c-165">不過，在每次需要時，它不會從來源媒體存取剩餘的內容，而是在每次需要時，將每個內容都安裝在硬碟上，然後在每次後續使用時從本機硬碟存取該內容。</span><span class="sxs-lookup"><span data-stu-id="5620c-165">However, instead of accessing the remaining content from the source media every time it is needed, the game actually installs each piece of content to the hard drive as it is needed for the first time, and then accesses it from the local hard drive on each subsequent use.</span></span> <span data-ttu-id="5620c-166">初始安裝所需的時間與最小的安裝所需的時間一樣小，但在第一次存取每個內容之後，載入時間也會改善。</span><span class="sxs-lookup"><span data-stu-id="5620c-166">The time required for the initial installation is just as small as in for a minimal installation, but after the first time that each piece of content is accessed, the load times improve.</span></span>

<span data-ttu-id="5620c-167">若要在以 Windows Installer 為基礎的安裝程式中建立隨選安裝：</span><span class="sxs-lookup"><span data-stu-id="5620c-167">To create an install-on-demand configuration in a Windows Installer-based setup:</span></span>

-   <span data-ttu-id="5620c-168">將一開始安裝至硬碟的所有元件，組成標示為在本機安裝的功能。</span><span class="sxs-lookup"><span data-stu-id="5620c-168">Group all of the components to be initially installed to the hard drive into a feature that is marked to install locally.</span></span>

    <span data-ttu-id="5620c-169">請注意，這與最基本安裝的啟動程式功能完全相同。</span><span class="sxs-lookup"><span data-stu-id="5620c-169">Note that this is identical to the Bootstrap feature for a minimal installation.</span></span>

-   <span data-ttu-id="5620c-170">根據可能一起使用的元件，將其餘內容分組為多個功能。</span><span class="sxs-lookup"><span data-stu-id="5620c-170">Group the remaining content into multiple features based on components likely to be used together.</span></span>

    <span data-ttu-id="5620c-171">例如，在以層級為基礎的遊戲中，將指定層級上所使用的所有內容群組為一個功能。</span><span class="sxs-lookup"><span data-stu-id="5620c-171">For example, in a level-based game, group all the content used on a given level into one feature.</span></span> <span data-ttu-id="5620c-172">請注意，Windows Installer 可讓多個功能共用元件，因此，如果您有用於多個層級的內容，您可以將該內容新增至所有必要層級的功能，而不需複寫內容。</span><span class="sxs-lookup"><span data-stu-id="5620c-172">Note that Windows Installer allows a component to be shared by multiple features, so if you have content that is used on multiple levels, you can add that content to the features for all of the necessary levels without replicating the content.</span></span> <span data-ttu-id="5620c-173">所有這些功能都應標示為「已公告」，這表示它們一開始不會安裝，但可以在稍後視需要安裝。</span><span class="sxs-lookup"><span data-stu-id="5620c-173">All of these features should be marked as "Advertised", which means that they won't be installed initially, but can be installed later as needed.</span></span>

-   <span data-ttu-id="5620c-174">需要檔案時，請先使用函式 [**MsiQueryFeatureState**](/windows/desktop/api/msi/nf-msi-msiqueryfeaturestatea)來檢查是否已安裝檔案。</span><span class="sxs-lookup"><span data-stu-id="5620c-174">When a file is needed, first check whether the file is already installed using the function [**MsiQueryFeatureState**](/windows/desktop/api/msi/nf-msi-msiqueryfeaturestatea).</span></span>

    <span data-ttu-id="5620c-175">如果尚未安裝 (也就是它的狀態是 INSTALLSTATE \_ 通告) ，請呼叫函式 [**MsiConfigureFeature**](/windows/desktop/api/msi/nf-msi-msiconfigurefeaturea) ，以在本機安裝此功能。</span><span class="sxs-lookup"><span data-stu-id="5620c-175">If it is not yet installed (that is, its state is INSTALLSTATE\_ADVERTISED), call the function [**MsiConfigureFeature**](/windows/desktop/api/msi/nf-msi-msiconfigurefeaturea) to install the feature locally.</span></span> <span data-ttu-id="5620c-176">在檔案安裝之後開啟檔案時，請呼叫 [**MsiGetComponentPath**](/windows/desktop/api/msi/nf-msi-msigetcomponentpatha) 來判斷檔案的路徑。</span><span class="sxs-lookup"><span data-stu-id="5620c-176">When opening the file after it is installed, call [**MsiGetComponentPath**](/windows/desktop/api/msi/nf-msi-msigetcomponentpatha) to determine the path to the file.</span></span> <span data-ttu-id="5620c-177">雖然這種情況並不是絕對必要 (因為內容一律會先安裝到硬碟上，才能) ，因此除了安裝隨選安裝之外，還可讓您更輕鬆地支援最少量的安裝。</span><span class="sxs-lookup"><span data-stu-id="5620c-177">While not strictly necessary for this scenario (since the content will always be installed to the hard drive before it is used), this makes it easier to support minimal installation in addition to installation on demand.</span></span>

-   <span data-ttu-id="5620c-178">可能的話，請預期很快就會需要什麼內容，並在閒置時間于背景安裝。</span><span class="sxs-lookup"><span data-stu-id="5620c-178">If possible, anticipate what content is likely to be needed soon, and install it in the background during idle time.</span></span>

    <span data-ttu-id="5620c-179">當遊戲的時間點不需要電腦的每個上一盎司效能時，最適合使用背景安裝;例如，顯示簡介影片、剪下場景、功能表等等。</span><span class="sxs-lookup"><span data-stu-id="5620c-179">Background installation is most appropriate when the game is at a point that doesn't need every last ounce of performance out of the computer; for example, while displaying an intro movie, cut-scene, menu, and so on.</span></span>

-   <span data-ttu-id="5620c-180">在遊戲的 [選項] 功能表中建立選項，以強制安裝所有剩餘的內容。</span><span class="sxs-lookup"><span data-stu-id="5620c-180">Create an option in the game's options menu to force installation of all remaining content.</span></span>

    <span data-ttu-id="5620c-181">若要執行這項操作，請建立一個功能，此功能是所有隨選安裝功能的父系，然後呼叫 [**MsiConfigureFeature**](/windows/desktop/api/msi/nf-msi-msiconfigurefeaturea) 在本機安裝此主要功能。</span><span class="sxs-lookup"><span data-stu-id="5620c-181">To implement this, create a feature that is a parent of all of the install-on-demand features, and then call [**MsiConfigureFeature**](/windows/desktop/api/msi/nf-msi-msiconfigurefeaturea) to install this master feature locally.</span></span> <span data-ttu-id="5620c-182">這會導致子功能也會安裝在本機。</span><span class="sxs-lookup"><span data-stu-id="5620c-182">This will cause the subfeatures to be installed locally as well.</span></span>

-   <span data-ttu-id="5620c-183">內容版面配置應該類似于最基本的安裝，不同之處在于內容應該只與可能同時需要的其他內容一起叢集 (例如，一個層級的所有內容都應該一起) 。</span><span class="sxs-lookup"><span data-stu-id="5620c-183">Content layout should be similar to that for a minimal installation, except that content should be clustered only with other content that is likely to be needed at the same time (for example, all of the content for one level should be together).</span></span>

## <a name="post-installation-game-play"></a><span data-ttu-id="5620c-184">後續安裝 Game-Play</span><span class="sxs-lookup"><span data-stu-id="5620c-184">Post-Installation Game-Play</span></span>

### <a name="autorun"></a><span data-ttu-id="5620c-185">自動</span><span class="sxs-lookup"><span data-stu-id="5620c-185">AutoRun</span></span>

<span data-ttu-id="5620c-186">若要播放已安裝的遊戲，使用者只需要在磁片磁碟機紙匣中放置安裝光碟。</span><span class="sxs-lookup"><span data-stu-id="5620c-186">To play a game that is already installed, the user should only need to drop the installation disc in the drive tray.</span></span> <span data-ttu-id="5620c-187">光碟上自動執行可執行檔的第一件事，就是檢查遊戲是否已安裝，如果是，請啟動遊戲。</span><span class="sxs-lookup"><span data-stu-id="5620c-187">The first thing that the AutoRun executable on the disc should do is to check to see if the game has already been installed, and if so, launch the game.</span></span> <span data-ttu-id="5620c-188">假設遊戲是使用以 Windows Installer 為基礎的安裝程式來安裝，則會透過單一呼叫函式 [**MsiQueryProductState**](/windows/desktop/api/msi/nf-msi-msiqueryproductstatea)來判斷是否已安裝遊戲。</span><span class="sxs-lookup"><span data-stu-id="5620c-188">Assuming that the game was installed using a Windows Installer-based setup, the check to determine if the game is installed can be accomplished with a single call to the function [**MsiQueryProductState**](/windows/desktop/api/msi/nf-msi-msiqueryproductstatea).</span></span>

### <a name="converting-an-install-on-demand-installation-to-a-full-installation"></a><span data-ttu-id="5620c-189">將安裝隨選安裝轉換成完整安裝</span><span class="sxs-lookup"><span data-stu-id="5620c-189">Converting an Install-on-Demand Installation to a Full Installation</span></span>

<span data-ttu-id="5620c-190">當安裝隨選安裝讓使用者可以比完整安裝更快地開始播放遊戲時，使用者可能會想要將其餘的遊戲內容明確地安裝到本機硬碟上。</span><span class="sxs-lookup"><span data-stu-id="5620c-190">While an install-on-demand installation allows the user to begin playing the game much sooner than a full installation, a user may want to explicitly install the remainder of the game content to the local hard drive.</span></span> <span data-ttu-id="5620c-191">使用者可能想要能夠在不需要來源媒體的情況下播放遊戲，或可能只是想要避免因隨選內容安裝所導致的遊戲時間較長的載入時間。</span><span class="sxs-lookup"><span data-stu-id="5620c-191">The user may want to be able to play the game without requiring the source media, or he or she may simply want to avoid the longer in-game load times that result from installing content on demand.</span></span> <span data-ttu-id="5620c-192">如果遊戲的設定使用 Windows Installer，遊戲可在遊戲中選項 UI 提供選項，以完成安裝其餘內容。</span><span class="sxs-lookup"><span data-stu-id="5620c-192">If the game's setup uses Windows Installer, the game can provide an option in the in-game options UI to finish installing the remaining content.</span></span> <span data-ttu-id="5620c-193">當使用者選取此選項時，遊戲可以呼叫 [**MsiConfigureFeature**](/windows/desktop/api/msi/nf-msi-msiconfigurefeaturea) 來強制在本機安裝其餘的功能;不需要產生個別的安裝應用程式來這麼做。</span><span class="sxs-lookup"><span data-stu-id="5620c-193">When the user selects this option, the game can call [**MsiConfigureFeature**](/windows/desktop/api/msi/nf-msi-msiconfigurefeaturea) to force the remaining features to be installed locally; there is no need to spawn a separate setup application to do so.</span></span>

### <a name="maintenance-of-game-software-and-content"></a><span data-ttu-id="5620c-194">遊戲軟體和內容的維護</span><span class="sxs-lookup"><span data-stu-id="5620c-194">Maintenance of Game Software and Content</span></span>

<span data-ttu-id="5620c-195">Windows 遊戲的主控台遊戲有一項優點，就是發行者可以在初始發行之後，將更新發行至遊戲的相對便利性。</span><span class="sxs-lookup"><span data-stu-id="5620c-195">One of the advantages that Windows games have over console games is the relative ease with which the publisher can release updates to the game after its initial release.</span></span> <span data-ttu-id="5620c-196">無論這些更新是否會導入新的內容，或只是修正錯誤，請務必盡可能讓終端使用者的更新程式更簡單。</span><span class="sxs-lookup"><span data-stu-id="5620c-196">Whether these updates introduce new content or just fix bugs, it is important to make the update process as easy as possible for the end user.</span></span> <span data-ttu-id="5620c-197">對於線上遊戲來說，更新程式更重要，因為這通常需要所有使用者執行最新版本的遊戲才能連接。</span><span class="sxs-lookup"><span data-stu-id="5620c-197">The update process is even more important for online games, which typically require that all users are running the latest version of the game in order to connect.</span></span>

### <a name="checking-for-updates-automatically"></a><span data-ttu-id="5620c-198">自動檢查更新</span><span class="sxs-lookup"><span data-stu-id="5620c-198">Checking for Updates Automatically</span></span>

<span data-ttu-id="5620c-199">使用者不一定要記得尋找修補程式。</span><span class="sxs-lookup"><span data-stu-id="5620c-199">Users should not have to remember to go looking for patches.</span></span> <span data-ttu-id="5620c-200">如果遊戲有可用的更新，使用者應該至少收到通知，而且在理想的情況下，應該已經下載修補程式。</span><span class="sxs-lookup"><span data-stu-id="5620c-200">If there is an update available for the game, the user should at least be notified, and ideally, the patch should already be downloaded.</span></span>

<span data-ttu-id="5620c-201">檢查更新的一個簡單方式，就是使用特定的 URL 連接到發行者所裝載的 Web 服務器，並下載一個文字檔來指定最新可用版本的遊戲版本號碼，以及下載封裝以將遊戲更新至最新版本的 URL。</span><span class="sxs-lookup"><span data-stu-id="5620c-201">A simple way for a game to check for updates is to connect to a Web server hosted by the publisher using a specific URL, and download a text file that specifies the version number of the latest available version of the game, along with a URL from which to download a package that will update the game to the latest version.</span></span>

<span data-ttu-id="5620c-202">每次使用者玩遊戲時檢查更新，都足以確保使用者執行的是最新版本。</span><span class="sxs-lookup"><span data-stu-id="5620c-202">Checking for updates each time that the user plays the game is adequate to make sure that the user is running the latest version.</span></span> <span data-ttu-id="5620c-203">但是，如果在使用者嘗試播放遊戲之前立即探索到新的更新，使用者可能會被迫延遲播放遊戲，直到更新下載完成為止。</span><span class="sxs-lookup"><span data-stu-id="5620c-203">However, if the existence of a new update is discovered immediately before the user tries to play the game, the user may be forced to delay playing the game until the update has finished downloading.</span></span> <span data-ttu-id="5620c-204">針對大型更新或慢速連線，此延遲可能是以小時為單位。</span><span class="sxs-lookup"><span data-stu-id="5620c-204">For large updates or slow connections, this delay may be on the order of hours.</span></span> <span data-ttu-id="5620c-205">為了避免在播放遊戲之前強制使用者等待，遊戲可以使用工作排程器來排程定期檢查是否有新的更新。</span><span class="sxs-lookup"><span data-stu-id="5620c-205">To avoid forcing the user to wait before playing the game, the game can use Task Scheduler to schedule periodic checks for new updates.</span></span> <span data-ttu-id="5620c-206">如果偵測到更新，則遊戲可以立即開始下載更新，如此一來，當使用者下一次玩遊戲時，可能會完全下載並準備安裝。</span><span class="sxs-lookup"><span data-stu-id="5620c-206">If an update is detected, the game can begin downloading the update immediately, so that it is likely to be completely downloaded and ready to install by the next time the user plays the game.</span></span>

### <a name="downloading-patches-automatically"></a><span data-ttu-id="5620c-207">自動下載修補程式</span><span class="sxs-lookup"><span data-stu-id="5620c-207">Downloading Patches Automatically</span></span>

<span data-ttu-id="5620c-208">一旦遊戲偵測到有新的更新可供使用，就應該立即開始下載更新。</span><span class="sxs-lookup"><span data-stu-id="5620c-208">Once the game has detected that a new update is available, it should immediately begin downloading the update.</span></span> <span data-ttu-id="5620c-209">因為檢查更新的工作通常會在背景以無訊息模式執行，所以下載必須盡可能不顯眼。</span><span class="sxs-lookup"><span data-stu-id="5620c-209">Since the task that checks for updates is typically running silently in the background, the download needs to be as unobtrusive as possible.</span></span> <span data-ttu-id="5620c-210">背景智慧型傳送服務 (位) 是一種作業系統功能，可讓應用程式即使在應用程式本身未執行的情況下，也可以從網際網路下載檔案。</span><span class="sxs-lookup"><span data-stu-id="5620c-210">The Background Intelligent Transfer Service (BITS) is an operating system feature that allows applications to download files from the Internet even while the application itself is not running.</span></span> <span data-ttu-id="5620c-211">BITS 下載作業只會在使用者登入時執行，而且只有在電腦已連線到網路時才會執行。</span><span class="sxs-lookup"><span data-stu-id="5620c-211">BITS download jobs run only when the user is logged on, and only when the machine is already connected to the network.</span></span> <span data-ttu-id="5620c-212">BITS 不會嘗試強制電腦自行連接到網路。</span><span class="sxs-lookup"><span data-stu-id="5620c-212">BITS will not attempt to force the machine to connect to the network on its own.</span></span> <span data-ttu-id="5620c-213">如果使用者從網路中斷連線或登出，BITS 工作會暫停，並會在使用者下次登入並聯機到網路時繼續下載。</span><span class="sxs-lookup"><span data-stu-id="5620c-213">If the user disconnects from the network, or logs off, the BITS job is paused, and will resume downloading the next time the user logs in and connects to the network.</span></span> <span data-ttu-id="5620c-214">應用程式可將其 BITS 作業設定為僅使用其他會保持未使用的網路頻寬，以防止工作影響可能使用 (網路的任何其他應用程式的效能，例如，線上遊戲) 。</span><span class="sxs-lookup"><span data-stu-id="5620c-214">The application can configure its BITS jobs to use only network bandwidth that would otherwise remain unused, in order to prevent the job from impacting the performance of any other applications that might be using the network (for example, an online game).</span></span> <span data-ttu-id="5620c-215">BITS 可在 Windows XP 與 Windows 2000 Service Pack 3 上取得。</span><span class="sxs-lookup"><span data-stu-id="5620c-215">BITS is available on Windows XP and Windows 2000 Service Pack 3.</span></span>

## <a name="other-resources"></a><span data-ttu-id="5620c-216">其他資源</span><span class="sxs-lookup"><span data-stu-id="5620c-216">Other Resources</span></span>

<span data-ttu-id="5620c-217">如需本文所參考技術的詳細資訊，請參閱 MSDN Library 的相關章節：</span><span class="sxs-lookup"><span data-stu-id="5620c-217">For more information on the technologies referenced in this article, refer to the relevant sections of the MSDN Library:</span></span>

-   [<span data-ttu-id="5620c-218">Windows Installer</span><span class="sxs-lookup"><span data-stu-id="5620c-218">Windows Installer</span></span>](/windows/desktop/Msi/windows-installer-portal)
-   [<span data-ttu-id="5620c-219">工作排程器</span><span class="sxs-lookup"><span data-stu-id="5620c-219">Task Scheduler</span></span>](/windows/desktop/TaskSchd/task-scheduler-start-page)
-   <span data-ttu-id="5620c-220">[背景智慧型傳送服務](/windows/desktop/Bits/background-intelligent-transfer-service-portal) (位) </span><span class="sxs-lookup"><span data-stu-id="5620c-220">[Background Intelligent Transfer Service](/windows/desktop/Bits/background-intelligent-transfer-service-portal) (BITS)</span></span>

<span data-ttu-id="5620c-221">如需使用遊戲 Windows Installer 的詳細資訊，請收聽下個月的《駕駛 DirectX 》專欄：「遊戲開發人員的 Windows Installer 簡介」。</span><span class="sxs-lookup"><span data-stu-id="5620c-221">For more information on using Windows Installer for games, tune in to next month's Driving DirectX column, "Introduction to Windows Installer for Game Developers."</span></span>

## <a name="related-topics"></a><span data-ttu-id="5620c-222">相關主題</span><span class="sxs-lookup"><span data-stu-id="5620c-222">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="5620c-223">**MsiConfigureFeature**</span><span class="sxs-lookup"><span data-stu-id="5620c-223">**MsiConfigureFeature**</span></span>](/windows/desktop/api/msi/nf-msi-msiconfigurefeaturea)
</dt> <dt>

[<span data-ttu-id="5620c-224">**MsiQueryProductState**</span><span class="sxs-lookup"><span data-stu-id="5620c-224">**MsiQueryProductState**</span></span>](/windows/desktop/api/msi/nf-msi-msiqueryproductstatea)
</dt> <dt>

[<span data-ttu-id="5620c-225">**MsiQueryFeatureState**</span><span class="sxs-lookup"><span data-stu-id="5620c-225">**MsiQueryFeatureState**</span></span>](/windows/desktop/api/msi/nf-msi-msiqueryfeaturestatea)
</dt> <dt>

[<span data-ttu-id="5620c-226">**MsiGetComponentPath**</span><span class="sxs-lookup"><span data-stu-id="5620c-226">**MsiGetComponentPath**</span></span>](/windows/desktop/api/msi/nf-msi-msigetcomponentpatha)
</dt> </dl>

 

 