---
Description: 記憶體保護選項如下：在記憶體中配置或保護頁面時，您必須指定下列其中一個值。 無法將保護屬性指派給頁面的一部分;只能指派給整個頁面。
ms.assetid: 09839db7-2118-4a7d-a707-a08c92bd600c
title: " (WinNT. h) 的記憶體保護常數"
ms.topic: reference
ms.custom: snippet-project
ms.date: 07/27/2020
ms.openlocfilehash: 641fab68024d9db96f50327f7c78d51f3f9bca01
ms.sourcegitcommit: c8ec1ded1ffffc364d3c4f560bb2171da0dc5040
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 03/22/2021
ms.locfileid: "106975984"
---
# <a name="memory-protection-constants"></a><span data-ttu-id="9897c-104">記憶體保護常數</span><span class="sxs-lookup"><span data-stu-id="9897c-104">Memory Protection Constants</span></span>

<span data-ttu-id="9897c-105">記憶體保護選項如下：在記憶體中配置或保護頁面時，您必須指定下列其中一個值。</span><span class="sxs-lookup"><span data-stu-id="9897c-105">The following are the memory-protection options; you must specify one of the following values when allocating or protecting a page in memory.</span></span> <span data-ttu-id="9897c-106">無法將保護屬性指派給頁面的一部分;只能指派給整個頁面。</span><span class="sxs-lookup"><span data-stu-id="9897c-106">Protection attributes cannot be assigned to a portion of a page; they can only be assigned to a whole page.</span></span>

## <a name="example"></a><span data-ttu-id="9897c-107">範例</span><span class="sxs-lookup"><span data-stu-id="9897c-107">Example</span></span>

```cpp
STDMETHODIMP CExtBuffer::FInit
    (
    ULONG cItemMax,     //@parm IN | Maximum number of items ever
    ULONG cbItem,       //@parm IN | Size of each item, in bytes
    ULONG cbPage        //@parm IN | Size of system page size (from SysInfo)
    )
{
    BYTE  *pb;

    m_cbReserved = ((cbItem *cItemMax) / cbPage + 1) *cbPage;
    m_rgItem = (BYTE *) VirtualAlloc( NULL, m_cbReserved, MEM_RESERVE, PAGE_READWRITE );

    if (m_rgItem == NULL)
        return ResultFromScode( E_OUTOFMEMORY );

    m_cbItem  = cbItem;
    m_dbAlloc = (cbItem / cbPage + 1) *cbPage;
    pb = (BYTE *) VirtualAlloc( m_rgItem, m_dbAlloc, MEM_COMMIT, PAGE_READWRITE );
    if (pb == NULL)
        {
        VirtualFree((VOID *) m_rgItem, 0, MEM_RELEASE );
        m_rgItem = NULL;
        return ResultFromScode( E_OUTOFMEMORY );
        }

    m_cbAlloc = m_dbAlloc;
    return ResultFromScode( S_OK );
}
```
<span data-ttu-id="9897c-108">從 GitHub 上的 [Windows 傳統範例](https://github.com/microsoft/Windows-classic-samples/blob/1d363ff4bd17d8e20415b92e2ee989d615cc0d91/Samples/Win7Samples/dataaccess/oledb/sampprov/extbuff.cpp) 進行範例。</span><span class="sxs-lookup"><span data-stu-id="9897c-108">Example it from [Windows classic samples](https://github.com/microsoft/Windows-classic-samples/blob/1d363ff4bd17d8e20415b92e2ee989d615cc0d91/Samples/Win7Samples/dataaccess/oledb/sampprov/extbuff.cpp) on GitHub.</span></span>

## <a name="constants"></a><span data-ttu-id="9897c-109">常數</span><span class="sxs-lookup"><span data-stu-id="9897c-109">Constants</span></span>


| <span data-ttu-id="9897c-110">常數/值</span><span class="sxs-lookup"><span data-stu-id="9897c-110">Constant/value</span></span>                                                                                                                                                                                                                                             | <span data-ttu-id="9897c-111">Description</span><span class="sxs-lookup"><span data-stu-id="9897c-111">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span id="PAGE_EXECUTE"></span><span id="page_execute"></span><dl> <span data-ttu-id="9897c-112"><dt>**頁面 \_執行**</dt> <dt>0x10</dt></span><span class="sxs-lookup"><span data-stu-id="9897c-112"><dt>**PAGE\_EXECUTE**</dt> <dt>0x10</dt></span></span> </dl>                                       | <span data-ttu-id="9897c-113">允許對已認可的頁面區域執行存取。</span><span class="sxs-lookup"><span data-stu-id="9897c-113">Enables execute access to the committed region of pages.</span></span> <span data-ttu-id="9897c-114">嘗試寫入認可的區域會導致存取違規。</span><span class="sxs-lookup"><span data-stu-id="9897c-114">An attempt to write to the committed region results in an access violation.</span></span><br/> <span data-ttu-id="9897c-115">[**CreateFileMapping**](/windows/desktop/api/WinBase/nf-winbase-createfilemappinga)函數不支援此旗標。</span><span class="sxs-lookup"><span data-stu-id="9897c-115">This flag is not supported by the [**CreateFileMapping**](/windows/desktop/api/WinBase/nf-winbase-createfilemappinga) function.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| <span id="PAGE_EXECUTE_READ"></span><span id="page_execute_read"></span><dl> <span data-ttu-id="9897c-116"><dt>**頁面 \_執行 \_ 讀取**</dt> <dt>0x20</dt></span><span class="sxs-lookup"><span data-stu-id="9897c-116"><dt>**PAGE\_EXECUTE\_READ**</dt> <dt>0x20</dt></span></span> </dl>                       | <span data-ttu-id="9897c-117">允許對已認可的頁面區域執行或唯讀存取。</span><span class="sxs-lookup"><span data-stu-id="9897c-117">Enables execute or read-only access to the committed region of pages.</span></span> <span data-ttu-id="9897c-118">嘗試寫入認可的區域會導致存取違規。</span><span class="sxs-lookup"><span data-stu-id="9897c-118">An attempt to write to the committed region results in an access violation.</span></span><br/> <span data-ttu-id="9897c-119">**Windows Server 2003 和 WINDOWS XP：** 在 Windows XP 加裝 SP2 和 Windows Server 2003 SP1 之前， [**CreateFileMapping**](/windows/desktop/api/WinBase/nf-winbase-createfilemappinga) 函式不支援這個屬性。</span><span class="sxs-lookup"><span data-stu-id="9897c-119">**Windows Server 2003 and Windows XP:** This attribute is not supported by the [**CreateFileMapping**](/windows/desktop/api/WinBase/nf-winbase-createfilemappinga) function until Windows XP with SP2 and Windows Server 2003 with SP1.</span></span><br/>                                                                                                                                                                                                                                                                                                                                |
| <span id="PAGE_EXECUTE_READWRITE"></span><span id="page_execute_readwrite"></span><dl> <span data-ttu-id="9897c-120"><dt>**頁面 \_執行 \_ READWRITE**</dt> <dt>0x40</dt></span><span class="sxs-lookup"><span data-stu-id="9897c-120"><dt>**PAGE\_EXECUTE\_READWRITE**</dt> <dt>0x40</dt></span></span> </dl>        | <span data-ttu-id="9897c-121">啟用所認可之頁面區域的執行、唯讀或讀取/寫入存取權。</span><span class="sxs-lookup"><span data-stu-id="9897c-121">Enables execute, read-only, or read/write access to the committed region of pages.</span></span><br/> <span data-ttu-id="9897c-122">**Windows Server 2003 和 WINDOWS XP：** 在 Windows XP 加裝 SP2 和 Windows Server 2003 SP1 之前， [**CreateFileMapping**](/windows/desktop/api/WinBase/nf-winbase-createfilemappinga) 函式不支援這個屬性。</span><span class="sxs-lookup"><span data-stu-id="9897c-122">**Windows Server 2003 and Windows XP:** This attribute is not supported by the [**CreateFileMapping**](/windows/desktop/api/WinBase/nf-winbase-createfilemappinga) function until Windows XP with SP2 and Windows Server 2003 with SP1.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                               |
| <span id="PAGE_EXECUTE_WRITECOPY"></span><span id="page_execute_writecopy"></span><dl> <span data-ttu-id="9897c-123"><dt>**頁面 \_執行 \_ WRITECOPY**</dt> <dt>0x80</dt></span><span class="sxs-lookup"><span data-stu-id="9897c-123"><dt>**PAGE\_EXECUTE\_WRITECOPY**</dt> <dt>0x80</dt></span></span> </dl>        | <span data-ttu-id="9897c-124">啟用「執行」、「唯讀」或「寫入時寫入」許可權，以存取檔案對應物件的對應視圖。</span><span class="sxs-lookup"><span data-stu-id="9897c-124">Enables execute, read-only, or copy-on-write access to a mapped view of a file mapping object.</span></span> <span data-ttu-id="9897c-125">嘗試寫入已認可的寫入寫入頁面，會導致頁面的私用複本進行處理。</span><span class="sxs-lookup"><span data-stu-id="9897c-125">An attempt to write to a committed copy-on-write page results in a private copy of the page being made for the process.</span></span> <span data-ttu-id="9897c-126">私用頁面會標示為 **page \_ EXECUTE \_ READWRITE**，而變更會寫入至新頁面。</span><span class="sxs-lookup"><span data-stu-id="9897c-126">The private page is marked as **PAGE\_EXECUTE\_READWRITE**, and the change is written to the new page.</span></span><br/> <span data-ttu-id="9897c-127">[**VirtualAlloc**](/windows/win32/api/memoryapi/nf-memoryapi-virtualalloc)或 [**VirtualAllocEx**](/windows/win32/api/memoryapi/nf-memoryapi-virtualallocex)函數不支援此旗標。</span><span class="sxs-lookup"><span data-stu-id="9897c-127">This flag is not supported by the [**VirtualAlloc**](/windows/win32/api/memoryapi/nf-memoryapi-virtualalloc) or [**VirtualAllocEx**](/windows/win32/api/memoryapi/nf-memoryapi-virtualallocex) functions.</span></span> <span data-ttu-id="9897c-128">**Windows Vista、Windows Server 2003 和 WINDOWS XP：** 在 Windows Vista SP1 和 Windows Server 2008 之前， [**CreateFileMapping**](/windows/desktop/api/WinBase/nf-winbase-createfilemappinga) 函數不支援這個屬性。</span><span class="sxs-lookup"><span data-stu-id="9897c-128">**Windows Vista, Windows Server 2003 and Windows XP:** This attribute is not supported by the [**CreateFileMapping**](/windows/desktop/api/WinBase/nf-winbase-createfilemappinga) function until Windows Vista with SP1 and Windows Server 2008.</span></span><br/> <br/> |
| <span id="PAGE_NOACCESS"></span><span id="page_noaccess"></span><dl> <span data-ttu-id="9897c-129"><dt>**頁面 \_NOACCESS**</dt> <dt>0x01</dt></span><span class="sxs-lookup"><span data-stu-id="9897c-129"><dt>**PAGE\_NOACCESS**</dt> <dt>0x01</dt></span></span> </dl>                                    | <span data-ttu-id="9897c-130">停用對已認可之頁面區域的所有存取。</span><span class="sxs-lookup"><span data-stu-id="9897c-130">Disables all access to the committed region of pages.</span></span> <span data-ttu-id="9897c-131">嘗試讀取、寫入或執行認可的區域會導致存取違規。</span><span class="sxs-lookup"><span data-stu-id="9897c-131">An attempt to read from, write to, or execute the committed region results in an access violation.</span></span><br/> <span data-ttu-id="9897c-132">[**CreateFileMapping**](/windows/desktop/api/WinBase/nf-winbase-createfilemappinga)函數不支援此旗標。</span><span class="sxs-lookup"><span data-stu-id="9897c-132">This flag is not supported by the [**CreateFileMapping**](/windows/desktop/api/WinBase/nf-winbase-createfilemappinga) function.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span id="PAGE_READONLY"></span><span id="page_readonly"></span><dl> <span data-ttu-id="9897c-133"><dt>**頁面 \_READONLY**</dt> <dt>0x02</dt></span><span class="sxs-lookup"><span data-stu-id="9897c-133"><dt>**PAGE\_READONLY**</dt> <dt>0x02</dt></span></span> </dl>                                    | <span data-ttu-id="9897c-134">啟用頁面認可區域的唯讀存取。</span><span class="sxs-lookup"><span data-stu-id="9897c-134">Enables read-only access to the committed region of pages.</span></span> <span data-ttu-id="9897c-135">嘗試寫入認可的區域會導致存取違規。</span><span class="sxs-lookup"><span data-stu-id="9897c-135">An attempt to write to the committed region results in an access violation.</span></span> <span data-ttu-id="9897c-136">如果啟用 [資料執行防止](data-execution-prevention.md) ，嘗試在認可的區域中執行程式碼會造成存取違規。</span><span class="sxs-lookup"><span data-stu-id="9897c-136">If [Data Execution Prevention](data-execution-prevention.md) is enabled, an attempt to execute code in the committed region results in an access violation.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                            |
| <span id="PAGE_READWRITE"></span><span id="page_readwrite"></span><dl> <span data-ttu-id="9897c-137"><dt>**頁面 \_READWRITE**</dt> <dt>0x04</dt></span><span class="sxs-lookup"><span data-stu-id="9897c-137"><dt>**PAGE\_READWRITE**</dt> <dt>0x04</dt></span></span> </dl>                                 | <span data-ttu-id="9897c-138">啟用已認可之頁面區域的唯讀或讀取/寫入存取。</span><span class="sxs-lookup"><span data-stu-id="9897c-138">Enables read-only or read/write access to the committed region of pages.</span></span> <span data-ttu-id="9897c-139">如果啟用 [資料執行防止](data-execution-prevention.md) ，嘗試在認可的區域中執行程式碼會造成存取違規。</span><span class="sxs-lookup"><span data-stu-id="9897c-139">If [Data Execution Prevention](data-execution-prevention.md) is enabled, attempting to execute code in the committed region results in an access violation.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| <span id="PAGE_WRITECOPY"></span><span id="page_writecopy"></span><dl> <span data-ttu-id="9897c-140"><dt>**頁面 \_WRITECOPY**</dt> <dt>0x08</dt></span><span class="sxs-lookup"><span data-stu-id="9897c-140"><dt>**PAGE\_WRITECOPY**</dt> <dt>0x08</dt></span></span> </dl>                                 | <span data-ttu-id="9897c-141">啟用檔案對應物件之對應視圖的唯讀或寫入存取權。</span><span class="sxs-lookup"><span data-stu-id="9897c-141">Enables read-only or copy-on-write access to a mapped view of a file mapping object.</span></span> <span data-ttu-id="9897c-142">嘗試寫入已認可的寫入寫入頁面，會導致頁面的私用複本進行處理。</span><span class="sxs-lookup"><span data-stu-id="9897c-142">An attempt to write to a committed copy-on-write page results in a private copy of the page being made for the process.</span></span> <span data-ttu-id="9897c-143">私用頁面會標示為 **頁面 \_ READWRITE**，而變更會寫入至新頁面。</span><span class="sxs-lookup"><span data-stu-id="9897c-143">The private page is marked as **PAGE\_READWRITE**, and the change is written to the new page.</span></span> <span data-ttu-id="9897c-144">如果啟用 [資料執行防止](data-execution-prevention.md) ，嘗試在認可的區域中執行程式碼會造成存取違規。</span><span class="sxs-lookup"><span data-stu-id="9897c-144">If [Data Execution Prevention](data-execution-prevention.md) is enabled, attempting to execute code in the committed region results in an access violation.</span></span><br/> <span data-ttu-id="9897c-145">[**VirtualAlloc**](/windows/win32/api/memoryapi/nf-memoryapi-virtualalloc)或 [**VirtualAllocEx**](/windows/win32/api/memoryapi/nf-memoryapi-virtualallocex)函數不支援此旗標。</span><span class="sxs-lookup"><span data-stu-id="9897c-145">This flag is not supported by the [**VirtualAlloc**](/windows/win32/api/memoryapi/nf-memoryapi-virtualalloc) or [**VirtualAllocEx**](/windows/win32/api/memoryapi/nf-memoryapi-virtualallocex) functions.</span></span><br/>                                                                               |
| <span id="PAGE_TARGETS_INVALID"></span><span id="page_targets_invalid"></span><dl> <span data-ttu-id="9897c-146"><dt>**頁面 \_目標 \_ 無效**</dt>的 <dt>0x40000000</dt></span><span class="sxs-lookup"><span data-stu-id="9897c-146"><dt>**PAGE\_TARGETS\_INVALID**</dt> <dt>0x40000000</dt></span></span> </dl>        | <span data-ttu-id="9897c-147">將頁面中的所有位置設定為 CFG 的無效目標。</span><span class="sxs-lookup"><span data-stu-id="9897c-147">Sets all locations in the pages as invalid targets for CFG.</span></span> <span data-ttu-id="9897c-148">搭配任何執行頁面保護（例如 **page \_ execute**、 **page \_ execute \_ READ**、 **page \_ execute \_ READWRITE** 和 **page \_ execute \_ WRITECOPY**）一起使用。</span><span class="sxs-lookup"><span data-stu-id="9897c-148">Used along with any execute page protection like **PAGE\_EXECUTE**, **PAGE\_EXECUTE\_READ**, **PAGE\_EXECUTE\_READWRITE** and **PAGE\_EXECUTE\_WRITECOPY**.</span></span> <span data-ttu-id="9897c-149">任何間接呼叫這些頁面中的位置都將無法進行 CFG 檢查，而且會終止進程。</span><span class="sxs-lookup"><span data-stu-id="9897c-149">Any indirect call to locations in those pages will fail CFG checks and the process will be terminated.</span></span> <span data-ttu-id="9897c-150">所配置之可執行檔頁面的預設行為是標示為 CFG 的有效呼叫目標。</span><span class="sxs-lookup"><span data-stu-id="9897c-150">The default behavior for executable pages allocated is to be marked valid call targets for CFG.</span></span><br/> <span data-ttu-id="9897c-151">[**VirtualProtect**](/windows/win32/api/memoryapi/nf-memoryapi-virtualprotect)或 [**CreateFileMapping**](/windows/desktop/api/WinBase/nf-winbase-createfilemappinga)函數不支援此旗標。</span><span class="sxs-lookup"><span data-stu-id="9897c-151">This flag is not supported by the [**VirtualProtect**](/windows/win32/api/memoryapi/nf-memoryapi-virtualprotect) or [**CreateFileMapping**](/windows/desktop/api/WinBase/nf-winbase-createfilemappinga) functions.</span></span><br/>                                                                                                              |
| <span id="PAGE_TARGETS_NO_UPDATE"></span><span id="page_targets_no_update"></span><dl> <span data-ttu-id="9897c-152"><dt>**頁面 \_\_無 \_ 更新**</dt> <dt>0x40000000</dt>的目標</span><span class="sxs-lookup"><span data-stu-id="9897c-152"><dt>**PAGE\_TARGETS\_NO\_UPDATE**</dt> <dt>0x40000000</dt></span></span> </dl> | <span data-ttu-id="9897c-153">在 [**VirtualProtect**](/windows/win32/api/memoryapi/nf-memoryapi-virtualprotect)的保護變更時，區域中的頁面不會更新其 CFG 資訊。</span><span class="sxs-lookup"><span data-stu-id="9897c-153">Pages in the region will not have their CFG information updated while the protection changes for [**VirtualProtect**](/windows/win32/api/memoryapi/nf-memoryapi-virtualprotect).</span></span> <span data-ttu-id="9897c-154">例如，如果區域中的頁面是使用 **\_ \_ 不正確頁面目標** 所配置，則當頁面保護變更時，將會保留不正確資訊。</span><span class="sxs-lookup"><span data-stu-id="9897c-154">For example, if the pages in the region was allocated using **PAGE\_TARGETS\_INVALID**, then the invalid information will be maintained while the page protection changes.</span></span> <span data-ttu-id="9897c-155">只有當保護變更為可執行檔類型（例如 **page \_ execute**、 **page \_ execute \_ READ**、 **page \_ execute \_ READWRITE** 和 **page \_ execute \_ WRITECOPY**）時，此旗標才有效。</span><span class="sxs-lookup"><span data-stu-id="9897c-155">This flag is only valid when the protection changes to an executable type like **PAGE\_EXECUTE**, **PAGE\_EXECUTE\_READ**, **PAGE\_EXECUTE\_READWRITE** and **PAGE\_EXECUTE\_WRITECOPY**.</span></span> <span data-ttu-id="9897c-156">**VirtualProtect** 保護變更為可執行檔的預設行為是將所有位置標示為 CFG 的有效呼叫目標。</span><span class="sxs-lookup"><span data-stu-id="9897c-156">The default behavior for **VirtualProtect** protection change to executable is to mark all locations as valid call targets for CFG.</span></span> <br/>                                           |



<span data-ttu-id="9897c-157">以下是除了先前的表格所提供的選項之外，還可以使用的修飾詞（如所述）。</span><span class="sxs-lookup"><span data-stu-id="9897c-157">The following are modifiers that can be used in addition to the options provided in the previous table, except as noted.</span></span>



| <span data-ttu-id="9897c-158">常數/值</span><span class="sxs-lookup"><span data-stu-id="9897c-158">Constant/value</span></span>                                                                                                                                                                                                                       | <span data-ttu-id="9897c-159">Description</span><span class="sxs-lookup"><span data-stu-id="9897c-159">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span id="PAGE_GUARD"></span><span id="page_guard"></span><dl> <span data-ttu-id="9897c-160"><dt>**頁面 \_GUARD**</dt> <dt>0x100</dt></span><span class="sxs-lookup"><span data-stu-id="9897c-160"><dt>**PAGE\_GUARD**</dt> <dt>0x100</dt></span></span> </dl>                      | <span data-ttu-id="9897c-161">區域中的頁面會變成防護頁面。</span><span class="sxs-lookup"><span data-stu-id="9897c-161">Pages in the region become guard pages.</span></span> <span data-ttu-id="9897c-162">任何存取防護頁面的嘗試都會導致系統引發 **狀態 \_ 防護 \_ 頁面 \_ 違規** 例外狀況，並關閉防護頁面狀態。</span><span class="sxs-lookup"><span data-stu-id="9897c-162">Any attempt to access a guard page causes the system to raise a **STATUS\_GUARD\_PAGE\_VIOLATION** exception and turn off the guard page status.</span></span> <span data-ttu-id="9897c-163">保護頁面，因此可作為一次性存取警示。</span><span class="sxs-lookup"><span data-stu-id="9897c-163">Guard pages thus act as a one-time access alarm.</span></span> <span data-ttu-id="9897c-164">如需詳細資訊，請參閱 [Creating Guard Pages](creating-guard-pages.md) (建立防護頁面)。</span><span class="sxs-lookup"><span data-stu-id="9897c-164">For more information, see [Creating Guard Pages](creating-guard-pages.md).</span></span><br/> <span data-ttu-id="9897c-165">當存取嘗試導致系統關閉防護頁面狀態時，就會接管基礎頁面保護。</span><span class="sxs-lookup"><span data-stu-id="9897c-165">When an access attempt leads the system to turn off guard page status, the underlying page protection takes over.</span></span><br/> <span data-ttu-id="9897c-166">如果在系統服務期間發生防護頁面例外狀況，服務通常會傳回「失敗狀態」指標。</span><span class="sxs-lookup"><span data-stu-id="9897c-166">If a guard page exception occurs during a system service, the service typically returns a failure status indicator.</span></span><br/> <span data-ttu-id="9897c-167">此值無法搭配 **頁面 \_ NOACCESS** 使用。</span><span class="sxs-lookup"><span data-stu-id="9897c-167">This value cannot be used with **PAGE\_NOACCESS**.</span></span><br/> <span data-ttu-id="9897c-168">[**CreateFileMapping**](/windows/desktop/api/WinBase/nf-winbase-createfilemappinga)函數不支援此旗標。</span><span class="sxs-lookup"><span data-stu-id="9897c-168">This flag is not supported by the [**CreateFileMapping**](/windows/desktop/api/WinBase/nf-winbase-createfilemappinga) function.</span></span><br/>                                                                                                                                                                                                                              |
| <span id="PAGE_NOCACHE"></span><span id="page_nocache"></span><dl> <span data-ttu-id="9897c-169"><dt>**頁面 \_NOCACHE**</dt> <dt>0x200</dt></span><span class="sxs-lookup"><span data-stu-id="9897c-169"><dt>**PAGE\_NOCACHE**</dt> <dt>0x200</dt></span></span> </dl>                | <span data-ttu-id="9897c-170">將所有頁面設定為非 cachable。</span><span class="sxs-lookup"><span data-stu-id="9897c-170">Sets all pages to be non-cachable.</span></span> <span data-ttu-id="9897c-171">除非裝置明確需要，否則應用程式不應使用此屬性。</span><span class="sxs-lookup"><span data-stu-id="9897c-171">Applications should not use this attribute except when explicitly required for a device.</span></span> <span data-ttu-id="9897c-172">使用連鎖函數搭配與 **SEC \_ NOCACHE** 對應的記憶體，可能會導致例外狀況 **不 \_ 合法的 \_ 指令** 例外狀況。</span><span class="sxs-lookup"><span data-stu-id="9897c-172">Using the interlocked functions with memory that is mapped with **SEC\_NOCACHE** can result in an **EXCEPTION\_ILLEGAL\_INSTRUCTION** exception.</span></span><br/> <span data-ttu-id="9897c-173">**頁面 \_ NOCACHE** 旗標不可與 **page \_ GUARD**、 **page \_ NOACCESS** 或 **page \_ WRITECOMBINE** 旗標一起使用。</span><span class="sxs-lookup"><span data-stu-id="9897c-173">The **PAGE\_NOCACHE** flag cannot be used with the **PAGE\_GUARD**, **PAGE\_NOACCESS**, or **PAGE\_WRITECOMBINE** flags.</span></span><br/> <span data-ttu-id="9897c-174">只有在使用 [**VirtualAlloc**](/windows/win32/api/memoryapi/nf-memoryapi-virtualalloc)、 [**VirtualAllocEx**](/windows/win32/api/memoryapi/nf-memoryapi-virtualallocex)或 [**VirtualAllocExNuma**](/windows/win32/api/memoryapi/nf-memoryapi-virtualallocexnuma)函數配置私用記憶體時，才能使用 **頁面 \_ NOCACHE** 旗標。</span><span class="sxs-lookup"><span data-stu-id="9897c-174">The **PAGE\_NOCACHE** flag can be used only when allocating private memory with the [**VirtualAlloc**](/windows/win32/api/memoryapi/nf-memoryapi-virtualalloc), [**VirtualAllocEx**](/windows/win32/api/memoryapi/nf-memoryapi-virtualallocex), or [**VirtualAllocExNuma**](/windows/win32/api/memoryapi/nf-memoryapi-virtualallocexnuma) functions.</span></span> <span data-ttu-id="9897c-175">若要啟用共用記憶體的非快取記憶體存取，請在呼叫 [**CreateFileMapping**](/windows/desktop/api/WinBase/nf-winbase-createfilemappinga)函數時指定 **SEC \_ NOCACHE** 旗標。</span><span class="sxs-lookup"><span data-stu-id="9897c-175">To enable non-cached memory access for shared memory, specify the **SEC\_NOCACHE** flag when calling the [**CreateFileMapping**](/windows/desktop/api/WinBase/nf-winbase-createfilemappinga) function.</span></span><br/>                                                                                                                                                   |
| <span id="PAGE_WRITECOMBINE"></span><span id="page_writecombine"></span><dl> <span data-ttu-id="9897c-176"><dt>**頁面 \_WRITECOMBINE**</dt> <dt>0x400</dt></span><span class="sxs-lookup"><span data-stu-id="9897c-176"><dt>**PAGE\_WRITECOMBINE**</dt> <dt>0x400</dt></span></span> </dl> | <span data-ttu-id="9897c-177">將所有頁面設定為寫入組合。</span><span class="sxs-lookup"><span data-stu-id="9897c-177">Sets all pages to be write-combined.</span></span> <br/> <span data-ttu-id="9897c-178">除非裝置明確需要，否則應用程式不應使用此屬性。</span><span class="sxs-lookup"><span data-stu-id="9897c-178">Applications should not use this attribute except when explicitly required for a device.</span></span> <span data-ttu-id="9897c-179">使用連鎖函數搭配對應為寫入組合的記憶體，可能會導致例外狀況不 **\_ 合法的 \_ 指令** 例外狀況。</span><span class="sxs-lookup"><span data-stu-id="9897c-179">Using the interlocked functions with memory that is mapped as write-combined can result in an **EXCEPTION\_ILLEGAL\_INSTRUCTION** exception.</span></span> <br/> <span data-ttu-id="9897c-180">頁面 **\_ WRITECOMBINE** 旗標無法使用 **頁面 \_ NOACCESS**、 **頁面 \_ 保護** 和 **頁面 \_ NOCACHE** 旗標來指定。</span><span class="sxs-lookup"><span data-stu-id="9897c-180">The **PAGE\_WRITECOMBINE** flag cannot be specified with the **PAGE\_NOACCESS**, **PAGE\_GUARD**, and **PAGE\_NOCACHE** flags.</span></span> <br/> <span data-ttu-id="9897c-181">只有在使用 [**VirtualAlloc**](/windows/win32/api/memoryapi/nf-memoryapi-virtualalloc)、 [**VirtualAllocEx**](/windows/win32/api/memoryapi/nf-memoryapi-virtualallocex)或 [**VirtualAllocExNuma**](/windows/win32/api/memoryapi/nf-memoryapi-virtualallocexnuma)函數配置私用記憶體時，才能使用 **頁面 \_ WRITECOMBINE** 旗標。</span><span class="sxs-lookup"><span data-stu-id="9897c-181">The **PAGE\_WRITECOMBINE** flag can be used only when allocating private memory with the [**VirtualAlloc**](/windows/win32/api/memoryapi/nf-memoryapi-virtualalloc), [**VirtualAllocEx**](/windows/win32/api/memoryapi/nf-memoryapi-virtualallocex), or [**VirtualAllocExNuma**](/windows/win32/api/memoryapi/nf-memoryapi-virtualallocexnuma) functions.</span></span> <span data-ttu-id="9897c-182">若要啟用共用記憶體的寫入合併記憶體存取，請在呼叫 [**CreateFileMapping**](/windows/desktop/api/WinBase/nf-winbase-createfilemappinga)函數時指定 **SEC \_ WRITECOMBINE** 旗標。</span><span class="sxs-lookup"><span data-stu-id="9897c-182">To enable write-combined memory access for shared memory, specify the **SEC\_WRITECOMBINE** flag when calling the [**CreateFileMapping**](/windows/desktop/api/WinBase/nf-winbase-createfilemappinga) function.</span></span><br/> <span data-ttu-id="9897c-183">**Windows Server 2003 和 WINDOWS XP：** 在 Windows Server 2003 SP1 之前，不支援此旗標。</span><span class="sxs-lookup"><span data-stu-id="9897c-183">**Windows Server 2003 and Windows XP:** This flag is not supported until Windows Server 2003 with SP1.</span></span><br/> |



<span data-ttu-id="9897c-184">當您指定具有 Intel Software Guard Extensions (SGX) 架構的記憶體保護區時，只能搭配 [**LoadEnclaveData**](/windows/desktop/api/enclaveapi/nf-enclaveapi-loadenclavedata) 函數使用下列常數。</span><span class="sxs-lookup"><span data-stu-id="9897c-184">The following constants can only be used with the [**LoadEnclaveData**](/windows/desktop/api/enclaveapi/nf-enclaveapi-loadenclavedata) function when you specify an enclave that has the Intel Software Guard Extensions (SGX) architecture.</span></span>



| <span data-ttu-id="9897c-185">常數</span><span class="sxs-lookup"><span data-stu-id="9897c-185">Constant</span></span>                                                                                                                                                                                                  | <span data-ttu-id="9897c-186">描述</span><span class="sxs-lookup"><span data-stu-id="9897c-186">Description</span></span>                                                                                                                                 |
|:----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:--------------------------------------------------------------------------------------------------------------------------------------------|
| <span id="PAGE_ENCLAVE_THREAD_CONTROL"></span><span id="page_enclave_thread_control"></span><dl> <span data-ttu-id="9897c-187"><dt>**頁面 \_ 記憶體保護區 \_ 執行緒 \_ 控制項**</dt></span><span class="sxs-lookup"><span data-stu-id="9897c-187"><dt>**PAGE\_ENCLAVE\_THREAD\_CONTROL**</dt></span></span> </dl> | <span data-ttu-id="9897c-188">頁面包含 (TCS) 的執行緒控制項結構。</span><span class="sxs-lookup"><span data-stu-id="9897c-188">The page contains a thread control structure (TCS).</span></span><br/>                                                                              |
| <span id="PAGE_ENCLAVE_UNVALIDATED"></span><span id="page_enclave_unvalidated"></span><dl> <span data-ttu-id="9897c-189"><dt>**頁面 \_ 記憶體保護區 \_ 未經驗證**</dt></span><span class="sxs-lookup"><span data-stu-id="9897c-189"><dt>**PAGE\_ENCLAVE\_UNVALIDATED**</dt></span></span> </dl>           | <span data-ttu-id="9897c-190">您提供的頁面內容會使用 Intel SGX 程式設計模型的 EEXTEND 指令，從度量中排除。</span><span class="sxs-lookup"><span data-stu-id="9897c-190">The page contents that you supply are excluded from measurement with the EEXTEND instruction of the Intel SGX programming model.</span></span><br/> |



## <a name="requirements"></a><span data-ttu-id="9897c-191">規格需求</span><span class="sxs-lookup"><span data-stu-id="9897c-191">Requirements</span></span>



| <span data-ttu-id="9897c-192">需求</span><span class="sxs-lookup"><span data-stu-id="9897c-192">Requirement</span></span> | <span data-ttu-id="9897c-193">值</span><span class="sxs-lookup"><span data-stu-id="9897c-193">Value</span></span> |
|-------------------------------------|--------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="9897c-194">最低支援的用戶端</span><span class="sxs-lookup"><span data-stu-id="9897c-194">Minimum supported client</span></span><br/> | <span data-ttu-id="9897c-195">\[僅限 WINDOWS XP desktop 應用程式\]</span><span class="sxs-lookup"><span data-stu-id="9897c-195">Windows XP \[desktop apps only\]</span></span><br/>                                                            |
| <span data-ttu-id="9897c-196">最低支援的伺服器</span><span class="sxs-lookup"><span data-stu-id="9897c-196">Minimum supported server</span></span><br/> | <span data-ttu-id="9897c-197">僅限 Windows Server 2003 \[ desktop 應用程式\]</span><span class="sxs-lookup"><span data-stu-id="9897c-197">Windows Server 2003 \[desktop apps only\]</span></span><br/>                                                   |
| <span data-ttu-id="9897c-198">標頭</span><span class="sxs-lookup"><span data-stu-id="9897c-198">Header</span></span><br/>                   | <dl> <span data-ttu-id="9897c-199"><dt>WinNT (包括 Windows .h) </dt></span><span class="sxs-lookup"><span data-stu-id="9897c-199"><dt>WinNT.h (include Windows.h)</dt></span></span> </dl> |



## <a name="see-also"></a><span data-ttu-id="9897c-200">另請參閱</span><span class="sxs-lookup"><span data-stu-id="9897c-200">See also</span></span>

<dl> <dt>

[<span data-ttu-id="9897c-201">**CreateFileMapping**</span><span class="sxs-lookup"><span data-stu-id="9897c-201">**CreateFileMapping**</span></span>](/windows/desktop/api/WinBase/nf-winbase-createfilemappinga)
</dt> <dt>

[<span data-ttu-id="9897c-202">記憶體保護</span><span class="sxs-lookup"><span data-stu-id="9897c-202">Memory Protection</span></span>](memory-protection.md)
</dt> <dt>

[<span data-ttu-id="9897c-203">**VirtualAlloc**</span><span class="sxs-lookup"><span data-stu-id="9897c-203">**VirtualAlloc**</span></span>](/windows/win32/api/memoryapi/nf-memoryapi-virtualalloc)
</dt> <dt>

[<span data-ttu-id="9897c-204">**VirtualAllocEx**</span><span class="sxs-lookup"><span data-stu-id="9897c-204">**VirtualAllocEx**</span></span>](/windows/win32/api/memoryapi/nf-memoryapi-virtualallocex)
</dt> <dt>

[<span data-ttu-id="9897c-205">**LoadEnclaveData**</span><span class="sxs-lookup"><span data-stu-id="9897c-205">**LoadEnclaveData**</span></span>](/windows/desktop/api/enclaveapi/nf-enclaveapi-loadenclavedata)
</dt> </dl>

 

 
