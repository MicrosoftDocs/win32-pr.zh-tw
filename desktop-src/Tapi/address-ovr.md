---
description: 位址的概念是大部分通訊作業的核心。
ms.assetid: 32fbd06b-f6f2-4024-b8d5-3d6eef16bca2
title: 位址
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8c6ad8f03b725a58d564c63f4c5c0d0165eed99a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/08/2021
ms.locfileid: "106978035"
---
# <a name="address"></a>位址

位址的概念是大部分通訊作業的核心。 位址代表網路上的位置。 在安裝服務提供者期間，通常會在服務提供者的安裝期間進行本機指派位址，但稍後可以修改。 有關相關程式的詳細資訊，請參閱適用于 Microsoft 提供之服務提供者的作業系統資源套件，以及非 Microsoft 產品的服務提供者檔中。

單一位址可由一個以上的線路裝置共用。 不同的交換器廠商有不同的名稱來處理這個概念，例如位址橋接、多重外觀目錄號碼 (MADN) 或橋接的外觀。 所有與該位址相關的行都會提供共用位址上的撥入電話。 如需 TAPI 可辨識之設定的描述，請參閱 [LINEADDRESSSHARING \_ 常數](./lineaddresssharing--constants.md) 。

位址本身是識別網路上位置的字串。 在電話網絡的案例中，位址是使用國家或國際代碼完成的電話號碼。 如果網路是以 IP 為基礎，則位址可以是 IP 位址。 請參閱 TAPI 定義網址類別型的 [LINEADDRESSTYPE \_ 常數](lineaddresstype--constants.md) 。 服務提供者可以定義其他的網址類別型。

## <a name="address-related-capabilities-and-messages"></a>Address-Related 功能和訊息

不同的位址具有不同的功能、功能和狀態。 服務提供者是這類資訊的來源。 TAPI 的裝置查詢功能和狀態和附隨報告機制可提供應用程式用來管理位址的資訊。

應用程式會藉由處理來自 TAPI 的事件或使用查詢作業來取得此資訊。 這可讓應用程式考慮因素，例如指定的位址是否支援特定的功能，例如 [公園](park-ovr.md)。

**TAPI 2.x：** 應用程式會呼叫 [**lineGetAddressCaps**](/windows/win32/api/tapi/nf-tapi-linegetaddresscaps) 函數來判斷每個位址的電話語音功能，然後在 [**LINEADDRESSCAPS**](/windows/win32/api/tapi/ns-tapi-lineaddresscaps) 資料結構中接收這項資訊。 以類似的方式，應用程式可以呼叫線路裝置的 [**lineGetDevCaps**](/windows/win32/api/tapi/nf-tapi-linegetdevcaps) 來判斷指派給該行的位址數目，以及其他資訊。

**TAPI 3.x：** 應用程式會使用 [Address 物件介面](address-object-interfaces.md) 來取得位址功能和事件的資訊。

## <a name="storing-phone-numbers-in-electronic-address-books"></a>將電話號碼儲存在電子通訊錄中

許多使用者都選擇撥打個人、傳真機、佈告欄和其他實體，方法是從通訊錄選取其名稱。 撥打的實際數目取決於使用者的地理位置，以及線路裝置的使用方式。 例如，桌上型電腦可以存取兩行，一個連接到 PBX，另一個連線到電話公司的總公司。 對相同的合作物件進行呼叫時，可能必須使用不同的數位。  (透過 PBX 撥號時，電腦可能需要撥出 "9" 首碼來取得外線，或是透過總公司撥打的電話可能需要不同的前置詞。 ) 或者，使用者可能會從可攜式電腦進行呼叫，而且即使是從不同的位置或電話語音環境呼叫，也會想要使用單一的靜態通訊錄。 TAPI 的位址轉譯功能可讓使用者通知電腦目前的位置，以及所需的線路裝置以進行通話。 然後 TAPI 會處理任何撥號差異，而不需要變更使用者的通訊錄。 應用程式會使用 [位址轉譯](initiate-a-session-ovr.md) ，將位址從 [標準位址](#canonical-addresses) 格式轉換為可 [撥入位址](#dialable-addresses) 格式。

相關主題是國際通話進度監視的處理，這是接聽聲音音、特殊資訊語氣、忙碌信號和回電音的程式，可透過網路) 來判斷來電 (的 *狀態* 。 由於通話進度的步調和頻率會因國家或地區而異，因此服務提供者必須知道進行國際外寄通話時要遵循的呼叫進度。 因此，應用程式會在撥出來電時指定目的地國家或地區代碼。

## <a name="canonical-addresses"></a>標準位址

標準位址格式的目的是要成為通用的固定目錄編號。 基於這個理由，通訊錄中的數位最好使用標準格式來儲存。

下列詳細資料會考慮為電話位址提供的標準。

標準電話位址是具有下列結構的文字字串：

\+*CountryCode* Space \[ **(** _AreaCode_ *_)_* 空格鍵 \] *SubscriberNumber* 子 \| *位址*  ^  *名稱* CRLF .。。

下表說明此結構的元件。



元件

意義

\+

相當於 hex 2B。 指出其後的數位使用標準格式。

*CountryCode*

大小可變大小的字串，其中包含一或多個數位 "0" 到 "9" (十六進位30到39（含）) 。 *CountryCode* 會以下列空間分隔。 它會識別位址所在的國家或地區。

Space

只有一個空白字元 (hex 20) 。 它是用來分隔位址 *CountryCode* 部分的結尾。

*AreaCode*

大小可變大小的字串，包含零或多個數位 "0" 到 "9" (十六進位30到39（含）) 。 *AreaCode* 是位址的區碼部分，而且是選擇性的。 如果有區域程式碼，則前面必須加上一個左括弧字元 (28) ，後面接著一個右括弧字元 (29) 和一個空白字元 (20) 。

*SubscriberNumber*

大小可變大小的字串，其中包含一或多個數位 "0" 到 "9" (十六進位30到39（含）) 。 它也可以包含其他格式化字元，包括可撥位址格式所述的任何撥號控制字元：

 

字元

十六進位編碼

 

! \#<br/> $<br/> \*<br/> ,<br/> ?<br/> @<br/> Abcd<br/> P<br/> T<br/> W<br/> abcd<br/> p<br/> t<br/> w<br/>

21 23<br/> 24<br/> 之<br/> 2C<br/> 3F<br/> 40<br/> 41-44<br/> 50<br/> 54<br/> 77<br/> 61-64<br/> 70<br/> 74<br/> 79<br/>

 

訂閱者編號不應包含左括弧或右括弧字元 (只能用來分隔區域程式碼) ，也不應該包含 " \| "、"^" 或 CRLF 字元 (用來) 的欄位開頭。 訂閱者編號中最常見的 nondigit 字元只能包含空格、句點 ( ".") ，以及連字號 ( "-" ) 。 在 [**lineTranslateAddress**](/windows/win32/api/tapi/nf-tapi-linetranslateaddress)函數所傳回的 *DialableString* 中，會省略出現在訂閱者編號中任何允許的 nondigit 字元，但會保留在 *DisplayableString* 中。

\|

Hex (7C) 。 如果有此選擇性字元，則在下一個 + \| ^ CRLF 或標準位址字串的結尾之後，會將其資訊視為子位址資訊，以作為 ISDN 子位址。

*首先*

大小可變大小的字串，其中包含子位址。 字串會以 + \| ^ CRLF 或位址字串的結尾分隔。 撥號期間，會將子位址資訊傳遞給遠端方。 它可以是 ISDN 子位址或電子郵件地址等專案。

^

Hex (5E) 。 如果有這個選擇性字元，則在下一個 CRLF 或標準位址字串結尾之後的資訊會視為 ISDN 名稱。

*名稱*

視為名稱資訊的大小可變大小的字串。 名稱會以 CRLF 或標準位址字串的結尾分隔，而且可以包含其他分隔符號。 撥號期間，會將名稱資訊傳遞給遠端方。

CRLF

Hex (0D) 後面接著十六進位 (0A) ，而且是選擇性的。 如果有的話，則表示另一個正式號碼在此之後。 它是用來將多個標準位址分隔為單一位址字串的一部分， (反向多工) 。 例如，在 Microsoft Corporation 的主要切換電話號碼的標準標記法為：<br/> + 1 (425) 882-8080<br/>



 

## <a name="dialable-addresses"></a>撥出位址

可撥打的位址格式是將位址傳遞給處理電話號碼之服務提供者的形式。 下列詳細資料會考慮電話網絡上的位址位址。

可撥打的數位格式可同時提供多個目的地位址。 如果服務提供者藉由設定對每個指定目的地的呼叫，然後以單一高頻寬媒體資料流程的形式管理資訊資料流程，這項功能就很有用。 應用程式會將此呼叫群組視為單一呼叫，因為它只會接收單一呼叫控制碼來代表個別通話的匯總。

您也可以在應用層級支援反向多工。 若要這樣做，應用程式會設定一連串個別的呼叫，並同步處理其媒體串流。

*Subaddressing* 是一種 ISDN 線路上提供的功能，可讓您更多的資訊，而不只是撥入時使用的單一電話號碼。 這項額外資訊可指定個別的電話分機，以環形或在計算環境中，要發出警示的特定應用程式。 其他參數可以描述要求的連接所需的部分，例如速率和時間。

如果服務提供者支援 subaddressing，則應用程式會在傳遞給任何需要的作業的位址中包含此項。

可撥打的電話位址包含部分定址資訊，而且本質上是部分導覽。 任何不是以 "+" 字元開頭的輸入字串，都會假設不是標準格式，因此必須是可撥打的位址格式，而且會傳回未修改的應用程式。 可撥打的位址是具有下列結構的文字字串：

*DialableNumber* \|子 *位址*  ^ *名稱* CRLF .。。

下表提供此結構的元件。



| 元件        | 意義                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| *DialableNumber* | 數位和修飾詞 0-9 A-D \* \# 、！ W w P p T t @ $？ ;以 \| ^ CRLF 或可以撥出位址字串的結尾分隔。 加號 (+) 是可撥字串中的有效字元。 它指出電話號碼是完整的國際號碼。 在 *DialableNumber* 中，請注意下列定義：<br/> 0-9 A-D \*\#<br/> 對應到 DTMF 和/或脈衝數位的字元。<br/> |
| !                | Hex (21) 。 指出 hookflash (半秒 onhook，接著半秒 offhook，然後再繼續) 插入撥號字串。                                                                                                                                                                                                                                                                                   |
| P p              | Hex (50) 或 Hex (70) 。 指出撥盤式撥號是用於其後面的數位。                                                                                                                                                                                                                                                                                                                                                |
| T t              | Hex (54) 或 Hex (74) 。 指出低音 (DTMF) 撥號是用於其後面的數位。                                                                                                                                                                                                                                                                                                                                          |
| ,                | Hex (27) 。 表示撥號即將暫停。 暫停的持續時間是裝置特定的，可從線路的裝置功能中取出。 您可以使用多個逗號來提供較長的暫停。                                                                                                                                                                                                                                 |
| W w              | Hex (57) 或 Hex (77) 。 大寫或小寫 W 表示撥號應該只在偵測到撥號音後才繼續。                                                                                                                                                                                                                                                                                                            |
| @                | Hex (40) 。 表示撥號是在撥打可撥接位址的其餘部分之前，先「等待無訊息回應」。 這表示等候至少一個回電的色調，再加上幾秒的無聲。                                                                                                                                                                                                                               |
| $                | Hex (24) 。 表示撥號計費資訊是等候「計費信號」 (例如信用卡提示語氣) 。                                                                                                                                                                                                                                                                                                              |
| ?                | Hex (3F) 。 表示系統會在繼續進行撥號之前提示使用者。 提供者實際上並不會執行提示，但是出現 "？" 時，會強制提供者將字串拒絕為無效、警告應用程式需要將其細分為片段，並在其間提示使用者。                                                                                                                           |
| ;                | Hex (3B) 。 如果放在部分指定的可撥出位址字串的結尾，則表示可撥出的數位資訊不完整，稍後會提供更多位址資訊。 ";" 元件只允許用於位址的 *DialableNumber* 部分。                                                                                                                                                       |
| \|               | Hex (7C) ，而且是選擇性的。 如果存在，則在下一個 + ^ CRLF 之後的資訊 \| ，或可撥出位址字串的結尾，會視為作為 ISDN 子位址)  (的子位址資訊。                                                                                                                                                                                                                                  |
| *首先*     | 大小可變大小的字串，其中包含子位址。 字串會以下一個 + \| ^ CRLF 或位址字串的結尾分隔。 撥號時，會將子位址資訊傳遞給遠端方。 它可能適用于 ISDN 子位址、電子郵件地址等等。                                                                                                                                                                       |
| ^                | Hex (5E) ，而且是選擇性的。 如果有的話，在下一個 CRLF 或可撥接位址字串結尾之後的資訊會被視為 ISDN 名稱。                                                                                                                                                                                                                                                                                |
| *名稱*           | 視為名稱資訊的大小可變大小的字串。 名稱會以 CRLF 或可撥出位址字串的結尾分隔。 撥號時，會將名稱資訊傳遞給遠端方。                                                                                                                                                                                                                                                      |
| CRLF             | Hex (0D) 後面接著十六進位 (0A) 。 如果有的話，這個選擇性的字元表示有另一個可撥出的數位在這個值之後。 它是用來將多個可撥入的位址分隔為單一位址字串的一部分， (反轉多工) 。                                                                                                                                                                                           |



 

位址轉譯可以用來將位址從標準格式轉譯成可撥出格式。

 

