---
description: 在 TAPI 層級中，應用程式可以傳遞各種不同的參數，其中有許多可能無效。
ms.assetid: cc52e2a2-08e0-4a66-a75f-975e50dbf654
title: " (電話語音 API) 檢查時發生錯誤"
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 072ee8e456ed255da6945adef7a0bba872870a8d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/07/2021
ms.locfileid: "106976887"
---
# <a name="error-checking"></a><span data-ttu-id="68987-103">錯誤檢查</span><span class="sxs-lookup"><span data-stu-id="68987-103">Error Checking</span></span>

<span data-ttu-id="68987-104">在 TAPI 層級中，應用程式可以傳遞各種不同的參數，其中有許多可能無效。</span><span class="sxs-lookup"><span data-stu-id="68987-104">At the TAPI level, an application can pass a variety of different parameters, many of which may be invalid.</span></span> <span data-ttu-id="68987-105">TAPI 會驗證參數，並將錯誤傳回給應用程式，而不需呼叫服務提供者。</span><span class="sxs-lookup"><span data-stu-id="68987-105">TAPI verifies parameters and returns errors to the application without calling the service provider.</span></span> <span data-ttu-id="68987-106">TSPI 層級上的每個函數描述都會描述已測試過的參數錯誤。</span><span class="sxs-lookup"><span data-stu-id="68987-106">Each function description at the TSPI level describes the parameter errors already tested.</span></span> <span data-ttu-id="68987-107">服務提供者不需要重複這些測試，但它必須執行任何適用于此函數的其他有效性測試。</span><span class="sxs-lookup"><span data-stu-id="68987-107">The service provider does not have to repeat these tests, though it must perform any additional validity tests appropriate to the function.</span></span> <span data-ttu-id="68987-108">下表列出在許多函式中出現的一般參數有效性測試的標題和描述。</span><span class="sxs-lookup"><span data-stu-id="68987-108">Titles and descriptions of common parameter validity tests that appear in many functions are listed in the following table.</span></span>



| <span data-ttu-id="68987-109">有效性測試</span><span class="sxs-lookup"><span data-stu-id="68987-109">Validity test</span></span>       | <span data-ttu-id="68987-110">Description</span><span class="sxs-lookup"><span data-stu-id="68987-110">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|---------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="68987-111">指標有效性</span><span class="sxs-lookup"><span data-stu-id="68987-111">Pointer validity</span></span>    | <span data-ttu-id="68987-112">TAPI 已測試資料儲存體的指標，以確保其指向適合作業的可讀取或可寫入記憶體大小。</span><span class="sxs-lookup"><span data-stu-id="68987-112">TAPI has already tested pointers to data storage to make sure that they point to readable or writable memory of the size appropriate to the operation.</span></span> <span data-ttu-id="68987-113">此外，對於從 **dwTotalSize** 成員開始的大小可變大小資料結構，資料結構已經過驗證，以確保可使用指定的總大小。</span><span class="sxs-lookup"><span data-stu-id="68987-113">In addition, for variably sized data structures starting with a **dwTotalSize** member, the data structure has been verified to ensure that the indicated total size is available.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| <span data-ttu-id="68987-114">固定大小有效性</span><span class="sxs-lookup"><span data-stu-id="68987-114">Fixed size validity</span></span> | <span data-ttu-id="68987-115">針對變動大小的資料結構，資料結構已經過驗證，因此是資料結構固定大小部分的空間，而且該 **dwTotalSize** 對固定部分已足夠。</span><span class="sxs-lookup"><span data-stu-id="68987-115">For variable-sized data structures, the data structure has been verified so space for the fixed-sized part of the data structure and that **dwTotalSize** is sufficient for the fixed part.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="68987-116">位移/大小為零</span><span class="sxs-lookup"><span data-stu-id="68987-116">Offset/size zeroed</span></span>  | <span data-ttu-id="68987-117">若為變數大小的資料結構，則為 ".。。**Offset**"and" .。。[**大小**] 欄位，這些欄位對應至服務提供者所設定的元件，在呼叫服務提供者之前，已預先預設為零個值。</span><span class="sxs-lookup"><span data-stu-id="68987-117">For variable-sized data structures, the "...**Offset**" and "...**Size**" fields that correspond to parts that the service provider sets have been preset with zero values before the service provider was called.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| <span data-ttu-id="68987-118">控制碼有效性</span><span class="sxs-lookup"><span data-stu-id="68987-118">Handle validity</span></span>     | <span data-ttu-id="68987-119">TAPI 可確保 [HDRVLINE](hdrvline.md)、 [HDRVPHONE](hdrvphone.md)和 HDRVCALL) 所定義類型 (的線路、電話和呼叫控制碼都有效。</span><span class="sxs-lookup"><span data-stu-id="68987-119">TAPI ensures that line, phone, and call handles (of defined types [HDRVLINE](hdrvline.md), [HDRVPHONE](hdrvphone.md), and HDRVCALL) are valid.</span></span> <span data-ttu-id="68987-120">也就是說，它們是在 [**TSPI \_ lineOpen**](/windows/win32/api/tspi/nf-tspi-tspi_lineopen)、 [**TSPI \_ phoneOpen**](/windows/win32/api/tspi/nf-tspi-tspi_phoneopen)或下列其中一項啟動呼叫控制碼存留期的情況下，傳回的值沒有錯誤： [**TSPI \_ lineMakeCall**](/windows/win32/api/tspi/nf-tspi-tspi_linemakecall)</span><span class="sxs-lookup"><span data-stu-id="68987-120">That is, they are values that have been returned without error as handles in [**TSPI\_lineOpen**](/windows/win32/api/tspi/nf-tspi-tspi_lineopen), [**TSPI\_phoneOpen**](/windows/win32/api/tspi/nf-tspi-tspi_phoneopen), or one of the following that starts the lifetime of a call handle: [**TSPI\_lineMakeCall**](/windows/win32/api/tspi/nf-tspi-tspi_linemakecall)</span></span><br/> [<span data-ttu-id="68987-121">**TSPI \_ lineCompleteTransfer**</span><span class="sxs-lookup"><span data-stu-id="68987-121">**TSPI\_lineCompleteTransfer**</span></span>](/windows/win32/api/tspi/nf-tspi-tspi_linecompletetransfer)<br/> [<span data-ttu-id="68987-122">**TSPI \_ lineForward**</span><span class="sxs-lookup"><span data-stu-id="68987-122">**TSPI\_lineForward**</span></span>](/windows/win32/api/tspi/nf-tspi-tspi_lineforward)<br/> [<span data-ttu-id="68987-123">**TSPI \_ linePickup**</span><span class="sxs-lookup"><span data-stu-id="68987-123">**TSPI\_linePickup**</span></span>](/windows/win32/api/tspi/nf-tspi-tspi_linepickup)<br/> [<span data-ttu-id="68987-124">**TSPI \_ linePrepareAddToConference**</span><span class="sxs-lookup"><span data-stu-id="68987-124">**TSPI\_linePrepareAddToConference**</span></span>](/windows/win32/api/tspi/nf-tspi-tspi_lineprepareaddtoconference)<br/> [<span data-ttu-id="68987-125">**TSPI \_ lineSetupConference**</span><span class="sxs-lookup"><span data-stu-id="68987-125">**TSPI\_lineSetupConference**</span></span>](/windows/win32/api/tspi/nf-tspi-tspi_linesetupconference)<br/> [<span data-ttu-id="68987-126">**TSPI \_ lineSetupTransfer**</span><span class="sxs-lookup"><span data-stu-id="68987-126">**TSPI\_lineSetupTransfer**</span></span>](/windows/win32/api/tspi/nf-tspi-tspi_linesetuptransfer)<br/> [<span data-ttu-id="68987-127">**TSPI \_ lineUnpark**</span><span class="sxs-lookup"><span data-stu-id="68987-127">**TSPI\_lineUnpark**</span></span>](/windows/win32/api/tspi/nf-tspi-tspi_lineunpark)<br/> <span data-ttu-id="68987-128">[**行 \_NEWCALL**](line-newcall.md) 訊息</span><span class="sxs-lookup"><span data-stu-id="68987-128">[**LINE\_NEWCALL**](line-newcall.md) messages</span></span><br/> |



 

 

