---
description: 服務提供者設計人員應該嘗試保持同步作業的執行時間短。
ms.assetid: eb264ab7-15bb-4cd5-8af8-f979f02a7a39
title: 同步要求
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0e399fcef1ffba574305b70aee05d7430bcd84746458198b3d33ed6bb0848747
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/11/2021
ms.locfileid: "117760684"
---
# <a name="synchronous-requests"></a>同步要求

服務提供者設計人員應該嘗試保持同步作業的執行時間短。 例如，在初始化期間會呼叫「開啟」作業，以準備服務提供者和 TAPI，以在裝置上進行後續作業。 在用戶端電腦與專用伺服器之間分割其執行的服務提供者，可能有合理的信賴度，可與其遠端伺服器通訊。 它的實作為「開啟」可能只會配置並初始化資料結構，以代表裝置並傳回，以延遲端對端通訊，直到要求一些實際作業為止。

任何此類同步作業的「開放式」執行，稍後都會遇到資源限制或遠端通訊失敗。 一般來說，即使是「保守」方法，也無法完全避免這些問題;服務提供者設計師必須在可靠性與效能之間選擇最佳的取捨。 如果可能的話，應該盡可能適當地處理這種情況。 從 TSPI 裝置的觀點來看，它們應該仍適用于「簿記」目的，即使它們傳回任何所要求作業的失敗狀態也一樣。

若要為同步要求執行開放式方法，不應花費正確的作業語義。 回到「開啟」範例，如果開啟裝置必須競爭並保留很少的 nonsharable 資源（例如通訊埠），即使是很耗時的資源，也應該這麼做。

**TAPI 2.x：** 以同步方式完成的作業會在應用程式所進行的函式呼叫中執行所有處理。 函數會根據其成功或失敗傳回不同的值：

-   **同步成功。** 如果已成功執行對應至函式的要求或服務，則函式會傳回零，表示成功。 當做函式呼叫的結果來撰寫的任何值都是可靠的，可以立即使用。
-   **同步失敗。** 如果函式偵測到錯誤，但未執行要求，則會傳回負的錯誤號碼來識別錯誤。

 

 



