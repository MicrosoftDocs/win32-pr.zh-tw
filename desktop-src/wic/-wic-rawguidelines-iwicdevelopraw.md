---
description: 對 IWICDevelopRaw 的支援
ms.assetid: 8e8ff65b-0849-42e0-924e-2a7c61d4b1bb
title: 對 IWICDevelopRaw 的支援
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: fa39aa339a3cd21c7ffa848a5ab1fe2dd6426981
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/08/2021
ms.locfileid: "104194114"
---
# <a name="support-for-iwicdevelopraw"></a><span data-ttu-id="470f1-103">對 IWICDevelopRaw 的支援</span><span class="sxs-lookup"><span data-stu-id="470f1-103">Support for IWICDevelopRaw</span></span>

<span data-ttu-id="470f1-104">為了讓應用程式能夠支援原始處理，強烈建議您使用編解碼器作者來執行 [**IWICDevelopRaw**](/windows/desktop/api/Wincodec/nn-wincodec-iwicdevelopraw)的所有參數。</span><span class="sxs-lookup"><span data-stu-id="470f1-104">To enable applications to support RAW processing, codec authors are strongly encouraged to implement all of the parameters of [**IWICDevelopRaw**](/windows/desktop/api/Wincodec/nn-wincodec-iwicdevelopraw).</span></span> <span data-ttu-id="470f1-105">若為 Windows 7，Windows 影像處理元件 (WIC) 將需要支援所有 [**IWICDevelopRaw**](/windows/desktop/api/Wincodec/nn-wincodec-iwicdevelopraw)。</span><span class="sxs-lookup"><span data-stu-id="470f1-105">For Windows 7, Windows Imaging Component (WIC) will require support for all of the [**IWICDevelopRaw**](/windows/desktop/api/Wincodec/nn-wincodec-iwicdevelopraw).</span></span> <span data-ttu-id="470f1-106">如果您的檔案格式不支援這些參數，則您應該修改影像檔案格式。</span><span class="sxs-lookup"><span data-stu-id="470f1-106">If your file format doesn't support all of these parameters, then you should revise your image file format.</span></span>

<span data-ttu-id="470f1-107">若要在應用程式中啟用基本的原始處理，編解碼器必須支援 (ExposureCompensationSupport) 和色彩 (的曝光調整，例如 KelvinWhitePointSupport 和 TintSupport) 。</span><span class="sxs-lookup"><span data-stu-id="470f1-107">To enable basic RAW processing in applications, codecs must support adjustments to exposure (ExposureCompensationSupport) and color (such as KelvinWhitePointSupport and TintSupport).</span></span> <span data-ttu-id="470f1-108">此外，強烈建議您輸入特定的色彩空間和像素格式。</span><span class="sxs-lookup"><span data-stu-id="470f1-108">In addition, output to specific color spaces and pixel formats is highly recommended.</span></span> <span data-ttu-id="470f1-109">當然，對於其他調整的支援也是建議的做法，而且是 Windows 7 的必要項。</span><span class="sxs-lookup"><span data-stu-id="470f1-109">Support for other adjustments is, of course, encouraged, and is required for Windows 7.</span></span>

<span data-ttu-id="470f1-110">原始編解碼器必須提供映射輪替和快速預覽的基本支援。</span><span class="sxs-lookup"><span data-stu-id="470f1-110">The RAW codec must provide basic support for image rotation and fast previewing.</span></span> <span data-ttu-id="470f1-111">您可以透過兩種不同的方式來指定旋轉：</span><span class="sxs-lookup"><span data-stu-id="470f1-111">Rotation can be specified in two distinct ways:</span></span>

-   <span data-ttu-id="470f1-112">[**IWICDevelopRaw**](/windows/desktop/api/Wincodec/nn-wincodec-iwicdevelopraw)：：[**SetRotation**](/windows/desktop/api/Wincodec/nf-wincodec-iwicdevelopraw-setrotation) 方法。</span><span class="sxs-lookup"><span data-stu-id="470f1-112">[**IWICDevelopRaw**](/windows/desktop/api/Wincodec/nn-wincodec-iwicdevelopraw)::[**SetRotation**](/windows/desktop/api/Wincodec/nf-wincodec-iwicdevelopraw-setrotation) method.</span></span> <span data-ttu-id="470f1-113">這個方法會針對後續呼叫 [**CopyPixels**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapsource-copypixels)的輸出，設定所需的旋轉角度。</span><span class="sxs-lookup"><span data-stu-id="470f1-113">This method sets the desired rotation angle for the output of subsequent calls to [**CopyPixels**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapsource-copypixels).</span></span>
-   <span data-ttu-id="470f1-114">[**IWICBitmapSourceTransform**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapsourcetransform)：：[**CopyPixels**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapsource-copypixels) 方法。</span><span class="sxs-lookup"><span data-stu-id="470f1-114">[**IWICBitmapSourceTransform**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapsourcetransform)::[**CopyPixels**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapsource-copypixels) method.</span></span> <span data-ttu-id="470f1-115">呼叫端可以設定 dstTransform 選項，以指出所需的旋轉角度。</span><span class="sxs-lookup"><span data-stu-id="470f1-115">The caller can set the dstTransform option to indicate the desired rotation angle.</span></span>

<span data-ttu-id="470f1-116">這兩種方法的差異如下：</span><span class="sxs-lookup"><span data-stu-id="470f1-116">These two approaches differ in the following ways:</span></span>

-   <span data-ttu-id="470f1-117">只有 [**IWICDevelopRaw**](/windows/desktop/api/Wincodec/nn-wincodec-iwicdevelopraw) 設定可以跨解碼器物件的實例來保存。</span><span class="sxs-lookup"><span data-stu-id="470f1-117">Only [**IWICDevelopRaw**](/windows/desktop/api/Wincodec/nn-wincodec-iwicdevelopraw) settings can be persisted across instances of the decoder object.</span></span>
-   <span data-ttu-id="470f1-118">[**IWICBitmapSourceTransform**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapsourcetransform)：：[**CopyPixels**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapsourcetransform-copypixels) 只適用于該特定呼叫;沒有任何類型的持續性。</span><span class="sxs-lookup"><span data-stu-id="470f1-118">[**IWICBitmapSourceTransform**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapsourcetransform)::[**CopyPixels**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapsourcetransform-copypixels) applies only to that particular call; there is no persistence of any kind.</span></span>
-   <span data-ttu-id="470f1-119">[**IWICDevelopRaw**](/windows/desktop/api/Wincodec/nn-wincodec-iwicdevelopraw) 可提供更細微的旋轉控制。</span><span class="sxs-lookup"><span data-stu-id="470f1-119">[**IWICDevelopRaw**](/windows/desktop/api/Wincodec/nn-wincodec-iwicdevelopraw) provides for much finer grained control in rotation.</span></span> <span data-ttu-id="470f1-120">[**IWICBitmapSourceTransform**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapsourcetransform)：：[**CopyPixels**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapsourcetransform-copypixels) 受限於90度的增量。</span><span class="sxs-lookup"><span data-stu-id="470f1-120">[**IWICBitmapSourceTransform**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapsourcetransform)::[**CopyPixels**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapsourcetransform-copypixels) is constrained to 90-degree increments.</span></span>

<span data-ttu-id="470f1-121">如果在 [**IWICDevelopRaw**](/windows/desktop/api/Wincodec/nn-wincodec-iwicdevelopraw) 和 [**IWICBitmapSourceTransform**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapsourcetransform)中同時指定了旋轉，則旋轉效果會是累計的。</span><span class="sxs-lookup"><span data-stu-id="470f1-121">If rotation is specified in both [**IWICDevelopRaw**](/windows/desktop/api/Wincodec/nn-wincodec-iwicdevelopraw) and [**IWICBitmapSourceTransform**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapsourcetransform), then the rotation effect is cumulative.</span></span> <span data-ttu-id="470f1-122">例如，如果 [**IWICDevelopRaw**](/windows/desktop/api/Wincodec/nn-wincodec-iwicdevelopraw) 指定25度的旋轉，而 [**IWICBitmapSourceTransform**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapsourcetransform) 指定90度的旋轉，則應該會發生下列情況：</span><span class="sxs-lookup"><span data-stu-id="470f1-122">For example, if [**IWICDevelopRaw**](/windows/desktop/api/Wincodec/nn-wincodec-iwicdevelopraw) specifies a 25-degree rotation and [**IWICBitmapSourceTransform**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapsourcetransform) specifies a 90-degree rotation, then the following should happen:</span></span>

-   <span data-ttu-id="470f1-123">[**IWICBitmapFrameDecode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapframedecode)：：[**CopyPixels**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapsource-copypixels)的呼叫應該套用25度的旋轉 (也就是，只有 [**IWICDevelopRaw**](/windows/desktop/api/Wincodec/nn-wincodec-iwicdevelopraw)) 中指定的數量。</span><span class="sxs-lookup"><span data-stu-id="470f1-123">Calls to [**IWICBitmapFrameDecode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapframedecode)::[**CopyPixels**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapsource-copypixels) should apply a 25-degree rotation (that is, only the amount specified in [**IWICDevelopRaw**](/windows/desktop/api/Wincodec/nn-wincodec-iwicdevelopraw)).</span></span>
-   <span data-ttu-id="470f1-124">若呼叫 [**IWICBitmapSourceTransform**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapsourcetransform)：：[**CopyPixels**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapsourcetransform-copypixels) ，dstTransform 90，則會產生115度的旋轉 (25 + 90) 。</span><span class="sxs-lookup"><span data-stu-id="470f1-124">Calls to [**IWICBitmapSourceTransform**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapsourcetransform)::[**CopyPixels**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapsourcetransform-copypixels) with a dstTransform amount of 90 then result in a 115-degree rotation (25 + 90).</span></span>
-   <span data-ttu-id="470f1-125">同樣地，只有透過 [**IWICDevelopRaw**](/windows/desktop/api/Wincodec/nn-wincodec-iwicdevelopraw)：：[**SetRotation**](/windows/desktop/api/Wincodec/nf-wincodec-iwicdevelopraw-setrotation) 指定的25度旋轉才能保存。</span><span class="sxs-lookup"><span data-stu-id="470f1-125">Again, only the 25-degree rotation specified via [**IWICDevelopRaw**](/windows/desktop/api/Wincodec/nn-wincodec-iwicdevelopraw)::[**SetRotation**](/windows/desktop/api/Wincodec/nf-wincodec-iwicdevelopraw-setrotation) can be persisted.</span></span>

<span data-ttu-id="470f1-126">在 Windows Vista 中， [**IWICBitmapFrameDecode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapframedecode)：：[**GetThumbnail**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapframedecode-getthumbnail) 和 [**IWICBitmapDecoder**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapdecoder)：：[**GetPreview**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapdecoder-getpreview) 方法可讓呼叫者分別取得內嵌縮圖和預覽影像。</span><span class="sxs-lookup"><span data-stu-id="470f1-126">In Windows Vista, the [**IWICBitmapFrameDecode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapframedecode)::[**GetThumbnail**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapframedecode-getthumbnail) and [**IWICBitmapDecoder**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapdecoder)::[**GetPreview**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapdecoder-getpreview) methods allow callers to get embedded thumbnails and preview images, respectively.</span></span> <span data-ttu-id="470f1-127">這些是為了從影像檔案串流傳回預先計算的預覽和縮圖。</span><span class="sxs-lookup"><span data-stu-id="470f1-127">These are intended to return precalculated previews and thumbnails from the image file stream.</span></span> <span data-ttu-id="470f1-128">「立即產生預覽或縮圖」會導致 Windows 檔案總管和相片檢視器的效能不佳。</span><span class="sxs-lookup"><span data-stu-id="470f1-128">Generating previews or thumbnails "on the fly" results in poor performance in the Windows Explorer and Photo Viewer.</span></span> <span data-ttu-id="470f1-129">當使用者執行處理設定的互動式控制時，編解碼器也必須提供方法，以快速傳回更新的螢幕解析度映射。</span><span class="sxs-lookup"><span data-stu-id="470f1-129">The codec also must provide a way to return an updated screen resolution image quickly when users are doing interactive control of the processing settings.</span></span>

<span data-ttu-id="470f1-130">[**IWICDevelopRaw**](/windows/desktop/api/Wincodec/nn-wincodec-iwicdevelopraw)：：[**SetRenderMode**](/windows/desktop/api/Wincodec/nf-wincodec-iwicdevelopraw-setrendermode)的呼叫將會決定後續呼叫 [**IWICBitmapFrameDecode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapframedecode)：：[**CopyPixels**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapsource-copypixels)會傳回 (favoring 的速度或品質) 。</span><span class="sxs-lookup"><span data-stu-id="470f1-130">Calls to [**IWICDevelopRaw**](/windows/desktop/api/Wincodec/nn-wincodec-iwicdevelopraw)::[**SetRenderMode**](/windows/desktop/api/Wincodec/nf-wincodec-iwicdevelopraw-setrendermode) will determine what subsequent calls to [**IWICBitmapFrameDecode**](/windows/desktop/api/Wincodec/nn-wincodec-iwicbitmapframedecode)::[**CopyPixels**](/windows/desktop/api/Wincodec/nf-wincodec-iwicbitmapsource-copypixels) return (favoring either speed or quality).</span></span> <span data-ttu-id="470f1-131">此外，IWICBitmapSourceTransform 介面可以用來判斷是否需要縮減取樣，而且可以在套用時提高效能。</span><span class="sxs-lookup"><span data-stu-id="470f1-131">Additionally, the IWICBitmapSourceTransform interface can be used to determine whether downsampling is necessary and can increase performance when it can be applied.</span></span> <span data-ttu-id="470f1-132">所有影像的色彩精確度應該是可比較的。</span><span class="sxs-lookup"><span data-stu-id="470f1-132">The color fidelity of all the images should be comparable.</span></span> <span data-ttu-id="470f1-133">對處理設定進行變更時，這些轉譯都應該反映變更。</span><span class="sxs-lookup"><span data-stu-id="470f1-133">When changes are made to the processing settings, all of these renderings should reflect the changes.</span></span>

## <a name="related-topics"></a><span data-ttu-id="470f1-134">相關主題</span><span class="sxs-lookup"><span data-stu-id="470f1-134">Related topics</span></span>

<dl> <dt>

<span data-ttu-id="470f1-135">**概念**</span><span class="sxs-lookup"><span data-stu-id="470f1-135">**Conceptual**</span></span>
</dt> <dt>

[<span data-ttu-id="470f1-136">Windows 影像處理元件總覽</span><span class="sxs-lookup"><span data-stu-id="470f1-136">Windows Imaging Component Overview</span></span>](-wic-about-windows-imaging-codec.md)
</dt> <dt>

[<span data-ttu-id="470f1-137">相機原始影像格式的 WIC 指導方針</span><span class="sxs-lookup"><span data-stu-id="470f1-137">WIC Guidelines for Camera RAW Image Formats</span></span>](-wic-rawguidelines.md)
</dt> <dt>

[<span data-ttu-id="470f1-138">如何撰寫 WIC-Enabled 編解碼器</span><span class="sxs-lookup"><span data-stu-id="470f1-138">How to Write a WIC-Enabled CODEC</span></span>](-wic-howtowriteacodec.md)
</dt> </dl>

 

 



