---
title: 資料表示
description: 電腦架構可能會有明顯不同的運算環境。
ms.assetid: 34ba76ae-644d-4168-886f-0909a65f1abd
keywords:
- 遠端程序呼叫 RPC、描述、資料表示
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4de187f2b646e55cd4f1a269f0504a2d43e951c3
ms.sourcegitcommit: 773fa6257ead6c74154ad3cf46d21e49adc900aa
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/09/2020
ms.locfileid: "103684167"
---
# <a name="data-representation"></a><span data-ttu-id="47e88-104">資料表示</span><span class="sxs-lookup"><span data-stu-id="47e88-104">Data Representation</span></span>

<span data-ttu-id="47e88-105">電腦架構可能會有明顯不同的運算環境。</span><span class="sxs-lookup"><span data-stu-id="47e88-105">Computing environments can differ significantly, as can network architectures.</span></span> <span data-ttu-id="47e88-106">為了配合這些差異，MIDL 可讓您修改表示資料的方式。</span><span class="sxs-lookup"><span data-stu-id="47e88-106">To accommodate these differences, MIDL enables you to modify the way you represent data.</span></span> <span data-ttu-id="47e88-107">您有時可以將資料轉換成您的應用程式可以更輕鬆處理的格式，以簡化開發工作。</span><span class="sxs-lookup"><span data-stu-id="47e88-107">You can sometimes simplify development by converting data into a format that your application can more easily handle.</span></span> <span data-ttu-id="47e88-108">您可以改變應用程式的資料格式，讓它可以更有效率地透過網路傳輸。</span><span class="sxs-lookup"><span data-stu-id="47e88-108">You can alter your application's data format so that it can be more efficiently transmitted over the network.</span></span>

<span data-ttu-id="47e88-109">**\[**[**傳送 \_ as**](/windows/desktop/Midl/transmit-as) **\]** 和 **\[** [**表示 \_ 為**](/windows/desktop/Midl/represent-as) **\]** 屬性，會指示編譯器將存根在用戶端和伺服器之間傳遞的 transmissible 型別與用戶端和伺服器應用程式使用的使用者類型產生關聯。</span><span class="sxs-lookup"><span data-stu-id="47e88-109">The **\[**[**transmit\_as**](/windows/desktop/Midl/transmit-as)**\]** and **\[**[**represent\_as**](/windows/desktop/Midl/represent-as)**\]** attributes instruct the compiler to associate a transmissible type that the stub passes between client and server, with a user type that the client and server applications use.</span></span> <span data-ttu-id="47e88-110">您必須提供在使用者類型和 transmissible 型別之間進行轉換的常式，以及釋放用來保存已轉換資料之記憶體的常式。</span><span class="sxs-lookup"><span data-stu-id="47e88-110">You must supply the routines that carry out the conversion between the user type and the transmissible type, and the routines to release the memory that was used to hold the converted data.</span></span> <span data-ttu-id="47e88-111">使用 [ **\[ 傳輸 \_ 為 \]** IDL] 屬性或 [ **\[ 表示 \_ 為 \]** ACF] 屬性，會指示存根在傳輸之前和之後呼叫這些轉換常式。</span><span class="sxs-lookup"><span data-stu-id="47e88-111">Using the **\[transmit\_as\]** IDL attribute or the **\[represent\_as\]** ACF attribute instructs the stub to call these conversion routines before and after transmission.</span></span> <span data-ttu-id="47e88-112">[ **\[** [**傳輸 \_ 為**](/windows/desktop/Midl/transmit-as)] **\]** 屬性可讓您將一種資料類型轉換成另一種資料類型，以便透過網路傳輸。</span><span class="sxs-lookup"><span data-stu-id="47e88-112">The **\[**[**transmit\_as**](/windows/desktop/Midl/transmit-as)**\]** attribute lets you convert one data type to another data type for transmission over the network.</span></span> <span data-ttu-id="47e88-113">**\[**[**代表 \_ as**](/windows/desktop/Midl/represent-as) **\]** 屬性可讓您控制從網路到應用程式的資料呈現方式。</span><span class="sxs-lookup"><span data-stu-id="47e88-113">The **\[**[**represent\_as**](/windows/desktop/Midl/represent-as)**\]** attribute lets you control the way data from the network is presented to the application.</span></span>

<span data-ttu-id="47e88-114">「 **\[** [**網路 \_ 封送**](/windows/desktop/Midl/wire-marshal)處理」 **\]** 和「 **\[** [**使用者 \_ 封送**](/windows/desktop/Midl/user-marshal)處理」 **\]** 屬性是憑證-DCE IDL 的 Microsoft 擴充功能。</span><span class="sxs-lookup"><span data-stu-id="47e88-114">The **\[**[**wire\_marshal**](/windows/desktop/Midl/wire-marshal)**\]** and **\[**[**user\_marshal**](/windows/desktop/Midl/user-marshal)**\]** attributes are Microsoft extensions to the OSF-DCE IDL.</span></span> <span data-ttu-id="47e88-115">其語法和功能類似于 DCE 指定的 **\[ 傳輸 \_ 方式 \]** ，而且會分別 **\[ 表示 \_ 為 \]** 屬性。</span><span class="sxs-lookup"><span data-stu-id="47e88-115">Their syntax and functionality are similar to that of the DCE-specified **\[transmit\_as\]** and **\[represent\_as\]** attributes, respectively.</span></span> <span data-ttu-id="47e88-116">差別在於，您可以直接封送處理資料，而不是將資料從一種類型轉換成另一種類型。</span><span class="sxs-lookup"><span data-stu-id="47e88-116">The difference is that, instead of converting the data from one type to another, you marshal the data directly.</span></span> <span data-ttu-id="47e88-117">若要這樣做，您必須提供外部常式來調整用戶端和伺服器端上的資料緩衝區大小、在用戶端和伺服器端上封送處理和封送處理資料，以及釋放伺服器端的資料。</span><span class="sxs-lookup"><span data-stu-id="47e88-117">To do this, you must supply the external routines for sizing the data buffer on the client and server sides, marshaling and unmarshaling the data on the client and server sides, and freeing the data on the server side.</span></span> <span data-ttu-id="47e88-118">MIDL 編譯器會產生格式代碼，以指示 NDR 引擎在需要時呼叫這些外部常式。</span><span class="sxs-lookup"><span data-stu-id="47e88-118">The MIDL compiler generates format codes that instruct the NDR engine to call these external routines when needed.</span></span>

<span data-ttu-id="47e88-119">「 **\[ 網路 \_ 封 \] 送** 處理」和「 **\[ 使用者 \_ 封送 \]** 處理」屬性可讓您封送處理資料類型，否則無法跨進程界限傳輸這些資料類型。</span><span class="sxs-lookup"><span data-stu-id="47e88-119">The **\[wire\_marshal\]** and **\[user\_marshal\]** attributes make it possible to marshal data types that otherwise could not be transmitted across process boundaries.</span></span> <span data-ttu-id="47e88-120">此外，因為與類型轉換相關聯的額外負荷較少，所以在執行時間相較于 **\[ 傳送 \_ \] as** 和 **\[ 表示 \_ 為 \]**，連接 **\[ \_ 封送 \]** 處理和 **\[ 使用者 \_ 封送 \]** 處理可提供改善的效能。</span><span class="sxs-lookup"><span data-stu-id="47e88-120">Also, because there is less overhead associated with the type conversion, **\[wire\_marshal\]** and **\[user\_marshal\]** provide improved performance at run time, when compared to **\[transmit\_as\]** and **\[represent\_as\]**.</span></span> <span data-ttu-id="47e88-121">「 **\[ 有線 \_ 封 \] 送** 處理」和「 **\[ 使用者 \_ 封送 \]** 處理」屬性彼此互斥，而且相對於「 **\[ 傳輸 \_ 為 \]** 」和「 **\[ 表示 \_ 為 \]** 指定類型的屬性」。</span><span class="sxs-lookup"><span data-stu-id="47e88-121">The **\[wire\_marshal\]** and **\[user\_marshal\]** attributes are mutually exclusive with respect to each other and with respect to the **\[transmit\_as\]** and **\[represent\_as\]** attributes for a given type.</span></span>

<span data-ttu-id="47e88-122">請務必注意，連接 **\[ \_ 封送 \]** 處理和 **\[ 使用者 \_ 封送 \]** 處理屬性的執行必須遵循憑證-DCE 規格所規定的封送處理規則。</span><span class="sxs-lookup"><span data-stu-id="47e88-122">It is important to note that the implementation of the **\[wire\_marshal\]** and **\[user\_marshal\]** attributes must follow the marshalling rules dictated by OSF-DCE specification.</span></span> <span data-ttu-id="47e88-123">基於這個理由，如果您不熟悉網路通訊協定，則不建議使用這些屬性。</span><span class="sxs-lookup"><span data-stu-id="47e88-123">For that reason, the use of these attributes is not recommended if you are not familiar with the wire protocol.</span></span> <span data-ttu-id="47e88-124">有關 NDR 語法傳送的詳細資訊，可以在 [www.opengroup.org](https://pubs.opengroup.org/onlinepubs/9629399/chap14.htm)中找到。</span><span class="sxs-lookup"><span data-stu-id="47e88-124">More information regarding the NDR Syntax Transfer can be found at [www.opengroup.org](https://pubs.opengroup.org/onlinepubs/9629399/chap14.htm).</span></span>

<span data-ttu-id="47e88-125">本節將簡短介紹 MIDL 屬性的下列主題：</span><span class="sxs-lookup"><span data-stu-id="47e88-125">This section provides a brief overview of these for MIDL attributes, in the following topics:</span></span>

-   [<span data-ttu-id="47e88-126">**傳送 \_ as 和表示 \_ 為屬性**</span><span class="sxs-lookup"><span data-stu-id="47e88-126">**The transmit\_as and represent\_as Attributes**</span></span>](the-transmit-as-and-represent-as-attributes.md)
-   [<span data-ttu-id="47e88-127">**網路 \_ 封送處理和使用者 \_ 封送處理屬性**</span><span class="sxs-lookup"><span data-stu-id="47e88-127">**The wire\_marshal and user\_marshal Attributes**</span></span>](the-wire-marshal-and-user-marshal-attributes.md)

 

 