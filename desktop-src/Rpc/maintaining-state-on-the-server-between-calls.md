---
title: 在呼叫之間維護伺服器上的狀態
description: 您通常需要在不同的 RPC 呼叫 \ 郵件之間維護伺服器上的狀態。使用內容控制碼是最好的方法。 在內部操作內容控制碼的一些單字，有助於瞭解內容控制碼的最大效果。
ms.assetid: f76ec489-f48e-473d-b519-3ac143d41fa4
keywords:
- 遠端程序呼叫 RPC、最佳作法、維護呼叫之間的狀態
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e564acbb4748cd76988c1b064a58ede2169d3d20da4033774f3141883a7193bc
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/11/2021
ms.locfileid: "118928583"
---
# <a name="maintaining-state-on-the-server-between-calls"></a>在呼叫之間維護伺服器上的狀態

您通常必須在不同的 RPC 呼叫之間維護伺服器上的狀態，而使用內容控制碼是最好的方式。 在內部操作內容控制碼的一些單字，有助於瞭解內容控制碼的最大效果。

用戶端永遠不會收到保留在伺服器上的狀態。 伺服器上的狀態通常是記憶體區塊的指標，而用戶端沒有相關的資訊。 所有用戶端接收都是一個大型的唯一數位，其中有與其相關聯的其他資訊，伺服器會傳送給用戶端，而這代表所有後續作業中的內容控制碼。 只要用戶端參考開啟的控制碼，它就會在開啟內容控制碼時，傳送從伺服器收到的大量數位。

伺服器會持續追蹤傳送至用戶端的所有大型數位。 當伺服器收到代表內容控制碼的大量數位時，它會在集合中查閱該用戶端的有效、未完成內容控制碼的數目，並尋找對應至指定之大型數位的伺服器端內容。 這會傳遞至伺服器常式。 如果找不到大型數位，則 \_ \_ 會引發 RPC X SS \_ 內容不相符例外狀況，並將其 \_ 傳播至用戶端。

此設計的 corollaries 如下所示：

-   內容控制碼只在現有用戶端/伺服器會話的內容中有效。 它無法傳遞給另一個用戶端。
-   如果伺服器重新開機，或失去與用戶端的連線，則內容控制碼會變成無效。
-   用戶端無法解讀伺服器上內容控制碼所代表的內容。 對用戶端而言，所有內容控制碼只是很大的數位。

如果用戶端失敗，伺服器將會收到通知，並使用執行下機制來清除其內容控制碼。

 

 




