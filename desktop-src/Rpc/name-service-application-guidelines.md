---
title: 名稱服務應用程式指導方針
description: 當您開發分散式應用程式時，您需要為應用程式使用者提供方法，以指定在名稱服務資料庫中用來註冊應用程式的名稱。
ms.assetid: cda997b3-6031-4c0f-affc-c766ba4b7fd5
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b7e0e79f8ddb9e2076da8d7b8d2c275cb1b1941f6867bfea68dd46bc6c352d49
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/11/2021
ms.locfileid: "118927827"
---
# <a name="name-service-application-guidelines"></a>名稱服務應用程式指導方針

當您開發分散式應用程式時，您需要為應用程式使用者提供方法，以指定在名稱服務資料庫中用來註冊應用程式的名稱。 這個方法可以包含資料檔案、命令列輸入或對話方塊。

雖然 RPC 名稱服務架構支援各種方法來組織應用程式的伺服器專案，但它已針對查閱進行優化。 因此，頻繁的更新可能會阻礙名稱服務和應用程式的效能。 若要避免不必要地匯出資訊，請選擇一個可讓伺服器判斷其資訊是否在名稱服務資料庫中的設計。 此外，每個伺服器實例都應該匯出為它自己的專案名稱。 否則，實例很難變更其支援的物件 Uuid 或通訊協定順序，而不會干擾另一個實例的資訊。

下列方法可避免這些錯誤，無論您的網路使用什麼名稱服務，都能提供良好的效能。

首先，請設計您的應用程式，以便在第一次啟動給定的伺服器實例時，挑選唯一的伺服器專案名稱，並將此名稱連同應用程式的其他設定資訊儲存在登錄中。 然後，將其系結控制碼和物件 Uuid （如果有的話）匯出至其名稱服務專案。

後續的伺服器實例調用應該檢查名稱服務專案是否存在，並且包含一組正確的物件 Uuid 和系結控制碼。 遺漏的專案可能表示系統管理員已將它移除，或電源中斷導致名稱服務資訊遺失。 請務必確認專案中的系結控制碼正確;例如，如果系統管理員將 TCP/IP 支援新增至電腦，則在呼叫 [**RpcServerUseAllProtseqs**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseallprotseqs)時，RPC 伺服器將會接聽該通訊協定順序。 但是，如果伺服器未更新名稱服務專案，將不會通知用戶端支援 TCP。

當用戶端匯入時，它應該將 **Null** 指定為專案名稱。 指定 **Null** 會導致 Microsoft RPC 程式庫函式在用戶端電腦的網域或工作組中的所有名稱服務專案中搜尋介面，進而尋找每個實例的資訊。

如果您使用物件 Uuid 來代表已知的物件，例如印表機，則可以使用此方法的變化。 您可以設計應用程式，讓每個實例為每個支援的物件（例如 "/.：/）建立一個專案，而不是將系結匯出至一個專案。printers/Laser1 "和"/.：/印表機/Laser2」。 然後，讓伺服器將其系結控制碼匯出至每個伺服器專案，以及與該專案相關的物件 UUID。

在此情況下，用戶端可以從相關的伺服器專案匯入，依名稱查閱資源;它不需要資源的物件 UUID。 如果它有資源 UUID 但沒有名稱，則可以從 **null** 專案匯入。

 

 




