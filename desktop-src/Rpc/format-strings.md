---
title: 格式字串
description: 格式字串是 NDR 引擎可理解的已轉譯標記。 格式字串通常稱為 MOPs;本檔會在整個中使用詞彙格式字串。
ms.assetid: 548283bd-023a-41dd-b1d0-661305d019e9
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 563dd9e4145a7d83b2e49f180329c05c1d55155d
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/16/2019
ms.locfileid: "103673819"
---
# <a name="format-strings"></a>格式字串

格式字串是 NDR 引擎可理解的已轉譯標記。 格式字串通常稱為 MOPs;本檔會在整個中使用詞彙格式字串。

為了更加精確，格式字元是個別 (不可部分完成的) 可解譯 token。 每個格式字元都是大小的一個位元組。 格式字串是格式化字元或格式字元和數值資料的序列。 詞彙描述項也用於命名通用序列;例如，參數格式字串或參數描述項是用來描述常式參數的格式字串。

格式字元具有如 FC \_ LONG 或 fc 結構之類的暗示符號名稱 \_ 。 MIDL 和 NDR 引擎使用的所有格式字串字元都定義于 Ndrtypes .h 檔案中。

## <a name="format-string-tables"></a>格式化字串資料表

引擎會使用兩個主要格式字串資料表：程式格式字串資料表、 **\_ \_ midl \_ ProcFormatString**、保留程式描述項，以及保留資料類型描述元的類型格式字串資料表 **\_ \_ midl \_ TypeFormatString**。 編譯器會在主要存根檔案中同時產生 (\* \_ c. c、 \* \_ s. c \* \_) 。 程式格式字串表大多使用於各種解譯器，但它也會用於緩衝區轉換，不論編譯器模式為何。 在呼叫核心 NDR 引擎來指出要處理的特定資料類型時，會使用類型格式字串表。

## <a name="format-string-notation"></a>格式字串標記法

本檔中使用的標記法會遵循常見的程式設計描述指導方針，並使用橫條 ( \| ) 用來表示替代的結構和方括弧 ( \[ \] ) 用來表示選擇性元素。 格式字串通常會堆疊以提供可讀性 (責任) 。 在本檔中，FC 代表單一格式字元。 格式字元使用其實際的符號名稱，以全部大寫顯示。 其他任意欄位會以名稱和大小表示。

角括弧 ( <> ) 用來表示描述項的大小。 採用下表所示的慣例。



| 表示法     | 意義                                                   |
|--------------|-----------------------------------------------------------|
| <*n-1*>  | 描述項的大小為 n 個位元組。                        |
| <>     | 描述項的大小會有所不同。                            |
| {<>}\* | 描述項會重複任意次數 (0、1、2 ... ) 。 |



 

下列格式字元具有特殊意義。



| 字元 | 意義                                   |
|-----------|-------------------------------------------|
| FC \_ 端   | 指出某些格式字串的結尾。 |
| FC \_ 板   | 未解釋的填補字元。              |



 

 

 




