---
title: 用戶端非同步管道處理
description: 在進行非同步遠端呼叫之前，用戶端必須先初始化非同步控制碼。
ms.assetid: 3d54b233-d8b0-45d1-b759-0d2d24c1e247
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 041e33ec998da568aa6836d141e7208aa43025f28b60c2582a8fc30faee4f901
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/11/2021
ms.locfileid: "118931741"
---
# <a name="client-side-asynchronous-pipe-handling"></a>用戶端非同步管道處理

在進行非同步遠端呼叫之前，用戶端必須先初始化非同步控制碼。 如同 nonpipe 程式，用戶端會呼叫非同步函式，並以非同步控制碼作為第一個參數，並使用非同步控制碼來傳送和接收管道資料、查詢呼叫的狀態，以及接收回複。

用戶端會以非同步控制碼做為第一個參數來進行非同步遠端程序呼叫。 用戶端可以使用此控制碼來查詢呼叫的狀態，並接收回複。 非同步管道模型是對稱的。 用戶端和伺服器應用程式都會主動 (傳送和接收管道資料，而不是同步 RPC，在這種情況下，管道資料會以被動) 傳送和接收。

用戶端會藉由在適當的非同步管道上呼叫 **push** 函數，並以管道的狀態變數作為第一個參數，以傳送非同步管道資料。 當 **push** 函數傳回時，用戶端可以修改或釋放傳送緩衝區。

如果 \_ \_ \_ \_ 非同步控制碼中已設定 [傳送完成時的 RPC 非同步通知] \_ 旗標，而且如果使用 apc 做為通知機制，當管道傳送真的完成時，就會將 APC 排入佇列。 您可以利用這項機制來實行流程式控制制。 但是請注意，如果用戶端在先前的推送完成之前推入另一個緩衝區，用戶端可能會根據傳送作業的速度，只接收一個傳送完成通知，而不是每個緩衝區或每個 **推送** 作業的一個通知。 當用戶端傳送所有管道資料時，它會使用設定為0的專案數目進行最後一個 **推** 播呼叫。

用戶端程式會藉由在適當的非同步管道上呼叫 **提取** 函式，以管道的狀態變數作為第一個參數，來接收非同步管道資料。 如果沒有可用的管道資料， **提取** 函數會傳回 RPC \_ S \_ 非同步 \_ 呼叫 \_ 擱置。

如果通知機制是 APC，且伺服器傳回 RPC \_ S \_ 非同步 \_ 呼叫 \_ 擱置，用戶端必須等到它從執行時間收到 **RpcReceiveComplete** 的 APC 之後，再呼叫 **pull** 。

 

 




