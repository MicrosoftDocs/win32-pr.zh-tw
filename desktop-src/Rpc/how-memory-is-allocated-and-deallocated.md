---
title: 記憶體的配置和解除配置
description: 根據預設，MIDL 編譯器產生的存根程式碼會呼叫使用者提供的函式，以配置和釋放記憶體。 這些稱為「midl \_ 使用者配置」和「midl 使用者可用」的函式 \_ \_ \_ 必須由開發人員提供，並連結到應用程式。
ms.assetid: 65af7a6d-4cfa-4175-9085-560d97cab41d
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 331c32ac4d33fbd67f617f79125921ddfffc0de5
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/20/2020
ms.locfileid: "104376113"
---
# <a name="how-memory-is-allocated-and-deallocated"></a><span data-ttu-id="a6aa6-104">記憶體的配置和解除配置</span><span class="sxs-lookup"><span data-stu-id="a6aa6-104">How Memory Is Allocated and Deallocated</span></span>

<span data-ttu-id="a6aa6-105">根據預設，MIDL 編譯器產生的存根程式碼會呼叫使用者提供的函式，以配置和釋放記憶體。</span><span class="sxs-lookup"><span data-stu-id="a6aa6-105">By default, stub code generated by the MIDL compiler calls user-supplied functions to allocate and free memory.</span></span> <span data-ttu-id="a6aa6-106">這些稱為「 [**midl \_ 使用者 \_ 配置**](/windows/desktop/Midl/midl-user-allocate-1) 」和「 [**midl \_ 使用者 \_ 可用**](/windows/desktop/Midl/midl-user-free-1)」的函式必須由開發人員提供，並連結到應用程式。</span><span class="sxs-lookup"><span data-stu-id="a6aa6-106">These functions, named [**midl\_user\_allocate**](/windows/desktop/Midl/midl-user-allocate-1) and [**midl\_user\_free**](/windows/desktop/Midl/midl-user-free-1), must be supplied by the developer and linked with the application.</span></span>

<span data-ttu-id="a6aa6-107">所有應用程式都必須提供 [**midl \_ 使用者 \_ 配置**](/windows/desktop/Midl/midl-user-allocate-1) 和 [**midl \_ 使用者 \_ 免費**](/windows/desktop/Midl/midl-user-free-1)的實作為，即使這些函式的名稱可能不會明確出現在存根中也一樣。</span><span class="sxs-lookup"><span data-stu-id="a6aa6-107">All applications must supply implementations of [**midl\_user\_allocate**](/windows/desktop/Midl/midl-user-allocate-1) and [**midl\_user\_free**](/windows/desktop/Midl/midl-user-free-1), even though the names of these functions may not appear explicitly in the stubs.</span></span> <span data-ttu-id="a6aa6-108">唯一的例外狀況是當您在憑證相容性 (/osf) 模式中進行編譯時。</span><span class="sxs-lookup"><span data-stu-id="a6aa6-108">The only exception is when you are compiling in OSF-compatibility (/osf) mode.</span></span> <span data-ttu-id="a6aa6-109">這些使用者提供的函式必須符合特定的定義函式原型，否則可以用任何方便或適用于應用程式的方式來執行。</span><span class="sxs-lookup"><span data-stu-id="a6aa6-109">These user-supplied functions must match a specific, defined function prototype but otherwise, can be implemented in any way that is convenient or useful for the application.</span></span> <span data-ttu-id="a6aa6-110">或者，應用程式可以使用「RpcSs 記憶體管理」套件。</span><span class="sxs-lookup"><span data-stu-id="a6aa6-110">Alternatively, applications can use the RpcSs Memory Management Package.</span></span> <span data-ttu-id="a6aa6-111">Microsoft RPC 執行時間程式庫提供這組函數。</span><span class="sxs-lookup"><span data-stu-id="a6aa6-111">The Microsoft RPC run-time library supplies this group of functions.</span></span>

<span data-ttu-id="a6aa6-112">下列各節描述 RPC 記憶體管理功能。</span><span class="sxs-lookup"><span data-stu-id="a6aa6-112">The following sections describe the RPC memory management functions.</span></span>

-   [<span data-ttu-id="a6aa6-113">**midl \_ 使用者 \_ 配置**</span><span class="sxs-lookup"><span data-stu-id="a6aa6-113">**midl\_user\_allocate**</span></span>](/windows/desktop/Midl/midl-user-allocate-1)
-   [<span data-ttu-id="a6aa6-114">**midl \_ 使用者 \_ 免費**</span><span class="sxs-lookup"><span data-stu-id="a6aa6-114">**midl\_user\_free**</span></span>](/windows/desktop/Midl/midl-user-free-1)
-   [<span data-ttu-id="a6aa6-115">RpcSs 記憶體管理套件</span><span class="sxs-lookup"><span data-stu-id="a6aa6-115">RpcSs Memory Management Package</span></span>](rpcss-memory-management-package.md)

 

 