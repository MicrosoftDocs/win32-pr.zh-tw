---
title: 瞭解延伸的錯誤資訊
description: 延伸的錯誤資訊是一組記錄，每個記錄都會指出如何透過系統或應用程式中的特定層傳遞錯誤碼。
ms.assetid: 1b112e49-bdb2-4014-b86d-3c6d8ebe4fcd
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1b2918caa446f7cee9c4eaa609a5713c9cb385e4
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/16/2019
ms.locfileid: "104021809"
---
# <a name="understanding-extended-error-information"></a><span data-ttu-id="cb47d-103">瞭解延伸的錯誤資訊</span><span class="sxs-lookup"><span data-stu-id="cb47d-103">Understanding Extended Error Information</span></span>

<span data-ttu-id="cb47d-104">延伸的錯誤資訊是一組記錄，每個記錄都會指出如何透過系統或應用程式中的特定層傳遞錯誤碼。</span><span class="sxs-lookup"><span data-stu-id="cb47d-104">Extended error information is an array of records, each indicating the passing of the error code through a particular layer in the system or application.</span></span> <span data-ttu-id="cb47d-105">如果電腦 C 中發生錯誤，則會從電腦 A 呼叫它，而電腦 C 上的 RPC 執行時間會產生一或多個描述錯誤的記錄，並將其傳遞給電腦 B。電腦 B 可以將一或多筆記錄新增至現有鏈的開頭，然後將完整鏈傳送至。可以加入一或多筆記錄，以及顯示或記錄資訊。</span><span class="sxs-lookup"><span data-stu-id="cb47d-105">If an error occurs on a machine C, as it is called from machine B, which in turn is called from machine A, the RPC run time on machine C generates one or more records describing the error, and passes them to machine B. Machine B can add one or more records to the head of the existing chain, and passes the full chain to A. A can add one or more records, and display or log the information.</span></span> <span data-ttu-id="cb47d-106">基本上，擴充的錯誤鏈表示錯誤的歷程記錄。</span><span class="sxs-lookup"><span data-stu-id="cb47d-106">Essentially, then, the extended error chain represents the history of the error.</span></span>

<span data-ttu-id="cb47d-107">擴充的錯誤資訊不會取代 (RPC \_ S \_ \* 狀態碼) 的錯誤碼。</span><span class="sxs-lookup"><span data-stu-id="cb47d-107">Extended error information does not replace the error code (the RPC\_S\_\* status code).</span></span> <span data-ttu-id="cb47d-108">無論是否產生擴充錯誤資訊，錯誤碼都會保持不變。</span><span class="sxs-lookup"><span data-stu-id="cb47d-108">Regardless of how much or whether extended error information is generated, the error code remains unchanged.</span></span>

<span data-ttu-id="cb47d-109">每個擴充的錯誤資訊記錄都會包含下列內容。</span><span class="sxs-lookup"><span data-stu-id="cb47d-109">Each extended error information record contains the following.</span></span> <span data-ttu-id="cb47d-110">如需詳細資訊，請參閱 [**RPC \_ 擴充 \_ 錯誤 \_ 資訊**](/windows/win32/api/rpcasync/ns-rpcasync-rpc_extended_error_info) ：</span><span class="sxs-lookup"><span data-stu-id="cb47d-110">Please see [**RPC\_EXTENDED\_ERROR\_INFO**](/windows/win32/api/rpcasync/ns-rpcasync-rpc_extended_error_info) for more information:</span></span>

-   <span data-ttu-id="cb47d-111">ComputerName —這是產生錯誤之電腦的非限定 DNS 名稱。</span><span class="sxs-lookup"><span data-stu-id="cb47d-111">ComputerName—this is the non-qualified DNS name of the computer on which the error originated.</span></span> <span data-ttu-id="cb47d-112">只有電腦界限上的記錄才有此資訊。</span><span class="sxs-lookup"><span data-stu-id="cb47d-112">Only records on machine boundaries have this information.</span></span> <span data-ttu-id="cb47d-113">例如，在稍早和電腦 A、B 和 C 所述的案例中，會針對下欄欄位定義 ComputerName：</span><span class="sxs-lookup"><span data-stu-id="cb47d-113">For example, in the scenario described earlier with machines A, B, and C, the ComputerName is defined for the following fields:</span></span>

    | <span data-ttu-id="cb47d-114">Record</span><span class="sxs-lookup"><span data-stu-id="cb47d-114">Record</span></span>                            | <span data-ttu-id="cb47d-115">ComputerName 欄位</span><span class="sxs-lookup"><span data-stu-id="cb47d-115">ComputerName field</span></span> |
    |-----------------------------------|--------------------|
    | <span data-ttu-id="cb47d-116">\#電腦 C 產生的記錄1</span><span class="sxs-lookup"><span data-stu-id="cb47d-116">Record \#1 generated by machine C</span></span> | \-                 |
    | <span data-ttu-id="cb47d-117">\#電腦 C 產生的記錄2</span><span class="sxs-lookup"><span data-stu-id="cb47d-117">Record \#2 generated by machine C</span></span> | \-                 |
    | <span data-ttu-id="cb47d-118">\#電腦 C 產生的記錄3</span><span class="sxs-lookup"><span data-stu-id="cb47d-118">Record \#3 generated by machine C</span></span> | <span data-ttu-id="cb47d-119">C</span><span class="sxs-lookup"><span data-stu-id="cb47d-119">C</span></span>                  |
    | <span data-ttu-id="cb47d-120">\#電腦 B 所產生的記錄1</span><span class="sxs-lookup"><span data-stu-id="cb47d-120">Record \#1 generated by machine B</span></span> | \-                 |
    | <span data-ttu-id="cb47d-121">\#電腦 B 所產生的記錄2</span><span class="sxs-lookup"><span data-stu-id="cb47d-121">Record \#2 generated by machine B</span></span> | \-                 |
    | <span data-ttu-id="cb47d-122">\#電腦 B 所產生的記錄3</span><span class="sxs-lookup"><span data-stu-id="cb47d-122">Record \#3 generated by machine B</span></span> | <span data-ttu-id="cb47d-123">B</span><span class="sxs-lookup"><span data-stu-id="cb47d-123">B</span></span>                  |
    | <span data-ttu-id="cb47d-124">\#電腦 A 所產生的記錄1</span><span class="sxs-lookup"><span data-stu-id="cb47d-124">Record \#1 generated by machine A</span></span> | \-                 |
    | <span data-ttu-id="cb47d-125">\#電腦 A 所產生的記錄2</span><span class="sxs-lookup"><span data-stu-id="cb47d-125">Record \#2 generated by machine A</span></span> | \-                 |
    | <span data-ttu-id="cb47d-126">\#電腦 A 所產生的記錄3</span><span class="sxs-lookup"><span data-stu-id="cb47d-126">Record \#3 generated by machine A</span></span> | \-                 |
    | <span data-ttu-id="cb47d-127">連鎖店的標頭</span><span class="sxs-lookup"><span data-stu-id="cb47d-127">Head of the chain</span></span>                 |                    |

    

     

<!-- -->

-   <span data-ttu-id="cb47d-128">ProcessID-產生錯誤之進程的處理序識別碼。</span><span class="sxs-lookup"><span data-stu-id="cb47d-128">ProcessID—process identifier of the process that generated the error.</span></span>
-   <span data-ttu-id="cb47d-129">時間戳記：發生錯誤的時間，以 UTC 格式表示。</span><span class="sxs-lookup"><span data-stu-id="cb47d-129">TimeStamp—time when the error occurred, expressed in UTC format.</span></span>
-   <span data-ttu-id="cb47d-130">產生元件-產生錯誤之邏輯元件的整數程式碼定義。</span><span class="sxs-lookup"><span data-stu-id="cb47d-130">Generating Component—integer code definition of the logical component that generated the error.</span></span> <span data-ttu-id="cb47d-131">目前已定義下列元件：</span><span class="sxs-lookup"><span data-stu-id="cb47d-131">The following components are currently defined:</span></span>

    | <span data-ttu-id="cb47d-132">程式碼</span><span class="sxs-lookup"><span data-stu-id="cb47d-132">Code</span></span> | <span data-ttu-id="cb47d-133">Name</span><span class="sxs-lookup"><span data-stu-id="cb47d-133">Name</span></span>              | <span data-ttu-id="cb47d-134">描述</span><span class="sxs-lookup"><span data-stu-id="cb47d-134">Description</span></span>                                                                                                                                                                           |
    |------|-------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
    | <span data-ttu-id="cb47d-135">1</span><span class="sxs-lookup"><span data-stu-id="cb47d-135">1</span></span>    | <span data-ttu-id="cb47d-136">應用程式</span><span class="sxs-lookup"><span data-stu-id="cb47d-136">Application</span></span>       | <span data-ttu-id="cb47d-137">元件擁有特定 RPC 呼叫的管理員常式</span><span class="sxs-lookup"><span data-stu-id="cb47d-137">The component owning the manager routine for the particular RPC call</span></span>                                                                                                                  |
    | <span data-ttu-id="cb47d-138">2</span><span class="sxs-lookup"><span data-stu-id="cb47d-138">2</span></span>    | <span data-ttu-id="cb47d-139">執行階段</span><span class="sxs-lookup"><span data-stu-id="cb47d-139">Runtime</span></span>           | <span data-ttu-id="cb47d-140">RPC 執行時間</span><span class="sxs-lookup"><span data-stu-id="cb47d-140">The RPC run time</span></span>                                                                                                                                                                      |
    | <span data-ttu-id="cb47d-141">3</span><span class="sxs-lookup"><span data-stu-id="cb47d-141">3</span></span>    | <span data-ttu-id="cb47d-142">安全性提供者</span><span class="sxs-lookup"><span data-stu-id="cb47d-142">Security Provider</span></span> | <span data-ttu-id="cb47d-143">此呼叫的安全性提供者。</span><span class="sxs-lookup"><span data-stu-id="cb47d-143">The security provider for this call.</span></span>                                                                                                                                                  |
    | <span data-ttu-id="cb47d-144">4</span><span class="sxs-lookup"><span data-stu-id="cb47d-144">4</span></span>    | <span data-ttu-id="cb47d-145">NPFS</span><span class="sxs-lookup"><span data-stu-id="cb47d-145">NPFS</span></span>              | <span data-ttu-id="cb47d-146">NPFS 檔案系統</span><span class="sxs-lookup"><span data-stu-id="cb47d-146">The NPFS file system</span></span>                                                                                                                                                                  |
    | <span data-ttu-id="cb47d-147">5</span><span class="sxs-lookup"><span data-stu-id="cb47d-147">5</span></span>    | <span data-ttu-id="cb47d-148">Rdr</span><span class="sxs-lookup"><span data-stu-id="cb47d-148">RDR</span></span>               | <span data-ttu-id="cb47d-149">重新導向程式</span><span class="sxs-lookup"><span data-stu-id="cb47d-149">The Redirector</span></span>                                                                                                                                                                        |
    | <span data-ttu-id="cb47d-150">6</span><span class="sxs-lookup"><span data-stu-id="cb47d-150">6</span></span>    | <span data-ttu-id="cb47d-151">Nmp</span><span class="sxs-lookup"><span data-stu-id="cb47d-151">NMP</span></span>               | <span data-ttu-id="cb47d-152">具名管道系統。</span><span class="sxs-lookup"><span data-stu-id="cb47d-152">The named pipe system.</span></span> <span data-ttu-id="cb47d-153">這可以是 NPFS 或 RDR，但在許多情況下，RPC 執行時間並不知道誰執行了要求的作業，而且在這種情況下，會傳回 NMP。</span><span class="sxs-lookup"><span data-stu-id="cb47d-153">This can be either NPFS or RDR, but in many cases the RPC run time does not know who performed the requested the operation, and in such cases NMP is returned.</span></span> |
    | <span data-ttu-id="cb47d-154">7</span><span class="sxs-lookup"><span data-stu-id="cb47d-154">7</span></span>    | <span data-ttu-id="cb47d-155">IO</span><span class="sxs-lookup"><span data-stu-id="cb47d-155">IO</span></span>                | <span data-ttu-id="cb47d-156">Io 系統或 IO 系統所使用的驅動程式。</span><span class="sxs-lookup"><span data-stu-id="cb47d-156">The IO system or a driver used by the IO system.</span></span> <span data-ttu-id="cb47d-157">這可以是 NPFS、RDR 或 Winsock 提供者。</span><span class="sxs-lookup"><span data-stu-id="cb47d-157">This can be either NPFS, RDR, or a Winsock provider.</span></span>                                                                                 |
    | <span data-ttu-id="cb47d-158">8</span><span class="sxs-lookup"><span data-stu-id="cb47d-158">8</span></span>    | <span data-ttu-id="cb47d-159">Winsock</span><span class="sxs-lookup"><span data-stu-id="cb47d-159">Winsock</span></span>           | <span data-ttu-id="cb47d-160">Winsock 提供者</span><span class="sxs-lookup"><span data-stu-id="cb47d-160">The Winsock provider</span></span>                                                                                                                                                                  |
    | <span data-ttu-id="cb47d-161">9</span><span class="sxs-lookup"><span data-stu-id="cb47d-161">9</span></span>    | <span data-ttu-id="cb47d-162">授權碼</span><span class="sxs-lookup"><span data-stu-id="cb47d-162">Authz code</span></span>        | <span data-ttu-id="cb47d-163">授權 Api。</span><span class="sxs-lookup"><span data-stu-id="cb47d-163">The Authorization APIs.</span></span>                                                                                                                                                               |
    | <span data-ttu-id="cb47d-164">10</span><span class="sxs-lookup"><span data-stu-id="cb47d-164">10</span></span>   | <span data-ttu-id="cb47d-165">Lpc</span><span class="sxs-lookup"><span data-stu-id="cb47d-165">LPC</span></span>               | <span data-ttu-id="cb47d-166">本機程序呼叫工具。</span><span class="sxs-lookup"><span data-stu-id="cb47d-166">The Local Procedure Call facility.</span></span>                                                                                                                                                    |

    

     

<!-- -->

-   <span data-ttu-id="cb47d-167">狀態-圖層產生的錯誤碼或傳回的錯誤碼</span><span class="sxs-lookup"><span data-stu-id="cb47d-167">Status—error code generated or returned by the layer</span></span>
-   <span data-ttu-id="cb47d-168">DetectionLocation-識別偵測到錯誤之程式碼位置的唯一數位。</span><span class="sxs-lookup"><span data-stu-id="cb47d-168">DetectionLocation—unique number identifying the location of the code where the error was detected.</span></span> <span data-ttu-id="cb47d-169">此欄位系結至程式碼，並將從版本變更為版本。</span><span class="sxs-lookup"><span data-stu-id="cb47d-169">This field is tied to the code, and will change from version to version.</span></span> <span data-ttu-id="cb47d-170">將會發佈最常遇到的偵測位置的個別清單。</span><span class="sxs-lookup"><span data-stu-id="cb47d-170">A separate list of the most commonly encountered detection locations will be published.</span></span>
-   <span data-ttu-id="cb47d-171">旗標-指定記錄相關資訊的旗標。</span><span class="sxs-lookup"><span data-stu-id="cb47d-171">Flags—flags specifying information about the record.</span></span> <span data-ttu-id="cb47d-172">目前定義的旗標為 EEInfoPreviousRecordsMissing 和 EEInfoNextRecordsMissing，分別對應至數值1和2。</span><span class="sxs-lookup"><span data-stu-id="cb47d-172">The currently defined flags are EEInfoPreviousRecordsMissing and EEInfoNextRecordsMissing, corresponding to numeric values 1 and 2, respectively.</span></span> <span data-ttu-id="cb47d-173">如果設定了 EEInfoPreviousRecordsMissing，則在遺漏記錄之前，會有一或多筆記錄。</span><span class="sxs-lookup"><span data-stu-id="cb47d-173">If EEInfoPreviousRecordsMissing is set, one or more records before that record is missing.</span></span> <span data-ttu-id="cb47d-174">如果設定了 EEInfoNextRecordsMissing，就會遺漏該記錄之後的一或多筆記錄。</span><span class="sxs-lookup"><span data-stu-id="cb47d-174">If EEInfoNextRecordsMissing is set, one or more records after that record are missing.</span></span> <span data-ttu-id="cb47d-175">如需記錄可能遺失原因的說明，請參閱 [擴充錯誤資訊的可靠性](reliability-of-extended-error-information.md)。</span><span class="sxs-lookup"><span data-stu-id="cb47d-175">For description of why records may be missing, see [Reliability of Extended Error Information](reliability-of-extended-error-information.md).</span></span>
-   <span data-ttu-id="cb47d-176">最多四個錯誤參數。</span><span class="sxs-lookup"><span data-stu-id="cb47d-176">Up to four error parameters.</span></span> <span data-ttu-id="cb47d-177">錯誤參數是輕量變異結構，提供錯誤的其他相關資訊。</span><span class="sxs-lookup"><span data-stu-id="cb47d-177">An error parameter is a lightweight variant structure providing additional information about the error.</span></span> <span data-ttu-id="cb47d-178">其他資訊會視錯誤和偵測位置而定。</span><span class="sxs-lookup"><span data-stu-id="cb47d-178">The additional information is dependent upon the error and the detection location.</span></span> <span data-ttu-id="cb47d-179">這些參數可以是 ANSI 字串類型 (LPSTR) 、Unicode 字串 (LPWSTR) 、long 值 (long) 、short 值 (short) 、指標 (int64) 或 none。</span><span class="sxs-lookup"><span data-stu-id="cb47d-179">The parameters can be of type ANSI string (LPSTR), Unicode String (LPWSTR), long value (long), short value (short), pointer (int64), or none.</span></span>

 

 




