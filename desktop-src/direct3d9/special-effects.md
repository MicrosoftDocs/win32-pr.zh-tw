---
description: 本主題包含使用材質座標處理完成的特殊效果範例。
ms.assetid: 8a120ff4-1252-4c4f-93fc-ea59bb7a1168
title: " (Direct3D 9) 的特殊效果"
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6c853193e5cf34bfedb4eb7e01b5e89dc8467d99
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/06/2021
ms.locfileid: "104317656"
---
# <a name="special-effects-direct3d-9"></a><span data-ttu-id="fc6b9-103"> (Direct3D 9) 的特殊效果</span><span class="sxs-lookup"><span data-stu-id="fc6b9-103">Special Effects (Direct3D 9)</span></span>

<span data-ttu-id="fc6b9-104">本主題包含使用材質座標處理完成的特殊效果範例。</span><span class="sxs-lookup"><span data-stu-id="fc6b9-104">This topic contains examples of special effects accomplished with texture coordinate processing.</span></span>

-   [<span data-ttu-id="fc6b9-105">在模型上以轉譯或旋轉) 製作紋理 (的動畫</span><span class="sxs-lookup"><span data-stu-id="fc6b9-105">Animating textures (by translation or rotation) on a model</span></span>](#animating-textures-by-translation-or-rotation-on-a-model)
-   [<span data-ttu-id="fc6b9-106">建立材質座標做為模型攝影機空間位置的線性功能</span><span class="sxs-lookup"><span data-stu-id="fc6b9-106">Creating texture coordinates as a linear function of a model's camera-space position</span></span>](#creating-texture-coordinates-as-a-linear-function-of-a-models-camera-space-position)
-   [<span data-ttu-id="fc6b9-107">使用三次環境對應執行環境對應</span><span class="sxs-lookup"><span data-stu-id="fc6b9-107">Performing environment mapping with a cubic environment map</span></span>](#performing-environment-mapping-with-a-cubic-environment-map)
-   [<span data-ttu-id="fc6b9-108">執行 projective 紋理</span><span class="sxs-lookup"><span data-stu-id="fc6b9-108">Performing projective texturing</span></span>](#performing-projective-texturing)

## <a name="animating-textures-by-translation-or-rotation-on-a-model"></a><span data-ttu-id="fc6b9-109">在模型上以轉譯或旋轉) 製作紋理 (的動畫</span><span class="sxs-lookup"><span data-stu-id="fc6b9-109">Animating textures (by translation or rotation) on a model</span></span>

-   <span data-ttu-id="fc6b9-110">以您的頂點格式定義2D 材質座標。</span><span class="sxs-lookup"><span data-stu-id="fc6b9-110">Define 2D texture coordinates in your vertex format.</span></span>
    ```
    // Use a single texture, with 2D texture coordinates. This
    // bit-pattern should be expanded to include position, normal, 
    // and color information as needed.
    DWORD dwFVFTex = D3FVF_TEX1 | D3DFVF_TEXCOORDSIZE2(0);
    ```

    

-   <span data-ttu-id="fc6b9-111">將轉譯器設定為使用2D 材質座標。</span><span class="sxs-lookup"><span data-stu-id="fc6b9-111">Configure the rasterizer to use 2D texture coordinates.</span></span>
    ```
    SetTextureStageState(0, D3DTSS_TEXTURETRANSFORMFLAGS, D3DTTFF_COUNT2);
    ```

    

-   <span data-ttu-id="fc6b9-112">定義並設定適當的材質座標轉換矩陣。</span><span class="sxs-lookup"><span data-stu-id="fc6b9-112">Define and set an appropriate texture coordinate transformation matrix.</span></span>
    ```
    // M is a D3DMATRIX being set to translate texture
    // coordinates in the U and V directions.
    //      1   0  0  0
    //      0   1  0  0
    //      du dv  1  0 (du and dv change each frame)
    //      0   0  0  1

    D3DMATRIX M = D3DXMatrixIdentity(); // declared in d3dutil.h
    M._31 = du; 
    M._32 = dv; 
    ```

    

## <a name="creating-texture-coordinates-as-a-linear-function-of-a-models-camera-space-position"></a><span data-ttu-id="fc6b9-113">建立材質座標做為模型攝影機空間位置的線性功能</span><span class="sxs-lookup"><span data-stu-id="fc6b9-113">Creating texture coordinates as a linear function of a model's camera-space position</span></span>

-   <span data-ttu-id="fc6b9-114">您可以使用 D3DTSS \_ TCI \_ CAMERASPACEPOSITION 旗標，指示系統將頂點位置（在相機空間中）傳遞到材質轉換的輸入。</span><span class="sxs-lookup"><span data-stu-id="fc6b9-114">Use the D3DTSS\_TCI\_CAMERASPACEPOSITION flag to instruct the system to pass the vertex position, in camera space, as input to a texture transformation.</span></span>
    ```
    // The input vertices have no texture coordinates, saving 
    // bandwidth. Three texture coordinates are generated by 
    // using vertex position in camera space (x, y, z).
    SetTextureStageState(0, D3DTSS_TEXCOORDINDEX, D3DTSS_TCI_CAMERASPACEPOSITION);
    ```

    

-   <span data-ttu-id="fc6b9-115">指示轉譯器預期2D 材質座標。</span><span class="sxs-lookup"><span data-stu-id="fc6b9-115">Instruct the rasterizer to expect 2D texture coordinates.</span></span>
    ```
    // Two output coordinates are used.
    SetTextureStageState(0, D3DTSS_TEXTURETRANSFORMFLAGS, D3DTTFF_COUNT2);
    ```

    

-   <span data-ttu-id="fc6b9-116">定義和設定套用線性函數的矩陣。</span><span class="sxs-lookup"><span data-stu-id="fc6b9-116">Define and set a matrix that applies a linear function.</span></span>
    ```
    // Generate texture coordinates as linear functions 
    // so that:
    //      u = Ux*x + Uy*y + Uz*z + Uw 
    //      v = Vx*x + Vy*y + Vz*z + Vw
    // The matrix M for this case is:
    //      Ux  Vx  0  0 
    //      Uy  Vy  0  0 
    //      Uz  Vz  0  0 
    //      Uw  Vw  0  0 

    SetTransform(D3DTS_TEXTURE0, &M);
    ```

    

## <a name="performing-environment-mapping-with-a-cubic-environment-map"></a><span data-ttu-id="fc6b9-117">使用三次環境對應執行環境對應</span><span class="sxs-lookup"><span data-stu-id="fc6b9-117">Performing environment mapping with a cubic environment map</span></span>

-   <span data-ttu-id="fc6b9-118">使用 D3DTSS \_ TCI \_ CAMERASPACEREFLECTIONVECTOR 旗標，指示系統自動產生材質座標做為三次對應的反射向量。</span><span class="sxs-lookup"><span data-stu-id="fc6b9-118">Use the D3DTSS\_TCI\_CAMERASPACEREFLECTIONVECTOR flag to instruct the system to automatically generate texture coordinates as reflection vectors for cubic mapping.</span></span>
    ```
    SetTextureStageState(0, D3DTSS_TEXCOORDINDEX, D3DTSS_TCI_CAMERASPACEREFLECTIONVECTOR);
    ```

    

-   <span data-ttu-id="fc6b9-119">指示轉譯器預期有三個元素的材質座標。</span><span class="sxs-lookup"><span data-stu-id="fc6b9-119">Instruct the rasterizer to expect texture coordinates with three elements.</span></span>
    ```
    SetTextureStageState(0, D3DTSS_TEXTURETRANSFORMFLAGS, D3DTTFF_COUNT3);
    ```

    

## <a name="performing-projective-texturing"></a><span data-ttu-id="fc6b9-120">執行 projective 紋理</span><span class="sxs-lookup"><span data-stu-id="fc6b9-120">Performing projective texturing</span></span>

-   <span data-ttu-id="fc6b9-121">您可以使用 D3DTSS \_ TCI \_ CAMERASPACEPOSITION 旗標，指示系統將頂點位置作為輸入傳遞至材質轉換矩陣。</span><span class="sxs-lookup"><span data-stu-id="fc6b9-121">Use the D3DTSS\_TCI\_CAMERASPACEPOSITION flag to instruct the system to pass the vertex position as input to a texture transformation matrix.</span></span>
    ```
    SetTextureStageState(0, D3DTSS_TEXCOORDINDEX, D3DTSS_TCI_CAMERASPACEPOSITION);
    ```

    

-   <span data-ttu-id="fc6b9-122">建立並套用材質投射矩陣。</span><span class="sxs-lookup"><span data-stu-id="fc6b9-122">Create and apply the texture projection matrix.</span></span> <span data-ttu-id="fc6b9-123">這已超出本檔的範圍，而且是數個產業文章的主題。</span><span class="sxs-lookup"><span data-stu-id="fc6b9-123">This is beyond the scope of this documentation, and is the topic of several industry articles.</span></span>
-   <span data-ttu-id="fc6b9-124">指示轉譯器預期有三個元素的投射材質座標。</span><span class="sxs-lookup"><span data-stu-id="fc6b9-124">Instruct the rasterizer to expect three-element projected texture coordinates.</span></span>
    ```
    // Two output coordinates are used.

    SetTextureStageState(0, D3DTSS_TEXTURETRANSFORMFLAGS, D3DTTF_PROJECTED | D3DTTFF_COUNT3);
    ```

    

## <a name="related-topics"></a><span data-ttu-id="fc6b9-125">相關主題</span><span class="sxs-lookup"><span data-stu-id="fc6b9-125">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="fc6b9-126">材質座標處理</span><span class="sxs-lookup"><span data-stu-id="fc6b9-126">Texture Coordinate Processing</span></span>](texture-coordinate-processing.md)
</dt> </dl>

 

 



