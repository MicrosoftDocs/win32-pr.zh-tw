---
description: Direct3D 裝置可以套用4x4 矩陣來轉換頂點的材質座標。
ms.assetid: f36439de-e37a-457c-9485-a435847eb01e
title: " (Direct3D 9) 的材質座標轉換"
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f45b8107f609348ae2367b1171ae7913797f4558
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/06/2021
ms.locfileid: "104109145"
---
# <a name="texture-coordinate-transformations-direct3d-9"></a><span data-ttu-id="b0bff-103"> (Direct3D 9) 的材質座標轉換</span><span class="sxs-lookup"><span data-stu-id="b0bff-103">Texture Coordinate Transformations (Direct3D 9)</span></span>

<span data-ttu-id="b0bff-104">Direct3D 裝置可以套用4x4 矩陣來轉換頂點的材質座標。</span><span class="sxs-lookup"><span data-stu-id="b0bff-104">Direct3D devices can transform the texture coordinates for vertices by applying a 4x4 matrix.</span></span> <span data-ttu-id="b0bff-105">系統會以與幾何相同的方式，將轉換套用至材質座標。</span><span class="sxs-lookup"><span data-stu-id="b0bff-105">The system applies transformations to texture coordinates in the same manner as geometry.</span></span> <span data-ttu-id="b0bff-106">任何轉換 (縮放、旋轉、轉譯、投射、切變或這些) 的任何組合都可以使用4x4 矩陣來完成。</span><span class="sxs-lookup"><span data-stu-id="b0bff-106">Any transformation (scale, rotation, translation, projection, shear, or any combination of these) can be done with a 4x4 matrix.</span></span>

> [!Note]  
> <span data-ttu-id="b0bff-107">Direct3D 不會修改轉換和亮頂點。</span><span class="sxs-lookup"><span data-stu-id="b0bff-107">Direct3D does not modify transformed and lit vertices.</span></span> <span data-ttu-id="b0bff-108">因此，使用已轉換和亮頂點的應用程式無法使用 Direct3D 來轉換頂點的材質座標。</span><span class="sxs-lookup"><span data-stu-id="b0bff-108">As a result, an application using transformed and lit vertices cannot use Direct3D to transform the texture coordinates of the vertices.</span></span>

 

<span data-ttu-id="b0bff-109">支援硬體加速轉換和燈光作業 (T&L HAL 裝置的裝置) 也會加速紋理座標的轉換。</span><span class="sxs-lookup"><span data-stu-id="b0bff-109">Devices that support hardware-accelerated transformation and lighting operations (T&L HAL Device) also accelerate the transformation of texture coordinates.</span></span> <span data-ttu-id="b0bff-110">當轉換的硬體加速無法使用時，Direct3D 幾何管線中的平臺特定優化會套用至材質座標轉換。</span><span class="sxs-lookup"><span data-stu-id="b0bff-110">When hardware acceleration of transformations isn't available, platform-specific optimizations in the Direct3D geometry pipeline apply to texture coordinate transformations.</span></span>

<span data-ttu-id="b0bff-111">材質座標轉換適用于產生特殊效果，而不需要直接修改幾何的材質座標。</span><span class="sxs-lookup"><span data-stu-id="b0bff-111">Texture coordinate transformations are useful for producing special effects while avoiding the need to directly modify the texture coordinates of your geometry.</span></span> <span data-ttu-id="b0bff-112">您可以使用簡單的平移或旋轉矩陣來建立物件的材質動畫，也可以轉換由 Direct3D 自動產生的材質座標，以簡化並加速先進的效果，例如投影紋理和動態燈光對應。</span><span class="sxs-lookup"><span data-stu-id="b0bff-112">You could use simple translation or rotation matrices to animate textures on an object, or you can transform texture coordinates that are automatically generated by Direct3D to simplify and perhaps accelerate advanced effects such as projected textures and dynamic light-mapping.</span></span> <span data-ttu-id="b0bff-113">此外，您也可以使用紋理座標轉換，在多個紋理階段中，重複使用一組紋理座標來進行多個用途。</span><span class="sxs-lookup"><span data-stu-id="b0bff-113">Additionally, you might use texture coordinate transforms to reuse a single set of texture coordinates for multiple purposes, in multiple texture stages.</span></span>

## <a name="setting-and-retrieving-texture-coordinate-transformations"></a><span data-ttu-id="b0bff-114">設定和取出紋理座標轉換</span><span class="sxs-lookup"><span data-stu-id="b0bff-114">Setting and Retrieving Texture Coordinate Transformations</span></span>

<span data-ttu-id="b0bff-115">如同應用程式用於幾何的矩陣，您可以藉由呼叫 [**IDirect3DDevice9：： SetTransform**](/windows/desktop/api) 和 [**IDirect3DDevice9：： GetTransform**](/windows/desktop/api) 方法來設定和取出紋理座標轉換。</span><span class="sxs-lookup"><span data-stu-id="b0bff-115">Like the matrices that your application uses for geometry, you set and retrieve texture coordinate transformations by calling the [**IDirect3DDevice9::SetTransform**](/windows/desktop/api) and [**IDirect3DDevice9::GetTransform**](/windows/desktop/api) methods.</span></span> <span data-ttu-id="b0bff-116">這些方法會 \_ 透過 \_ [**D3DTRANSFORMSTATETYPE**](./d3dtransformstatetype.md) 列舉型別的 D3DTS TEXTURE7 成員接受 D3DTS TEXTURE0，分別識別紋理階段0到7的轉換矩陣。</span><span class="sxs-lookup"><span data-stu-id="b0bff-116">These methods accept the D3DTS\_TEXTURE0 through D3DTS\_TEXTURE7 members of the [**D3DTRANSFORMSTATETYPE**](./d3dtransformstatetype.md) enumerated type to identify the transformation matrices for texture stages 0 through 7, respectively.</span></span>

<span data-ttu-id="b0bff-117">下列程式碼會設定要套用至材質階段0材質座標的矩陣。</span><span class="sxs-lookup"><span data-stu-id="b0bff-117">The following code sets a matrix to apply to the texture coordinates for texture stage 0.</span></span>


```
// For this example, assume the d3dDevice variable contains a 
//   valid pointer to an IDirect3DDevice9 interface.

D3DMATRIX matTrans = D3DXMatrixIdentity( NULL );

// Set up the matrix for the desired transformation.
d3dDevice->SetTransform( D3DTS_TEXTURE0, &matTrans );
```



## <a name="enabling-texture-coordinate-transformations"></a><span data-ttu-id="b0bff-118">啟用材質座標轉換</span><span class="sxs-lookup"><span data-stu-id="b0bff-118">Enabling Texture Coordinate Transformations</span></span>

<span data-ttu-id="b0bff-119">D3DTSS \_ TEXTURETRANSFORMFLAGS 材質階段狀態會控制材質座標轉換的應用。</span><span class="sxs-lookup"><span data-stu-id="b0bff-119">The D3DTSS\_TEXTURETRANSFORMFLAGS texture stage state controls the application of texture coordinate transformations.</span></span> <span data-ttu-id="b0bff-120">這個紋理階段狀態的值是由 [**D3DTEXTURETRANSFORMFLAGS**](./d3dtexturetransformflags.md) 列舉類型所定義。</span><span class="sxs-lookup"><span data-stu-id="b0bff-120">Values for this texture stage state are defined by the [**D3DTEXTURETRANSFORMFLAGS**](./d3dtexturetransformflags.md) enumerated type.</span></span>

<span data-ttu-id="b0bff-121">當 D3DTSS \_ TEXTURETRANSFORMFLAGS 設定為 D3DTTFF \_ DISABLE (預設值) 時，會停用材質座標轉換。</span><span class="sxs-lookup"><span data-stu-id="b0bff-121">Texture coordinate transformations are disabled when D3DTSS\_TEXTURETRANSFORMFLAGS is set to D3DTTFF\_DISABLE (the default value).</span></span> <span data-ttu-id="b0bff-122">假設已針對階段0啟用紋理座標轉換，則下列程式碼會停用它們。</span><span class="sxs-lookup"><span data-stu-id="b0bff-122">Assuming that texture coordinate transformations were enabled for stage 0, the following code disables them.</span></span>


```
// For this example, assume the d3dDevice variable contains a 
// valid pointer to an IDirect3DDevice9 interface.

d3dDevice->SetTextureStageState( 0, D3DTSS_TEXTURETRANSFORMFLAGS, 
                                 D3DTTFF_DISABLE );
```



<span data-ttu-id="b0bff-123">在 [**D3DTEXTURETRANSFORMFLAGS**](./d3dtexturetransformflags.md) 中定義的其他值會用來啟用材質座標轉換，以及控制將多少產生的材質座標元素傳遞給轉譯器。</span><span class="sxs-lookup"><span data-stu-id="b0bff-123">The other values defined in [**D3DTEXTURETRANSFORMFLAGS**](./d3dtexturetransformflags.md) are used to enable texture coordinate transformations, and to control how many resulting texture coordinate elements are passed to the rasterizer.</span></span> <span data-ttu-id="b0bff-124">例如，請採用下列程式碼。</span><span class="sxs-lookup"><span data-stu-id="b0bff-124">For example, take the following code.</span></span>


```
// For this example, assume the d3dDevice variable contains a 
//   valid pointer to an IDirect3DDevice9 interface.

d3dDevice->SetTextureStageState( 0, D3DTSS_TEXTURETRANSFORMFLAGS, 
                                 D3DTTFF_COUNT2 );
```



<span data-ttu-id="b0bff-125">D3DTTFF \_ COUNT2 值會指示系統套用紋理階段0的轉換矩陣集合，然後將修改過的材質座標的前兩個元素傳遞給轉譯器。</span><span class="sxs-lookup"><span data-stu-id="b0bff-125">The D3DTTFF\_COUNT2 value instructs the system to apply the transformation matrix set for texture stage 0, and then pass the first two elements of the modified texture coordinates to the rasterizer.</span></span>

<span data-ttu-id="b0bff-126">D3DTTFF \_ 投射的材質轉換旗標表示投射紋理的座標。</span><span class="sxs-lookup"><span data-stu-id="b0bff-126">The D3DTTFF\_PROJECTED texture transformation flag indicates coordinates for a projected texture.</span></span> <span data-ttu-id="b0bff-127">當指定這個旗標時，轉譯器會將傳入的元素除以最後一個元素。</span><span class="sxs-lookup"><span data-stu-id="b0bff-127">When this flag is specified, the rasterizer divides the elements passed-in by the last element.</span></span> <span data-ttu-id="b0bff-128">例如，請採用下列程式碼。</span><span class="sxs-lookup"><span data-stu-id="b0bff-128">Take the following code, for example.</span></span>


```
// For this example, assume the d3dDevice variable contains a 
//   valid pointer to an IDirect3DDevice9 interface.

d3dDevice->SetTextureStageState( 0, D3DTSS_TEXTURETRANSFORMFLAGS, 
                                 D3DTTFF_COUNT3 | D3DTTFF_PROJECTED );
```



<span data-ttu-id="b0bff-129">此範例會通知系統將三個材質座標元素傳遞給轉譯器。</span><span class="sxs-lookup"><span data-stu-id="b0bff-129">This example informs the system to pass three texture coordinate elements to the rasterizer.</span></span> <span data-ttu-id="b0bff-130">轉譯器會將前兩個專案除以第三個元素，以產生定址材質所需的2D 材質座標。</span><span class="sxs-lookup"><span data-stu-id="b0bff-130">The rasterizer divides the first two elements by the third, producing the 2D texture coordinates needed to address the texture.</span></span>

## <a name="related-topics"></a><span data-ttu-id="b0bff-131">相關主題</span><span class="sxs-lookup"><span data-stu-id="b0bff-131">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="b0bff-132">材質座標處理</span><span class="sxs-lookup"><span data-stu-id="b0bff-132">Texture Coordinate Processing</span></span>](texture-coordinate-processing.md)
</dt> </dl>

 

 
