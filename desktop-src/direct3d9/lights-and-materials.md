---
description: 光線可用於照亮場景中的物件。
ms.assetid: 0751bb76-611a-41c4-aab2-aa6f68b61b0e
title: " (Direct3D 9) 的燈光和材質"
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d6f44a12c1be1e7a14f7bfe176d7f391901d2dac
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/06/2021
ms.locfileid: "104385533"
---
# <a name="lights-and-materials-direct3d-9"></a><span data-ttu-id="44688-103"> (Direct3D 9) 的燈光和材質</span><span class="sxs-lookup"><span data-stu-id="44688-103">Lights and Materials (Direct3D 9)</span></span>

<span data-ttu-id="44688-104">光線可用於照亮場景中的物件。</span><span class="sxs-lookup"><span data-stu-id="44688-104">Lights are used to illuminate objects in a scene.</span></span> <span data-ttu-id="44688-105">啟用光源時，Direct3D 會根據下列各項的組合來計算每個物件頂點的色彩：</span><span class="sxs-lookup"><span data-stu-id="44688-105">When lighting is enabled, Direct3D calculates the color of each object vertex based on a combination of:</span></span>

> [!Note]  
> <span data-ttu-id="44688-106">此區段僅適用于固定函式管線。</span><span class="sxs-lookup"><span data-stu-id="44688-106">This section is only for the fixed-function pipeline.</span></span> <span data-ttu-id="44688-107">可程式著色器明確執行所有照明。</span><span class="sxs-lookup"><span data-stu-id="44688-107">Programmable shaders perform all lighting explicitly.</span></span>

 

-   <span data-ttu-id="44688-108">相關材質地圖中的目前材質色彩和材質。</span><span class="sxs-lookup"><span data-stu-id="44688-108">The current material color and the texels in an associated texture map.</span></span>
-   <span data-ttu-id="44688-109">若有指定，為頂點的擴散和反射色彩。</span><span class="sxs-lookup"><span data-stu-id="44688-109">The diffuse and specular colors at the vertex, if specified.</span></span>
-   <span data-ttu-id="44688-110">色彩和光線強度由場景光源或場景環境光線層級製造。</span><span class="sxs-lookup"><span data-stu-id="44688-110">The color and intensity of light produced by light sources in the scene or the scene's ambient light level.</span></span>

<span data-ttu-id="44688-111">當您使用 Direct3D 光源和材質時，可讓 Direct3D 為您處理照明的詳細資料。</span><span class="sxs-lookup"><span data-stu-id="44688-111">When you use Direct3D lighting and materials, you allow Direct3D to handle the details of illumination for you.</span></span> <span data-ttu-id="44688-112">如有需要，進階使用者可以自行執行照明。</span><span class="sxs-lookup"><span data-stu-id="44688-112">Advanced users can perform lighting on their own, if desired.</span></span>

<span data-ttu-id="44688-113">您如何使用照明和材質，會使可呈現的場景外觀大不相同。</span><span class="sxs-lookup"><span data-stu-id="44688-113">How you work with lighting and materials makes a big difference in the appearance of the rendered scene.</span></span> <span data-ttu-id="44688-114">材質決定光線對表面的反映。</span><span class="sxs-lookup"><span data-stu-id="44688-114">Materials define how light reflects off a surface.</span></span> <span data-ttu-id="44688-115">直接光線和環境光線層級定義反映的光線。</span><span class="sxs-lookup"><span data-stu-id="44688-115">Direct light and ambient light levels define the light that is reflected.</span></span> <span data-ttu-id="44688-116">如果已啟用照明，您必須使用材料來呈現場景。</span><span class="sxs-lookup"><span data-stu-id="44688-116">You must use materials to render a scene if lighting is enabled.</span></span> <span data-ttu-id="44688-117">不需要用光線呈現場景，但沒有光線呈現的場景細節是無法顯現的。</span><span class="sxs-lookup"><span data-stu-id="44688-117">Lights are not required to render a scene, but details in a scene rendered without light are not visible.</span></span> <span data-ttu-id="44688-118">呈現無光的場景，充其量會使場景中的物件產生剪影。</span><span class="sxs-lookup"><span data-stu-id="44688-118">At best, rendering an unlit scene results in a silhouette of the objects in the scene.</span></span> <span data-ttu-id="44688-119">對大部分的用途而言，這仍不夠詳細。</span><span class="sxs-lookup"><span data-stu-id="44688-119">This is not enough detail for most purposes.</span></span>

## <a name="direct-light-vs-ambient-light"></a><span data-ttu-id="44688-120">直接光線與環境光線</span><span class="sxs-lookup"><span data-stu-id="44688-120">Direct Light vs. Ambient Light</span></span>

<span data-ttu-id="44688-121">雖然直接和環境光線會使場景中的物件亮起來，它們彼此之間各不相干，而且使用的是非常不同的效果，所以您最好以完全不同的方式來使用。</span><span class="sxs-lookup"><span data-stu-id="44688-121">Although both direct and ambient light illuminate objects in a scene, they are independent of one another, they have very different effects, and they require that you work with them in completely different ways.</span></span>

<span data-ttu-id="44688-122">直接光線就是： direct。</span><span class="sxs-lookup"><span data-stu-id="44688-122">Direct light is just that: direct.</span></span> <span data-ttu-id="44688-123">直接光線一定有方向和顏色，它是陰影演算法的係數，例如 Gouraud Shading。</span><span class="sxs-lookup"><span data-stu-id="44688-123">Direct light always has direction and color, and it is a factor for shading algorithms, such as Gouraud shading.</span></span> <span data-ttu-id="44688-124">不同類型的光線以不同方式發出直光，以建立特殊衰減效果。</span><span class="sxs-lookup"><span data-stu-id="44688-124">Different types of lights emit direct light in different ways, creating special attenuation effects.</span></span> <span data-ttu-id="44688-125">您可以藉由呼叫 [**IDirect3DDevice9：： SetLight**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setlight) 方法，為 direct light 建立一組燈光參數。</span><span class="sxs-lookup"><span data-stu-id="44688-125">You create a set of light parameters for direct light by calling the [**IDirect3DDevice9::SetLight**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setlight) method.</span></span>

<span data-ttu-id="44688-126">環境光線對場景各處都能有有效作用。</span><span class="sxs-lookup"><span data-stu-id="44688-126">Ambient light is effectively everywhere in a scene.</span></span> <span data-ttu-id="44688-127">您可以將它視為填滿整個場景的一般光線層級，而不論該場景中的物件和其位置為何。</span><span class="sxs-lookup"><span data-stu-id="44688-127">You can think of it as a general level of light that fills an entire scene, regardless of the objects and their locations in that scene.</span></span> <span data-ttu-id="44688-128">環境光線沒有位置或方向，只有色彩和強度。</span><span class="sxs-lookup"><span data-stu-id="44688-128">Ambient light has no position or direction, only color and intensity.</span></span> <span data-ttu-id="44688-129">每個光線加入場景中的整體環境光線。</span><span class="sxs-lookup"><span data-stu-id="44688-129">Each light adds to the overall ambient light in a scene.</span></span> <span data-ttu-id="44688-130">使用 [**IDirect3DDevice9：： graphicsdevice**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setrenderstate) 方法的呼叫，並將 D3DRS \_ 環境指定為 *State* 參數，並將所需的 RGBA 色彩設定為 Value 參數，以設定環境光源層級。</span><span class="sxs-lookup"><span data-stu-id="44688-130">Set the ambient light level with a call to the [**IDirect3DDevice9::SetRenderState**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setrenderstate) method, specifying D3DRS\_AMBIENT as the *State* parameter, and the desired RGBA color as the Value parameter.</span></span>

<span data-ttu-id="44688-131">環境光線的形式為 RGBA 值，其中每個元件是 0 至 255 的整數值。</span><span class="sxs-lookup"><span data-stu-id="44688-131">Ambient light color takes the form of an RGBA value, where each component is an integer value from 0 to 255.</span></span> <span data-ttu-id="44688-132">這與 Direct3D 中大多數色彩值不相同。</span><span class="sxs-lookup"><span data-stu-id="44688-132">This is unlike most color values in Direct3D.</span></span>

<span data-ttu-id="44688-133">您可以使用 [**D3DCOLOR \_ RGBA**](d3dcolor-rgba.md) 宏來產生 RGBA 值。</span><span class="sxs-lookup"><span data-stu-id="44688-133">You can use the [**D3DCOLOR\_RGBA**](d3dcolor-rgba.md) macro to generate RGBA values.</span></span> <span data-ttu-id="44688-134">紅色、綠色及藍色元件組合成最終環境光線的色彩。</span><span class="sxs-lookup"><span data-stu-id="44688-134">The red, green, and blue components combine to make the final color of the ambient light.</span></span> <span data-ttu-id="44688-135">Alpha 元件控制色彩的透明度。</span><span class="sxs-lookup"><span data-stu-id="44688-135">The alpha component controls the transparency of the color.</span></span> <span data-ttu-id="44688-136">使用硬體加速或 RGB 模擬時，會忽略 alpha 元件。</span><span class="sxs-lookup"><span data-stu-id="44688-136">When using hardware acceleration or RGB emulation, the alpha component is ignored.</span></span>

## <a name="direct3d-light-model-vs-nature"></a><span data-ttu-id="44688-137">Direct3D Light 模型與本質</span><span class="sxs-lookup"><span data-stu-id="44688-137">Direct3D Light Model vs. Nature</span></span>

<span data-ttu-id="44688-138">在自然界，當從來源發光時，就算沒有數千或數百萬計的物件，在到達使用者的眼睛前，也會有數百種反映。</span><span class="sxs-lookup"><span data-stu-id="44688-138">In nature, when light is emitted from a source, it is reflected off of hundreds, if not thousands or millions of objects before reaching the user's eye.</span></span> <span data-ttu-id="44688-139">每次反映時，有些光會被表面吸收，有些隨機分散，而其餘部分不是移至另一個表面，就是移至使用者的眼睛。</span><span class="sxs-lookup"><span data-stu-id="44688-139">Each time it is reflected, some light is absorbed by a surface, some is scattered in random directions, and the rest goes on to another surface or to the user's eye.</span></span> <span data-ttu-id="44688-140">這個程序會繼續，直到光線縮小變沒有，或使用者感受到光線。</span><span class="sxs-lookup"><span data-stu-id="44688-140">This process continues until the light is reduced to nothing or a user perceives the light.</span></span>

<span data-ttu-id="44688-141">很明顯的，需要經過計算才能完美模擬光線的行為，用於即時 Direct3D 圖形太耗時。</span><span class="sxs-lookup"><span data-stu-id="44688-141">Obviously, the calculations required to perfectly simulate the natural behavior of light are too time-consuming to use for real-time Direct3D graphics.</span></span> <span data-ttu-id="44688-142">因此，記住速度的同時，Direct3D 光線模型近似光線在自然界運作的方式。</span><span class="sxs-lookup"><span data-stu-id="44688-142">Therefore, with speed in mind, the Direct3D light model approximates the way light works in the natural world.</span></span> <span data-ttu-id="44688-143">Direct3D 描述光線的紅色、綠色及藍色元件結合並建立最後色彩。</span><span class="sxs-lookup"><span data-stu-id="44688-143">Direct3D describes light in terms of red, green, and blue components that combine to create a final color.</span></span>

<span data-ttu-id="44688-144">在 Direct3D 中，當光線反映表面，淺色與表面以數學方式互動，終而建立最後顯示在螢幕上的色彩。</span><span class="sxs-lookup"><span data-stu-id="44688-144">In Direct3D, when light reflects off a surface, the light color interacts mathematically with the surface itself to create the color eventually displayed on the screen.</span></span> <span data-ttu-id="44688-145">如需 Direct3D 使用之演算法的特定資訊，請參閱 [ (direct3d 9) 的數學 ](mathematics-of-lighting.md)運算。</span><span class="sxs-lookup"><span data-stu-id="44688-145">For specific information about the algorithms Direct3D uses, see [Mathematics of Lighting (Direct3D 9)](mathematics-of-lighting.md).</span></span>

<span data-ttu-id="44688-146">Direct3D 光線模型可以將光線概括成兩種類型︰ 環境光線和直接光線。</span><span class="sxs-lookup"><span data-stu-id="44688-146">The Direct3D light model generalizes light into two types: ambient light and direct light.</span></span> <span data-ttu-id="44688-147">每一個都有不同屬性，而每一個會用不同的方式與表面材質互動。</span><span class="sxs-lookup"><span data-stu-id="44688-147">Each has different attributes, and each interacts with the material of a surface in different ways.</span></span> <span data-ttu-id="44688-148">環境光線是已經分散到方向和來源都變得不確定的光線︰ 它在各處會維持低強度。</span><span class="sxs-lookup"><span data-stu-id="44688-148">Ambient light is light that has been scattered so much that its direction and source are indeterminate: it maintains a low level of intensity everywhere.</span></span> <span data-ttu-id="44688-149">攝影師間接使用的照明是使用環境光線的範例。</span><span class="sxs-lookup"><span data-stu-id="44688-149">The indirect lighting used by photographers is a good example of ambient light.</span></span> <span data-ttu-id="44688-150">Direct3D 的環境光線如自然界光線一樣沒有真實方向或來源，只有色彩和強度。</span><span class="sxs-lookup"><span data-stu-id="44688-150">Ambient light in Direct3D, as in nature, has no real direction or source, only a color and intensity.</span></span> <span data-ttu-id="44688-151">事實上，環境光線等級與產生光線之場景中任何物件完全無關。</span><span class="sxs-lookup"><span data-stu-id="44688-151">In fact, the ambient light level is completely independent of any objects in a scene that generate light.</span></span> <span data-ttu-id="44688-152">環境光線不會有反射反映。</span><span class="sxs-lookup"><span data-stu-id="44688-152">Ambient light does not contribute to specular reflection.</span></span>

<span data-ttu-id="44688-153">直接光線是由場景內的來源產生的，永遠具有色彩和強度，並以指定方向行進。</span><span class="sxs-lookup"><span data-stu-id="44688-153">Direct light is the light generated by a source within a scene; it always has color and intensity, and it travels in a specified direction.</span></span> <span data-ttu-id="44688-154">直接光線與表面材質互動來建立反射高光，而其方向在陰影運算中被當成係數來使用，包括 Gouraud shading。</span><span class="sxs-lookup"><span data-stu-id="44688-154">Direct light interacts with the material of a surface to create specular highlights, and its direction is used as a factor in shading algorithms, including Gouraud shading.</span></span> <span data-ttu-id="44688-155">當反映直接光線時，並不會作用成場景中的環境光線等級。</span><span class="sxs-lookup"><span data-stu-id="44688-155">When direct light is reflected, it does not contribute to the ambient light level in a scene.</span></span> <span data-ttu-id="44688-156">場景中產生直接光線的來源具備不同特性，影響他們照亮場景的方式。</span><span class="sxs-lookup"><span data-stu-id="44688-156">The sources in a scene that generate direct light have different characteristics that affect how they illuminate a scene.</span></span>

<span data-ttu-id="44688-157">除此之外，多邊形的材質具有會影響多邊形如何反映接收到的光線的屬性。</span><span class="sxs-lookup"><span data-stu-id="44688-157">Additionally, a polygon's material has properties that affect how that polygon reflects the light it receives.</span></span> <span data-ttu-id="44688-158">您設定單一反射率特徵，其描述材質如何反映環境光線，而您設定個別特徵來判斷材質的反射和擴散反射率。</span><span class="sxs-lookup"><span data-stu-id="44688-158">You set a single reflectance trait that describes how the material reflects ambient light, and you set individual traits to determine the material's specular and diffuse reflectance.</span></span> <span data-ttu-id="44688-159">如需詳細資訊，請參閱 [ (Direct3D 9 的教材) ](materials.md)。</span><span class="sxs-lookup"><span data-stu-id="44688-159">For more information, see [Materials (Direct3D 9)](materials.md).</span></span>

## <a name="color-values-for-lights-and-materials"></a><span data-ttu-id="44688-160">燈光和材質的色彩值</span><span class="sxs-lookup"><span data-stu-id="44688-160">Color Values for Lights and Materials</span></span>

<span data-ttu-id="44688-161">Direct3D 會以四個元件（紅色、綠色、藍色和 Alpha）來描述色彩，這會結合以產生最終色彩。</span><span class="sxs-lookup"><span data-stu-id="44688-161">Direct3D describes color in terms of four components-red, green, blue, and alpha-that combine to make a final color.</span></span> <span data-ttu-id="44688-162">[**D3DCOLORVALUE**](d3dcolorvalue.md) c + + 結構定義為包含每個元件的值。</span><span class="sxs-lookup"><span data-stu-id="44688-162">The [**D3DCOLORVALUE**](d3dcolorvalue.md) C++ structure is defined to contain values for each component.</span></span> <span data-ttu-id="44688-163">每個成員都是浮點值，通常範圍從0.0 到1.0 （含）。</span><span class="sxs-lookup"><span data-stu-id="44688-163">Each member is a floating-point value that typically ranges from 0.0 to 1.0, inclusive.</span></span> <span data-ttu-id="44688-164">雖然燈光和材質都使用相同的結構來描述色彩，但是結構中的值會以稍微不同的方式使用。</span><span class="sxs-lookup"><span data-stu-id="44688-164">Although both lights and materials use the same structure to describe color, the values in the structure are used a little differently by each.</span></span>

<span data-ttu-id="44688-165">光源的色彩值表示其發出的特定光線元件量。</span><span class="sxs-lookup"><span data-stu-id="44688-165">Color values for light sources represent the amount of a particular light component it emits.</span></span> <span data-ttu-id="44688-166">由於光線不使用 alpha 元件，只有紅色、綠色和藍色的色彩元件相關。</span><span class="sxs-lookup"><span data-stu-id="44688-166">Because lights don't use an alpha component, only the red, green, and blue components of the color are relevant.</span></span> <span data-ttu-id="44688-167">您可以在投影電視上視覺化三個元件，分別為紅色、綠色和藍色濾鏡。</span><span class="sxs-lookup"><span data-stu-id="44688-167">You can visualize the three components as the red, green, and blue lenses on a projection television.</span></span> <span data-ttu-id="44688-168">每個濾鏡可能會關閉 (適當成員的 0.0 值)，可能會非常亮 (1.0 值)，或介於之間。</span><span class="sxs-lookup"><span data-stu-id="44688-168">Each lens might be off (a 0.0 value in the appropriate member), it might be as bright as possible (a 1.0 value), or it might be some level in between.</span></span> <span data-ttu-id="44688-169">透過濾鏡將色彩結合成光線的最終色彩。</span><span class="sxs-lookup"><span data-stu-id="44688-169">The colors coming through the lenses combine to make the light's final color.</span></span> <span data-ttu-id="44688-170">R(1.0)、G(1.0)、 B(1.0) 組合成白光，R(0.0)、G(0.0)、B(0.0) 完全無法發光。</span><span class="sxs-lookup"><span data-stu-id="44688-170">A combination like R(1.0), G(1.0), B(1.0) creates a white light, where R(0.0), G(0.0), B(0.0) doesn't emit light at all.</span></span> <span data-ttu-id="44688-171">您可以發出只有一個元件的光線，例如產生純紅色、綠色或藍色光；光線無法使用組合來發出像黃色或紫色的色彩。</span><span class="sxs-lookup"><span data-stu-id="44688-171">You can make a light that emits only one component, resulting in a pure red, green, or blue light; or, the light could use combinations to emit colors like yellow or purple.</span></span> <span data-ttu-id="44688-172">您甚至可以設定負片色彩元件值，建立「深色光」，實際上是將場景的光線移除。</span><span class="sxs-lookup"><span data-stu-id="44688-172">You can even set negative color component values to create a "dark light" that actually removes light from a scene.</span></span> <span data-ttu-id="44688-173">或者，您可能設定元件的值大於 1.0 以建立非常亮的光。</span><span class="sxs-lookup"><span data-stu-id="44688-173">Or, you might set the components to some value larger than 1.0 to create an extremely bright light.</span></span>

<span data-ttu-id="44688-174">另一方面，在使用材質時，色彩值代表使用該材質的表面反映出多少光線元件。</span><span class="sxs-lookup"><span data-stu-id="44688-174">With materials, on the other hand, color values represent how much of a light component is reflected by a surface that is rendered with that material.</span></span> <span data-ttu-id="44688-175">色彩元件為 R(1.0)、G(1.0)、B(1.0) 和 A(1.0) 的材質，反映了所有的光線。</span><span class="sxs-lookup"><span data-stu-id="44688-175">A material whose color components are R(1.0), G(1.0), B(1.0), A(1.0) reflects all the light that comes its way.</span></span> <span data-ttu-id="44688-176">同樣地，R(0.0)、G(1.0)、B(0.0)、A(1.0) 反映出所有照射而來的綠光。</span><span class="sxs-lookup"><span data-stu-id="44688-176">Likewise, a material with R(0.0), G(1.0), B(0.0), A(1.0) reflects all the green light that is directed at it.</span></span> <span data-ttu-id="44688-177">材質有多個反射值，可建立各種效果。</span><span class="sxs-lookup"><span data-stu-id="44688-177">Materials have multiple reflectance values to create various types of effects.</span></span>

<span data-ttu-id="44688-178">其他資訊包含在： [ (direct3d 9) 的燈光類型 ](light-types.md)，以及 [ (Direct3D 9) 的輕量屬性 ](light-properties.md)。</span><span class="sxs-lookup"><span data-stu-id="44688-178">Additional information is contained in: [Light Types (Direct3D 9)](light-types.md), and [Light Properties (Direct3D 9)](light-properties.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="44688-179">相關主題</span><span class="sxs-lookup"><span data-stu-id="44688-179">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="44688-180">快速入門</span><span class="sxs-lookup"><span data-stu-id="44688-180">Getting Started</span></span>](getting-started.md)
</dt> </dl>

 

 
