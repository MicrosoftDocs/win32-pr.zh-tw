---
description: 大部分紋理（像是點陣圖）都是一維的色彩值陣列。
ms.assetid: vs|directx_sdk|~\texture_coordinates.htm
title: " (Direct3D 9) 的材質座標"
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5dcf4c886c187aaa2218508a180e23644a544739
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/06/2021
ms.locfileid: "104467934"
---
# <a name="texture-coordinates-direct3d-9"></a><span data-ttu-id="bd0eb-103"> (Direct3D 9) 的材質座標</span><span class="sxs-lookup"><span data-stu-id="bd0eb-103">Texture Coordinates (Direct3D 9)</span></span>

<span data-ttu-id="bd0eb-104">大部分紋理（像是點陣圖）都是一維的色彩值陣列。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-104">Most textures, like bitmaps, are a two-dimensional array of color values.</span></span> <span data-ttu-id="bd0eb-105">三種環境對應紋理是例外狀況。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-105">Cubic environment map textures are an exception.</span></span> <span data-ttu-id="bd0eb-106">如需詳細資訊，請參閱 [ (Direct3D 9) 的三次環境對應 ](cubic-environment-mapping.md)。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-106">For details, see [Cubic Environment Mapping (Direct3D 9)](cubic-environment-mapping.md).</span></span> <span data-ttu-id="bd0eb-107">個別的色彩值稱為材質元素或材質。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-107">The individual color values are called a texture element, or texel.</span></span> <span data-ttu-id="bd0eb-108">每個材質在材質中都有唯一的位址。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-108">Each texel has a unique address in the texture.</span></span> <span data-ttu-id="bd0eb-109">您可以將位址視為資料行和資料列編號，在下圖中分別標示為您和 v。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-109">The address can be thought of as a column and row number, which are labeled u and v respectively in the following illustration.</span></span>

![材質位址作為資料行和資料列編號的圖例](images/uvcoordinates.jpg)

<span data-ttu-id="bd0eb-111">材質座標位於材質空間中。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-111">Texture coordinates are in texture space.</span></span> <span data-ttu-id="bd0eb-112">也就是說，它們是相對於材質中的位置 (0、0) 。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-112">That is, they are relative to the location (0,0) in the texture.</span></span> <span data-ttu-id="bd0eb-113">當材質套用至3D 空間中的基本時，其材質位址必須對應到物件座標。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-113">When a texture is applied to a primitive in 3D space, its texel addresses must be mapped into object coordinates.</span></span> <span data-ttu-id="bd0eb-114">然後，必須將它們轉譯為螢幕座標或圖元位置。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-114">They must then be translated into screen coordinates, or pixel locations.</span></span>

## <a name="mapping-texels-to-screen-space"></a><span data-ttu-id="bd0eb-115">將材質對應至螢幕空間</span><span class="sxs-lookup"><span data-stu-id="bd0eb-115">Mapping Texels to Screen Space</span></span>

<span data-ttu-id="bd0eb-116">Direct3D 會將材質空間中的材質直接對應至螢幕空間中的圖元，而略過中繼步驟以提高效率。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-116">Direct3D maps texels in texture space directly to pixels in screen space, skipping the intermediate step for greater efficiency.</span></span> <span data-ttu-id="bd0eb-117">這個對應程式實際上是反向對應。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-117">This mapping process is actually an inverse mapping.</span></span> <span data-ttu-id="bd0eb-118">也就是說，針對螢幕空間中的每個圖元，會計算材質空間中對應的材質位置。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-118">That is, for each pixel in screen space, the corresponding texel position in texture space is calculated.</span></span> <span data-ttu-id="bd0eb-119">取樣點上或周圍的材質色彩。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-119">The texture color at or around that point is sampled.</span></span> <span data-ttu-id="bd0eb-120">取樣進程稱為材質篩選。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-120">The sampling process is called texture filtering.</span></span> <span data-ttu-id="bd0eb-121">如需詳細資訊，請參閱 [ (Direct3D 9) 的材質篩選 ](texture-filtering.md)。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-121">For more information, see [Texture Filtering (Direct3D 9)](texture-filtering.md).</span></span>

<span data-ttu-id="bd0eb-122">材質中的每個材質都可以透過其材質座標來指定。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-122">Each texel in a texture can be specified by its texel coordinate.</span></span> <span data-ttu-id="bd0eb-123">不過，為了將材質對應至基本專案，Direct3D 需要所有紋理中所有材質的統一位址範圍。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-123">However, in order to map texels onto primitives, Direct3D requires a uniform address range for all texels in all textures.</span></span> <span data-ttu-id="bd0eb-124">因此，它會使用泛型定址配置，其中所有的材質位址都在0.0 到1.0 （含）的範圍內。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-124">Therefore, it uses a generic addressing scheme in which all texel addresses are in the range of 0.0 to 1.0 inclusive.</span></span> <span data-ttu-id="bd0eb-125">Direct3D 應用程式會以您的角度指定紋理座標，v 值與2D 笛卡兒座標一樣，是以 x、y 座標來指定。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-125">Direct3D applications specify texture coordinates in terms of u,v values, much like 2D Cartesian coordinates are specified in terms of x,y coordinates.</span></span> <span data-ttu-id="bd0eb-126">技術上來說，系統可以實際處理0.0 和1.0 範圍之外的材質座標，並使用您針對材質定址所設定的參數來執行此作業。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-126">Technically, the system can actually process texture coordinates outside the range of 0.0 and 1.0, and does so by using the parameters you set for texture addressing.</span></span> <span data-ttu-id="bd0eb-127">如需詳細資訊，請參閱 [ (Direct3D 9) 的材質定址模式 ](texture-addressing-modes.md)。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-127">For more information, see [Texture Addressing Modes (Direct3D 9)](texture-addressing-modes.md).</span></span>

<span data-ttu-id="bd0eb-128">結果是，相同的材質位址可以對應到不同材質中的不同材質座標。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-128">A result of this is that identical texture addresses can map to different texel coordinates in different textures.</span></span> <span data-ttu-id="bd0eb-129">在下圖中，材質位址是 (0.5，1.0) 。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-129">In the following illustration, the texture address is (0.5,1.0).</span></span> <span data-ttu-id="bd0eb-130">不過，因為材質的大小不同，所以材質位址會對應至不同的材質。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-130">However, because the textures are different sizes, the texture address maps to different texels.</span></span> <span data-ttu-id="bd0eb-131">在左邊的材質1是5x5。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-131">Texture 1, on the left, is 5x5.</span></span> <span data-ttu-id="bd0eb-132">材質位址 (0.5，1.0) 對應至材質 (2，4) 。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-132">The texture address (0.5,1.0) maps to texel (2,4).</span></span> <span data-ttu-id="bd0eb-133">右側的材質2是7x7。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-133">Texture 2, on the right, is 7x7.</span></span> <span data-ttu-id="bd0eb-134">材質位址 (0.5，1.0) 對應至材質 (3，6) 。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-134">The texture address (0.5,1.0) maps to texel (3,6).</span></span>

![與不同材質上不同材質的相同材質位址對應圖例](images/texadr1.png)

<span data-ttu-id="bd0eb-136">材質對應程式的簡化版本如下圖所示。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-136">A simplified version of the texel mapping process is shown in the following illustration.</span></span> <span data-ttu-id="bd0eb-137">無可否認地，此範例非常簡單。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-137">Admittedly, this example is extremely simple.</span></span> <span data-ttu-id="bd0eb-138">如需詳細資訊，請參閱 [直接將材質對應至 (Direct3D 9) 的圖元 ](directly-mapping-texels-to-pixels.md)。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-138">For more detailed information, see [Directly Mapping Texels to Pixels (Direct3D 9)](directly-mapping-texels-to-pixels.md).</span></span>

![圖元的圖例 (對應至物件空間的色彩) 正方形](images/texadr2.png)

<span data-ttu-id="bd0eb-140">在此範例中，顯示在圖左邊的圖元會理想化成色彩的正方形。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-140">For this example, a pixel, shown at the left of the illustration, is idealized into a square of color.</span></span> <span data-ttu-id="bd0eb-141">圖元四個角落的位址會對應至物件空間中的3D 基本物件。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-141">The addresses of the four corners of the pixel are mapped into the 3D primitive in object space.</span></span> <span data-ttu-id="bd0eb-142">圖元的形狀通常會因為3D 空間中的基本圖形，以及視圖角度而失真。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-142">The shape of the pixel is often distorted because of the shape of the primitive in 3D space and because of the viewing angle.</span></span> <span data-ttu-id="bd0eb-143">基本型別上的介面區的邊角會對應到圖元的邊角，然後對應到材質空間。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-143">The corners of the surface area on the primitive that correspond the corners of the pixel are then mapped into texture space.</span></span> <span data-ttu-id="bd0eb-144">對應程式會再次扭曲圖元的形狀，這是很常見的。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-144">The mapping process distorts the pixel's shape again, which is common.</span></span> <span data-ttu-id="bd0eb-145">圖元的最終色彩值是從圖元對應之區域中的材質計算而得。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-145">The final color value of the pixel is computed from the texels in the region to which the pixel maps.</span></span> <span data-ttu-id="bd0eb-146">您可以在設定材質篩選方法時，判斷 Direct3D 用來到達圖元色彩的方法。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-146">You determine the method that Direct3D uses to arrive at the pixel color when you set the texture filtering method.</span></span> <span data-ttu-id="bd0eb-147">如需詳細資訊，請參閱 [ (Direct3D 9) 的材質篩選 ](texture-filtering.md)。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-147">For more information, see [Texture Filtering (Direct3D 9)](texture-filtering.md).</span></span>

<span data-ttu-id="bd0eb-148">您的應用程式可以直接將材質座標指派給頂點。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-148">Your application can assign texture coordinates directly to vertices.</span></span> <span data-ttu-id="bd0eb-149">這項功能可讓您控制材質的哪些部分對應至基本。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-149">This capability gives you control over which portion of a texture is mapped into a primitive.</span></span> <span data-ttu-id="bd0eb-150">例如，假設您建立的矩形基本型別與下圖中的材質大小完全相同。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-150">For instance, suppose you create a rectangular primitive that is exactly the same size as the texture in the following illustration.</span></span> <span data-ttu-id="bd0eb-151">在此範例中，您想要讓應用程式將整個材質對應到整個牆上。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-151">In this example, you want your application to map the whole texture onto the whole wall.</span></span> <span data-ttu-id="bd0eb-152">您的應用程式指派給基本物件頂點的材質座標為 (0.0、0.0) 、 (1.0、0.0) 、 (1.0、1.0) 和 (0.0、1.0) 。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-152">The texture coordinates your application assigns to the vertices of the primitive are (0.0,0.0), (1.0,0.0), (1.0,1.0), and (0.0,1.0).</span></span>

![材質對應牆的圖例](images/texadr3.png)

<span data-ttu-id="bd0eb-154">如果您決定將牆壁的高度減少一半，可以扭曲紋理以放到較小的牆上，或者您可以指派紋理座標，讓 Direct3D 使用材質的下半部。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-154">If you decide to decrease the height of the wall by one-half, you can distort the texture to fit onto the smaller wall, or you can assign texture coordinates that cause Direct3D to use the lower half of the texture.</span></span>

<span data-ttu-id="bd0eb-155">如果您決定扭曲或調整材質以符合較小的牆，您使用的材質篩選方法將會影響影像的品質。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-155">If you decide to distort or scale the texture to fit the smaller wall, the texture filtering method that you use will influence the quality of the image.</span></span> <span data-ttu-id="bd0eb-156">如需詳細資訊，請參閱 [ (Direct3D 9) 的材質篩選 ](texture-filtering.md)。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-156">For more information, see [Texture Filtering (Direct3D 9)](texture-filtering.md).</span></span>

<span data-ttu-id="bd0eb-157">相反地，如果您決定要指派材質座標，讓 Direct3D 使用較小牆的材質下半部，則在此範例中，您的應用程式指派給原始物件頂點的材質座標為 (0.0、0.5) 、 (1.0、0.5) 、 (1.0、1.0) 和 (0.0、1.0) 。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-157">If, instead, you decide to assign texture coordinates to make Direct3D use the lower half of the texture for the smaller wall, the texture coordinates your application assigns to the vertices of the primitive in this example are (0.0,0.5), (1.0,0.5), (1.0,1.0), and (0.0,1.0).</span></span> <span data-ttu-id="bd0eb-158">Direct3D 會將材質的下半部套用至牆壁。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-158">Direct3D applies the lower half of the texture to the wall.</span></span>

<span data-ttu-id="bd0eb-159">頂點的材質座標有可能大於1.0。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-159">It is possible for texture coordinates of a vertex to be greater than 1.0.</span></span> <span data-ttu-id="bd0eb-160">當您將材質座標指派給不在0.0 到1.0 （含）範圍內的頂點時，您也應該設定材質定址模式。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-160">When you assign texture coordinates to a vertex that are not in the range of 0.0 to 1.0 inclusive, you should also set the texture addressing mode.</span></span> <span data-ttu-id="bd0eb-161">如需詳細資訊，請參閱 [ (Direct3D 9) 的材質定址模式 ](texture-addressing-modes.md)。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-161">For more information, see [Texture Addressing Modes (Direct3D 9)](texture-addressing-modes.md).</span></span>

## <a name="texture-coordinates-and-texture-stages"></a><span data-ttu-id="bd0eb-162">材質座標和材質階段</span><span class="sxs-lookup"><span data-stu-id="bd0eb-162">Texture Coordinates and Texture Stages</span></span>

<span data-ttu-id="bd0eb-163">材質座標會透過材質階段與材質相關聯。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-163">Texture coordinates are associated with textures by way of texture stages.</span></span> <span data-ttu-id="bd0eb-164">使用 SetTexture (stageIndex、pTexture) 將材質指派給紋理階段。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-164">Textures get assigned to texture stages with SetTexture(stageIndex, pTexture).</span></span> <span data-ttu-id="bd0eb-165">請參閱 [**IDirect3DDevice9：： SetTexture**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-settexture)。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-165">See [**IDirect3DDevice9::SetTexture**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-settexture).</span></span>

<span data-ttu-id="bd0eb-166">彈性頂點格式 (FVF) 程式碼最多可定義八組紋理座標。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-166">A Flexible Vertex Format(FVF) code can define up to eight sets of texture coordinates.</span></span> <span data-ttu-id="bd0eb-167">材質座標資料是由使用者在頂點資料中提供。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-167">The texture coordinate data is furnished by the user in the vertex data.</span></span> <span data-ttu-id="bd0eb-168">以零為基底的索引參考資料： 0-7。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-168">The data is referred to with a zero based index: 0 - 7.</span></span> <span data-ttu-id="bd0eb-169">最多有8個材質混合階段。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-169">There are up to eight texture blending stages.</span></span> <span data-ttu-id="bd0eb-170">材質與使用 SetTexture ( stageIndex，pTexture) 的特定階段相關聯。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-170">A texture is associated with a particular stage using SetTexture( stageIndex, pTexture).</span></span>

<span data-ttu-id="bd0eb-171">完成這項操作之後，任何階段都可以使用任何紋理座標集合。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-171">Once this is done, any set of texture coordinates can be used by any stage.</span></span> <span data-ttu-id="bd0eb-172">每一組座標都與使用 SetTextureStageState ( stageIndex、D3DTSS \_ TEXCOORDINDEX、textureCoordinateIndex ) 的階段相關聯。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-172">Each set of coordinates is associated with a stage using SetTextureStageState( stageIndex, D3DTSS\_TEXCOORDINDEX, textureCoordinateIndex ).</span></span> <span data-ttu-id="bd0eb-173">請參閱 [**IDirect3DDevice9：： SetTextureStageState**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-settexturestagestate)。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-173">See [**IDirect3DDevice9::SetTextureStageState**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-settexturestagestate).</span></span> <span data-ttu-id="bd0eb-174">如此一來，就可以將混合階段設定為使用任何材質和材質座標。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-174">This way, the blending stages can be set up to use any texture and any texture coordinates.</span></span> <span data-ttu-id="bd0eb-175">一個以上的階段可以使用相同的紋理或材質座標。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-175">More than one stage can use the same textures, or texture coordinates.</span></span>

<span data-ttu-id="bd0eb-176">下列主題包含其他資訊。</span><span class="sxs-lookup"><span data-stu-id="bd0eb-176">Additional information is contained in the following topics.</span></span>

-   [<span data-ttu-id="bd0eb-177"> (Direct3D 9) 的材質座標格式 </span><span class="sxs-lookup"><span data-stu-id="bd0eb-177">Texture Coordinate Formats (Direct3D 9)</span></span>](texture-coordinate-formats.md)
-   [<span data-ttu-id="bd0eb-178"> (Direct3D 9) 的材質座標處理 </span><span class="sxs-lookup"><span data-stu-id="bd0eb-178">Texture Coordinate Processing (Direct3D 9)</span></span>](texture-coordinate-processing.md)

## <a name="related-topics"></a><span data-ttu-id="bd0eb-179">相關主題</span><span class="sxs-lookup"><span data-stu-id="bd0eb-179">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="bd0eb-180">Direct3D 紋理</span><span class="sxs-lookup"><span data-stu-id="bd0eb-180">Direct3D Textures</span></span>](direct3d-textures.md)
</dt> </dl>

 

 
