---
description: IDirect3DVertexBuffer9 介面所代表的頂點緩衝區是包含頂點資料的記憶體緩衝區。
ms.assetid: vs|directx_sdk|~\vertex_buffers.htm
title: " (Direct3D 9) 的頂點緩衝區"
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8e38feb34e7b9f637f383bf451bff812d9ee6fb1
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/06/2021
ms.locfileid: "103687732"
---
# <a name="vertex-buffers-direct3d-9"></a><span data-ttu-id="35ca2-103"> (Direct3D 9) 的頂點緩衝區</span><span class="sxs-lookup"><span data-stu-id="35ca2-103">Vertex Buffers (Direct3D 9)</span></span>

<span data-ttu-id="35ca2-104">[**IDirect3DVertexBuffer9**](/windows/desktop/api)介面所代表的頂點緩衝區是包含頂點資料的記憶體緩衝區。</span><span class="sxs-lookup"><span data-stu-id="35ca2-104">Vertex buffers, represented by the [**IDirect3DVertexBuffer9**](/windows/desktop/api) interface, are memory buffers that contain vertex data.</span></span> <span data-ttu-id="35ca2-105">頂點緩衝區可以包含任何頂點型別轉換或未轉換、發亮或 unlit，可以透過在 [**IDirect3DDevice9**](/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3ddevice9) 介面中使用轉譯方法來呈現。</span><span class="sxs-lookup"><span data-stu-id="35ca2-105">Vertex buffers can contain any vertex type - transformed or untransformed, lit or unlit - that can be rendered through the use of the rendering methods in the [**IDirect3DDevice9**](/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3ddevice9) interface.</span></span> <span data-ttu-id="35ca2-106">您可以在頂點緩衝區中處理頂點，執行例如轉換、光源，或產生裁剪旗標等作業。</span><span class="sxs-lookup"><span data-stu-id="35ca2-106">You can process the vertices in a vertex buffer to perform operations such as transformation, lighting, or generating clipping flags.</span></span> <span data-ttu-id="35ca2-107">轉換永遠會執行。</span><span class="sxs-lookup"><span data-stu-id="35ca2-107">Transformation is always performed.</span></span>

<span data-ttu-id="35ca2-108">頂點緩衝區的彈性使其成為重複使用轉換幾何的理想預備環境點。</span><span class="sxs-lookup"><span data-stu-id="35ca2-108">The flexibility of vertex buffers make them ideal staging points for reusing transformed geometry.</span></span> <span data-ttu-id="35ca2-109">您可以建立單一頂點緩衝區，然後將其中的頂點轉換、照亮及裁剪，並視需要多次轉譯場景中的模型，而不重新轉換，即使有交錯的轉譯狀態變更。</span><span class="sxs-lookup"><span data-stu-id="35ca2-109">You could create a single vertex buffer, transform, light, and clip the vertices in it, and render the model in the scene as many times as needed without re-transforming it, even with interleaved render state changes.</span></span> <span data-ttu-id="35ca2-110">轉譯使用多個紋理的模式時，這非常有用：幾何只轉換一次，然後視需要轉譯其中的一部分，以所需的紋理變更交錯。</span><span class="sxs-lookup"><span data-stu-id="35ca2-110">This is useful when rendering models that use multiple textures: the geometry is transformed only once, and then portions of it can be rendered as needed, interleaved with the required texture changes.</span></span> <span data-ttu-id="35ca2-111">處理頂點之後所做的轉譯狀態變更，在下一次處理頂點時才會生效。</span><span class="sxs-lookup"><span data-stu-id="35ca2-111">Render state changes made after vertices are processed take effect the next time the vertices are processed.</span></span>

-   [<span data-ttu-id="35ca2-112">說明</span><span class="sxs-lookup"><span data-stu-id="35ca2-112">Description</span></span>](#description)
-   [<span data-ttu-id="35ca2-113">記憶體集區和使用量</span><span class="sxs-lookup"><span data-stu-id="35ca2-113">Memory Pool and Usage</span></span>](#memory-pool-and-usage)

## <a name="description"></a><span data-ttu-id="35ca2-114">Description</span><span class="sxs-lookup"><span data-stu-id="35ca2-114">Description</span></span>

<span data-ttu-id="35ca2-115">頂點緩衝區的功能描述如下：如果它只能存在於系統記憶體中，則為，如果只用于寫入作業，以及它可以包含的頂點類型和數目。</span><span class="sxs-lookup"><span data-stu-id="35ca2-115">A vertex buffer is described in terms of its capabilities: if it can exist only in system memory, if it is only used for write operations, and the type and number of vertices it can contain.</span></span> <span data-ttu-id="35ca2-116">所有這些特性都會保留在 [**D3DVERTEXBUFFER \_ DESC**](d3dvertexbuffer-desc.md) 結構中。</span><span class="sxs-lookup"><span data-stu-id="35ca2-116">All these traits are held in a [**D3DVERTEXBUFFER\_DESC**](d3dvertexbuffer-desc.md) structure.</span></span>

<span data-ttu-id="35ca2-117">格式成員會設定為 D3DFMT \_ VERTEXDATA，表示這是頂點緩衝區。</span><span class="sxs-lookup"><span data-stu-id="35ca2-117">The Format member is set to D3DFMT\_VERTEXDATA to indicate that this is a vertex buffer.</span></span> <span data-ttu-id="35ca2-118">此類型會識別頂點緩衝區的資源類型。</span><span class="sxs-lookup"><span data-stu-id="35ca2-118">The Type identifies the resource type of the vertex buffer.</span></span> <span data-ttu-id="35ca2-119">使用結構成員包含一般功能旗標。</span><span class="sxs-lookup"><span data-stu-id="35ca2-119">The Usage structure member contains general capability flags.</span></span> <span data-ttu-id="35ca2-120">D3DUSAGE \_ SOFTWAREPROCESSING 旗標表示頂點緩衝區要與軟體頂點處理搭配使用。</span><span class="sxs-lookup"><span data-stu-id="35ca2-120">The D3DUSAGE\_SOFTWAREPROCESSING flag indicates that the vertex buffer is to be used with software vertex processing.</span></span> <span data-ttu-id="35ca2-121">使用中的 D3DUSAGE WRITEONLY 旗標是否存在， \_ 表示頂點緩衝區記憶體僅用於寫入作業。</span><span class="sxs-lookup"><span data-stu-id="35ca2-121">The presence of the D3DUSAGE\_WRITEONLY flag in Usage indicates that the vertex buffer memory is used only for write operations.</span></span> <span data-ttu-id="35ca2-122">這樣就可以釋出驅動程式，將頂點資料放在最佳的記憶體位置，以啟用快速處理和轉譯。</span><span class="sxs-lookup"><span data-stu-id="35ca2-122">This frees the driver to place the vertex data in the best memory location to enable fast processing and rendering.</span></span> <span data-ttu-id="35ca2-123">如果 \_ 未使用 D3DUSAGE WRITEONLY 旗標，驅動程式較不可能將資料放在讀取作業效率不佳的位置。</span><span class="sxs-lookup"><span data-stu-id="35ca2-123">If the D3DUSAGE\_WRITEONLY flag is not used, the driver is less likely to put the data in a location that is inefficient for read operations.</span></span> <span data-ttu-id="35ca2-124">這犧牲了一些處理和轉譯速度。</span><span class="sxs-lookup"><span data-stu-id="35ca2-124">This sacrifices some processing and rendering speed.</span></span> <span data-ttu-id="35ca2-125">如果未指定此旗標，則會假設應用程式在頂點緩衝區內的資料上執行讀取和寫入作業。</span><span class="sxs-lookup"><span data-stu-id="35ca2-125">If this flag is not specified, it is assumed that applications perform read and write operations on the data within the vertex buffer.</span></span>

<span data-ttu-id="35ca2-126">集區會指定配置給頂點緩衝區的記憶體類別。</span><span class="sxs-lookup"><span data-stu-id="35ca2-126">Pool specifies the memory class that is allocated for the vertex buffer.</span></span> <span data-ttu-id="35ca2-127">D3DPOOL \_ SYSTEMMEM 旗標表示系統在系統記憶體中建立了頂點緩衝區。</span><span class="sxs-lookup"><span data-stu-id="35ca2-127">The D3DPOOL\_SYSTEMMEM flag indicates that the system created the vertex buffer in system memory.</span></span>

<span data-ttu-id="35ca2-128">大小成員會儲存頂點緩衝區資料的大小（以位元組為單位）。</span><span class="sxs-lookup"><span data-stu-id="35ca2-128">The Size member stores the size, in bytes, of the vertex buffer data.</span></span> <span data-ttu-id="35ca2-129">FVF 成員包含 [D3DFVF](d3dfvf.md) 的組合，可識別緩衝區所包含的頂點型別。</span><span class="sxs-lookup"><span data-stu-id="35ca2-129">The FVF member contains a combination of [D3DFVF](d3dfvf.md) that identify the type of vertices that the buffer contains.</span></span>

## <a name="memory-pool-and-usage"></a><span data-ttu-id="35ca2-130">記憶體集區和使用量</span><span class="sxs-lookup"><span data-stu-id="35ca2-130">Memory Pool and Usage</span></span>

<span data-ttu-id="35ca2-131">您可以使用 [**IDirect3DDevice9：： CreateVertexBuffer**](/windows/desktop/api) 方法建立頂點緩衝區，這會將集區 (memory 類別) 和使用方式參數。</span><span class="sxs-lookup"><span data-stu-id="35ca2-131">You can create vertex buffers with the [**IDirect3DDevice9::CreateVertexBuffer**](/windows/desktop/api) method, which takes pool (memory class) and usage parameters.</span></span> <span data-ttu-id="35ca2-132">您也可以使用指定的 FVF 碼來建立 **IDirect3DDevice9：： CreateVertexBuffer** ，以用於固定函式頂點處理，或做為處理常式頂點的輸出。</span><span class="sxs-lookup"><span data-stu-id="35ca2-132">**IDirect3DDevice9::CreateVertexBuffer** can also be created with a specified FVF code for use in fixed function vertex processing, or as the output of process vertices.</span></span> <span data-ttu-id="35ca2-133">如需詳細資訊，請參閱 [FVF Direct3D 9 (的頂點緩衝區) ](fvf-vertex-buffers.md)。</span><span class="sxs-lookup"><span data-stu-id="35ca2-133">For details, see [FVF Vertex Buffers (Direct3D 9)](fvf-vertex-buffers.md).</span></span>

<span data-ttu-id="35ca2-134">當您 \_ 針對該裝置啟用混合模式或軟體頂點處理 (D3DCREATE \_ mixed \_ VERTEXPROCESSING/D3DCREATE \_ software \_ VERTEXPROCESSING) 時，可以設定 D3DUSAGE SOFTWAREPROCESSING 旗標。</span><span class="sxs-lookup"><span data-stu-id="35ca2-134">The D3DUSAGE\_SOFTWAREPROCESSING flag can be set when mixed-mode or software vertex processing (D3DCREATE\_MIXED\_VERTEXPROCESSING / D3DCREATE\_SOFTWARE\_VERTEXPROCESSING) is enabled for that device.</span></span> <span data-ttu-id="35ca2-135">您 \_ 必須針對要在混合模式中使用軟體頂點處理的緩衝區設定 D3DUSAGE SOFTWAREPROCESSING，但在混合模式中使用硬體頂點處理時，不應將其設定為最佳效能。 (D3DCREATE \_ 硬體 \_ VERTEXPROCESSING) 。</span><span class="sxs-lookup"><span data-stu-id="35ca2-135">D3DUSAGE\_SOFTWAREPROCESSING must be set for buffers to be used with software vertex processing in mixed mode, but it should not be set for the best possible performance when using hardware vertex processing in mixed mode.(D3DCREATE\_HARDWARE\_VERTEXPROCESSING).</span></span> <span data-ttu-id="35ca2-136">不過， \_ 當單一緩衝區同時用於硬體和軟體頂點處理時，設定 D3DUSAGE SOFTWAREPROCESSING 是唯一的選項。</span><span class="sxs-lookup"><span data-stu-id="35ca2-136">However, setting D3DUSAGE\_SOFTWAREPROCESSING is the only option when a single buffer is to be used with both hardware and software vertex processing.</span></span> <span data-ttu-id="35ca2-137">\_混合以及軟體裝置也允許 D3DUSAGE SOFTWAREPROCESSING。</span><span class="sxs-lookup"><span data-stu-id="35ca2-137">D3DUSAGE\_SOFTWAREPROCESSING is allowed for mixed as well as for software devices.</span></span>

<span data-ttu-id="35ca2-138">您可以指定 D3DPOOL SYSTEMMEM，將頂點和索引緩衝區強制到系統記憶體中 \_ ，即使在硬體中完成頂點處理也是一樣。</span><span class="sxs-lookup"><span data-stu-id="35ca2-138">It is possible to force vertex and index buffers into system memory by specifying D3DPOOL\_SYSTEMMEM, even when the vertex processing is done in hardware.</span></span> <span data-ttu-id="35ca2-139">這是一種方法，可在驅動程式將這些緩衝區放入 AGP 記憶體時避免過度大量的頁面鎖定記憶體。</span><span class="sxs-lookup"><span data-stu-id="35ca2-139">This is a way to avoid overly large amounts of page-locked memory when a driver is putting these buffers into AGP memory.</span></span>

<span data-ttu-id="35ca2-140">本節介紹在 Direct3D 應用程式中瞭解和使用頂點緩衝區所需的概念。</span><span class="sxs-lookup"><span data-stu-id="35ca2-140">This section introduces the concepts necessary to understand and use vertex buffers in a Direct3D application.</span></span> <span data-ttu-id="35ca2-141">資訊分成下列各節。</span><span class="sxs-lookup"><span data-stu-id="35ca2-141">Information is divided into the following sections.</span></span>

-   [<span data-ttu-id="35ca2-142"> (Direct3D 9) 建立頂點緩衝區 </span><span class="sxs-lookup"><span data-stu-id="35ca2-142">Creating a Vertex Buffer (Direct3D 9)</span></span>](creating-a-vertex-buffer.md)
-   [<span data-ttu-id="35ca2-143">存取頂點緩衝區的內容 (Direct3D 9) </span><span class="sxs-lookup"><span data-stu-id="35ca2-143">Accessing the Contents of a Vertex Buffer (Direct3D 9)</span></span>](accessing-the-contents-of-a-vertex-buffer.md)
-   [<span data-ttu-id="35ca2-144">從頂點緩衝區轉譯 (Direct3D 9) </span><span class="sxs-lookup"><span data-stu-id="35ca2-144">Rendering from a Vertex Buffer (Direct3D 9)</span></span>](rendering-from-a-vertex-buffer.md)
-   [<span data-ttu-id="35ca2-145">FVF (Direct3D 9) 的頂點緩衝區 </span><span class="sxs-lookup"><span data-stu-id="35ca2-145">FVF Vertex Buffers (Direct3D 9)</span></span>](fvf-vertex-buffers.md)
-   [<span data-ttu-id="35ca2-146">修正 (Direct3D 9) 的函式頂點處理 </span><span class="sxs-lookup"><span data-stu-id="35ca2-146">Fixed Function Vertex Processing (Direct3D 9)</span></span>](fixed-function-vertex-processing.md)
-   [<span data-ttu-id="35ca2-147"> (Direct3D 9) 的可程式化頂點處理 </span><span class="sxs-lookup"><span data-stu-id="35ca2-147">Programmable Vertex Processing (Direct3D 9)</span></span>](programmable-vertex-processing.md)
-   [<span data-ttu-id="35ca2-148"> (Direct3D 9) 的裝置類型和頂點處理需求 </span><span class="sxs-lookup"><span data-stu-id="35ca2-148">Device Types and Vertex Processing Requirements (Direct3D 9)</span></span>](device-types-and-vertex-processing-requirements.md)

## <a name="related-topics"></a><span data-ttu-id="35ca2-149">相關主題</span><span class="sxs-lookup"><span data-stu-id="35ca2-149">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="35ca2-150">Direct3D 資源</span><span class="sxs-lookup"><span data-stu-id="35ca2-150">Direct3D Resources</span></span>](direct3d-resources.md)
</dt> <dt>

[<span data-ttu-id="35ca2-151">從頂點和索引緩衝區轉譯 (Direct3D 9) </span><span class="sxs-lookup"><span data-stu-id="35ca2-151">Rendering from Vertex and Index Buffers (Direct3D 9)</span></span>](rendering-from-vertex-and-index-buffers.md)
</dt> <dt>

[<span data-ttu-id="35ca2-152"> (Direct3D 9) 的索引緩衝區 </span><span class="sxs-lookup"><span data-stu-id="35ca2-152">Index Buffers (Direct3D 9)</span></span>](index-buffers.md)
</dt> </dl>

 

 
