---
description: Microsoft DirectX 效果可讓頂點和圖元著色器與管線狀態整合，以轉譯物件。 效果是合併著色器以產生獨特轉譯條件的下一個邏輯步驟。
ms.assetid: vs|directx_sdk|~\effects.htm
title: " (Direct3D 9) 的效果"
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 59ed52a3a75f4b0682be4447f02ed305cf026af6aa30a59e921f4fa23f0e2211
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/11/2021
ms.locfileid: "119985981"
---
# <a name="effects-direct3d-9"></a> (Direct3D 9) 的效果

Microsoft DirectX 效果可讓頂點和圖元著色器與管線狀態整合，以轉譯物件。 效果是合併著色器以產生獨特轉譯條件的下一個邏輯步驟。

效果也提供方便的方式來撰寫不同硬體版本的著色器。 因為不同的視訊卡支援不同的功能，所以應用程式可以撰寫數個可在各種裝置上執行的技術。 如此一來，如果應用程式是在最新且最棒的硬體上執行，則應用程式可以執行最複雜的效果技巧。 另一方面，較不復雜的效果技巧也可以自動選擇在成本較低或功能較低的硬體上執行。

效果可以取代頂點處理和圖形管線所執行之圖元處理的一部分。 BasicHLSL 範例中使用頂點著色器和圖元著色器的效果範例。 您可以從 DirectX SDK 取得此範例並瞭解它。 如需有關 DirectX SDK 的資訊，請參閱 [什麼是 DIRECTX sdk？](../directx-sdk--august-2009-.md)。

如需效果的詳細資訊，請參閱下列主題：

-   [寫入效果](writing-an-effect.md)
-   [使用效果](using-an-effect.md)

## <a name="effects-and-the-3d-pipeline"></a>效果和3D 管線

下圖顯示管線。

![3d 管線的圖表](images/effects-block-diagram.png)

管線會將輸入資料轉換成填滿框架緩衝區的輸出圖元。 輸入資料來自物件空間中的頂點所組成的物件，或是從 N 個修補程式、矩形修補程式和三角形修補程式所建立的更高順序的表面。 鑲嵌輸入資料之後，管線會在產生最終圖元色彩之前，先執行頂點處理、基本處理和圖元處理。

頂點和圖元處理可以由固定函式管線執行，也可以使用可程式化著色器來執行。 輸入資料鑲嵌、基本處理和資料輸出都是由管線狀態所控制。 這一切都可以整合到效果中。 效果會設定控制管線功能的狀態。 效果會管理可程式化著色器以及固定的函式狀態。

效果可以儲存和還原狀態，讓裝置處於效果執行之前的相同狀態。 效果可以管理的狀態類型包括：

-   著色器狀態。 這包括建立和刪除著色器、設定著色器常數、設定著色器狀態，以及使用著色器呈現。
-   材質和取樣器狀態。 這包括指定材質檔、初始化材質階段、建立取樣器物件，以及設定取樣器狀態。
-   其他管線狀態。 這包括設定轉換、光源、材質和轉譯選項的狀態。 這些可以是全域變數或區域變數。 變數可以由效果本身或應用程式來設定。

效果包含多種轉譯選項，稱為技術。 每個技巧都會封裝全域變數、管線狀態、材質和取樣器狀態，以及著色器狀態。 單一樣式是在轉譯階段中執行。 一或多個傳遞可封裝在技術中。 您可以驗證所有的傳遞和技術，以查看效果程式碼是否會在硬體裝置上執行。

## <a name="effects-save-and-restore-state"></a>效果儲存與還原狀態

效果：管理狀態。 此字組在此非常廣泛使用，因為它包含管線需要用來指定轉譯條件的所有資訊類型。 這包括幾乎所有管線的功能區域。

轉譯選項是由技術和傳遞所控制。 應用程式會藉由設定一項作用中的技術，以及轉譯一或多個階段來呈現效果。 效果中的所有轉譯都是在成對的 [**Begin**](id3dxeffect--begin.md) 和 [**End**](id3dxeffect--end.md) 呼叫中完成。 呼叫 **Begin** 時，會建立 stateblock，並將裝置狀態儲存 (除非您另行指定) 。 在技術轉譯應用程式所指定要呈現的傳遞之後，會呼叫 **end** 以結束使用中的技術。 如果您選擇停用此儲存和還原功能) ，效果系統就會自動還原在狀態欄塊 (中所捕捉的管線狀態，以進行回應。

當程式設計多重傳遞轉譯順序時，每一個都需要它自己的狀態設定，效果可以減少追蹤狀態變更所需的維護。 若要查看可透過效果儲存和還原之狀態的詳細資訊，請參閱 [效果狀態 (Direct3D 9) ](effect-states.md)。

## <a name="effects-can-share-parameters"></a>效果可以共用參數

效果參數是在效果中宣告的所有非靜態變數。 這可能包括全域變數和批註。 您可以使用 shared 關鍵字宣告參數，然後使用效果集區來建立效果，以在不同效果之間共用效果參數。

複製的效果會使用與複製的效果相同的效果集區。 複製效果會產生效果的完整複本，包括全域變數、技術、傳遞和批註。

## <a name="related-topics"></a>相關主題

<dl> <dt>

[Direct3D 9 程式設計指南](dx9-graphics-programming-guide.md)
</dt> </dl>

 

 
