---
description: 在主應用程式和效果參數之間傳送值時，當主應用程式中的源資料類型 () 符合效果參數)  (的目的地資料類型時，會如預期般寫入資料。
ms.assetid: 4f3ef14a-7d67-45fe-9282-541221815d1f
title: 轉換和轉換
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0a9ca806caba09796acc4d0f966926edb9b6a37cf0ab2d40656e7d99f92d5b46
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/11/2021
ms.locfileid: "118097123"
---
# <a name="casting-and-conversion"></a>轉換和轉換

在主應用程式和效果參數之間傳送值時，當主應用程式中的源資料類型 () 符合效果參數)  (的目的地資料類型時，會如預期般寫入資料。 當資料類型不同時，會在來源資料重新排列以符合目的地時，進行轉換。

DXSAS 會定義下列類型轉換規則。 這些是效果的超集合 ( fx) 和 HLSL 類型轉換規則。 DXSAS 也會定義一些 [參數值](#parameter-value-modifiers) 修飾詞，這些修飾詞可能會影響從主應用程式傳送到系結參數的值。

## <a name="type-casting"></a>型別轉換

下表列出當某個資料類型傳送到另一個資料類型時，將會發生的轉換：



| 來源類型                                  | 目的地類型                             | 行為                                                                                                                                                                                                                                                                                                                                                                                                 |
|----------------------------------------------|----------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| FLOAT                                        | int                                          | 以趨近於零的方式捨入。                                                                                                                                                                                                                                                                                                                                                                                      |
| float、int                                   | bool                                         | 不等於0的值（以不等於0為基礎）會將 0 (int) 或 0.0 (float) ）視為 true，否則值會被視為 false。                                                                                                                                                                                                                                         |
| int                                          | FLOAT                                        |                                                                                                                                                                                                                                                                                                                                                                                                          |
| bool                                         | int、float                                   | False 會轉換為零。True 會轉換成一個。                                                                                                                                                                                                                                                                                                                                                     |
| texture1D、texture2D、texture3D、textureCUBE | 紋理                                      | 目的地材質會被視為來源材質類型。                                                                                                                                                                                                                                                                                                                                               |
| 字串                                       | texture1D、texture2D、texture3D、textureCUBE | 字串值會被視為資源位址，並使用與 [參數初始化注釋](parameter-initialization-annotation.md)相同的方式進行解析。 如果無法解析資源位址，則轉換無效，且主機應用程式必須傳回錯誤。 如果正確解析資源，則會將運算式的類型視為與已解析資源相同的類型。 |



 

## <a name="class-casting"></a>類別轉換

除了上述的型別轉換規則，DXSAS 還定義了在類別型別之間轉換所需的轉換規則集合。 資料行矩陣 (N x 1) 、資料列矩陣 (1 x N) ，以及將數值結構視為向量。

效果矩陣參數和 HLSL 矩陣變數可以定義值是資料列主要或資料行主要矩陣;不過，DirectX Api 一律會將 [**D3DMATRIX**](d3dmatrix.md) 和 [**D3DXMATRIX**](d3dxmatrix.md) 視為資料列的主要。



| Source 類別 | Destination 類別 | 行為                                                                                                                                                                                                                                                                                                                                        |
|--------------|-------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 純量       | 純量            | 套用類型轉換。                                                                                                                                                                                                                                                                                                                             |
| 純量       | 向量            | 套用類型轉換中所述的類型轉型和轉換行為之後，將純量來源值複寫至目的地向量的每個元件。                                                                                                                                                                             |
| 純量       | 矩陣            | 套用類型轉換中所述的類型轉換和轉換行為之後，將純量來源值複寫至目的地矩陣的每個元件。                                                                                                                                                                             |
| 純量       | Object            | 不正確轉換。 主機應用程式必須傳回錯誤。                                                                                                                                                                                                                                                                                           |
| 純量       | 結構         | 只有當目的結構只包含數值專案時，才有效。 如果有效，請在套用類型轉換中所述的類型轉換和轉換行為之後，將純量來源值複寫至目的結構的每個元件。                                                                                        |
| 向量       | 純量            | 在套用 [類型轉換](#type-casting)中所述的類型轉換和轉換行為之後，目的地純量會接收來源向量第一個元件的值。                                                                                                                                                       |
| 向量       | 向量            | 如果目的地向量有比來源向量更多的元件，則不正確轉換。 在套用 [類型轉換](#type-casting)中所述的類型轉換和轉換行為之後，目的地向量會接收來源向量的最左邊值。 來源向量剩餘的最右邊元件會遺失。             |
| 向量       | 矩陣            | 除非來源向量與目的地矩陣具有相同數目的元件，否則不正確轉換。 如果轉換有效，則會套用向量對向量轉換的行為。                                                                                                                                                             |
| 向量       | Object            | 不正確轉換。 主機應用程式必須傳回錯誤。                                                                                                                                                                                                                                                                                           |
| 向量       | 結構         | 只有當目的結構只有數值元素，而且不包含比來源向量具有元件的多個專案時，才有效。 在套用 [類型](#type-casting)轉換中所述的型別轉換和轉換行為之後，目的結構的元素會接收來源向量的最左邊元件。      |
| 矩陣       | 純量            | 在套用 [類型轉換](#type-casting)中所述的類型轉換和轉換行為之後，目的地純量會收到來源矩陣左上值的值。                                                                                                                                                 |
| 矩陣       | 向量            | 除非來源矩陣的元件數目與目的地向量相同，否則不正確轉換。 如果轉換有效，則會套用上方向量對向量轉換的行為。                                                                                                                                                       |
| 矩陣       | 矩陣            | 如果目的地矩陣有比來源矩陣更多的元件，則不正確轉換。 在套用 [類型轉換](#type-casting)中所述的類型轉換和轉換行為之後，目的地矩陣會收到來源矩陣的最左邊值。 來源矩陣的剩餘最右邊最下層元件會遺失。 |
| 矩陣       | Object            | 不正確轉換。 主機應用程式必須傳回錯誤。                                                                                                                                                                                                                                                                                           |
| 矩陣       | 結構         | 結構的大小必須等於矩陣的大小，且結構的所有元件都必須是數值。                                                                                                                                                                                                                          |
| Object       | 純量            | 不正確轉換。 主機應用程式必須傳回錯誤。                                                                                                                                                                                                                                                                                           |
| Object       | 向量            | 不正確轉換。 主機應用程式必須傳回錯誤。                                                                                                                                                                                                                                                                                           |
| Object       | 矩陣            | 不正確轉換。 主機應用程式必須傳回錯誤。                                                                                                                                                                                                                                                                                           |
| Object       | Object            | 如果物件的類型完全相同，且符合 [類型轉換](#type-casting)中定義的行為，則為有效。                                                                                                                                                                                                                   |
| 結構    | 純量            | 如果來源結構至少包含一個數值成員，則為有效。 在套用 [類型轉換](#type-casting)中所述的類型轉換和轉換行為之後，目的地純量會接收來源結構第一個數值成員的值。                                                                                |
| 結構    | 向量            | 來源結構必須至少為向量的大小。 第一個元件的數值必須是目的地向量的大小。                                                                                                                                                                                                    |
| 結構    | 矩陣            | 來源結構必須至少為向量的大小。 第一個元件的數值必須是目的地向量的大小。                                                                                                                                                                                                    |
| 結構    | 結構         | 目的結構不得大於來源結構。 所有個別來源和目的地元件之間必須有有效的轉換。                                                                                                                                                                                       |



 

## <a name="parameter-value-modifiers"></a>參數值修飾詞

參數修飾詞批註會將其他資訊新增至參數，以便正確地解讀參數的資料。 比方說，向量可能需要以正規化的資料表示，或是以英寸為單位來測量長度。 參數值修飾詞注釋表示這項額外資訊，讓主應用程式可以在資料傳輸至效果參數時，正確地轉換值。

這些是參數修飾詞：



| 參數值修飾詞注釋 | 描述                                    |
|--------------------------------------|------------------------------------------------|
| [SasNormalize](#sasnormalize)        | 指定向量是否正規化。 |
| [SasUnits](#sasunits)                | 指定參數的測量單位。  |



 

### <a name="sasnormalize"></a>SasNormalize

SasNormalize 批註表示相關聯的參數在指派時應該是標準化值。 此批註只會影響 float2、float3 和 float4 參數。


```
string SasNormalize = "Value";
```



其中值為 True 或 False。

以下是範例：


```
float3 UpNormal
<
  bool SasNormalize = "True";
>;
```



### <a name="sasunits"></a>SasUnits

效果參數資料的單位如下：


```
string SasUnits = "Value";
```



其中的值是下列其中一項：



| 測量類型     | 值        | 描述                    |
|----------------------|--------------|--------------------------------|
| 無單位             | 空字串 | 無單位                       |
| 距離             | mm           | 公釐                    |
|                      | cm           | 公分                    |
|                      | m            | 米                         |
|                      | 公里           | 公里                     |
| 角度                | rad          | Radians                        |
| 時間                 | ms           | 毫秒                   |
|                      | 秒          | 秒                        |
|                      | 分鐘          | 分鐘                        |
|                      | 小時           | 小時                          |
| 線性速度      | mm/秒       | 每秒的毫米         |
|                      | cm/秒       | 每秒的單位數         |
|                      | m/秒        | 每秒計量數              |
|                      | m/小時         | 每小時的計量                |
|                      | 公里/小時        | 每小時公里            |
| 線性加速  | mm/秒²      | 每秒平方 |
|                      | cm/秒²      | 每秒的單位數平方 |
|                      | m/秒²       | 每秒計量數平方      |
|                      | m/hr ²        | 每小時的計量平方        |
|                      | 公里/小時²       | 每小時公里 $ 平方    |
| Angular速度     | rad/sec      | 每秒弧度             |
| Angular加速度 | rad/sec ²     | 每秒弧度平方     |
| 區域圖                 | mm ²          | 毫米平方            |
|                      | cm ²          | 中平方            |
|                      | 平方米           | 計量平方                 |
|                      | km²          | 公里平方             |
| 磁碟區               | mm ³          | 毫米立方              |
|                      | cm³          | X 立方              |
|                      | m³           | 計量立方                   |
|                      | 公里³          | 公里的立方               |



 

## <a name="related-topics"></a>相關主題

<dl> <dt>

[DirectX 標準注釋和語義參考](dx9-graphics-reference-effects-dxsas.md)
</dt> </dl>

 

 



