---
description: 控制碼提供使用 ID3DXEffectCompiler 或 ID3DXEffect 參考技術、傳遞、注釋和參數的有效方式。
ms.assetid: 2494ecf9-88a7-43dc-a75b-ed743b11993a
title: '處理 (Direct3D 9) '
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d9e0dbbcbbc38685cae7c89b334bfb5458bc8386
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/06/2021
ms.locfileid: "104510018"
---
# <a name="handles-direct3d-9"></a><span data-ttu-id="55237-103">處理 (Direct3D 9) </span><span class="sxs-lookup"><span data-stu-id="55237-103">Handles (Direct3D 9)</span></span>

<span data-ttu-id="55237-104">控制碼提供使用 [**ID3DXEffectCompiler**](id3dxeffectcompiler.md) 或 [**ID3DXEffect**](id3dxeffect.md)參考技術、傳遞、注釋和參數的有效方式。</span><span class="sxs-lookup"><span data-stu-id="55237-104">Handles provide an efficient means for referencing the techniques, passes, annotations, and parameters with [**ID3DXEffectCompiler**](id3dxeffectcompiler.md) or [**ID3DXEffect**](id3dxeffect.md).</span></span> <span data-ttu-id="55237-105">當您呼叫表單 Get \[ 參數注釋函式 \| \| \| 技術 \| 傳遞 \] \[ ByName \| BySemantic \| \] 專案的函式時，就會動態產生它們。</span><span class="sxs-lookup"><span data-stu-id="55237-105">They are generated dynamically when you call functions of the form Get\[Parameter\|Annotation\|Function\|Technique\|Pass\]\[ByName\|BySemantic\|Element\].</span></span>

<span data-ttu-id="55237-106">執行程式時，多次產生相同物件的控制碼，會每次都傳回相同的控制碼。</span><span class="sxs-lookup"><span data-stu-id="55237-106">While running a program, generating a handle to the same object multiple times will return the same handle back every time.</span></span> <span data-ttu-id="55237-107">但是，當您多次執行程式時，請不要依賴控制碼保持不變。</span><span class="sxs-lookup"><span data-stu-id="55237-107">But don't rely on the handle staying constant when you run your program multiple times.</span></span> <span data-ttu-id="55237-108">另請注意， [**ID3DXEffect**](id3dxeffect.md) 和 [**ID3DXEffectCompiler**](id3dxeffectcompiler.md) 的不同實例所產生的控制碼將會不同。</span><span class="sxs-lookup"><span data-stu-id="55237-108">Also be aware that handles generated by different instances of [**ID3DXEffect**](id3dxeffect.md) and [**ID3DXEffectCompiler**](id3dxeffectcompiler.md) will be different.</span></span>

<span data-ttu-id="55237-109">如果您看到標頭檔，您會發現 (D3DXHANDLEs) 的控制碼是以技術為字串指標。</span><span class="sxs-lookup"><span data-stu-id="55237-109">If you view the header files, you'll notice that handles (D3DXHANDLEs) are technically string pointers.</span></span>

<span data-ttu-id="55237-110">您傳遞至函式（例如 GetParameter \[ ByName \| 元素 \| BySemantic 或 GetAnnotation ByName）的控制碼 \] \[ \] 可以三種形式，如下所示：</span><span class="sxs-lookup"><span data-stu-id="55237-110">The handles that you pass into functions such as GetParameter\[ByName\|Element\|BySemantic\] or GetAnnotation\[ByName\] can be in three forms as follows:</span></span>

1.  <span data-ttu-id="55237-111">函數所傳回的控制碼，例如 GetParameter \[ ByName \| Element \| BySemantic \] 。</span><span class="sxs-lookup"><span data-stu-id="55237-111">Handles that were returned by functions such as GetParameter\[ByName\|Element\|BySemantic\].</span></span>
2.  <span data-ttu-id="55237-112">字串，例如 MyVariableName、MyTechniqueName 或 MyArray \[ 0 \] 。</span><span class="sxs-lookup"><span data-stu-id="55237-112">Strings such as MyVariableName, MyTechniqueName, or MyArray\[0\].</span></span>
3.  <span data-ttu-id="55237-113">控制碼 = **Null**。</span><span class="sxs-lookup"><span data-stu-id="55237-113">Handle = **NULL**.</span></span> <span data-ttu-id="55237-114">有四個案例。</span><span class="sxs-lookup"><span data-stu-id="55237-114">There are four cases.</span></span>
    -   <span data-ttu-id="55237-115">如果它是方法傳回值，則方法無法找到控制碼。</span><span class="sxs-lookup"><span data-stu-id="55237-115">If it is a method return value, the method failed to find the handle.</span></span>
    -   <span data-ttu-id="55237-116">如果傳入 **Null** 控制碼作為 GetParameter ByName 專案 BySemantic 的第一個 \[ 參數 \| ，函數會傳回 \| \] 最上層參數。</span><span class="sxs-lookup"><span data-stu-id="55237-116">If a **NULL** handle is passed in as the first parameter of GetParameter\[ByName\|Element\|BySemantic\], the function returns a top-level parameter.</span></span> <span data-ttu-id="55237-117">相反地，如果控制碼為非 **Null**，則函式會傳回由控制碼識別的結構成員或元素。</span><span class="sxs-lookup"><span data-stu-id="55237-117">Conversely, if the handle is non-**NULL**, the function returns a structure member or element identified by the handle.</span></span>
    -   <span data-ttu-id="55237-118">如果傳入 **Null** 控制碼做為 ValidateTechnique 的第一個引數或 IsParameterUsed 的第二個引數，則會驗證目前的技巧。</span><span class="sxs-lookup"><span data-stu-id="55237-118">If a **NULL** handle is passed in as the first argument of ValidateTechnique or the second argument of IsParameterUsed, the current technique is validated.</span></span>
    -   <span data-ttu-id="55237-119">如果傳入 **Null** 控制碼做為 FindNextValidTechnique 的第一個引數，則搜尋有效的技巧會從效果的第一個技巧開始。</span><span class="sxs-lookup"><span data-stu-id="55237-119">If a **NULL** handle is passed in as the first argument of FindNextValidTechnique, the search for a valid technique starts at the first technique in the effect.</span></span>

<span data-ttu-id="55237-120">效能提示：在您的應用程式開始時，執行初始化階段以從字串產生控制碼。</span><span class="sxs-lookup"><span data-stu-id="55237-120">Performance tip At the start of your application, perform an initialization pass to generate handles from the strings.</span></span> <span data-ttu-id="55237-121">從該時間點開始，只使用控制碼。</span><span class="sxs-lookup"><span data-stu-id="55237-121">From that point on, use only handles.</span></span> <span data-ttu-id="55237-122">傳遞字串而非產生的控制碼會變慢。</span><span class="sxs-lookup"><span data-stu-id="55237-122">Passing in strings instead of generated handles is slower.</span></span>

## <a name="examples"></a><span data-ttu-id="55237-123">範例</span><span class="sxs-lookup"><span data-stu-id="55237-123">Examples</span></span>

<span data-ttu-id="55237-124">以下是使用 Get \[ 參數注釋函式 \| \| \| 技術 \| 傳遞 \] \[ ByName \| BySemantic 元素函 \| 式 \] 來產生控制碼的一些範例。</span><span class="sxs-lookup"><span data-stu-id="55237-124">Here are some examples using the Get\[Parameter\|Annotation\|Function\|Technique\|Pass\]\[ByName\|BySemantic\|Element\] functions to generate handles.</span></span>


```
// Gets handle of second top-level parameter handle in the effect file
h1 = GetParameter(NULL, 1);    

// Gets handle of the third struct member of MyStruct
h2 = GetParameter("MyStruct", 2); 

// Gets handle of the third array element handle of MyArray
h3 = GetParameterElement("MyArray", 2); 

// Gets handle of first member of h1 (that is, the second top-level param)
h4 = GetParameter(h1, 0);    

// Gets handle of MyStruct.Data
h5 = GetParameterByName("MyStruct", "Data");    
// or 
h6 = GetParameterByName(NULL, "MyStruct.Data");    

// Gets handle of MyStruct.Data.SubData
h7 = GetParameterByName("MyStruct.Data", "SubData"); 
// or 
h8 = GetParameterByName(NULL, "MyStruct.Data.SubData");

// Gets handle of fifth annotation of h1 (that is, second top-level param)
h9 = GetAnnotation(h1, 4);    

// Gets handle of MyStruct's annotation, called Author
h10 = GetAnnotationByName("MyStruct", "Author");  
// or
h11 = GetParameterByName(NULL, "MyStruct@Author"); 
```



## <a name="related-topics"></a><span data-ttu-id="55237-125">相關主題</span><span class="sxs-lookup"><span data-stu-id="55237-125">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="55237-126">效果格式</span><span class="sxs-lookup"><span data-stu-id="55237-126">Effect Format</span></span>](dx9-graphics-reference-effects-file-format.md)
</dt> </dl>

 

 



