---
title: 建立動畫
description: 建立動畫
ms.assetid: 6d5c3c61-b3f2-4505-aa43-b6d001c444a5
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4ed5955e57af405451def3208902678d3d6a0ffb9857cc719bfe100dbbd2447f
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/11/2021
ms.locfileid: "118752315"
---
# <a name="creating-animations"></a>建立動畫

\[Microsoft Agent 已于 Windows 7 淘汰，在後續版本的 Windows 中可能無法使用。\]

若要開始建立您的字元動畫，請選取樹狀結構中的 **動畫** 圖示。 這會顯示 [ **屬性** ] 頁面，其中包含所有動畫的預設設定。 您可以變更 [ **屬性** ] 頁面上的畫面格大小、預設框架持續時間和色彩選擇區設定。

### <a name="setting-your-characters-frame-size"></a>設定您的字元畫面格大小

動畫框架的高度和寬度必須在整個字元定義中保持不變， (也就是所有該字元的動畫都) 。 雖然您可以變更預設設定的框架大小 (128 x 128 圖元) ，但是編輯器中顯示的影像將會縮放以符合預設的顯示大小。 如果您變更預設框架設定，則可以從 [**編輯**] 功能表中選擇 [**開啟框架視窗]** ，以顯示框架的完整、未縮放的大小。

### <a name="setting-your-characters-palette"></a>設定您的字元的調色板

根據預設，編輯器會使用您所載入的第一個點陣圖影像來設定您的字元預設色彩選擇區、決定字元顯示方式的色彩，以及將<sup>第</sup> 11 個調色板位置中的色彩設定為您的透明度色彩。 不過，您可以在 [ **調色板] 資訊** 群組中明確地設定調色板和透明度。 這可讓您指定要用於色板的影像檔案。 您可以指定其中一個動畫圖像檔案或任何圖形檔案。 您指定的調色板檔案必須是8位的 (256) 色彩檔。 載入之後，請使用 [ **變更設定** ] 按鈕來變更透明度色彩。

您的字元的色板不能重新對應標準系統色彩。 顯示影像時，編輯器會自動保留系統的調色板。 此外，您的所有動畫影像都必須使用相同的色調色板和透明度色彩。 這非常重要。 如果沒有，您可能會在將影像載入編輯器時看到影像的色彩重新對應。

雖然您可以設定字元的色彩選擇區，但在 Windows 系統上，顯示內容會設定為8位 (256) 色板，則字元的色彩會受限於目前的系統元件。 因為應用程式可能會變更系統調色板，所以字元可能不會以正確的色彩設定出現。 雖然無法避免這種情況，但您可以藉由限制所使用的色彩數目來減少效果，並根據應用程式駕駛字元的應用程式所使用的調色板來設定字元的調色板。 例如，如果您要開發與網頁搭配使用的字元，您可能會想要使用 Microsoft Internet Explorer 的半色調調色板來設定字元的調色板。 您可以用滑鼠右鍵按一下網頁上的影像，然後選擇 [**另存** 新檔] 選項，選擇 [另存新檔 **] 選項中** 的 [**點陣圖**]，然後按一下 [**儲存**]，以抓取瀏覽器的調色板。 若要將動畫圖像檔優化為特定的調色板檔案，您可能會想要使用像是均衡 DeBabelizer 的產品。

### <a name="creating-a-new-animation"></a>建立新的動畫

確定您的全域動畫設定之後，您就可以開始建立動畫。 若要建立新的動畫，請從 [**編輯**] 功能表或工具列上的 [**新增動畫**] 按鈕選擇 [**新增動畫**]。 這會在樹狀結構的 **動畫** 圖示底下新增動畫圖標，並將新的圖示指派為預設名稱。 您可以在 [ **動畫名稱** ] 欄位中輸入，以重新命名您的動畫。 請注意，字元定義內的動畫名稱必須是唯一的。 此外，請避免在檔案名中使用不是有效字元的字元。

### <a name="adding-frames"></a>加入框架

每個動畫都是由畫面格組成。 若要為您的動畫建立新的框架，請從 [**編輯**] 功能表或工具列選擇 [**新的框架**]。 這會將新的框架圖示新增至動畫圖標底下的樹狀結構，並顯示三個索引標籤式頁面。 [ **一般** ] 頁面包含的控制項可讓您載入及調整框架的影像。 它也包含畫面格外觀的顯示區域。

![顯示具有檔案名、路徑和位置之影像窗格的螢幕擷取畫面。](images/f2charflame.gif)

框架可以包含一或多個影像。 若要定義框架的影像，請按一下 [**影像**] 清單方塊正上方的 [**新增影像檔**] 按鈕。 [ **選取影像檔** 案] 對話方塊隨即顯示，讓您可以選取點陣圖影像檔案。

![顯示檔案總管中選取之影像檔案的螢幕擷取畫面。](images/f3chardialbox.gif)

選取您要載入的檔案，選擇 [ **開啟**]，影像會出現在 [ **一般** ] 頁面上的畫面格顯示中。 編輯器接受以1位 (單色) 、4位或8位 Windows 點陣圖格式或 GIF 格式儲存的影像。

您可以使用 [ **位置** ] 方塊中影像下方的四個箭號按鈕，來調整影像在框架內的外觀。 如果影像大於您的框架大小，則只會顯示畫面內出現的影像部分。 如果您增加畫面格大小，影像可能會調整以容納在編輯器的顯示區域中。

您也可以從 [**編輯**] 功能表中選擇 [**開啟框架視窗]** 來顯示畫面格。 這會將目前的框架顯示在不同的視窗中，而不會調整載入框架的影像。 這個視窗的初始大小是以您框架的高度和寬度設定為基礎。 您可以將它調整為較小但不大。 框架視窗會使用編輯器中的控制項來反映您所做的變更，也可讓您在流覽其他屬性頁時查看框架。

![顯示 [位置] 窗格的螢幕擷取畫面。](images/f4charposctrl.gif)

您可以從多個影像撰寫框架。 每次您選取 [ **新增影像** ] 按鈕並選擇另一個影像時，影像就會加入至清單和影像顯示區域。 您也可以選取多個檔案，以新增多個影像。 當您按一下 [ **選取影像檔** 案] 對話方塊時，按下 SHIFT 或 CTRL，然後選擇 [ **開啟**]。 [**影像**] 清單方塊上方的 [**上移**] 和 **[下移] 按鈕，** 會以框架的顯示順序 (z 順序) 移動選取的影像。 您也可以在清單中拖曳影像來移動影像。 選取清單中的影像，然後按一下 [ **刪除** ] 按鈕，就會移除影像。 若要變更已載入至另一個影像檔案的影像，您可以按一下檔案名直接進行編輯，或使用 **...** (省略號) 按鈕來顯示 [ **選取影像檔** 案] 對話方塊，並選取不同的檔案。

![顯示省略號按鈕的螢幕擷取畫面。](images/f5charell.gif)

您可以使用 [ **持續時間** ] 文字方塊來設定框架的持續時間;亦即，畫面格的顯示時間長度。 如果框架沒有影像且持續時間為零，則當動畫播放時，不會顯示框架。

您也可以指定在畫面格顯示時播放的音效效果檔案。 如果您打算從 web 伺服器載入此字元，您可能會想要壓縮音效效果檔案，以將載入時間降至最低。 然後，您可以在代理程式字元編輯器中指定壓縮的音效檔。 此外，請避免使用持續時間超過動畫持續時間的音效效果，特別是避免迴圈的音效效果，因為 Microsoft Agent 動畫服務不會傳送動畫完成事件，直到音效完成為止。 也請避免針對您指派給 **聆聽** 或 **聽覺** 狀態的任何動畫指定音效效果，因為這會干擾語音輸入。 最後，雖然您可以在動畫中包含一個以上的音效效果，但請避免將它們放在一起使其重迭，因為這可能會影響動畫的時間。 此外，請記住，音效效果可能會根據使用者的硬體以不同的費率播放。

若要將畫面格新增至動畫，請再次選擇 **新的框架** 命令，並遵循相同的程式。 您也可以選擇載入多個映射，並自動為其產生新的框架。 若要使用這項功能，請從 [**編輯**] 功能表選擇 **影像中的新框架**。 畫面格會根據影像檔案名以字母順序建立。 當您完成定義動畫的所有框架之後，您可以再次選擇 [ **新增動畫** ] 命令以開始新的動畫。

還有其他方法可以將畫面格新增至動畫，以及在動畫內或之間移動框架。 您可以從相同或另一個動畫選取另一個框架 () 然後選擇 [ **剪** 下] 或 [ **複製**]，然後選取動畫或該動畫中的框架，然後選擇 [ **貼** 上]。 您也可以將畫面格從某個動畫拖曳到另一個動畫。 如果您在動畫中拖曳，動作就會移動框架。 如果您拖曳到另一個動畫，它會複製框架。 在相同的動畫中拖曳至先前的框架會在您拖曳的框架之前插入框架。 拖曳至下列框架之後，會將它放在您拖曳的框架之後。 如果您使用滑鼠右鍵拖曳畫面格，則放開按鈕會顯示快顯功能表，其中包含您的傳輸選項。

您也可以複製現有動畫來建立動畫 (選取動畫並選擇 [ **複製**) ]，然後選取 **動畫** 圖示或另一個動畫圖標，然後選擇 [ **貼** 上]。 雖然您可以變更名稱，但是編輯器會自動為動畫建立新的名稱。

### <a name="branching"></a>分支

當您建立框架時，您也可以定義接下來要播放的框架。 依預設，動畫順序中所播放的下一個框架一律為下一個框架（以 z 順序排列）。 不過，藉由選擇 [ **分支** ] 頁面，您可以設定多達三個伺服器可能播放之其他框架的機率。 在適當的欄位中輸入機率百分比和目標框架編號。 您可以指定分支，即使是沒有影像的框架，並將其持續時間設為零。 這可讓您在不先顯示特定影像的情況下進行分支。

![顯示 [分支] 頁面的螢幕擷取畫面。](images/f6charbranch.gif)

您可以使用分支功能來建立將會無限迴圈的動畫。 不過，請注意，當迴圈動畫播放時，字元佇列中的其他動畫將不會播放，直到事件為止（例如，使用者按下推播鍵或呼叫 [**Stop**](stop-method.md) 方法的用戶端應用程式），以中止迴圈動畫。 因此，在建立迴圈動畫之前，請仔細考慮將使用動畫的內容。

[分支] 頁面也可讓您建立結束分支。 「結束分支」（exit branch）是一種框架的分支，當動畫已停止，且播放下一個動畫之前，動畫將會執行此工作。 定義結束分支可讓您在轉換過程中，順暢地移動到另一個動畫。 您的結束分支不能建立迴圈迴圈，但最終必須能夠結束動畫的最後一個畫面格。

您不需要為每個框架提供結束分支，但如果沒有，則動畫會遵循框架的一般分支。 如果框架沒有明確的分支，則動畫會自動分支至其後的框架。 例如，如果您從畫面格3分支至框架1，且框架1沒有任何其他分支 (normal 或 exit 分支) ，則框架1會分支到框架2。 如果框架2沒有分支，則動畫會分支回框架3，而您會有迴圈的迴圈。 相反地，您可以從畫面格3分支至框架1，然後將畫面格1的結束分支設定為畫面格3之後的任何框架，並且通常會繼續進行動畫的最後一個畫面格。

有時候您可能需要建立動畫的明確最終畫面格，而不會明顯地播放，但會提供動畫的結尾。 例如，您需要結束動畫，但結束于最後一個畫面格將不適用。 若要這麼做，您可以建立空白的零持續時間框架作為動畫的最後一個畫面格。 這可讓動畫在動畫的最後一個畫面格中正常播放，也可讓您為結束分支提供最終的結束點。

### <a name="previewing-an-animation"></a>預覽動畫

您可以選擇 [**編輯**] 功能表上的 [**預覽**] 命令或工具列上的 [預覽] 按鈕，在 [代理程式字元編輯器] 中預覽動畫。 這會從目前選取的畫面格開始播放您的動畫，包括任何分支和音效效果。 當動畫完成時，它會重設為目前選取的畫面格。 若要播放整個動畫，請移至樹狀檢視、選取動畫的圖示或動畫的第一個畫面格，然後選擇 [ **預覽** ] 命令。 編輯器會在 [ **一般** ] 頁面上將畫面格動畫。 若要在預覽結束前將其停止，請選擇 [ **停止預覽** ] 命令。 預覽 **命令會** 在預覽播放時自動變更為 **停止預覽** 。

您也可以在 [**編輯**] 功能表或工具列上選擇 [**預覽結束分支**] 命令，以預覽結束分支。 可讓您測試結束分支將如何從任何特定的框架顯示。

### <a name="assigning-speaking-overlays"></a>指派說話覆蓋

您可以定義一個字元，讓它在動畫的最後一個畫面格進行演講。 在此畫面上，選擇 [重迭 **] 頁面。** 此頁面可讓您將嘴影像檔案載入並指派給 Microsoft Agent 支援的標準嘴位置。 按一下 [ **新增影像** ] 按鈕，然後從對話方塊中選取影像。 您也可以選取多個影像，然後編輯器會從您選取的嘴位置開始載入並指派影像。 按一下 [ **上移** ] **和 [下移]** 按鈕，或拖曳專案以變更清單中的影像指派。 按一下 [ **刪除** ] 按鈕以移除影像。 您也可以按一下清單中的專案，並重新輸入其檔案名，或是選擇 **省略號** 按鈕來顯示 [ **選取影像檔** 案] 對話方塊，以編輯指派之檔案的路徑名稱。

![螢幕擷取畫面，顯示已選取檔案的 [重迭] 頁面。](images/f7charover.gif)

您的嘴重迭必須符合其顯示所在的基底框架大綱內。 如果沒有，則會將它們裁剪成基底框架。

如果您想要讓字元與基底框架外的嘴保持互動--例如，當字元朝側邊朗讀時，請先使用字元的 head (或將隨著字元進行移動) 作為其最上層影像的區域來建立基底框架。 然後，定義您的嘴重迭以取代該影像，並設定 [ **取代基底畫面格最上層影像** ] 選項。 您也可以使用 [ **全部設定** ] 按鈕，針對框架中的所有嘴重迭設定這個選項。

### <a name="assigning-a-return-animation"></a>指派傳回動畫

若要建立從某個動畫到下一個動畫的平滑轉換，請將動畫順序設計成以中性影像作為開頭和結尾。 如需詳細資訊，請參閱 [**設計 Microsoft Agent 的字元**](designing-characters-for-microsoft-agent.md)。 不過，這並不表示每個動畫都必須以中立的位置結束。 您可以透過一連串的框架建立一個字元的動畫，讓它在最後一個畫面格進行對話，然後建立另一個互補的動畫，將字元傳回至中立的位置。 這個互補的動畫稱為「傳回動畫」。

您可以針對此用途建立明確動畫來定義傳回動畫。 您也可以使用您在動畫中定義的結束分支來建立傳回動畫。 若要指派傳回動畫，請選取樹狀結構中的動畫，然後從 [屬性] 頁面上的 [傳回動畫] 下拉式清單中選取您所建立的 [傳回動畫] 或 [結束分支]。

建立和指派傳回動畫有一個額外的優點：當伺服器取得播放另一個動畫的要求時，如果已指派傳回動畫，它就會嘗試播放所播放之最後一個動畫的傳回動畫。 這可確保順利轉換。 如果動畫在中立位置開始並結束，您就不需要定義傳回動畫。 同樣地，如果您想要自行處理從某個動畫轉換成另一個動畫的轉換，您可能不需要指派傳回動畫。

### <a name="assigning-animations-to-states"></a>指派狀態的動畫

當主控用戶端應用程式使用特定方法時，Microsoft Agent 動畫服務會自動播放動畫。 例如，當應用程式呼叫 [**MoveTo**](moveto-method.md) 和 [**GestureAt**](gestureat-method.md) 方法時，伺服器會自動判斷字元的顯示位置並播放適當的動畫。 同樣地，當使用者未與字元互動幾秒鐘時，Microsoft Agent 會自動播放閒置動畫。 當伺服器代表應用程式自動播放動畫時，這些條件稱為「 *狀態*」。 但是，若要讓伺服器知道要播放哪一個動畫，您必須將動畫指派給這些狀態。

若要將動畫或動畫指派給狀態，請建立適當的動畫，展開 [編輯器] 視窗樹狀檢視中的 [狀態] 專案，然後選取 [狀態] 圖示。 您所建立的動畫清單會出現在視窗右邊的清單方塊中。 檢查您想要指派給此狀態的動畫。 請注意，您可以將一個以上的動畫指派給相同的狀態。 這可讓伺服器隨機選取不同的狀態動畫。 將動畫指派給狀態並不會防止動畫直接播放該動畫。

您也可以在樹狀結構中選取動畫的專案，以將動畫指派給狀態。 [**屬性**] 頁面上的 [**指派給狀態**] 清單方塊會列出狀態。 選取您要指派動畫之狀態的核取方塊。

由於狀態僅適用于伺服器必須代表用戶端應用程式自動播放動畫的情況，因此編輯器不支援建立其他狀態。 因此，定義您自己的狀態並沒有任何好處。 如果需要，您可以使用 [**play**](play-method.md) 方法明確地播放任何動畫。

### <a name="saving-your-character-definition"></a>儲存您的字元定義

您可以 **選擇 [檔案] 功能表上** 的 [**儲存**] 命令或工具列上的 [**儲存字元定義**] 按鈕，以儲存字元的定義檔。 如果您想要以新名稱儲存字元定義檔，請 **選擇 [檔案] 功能表上** 的 [**另存** 新檔] 命令。 編輯器會將字元的可編輯定義儲存為代理程式字元定義 (。ACD) 檔。 您也可以使用大部分的文字編輯器和文字處理應用程式來編輯這種自我記錄文本檔案格式。

### <a name="printing-your-character-definition"></a>列印您的字元定義

若要列印字元的定義，請 **選擇 [檔案] 功能表上** 的 [**列印**] 命令或工具列上的 [**列印**] 按鈕。 若要設定列印輸出的屬性，請選擇 [版面 **設定** ] 命令，然後選擇您的設定，然後選取 [ **列印** ] 命令。

### <a name="building-a-character"></a>建立字元

當您完成建立動畫之後，必須將字元和影像編譯成 Microsoft Agent 用來載入此資料的特殊格式。 若要建立字元，請選取 [檔案 **] 功能表或工具列上的 [** 組建字元] 命令。 如果您在字元定義檔中有未儲存的編輯，編輯器會先儲存定義檔，然後再顯示 [ **組建字元** ] 對話方塊。

![螢幕擷取畫面，顯示已選取檔案的 [組建字元] 視窗。](images/f8charbldg.gif)

代理程式字元編輯器會根據您的字元定義檔案名自動提議檔案名。 [組建字元] 對話方塊也包含下拉式清單，讓您可以選擇以單一儲存檔 ( 建立字元。ACS) 或多個檔案。 如果您選擇後者，編輯器會建立。包含字元資料和的 ACF 檔案。您所建立之每個動畫的 ACA 檔案。 如果您打算安裝和存取與用戶端應用程式儲存在同一部電腦上的字元，通常會選擇單一結構化檔案格式。 此格式可讓您輕鬆且有效率地安裝和存取字元。 但是，如果將使用 HTTP 通訊協定從 web 伺服器存取字元，請使用建立您的字元。ACF (個別) 檔案格式。 後者的檔案結構允許網頁腳本載入個別的動畫檔案，將資料儲存在使用者的瀏覽器檔案快取中。 它可提供更有效率的 Web 存取方式，因為您可以視需要下載動畫資料，而不需要使用者等待一組完整的動畫一次下載。 此外，由於字元的資料會儲存在瀏覽器快取中，因此可以自動回收檔案空間。

雖然您也可以下載字元資料 (為單一結構化檔案，或從 web 伺服器) 多個檔案，並安裝在使用者電腦上的其他位置，這類方法需要安全布建以進行下載和安裝。 如此一來，Microsoft Agent API 不包含瀏覽器快取以外的可下載安裝字元。 不過，您仍然可以藉由建立自己的安裝控制項來支援此案例，並依照適當的安全性慣例加以散發。 如需詳細資訊，請參閱 Microsoft 網際網路用戶端軟體發展工具組。

[壓縮] 選項可讓您設定是否壓縮字元資料。 一般而言，您會想要設定此選項來壓縮字元資料，雖然建立具有壓縮資料的字元需要較長的時間。

當您建立一個字元之後，如果您在相同的目錄位置建立字元，後續的組建將會更快。 字元編輯器會自動驗證並複製未變更的檔案，並重新編譯任何已編輯過的資料。

如果編輯器在建立字元時偵測到字元檔中的任何錯誤，則會將資訊寫入至記錄檔，並顯示訊息方塊。 您可以選擇使用文字編輯器來查看或忽略記錄檔，並稍後再閱讀。 不過，請注意，編輯器會在您下一次建立字元檔時覆寫記錄檔。

### <a name="editing-an-existing-character"></a>編輯現有的字元

若要編輯現有的字元，請 **選擇 [檔案] 功能表上** 的 [**開啟**]，並選取字元的定義檔 (。在產生的對話方塊中 ACD) ，然後選擇 [開啟]。 檔案會載入編輯器中。 請注意，您無法 ( 載入編譯的字元檔。Acs。ACF，或。使用編輯器 ACA) 。

因為字元的定義檔 (。ACD) 是文字檔，您也可以使用文字編輯器或文字處理程式來開啟檔案，以編輯字元的定義。 不過，完成變更時，請務必先將檔案儲存成原來的格式，再將它載入至字元編輯器進行編譯。

 

 




