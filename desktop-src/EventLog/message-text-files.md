---
description: 訊息會在訊息文字檔中定義。 訊息編譯器會將數位指派給每個訊息，並產生 C/c + + include 檔案，讓應用程式可以使用符號常數來存取訊息。
ms.assetid: 99fbb3d6-6fde-4162-b0b9-99a1cdf0b8f8
title: 訊息文字檔
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3e87547f44b0b556df4e3a2ffb67736b950321c6
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/07/2021
ms.locfileid: "104192315"
---
# <a name="message-text-files"></a>訊息文字檔

訊息會在訊息文字檔中定義。 訊息編譯器會將數位指派給每個訊息，並產生 C/c + + include 檔案，讓應用程式可以使用符號常數來存取訊息。

訊息文字檔中語句的一般語法如下所示：

*關鍵字* =*值*

等號前後的空格會被忽略，而值會以空白字元分隔 (包括下一個關鍵字/值組) 的分行符號。 針對關鍵字名稱進行比較時，會忽略大小寫。 *值* 部分可以是使用 c/c + + 語法的數值整數常數、在 C/c + + 識別碼規則後面的符號名稱，或是包含8個字元或更少的檔案名，不含句點。

如需範例訊息檔，請參閱 [範例訊息文字檔](sample-message-text-file.md)。

## <a name="comments"></a>註解

訊息文字檔中允許批註行。 分號 (; ) 開始一行結尾的批註。 以 C/c + + 單行批註指標 (//) ，讓訊息編譯器所產生的標頭檔在您的應用程式中進行編譯。

``` syntax
;// This is a single-line comment.
```

針對區塊批註，以分號開始每一行，然後將 C/c + + open block 批註指標 (/) 放在 \* 第一行的分號後面，並在 \* 最後一行的分號之後 (/) 。

``` syntax
;/* This is a block comment.
;   It spans multiple lines.
;*/
```

## <a name="header-section"></a>標頭區段

訊息文字檔包含的標頭會定義名稱和語言識別項，以供檔內文中的訊息定義使用。 標頭包含零或多個下列語句。



| 語句語法                           | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
|--------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| MessageIdTypedef =*類型*                    | 要在訊息定義中使用的類型，如下所示： \# 定義 *名稱* ( (*類型*) 0x *nnnnnnnn*) <br/> 類型必須夠大，才能容納整個訊息程式碼，例如 **DWORD**。 型別也可以是應用程式原始程式碼中定義的型別。 *Type* 的預設值是空的，因此不會使用任何類型轉換。 <br/> 這個語句可以在標頭中指定，也可以視需要在 [訊息定義] 區段中指定。<br/>                                                                                                                  |
| SeverityNames = (*名稱* =  \[ ：*名稱* \])  | 訊息定義中允許的一組名稱。 與每個嚴重性名稱相關聯的數位，會在向左移位30位時，提供邏輯或具有設備和訊息識別碼值的位模式，以形成訊息碼。 任何不符合2位的嚴重性值都是錯誤。 嚴重性代碼也可以指定符號名稱。預設值定義如下： SeverityNames = ( Success = 0x0 資訊 = 0x1 Warning = 0x2 Error = 0x3) <br/>                                                                      |
| FacilityNames = (*名稱* =  \[ ：*名稱* \])  | 訊息定義中的設備值所允許的一組名稱。 與每個設備名稱相關聯的是一個數位，當向左移位16位時，就會提供邏輯或具有嚴重性和訊息識別碼值的位模式，以形成訊息碼。 任何不符合12位的設備值都是錯誤。 這允許4096設備碼;前256碼保留供系統使用。 設備碼也可以指定符號名稱。預設值定義如下： FacilityNames = ( System = 0x0FF Application = 0xFFF) <br/> |
| LanguageNames = (*名稱* = **：*檔案名*)  | 訊息定義中語言值允許的一組名稱。 此數位會用來做為資源資料表中的語言識別項。 指定的檔案包含該語言的訊息。 它通常是訊息編譯器所產生的 bin 檔案。<br/> 範例值為： LanguageNames = (英文 = 0x409： MSG00409) <br/> 如需語言識別項的清單，請參閱 <https://go.microsoft.com/fwlink/p/?linkid=190280> 。<br/>                                                                                                                    |
| OutputBase =*數位*                        | 訊息編譯器寫入標頭檔之訊息常數的輸出基數。 如果有的話，這個值會覆寫-d 參數。 這個數位可以是 10 (decimal) 或 16 (十六進位) 。                                                                                                                                                                                                                                                                                                                                                                                   |



 

## <a name="message-definitions"></a>訊息定義

訊息文字檔包含零或多個在標頭區段之後的訊息定義。 下表描述訊息定義語句。 MessageId 語句會標示訊息定義的開頭。 嚴重性和設備語句是選擇性的。



| 語句語法                  | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|-----------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| MessageId = \[ *數位* \| + \] | 訊息的識別碼。 雖然此值為選擇性，但這是必要的語句。 如果未指定任何值，則使用的值為設備的先前值加一。 如果以加號指定值，則使用的值為設備的上一個值，再加上加號後面的數位。 指定的任何值都必須符合16個位。如需有關如何從嚴重性、設備和訊息識別碼形成訊息值的詳細資訊，請參閱 Winerror.h 中的圖表。 此標頭檔會定義系統的錯誤碼。<br/> |
| 嚴重性 =*名稱*                   | 標頭中 SeverityNames 所指定的其中一個值。 這個語句是選擇性的。 如果未指定任何值，則使用的值為訊息定義的最後指定值。 第一個訊息定義的預設值為 `Severity=Success`<br/>                                                                                                                                                                                                                                                                                               |
| 設備 =*名稱*                   | 標頭中 FacilityNames 所指定的其中一個值。 這個語句是選擇性的。 如果未指定任何值，則使用的值為訊息定義的最後指定值。 第一個訊息定義的預設值為 `Facility=Application`<br/>                                                                                                                                                                                                                                                                                           |
| SymbolicName =*名稱*               | 將 C/c + + 符號常數與訊息程式碼產生關聯。 它會在訊息定義中使用，如下所示： \# 定義 *名稱* ( (*類型*) 0x *nnnnnnnn*) <br/>                                                                                                                                                                                                                                                                                                                                                                                                     |
| OutputBase = {*number*}             | 訊息編譯器寫入至標頭檔的訊息常數輸出基數。 如果有的話，這個值會覆寫-d 參數。 這個數位可以是 10 (decimal) 或 16 (十六進位) 。                                                                                                                                                                                                                                                                                                                                                                 |
| Language =*名稱*                   | 標頭中 LanguageNames 所指定的其中一個值。 這個語句是選擇性的。 如果未指定任何值，則使用的值為訊息定義的最後指定值。 第一個訊息定義的預設值如下： `Language=English`<br/>                                                                                                                                                                                                                                                                                   |
| *郵件內文*                    | 訊息的文字。 它會包含在訊息二進位檔案中。 它也會包含在批註區塊的標頭檔中，直接在訊息定義之前。                                                                                                                                                                                                                                                                                                                                                                                        |
| .                                 | 郵件內文會以新的一行結束，內含一行開頭的單一句點。                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |



 

如果訊息定義包含多個語言的郵件內文，則每種語言都需要它自己的語言語句、郵件內文，以及以句號結束新的一行。 例如：

``` syntax
MessageId=0x1
Severity=Error
Facility=Runtime
SymbolicName=MSG_BAD_COMMAND
Language=English
You have chosen an incorrect command.
.

Language=Japanese
<Japanese message string goes here>
.
```

您可以指定下列 escape 順序來格式化郵件內文，以供事件檢視器或應用程式使用。 % Sign 字元 (% ) 開始所有的 escape 序列。 百分比符號後面的任何其他字元都會顯示，且不含百分比符號。

<dl> <dt>

<span id="_n__format_specifier__"></span><span id="_N__FORMAT_SPECIFIER__"></span>%*n* \[ ！*格式 \_ 規範*！\]
</dt> <dd>

描述插入。 每個插入都是 [**FormatMessage**](/windows/desktop/api/winbase/nf-winbase-formatmessage) 函式之引數陣列中的專案。 *N* 的值可以是介於1到99之間的數位。 格式規範是選擇性的。 如果未指定任何值，預設值為！ s！。 如需格式規範的詳細資訊，請參閱 [**wsprintf**](/windows/win32/api/winuser/nf-winuser-wsprintfa)。

格式規範可用於有效 \* 位數或寬度。 若有指定，則會使用插入編號 *n*+ 1 和 *n*+ 2。

</dd> <dt>

<span id="_0"></span>%0
</dt> <dd>

終止不含尾端換行字元的郵件內文行。 這可以用來建立長行或結束不含尾端分行符號的提示訊息。

</dd> <dt>

<span id="_."></span>%.
</dt> <dd>

產生單一句點。 這可以用來在行首顯示句號，否則會終止郵件內文。

</dd> <dt>

<span id="__"></span>%!
</dt> <dd>

產生單一驚嘆號。 這可以用來在插入後立即指定驚嘆號。

</dd> <dt>

<span id="__"></span>%%
</dt> <dd>

產生單一百分比符號。

</dd> <dt>

<span id="_n"></span><span id="_N"></span>% n
</dt> <dd>

在行尾出現時，會產生硬換行。 這可與 [**FormatMessage**](/windows/desktop/api/winbase/nf-winbase-formatmessage) 搭配使用，以確保訊息符合特定寬度。

</dd> <dt>

<span id="_b"></span><span id="_B"></span>% b
</dt> <dd>

產生空白字元。 這可以用來確保一行上有適當的尾端空格數目。

</dd> <dt>

<span id="_r"></span><span id="_R"></span>% r
</dt> <dd>

產生不含尾端分行符號的硬換行字元。

</dd> </dl>

 

