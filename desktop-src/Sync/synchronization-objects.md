---
description: 同步處理物件是一種物件，可在其中一個等候函式中指定其控制碼，以協調多個執行緒的執行。
ms.assetid: 11558ae9-1056-48bf-96f5-94a051df41c3
title: 同步處理物件
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 299cbd6225b3cc7629378f5fe500fc36ccbe8e86
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/08/2021
ms.locfileid: "104513480"
---
# <a name="synchronization-objects"></a><span data-ttu-id="2af4f-103">同步處理物件</span><span class="sxs-lookup"><span data-stu-id="2af4f-103">Synchronization Objects</span></span>

<span data-ttu-id="2af4f-104">*同步處理物件* 是一種物件，可在其中一個 [等候](wait-functions.md)函式中指定其控制碼，以協調多個執行緒的執行。</span><span class="sxs-lookup"><span data-stu-id="2af4f-104">A *synchronization object* is an object whose handle can be specified in one of the [wait functions](wait-functions.md) to coordinate the execution of multiple threads.</span></span> <span data-ttu-id="2af4f-105">有一個以上的進程可以有相同同步處理物件的控制碼，因此可以進行進程間同步處理。</span><span class="sxs-lookup"><span data-stu-id="2af4f-105">More than one process can have a handle to the same synchronization object, making interprocess synchronization possible.</span></span>

<span data-ttu-id="2af4f-106">以下是專為同步處理提供的物件類型。</span><span class="sxs-lookup"><span data-stu-id="2af4f-106">The following object types are provided exclusively for synchronization.</span></span>



| <span data-ttu-id="2af4f-107">類型</span><span class="sxs-lookup"><span data-stu-id="2af4f-107">Type</span></span>           | <span data-ttu-id="2af4f-108">Description</span><span class="sxs-lookup"><span data-stu-id="2af4f-108">Description</span></span>                                                                                                                                                                                                      |
|----------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="2af4f-109">事件</span><span class="sxs-lookup"><span data-stu-id="2af4f-109">Event</span></span>          | <span data-ttu-id="2af4f-110">告知一個以上的等候中執行緒已發生事件。</span><span class="sxs-lookup"><span data-stu-id="2af4f-110">Notifies one or more waiting threads that an event has occurred.</span></span> <span data-ttu-id="2af4f-111">如需詳細資訊，請參閱 [事件物件](event-objects.md)。</span><span class="sxs-lookup"><span data-stu-id="2af4f-111">For more information, see [Event Objects](event-objects.md).</span></span>                                                                                   |
| <span data-ttu-id="2af4f-112">Mutex</span><span class="sxs-lookup"><span data-stu-id="2af4f-112">Mutex</span></span>          | <span data-ttu-id="2af4f-113">一次只能有一個執行緒擁有，可讓執行緒協調對共用資源的互斥存取。</span><span class="sxs-lookup"><span data-stu-id="2af4f-113">Can be owned by only one thread at a time, enabling threads to coordinate mutually exclusive access to a shared resource.</span></span> <span data-ttu-id="2af4f-114">如需詳細資訊，請參閱 [Mutex 物件](mutex-objects.md)。</span><span class="sxs-lookup"><span data-stu-id="2af4f-114">For more information, see [Mutex Objects](mutex-objects.md).</span></span>                          |
| <span data-ttu-id="2af4f-115">Semaphore</span><span class="sxs-lookup"><span data-stu-id="2af4f-115">Semaphore</span></span>      | <span data-ttu-id="2af4f-116">會維護介於零和某個最大值之間的計數，以限制同時存取共用資源的執行緒數目。</span><span class="sxs-lookup"><span data-stu-id="2af4f-116">Maintains a count between zero and some maximum value, limiting the number of threads that are simultaneously accessing a shared resource.</span></span> <span data-ttu-id="2af4f-117">如需詳細資訊，請參閱 [信號物件](semaphore-objects.md)。</span><span class="sxs-lookup"><span data-stu-id="2af4f-117">For more information, see [Semaphore Objects](semaphore-objects.md).</span></span> |
| <span data-ttu-id="2af4f-118">可等候計時器</span><span class="sxs-lookup"><span data-stu-id="2af4f-118">Waitable timer</span></span> | <span data-ttu-id="2af4f-119">通知一或多個等候中的執行緒已到達指定的時間。</span><span class="sxs-lookup"><span data-stu-id="2af4f-119">Notifies one or more waiting threads that a specified time has arrived.</span></span> <span data-ttu-id="2af4f-120">如需詳細資訊，請參閱 [可等候計時器物件](waitable-timer-objects.md)。</span><span class="sxs-lookup"><span data-stu-id="2af4f-120">For more information, see [Waitable Timer Objects](waitable-timer-objects.md).</span></span>                                                          |



 

<span data-ttu-id="2af4f-121">雖然可供其他用途使用，但下列物件也可以用於同步處理。</span><span class="sxs-lookup"><span data-stu-id="2af4f-121">Though available for other uses, the following objects can also be used for synchronization.</span></span>



| <span data-ttu-id="2af4f-122">Object</span><span class="sxs-lookup"><span data-stu-id="2af4f-122">Object</span></span>                       | <span data-ttu-id="2af4f-123">描述</span><span class="sxs-lookup"><span data-stu-id="2af4f-123">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="2af4f-124">變更通知</span><span class="sxs-lookup"><span data-stu-id="2af4f-124">Change notification</span></span>          | <span data-ttu-id="2af4f-125">在指定的目錄或目錄樹狀結構內發生指定的變更類型時， [**FindFirstChangeNotification**](/windows/win32/api/fileapi/nf-fileapi-findfirstchangenotificationa) 函式所建立的狀態會設定為 [已發出信號]。</span><span class="sxs-lookup"><span data-stu-id="2af4f-125">Created by the [**FindFirstChangeNotification**](/windows/win32/api/fileapi/nf-fileapi-findfirstchangenotificationa) function, its state is set to signaled when a specified type of change occurs within a specified directory or directory tree.</span></span> <span data-ttu-id="2af4f-126">如需詳細資訊，請參閱 [取得目錄變更通知](../fileio/obtaining-directory-change-notifications.md)。</span><span class="sxs-lookup"><span data-stu-id="2af4f-126">For more information, see [Obtaining Directory Change Notifications](../fileio/obtaining-directory-change-notifications.md).</span></span>                                                                                                                                   |
| <span data-ttu-id="2af4f-127">主控台輸入</span><span class="sxs-lookup"><span data-stu-id="2af4f-127">Console input</span></span>                | <span data-ttu-id="2af4f-128">建立主控台時建立。</span><span class="sxs-lookup"><span data-stu-id="2af4f-128">Created when a console is created.</span></span> <span data-ttu-id="2af4f-129">當指定 CONIN $ 或 [**GetStdHandle**](/windows/console/getstdhandle)函式時， [**CreateFile**](/windows/win32/api/fileapi/nf-fileapi-createfilea)函數會傳回主控台輸入的控制碼。</span><span class="sxs-lookup"><span data-stu-id="2af4f-129">The handle to console input is returned by the [**CreateFile**](/windows/win32/api/fileapi/nf-fileapi-createfilea) function when CONIN$ is specified, or by the [**GetStdHandle**](/windows/console/getstdhandle) function.</span></span> <span data-ttu-id="2af4f-130">當主控台的輸入緩衝區中有未讀取的輸入時，它的狀態會設為 [已發出信號]，當輸入緩衝區是空的時，它會設為未收到信號。</span><span class="sxs-lookup"><span data-stu-id="2af4f-130">Its state is set to signaled when there is unread input in the console's input buffer, and set to nonsignaled when the input buffer is empty.</span></span> <span data-ttu-id="2af4f-131">如需有關主控台的詳細資訊，請參閱[字元模式應用程式](/windows/console/character-mode-applications)。</span><span class="sxs-lookup"><span data-stu-id="2af4f-131">For more information about consoles, see [Character-Mode Applications](/windows/console/character-mode-applications)</span></span> |
| <span data-ttu-id="2af4f-132">工作 (Job)</span><span class="sxs-lookup"><span data-stu-id="2af4f-132">Job</span></span>                          | <span data-ttu-id="2af4f-133">藉由呼叫 [**CreateJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-createjobobjectw) 函數來建立。</span><span class="sxs-lookup"><span data-stu-id="2af4f-133">Created by calling the [**CreateJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-createjobobjectw) function.</span></span> <span data-ttu-id="2af4f-134">工作物件的狀態會在其所有處理常式終止時設定為已終止，因為已超過指定的工作時間限制。</span><span class="sxs-lookup"><span data-stu-id="2af4f-134">The state of a job object is set to signaled when all its processes are terminated because the specified end-of-job time limit has been exceeded.</span></span> <span data-ttu-id="2af4f-135">如需工作物件的詳細資訊，請參閱 [工作物件](../procthread/job-objects.md)。</span><span class="sxs-lookup"><span data-stu-id="2af4f-135">For more information about job objects, see [Job Objects](../procthread/job-objects.md).</span></span>                                                                                                                                                             |
| <span data-ttu-id="2af4f-136">記憶體資源通知</span><span class="sxs-lookup"><span data-stu-id="2af4f-136">Memory resource notification</span></span> | <span data-ttu-id="2af4f-137">由 [**CreateMemoryResourceNotification**](/windows/win32/api/memoryapi/nf-memoryapi-creatememoryresourcenotification) 函數所建立。</span><span class="sxs-lookup"><span data-stu-id="2af4f-137">Created by the [**CreateMemoryResourceNotification**](/windows/win32/api/memoryapi/nf-memoryapi-creatememoryresourcenotification) function.</span></span> <span data-ttu-id="2af4f-138">在實體記憶體內發生指定的變更類型時，其狀態會設定為「已發出信號」。</span><span class="sxs-lookup"><span data-stu-id="2af4f-138">Its state is set to signaled when a specified type of change occurs within physical memory.</span></span> <span data-ttu-id="2af4f-139">如需記憶體的詳細資訊，請參閱 [記憶體管理](../memory/memory-management.md)。</span><span class="sxs-lookup"><span data-stu-id="2af4f-139">For more information about memory, see [Memory Management](../memory/memory-management.md).</span></span>                                                                                                                                                                                  |
| <span data-ttu-id="2af4f-140">處理序</span><span class="sxs-lookup"><span data-stu-id="2af4f-140">Process</span></span>                      | <span data-ttu-id="2af4f-141">藉由呼叫 [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa) 函數所建立。</span><span class="sxs-lookup"><span data-stu-id="2af4f-141">Created by calling the [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa) function.</span></span> <span data-ttu-id="2af4f-142">當程式正在執行時，其狀態會設為未收到信號，並在進程終止時設為已發出信號。</span><span class="sxs-lookup"><span data-stu-id="2af4f-142">Its state is set to nonsignaled while the process is running, and set to signaled when the process terminates.</span></span> <span data-ttu-id="2af4f-143">如需處理常式的詳細資訊，請參閱 [進程和執行緒](../procthread/processes-and-threads.md)。</span><span class="sxs-lookup"><span data-stu-id="2af4f-143">For more information about processes, see [Processes and Threads](../procthread/processes-and-threads.md).</span></span>                                                                                                                                                                                  |
| <span data-ttu-id="2af4f-144">Thread</span><span class="sxs-lookup"><span data-stu-id="2af4f-144">Thread</span></span>                       | <span data-ttu-id="2af4f-145">當透過呼叫 [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa)、 [**CreateThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createthread)或 [**CreateRemoteThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createremotethread) 函式來建立新的執行緒時建立。</span><span class="sxs-lookup"><span data-stu-id="2af4f-145">Created when a new thread is created by calling the [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa), [**CreateThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createthread), or [**CreateRemoteThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createremotethread) function.</span></span> <span data-ttu-id="2af4f-146">當執行緒正在執行時，其狀態會設為未收到信號，並線上程終止時設為已發出信號。</span><span class="sxs-lookup"><span data-stu-id="2af4f-146">Its state is set to nonsignaled while the thread is running, and set to signaled when the thread terminates.</span></span> <span data-ttu-id="2af4f-147">如需執行緒的詳細資訊，請參閱 [進程和執行緒](../procthread/processes-and-threads.md)。</span><span class="sxs-lookup"><span data-stu-id="2af4f-147">For more information about threads, see [Processes and Threads](../procthread/processes-and-threads.md).</span></span>                                                            |



 

<span data-ttu-id="2af4f-148">在某些情況下，您也可以使用檔案、具名管道或通訊裝置作為同步處理物件;但是，不建議使用這些用途。</span><span class="sxs-lookup"><span data-stu-id="2af4f-148">In some circumstances, you can also use a file, named pipe, or communications device as a synchronization object; however, their use for this purpose is discouraged.</span></span> <span data-ttu-id="2af4f-149">相反地，請使用非同步 i/o，並等候重 [**迭結構中的事件**](/windows/win32/api/minwinbase/ns-minwinbase-overlapped) 物件集。</span><span class="sxs-lookup"><span data-stu-id="2af4f-149">Instead, use asynchronous I/O and wait on the event object set in the [**OVERLAPPED**](/windows/win32/api/minwinbase/ns-minwinbase-overlapped) structure.</span></span> <span data-ttu-id="2af4f-150">使用事件物件會比較安全，因為在相同的檔案、具名管道或通訊裝置上執行多個同時重迭的作業時可能會發生混淆。</span><span class="sxs-lookup"><span data-stu-id="2af4f-150">It is safer to use the event object because of the confusion that can occur when multiple simultaneous overlapped operations are performed on the same file, named pipe, or communications device.</span></span> <span data-ttu-id="2af4f-151">在此情況下，無法得知哪一個作業導致物件的狀態被告知。</span><span class="sxs-lookup"><span data-stu-id="2af4f-151">In this situation, there is no way to know which operation caused the object's state to be signaled.</span></span>

<span data-ttu-id="2af4f-152">如需有關檔案、具名管道或通訊之 i/o 作業的詳細資訊，請參閱 [同步處理和重迭的輸入和輸出](synchronization-and-overlapped-input-and-output.md)。</span><span class="sxs-lookup"><span data-stu-id="2af4f-152">For additional information about I/O operations on files, named pipes, or communications, see [Synchronization and Overlapped Input and Output](synchronization-and-overlapped-input-and-output.md).</span></span>

 

 
