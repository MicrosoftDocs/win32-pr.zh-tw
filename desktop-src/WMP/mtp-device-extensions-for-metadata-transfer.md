---
title: 適用于中繼資料傳輸的 MTP 裝置擴充功能
description: 適用于中繼資料傳輸的 MTP 裝置擴充功能
ms.assetid: 9cf68373-e84f-4568-a9da-16ddee0fc4e9
keywords:
- Windows Media Player，MTP 裝置擴充功能
- Windows Media Player、裝置擴充功能
- Windows Media Player、延伸模組
- Windows Media Player，中繼資料
- 'Windows Media Player，媒體傳輸通訊協定 (MTP) '
- '媒體傳輸通訊協定 (MTP) '
- 'MTP (媒體傳輸通訊協定) '
- 中繼資料、MTP 裝置延伸模組
- 中繼資料，裝置延伸模組
- 中繼資料，延伸模組
- 裝置延伸模組，中繼資料傳輸
- 延伸模組，中繼資料傳輸
- 適用于中繼資料傳輸的 MTP 裝置擴充功能
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c56f633d7cd4ca44a90d311c1e4c1c2e6d213e1d2ad1a43b802e4795a59a7d47
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/11/2021
ms.locfileid: "119572438"
---
# <a name="mtp-device-extensions-for-metadata-transfer"></a>適用于中繼資料傳輸的 MTP 裝置擴充功能

媒體傳輸通訊協定 (MTP) 是為便攜媒體裝置設計的通訊協定。 此通訊協定的主要目的是提供通用通訊協定，以便在電腦和便攜媒體裝置之間交換資料。 這包括接收和傳送媒體物件，以及列舉裝置的內容和功能。

MTP 使用持續性的唯一物件識別碼 (PUOIDs) 來唯一識別 (的數位媒體專案，以及) 儲存在裝置上的其他物件。 當您交換有關裝置上已發生之變更的資訊時，裝置和 Windows Media Player 會使用 PUOIDs 來識別已變更的物件。

名為 wmpdevices 的標頭檔（安裝為 Windows Media Player SDK 的一部分）會定義支援 Windows Media Player 裝置延伸模組所需的結構和常數。

若要將裝置辨識為支援透過 Windows Media Player MTP 裝置延伸模組進行的中繼資料傳輸，必須將下列資訊包含在 DeviceInfo 資料集中。  (如需此資料集的詳細資訊，請參閱 MTP 規格的4.6.1 一節。 ) 



| 資料集欄位          | 欄位順序 | 資料類型  | 值                       |
|------------------------|-------------|------------|-----------------------------|
| VendorExtensionID      | 2           | **UINT32** | 0x00000006                  |
| VendorExtensionVersion | 3           | **UINT16** | 0x0064 (100)                 |
| VendorExtensionDesc    | 4           | **String** | "microsoft.com/WMPPD： 10.0" |



 

下表提供有關加速中繼資料傳輸之 MTP 作業的詳細資料。



| 項目                  | 描述                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|-----------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 操作程式碼        | 0x9201                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| Operation 參數1 | 裝置在上一個會話期間提供的交易識別碼。 第一個會話的這個值是零。                                                                                                                                                                                                                                                                                                                                                                                       |
| Operation 參數2 | 正在開始索引。 會話的第一次呼叫時，這個值一律為零。 在相同同步處理會話中的後續呼叫上，此值會增加先前回應資料中已修改的計數和已刪除專案的總和。                                                                                                                                                                                                                                             |
| Operation 參數3 | 0x10000. 這個常數定義于 wmpdevices 中，這是可在回應中傳回的最大 PUOIDs 數。 請注意，這個常數的值可能會在此標頭檔的未來版本中修訂。                                                                                                                                                                                                                                                                                     |
| Operation 參數4 | 0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| Operation 參數5 | 0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 資料                  | 裝置會傳回兩個連續的 MTP 陣列，其中包含 PUOIDs。 每個 MTP 陣列的開頭都是 **DWORD** 值，指出陣列中專案的計數，後面接著專案的陣列。 第一個 MTP 陣列包含已新增或變更的 PUOIDs 清單。 第二個 MTP 陣列包含已從可攜式裝置刪除的 PUOIDs 清單。請注意，兩個數組中的 PUOID 計數總和不得超過作業參數3中傳遞的值。<br/> |
| 資料方向        | R->I                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 回應碼選項 | **MTP \_回應 \_ 正常** (0x2001) 或有效的錯誤回應碼。                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| 回應參數1  | 裝置目前的交易識別碼。                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 回應參數2  | 未來要求所剩餘的 PUOIDs 數目。                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 回應參數3  | 包含狀態資訊的 **DWORD** 。 狀態會以位方式表示。 如需所要使用之旗標的詳細資訊，請參閱備註。                                                                                                                                                                                                                                                                                                                                                                     |
| 回應參數4  | 0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 回應參數5  | 0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |



 

## <a name="remarks"></a>備註

狀態是透過使用下列旗標，以位方式透過回應參數3來表示。



| 旗標                                             | 值 | 描述                                                                                                                                                                                                                          |
|--------------------------------------------------|-------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **WMP \_ MDRT \_ 旗標未 \_ 報告的 \_ 已刪除 \_ 專案** | 0x1   | 專案已在報告第一個物件路徑名稱之前刪除。 這通常表示裝置已重新格式化。                                                                                                           |
| **WMP \_ MDRT \_ 旗 \_ 標 \_ 已新增的 \_ 專案**   | 0x2   | 裝置包含一些無法在 PUOIDS 清單中傳回的新增專案。 請注意，此旗標不是重複的回應參數2。 只有當裝置無法傳回的要求專案時，才設定此旗標。 |



 

Bits 2 到31保留供日後使用。 這些位應設定為零。

Windows Media Player 在傳送媒體檔案之前，于同步處理會話開始時，將 MTP 命令傳送到裝置。 裝置應該儘快傳回其回應，以避免同步處理作業的延遲。

Windows Media Player 會針對回應中所傳回之每個修改 POUID 的[中繼資料](about-the-metadata.md)，要求所列屬性的值。 Windows Media Player 可能會在後續命令中，將這些屬性的更新值傳送至裝置。

如果使用者的設定需要，則可以將回報為已從裝置移除的檔案再次複製到裝置。

## <a name="related-topics"></a>相關主題

<dl> <dt>

[**加速中繼資料傳輸的裝置擴充功能**](device-extensions-for-accelerated-metadata-transfer.md)
</dt> </dl>

 

 





