---
title: 關於資料指標
description: 本主題討論標準資料指標。
ms.assetid: 0ca8e51c-1159-47e9-ba3f-5ced0667cadb
keywords:
- 資源，資料指標
- 資料指標，關於
- 資料指標，標準
- 標準資料指標
- SetSystemCursor 函式
- 資料指標，自訂
- 自訂資料指標
- 資料指標，作用點
- 資料指標，建立
- 建立資料指標
- 資料指標，位置
- 資料指標，外觀
- 終結資料指標
- 複製資料指標
- 類別資料指標
- 將資料指標
- 資料指標，終結
- 資料指標，複製
- 資料指標、類別
- 資料指標，將
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6f2d0b91ba4670d2510413240efd742b2e0ba69b
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/19/2020
ms.locfileid: "104023431"
---
# <a name="about-cursors"></a><span data-ttu-id="a2eac-123">關於資料指標</span><span class="sxs-lookup"><span data-stu-id="a2eac-123">About Cursors</span></span>

<span data-ttu-id="a2eac-124">Windows 提供一組標準資料指標，可供任何應用程式在任何時間使用。</span><span class="sxs-lookup"><span data-stu-id="a2eac-124">Windows provides a set of standard cursors that are available for any application to use at any time.</span></span> <span data-ttu-id="a2eac-125">SDK 標頭檔包含標準資料指標的識別碼，識別碼開頭為 **IDC \_** 前置詞。</span><span class="sxs-lookup"><span data-stu-id="a2eac-125">The SDK header files contain identifiers for the standard cursors—the identifiers begin with the **IDC\_** prefix.</span></span>

<span data-ttu-id="a2eac-126">每一個標準游標都有與其關聯之相對應的預設影像。</span><span class="sxs-lookup"><span data-stu-id="a2eac-126">Each standard cursor has a corresponding default image associated with it.</span></span> <span data-ttu-id="a2eac-127">使用者或應用程式可以隨時取代與任何標準資料指標相關聯的預設影像。</span><span class="sxs-lookup"><span data-stu-id="a2eac-127">The user or an application can replace the default image associated with any standard cursor at any time.</span></span> <span data-ttu-id="a2eac-128">應用程式會使用 [**SetSystemCursor**](/windows/desktop/api/Winuser/nf-winuser-setsystemcursor) 函數來取代預設影像。</span><span class="sxs-lookup"><span data-stu-id="a2eac-128">An application replaces a default image by using the [**SetSystemCursor**](/windows/desktop/api/Winuser/nf-winuser-setsystemcursor) function.</span></span> <span data-ttu-id="a2eac-129">下圖顯示 Windows Vista 的數個標準資料指標：</span><span class="sxs-lookup"><span data-stu-id="a2eac-129">The following image shows several standard cursors from Windows Vista:</span></span>

![標準資料指標，包括手、四箭號加號、有問號的箭號、圓形、畫筆](images/cursorsstandard.png)

<span data-ttu-id="a2eac-131">應用程式可以使用 [**GetIconInfo**](/windows/desktop/api/Winuser/nf-winuser-geticoninfo) 函式來取出資料指標目前的影像，而且可以使用 [**DrawIconEx**](/windows/desktop/api/Winuser/nf-winuser-drawiconex) 函數來繪製資料指標。</span><span class="sxs-lookup"><span data-stu-id="a2eac-131">An application can use the [**GetIconInfo**](/windows/desktop/api/Winuser/nf-winuser-geticoninfo) function to retrieve the current image for a cursor and can draw the cursor by using the [**DrawIconEx**](/windows/desktop/api/Winuser/nf-winuser-drawiconex) function.</span></span> <span data-ttu-id="a2eac-132">若要繪製標準資料指標的預設影像，請在 **DrawIconEx** 的呼叫中指定 **DI \_ 相容** 性旗標。</span><span class="sxs-lookup"><span data-stu-id="a2eac-132">To draw the default image for a standard cursor, specify the **DI\_COMPAT** flag in the call to **DrawIconEx**.</span></span> <span data-ttu-id="a2eac-133">如果您未指定 **DI \_ 相容** 性旗標， **DrawIconEx** 會使用使用者指定的影像繪製標準資料指標。</span><span class="sxs-lookup"><span data-stu-id="a2eac-133">If you do not specify the **DI\_COMPAT** flag, **DrawIconEx** draws the standard cursor using the image that the user specified.</span></span>

<span data-ttu-id="a2eac-134">自訂資料指標是設計用來在特定應用程式中使用，而且可以是開發人員所定義的設計。</span><span class="sxs-lookup"><span data-stu-id="a2eac-134">Custom cursors are designed for use in a specific application and can be any design the developer defines.</span></span> <span data-ttu-id="a2eac-135">下圖顯示數個自訂資料指標。</span><span class="sxs-lookup"><span data-stu-id="a2eac-135">The following illustration shows several custom cursors.</span></span>

![自訂資料指標，包括手形、banana、鼓、wristwatch、metronome](images/cursorscustom.png)

<span data-ttu-id="a2eac-137">資料指標可以是單色或色彩，也可以是靜態或動畫。</span><span class="sxs-lookup"><span data-stu-id="a2eac-137">Cursors can be either monochrome or color, and either static or animated.</span></span> <span data-ttu-id="a2eac-138">特定電腦系統上所使用的資料指標類型取決於系統的顯示。</span><span class="sxs-lookup"><span data-stu-id="a2eac-138">The type of cursor used on a particular computer system depends on the system's display.</span></span> <span data-ttu-id="a2eac-139">舊的顯示器（例如 VGA）不支援色彩或動畫游標。</span><span class="sxs-lookup"><span data-stu-id="a2eac-139">Old displays such as VGA do not support color or animated cursors.</span></span> <span data-ttu-id="a2eac-140">新顯示器，其顯示驅動程式會使用與裝置無關的點陣圖 (DIB) 引擎支援它們。</span><span class="sxs-lookup"><span data-stu-id="a2eac-140">New displays, whose display drivers use the device-independent bitmap (DIB) engine, do support them.</span></span>

<span data-ttu-id="a2eac-141">資料指標和圖示很類似，而且在許多情況下都可以交替使用。</span><span class="sxs-lookup"><span data-stu-id="a2eac-141">Cursors and icons are similar and can be used interchangeably in many situations.</span></span> <span data-ttu-id="a2eac-142">兩者之間唯一的差異在於，指定為數據指標的影像必須採用顯示器可支援的格式。</span><span class="sxs-lookup"><span data-stu-id="a2eac-142">The only difference between them is that an image specified as a cursor must be in the format that the display can support.</span></span> <span data-ttu-id="a2eac-143">例如，資料指標必須是單色才能顯示 VGA。</span><span class="sxs-lookup"><span data-stu-id="a2eac-143">For example, a cursor must be monochrome for a VGA display.</span></span>

<span data-ttu-id="a2eac-144">本總覽提供下列主題的相關資訊：</span><span class="sxs-lookup"><span data-stu-id="a2eac-144">This overview provides information on the following topics:</span></span>

-   [<span data-ttu-id="a2eac-145">作用點</span><span class="sxs-lookup"><span data-stu-id="a2eac-145">The Hot Spot</span></span>](#the-hot-spot)
-   [<span data-ttu-id="a2eac-146">滑鼠和游標</span><span class="sxs-lookup"><span data-stu-id="a2eac-146">The Mouse and the Cursor</span></span>](#the-mouse-and-the-cursor)
-   [<span data-ttu-id="a2eac-147">資料指標建立</span><span class="sxs-lookup"><span data-stu-id="a2eac-147">Cursor Creation</span></span>](#cursor-creation)
-   [<span data-ttu-id="a2eac-148">游標位置和外觀</span><span class="sxs-lookup"><span data-stu-id="a2eac-148">Cursor Location and Appearance</span></span>](#cursor-location-and-appearance)
-   [<span data-ttu-id="a2eac-149">資料指標 Confinement</span><span class="sxs-lookup"><span data-stu-id="a2eac-149">Cursor Confinement</span></span>](#cursor-confinement)
-   [<span data-ttu-id="a2eac-150">資料指標損毀</span><span class="sxs-lookup"><span data-stu-id="a2eac-150">Cursor Destruction</span></span>](#cursor-destruction)
-   [<span data-ttu-id="a2eac-151">資料指標重複</span><span class="sxs-lookup"><span data-stu-id="a2eac-151">Cursor Duplication</span></span>](#cursor-duplication)
-   [<span data-ttu-id="a2eac-152">視窗類別游標</span><span class="sxs-lookup"><span data-stu-id="a2eac-152">The Window Class Cursor</span></span>](#the-window-class-cursor)

## <a name="the-hot-spot"></a><span data-ttu-id="a2eac-153">作用點</span><span class="sxs-lookup"><span data-stu-id="a2eac-153">The Hot Spot</span></span>

<span data-ttu-id="a2eac-154">在資料指標中，稱為「 *作用點* 」的圖元會標示受滑鼠事件影響的確切畫面位置，例如按一下滑鼠按鍵。</span><span class="sxs-lookup"><span data-stu-id="a2eac-154">In the cursor, a pixel called the *hot spot* marks the exact screen location that is affected by a mouse event, such as clicking a mouse button.</span></span> <span data-ttu-id="a2eac-155">通常，作用點是資料指標的焦點。</span><span class="sxs-lookup"><span data-stu-id="a2eac-155">Typically, the hot spot is the focal point of the cursor.</span></span> <span data-ttu-id="a2eac-156">系統會追蹤此點，並將其辨識為數據指標的位置。</span><span class="sxs-lookup"><span data-stu-id="a2eac-156">The system tracks and recognizes this point as the position of the cursor.</span></span> <span data-ttu-id="a2eac-157">例如，一般的作用點是箭號形狀游標的尖端圖元，以及十字形狀游標中間的圖元。</span><span class="sxs-lookup"><span data-stu-id="a2eac-157">For example, typical hot spots are the pixel at the tip of an arrow-shaped cursor and the pixel in the middle of a crosshair-shaped cursor.</span></span> <span data-ttu-id="a2eac-158">下列影像顯示來自繪圖程式的兩個數據指標，其中的作用點與筆刷的秘訣相關聯，而繪製的十字線則可以。</span><span class="sxs-lookup"><span data-stu-id="a2eac-158">The following images shows two cursors from a drawing program, in which hot spots are associated with the tip of the brush and the crosshair of the paint can.</span></span>

![兩個數據指標上的作用點](images/cursorhotspot.png)

<span data-ttu-id="a2eac-160">當滑鼠輸入事件發生時，滑鼠驅動程式會將事件轉譯為適當的滑鼠訊息，其中包含作用點的座標。</span><span class="sxs-lookup"><span data-stu-id="a2eac-160">When a mouse input event occurs, the mouse driver translates the event into an appropriate mouse message that includes the coordinates of the hot spot.</span></span> <span data-ttu-id="a2eac-161">系統會將滑鼠訊息傳送至視窗，其中包含作用點或正在捕捉滑鼠輸入的視窗。</span><span class="sxs-lookup"><span data-stu-id="a2eac-161">The system sends the mouse message to the window that contains the hot spot or to the window that is capturing mouse input.</span></span> <span data-ttu-id="a2eac-162">如需詳細資訊，請參閱 [滑鼠輸入](/windows/desktop/inputdev/mouse-input)。</span><span class="sxs-lookup"><span data-stu-id="a2eac-162">For more information, see [Mouse Input](/windows/desktop/inputdev/mouse-input).</span></span>

## <a name="the-mouse-and-the-cursor"></a><span data-ttu-id="a2eac-163">滑鼠和游標</span><span class="sxs-lookup"><span data-stu-id="a2eac-163">The Mouse and the Cursor</span></span>

<span data-ttu-id="a2eac-164">系統會將游標移至畫面上，以反映滑鼠的移動。</span><span class="sxs-lookup"><span data-stu-id="a2eac-164">The system reflects the movement of the mouse by moving the cursor on the screen accordingly.</span></span> <span data-ttu-id="a2eac-165">當游標移至不同的視窗部分或不同的視窗時，系統 (或應用程式) 變更游標的外觀。</span><span class="sxs-lookup"><span data-stu-id="a2eac-165">As the cursor moves over different parts of windows or into different windows, the system (or an application) changes the appearance of the cursor.</span></span> <span data-ttu-id="a2eac-166">例如，當資料指標跨越超連結時，系統會將游標從箭號變更為手。</span><span class="sxs-lookup"><span data-stu-id="a2eac-166">For example, when the cursor crosses over a hyperlink, the system changes the cursor from an arrow to a hand.</span></span>

![超連結時，標準資料指標變更為手形](images/cursorchangingstate.png)

<span data-ttu-id="a2eac-168">如果系統沒有滑鼠，系統只會在使用者選擇特定的系統命令（例如用來調整視窗大小或移動視窗）時，才會顯示並移動游標。</span><span class="sxs-lookup"><span data-stu-id="a2eac-168">If the system does not have a mouse, the system displays and moves the cursor only when the user chooses certain system commands, such as those used to size or move a window.</span></span> <span data-ttu-id="a2eac-169">若要為使用者提供當無法使用滑鼠時顯示和移動游標的方法，應用程式可以使用資料指標函式來模擬滑鼠移動。</span><span class="sxs-lookup"><span data-stu-id="a2eac-169">To provide the user with a method of displaying and moving the cursor when a mouse is not available, an application can use the cursor functions to simulate mouse movement.</span></span> <span data-ttu-id="a2eac-170">由於這項模擬功能，使用者可以使用方向鍵來移動游標。</span><span class="sxs-lookup"><span data-stu-id="a2eac-170">Given this simulation capability, the user can use the arrow keys to move the cursor.</span></span>

## <a name="cursor-creation"></a><span data-ttu-id="a2eac-171">資料指標建立</span><span class="sxs-lookup"><span data-stu-id="a2eac-171">Cursor Creation</span></span>

<span data-ttu-id="a2eac-172">因為標準資料指標是預先定義的，所以不需要建立它們。</span><span class="sxs-lookup"><span data-stu-id="a2eac-172">Because standard cursors are predefined, it is not necessary to create them.</span></span> <span data-ttu-id="a2eac-173">若要使用標準資料指標，應用程式會使用 [**LoadCursor**](/windows/desktop/api/Winuser/nf-winuser-loadcursora) 或 [**LoadImage**](/windows/desktop/api/Winuser/nf-winuser-loadimagea) 函數來抓取資料指標控制碼。</span><span class="sxs-lookup"><span data-stu-id="a2eac-173">To use a standard cursor, an application retrieves a cursor handle by using the [**LoadCursor**](/windows/desktop/api/Winuser/nf-winuser-loadcursora) or [**LoadImage**](/windows/desktop/api/Winuser/nf-winuser-loadimagea) function.</span></span> <span data-ttu-id="a2eac-174">資料 *指標控制碼* 是識別標準或自訂資料指標之 **HCURSOR** 類型的唯一值。</span><span class="sxs-lookup"><span data-stu-id="a2eac-174">A *cursor handle* is a unique value of the **HCURSOR** type that identifies a standard or custom cursor.</span></span>

<span data-ttu-id="a2eac-175">若要建立應用程式的自訂資料指標，您通常會使用圖形應用程式，並在應用程式的資源定義檔中包含資料指標做為資源。</span><span class="sxs-lookup"><span data-stu-id="a2eac-175">To create a custom cursor for an application, you typically use a graphics application and include the cursor as a resource in the application's resource-definition file.</span></span> <span data-ttu-id="a2eac-176">在執行時間，呼叫 [**LoadCursor**](/windows/desktop/api/Winuser/nf-winuser-loadcursora) 以取得資料指標控制碼。</span><span class="sxs-lookup"><span data-stu-id="a2eac-176">At run time, call [**LoadCursor**](/windows/desktop/api/Winuser/nf-winuser-loadcursora) to retrieve the cursor handle.</span></span> <span data-ttu-id="a2eac-177">資料指標資源包含數種不同顯示裝置的資料。</span><span class="sxs-lookup"><span data-stu-id="a2eac-177">Cursor resources contain data for several different display devices.</span></span> <span data-ttu-id="a2eac-178">**LoadCursor** 函式會自動選取最適合目前顯示裝置的資料。</span><span class="sxs-lookup"><span data-stu-id="a2eac-178">The **LoadCursor** function automatically selects the most appropriate data for the current display device.</span></span> <span data-ttu-id="a2eac-179">從直接載入資料指標。的或。ANI 檔案，請使用 [**LoadCursorFromFile**](/windows/desktop/api/Winuser/nf-winuser-loadcursorfromfilea) 函數。</span><span class="sxs-lookup"><span data-stu-id="a2eac-179">To load a cursor directly from a .CUR or .ANI file, use the [**LoadCursorFromFile**](/windows/desktop/api/Winuser/nf-winuser-loadcursorfromfilea) function.</span></span>

<span data-ttu-id="a2eac-180">您也可以在執行時間使用 [**CreateIconIndirect**](/windows/desktop/api/Winuser/nf-winuser-createiconindirect) 函式建立自訂資料指標，該函數會根據 [**ICONINFO**](/windows/desktop/api/Winuser/ns-winuser-iconinfo) 結構的內容建立資料指標。</span><span class="sxs-lookup"><span data-stu-id="a2eac-180">You can also create a custom cursor at run time by using the [**CreateIconIndirect**](/windows/desktop/api/Winuser/nf-winuser-createiconindirect) function, which creates a cursor based on the content of an [**ICONINFO**](/windows/desktop/api/Winuser/ns-winuser-iconinfo) structure.</span></span> <span data-ttu-id="a2eac-181">[**GetIconInfo**](/windows/desktop/api/Winuser/nf-winuser-geticoninfo)函式會以作用點座標和相關遮罩和色彩的相關資訊來填滿此結構。</span><span class="sxs-lookup"><span data-stu-id="a2eac-181">The [**GetIconInfo**](/windows/desktop/api/Winuser/nf-winuser-geticoninfo) function fills this structure with hot spot coordinates and information concerning the associated mask and color.</span></span>

<span data-ttu-id="a2eac-182">應用程式應該將自訂資料指標實作為資源，並使用 [**LoadCursor**](/windows/desktop/api/Winuser/nf-winuser-loadcursora)、 [**LoadCursorFromFile**](/windows/desktop/api/Winuser/nf-winuser-loadcursorfromfilea)或 [**LoadImage**](/windows/desktop/api/Winuser/nf-winuser-loadimagea) ，而不是在執行時間建立資料指標。</span><span class="sxs-lookup"><span data-stu-id="a2eac-182">Applications should implement custom cursors as resources and use [**LoadCursor**](/windows/desktop/api/Winuser/nf-winuser-loadcursora), [**LoadCursorFromFile**](/windows/desktop/api/Winuser/nf-winuser-loadcursorfromfilea), or [**LoadImage**](/windows/desktop/api/Winuser/nf-winuser-loadimagea) rather than create the cursor at run time.</span></span> <span data-ttu-id="a2eac-183">使用資料指標資源可避免裝置的相依性、簡化當地語系化，以及讓應用程式共用資料指標設計。</span><span class="sxs-lookup"><span data-stu-id="a2eac-183">Using cursor resources avoids device dependence, simplifies localization, and enables applications to share cursor designs.</span></span>

<span data-ttu-id="a2eac-184">[**CreateIconFromResourceEx**](/windows/desktop/api/Winuser/nf-winuser-createiconfromresourceex)函式可讓應用程式根據資源資料建立圖示和資料指標。</span><span class="sxs-lookup"><span data-stu-id="a2eac-184">The [**CreateIconFromResourceEx**](/windows/desktop/api/Winuser/nf-winuser-createiconfromresourceex) function enables an application to create icons and cursors based on resource data.</span></span> <span data-ttu-id="a2eac-185">**CreateIconFromResourceEx** 會根據二進位資源資料，從其他可執行檔的 ( .exe) 檔案或 dll 來建立資料指標。</span><span class="sxs-lookup"><span data-stu-id="a2eac-185">**CreateIconFromResourceEx** creates a cursor based on binary resource data from other executable (.exe) files or DLLs.</span></span> <span data-ttu-id="a2eac-186">它之前必須先呼叫 [**LookupIconIdFromDirectoryEx**](/windows/desktop/api/Winuser/nf-winuser-lookupiconidfromdirectoryex) 函式，以及數個資源函數。</span><span class="sxs-lookup"><span data-stu-id="a2eac-186">It must be preceded by calls to the [**LookupIconIdFromDirectoryEx**](/windows/desktop/api/Winuser/nf-winuser-lookupiconidfromdirectoryex) function, as well as several resource functions.</span></span> <span data-ttu-id="a2eac-187">**LookupIconIdFromDirectoryEx** 會識別目前顯示裝置最適當的資料指標資料。</span><span class="sxs-lookup"><span data-stu-id="a2eac-187">**LookupIconIdFromDirectoryEx** identifies the most appropriate cursor data for the current display device.</span></span> <span data-ttu-id="a2eac-188">如需資源函式的詳細資訊，請參閱 [資源](resources.md)。</span><span class="sxs-lookup"><span data-stu-id="a2eac-188">For more information about resource functions, see [Resources](resources.md).</span></span>

## <a name="cursor-location-and-appearance"></a><span data-ttu-id="a2eac-189">游標位置和外觀</span><span class="sxs-lookup"><span data-stu-id="a2eac-189">Cursor Location and Appearance</span></span>

<span data-ttu-id="a2eac-190">系統會自動顯示滑鼠游標，並更新其在畫面上的位置。</span><span class="sxs-lookup"><span data-stu-id="a2eac-190">The system automatically displays a cursor for the mouse and updates its position on the screen.</span></span> <span data-ttu-id="a2eac-191">您可以使用 [**GetCursorPos**](/windows/desktop/api/Winuser/nf-winuser-getcursorpos) 和 [**SetCursorPos**](/windows/desktop/api/Winuser/nf-winuser-setcursorpos) 函式，取得游標目前的螢幕座標，並將游標移至畫面上的任何位置。</span><span class="sxs-lookup"><span data-stu-id="a2eac-191">You can obtain current screen coordinates of the cursor and move the cursor to any location on the screen by using the [**GetCursorPos**](/windows/desktop/api/Winuser/nf-winuser-getcursorpos) and [**SetCursorPos**](/windows/desktop/api/Winuser/nf-winuser-setcursorpos) functions, respectively.</span></span>

<span data-ttu-id="a2eac-192">您也可以使用 [**GetCursor**](/windows/desktop/api/Winuser/nf-winuser-getcursor) 函數來抓取目前資料指標的控制碼，而且可以使用 [**SetCursor**](/windows/desktop/api/Winuser/nf-winuser-setcursor) 函數來設定資料指標。</span><span class="sxs-lookup"><span data-stu-id="a2eac-192">You can also retrieve the handle to the current cursor by using the [**GetCursor**](/windows/desktop/api/Winuser/nf-winuser-getcursor) function, and you can set the cursor by using the [**SetCursor**](/windows/desktop/api/Winuser/nf-winuser-setcursor) function.</span></span> <span data-ttu-id="a2eac-193">呼叫 **SetCursor** 之後，游標的外觀不會變更，直到滑鼠移動、將游標明確設定為不同的資料指標，或執行系統命令。</span><span class="sxs-lookup"><span data-stu-id="a2eac-193">After you call **SetCursor**, the appearance of the cursor does not change until either the mouse moves, the cursor is explicitly set to a different cursor, or a system command is executed.</span></span>

<span data-ttu-id="a2eac-194">當使用者移動滑鼠時，系統會在新位置重新繪製游標。</span><span class="sxs-lookup"><span data-stu-id="a2eac-194">When the user moves the mouse, the system redraws the cursor at the new location.</span></span> <span data-ttu-id="a2eac-195">系統會自動重新繪製與游標所指向之視窗相關聯的資料指標設計。</span><span class="sxs-lookup"><span data-stu-id="a2eac-195">The system automatically redraws the cursor design associated with the window to which the cursor is pointing.</span></span>

<span data-ttu-id="a2eac-196">您可以使用 [**ShowCursor**](/windows/desktop/api/Winuser/nf-winuser-showcursor) 函數，隱藏和重新顯示資料指標，而不需要變更資料指標設計。</span><span class="sxs-lookup"><span data-stu-id="a2eac-196">You can hide and redisplay the cursor, without changing the cursor design, by using the [**ShowCursor**](/windows/desktop/api/Winuser/nf-winuser-showcursor) function.</span></span> <span data-ttu-id="a2eac-197">此函數會使用內部計數器來決定何時要隱藏或顯示資料指標。</span><span class="sxs-lookup"><span data-stu-id="a2eac-197">This function uses an internal counter to determine when to hide or display the cursor.</span></span> <span data-ttu-id="a2eac-198">嘗試顯示資料指標會遞增計數器。嘗試隱藏資料指標會遞減計數器。</span><span class="sxs-lookup"><span data-stu-id="a2eac-198">An attempt to show the cursor increments the counter; an attempt to hide the cursor decrements the counter.</span></span> <span data-ttu-id="a2eac-199">只有當這個計數器大於或等於零時，才會顯示資料指標。</span><span class="sxs-lookup"><span data-stu-id="a2eac-199">The cursor is visible only if this counter is greater than or equal to zero.</span></span>

<span data-ttu-id="a2eac-200">[**GetCursorInfo**](/windows/desktop/api/Winuser/nf-winuser-getcursorinfo)函式會取得全域資料指標的下列資訊：資料指標是否隱藏或顯示、資料指標的控制碼，以及資料指標的座標。</span><span class="sxs-lookup"><span data-stu-id="a2eac-200">The [**GetCursorInfo**](/windows/desktop/api/Winuser/nf-winuser-getcursorinfo) function gets the following information for the global cursor: whether the cursor is hidden or shown, the handle to the cursor, and the coordinates of the cursor.</span></span>

## <a name="cursor-confinement"></a><span data-ttu-id="a2eac-201">資料指標 Confinement</span><span class="sxs-lookup"><span data-stu-id="a2eac-201">Cursor Confinement</span></span>

<span data-ttu-id="a2eac-202">您可以使用 [**ClipCursor**](/windows/desktop/api/Winuser/nf-winuser-clipcursor) 函式，將游標限制在螢幕上的矩形區域。</span><span class="sxs-lookup"><span data-stu-id="a2eac-202">You can confine the cursor to a rectangular area on the screen by using the [**ClipCursor**](/windows/desktop/api/Winuser/nf-winuser-clipcursor) function.</span></span> <span data-ttu-id="a2eac-203">當使用者必須在矩形的限制區域內回應某個事件時，這非常有用。</span><span class="sxs-lookup"><span data-stu-id="a2eac-203">This is useful for when the user must respond to a certain event within the confined area of the rectangle.</span></span> <span data-ttu-id="a2eac-204">例如，您可以使用 **ClipCursor** 將資料指標限制為強制回應對話方塊，以防止使用者在對話方塊關閉之前與其他視窗互動。</span><span class="sxs-lookup"><span data-stu-id="a2eac-204">For example, you might use **ClipCursor** to confine the cursor to a modal dialog box, preventing the user from interacting with other windows until the dialog box is closed.</span></span>

<span data-ttu-id="a2eac-205">[**GetClipCursor**](/windows/desktop/api/Winuser/nf-winuser-getclipcursor)函式會抓取暫時限制游標的矩形區域螢幕座標。</span><span class="sxs-lookup"><span data-stu-id="a2eac-205">The [**GetClipCursor**](/windows/desktop/api/Winuser/nf-winuser-getclipcursor) function retrieves the screen coordinates of the rectangular area to which the cursor is temporarily confined.</span></span> <span data-ttu-id="a2eac-206">當需要限制資料指標時，您也可以使用這個函數來儲存可以移動資料指標的原始區域座標。</span><span class="sxs-lookup"><span data-stu-id="a2eac-206">When it is necessary to confine the cursor, you can also use this function to save the coordinates of the original area in which the cursor can move.</span></span> <span data-ttu-id="a2eac-207">然後，您可以在不再需要新的 confinement 時，將游標還原到原始區域。</span><span class="sxs-lookup"><span data-stu-id="a2eac-207">Then, you can restore the cursor to the original area when the new confinement is no longer necessary.</span></span>

## <a name="cursor-destruction"></a><span data-ttu-id="a2eac-208">資料指標損毀</span><span class="sxs-lookup"><span data-stu-id="a2eac-208">Cursor Destruction</span></span>

<span data-ttu-id="a2eac-209">您可以終結資料指標控制碼，並釋放呼叫 [**DestroyCursor**](/windows/desktop/api/Winuser/nf-winuser-destroycursor) 函數所使用的資料指標。</span><span class="sxs-lookup"><span data-stu-id="a2eac-209">You can destroy the cursor handle and free the memory the cursor used by calling the [**DestroyCursor**](/windows/desktop/api/Winuser/nf-winuser-destroycursor) function.</span></span> <span data-ttu-id="a2eac-210">不過，此函數對共用資料指標沒有任何作用。</span><span class="sxs-lookup"><span data-stu-id="a2eac-210">However, this function has no effect on a shared cursor.</span></span> <span data-ttu-id="a2eac-211">只要已載入它的模組保留在記憶體中，共用資料指標就會有效。</span><span class="sxs-lookup"><span data-stu-id="a2eac-211">A shared cursor is valid as long as the module from which it was loaded remains in memory.</span></span> <span data-ttu-id="a2eac-212">下列函數會取得共用資料指標：</span><span class="sxs-lookup"><span data-stu-id="a2eac-212">The following functions obtain a shared cursor:</span></span>

-   [<span data-ttu-id="a2eac-213">**LoadCursor**</span><span class="sxs-lookup"><span data-stu-id="a2eac-213">**LoadCursor**</span></span>](/windows/desktop/api/Winuser/nf-winuser-loadcursora)
-   [<span data-ttu-id="a2eac-214">**LoadCursorFromFile**</span><span class="sxs-lookup"><span data-stu-id="a2eac-214">**LoadCursorFromFile**</span></span>](/windows/desktop/api/Winuser/nf-winuser-loadcursorfromfilea)
-   <span data-ttu-id="a2eac-215">如果您使用 **LR \_ 共用** 旗標， [**LoadImage**](/windows/desktop/api/Winuser/nf-winuser-loadimagea) () </span><span class="sxs-lookup"><span data-stu-id="a2eac-215">[**LoadImage**](/windows/desktop/api/Winuser/nf-winuser-loadimagea) (if you use the **LR\_SHARED** flag)</span></span>
-   <span data-ttu-id="a2eac-216">[**CopyImage**](/windows/desktop/api/Winuser/nf-winuser-copyimage) (如果您使用 **LR \_ COPYRETURNORG** 旗標，且 *hImage* 是共用的資料指標) </span><span class="sxs-lookup"><span data-stu-id="a2eac-216">[**CopyImage**](/windows/desktop/api/Winuser/nf-winuser-copyimage) (if you use the **LR\_COPYRETURNORG** flag and the *hImage* is a shared cursor)</span></span>

<span data-ttu-id="a2eac-217">當您不再需要使用 [**CreateIconIndirect**](/windows/desktop/api/Winuser/nf-winuser-createiconindirect) 函數所建立的資料指標時，您應該終結資料指標。</span><span class="sxs-lookup"><span data-stu-id="a2eac-217">When you no longer need a cursor you created by using the [**CreateIconIndirect**](/windows/desktop/api/Winuser/nf-winuser-createiconindirect) function, you should destroy the cursor.</span></span> <span data-ttu-id="a2eac-218">[**DestroyIcon**](/windows/desktop/api/Winuser/nf-winuser-destroyicon)函式會終結資料指標控制碼，並釋放資料指標所使用的任何記憶體。</span><span class="sxs-lookup"><span data-stu-id="a2eac-218">The [**DestroyIcon**](/windows/desktop/api/Winuser/nf-winuser-destroyicon) function destroys the cursor handle and frees any memory the cursor used.</span></span> <span data-ttu-id="a2eac-219">此函數僅適用于使用 **CreateIconIndirect** 所建立的資料指標。</span><span class="sxs-lookup"><span data-stu-id="a2eac-219">Use this function only on cursors that were created with **CreateIconIndirect**.</span></span>

## <a name="cursor-duplication"></a><span data-ttu-id="a2eac-220">資料指標重複</span><span class="sxs-lookup"><span data-stu-id="a2eac-220">Cursor Duplication</span></span>

<span data-ttu-id="a2eac-221">[**CopyCursor**](/windows/desktop/api/Winuser/nf-winuser-copycursor)函式會複製資料指標控制碼。</span><span class="sxs-lookup"><span data-stu-id="a2eac-221">The [**CopyCursor**](/windows/desktop/api/Winuser/nf-winuser-copycursor) function copies a cursor handle.</span></span> <span data-ttu-id="a2eac-222">這可讓應用程式或 DLL 程式碼抓取另一個模組所擁有之資料指標的控制碼。</span><span class="sxs-lookup"><span data-stu-id="a2eac-222">This enables application or DLL code to retrieve the handle to a cursor owned by another module.</span></span> <span data-ttu-id="a2eac-223">然後，如果釋放其他模組，則複製資料指標的模組仍然可以使用資料指標設計。</span><span class="sxs-lookup"><span data-stu-id="a2eac-223">Then, if the other module is freed, the module that copied the cursor can still use the cursor design.</span></span>

<span data-ttu-id="a2eac-224">如需有關如何在可執行檔中加入、移除或取代資料指標資源的詳細資訊，請參閱 [資源](resources.md)。</span><span class="sxs-lookup"><span data-stu-id="a2eac-224">For information on how to add, remove, or replace cursor resources in executable files, see [Resources](resources.md).</span></span>

## <a name="the-window-class-cursor"></a><span data-ttu-id="a2eac-225">視窗類別游標</span><span class="sxs-lookup"><span data-stu-id="a2eac-225">The Window Class Cursor</span></span>

<span data-ttu-id="a2eac-226">當您使用 [**RegisterClass**](/windows/desktop/api/winuser/nf-winuser-registerclassa) 函式註冊視窗類別時，您可以為它指派預設的資料指標，稱為 *類別資料指標*。</span><span class="sxs-lookup"><span data-stu-id="a2eac-226">When you register a window class, using the [**RegisterClass**](/windows/desktop/api/winuser/nf-winuser-registerclassa) function, you can assign it a default cursor, known as the *class cursor*.</span></span> <span data-ttu-id="a2eac-227">在應用程式註冊視窗類別之後，該類別的每個視窗都會有指定的類別游標。</span><span class="sxs-lookup"><span data-stu-id="a2eac-227">After the application registers the window class, each window of that class has the specified class cursor.</span></span>

<span data-ttu-id="a2eac-228">若要覆寫類別資料指標，請處理 [**WM \_ SETCURSOR**](wm-setcursor.md) 訊息。</span><span class="sxs-lookup"><span data-stu-id="a2eac-228">To override the class cursor, process the [**WM\_SETCURSOR**](wm-setcursor.md) message.</span></span> <span data-ttu-id="a2eac-229">您也可以使用 [**SetClassLong**](/windows/desktop/api/winuser/nf-winuser-setclasslonga) 函數來取代類別資料指標。</span><span class="sxs-lookup"><span data-stu-id="a2eac-229">You can also replace a class cursor by using the [**SetClassLong**](/windows/desktop/api/winuser/nf-winuser-setclasslonga) function.</span></span> <span data-ttu-id="a2eac-230">此函式會變更指定類別之所有視窗的預設視窗設定。</span><span class="sxs-lookup"><span data-stu-id="a2eac-230">This function changes the default window settings for all windows of a specified class.</span></span> <span data-ttu-id="a2eac-231">如需詳細資訊，請參閱 [類別游標](/windows/desktop/winmsg/about-window-classes)。</span><span class="sxs-lookup"><span data-stu-id="a2eac-231">For more information, see [Class Cursor](/windows/desktop/winmsg/about-window-classes).</span></span>

 

 