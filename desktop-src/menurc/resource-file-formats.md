---
title: 資源檔案格式
description: 本節說明資源編譯器根據資源定義檔的內容所建立的二進位資源檔案格式。
ms.assetid: a0b17555-f50a-4d58-b2bc-760843dd67eb
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b90c789cd1684c1f5ca31af0e2d60a31052ca03f
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/19/2020
ms.locfileid: "103842271"
---
# <a name="resource-file-formats"></a><span data-ttu-id="2a7d6-103">資源檔案格式</span><span class="sxs-lookup"><span data-stu-id="2a7d6-103">Resource File Formats</span></span>

<span data-ttu-id="2a7d6-104">本節說明資源編譯器根據資源定義檔的內容所建立的二進位資源檔案格式。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-104">This section describes the format of the binary resource file that the resource compiler creates based on the contents of the resource-definition file.</span></span> <span data-ttu-id="2a7d6-105">這個檔案的副檔名通常是 .res。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-105">This file usually has an .res extension.</span></span> <span data-ttu-id="2a7d6-106">連結器會將 .res 檔重新格式化為資源物件檔案，然後將它連結至應用程式的可執行檔。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-106">The linker reformats the .res file into a resource object file and then links it to the executable file of an application.</span></span>

<span data-ttu-id="2a7d6-107">二進位資源檔是由一些串連的資源專案所組成。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-107">A binary resource file consists of a number of concatenated resource entries.</span></span> <span data-ttu-id="2a7d6-108">每個專案都包含資源標頭和該資源的資料。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-108">Each entry consists of a resource header and the data for that resource.</span></span> <span data-ttu-id="2a7d6-109">資源標頭在檔案中是以 **DWORD** 對齊，並包含下列各項：</span><span class="sxs-lookup"><span data-stu-id="2a7d6-109">A resource header is **DWORD**-aligned in the file and consists of the following:</span></span>

-   <span data-ttu-id="2a7d6-110">包含資源標頭大小的 **DWORD**</span><span class="sxs-lookup"><span data-stu-id="2a7d6-110">A **DWORD** that contains the size of the resource header</span></span>
-   <span data-ttu-id="2a7d6-111">包含資源資料大小的 **DWORD**</span><span class="sxs-lookup"><span data-stu-id="2a7d6-111">A **DWORD** that contains the size of the resource data</span></span>
-   <span data-ttu-id="2a7d6-112">資源類型</span><span class="sxs-lookup"><span data-stu-id="2a7d6-112">The resource type</span></span>
-   <span data-ttu-id="2a7d6-113">資源名稱</span><span class="sxs-lookup"><span data-stu-id="2a7d6-113">The resource name</span></span>
-   <span data-ttu-id="2a7d6-114">其他資源資訊</span><span class="sxs-lookup"><span data-stu-id="2a7d6-114">Additional resource information</span></span>

<span data-ttu-id="2a7d6-115">[**RESOURCEHEADER**](resourceheader.md)結構描述此標頭的格式。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-115">The [**RESOURCEHEADER**](resourceheader.md) structure describes the format of this header.</span></span> <span data-ttu-id="2a7d6-116">資源的資料會遵循資源標頭，而且是每個資源類型的特定資料。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-116">The data for the resource follows the resource header and is specific to each type of resource.</span></span> <span data-ttu-id="2a7d6-117">某些資源也會採用資源專屬的群組標頭結構，以提供一組資源的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-117">Some resources also employ a resource-specific group header structure to provide information about a group of resources.</span></span>

## <a name="accelerator-table-resources"></a><span data-ttu-id="2a7d6-118">快速鍵對應表資源</span><span class="sxs-lookup"><span data-stu-id="2a7d6-118">Accelerator Table Resources</span></span>

<span data-ttu-id="2a7d6-119">快速鍵對應表是資源檔中的一個資源專案。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-119">An accelerator table is one resource entry in a resource file.</span></span> <span data-ttu-id="2a7d6-120">它沒有群組標頭。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-120">It does not have a group header.</span></span> <span data-ttu-id="2a7d6-121">[**ACCELTABLEENTRY**](acceltableentry.md)結構描述快速鍵對應表中的每個專案。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-121">An [**ACCELTABLEENTRY**](acceltableentry.md) structure describes each entry in the accelerator table.</span></span> <span data-ttu-id="2a7d6-122">允許多個快速鍵對應表。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-122">Multiple accelerator tables are permitted.</span></span>

## <a name="cursor-and-icon-resources"></a><span data-ttu-id="2a7d6-123">游標和圖示資源</span><span class="sxs-lookup"><span data-stu-id="2a7d6-123">Cursor and Icon Resources</span></span>

<span data-ttu-id="2a7d6-124">系統會以單一檔案的形式處理每個圖示和資料指標。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-124">The system handles each icon and cursor as a single file.</span></span> <span data-ttu-id="2a7d6-125">不過，這些會儲存在 .res 檔和可執行檔中，做為圖示資源的群組或一組資料指標資源。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-125">However, these are stored in .res files and in executable files as a group of icon resources or a group of cursor resources.</span></span> <span data-ttu-id="2a7d6-126">圖示和游標資源的檔案格式很類似。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-126">The file formats of icon and cursor resources are similar.</span></span> <span data-ttu-id="2a7d6-127">在 .res 檔中，資源群組標頭會遵循所有個別的圖示或資料指標群組元件。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-127">In the .res file a resource group header follows all of the individual icon or cursor group components.</span></span>

<span data-ttu-id="2a7d6-128">每個圖示元件的格式與 .ico 檔案的格式十分類似。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-128">The format of each icon component closely resembles the format of the .ico file.</span></span> <span data-ttu-id="2a7d6-129">每個圖示影像都會儲存在 [**BITMAPINFO**](/windows/win32/api/wingdi/ns-wingdi-bitmapinfo) 結構中，後面接著色彩與裝置無關的點陣圖 (DIB) 位的圖示 **XOR** 遮罩。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-129">Each icon image is stored in a [**BITMAPINFO**](/windows/win32/api/wingdi/ns-wingdi-bitmapinfo) structure followed by the color device-independent bitmap (DIB) bits of the icon's **XOR** mask.</span></span> <span data-ttu-id="2a7d6-130">圖示 **和** 遮罩的單色 dib 位遵循色彩 dib 位。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-130">The monochrome DIB bits of the icon's **AND** mask follow the color DIB bits.</span></span>

<span data-ttu-id="2a7d6-131">每個資料指標元件的格式類似于當前檔案的格式。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-131">The format of each cursor component resembles the format of the .cur file.</span></span> <span data-ttu-id="2a7d6-132">每個資料指標映射都會儲存在 [**BITMAPINFO**](/windows/win32/api/wingdi/ns-wingdi-bitmapinfo) 結構中，後面接著游標的 **XOR** 遮罩的單色 dib 位，然後再加上游標 **和** 遮罩的單色 dib 位。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-132">Each cursor image is stored in a [**BITMAPINFO**](/windows/win32/api/wingdi/ns-wingdi-bitmapinfo) structure followed by the monochrome DIB bits of the cursor's **XOR** mask, and then by the monochrome DIB bits of the cursor's **AND** mask.</span></span> <span data-ttu-id="2a7d6-133">請注意，這兩個資源的點陣圖有差異：與圖示不同的是，游標 XOR 的遮罩不會有色彩 DIB 位。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-133">Note that there is a difference in the bitmaps of the two resources: Unlike icons, cursor XOR masks do not have color DIB bits.</span></span> <span data-ttu-id="2a7d6-134">雖然資料指標遮罩的點陣圖為單色，而且沒有 DIB 標頭或色彩表，但位在對齊和方向方面仍是 DIB 格式。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-134">Although the bitmaps of the cursor masks are monochrome and do not have DIB headers or color tables, the bits are still in DIB format with respect to alignment and direction.</span></span> <span data-ttu-id="2a7d6-135">資料指標和圖示之間有另一個顯著的差異，那就是資料指標沒有熱點和圖示。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-135">Another significant difference between cursors and icons is that cursors have a hotspot and icons do not.</span></span>

<span data-ttu-id="2a7d6-136">圖示和游標資源的群組標頭包含 [**NEWHEADER**](newheader.md) 結構，以及一或多個 [**RESDIR**](resdir.md) 結構。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-136">The group header for both icon and cursor resources consists of a [**NEWHEADER**](newheader.md) structure plus one or more [**RESDIR**](resdir.md) structures.</span></span> <span data-ttu-id="2a7d6-137">每個圖示或游標都有一個 **RESDIR** 結構。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-137">There is one **RESDIR** structure for each icon or cursor.</span></span> <span data-ttu-id="2a7d6-138">群組標頭包含應用程式選取正確的圖示或游標來顯示所需的資訊。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-138">The group header contains the information an application needs to select the correct icon or cursor to display.</span></span> <span data-ttu-id="2a7d6-139">群組標頭和針對群組中的每個圖示或資料指標重複的資料都有固定長度。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-139">Both the group header and the data that repeats for each icon or cursor in the group have a fixed length.</span></span> <span data-ttu-id="2a7d6-140">這可讓應用程式隨機存取資訊。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-140">This allows the application to randomly access the information.</span></span>

## <a name="dialog-box-resources"></a><span data-ttu-id="2a7d6-141">對話方塊資源</span><span class="sxs-lookup"><span data-stu-id="2a7d6-141">Dialog Box Resources</span></span>

<span data-ttu-id="2a7d6-142">對話方塊也是資源檔中的一個資源專案。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-142">A dialog box is also one resource entry in the resource file.</span></span> <span data-ttu-id="2a7d6-143">它包含一個 [**DLGTEMPLATE**](/windows/desktop/api/winuser/ns-winuser-dlgtemplate) 對話方塊標頭結構，以及對話方塊中每個控制項的一個 [**DLGITEMTEMPLATE**](/windows/desktop/api/winuser/ns-winuser-dlgitemtemplate) 結構。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-143">It consists of one [**DLGTEMPLATE**](/windows/desktop/api/winuser/ns-winuser-dlgtemplate) dialog box header structure plus one [**DLGITEMTEMPLATE**](/windows/desktop/api/winuser/ns-winuser-dlgitemtemplate) structure for each control in the dialog box.</span></span> <span data-ttu-id="2a7d6-144">[**DLGTEMPLATEEX**](/windows/desktop/dlgbox/dlgtemplateex)和 [**DLGITEMTEMPLATEEX**](/windows/desktop/dlgbox/dlgitemtemplateex)結構描述延伸對話方塊資源的格式。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-144">The [**DLGTEMPLATEEX**](/windows/desktop/dlgbox/dlgtemplateex) and the [**DLGITEMTEMPLATEEX**](/windows/desktop/dlgbox/dlgitemtemplateex) structures describe the format of extended dialog box resources.</span></span>

## <a name="font-resources"></a><span data-ttu-id="2a7d6-145">字型資源</span><span class="sxs-lookup"><span data-stu-id="2a7d6-145">Font Resources</span></span>

<span data-ttu-id="2a7d6-146">字型會以資源群組的形式儲存在資源檔中。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-146">Fonts are stored in the resource file as a group of resources.</span></span> <span data-ttu-id="2a7d6-147">個別字型組成字型群組。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-147">Individual fonts make up a font group.</span></span> <span data-ttu-id="2a7d6-148">中的 [字型語句](./font-statement.md) 資源定義語句。RC 檔會定義每個字型。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-148">A [FONT Statement](./font-statement.md) resource definition statement in the .RC file defines each font.</span></span> <span data-ttu-id="2a7d6-149">資源中的每個個別字型都是由相關 fnt 檔案的完整內容所組成。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-149">Each individual font in the resource consists of the complete contents of the related .fnt file.</span></span> <span data-ttu-id="2a7d6-150">[**FONTGROUPHDR**](fontgrouphdr.md)結構會遵循 .res 檔案中的所有個別字型元件。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-150">A [**FONTGROUPHDR**](fontgrouphdr.md) structure follows all the individual font components in the .res file.</span></span>

<span data-ttu-id="2a7d6-151">字型資源不會新增至特定應用程式的資源。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-151">Font resources are not added to the resources of a specific application.</span></span> <span data-ttu-id="2a7d6-152">相反地，它們通常會新增至副檔名為 fon 的可執行檔。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-152">Instead, they are normally added to executable files that have a .fon extension.</span></span> <span data-ttu-id="2a7d6-153">這些檔案通常是僅限資源的 Dll，而不是應用程式。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-153">These files are usually resource-only DLLs rather than applications.</span></span>

## <a name="menu-resources"></a><span data-ttu-id="2a7d6-154">功能表資源</span><span class="sxs-lookup"><span data-stu-id="2a7d6-154">Menu Resources</span></span>

<span data-ttu-id="2a7d6-155">*功能表資源* 是由 [**MENUHEADER**](menuheader.md)結構，後面接著一或多個 [**NORMALMENUITEM**](normalmenuitem.md)或 [**POPUPMENUITEM**](popupmenuitem.md)結構所組成，每個功能表項目的功能表範本都有一個。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-155">A *menu resource* consists of a [**MENUHEADER**](menuheader.md) structure followed by one or more [**NORMALMENUITEM**](normalmenuitem.md) or [**POPUPMENUITEM**](popupmenuitem.md) structures, one for each menu item in the menu template.</span></span> <span data-ttu-id="2a7d6-156">[**MENUEX \_ 範本 \_ 標頭**](menuex-template-header.md)和 [**MENUEX \_ 範本 \_ 專案**](menuex-template-item.md)結構描述擴充功能表資源的格式。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-156">The [**MENUEX\_TEMPLATE\_HEADER**](menuex-template-header.md) and the [**MENUEX\_TEMPLATE\_ITEM**](menuex-template-item.md) structures describe the format of extended menu resources.</span></span>

## <a name="message-table-resources"></a><span data-ttu-id="2a7d6-157">訊息資料表資源</span><span class="sxs-lookup"><span data-stu-id="2a7d6-157">Message Table Resources</span></span>

<span data-ttu-id="2a7d6-158">*訊息資料表* 是包含格式化文字的資源，可顯示為錯誤訊息或訊息方塊。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-158">A *message table* is a resource that contains formatted text for display as an error message or in a message box.</span></span> <span data-ttu-id="2a7d6-159">訊息資料表資源中的主要結構是 [**訊息 \_ 資源 \_ 資料**](/windows/desktop/api/Winnt/ns-winnt-message_resource_data) 結構。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-159">The main structure in a message table resource is the [**MESSAGE\_RESOURCE\_DATA**](/windows/desktop/api/Winnt/ns-winnt-message_resource_data) structure.</span></span>

## <a name="version-resources"></a><span data-ttu-id="2a7d6-160">版本資源</span><span class="sxs-lookup"><span data-stu-id="2a7d6-160">Version Resources</span></span>

<span data-ttu-id="2a7d6-161">版本資源中的主要結構是 [**VS \_ FIXEDFILEINFO**](/windows/win32/api/verrsrc/ns-verrsrc-vs_fixedfileinfo) 結構。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-161">The main structure in a version resource is the [**VS\_FIXEDFILEINFO**](/windows/win32/api/verrsrc/ns-verrsrc-vs_fixedfileinfo) structure.</span></span> <span data-ttu-id="2a7d6-162">其他結構包含儲存語言資訊資料的 [**VarFileInfo**](varfileinfo.md) 結構，以及使用者定義字串資訊的 [**StringFileInfo**](stringfileinfo.md) 。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-162">Additional structures include the [**VarFileInfo**](varfileinfo.md) structure to store language information data, and [**StringFileInfo**](stringfileinfo.md) for user-defined string information.</span></span> <span data-ttu-id="2a7d6-163">版本資源中的所有字串都採用 Unicode 格式。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-163">All strings in a version resource are in Unicode format.</span></span> <span data-ttu-id="2a7d6-164">每個資訊區塊都在 **DWORD** 界限上對齊。</span><span class="sxs-lookup"><span data-stu-id="2a7d6-164">Each block of information is aligned on a **DWORD** boundary.</span></span>

 

 