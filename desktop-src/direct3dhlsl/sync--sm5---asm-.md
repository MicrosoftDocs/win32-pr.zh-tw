---
title: '同步 (sm5-asm) '
description: 執行緒群組同步或記憶體屏障。
ms.assetid: DCA637FE-8F5C-41D0-8B5E-F913463BA387
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: c5c64532669fc94d7d2109c39e501af0825e56434f66b79e20e1641c787a1a58
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/11/2021
ms.locfileid: "119852858"
---
# <a name="sync-sm5---asm"></a>同步 (sm5-asm) 

執行緒群組同步或記憶體屏障。



| 同步處理 \[ \_ uglobal \|\_ugroup \] \[ \_ g \] \[ \_ t\] |
|-------------------------------------------|



 

## <a name="remarks"></a>備註

**Sync** 有選項 \_ uglobal、 \_ ugroup、 \_ g 和 \_ t。

在圖元著色器中，只允許 **同步處理 \_ uglobal** 。

在計算著色器中， \_ 必須指定 (uglobal 或 \_ ugroup \*) 和/或 \_ g。 \_此外，t 是選擇性的。

### <a name="_uglobal"></a>\_uglobal

Global u \# (UAV) 記憶體隔離。

此執行緒 \# 在程式順序中的所有先前 u 記憶體讀取/寫入，在此執行緒的任何後續 u 記憶體存取之前，都會顯示在整個 GPU 上的所有線程 \# 。 在一種情況下，定義的整個 GPU 部分會以小於全域範圍取代，如下所述。

這適用于目前的著色器階段所系結的所有 UAV 記憶體。

\_uglobal 可在計算著色器或圖元著色器中取得。

若為任何系結器未以全域一致方式宣告的系結 UAV， \_ uglobal u \# 記憶體範圍只會顯示該 UAV 目前的計算著色器執行緒群組，就像是 \_ ugroup 而非 \_ uglobal 一樣。 此問題僅適用于計算著色器，因為圖元著色器必須將所有 UAVs 宣告為全域一致。

### <a name="_ugroup"></a>\_ugroup

執行緒群組範圍 u \# (UAV) 記憶體隔離。

在此執行緒的 \# 任何後續 u 記憶體存取之前，執行緒群組中的所有線程都可以看見執行緒群組中的所有先前 u 記憶體讀取或寫入 \# 。

這適用于目前的著色器階段所系結的所有 UAV 記憶體。

\_ugroup 僅適用于計算著色器。

如果 \_ ugroup 已公開，則適用于某些實作為。 指定 \_ ugroup 而非 uglobal 的優點 \_ 是， **同步** 處理作業可以更快速完成。

其他的執行方式並不區分 \_ ugroup 與 \_ uglobal，因此這兩個作業都相等，而且行為類似 \_ uglobal。 應用程式可以要求最少的 **同步** 處理範圍來指定其意圖。

即使特定 UAV 宣告為全域一致， \_ 如果不需要全域關卡，ugroup **同步** 作業在該 UAV 上的運作方式會更有效率。

### <a name="_g"></a>\_G

g \# (執行緒群組共用記憶體) 範圍。

在這個執行緒的 \# 任何後續 g 記憶體存取之前，執行緒群組中的所有線程都可以看見執行緒群組中的所有先前 g 記憶體讀取或寫入 \# 。

這會套用至目前線程群組的 g \# 共用記憶體。

\_g 僅適用于計算著色器。

### <a name="_t"></a>\_t

執行緒群組同步處理。單一線程群組內的所有線程 (可以共用共用暫存器空間集之存取權的執行緒) 將會執行到任何執行緒可以繼續的位置，直到到達此指令為止。

\_t 不能放在動態流程式控制制中， (可能會線上程群組) 內改變的分支，但是可以存在於統一的流量控制中，而群組中的所有線程都挑選相同的路徑。

\_t 僅適用于計算著色器。

以下是計算著色器 ' sync ' 變異的清單。

-   同步 \_ g
-   同步 \_ ugroup\*
-   同步 \_ uglobal
-   同步 \_ g \_ t
-   同步 \_ ugroup \_ t\*
-   同步 \_ uglobal \_ t
-   同步 \_ ugroup \_ g\*
-   同步 \_ uglobal \_ g
-   同步 \_ ugroup \_ g \_ t\*
-   同步 \_ uglobal \_ g \_ t

\*\_HLSL 編譯器可能不會根據 \_ 上述 ugroup 一節中的先前討論，將具有 ugroup 的變體設為目標。

圖元著色器同步變異清單僅包含 sync \_ uglobal。

記憶體不足會防止受影響的指令在整個範圍內由編譯器或硬體重新排序。

從相同位址讀取的多個資料，不會被記憶體阻礙或寫入位址的多個資料，也可以一起折迭。 這同樣適用於寫入。 以關卡分隔的存取權無法在關卡之間合併或移動。

由不同執行緒正常運作的指定位址不可部分完成的作業，不需要記憶體不足的情況。 當 atomics 和（或）載入/存放區作業從其他執行緒的觀點來看，在個別的執行緒中出現時，就需要使用此功能。

在圖元著色器中， [捨棄](discard--sm4---asm-.md) 指示表示同步 \_ uglobal 範圍，在此指示中，無法在 **捨棄** 期間重新排序。 在協助程式 \_ 圖元 (同步處理 uglobal，此功能僅執行來支援衍生) 或捨棄的圖元可能不會有任何影響。 系統不允許協助程式或捨棄的圖元寫入至 UAVs （如果捨棄的話），寫入會在捨棄之後發出。 從 UAVs 傳回的值不能參與衍生計算。 因此，不論是否接受同步處理 \_ u，helper 圖元或捨棄之後發出的想法。

cs \_ 4 \_ 0 和 cs \_ 4 \_ 1 支援此指令。

此指示適用于下列著色器階段：



| 頂點 | 船體 | 網域 | 幾何形狀 | 像素 | 計算 |
|--------|------|--------|----------|-------|---------|
|        |      |        |          | X     | X       |



 

由於 UAVs 可在 Direct3D 11.1 的所有著色器階段使用，因此此指令的 **同步 \_ uglobal** 變體適用于 direct3d 11.1 執行時間的所有著色器階段（從 Windows 8 開始提供）。



| 頂點 | 船體 | 網域 | 幾何形狀 | 像素 | 計算 |
|--------|------|--------|----------|-------|---------|
| X      | X    | X      | X        | X     | X       |



 

## <a name="minimum-shader-model"></a>最小著色器模型

下列著色器模型支援此指令：



| 著色器模型                                              | 支援 |
|-----------------------------------------------------------|-----------|
| [著色器模型5](d3d11-graphics-reference-sm5.md)        | 是       |
| [著色器模型4。1](dx-graphics-hlsl-sm4.md)              | 否        |
| [著色器模型4](dx-graphics-hlsl-sm4.md)                | 否        |
| [著色器模型 3 (DirectX HLSL) ](dx-graphics-hlsl-sm3.md) | 否        |
| [著色器模型 2 (DirectX HLSL) ](dx-graphics-hlsl-sm2.md) | 否        |
| [著色器模型 1 (DirectX HLSL) ](dx-graphics-hlsl-sm1.md) | 否        |



 

## <a name="related-topics"></a>相關主題

<dl> <dt>

[著色器模型5元件 (DirectX HLSL) ](shader-model-5-assembly--directx-hlsl-.md)
</dt> </dl>

 

 




