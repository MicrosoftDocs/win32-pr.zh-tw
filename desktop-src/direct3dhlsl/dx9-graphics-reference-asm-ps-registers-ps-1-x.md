---
title: ps_1_1__ps_1_2__ps_1_3__ps_1_4 註冊
description: 圖元著色器相依于註冊以取得頂點資料、輸出圖元資料、在計算期間保存暫存結果，以及識別材質取樣階段。
ms.assetid: ca25a030-b4da-4893-b9f3-e3bb12f18d83
keywords:
- 註冊-ps_1_1 至 ps_1_4
ms.topic: article
ms.date: 05/31/2018
topic_type:
- kbArticle
api_name: ''
api_type: ''
api_location: ''
ms.openlocfilehash: 4525b6d3be2e9287f53edc1da0cd2fb188184a69
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/20/2020
ms.locfileid: "104463297"
---
# <a name="ps_1_1__ps_1_2__ps_1_3__ps_1_4-registers"></a>ps \_ 1 \_ 1 \_ \_ ps \_ 1 \_ 2 \_ \_ ps \_ 1 \_ 3 \_ \_ ps \_ 1 \_ 4 註冊

圖元著色器相依于註冊以取得頂點資料、輸出圖元資料、在計算期間保存暫存結果，以及識別材質取樣階段。 有數種類型的暫存器，各有獨特的功能。 本章節包含圖元著色器第1版所執行之輸入和輸出暫存器的參考資訊 \_ 。

註冊包含圖元著色器所使用的資料。 下列各節會完整說明暫存器。

-   註冊類型描述可用的四種類型的暫存器和其用途。
-   讀取埠限制會詳細說明在單一指令中使用多個暫存器的限制。
-   唯讀讀寫說明哪些暫存器可以用於讀取、寫入或兩者。
-   範圍詳述元件資料的範圍。

## <a name="register-types"></a>註冊類型



|      |                    | 版本 |      |      |              |
|------|--------------------|----------|------|------|--------------|
| 名稱 | 類型               | 1\_1     | 1\_2 | 1 \_ 3 | 1\_4         |
| c\#  | 常數暫存器  | 8        | 8    | 8    | 8            |
| R\#  | 暫時註冊 | 2        | 2    | 2    | 6            |
| 10gbase-t\#  | 材質暫存器   | 4        | 4    | 4    | 6            |
| V\#  | 色彩註冊     | 2        | 2    | 2    | 第2階段中的2個 |



 

-   常數暫存器包含常數資料。 您可以使用 [**SetPixelShaderConstantF**](/windows/desktop/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setpixelshaderconstantf) 將資料載入常數暫存器，也可以使用 [def](def---ps.md)來定義資料。 材質位址指令無法使用常數暫存器。 唯一的例外是 [texm3x3spec ps](texm3x3spec---ps.md) 指令，它會使用常數暫存器來提供眼睛光線向量。
-   臨時暫存器用來儲存中繼結果。 r0 還可作為圖元著色器輸出。 著色器結尾的 r0 值是著色器的圖元色彩。

    在嘗試從先前的指令未寫入的暫存登錄中讀取的任何著色器上，著色器驗證將會失敗 [**CreatePixelShader**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9-createpixelshader) 。 同樣地， [**D3DXAssembleShader**](/windows/desktop/direct3d9/d3dxassembleshader)會失敗，但前提是已啟用驗證 (不使用 D3DXSHADER \_ SKIPVALIDATION) 。

-   材質暫存器

    若是圖元著色器第1版到第1版，則材質暫存器 \_ \_ 包含紋理資料或材質座標。 當取樣材質時，會將材質資料載入材質暫存器。 紋理取樣使用材質座標來查閱（或取樣）位於指定之 (u、v、w、q) 座標的色彩值，同時將材質階段狀態屬性納入考慮。 材質座標資料是從頂點材質座標資料中插入，並且與特定的材質階段相關聯。 紋理階段編號和材質座標宣告順序之間會有一個預設的一對一關聯。 依預設，頂點格式中定義的第一組材質座標會與材質階段0相關聯。

    針對這些圖元著色器版本，材質暫存器的行為就像是算術指令所使用的暫存暫存器。

    若為圖元著色器第1版 \_ ，材質暫存器 (t \#) 包含唯讀材質座標資料。 這表示紋理座標集和材質階段號彼此獨立。 用來取樣材質) 的材質階段編號 (由目的地暫存器編號決定 (r0 至 r5) 。 針對 texld 指令，紋理座標集是由來源暫存器 (t0 到 t5) 所決定，因此紋理座標集可以對應到任何材質階段。 此外，來源暫存器 (指定 texld 的材質座標) 也可以是 (r) 的臨時暫存器 \# ，在這種情況下，暫存登錄的內容會當做材質座標使用。

-   色彩暫存器包含每個圖元的色彩值。 這些值是由頂點資料中的漫射和反射色彩值的每個圖元反復專案所取得。 若是圖元著色器第1版的 \_ 著色器，色彩暫存器只會在第二個階段使用。

    如果 [陰影] 模式設定為 [D3DSHADE 一般] \_ ，則會停用兩個頂點色彩的反復專案 (擴散和反光) 。 無論陰影模式為何，如果已啟用圖元霧化，則管線仍會逐一查看霧化。 請記住，相較于無效，會在管線之後套用霧化。

    使用頂點擴散色彩資料載入 v0 註冊通常是很常見的情況。 使用頂點反射色彩資料載入 v1 暫存器也是很常見的情況。

    輸入色彩資料值的壓制 (飽和) 至範圍0到1，因為這是圖元著色器中色彩暫存器的有效輸入範圍。

    圖元著色器具有色彩暫存器的唯讀存取權。 這些暫存器的內容會反復執行值，但反覆運算的精確度可能會比材質座標更低。

## <a name="read-port-limit"></a>讀取埠限制

讀取埠限制會指定每個註冊類型的不同暫存器數目，這些暫存器類型可當做單一指令中的來源登錄使用。



|      |                    | 版本 |      |      |              |
|------|--------------------|----------|------|------|--------------|
| 名稱 | 類型               | 1\_1     | 1\_2 | 1 \_ 3 | 1\_4         |
| c\#  | 常數暫存器  | 2        | 2    | 2    | 2            |
| R\#  | 暫時註冊 | 2        | 2    | 2    | 3            |
| 10gbase-t\#  | 材質暫存器   | 2        | 3    | 3    | 1            |
| V\#  | 色彩註冊     | 2        | 2    | 2    | 第2階段中的2個 |



 

例如，幾乎所有版本的色彩註冊都會有兩個讀取埠的限制。 這表示單一指令最多可以使用兩個不同的色彩暫存器 (v0 和 v1 for 實例) 作為來源暫存器。 此範例顯示相同指令中使用的兩個色彩暫存器：


```
mad r0, v1, c2, v0
```



## <a name="read-only-readwrite"></a>唯讀、讀取/寫入

註冊類型是根據唯讀 (RO) 功能，或下表中的讀/寫 (RW) 功能來識別。 唯讀暫存器只能用來做為指令中的來源暫存器;它們永遠不能用來做為目的地註冊。



|      |                    | 版本 |      |      |                    |
|------|--------------------|----------|------|------|--------------------|
| 名稱 | 類型               | 1\_1     | 1\_2 | 1 \_ 3 | 1\_4               |
| c\#  | 常數暫存器  | RO       | RO   | RO   | RO                 |
| R\#  | 暫時註冊 | RW       | RW   | RW   | RW                 |
| 10gbase-t\#  | 材質暫存器   | RW       | RW   | RW   | 請參閱下列注意事項 |
| V\#  | 色彩註冊     | RO       | RO   | RO   | RO                 |



 

具有 RW 功能的暫存器可以用來儲存中繼結果。 這包括部分著色器版本的臨時暫存器和材質暫存器。

> [!Note]  
>
> -   針對圖元著色器第1版，材質暫存器適用 \_ 于材質定址指示，而材質暫存器不能讀取或寫入到算術指令。 此外，因為材質暫存器已成為紋理座標暫存器，所以具有 RO 存取權並不是先前功能的回歸。

 

## <a name="range"></a>範圍

範圍是最大和最小的註冊資料值。 範圍會根據註冊類型而有所不同。 您可以使用 [**GetDeviceCaps**](/windows/desktop/api/d3d9/nf-d3d9-idirect3d9-getdevicecaps)，從裝置 cap 查詢部分暫存器的範圍。



| 名稱 | 類型               | 範圍                                               | 版本     |
|------|--------------------|-----------------------------------------------------|--------------|
| c\#  | 常數暫存器  | -1 到 + 1                                            | 所有版本 |
| R\#  | 暫時註冊 | \- PixelShader1xMaxValue 至 + PixelShader1xMaxValue | 所有版本 |
| 10gbase-t\#  | 材質暫存器   | \- MaxTextureRepeat 至 + MaxTextureRepeat           | 所有版本 |
| V\#  | 色彩註冊     | 0到1                                              | 所有版本 |



 

早期圖元著色器硬體使用固定點數位來表示暫存器中的資料。 這會針對數位的小數部分，將精確度限制為大約八個位。 設計著色器時請記住這一點。

若是圖元著色器第1版 \_ 至 1 \_ 3，MaxTextureRepeat 必須至少為1。 若為 1 \_ 4，MaxTextureRepeat 必須至少為8。

如需 PixelShader1xMaxValue 的詳細資訊，請參閱 [**D3DCAPS9**](/windows/desktop/api/d3d9caps/ns-d3d9caps-d3dcaps9) 。

## <a name="related-topics"></a>相關主題

<dl> <dt>

[寄存 器](dx9-graphics-reference-asm-ps-registers.md)
</dt> </dl>

 

 