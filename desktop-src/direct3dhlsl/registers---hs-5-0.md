---
title: 註冊-hs_5_0
description: 輪廓著色器包含三個不同的階段：控制點階段、分叉階段和聯結階段。 每個階段都有自己的一組輸入和輸出暫存器。
ms.assetid: 82F689EF-D3F4-40B5-9A2C-1F97F4CE6501
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3891130b4a952cb991615dbcc386e245d5eb8abedc2d8cec0b441eb6b3c2fbae
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/11/2021
ms.locfileid: "119854028"
---
# <a name="registers---hs_5_0"></a>註冊-hs \_ 5 \_ 0

輪廓著色器包含三個不同的階段：控制點階段、分叉階段和聯結階段。 每個階段都有自己的一組輸入和輸出暫存器。

## <a name="control-point-phase"></a>控制點階段

hs \_ 控制 \_ 點 \_ 階段是具有下列註冊模型的著色器程式。

### <a name="input-registers"></a>輸入暫存器



| 註冊類型                                     | 計數                 | R/W | 尺寸 | R 可編制索引\# | Defaults | 需要 DCL |
|---------------------------------------------------|-----------------------|-----|-----------|------------------|----------|--------------|
| 32位 Temp (r \#)                                  | 4096 (r \# + x \# \[ n \])     | R/W | 4         | 否               | None     | Yes          |
| 32位可編制索引的暫存陣列 (x \# \[ n \])             | 4096 (r \# + x \# \[ n \])     | R/W | 4         | 是              | 無     | Yes          |
| 32位輸入 (v \[ 頂點 \] \[ 元素 \])              | 32 (元素) \* 32 (垂直)  | R   | 4         | 是              | 無     | Yes          |
| 32位 UINT 輸入 vOutputControlPointID (23.7)      | 1                     | R   | 1         | 否               | None     | Yes          |
| 32位 UINT 輸入 PrimitiveID (vPrim)              | 1                     | R   | 1         | 否               | N/A      | 是          |
| 輸入資源中的元素 (t \#)                 | 128                   | R   | 128       | Yes              | 無     | Yes          |
| 取樣器 (s \#)                                      | 16                    | R   | 1         | 是              | 無     | Yes          |
| ConstantBuffer 參考 (cb \# \[ 索引 \])           | 15                    | R   | 4         | 是              | 無     | Yes          |
|  (icb \[ 索引) 的立即 ConstantBuffer 參考 \] | 1                     | R   | 4         | 是 (內容)    | 無     | Yes          |



 

### <a name="output-registers"></a>輸出暫存器



| 註冊類型                           | 計數 | R/W | 尺寸 | R 可編制索引\# | Defaults | 需要 DCL |
|-----------------------------------------|-------|-----|-----------|------------------|----------|--------------|
| 32位輸出頂點資料元素 (o \#)  | 32    | W   | 4         | 是              | 無     | Yes          |



 

每個輪廓著色器控制點階段輸出暫存器最多可達4個向量，最多可宣告32個暫存器。 也會宣告從1到32的輸出控制點，以調整所需的儲存空間量。 讓我們在所有的輪廓著色器控制點階段輸出中，將可允許的純量值上限視為 \# cp 輸出的最大值 \_ \_ 。

\#cp \_ 輸出 \_ 最大值 = 3968 純量。

這項限制是以特定硬體 4096 32 位存放區的設計點為基礎 \* 。 控制點輸出的數量是 3968 = 4096-128，也就是 32 (控制點) \* 4 (元件) \* 32 (元素 32)  (\*)  () 元素。 減法會保留128個純量 (一個控制點) 值得用來作為輪廓著色器階段2和3的空間。 為修補程式常數保留128純量的選項--而不是只允許在輸出控制點未使用任何4096純量的儲存空間時，就能容納另一個特定硬體設計的限制。 控制點階段可以宣告32輸出控制點，但它們不能是具有4個元件的完整32元素，因為總儲存體會太高。

## <a name="fork-phase"></a>分叉階段

下列暫存器可在 hs \_ 分叉 \_ 階段模型中看見。

輸入資源 (t \#) 、取樣器 (s \#) 、常數緩衝區 (cb \#) 和立即的常數緩衝區 (的所有其他輪廓著色器階段都共用狀態。 也就是說，從 API/DDI 的觀點來看，輪廓著色器針對所有階段都有一組輸入資源狀態。 這是因為從 API/DDI 的觀點來看，輪廓著色器是一個不可部分完成的著色器;其中的階段是實作為詳細資料。

### <a name="input-registers"></a>輸入暫存器



| 註冊類型                                                                         | 計數              | R/W | 尺寸                           | R 可編制索引\# | Defaults | 需要 DCL |
|---------------------------------------------------------------------------------------|--------------------|-----|-------------------------------------|------------------|----------|--------------|
| 32位 Temp (r \#)                                                                      | 4096 (r \# + x \# \[ n \])  | R/W | 4                                   | 否               | None     | Yes          |
| 32位可編制索引的暫存陣列 (x \# \[ n \])                                                 | 4096 (r \# + x \# \[ n \])  | R/W | 4                                   | 是              | 無     | Yes          |
| 32位輸入控制點 (vicp \[ 頂點 \] \[ 元素 \])  (預先控制點階段)      | 32請參閱下方注意事項  | R   | 4 (元件) \* 32 (元素) \* 32 (垂直)  | Yes              | 無     | Yes          |
| 32位輸出控制點 (vocp \[ 頂點 \] \[ 元素 \] \])  (後置控制點階段)  | 32請參閱下方注意事項  | R   | 4 (元件) \* 32 (元素) \* 32 (垂直)  | Yes              | 無     | Yes          |
| 32位 UINT 輸入 PrimitiveID (vPrim)                                                  | 1                  | R   | 1                                   | 否               | N/A      | 是          |
| 32位 UINT 輸入 ForkInstanceID (23.8)  (vForkInstanceID)                               | 1                  | R   | 1                                   | 否               | N/A      | 是          |
| 輸入資源中的元素 (t \#)                                                     | 128                | R   | 128                                 | Yes              | 無     | Yes          |
| 取樣器 (s \#)                                                                          | 16                 | R   | 1                                   | 是              | 無     | Yes          |
| ConstantBuffer 參考 (cb \# \[ 索引 \])                                               | 15                 | R   | 4                                   | 是              | 無     | Yes          |
|  (icb \[ 索引) 的立即 ConstantBuffer 參考 \]                                     | 1                  | R   | 4                                   | 是 (內容)    | 無     | Yes          |



 

> [!Note]
> 輪廓著色器分叉階段的輸入控制點暫存器 (vicp) 宣告必須是 \[ \] [輪廓著色器] 控制項點輸入的任何子集， (預先控制點階段) 。 同樣地，將輸出控制點輸入 (vocp) 必須是 \[ \] 外顯著色器輸出控制點的任何子集， (控制點後階段) 。
> 
> 沿著 \[ 頂點 \] 軸，每個 vicp 和 vocp 要讀取的控制點數目，都必須類似于輪廓著色器輸入控制點計數和輪廓著色器輸出控制點計數的子集。 例如，如果 vocp 暫存器的頂點軸是以 n 個頂點宣告，則會讓控制點階段的輸出控制點 \[ 為0。 n-1 \] 可作為分叉階段的唯讀輸入。

### <a name="output-registers"></a>輸出暫存器



| 註冊                                        | 計數               | R/W | 尺寸 | R 可編制索引\# | Defaults | 需要 DCL |
|-------------------------------------------------|---------------------|-----|-----------|------------------|----------|--------------|
| 32位輸出 Patch 常數資料元素 (o \#)  | 32請參閱下方的附注1 | W   | 4         | 是              | 無     | Yes          |



 

> [!Note]  
> 輪廓著色器分叉和聯結階段輸出是一組共用的 4 4 向量暫存器。 每個分叉或聯結階段程式的輸出都不能彼此重迭。 系統轉譯的值（例如 TessFactors）會出現在這個空間之外。

## <a name="join-phase"></a>加入階段

下列暫存器會顯示在 hs \_ 聯結 \_ 階段模型中。 輸入暫存器有三組：控制點階段輸入控制點 (vicp) 、vocp 控制點階段輸出控制點 (vocp) 和修補程式常數 (vcp) 。 vpc 是所有輪廓著色器分叉階段程式的匯總輸出。 輪廓著色器聯結階段輸出 o 暫存器與 \# hulll 著色器分支階段輸出位於相同的暫存器空間中。

輸入資源 (t \#) 、取樣器 (s \#) 、常數緩衝區 (cb \#) 和立即的常數緩衝區 (的所有其他輪廓著色器階段都共用狀態。 也就是說，從 API/DDI 的觀點來看，輪廓著色器針對所有階段都有一組輸入資源狀態。 這是因為從 API/DDI 的觀點來看，輪廓著色器是一個不可部分完成的著色器;其中的階段是實作為詳細資料。

### <a name="input-registers"></a>輸入暫存器



| 註冊類型                                                                       | 計數               | R/W | 尺寸                           | R 可編制索引\# | Defaults | 需要 DCL |
|-------------------------------------------------------------------------------------|---------------------|-----|-------------------------------------|------------------|----------|--------------|
| 32位 Temp (r \#)                                                                    | 4096 (r \# + x \# \[ n \])   | R/W | 4                                   | 否               | None     | Yes          |
| 32位可編制索引的暫存陣列 (x \# \[ n \])                                               | 4096 (r \# + x \# \[ n \])   | R/W | 4                                   | 是              | 無     | Yes          |
| 32位輸入控制點 (vicp \[ 頂點 \] \[ 元素 \])  (預先控制點階段)    | 32請參閱下方的附注1 | R   | 4 (元件) \* 32 (元素) \* 32 (垂直)  | Yes              | 無     | Yes          |
| 32位輸出控制點 (vocp \[ 頂點 \] \[ 元素 \])  (後置控制點階段)  | 32請參閱下方的附注1 | R   | 4 (元件) \* 32 (元素) \* 32 (垂直)  | Yes              | 無     | Yes          |
| 32位輸入 (vpc \[ 元素 \])  (Patch 常數資料)                                  | 32請參閱下方的附注2 | R   | 4                                   | 是              | 無     | Yes          |
| 32位 UINT 輸入 PrimitiveID (vPrim)                                                | 1                   | R   | 1                                   | 否               | N/A      | 是          |
| 32位 UINT 輸入 JoinInstanceID (vJoinInstanceID)                                   | 1                   | R   | 1                                   | 否               | N/A      | 是          |
| 輸入資源中的元素 (t \#)                                                   | 128                 | R   | 128                                 | Yes              | 無     | Yes          |
| 取樣器 (s \#)                                                                        | 16                  | R   | 1                                   | 是              | 無     | Yes          |
| ConstantBuffer 參考 (cb \# \[ 索引 \])                                             | 15                  | R   | 4                                   | 是              | 無     | Yes          |
|  (icb \[ 索引) 的立即 ConstantBuffer 參考 \]                                   | 1                   | R   | 4                                   | 是 (內容)    | 無     | Yes          |



 

**附注1：** 輪廓著色器聯結階段的輸入控制點暫存器 (vicp) 宣告必須是 \[ \] [輪廓著色器] 控制項點輸入的任何子集， (預先控制點階段) 。 同樣地，將輸出控制點輸入 (vocp) 必須是 \[ \] 外顯著色器輸出控制點的任何子集， (控制點後階段) 。

沿著 \[ 頂點 \] 軸，每個 vicp 和 vocp 要讀取的控制點數目，都必須類似于輪廓著色器輸入控制點計數和輪廓著色器輸出控制點計數的子集。 例如，如果 vocp 暫存器的頂點軸是以 n 個頂點宣告，則會讓控制點階段的輸出控制點 \[ 為0。 n-1 \] 可作為聯結階段的唯讀輸入。

**附注2：** 除了控制點輸入之外，輪廓著色器聯結階段也會將 (s) 的輪廓著色器分叉階段程式所計算的修補常數資料，視為輸入。 這會顯示在 vpc 註冊時的輪廓著色器分叉階段 \# 。 輪廓著色器聯結階段的輸入 vpc 緩存 \# 器共用與輪廓著色器分叉階段輸出 o 註冊相同的暫存器空間 \# 。 O 暫存器的宣告 \# 不能與任何輪廓著色器分叉階段程式 o 輸出宣告重迭 \# ; 輪廓著色器聯結階段會新增至輪廓著色器的匯總修補常數資料輸出。

### <a name="output-registers"></a>輸出暫存器



| 註冊類型                                   | 計數             | R/W | 尺寸 | R 可編制索引\# | Defaults | 需要 DCL |
|-------------------------------------------------|-------------------|-----|-----------|------------------|----------|--------------|
| 32位輸出 Patch 常數資料元素 (o \#)  | 32請參閱下方注意事項 | W   | 4         | 是              | 無     | Yes          |



 

> [!Note]  
> 輪廓著色器分叉和聯結階段輸出是一組共用的 4 4 向量暫存器。 每個分叉或聯結階段程式的輸出都不能彼此重迭。 系統轉譯的值（例如 TessFactors）會出現在這個空間之外。

## <a name="related-topics"></a>相關主題

<dl> <dt>

[著色器模型5](d3d11-graphics-reference-sm5.md)
</dt> </dl>

 

 




