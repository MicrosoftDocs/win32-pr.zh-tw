---
title: '\#定義指示詞 (宏) '
description: 建立類似函式宏的預處理器指示詞。
ms.assetid: 73c19cf8-fbc5-444b-a51f-dc9f881f397b
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- apiref
api_name: ''
api_type: ''
api_location: ''
ms.openlocfilehash: 49f89847a47a173f8f7d3bcbb22464fecad658068031f62559bde6ec0735f7f1
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/11/2021
ms.locfileid: "118514809"
---
# <a name="define-directive-macro"></a>\#定義指示詞 (宏) 

建立類似函式宏的預處理器指示詞。



| \#定義 *識別碼* ( *argument0*，...， *argumentN-1* ) *權杖-字串* |
|--------------------------------------------------------------------------|



 

## <a name="parameters"></a>參數



| Item                                                                                                                                                                                                                                                          | 描述                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span id="identifier"></span><span id="IDENTIFIER"></span>*識別碼*<br/>                                                                                                                                                                             | 宏的識別碼。 <br/> 除非第二個權杖順序與第一個相同，否則使用已存在於目前內容中的識別碼之宏的第二個[ \# 定義](dx-graphics-hlsl-appendix-pre-define.md)會產生錯誤。 <br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span id="___________argument0___...___argumentN-1_________"></span><span id="___________argument0___...___argumentn-1_________"></span><span id="___________ARGUMENT0___...___ARGUMENTN-1_________"></span> ( *argument0*，...， *argumentN-1* )  <br/> | 宏的引數清單。 引數清單以逗號分隔、可以是任何長度，而且必須以括弧括住。 清單中的每個引數名稱都必須是唯一的。 沒有空格可分隔 *識別碼* 參數和左括弧。 <br/> 使用行串連，將反斜線 (\\) 緊接在換行字元之前，以將長指示詞分割成多個原始程式列。 <br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span id="token-string__optional________"></span><span id="TOKEN-STRING__OPTIONAL________"></span>*token-字串* \[選\] <br/>                                                                                                                     | 宏的值。 這個參數是由一系列的 token 所組成，例如關鍵字、常數或完整語句。 一或多個空白字元必須將此參數與 *識別碼* 參數分開;這個空白字元不會被視為替代文字的一部分，也不會在文字的最後一個標記之後的任何空白字元。 充分利用括弧來確保正確地解讀複雜的引數。 <br/> 如果 *識別碼* 參數的值發生在 *token 字串* 參數內 (即使是另一個宏展開) ，也不會展開。 <br/> 如果您排除此參數，則會從原始程式檔中移除 *識別碼* 參數的所有實例。 識別碼仍會保持定義，並且可使用[ \# if 已定義](dx-graphics-hlsl-appendix-pre-ifdef.md)、 \# ifdef 和 ifndef 指示詞進行測試 \# 。 <br/> |



 

## <a name="remarks"></a>備註

在原始程式檔中 [ \# 定義](dx-graphics-hlsl-appendix-pre-define.md)指示詞之後發生的 *識別碼* 參數的所有實例構成了宏呼叫，而該識別碼會取代為具有實作為型式參數之實際引數的 *權杖字串* 參數版本。 呼叫中的參數數目必須符合巨集定義中的參數數目。 只有在形成權杖時，才會取代識別碼;例如，如果識別碼出現在批註、字串內或較長識別碼的一部分，則不會取代該識別碼。

[ \# Undef](dx-graphics-hlsl-appendix-pre-undef.md)指示詞會指示預處理器忘記定義識別碼; 如需詳細資訊，請參閱 \# (DirectX HLSL) 的 undef 指示詞。

使用/D 編譯器選項定義常數的效果，與在檔案開頭使用[ \# define](dx-graphics-hlsl-appendix-pre-define.md)指示詞的效果相同。 最多可以使用/D 選項來定義30個宏。

宏呼叫中的實際引數會與巨集定義中的對應正式引數相符。 標記字串中的每個型式引數都會由對應的實際引數取代，除非引數前面有字串化 (\#) 、字元化 (\# @ ) 或標記貼上 (\# \#) 運算子，或後面接著 \# \# 操作員。 實際引數中的所有巨集都會在指示詞取代型式參數之前展開。

在 HLSL 編譯器中貼上的權杖與在 C 編譯器中貼上的權杖稍微不同，因為貼上的權杖必須是自己的有效權杖。 例如，請考慮下列巨集定義：


```
#define MERGE(a, b) a##b
MERGE(float, 4x4) test;
```



在 C 編譯器中，這會產生下列結果：


```
float4x4 test
```



不過，在 HLSL 編譯器中，這會產生下列結果：


```
float4 x4 test
```



您可以改為使用下列巨集定義來解決這種行為。


```
MERGE(MERGE(float, 4), x4) test;
```



## <a name="examples"></a>範例

下列範例會使用宏來定義游標行。


```
#define CURSOR(top, bottom) (((top) << 8) | (bottom))
```



下列範例會定義一個宏，以抓取指定範圍內的隨機整數。


```
#define getrandom(min, max) \
((rand()%(int)(((max) + 1)-(min)))+ (min))
```



## <a name="related-topics"></a>相關主題

<dl> <dt>

[ (DirectX HLSL) 的預處理器指示詞 ](dx-graphics-hlsl-appendix-preprocessor.md)
</dt> <dt>

[\#定義多載](dx-graphics-hlsl-appendix-pre-define.md)
</dt> <dt>

[\# (DirectX HLSL) 的 undef 指示詞 ](dx-graphics-hlsl-appendix-pre-undef.md)
</dt> </dl>

 

 





