---
description: 應用程式會將使用者定義的字元 (EUDCs) 和私用區域 (PUA) 字元寫入螢幕或印表機，如同使用 TextOut 和 ExtTextOut 等輸出功能。
ms.assetid: c975c70d-4231-4a69-bec2-d51d6993fdd4
title: 撰寫、對應和排序 EUDC 和 PUA 字元
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a6c34264d956bb6a87407e249f68b2bc03fb2c99
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/07/2021
ms.locfileid: "104191378"
---
# <a name="writing-mapping-and-sorting-eudc-and-pua-characters"></a><span data-ttu-id="814ee-103">撰寫、對應和排序 EUDC 和 PUA 字元</span><span class="sxs-lookup"><span data-stu-id="814ee-103">Writing, Mapping, and Sorting EUDC and PUA Characters</span></span>

<span data-ttu-id="814ee-104">應用程式會將使用者定義的字元 (EUDCs) 和私用區域 (PUA) 字元寫入螢幕或印表機，如同使用 [TextOut](/windows/win32/api/wingdi/nf-wingdi-textouta) 和 [ExtTextOut](/windows/win32/api/wingdi/nf-wingdi-exttextouta)等輸出功能。</span><span class="sxs-lookup"><span data-stu-id="814ee-104">Applications write end-user-defined characters (EUDCs) and private use area (PUA) characters to the screen or printer just as they write other characters, by using output functions such as [TextOut](/windows/win32/api/wingdi/nf-wingdi-textouta) and [ExtTextOut](/windows/win32/api/wingdi/nf-wingdi-exttextouta).</span></span> <span data-ttu-id="814ee-105">如果已啟用 EUDC，這些函式會自動從 EUDC 或 PUA 字元字型取出字元資訊。</span><span class="sxs-lookup"><span data-stu-id="814ee-105">These functions automatically retrieve character information from EUDC or PUA character fonts if EUDC is enabled.</span></span> <span data-ttu-id="814ee-106">如需詳細資訊，請參閱 [使用者 \_ 定義和私用區域字元](end-user-defined-characters.md)。</span><span class="sxs-lookup"><span data-stu-id="814ee-106">For more information, see [End-User\_Defined and Private Use Area Characters](end-user-defined-characters.md).</span></span>

<span data-ttu-id="814ee-107">撰寫 EUDCs 或 PUA 字元時，文字輸出函式的作業取決於目前選取的字型。</span><span class="sxs-lookup"><span data-stu-id="814ee-107">When writing EUDCs or PUA characters, the operation of the text output function depends on the currently selected font.</span></span> <span data-ttu-id="814ee-108">如果選取的字型是整合的 EUDC 或 PUA 字元字型，則函式會從該字型抓取字元資訊。</span><span class="sxs-lookup"><span data-stu-id="814ee-108">If the selected font is an integrated EUDC or PUA character font, the function retrieves character information from that font.</span></span> <span data-ttu-id="814ee-109">如果選取的字型是 [雙位元組字集](double-byte-character-sets.md) (DBCS) TrueType 字型具有相關聯的個別 EUDC 字型，此函式會從指定的 eudc 字型抓取資訊。</span><span class="sxs-lookup"><span data-stu-id="814ee-109">If the selected font is a [double-byte character set](double-byte-character-sets.md) (DBCS) TrueType font that has an associated separate EUDC font, the function retrieves information from the specified EUDC font.</span></span> <span data-ttu-id="814ee-110">同樣地，如果選取的字型是具有相關聯之個別 PUA 字元字型的 [Unicode](unicode.md) TrueType 字型，則函式會從 PUA 字元字型抓取資訊。</span><span class="sxs-lookup"><span data-stu-id="814ee-110">Similarly, if the selected font is a [Unicode](unicode.md) TrueType font that has an associated separate PUA character font, the function retrieves information from the PUA character font.</span></span> <span data-ttu-id="814ee-111">如果選取的字型沒有相關聯的 EUDC 或 PUA 字元字型，則函式會從系統預設的 EUDC 字型抓取資訊。</span><span class="sxs-lookup"><span data-stu-id="814ee-111">If the selected font does not have an associated EUDC or PUA character font, the function retrieves information from the system default EUDC font.</span></span> <span data-ttu-id="814ee-112">如果字元不是系統預設的 EUDC 字型，或沒有系統預設的 EUDC 字型，則函式會寫入所選取字型所定義的預設字元。</span><span class="sxs-lookup"><span data-stu-id="814ee-112">If the character is not in the system default EUDC font or there is no system default EUDC font, the function writes the default character defined by the selected font.</span></span>

<span data-ttu-id="814ee-113">應用程式可以使用 [**MultiByteToWideChar**](/windows/desktop/api/Stringapiset/nf-stringapiset-multibytetowidechar) 和 [**WideCharToMultiByte**](/windows/desktop/api/Stringapiset/nf-stringapiset-widechartomultibyte) 函式，將 EUDCs 對應至 Unicode。</span><span class="sxs-lookup"><span data-stu-id="814ee-113">Applications can map EUDCs to and from Unicode by using the [**MultiByteToWideChar**](/windows/desktop/api/Stringapiset/nf-stringapiset-multibytetowidechar) and [**WideCharToMultiByte**](/windows/desktop/api/Stringapiset/nf-stringapiset-widechartomultibyte) functions.</span></span> <span data-ttu-id="814ee-114">**MultiByteToWideChar** 函式會將大部分的 EUDCs 對應至 Unicode PUA 中的字元。</span><span class="sxs-lookup"><span data-stu-id="814ee-114">The **MultiByteToWideChar** function maps most EUDCs to characters in the Unicode PUA.</span></span> <span data-ttu-id="814ee-115">不過，為了支援特定國家或地區標準，某些 EUDCs 可對應至非 PUA 的 Unicode 程式碼點。</span><span class="sxs-lookup"><span data-stu-id="814ee-115">However, to support certain national or regional standards, some EUDCs can be mapped to non-PUA Unicode code points.</span></span> <span data-ttu-id="814ee-116">如果這類對應存在，而且程式碼點沒有 Unicode 的有效非 PUA 對應， **WideCharToMultiByte** 函式就會將 PUA 中的字元對應至其 EUDC 對應項。</span><span class="sxs-lookup"><span data-stu-id="814ee-116">The **WideCharToMultiByte** function maps a character in the PUA to its EUDC counterpart, if such a mapping exists and if the code point does not have a valid non-PUA mapping in Unicode.</span></span> <span data-ttu-id="814ee-117">並非所有字碼頁都有 EUDC 範圍。</span><span class="sxs-lookup"><span data-stu-id="814ee-117">Not all code pages have an EUDC range.</span></span> <span data-ttu-id="814ee-118">對 **WideCharToMultiByte** 的呼叫中指定的字碼頁，必須包含要發生之 eudc 範圍對應的 EUDC 程式碼範圍。</span><span class="sxs-lookup"><span data-stu-id="814ee-118">The code page specified in a call to **WideCharToMultiByte** must contain an EUDC code range for the mapping to the EUDC range to occur.</span></span> <span data-ttu-id="814ee-119">如果字碼頁未包含 EUDC 程式碼範圍，則函式會抓取 Unicode PUA 中任何字元的預設字元。</span><span class="sxs-lookup"><span data-stu-id="814ee-119">If the code page does not contain an EUDC code range, the function retrieves the default character for any characters in the Unicode PUA.</span></span>

<span data-ttu-id="814ee-120">[**MultiByteToWideChar**](/windows/desktop/api/Stringapiset/nf-stringapiset-multibytetowidechar) 和 [**WideCharToMultiByte**](/windows/desktop/api/Stringapiset/nf-stringapiset-widechartomultibyte) 無法保證來回對應。</span><span class="sxs-lookup"><span data-stu-id="814ee-120">[**MultiByteToWideChar**](/windows/desktop/api/Stringapiset/nf-stringapiset-multibytetowidechar) and [**WideCharToMultiByte**](/windows/desktop/api/Stringapiset/nf-stringapiset-widechartomultibyte) do not guarantee round-trip mapping.</span></span> <span data-ttu-id="814ee-121">換句話說，您可以從包含 EUDCs 的特定多位元組字元串開始，使用 **MultiByteToWideChar** 將字串對應至 Unicode，然後將它對應回具有 **WIDECHARTOMULTIBYTE** 的原始 DBCS，最後產生與原始字串不相同的結果。</span><span class="sxs-lookup"><span data-stu-id="814ee-121">In other words, it is possible to start with a particular multibyte string containing EUDCs, map the string to Unicode with **MultiByteToWideChar** and map it back to the original DBCS with **WideCharToMultiByte**, and end up with a result that is not identical to the original string.</span></span> <span data-ttu-id="814ee-122">依賴將 EUDCs 對應至 Unicode 的應用程式應該確保所有必要的字元都能在適當的字碼頁 EUDC 區域和 Unicode PUA 之間來回行程。</span><span class="sxs-lookup"><span data-stu-id="814ee-122">Applications relying on mapping EUDCs to Unicode should ensure that all necessary characters can round-trip between the appropriate code page EUDC area and the Unicode PUA.</span></span>

<span data-ttu-id="814ee-123">應用程式不應該嘗試將 EUDCs 從某個字碼頁對應到另一個字碼頁。</span><span class="sxs-lookup"><span data-stu-id="814ee-123">Applications should not attempt to map EUDCs from one code page to another.</span></span> <span data-ttu-id="814ee-124">如果應用程式從一個字碼頁的 EUDC 開始，請使用 [**MultiByteToWideChar**](/windows/desktop/api/Stringapiset/nf-stringapiset-multibytetowidechar)將其對應至 Unicode，並對應至不同的 DBCS 與 [**WideCharToMultiByte**](/windows/desktop/api/Stringapiset/nf-stringapiset-widechartomultibyte)，則不會對結果產生任何保證。</span><span class="sxs-lookup"><span data-stu-id="814ee-124">If an application starts with an EUDC from one code page, maps it to Unicode with [**MultiByteToWideChar**](/windows/desktop/api/Stringapiset/nf-stringapiset-multibytetowidechar), and maps to a different DBCS with [**WideCharToMultiByte**](/windows/desktop/api/Stringapiset/nf-stringapiset-widechartomultibyte), there are no guarantees about the results.</span></span> <span data-ttu-id="814ee-125">原始字元可能對應至目的地字碼頁中的不同 EUDC，或可能對應為未定義字元。</span><span class="sxs-lookup"><span data-stu-id="814ee-125">The original character might be mapped to a different EUDC in the destination code page, or it might be mapped as an undefined character.</span></span> <span data-ttu-id="814ee-126">同樣地，將 Unicode 字串對應至具有 EUDC 範圍的字碼頁，可能會產生非預期的結果。</span><span class="sxs-lookup"><span data-stu-id="814ee-126">Similarly, mapping a Unicode string to a code page that has an EUDC range can have unintended results.</span></span> <span data-ttu-id="814ee-127">如果 Unicode 字串包含 PUA 的程式碼點，則可能會將程式碼點對應到不代表相同字元的 EUDC。</span><span class="sxs-lookup"><span data-stu-id="814ee-127">If the Unicode string contains a PUA code point, it is possible that the code point will be mapped to an EUDC that does not represent the same character.</span></span>

<span data-ttu-id="814ee-128">應用程式可以使用 [CompareString](/windows/win32/api/stringapiset/nf-stringapiset-comparestringw) 函數的 ANSI 版本，來比較包含 EUDCS 的 DBCS 字串。</span><span class="sxs-lookup"><span data-stu-id="814ee-128">Applications can compare DBCS strings that contain EUDCs by using the ANSI version of the [CompareString](/windows/win32/api/stringapiset/nf-stringapiset-comparestringw) function.</span></span> <span data-ttu-id="814ee-129">函式會在比較字元值之前，將字元有效地對應至 Unicode。</span><span class="sxs-lookup"><span data-stu-id="814ee-129">The function effectively maps the characters to Unicode before comparing character values.</span></span> <span data-ttu-id="814ee-130">應用程式可以使用 ANSI 版本的 [**LCMapString**](/windows/desktop/api/Winnls/nf-winnls-lcmapstringa) 函式和 LCMAP 分類值，建立字串的排序索引鍵 \_ 。</span><span class="sxs-lookup"><span data-stu-id="814ee-130">Applications can create a sort key for the string by using the ANSI version of the [**LCMapString**](/windows/desktop/api/Winnls/nf-winnls-lcmapstringa) function and the LCMAP\_SORTKEY value.</span></span> <span data-ttu-id="814ee-131">此函式會將字元先對應到 Unicode。</span><span class="sxs-lookup"><span data-stu-id="814ee-131">This function effectively maps characters to Unicode first.</span></span> <span data-ttu-id="814ee-132">PUA 中的所有字元都是在所有其他 Unicode 字元之後排序。</span><span class="sxs-lookup"><span data-stu-id="814ee-132">All characters in the PUA are sorted after all other Unicode characters.</span></span> <span data-ttu-id="814ee-133">在該區域內，字元會依數位順序排序。</span><span class="sxs-lookup"><span data-stu-id="814ee-133">Within the area, characters are sorted in numerical order.</span></span> <span data-ttu-id="814ee-134">如果應用程式嘗試使用 [GetStringTypeA](/windows/desktop/api/Winnls/nf-winnls-getstringtypea) 函式來抓取 EUDC 的 CTYPE 資訊，則此函式會針對每個字元取得 **Null** 。</span><span class="sxs-lookup"><span data-stu-id="814ee-134">If an application attempts to retrieve CTYPE information for an EUDC by using the [GetStringTypeA](/windows/desktop/api/Winnls/nf-winnls-getstringtypea) function, the function retrieves **NULL** for each character.</span></span>

## <a name="related-topics"></a><span data-ttu-id="814ee-135">相關主題</span><span class="sxs-lookup"><span data-stu-id="814ee-135">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="814ee-136">使用 Unicode 和字元集</span><span class="sxs-lookup"><span data-stu-id="814ee-136">Using Unicode and Character Sets</span></span>](using-unicode-and-character-sets.md)
</dt> </dl>

 

 
