---
title: 自訂裝置的設計考慮
description: 本主題說明可協助您判斷裝置是否需要自訂驅動程式的設計考慮。
ms.assetid: 8AADE304-4841-41E2-968B-DFCB5B954FF1
ms.topic: article
ms.date: 02/11/2020
ms.openlocfilehash: f503ae556009f3b4b9b88d9f895936218f402fc6
ms.sourcegitcommit: 3d718d8f69d3f86eaecf94c5705d761c5a9ef4a1
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/20/2020
ms.locfileid: "103684212"
---
# <a name="design-considerations-for-custom-devices"></a><span data-ttu-id="76bf4-103">自訂裝置的設計考慮</span><span class="sxs-lookup"><span data-stu-id="76bf4-103">Design Considerations for Custom Devices</span></span>

<span data-ttu-id="76bf4-104">本主題說明可協助您判斷裝置是否需要自訂驅動程式的設計考慮。</span><span class="sxs-lookup"><span data-stu-id="76bf4-104">This topic describes design considerations that can help you determine whether your device needs a custom driver.</span></span>

- [<span data-ttu-id="76bf4-105">判斷要執行的驅動程式類型</span><span class="sxs-lookup"><span data-stu-id="76bf4-105">Determining the type of driver to implement</span></span>](#determining-the-type-of-driver-to-implement)
- [<span data-ttu-id="76bf4-106">安全性考量</span><span class="sxs-lookup"><span data-stu-id="76bf4-106">Security considerations</span></span>](#security-considerations)
- [<span data-ttu-id="76bf4-107">相關主題</span><span class="sxs-lookup"><span data-stu-id="76bf4-107">Related topics</span></span>](#related-topics)

## <a name="determining-the-type-of-driver-to-implement"></a><span data-ttu-id="76bf4-108">判斷要執行的驅動程式類型</span><span class="sxs-lookup"><span data-stu-id="76bf4-108">Determining the type of driver to implement</span></span>

<span data-ttu-id="76bf4-109">下表說明您應該如何開發裝置的自訂驅動程式，並使用裝置存取 API 來與它通訊，以及您應該改用 Windows 提供的裝置堆疊。</span><span class="sxs-lookup"><span data-stu-id="76bf4-109">This table describes when you should develop a custom driver for your device and communicate with it by using the Device Access API, and when you should use Windows-provided device stacks instead.</span></span>

| <span data-ttu-id="76bf4-110">若要支援</span><span class="sxs-lookup"><span data-stu-id="76bf4-110">To support</span></span> | <span data-ttu-id="76bf4-111">實作</span><span class="sxs-lookup"><span data-stu-id="76bf4-111">Implementation</span></span> |
|:---|:---|
| <span data-ttu-id="76bf4-112">知名的裝置，包括：</span><span class="sxs-lookup"><span data-stu-id="76bf4-112">Well-known devices, including:</span></span> <ul><li><span data-ttu-id="76bf4-113">Sensor</span><span class="sxs-lookup"><span data-stu-id="76bf4-113">Sensor</span></span></li><li><span data-ttu-id="76bf4-114">Location</span><span class="sxs-lookup"><span data-stu-id="76bf4-114">Location</span></span></li><li><span data-ttu-id="76bf4-115">網路攝影機</span><span class="sxs-lookup"><span data-stu-id="76bf4-115">Webcam</span></span></li><li><span data-ttu-id="76bf4-116">鄰近</span><span class="sxs-lookup"><span data-stu-id="76bf4-116">Proximity</span></span></li><li><span data-ttu-id="76bf4-117">短訊息服務 (SMS) </span><span class="sxs-lookup"><span data-stu-id="76bf4-117">Short message service (SMS)</span></span></li><li><span data-ttu-id="76bf4-118">行動寬頻</span><span class="sxs-lookup"><span data-stu-id="76bf4-118">Mobile broadband</span></span></li></ul><br/> | <span data-ttu-id="76bf4-119">對於許多類型的知名裝置，您不需要自訂驅動程式，因為 Windows 包含 Api 和類別延伸設備磁碟機介面 (DDIs) 管理驅動程式和 Windows 之間的通訊。</span><span class="sxs-lookup"><span data-stu-id="76bf4-119">For many types of well-known devices, you don't need a custom driver, because Windows includes APIs and class-extension device driver interfaces (DDIs) that manage the communication between the driver and Windows.</span></span> <span data-ttu-id="76bf4-120">感應器、位置和 Windows 可攜式裝置 (WPD) 裝置是具有這項支援之裝置類別的一些範例。</span><span class="sxs-lookup"><span data-stu-id="76bf4-120">Sensor, location, and Windows Portable Device (WPD) devices are some examples of device classes that have this support.</span></span> <span data-ttu-id="76bf4-121">如果您建立的驅動程式會使用其中一個 Windows 提供的 DDIs 來傳送和接收資料和命令，則您的 Windows Store 應用程式不需要使用裝置存取 API 來進行訊息代理程式存取，或將輸入/輸出 (i/o) 控制程式代碼直接傳送到驅動程式。</span><span class="sxs-lookup"><span data-stu-id="76bf4-121">If you build a driver that uses one of these Windows-provided DDIs to send and receive data and commands, there's no need for your Windows Store app to use the Device Access API to broker access or send input/output (I/O) control codes directly to the driver.</span></span> <br/> <span data-ttu-id="76bf4-122">當 Windows Store 應用程式使用適用于其裝置類別的 Windows 執行階段 API 來要求已知裝置的存取權時，Windows 8 會根據裝置的類型來處理裝置存取。</span><span class="sxs-lookup"><span data-stu-id="76bf4-122">When a Windows Store app requests access to a well-known device by using the Windows Runtime API for its device class, Windows 8 will handle device access based on the type of device.</span></span> <span data-ttu-id="76bf4-123">應用程式一律會存取某些知名的裝置類型 (例如加速計) ，而不會顯示任何個人識別資訊。</span><span class="sxs-lookup"><span data-stu-id="76bf4-123">Apps will always get access to some well-known types of devices (such as accelerometers) that don't reveal any personally identifiable information.</span></span> <span data-ttu-id="76bf4-124">其他類型的知名裝置必須在應用程式資訊清單中宣告，應用程式才能存取它們。</span><span class="sxs-lookup"><span data-stu-id="76bf4-124">Other types of well-known devices must be declared in the application manifest before an app can access them.</span></span> <span data-ttu-id="76bf4-125">使用者必須授與許可權，應用程式才能存取可顯示機密資訊的裝置，例如位置、網路攝影機和麥克風裝置，或可能需要支付使用者的費用，例如行動寬頻裝置。</span><span class="sxs-lookup"><span data-stu-id="76bf4-125">The user must grant permission for an app to access devices that reveal sensitive information, like location, webcam, and microphone devices, or can cost the user money, like mobile broadband devices.</span></span> <br/> |
| <span data-ttu-id="76bf4-126">執行 MTP 服務的 WPD 裝置。</span><span class="sxs-lookup"><span data-stu-id="76bf4-126">A WPD device that implements MTP services.</span></span><br/> | <span data-ttu-id="76bf4-127">您可以使用 MTP 類別驅動程式，也可以使用 WPD 的 DDI 來建立驅動程式。</span><span class="sxs-lookup"><span data-stu-id="76bf4-127">You can use the MTP class driver, or you can build a driver by using the WPD DDI.</span></span><br/> <span data-ttu-id="76bf4-128">Windows 8 提供 MTP 裝置服務的支援。而且，應用程式可以使用 [Windows. 便攜](/uwp/api/Windows.Devices.Portable) Windows 執行階段 API、可攜式裝置元件物件模型 (COM) API 或 WPD 自動化來存取裝置。</span><span class="sxs-lookup"><span data-stu-id="76bf4-128">Windows 8 provides support for MTP device services.And an app can use the [Windows.Devices.Portable](/uwp/api/Windows.Devices.Portable) Windows Runtime API, the Portable Device Component Object Model (COM) API, or WPD Automation to access the device.</span></span> <span data-ttu-id="76bf4-129">您的應用程式不需要使用裝置存取 API。</span><span class="sxs-lookup"><span data-stu-id="76bf4-129">Your app doesn't need to use the Device Access API.</span></span><br/> |
| <span data-ttu-id="76bf4-130">沒有 Windows 提供的類別擴充或類別驅動程式的裝置。</span><span class="sxs-lookup"><span data-stu-id="76bf4-130">A device that doesn't have a Windows-provided class extension or class driver.</span></span><br/>  | <span data-ttu-id="76bf4-131">在此情況下，請參閱適用于專用裝置之 [內部裝置的 UWP 裝置應用程式](/windows-hardware/drivers/devapps/uwp-device-apps-for-specialized-devices) ，以判斷您是否必須使用裝置存取 API 來執行自訂的驅動程式存取。</span><span class="sxs-lookup"><span data-stu-id="76bf4-131">In this case, consult the [UWP device apps for internal devices](/windows-hardware/drivers/devapps/uwp-device-apps-for-specialized-devices) for specialized devices to determine whether you must implement custom driver access by using the Device Access API.</span></span><br/> |

## <a name="security-considerations"></a><span data-ttu-id="76bf4-132">安全性考量</span><span class="sxs-lookup"><span data-stu-id="76bf4-132">Security considerations</span></span>

<span data-ttu-id="76bf4-133">下列文章提供撰寫安全 c + + 程式碼的指引：</span><span class="sxs-lookup"><span data-stu-id="76bf4-133">The following articles provide guidance for writing secure C++ code:</span></span>

- [<span data-ttu-id="76bf4-134">C + + 的安全性最佳作法</span><span class="sxs-lookup"><span data-stu-id="76bf4-134">Security Best Practices for C++</span></span>](/cpp/security/security-best-practices-for-cpp)
- <span data-ttu-id="76bf4-135">[適用于應用程式的模式 & 實務安全性指引]/previous-versions/msp-n-p/ff650760 (v = pandp. 10) ) </span><span class="sxs-lookup"><span data-stu-id="76bf4-135">[Patterns & Practices Security Guidance for Applications]/previous-versions/msp-n-p/ff650760(v=pandp.10))</span></span>

## <a name="related-topics"></a><span data-ttu-id="76bf4-136">相關主題</span><span class="sxs-lookup"><span data-stu-id="76bf4-136">Related topics</span></span>

<span data-ttu-id="76bf4-137">[自訂驅動程式存取範例](https://github.com/microsoftarchive/msdn-code-gallery-microsoft/tree/411c271e537727d737a53fa2cbe99eaecac00cc0/Official%20Windows%20Platform%20Sample/Custom%20driver%20access%20sample)、 [適用于內部裝置的 UWP 裝置應用程式](/windows-hardware/drivers/devapps/uwp-device-apps-for-specialized-devices)、 [硬體開發人員中心](/windows-hardware/drivers/)</span><span class="sxs-lookup"><span data-stu-id="76bf4-137">[Custom Driver Access Sample](https://github.com/microsoftarchive/msdn-code-gallery-microsoft/tree/411c271e537727d737a53fa2cbe99eaecac00cc0/Official%20Windows%20Platform%20Sample/Custom%20driver%20access%20sample), [UWP device apps for internal devices](/windows-hardware/drivers/devapps/uwp-device-apps-for-specialized-devices), [Hardware Dev Center](/windows-hardware/drivers/)</span></span>
