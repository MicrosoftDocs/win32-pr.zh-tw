---
title: 驗證者方法 API 呼叫順序
description: 瞭解驗證器方法 API 呼叫順序。 請參閱清單，以示範 EAPHost 在 EAP 驗證器方法上所做的呼叫順序。
ms.assetid: 4756300c-5e49-44e8-ab49-1993d780d2a3
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3bb5c7d64bfe6e38ebb97550dc76fe8ffcae8176
ms.sourcegitcommit: b0ebdefc3dcd5c04bede94091833aa1015a2f95c
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/21/2020
ms.locfileid: "104382869"
---
# <a name="authenticator-method-api-call-sequence"></a><span data-ttu-id="42ab5-104">驗證者方法 API 呼叫順序</span><span class="sxs-lookup"><span data-stu-id="42ab5-104">Authenticator Method API Call Sequence</span></span>

<span data-ttu-id="42ab5-105">本主題提供驗證器方法 API 的特定呼叫順序。</span><span class="sxs-lookup"><span data-stu-id="42ab5-105">This topic provides the specific call sequence for the authenticator method API.</span></span> <span data-ttu-id="42ab5-106">在一般 EAP 驗證會話 EAPHost 期間，會在執行 EAPHost 驗證器方法 Api 的 EAP 方法上進行一些呼叫。</span><span class="sxs-lookup"><span data-stu-id="42ab5-106">During a typical EAP authentication session EAPHost makes a number of calls on an EAP method that implement the EAPHost authenticator method APIs.</span></span>

<span data-ttu-id="42ab5-107">下列清單示範 EAPHost 在 EAP 驗證器方法上所做的呼叫順序。</span><span class="sxs-lookup"><span data-stu-id="42ab5-107">The following list demonstrates the sequence of calls made by EAPHost on an EAP authenticator method.</span></span>

-   <span data-ttu-id="42ab5-108">EAP 驗證器會先將用於網路原則伺服器上特定驗證的 EAP 方法 DLL 載入 (NPS) 或其他驗證服務器。</span><span class="sxs-lookup"><span data-stu-id="42ab5-108">The EAP authenticator first loads the EAP method DLL used for the specific authentication on a network policy server (NPS) or other authentication server.</span></span>
-   <span data-ttu-id="42ab5-109">使用已填入的 [**EAP \_ 型**](/windows/desktop/api/eaptypes/ns-eaptypes-eap_type)別結構來呼叫方法上的 [**EapAuthenticatorGetInfo**](/previous-versions/windows/desktop/api/eapmethodpeerapis/nf-eapmethodpeerapis-eappeergetinfo) ，以取得在 DLL 上執行的函式指標清單。</span><span class="sxs-lookup"><span data-stu-id="42ab5-109">Calls [**EapAuthenticatorGetInfo**](/previous-versions/windows/desktop/api/eapmethodpeerapis/nf-eapmethodpeerapis-eappeergetinfo) on the method with a populated [**EAP\_TYPE**](/windows/desktop/api/eaptypes/ns-eaptypes-eap_type) structure to obtain a list of pointers to functions implemented on the DLL.</span></span> <span data-ttu-id="42ab5-110">驗證器方法 (server) 的後續函式呼叫會假設在 DLL 上執行。</span><span class="sxs-lookup"><span data-stu-id="42ab5-110">Subsequent function calls by the authenticator methods (server) are assumed to be implemented on the DLL.</span></span>
-   <span data-ttu-id="42ab5-111">呼叫 [**EapAuthenticatorInitialize**](/previous-versions/windows/desktop/api/eapmethodpeerapis/nf-eapmethodpeerapis-eappeerinitialize) ，以指示 EAP 方法程式庫使用此驗證器方法為至少一個驗證會話做好準備。</span><span class="sxs-lookup"><span data-stu-id="42ab5-111">Calls [**EapAuthenticatorInitialize**](/previous-versions/windows/desktop/api/eapmethodpeerapis/nf-eapmethodpeerapis-eappeerinitialize) to instruct the EAP method library to prepare for at least one authentication session using this authenticator method.</span></span>
-   <span data-ttu-id="42ab5-112">呼叫 [**EapMethodAuthenticatorBeginSession**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorbeginsession) 來建立唯一的驗證會話。</span><span class="sxs-lookup"><span data-stu-id="42ab5-112">Calls [**EapMethodAuthenticatorBeginSession**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorbeginsession) to establish a unique authentication session.</span></span>
-   <span data-ttu-id="42ab5-113">重複執行下列步驟，直到 [**EapMethodAuthenticatorReceivePacket**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorreceivepacket) 指出有可用的驗證結果。</span><span class="sxs-lookup"><span data-stu-id="42ab5-113">Repeats the following steps until [**EapMethodAuthenticatorReceivePacket**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorreceivepacket) indicates that an authentication result is available.</span></span>
    -   <span data-ttu-id="42ab5-114">使用要傳遞給要求者的要求封包指標來呼叫 [**EapMethodAuthenticatorSendPacket**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorsendpacket) 。</span><span class="sxs-lookup"><span data-stu-id="42ab5-114">Calls [**EapMethodAuthenticatorSendPacket**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorsendpacket) with a pointer to a request packet to pass to the supplicant.</span></span>
    -   <span data-ttu-id="42ab5-115">呼叫 [**EapMethodAuthenticatorReceivePacket**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorreceivepacket) 以取得要求者所傳送的回應封包。</span><span class="sxs-lookup"><span data-stu-id="42ab5-115">Calls [**EapMethodAuthenticatorReceivePacket**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorreceivepacket) to retrieve the response packet sent by the supplicant.</span></span> <span data-ttu-id="42ab5-116">此函式會傳回 **eap \_ 方法驗證器 \_ \_ 回應 \_ 動作** 碼，指出驗證器必須在 EAP 驗證會話中採取的下一個動作。</span><span class="sxs-lookup"><span data-stu-id="42ab5-116">This function returns a **EAP\_METHOD\_AUTHENTICATOR\_RESPONSE\_ACTION** code that indicates the next action the authenticator must take in the EAP authentication session.</span></span>
    -   <span data-ttu-id="42ab5-117">如果動作程式碼為 [EAP \_ 方法 \_ 驗證 \_ 器 \_ 回應](/windows/desktop/api/EapAuthenticatorActionDefine/ne-eapauthenticatoractiondefine-eap_method_authenticator_response_action)回應，則表示 EAP 方法具有可供驗證器取得並傳遞給對等方法的屬性。</span><span class="sxs-lookup"><span data-stu-id="42ab5-117">If the action code is [EAP\_METHOD\_AUTHENTICATOR\_RESPONSE\_RESPOND](/windows/desktop/api/EapAuthenticatorActionDefine/ne-eapauthenticatoractiondefine-eap_method_authenticator_response_action), it indicates that the EAP method has attributes available for the authenticator to retrieve and pass to the peer method.</span></span> <span data-ttu-id="42ab5-118">驗證器會呼叫 [**EapMethodAuthenticatorGetAttributes**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorgetattributes) ，以從 eap 驗證器方法取得各種 eap 驗證屬性。</span><span class="sxs-lookup"><span data-stu-id="42ab5-118">Authenticator calls [**EapMethodAuthenticatorGetAttributes**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorgetattributes) to obtain the various EAP authentication attributes from the EAP authenticator method.</span></span> <span data-ttu-id="42ab5-119">在驗證器處理屬性之後，它會呼叫 [**EapMethodAuthenticatorSetAttributes**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorsetattributes) ，以提供在 eap 驗證器方法上設定的更新 eap 驗證屬性。</span><span class="sxs-lookup"><span data-stu-id="42ab5-119">After the authenticator processes the attributes it calls [**EapMethodAuthenticatorSetAttributes**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorsetattributes) which provides updated EAP authentication attributes to set on the EAP authenticator method.</span></span> <span data-ttu-id="42ab5-120">此函式會傳回 **EAP \_ 方法驗證器 \_ \_ 回應 \_ 動作** 碼，以決定後續的動作。</span><span class="sxs-lookup"><span data-stu-id="42ab5-120">This function returns a **EAP\_METHOD\_AUTHENTICATOR\_RESPONSE\_ACTION** code which determines the subsequent action.</span></span>
-   <span data-ttu-id="42ab5-121">如果動作程式碼為 [EAP \_ 方法 \_ 驗證器 \_ 回應 \_ 結果](/windows/desktop/api/EapAuthenticatorActionDefine/ne-eapauthenticatoractiondefine-eap_method_authenticator_response_action)，則表示驗證器已判斷驗證會話的結果，而且這些結果可供 EAPHost。</span><span class="sxs-lookup"><span data-stu-id="42ab5-121">If the action code is [EAP\_METHOD\_AUTHENTICATOR\_RESPONSE\_RESULT](/windows/desktop/api/EapAuthenticatorActionDefine/ne-eapauthenticatoractiondefine-eap_method_authenticator_response_action), it indicates that the authenticator has determined the results of the authentication session, and those results are available to EAPHost.</span></span> <span data-ttu-id="42ab5-122">驗證器呼叫 [**EapMethodAuthenticatorGetResult**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorgetresult) 並取得驗證會話的結果。</span><span class="sxs-lookup"><span data-stu-id="42ab5-122">Authenticator calls [**EapMethodAuthenticatorGetResult**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorgetresult) and obtains the results of the authentication session.</span></span>
-   <span data-ttu-id="42ab5-123">接下來是呼叫 [**EapMethodAuthenticatorEndSession**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorendsession) 來結束驗證會話。</span><span class="sxs-lookup"><span data-stu-id="42ab5-123">This is followed by a call to [**EapMethodAuthenticatorEndSession**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorendsession) to end the authentication session.</span></span>
-   <span data-ttu-id="42ab5-124">最後，會對 [**EapMethodAuthenticatorShutdown**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorshutdown) 進行呼叫，以卸載驗證器方法 DLL。</span><span class="sxs-lookup"><span data-stu-id="42ab5-124">Finally, a call is made to [**EapMethodAuthenticatorShutdown**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorshutdown) to unload the authenticator method DLL.</span></span>
-   <span data-ttu-id="42ab5-125">卸載 EAP 方法程式庫。</span><span class="sxs-lookup"><span data-stu-id="42ab5-125">Unloads the EAP method library.</span></span>

## <a name="related-topics"></a><span data-ttu-id="42ab5-126">相關主題</span><span class="sxs-lookup"><span data-stu-id="42ab5-126">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="42ab5-127">**EAP \_ 方法 \_ 驗證器 \_ 回應 \_ 動作**</span><span class="sxs-lookup"><span data-stu-id="42ab5-127">**EAP\_METHOD\_AUTHENTICATOR\_RESPONSE\_ACTION**</span></span>](/windows/desktop/api/EapAuthenticatorActionDefine/ne-eapauthenticatoractiondefine-eap_method_authenticator_response_action)
</dt> <dt>

[<span data-ttu-id="42ab5-128">要求者 API 呼叫順序</span><span class="sxs-lookup"><span data-stu-id="42ab5-128">Supplicant API Call Sequence</span></span>](supplicant-api-call-sequence.md)
</dt> <dt>

[<span data-ttu-id="42ab5-129">對等方法 API 呼叫順序</span><span class="sxs-lookup"><span data-stu-id="42ab5-129">Peer Method API Call Sequence</span></span>](peer-method-api-call-sequence.md)
</dt> <dt>

[<span data-ttu-id="42ab5-130">EAPHost 呼叫順序</span><span class="sxs-lookup"><span data-stu-id="42ab5-130">EAPHost Call Sequences</span></span>](about-eaphost-call-sequences.md)
</dt> </dl>

 

 




