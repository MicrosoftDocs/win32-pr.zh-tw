---
title: " (設計基本概念) 的使用者帳戶控制"
description: 設計完善的使用者帳戶控制體驗，可協助您以可預測的方式來避免不必要的全系統變更，並需要進行極低的努力。
ms.assetid: c4b83537-c600-4b24-bda6-df7a82719ab1
ms.topic: article
ms.date: 10/20/2020
ms.openlocfilehash: b346e5cb581ac83ad2ebffabe73c5fbed636d814
ms.sourcegitcommit: 3bdf30edb314e0fcd17dc4ddbc70e4ec7d3596e6
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 02/10/2021
ms.locfileid: "104571383"
---
# <a name="user-account-control"></a><span data-ttu-id="42a71-103">使用者帳戶控制</span><span class="sxs-lookup"><span data-stu-id="42a71-103">User Account Control</span></span>

> [!NOTE]
> <span data-ttu-id="42a71-104">此設計指南是針對 Windows 7 所建立，而且尚未針對較新版本的 Windows 更新。</span><span class="sxs-lookup"><span data-stu-id="42a71-104">This design guide was created for Windows 7 and has not been updated for newer versions of Windows.</span></span> <span data-ttu-id="42a71-105">大部分的指引仍然適用于準則，但展示和範例不會反映我們目前的 [設計指引](/windows/uwp/design/)。</span><span class="sxs-lookup"><span data-stu-id="42a71-105">Much of the guidance still applies in principle, but the presentation and examples do not reflect our [current design guidance](/windows/uwp/design/).</span></span>

<span data-ttu-id="42a71-106">設計完善的使用者帳戶控制體驗，可協助您以可預測的方式來避免不必要的全系統變更，並需要進行極低的努力。</span><span class="sxs-lookup"><span data-stu-id="42a71-106">A well designed User Account Control experience helps prevent unwanted system-wide changes in a way that is predictable and requires minimal effort.</span></span>

<span data-ttu-id="42a71-107">使用「使用者帳戶控制」 (UAC) 完全啟用的情況下，互動式系統管理員通常會以最少的使用者權限執行，但他們可以自行提高許可權，以執行系統管理工作，方法是授與同意 UI 的明確同意。</span><span class="sxs-lookup"><span data-stu-id="42a71-107">With User Account Control (UAC) fully enabled, interactive administrators normally run with least user privileges, but they can self-elevate to perform administrative tasks by giving explicit consent with the Consent UI.</span></span> <span data-ttu-id="42a71-108">這類系統管理工作包括安裝軟體和驅動程式、變更全系統設定、查看或變更其他使用者帳戶，以及執行系統管理工具。</span><span class="sxs-lookup"><span data-stu-id="42a71-108">Such administrative tasks include installing software and drivers, changing system-wide settings, viewing or changing other user accounts, and running administrative tools.</span></span>

<span data-ttu-id="42a71-109">在最低許可權狀態下，系統管理員稱為受保護的系統管理員。</span><span class="sxs-lookup"><span data-stu-id="42a71-109">In their least-privileged state, administrators are referred to as Protected administrators.</span></span> <span data-ttu-id="42a71-110">在提高許可權的狀態下，它們稱為提高許可權的系統管理員。</span><span class="sxs-lookup"><span data-stu-id="42a71-110">In their elevated state, they are referred to as Elevated administrators.</span></span> <span data-ttu-id="42a71-111">相反地，標準使用者無法自行提升，但可以要求系統管理員使用認證 UI 來提高許可權。</span><span class="sxs-lookup"><span data-stu-id="42a71-111">By contrast, Standard users can't elevate by themselves, but they can ask an administrator to elevate them using the Credential UI.</span></span> <span data-ttu-id="42a71-112">內建的系統管理員帳戶不需要提高許可權。</span><span class="sxs-lookup"><span data-stu-id="42a71-112">The Built-in Administrator account doesn't require elevation.</span></span>

![<span data-ttu-id="42a71-113">[允許程式] 安全性訊息的螢幕擷取畫面</span><span class="sxs-lookup"><span data-stu-id="42a71-113">screen shot of 'allow program' security message</span></span> ](images/winenv-uac-image1.png)

<span data-ttu-id="42a71-114">同意 UI，用來提高受保護的系統管理員許可權。</span><span class="sxs-lookup"><span data-stu-id="42a71-114">The Consent UI, used to elevate Protected administrators to have administrative privileges.</span></span>

![<span data-ttu-id="42a71-115">要求密碼之訊息的螢幕擷取畫面</span><span class="sxs-lookup"><span data-stu-id="42a71-115">screen shot of message asking for password</span></span> ](images/winenv-uac-image2.png)

<span data-ttu-id="42a71-116">認證 UI，用來提升標準使用者的許可權。</span><span class="sxs-lookup"><span data-stu-id="42a71-116">The Credential UI, used to elevate Standard users.</span></span>

<span data-ttu-id="42a71-117">UAC 提供下列優點：</span><span class="sxs-lookup"><span data-stu-id="42a71-117">UAC provides the following benefits:</span></span>

-   <span data-ttu-id="42a71-118">它可減少以較高許可權執行的程式數目，因此有助於防止使用者不小心變更其系統設定，並協助防止「惡意程式碼」取得全系統的存取權。</span><span class="sxs-lookup"><span data-stu-id="42a71-118">It reduces the number of programs that run with elevated privileges, therefore helping to prevent users from accidentally changing their system settings, and helping to prevent "malware" from gaining system-wide access.</span></span> <span data-ttu-id="42a71-119">當您拒絕提高許可權時，惡意程式碼只會影響目前使用者的資料。</span><span class="sxs-lookup"><span data-stu-id="42a71-119">When elevation is denied, malware is only able to affect the current user's data.</span></span> <span data-ttu-id="42a71-120">如果沒有提高許可權，惡意程式碼就無法進行全系統的變更或影響其他使用者。</span><span class="sxs-lookup"><span data-stu-id="42a71-120">Without elevation, malware can't make system-wide changes or affect other users.</span></span>
-   <span data-ttu-id="42a71-121">針對 [受控環境](glossary.md)，設計完善的 UAC 體驗讓使用者在以標準使用者的身份執行時，可以藉由移除不必要的限制來提高生產力。</span><span class="sxs-lookup"><span data-stu-id="42a71-121">For [managed environments](glossary.md), well designed UAC experiences allow users to be more productive when running as Standard users by removing unnecessary restrictions.</span></span>
-   <span data-ttu-id="42a71-122">它讓標準使用者可以要求系統管理員授與他們在其目前會話中執行系統管理工作的許可權。</span><span class="sxs-lookup"><span data-stu-id="42a71-122">It gives Standard users the ability to ask administrators to give them permission to perform administrative tasks within their current session.</span></span>
-   <span data-ttu-id="42a71-123">針對家用環境，它能讓您更妥善掌控全系統的變更，包括已安裝的軟體。</span><span class="sxs-lookup"><span data-stu-id="42a71-123">For home environments, it enables better parental control over system-wide changes, including what software is installed.</span></span>

<span data-ttu-id="42a71-124">**開發人員：** 如需瞭解執行資訊，請參閱重新 [設計您的 UI 以獲得 UAC 相容性](/previous-versions/bb756990(v=msdn.10))。</span><span class="sxs-lookup"><span data-stu-id="42a71-124">**Developers:** For implementation information, see [Redesign Your UI for UAC Compatibility](/previous-versions/bb756990(v=msdn.10)).</span></span>

<span data-ttu-id="42a71-125">在 Windows Vista 中，受保護的系統管理員可以選擇收到所有系統變更或無的通知。</span><span class="sxs-lookup"><span data-stu-id="42a71-125">In Windows Vista, Protected administrators can choose to be notified about all system changes or none.</span></span> <span data-ttu-id="42a71-126">UAC 預設設定是要通知所有變更，不論其來源為何。</span><span class="sxs-lookup"><span data-stu-id="42a71-126">The UAC default setting is to notify about all changes, no matter what their origin.</span></span> <span data-ttu-id="42a71-127">當您收到通知時，您的桌面會變成暗灰色，而且您必須在 UAC 對話方塊中核准或拒絕要求，才能在電腦上進行任何其他動作。</span><span class="sxs-lookup"><span data-stu-id="42a71-127">When you're notified, your desktop will be dimmed, and you must either approve or deny the request in the UAC dialog box before you can do anything else on your computer.</span></span> <span data-ttu-id="42a71-128">您的桌面變暗，稱為 [安全桌面](glossary.md) ，因為其他程式在暗灰色時無法執行。</span><span class="sxs-lookup"><span data-stu-id="42a71-128">The dimming of your desktop is referred to as the [secure desktop](glossary.md) because other programs can't run while it's dimmed.</span></span>

<span data-ttu-id="42a71-129">除了 Windows Vista 中的兩者之外，Windows 7 還引進了兩個受保護系統管理員的中繼 UAC 設定。</span><span class="sxs-lookup"><span data-stu-id="42a71-129">Windows 7 introduces two intermediate UAC settings for Protected administrators, in addition to the two from Windows Vista.</span></span> <span data-ttu-id="42a71-130">第一個是要在程式進行變更時通知使用者，讓系統管理員在進行變更時自動提升許可權。</span><span class="sxs-lookup"><span data-stu-id="42a71-130">The first is to notify users only when a program is making the change, so administrators are automatically elevated when they make a change themselves.</span></span> <span data-ttu-id="42a71-131">這是 Windows 7 中的 UAC 預設設定，也會使用安全桌面。</span><span class="sxs-lookup"><span data-stu-id="42a71-131">This is the UAC default setting in Windows 7, and it also makes use of the secure desktop.</span></span>

<span data-ttu-id="42a71-132">Windows 7 中的第二個中繼設定與第一個設定相同，差別在於它不會使用安全桌面。</span><span class="sxs-lookup"><span data-stu-id="42a71-132">The second intermediate setting in Windows 7 is the same as the first except that it doesn't use the secure desktop.</span></span>

![<span data-ttu-id="42a71-133">windows 7 中四個 uac 設定的螢幕擷取畫面</span><span class="sxs-lookup"><span data-stu-id="42a71-133">screen shot of four uac settings in windows 7</span></span> ](images/winenv-uac-image3.png)

<span data-ttu-id="42a71-134">Windows 7 引進兩個中繼 UAC 設定。</span><span class="sxs-lookup"><span data-stu-id="42a71-134">Windows 7 introduces two intermediate UAC settings.</span></span>

<span data-ttu-id="42a71-135">**注意：** 與撰寫程式 [代碼以支援使用者帳戶控制](/previous-versions/aa905330(v=msdn.10)) 相關的指導方針會在個別的文章中顯示。</span><span class="sxs-lookup"><span data-stu-id="42a71-135">**Note:** Guidelines related to writing [code to support User Account Control](/previous-versions/aa905330(v=msdn.10)) are presented in a separate article.</span></span>

## <a name="design-concepts"></a><span data-ttu-id="42a71-136">設計概念</span><span class="sxs-lookup"><span data-stu-id="42a71-136">Design concepts</span></span>

<span data-ttu-id="42a71-137">**目標**</span><span class="sxs-lookup"><span data-stu-id="42a71-137">**Goals**</span></span>

<span data-ttu-id="42a71-138">設計完善的使用者帳戶控制體驗具有下列目標：</span><span class="sxs-lookup"><span data-stu-id="42a71-138">A well designed User Account Control experience has the following goals:</span></span>

-   <span data-ttu-id="42a71-139">**消除不必要的提高許可權。**</span><span class="sxs-lookup"><span data-stu-id="42a71-139">**Eliminate unnecessary elevation.**</span></span> <span data-ttu-id="42a71-140">使用者只需要提升才能執行需要系統管理許可權的工作。</span><span class="sxs-lookup"><span data-stu-id="42a71-140">Users should have to elevate only to perform tasks that require administrative privileges.</span></span> <span data-ttu-id="42a71-141">所有其他工作都應設計成免除提高許可權的需求。</span><span class="sxs-lookup"><span data-stu-id="42a71-141">All other tasks should be designed to eliminate the need for elevation.</span></span> <span data-ttu-id="42a71-142">舊版軟體通常需要系統管理員許可權，方法是寫入 HKLM 或 HKCR 登錄區段，或是程式檔或 Windows 系統資料夾。</span><span class="sxs-lookup"><span data-stu-id="42a71-142">Often legacy software requires administrator privileges unnecessarily by writing to the HKLM or HKCR registry sections, or the Program Files or Windows System folders.</span></span>
-   <span data-ttu-id="42a71-143">**可預測。**</span><span class="sxs-lookup"><span data-stu-id="42a71-143">**Be predictable.**</span></span> <span data-ttu-id="42a71-144">標準使用者必須知道哪些工作需要系統管理員執行，或無法在受管理的環境中執行。</span><span class="sxs-lookup"><span data-stu-id="42a71-144">Standard users need to know which tasks require an administrator to perform or cannot be performed at all in managed environments.</span></span> <span data-ttu-id="42a71-145">系統管理員需要知道哪些工作需要提高許可權。</span><span class="sxs-lookup"><span data-stu-id="42a71-145">Administrators need to know which tasks require elevation.</span></span> <span data-ttu-id="42a71-146">如果他們無法精確地預測提高許可權的需求，則在不應的情況下，他們比較可能會同意系統管理工作。</span><span class="sxs-lookup"><span data-stu-id="42a71-146">If they can't predict the need for elevation accurately, they are more likely to give consent for administrative tasks when they shouldn't.</span></span>
-   <span data-ttu-id="42a71-147">**需要很簡單的工作。**</span><span class="sxs-lookup"><span data-stu-id="42a71-147">**Require minimal effort.**</span></span> <span data-ttu-id="42a71-148">需要系統管理許可權的工作應該設計為需要單一提升許可權。</span><span class="sxs-lookup"><span data-stu-id="42a71-148">Tasks that require administrative privileges should be designed to require a single elevation.</span></span> <span data-ttu-id="42a71-149">需要多次提升的工作很快就會變得很繁瑣。</span><span class="sxs-lookup"><span data-stu-id="42a71-149">Tasks that require multiple elevations quickly become tedious.</span></span>
-   <span data-ttu-id="42a71-150">**還原為最低許可權。**</span><span class="sxs-lookup"><span data-stu-id="42a71-150">**Revert to least privileges.**</span></span> <span data-ttu-id="42a71-151">一旦需要系統管理許可權的工作完成後，程式應還原為最低許可權狀態。</span><span class="sxs-lookup"><span data-stu-id="42a71-151">Once a task that requires administrative privileges is complete, the program should revert to the least privilege state.</span></span>

<span data-ttu-id="42a71-152">**提高許可權工作流程**</span><span class="sxs-lookup"><span data-stu-id="42a71-152">**Elevation task flow**</span></span>

<span data-ttu-id="42a71-153">當工作需要提高許可權時，它會執行下列步驟：</span><span class="sxs-lookup"><span data-stu-id="42a71-153">When a task requires elevation, it has the following steps:</span></span>

1.  <span data-ttu-id="42a71-154">**進入點。**</span><span class="sxs-lookup"><span data-stu-id="42a71-154">**Entry point.**</span></span> <span data-ttu-id="42a71-155">當 UAC 完全啟用時需要立即提高許可權的工作，會有以 UAC 防護標示的進入點。</span><span class="sxs-lookup"><span data-stu-id="42a71-155">Tasks that require immediate elevation when UAC is fully enabled have entry points marked with the UAC shield.</span></span> <span data-ttu-id="42a71-156">在這種情況下，使用者應該會在按下這類命令之後立即看到提高許可權的 UI，而且當他們從沒有防護罩的工作看到提高許可權的 UI 時，應該要特別小心。</span><span class="sxs-lookup"><span data-stu-id="42a71-156">In this case, users should expect to see an Elevation UI immediately after clicking such commands and they should be extra cautious when they see Elevation UI from tasks that don't have a shield.</span></span>

    ![<span data-ttu-id="42a71-157">uac 盾牌圖示及其標籤的螢幕擷取畫面</span><span class="sxs-lookup"><span data-stu-id="42a71-157">screen shot of uac shield icons and their labels</span></span> ](images/winenv-uac-image4.png)

    <span data-ttu-id="42a71-158">在此範例中，[家長監護] 和 [使用者帳戶] 控制台專案需要提高許可權。</span><span class="sxs-lookup"><span data-stu-id="42a71-158">In this example, the parental control and user accounts control panel items require elevation.</span></span>

    <span data-ttu-id="42a71-159">當 UAC 已部分啟用或完全關閉時，仍會顯示 UAC 防護，以指出工作牽涉到系統層級變更，因此需要提高許可權，即使使用者可能看不到提高許可權的 UI 也是如此。</span><span class="sxs-lookup"><span data-stu-id="42a71-159">When UAC is partially enabled or turned off completely, the UAC shield is still displayed to indicate that the task involves system-level changes and therefore requires elevation, even if the user might not see Elevation UI.</span></span> <span data-ttu-id="42a71-160">一律針對需要提高許可權的工作顯示 UAC 防護，讓 UI 保持簡單且可預測。</span><span class="sxs-lookup"><span data-stu-id="42a71-160">Always displaying the UAC shield for tasks that require elevation keeps the UI simple and predictable.</span></span>

2.  <span data-ttu-id="42a71-161">**海拔。**</span><span class="sxs-lookup"><span data-stu-id="42a71-161">**Elevation.**</span></span> <span data-ttu-id="42a71-162">針對受保護的系統管理員，此工作會使用同意 UI 要求同意。</span><span class="sxs-lookup"><span data-stu-id="42a71-162">For Protected Administrators, the task requests consent using the Consent UI.</span></span> <span data-ttu-id="42a71-163">針對標準使用者，此工作會使用認證 UI 要求系統管理員認證。</span><span class="sxs-lookup"><span data-stu-id="42a71-163">For Standard users, the task requests administrator credentials using the Credential UI.</span></span>

    ![<span data-ttu-id="42a71-164">兩種許可權類型的螢幕擷取畫面</span><span class="sxs-lookup"><span data-stu-id="42a71-164">screen shot of two types of elevation</span></span> ](images/winenv-uac-image5.png)

    <span data-ttu-id="42a71-165">這些範例會顯示認證 UI 和同意 UI。</span><span class="sxs-lookup"><span data-stu-id="42a71-165">These examples show the Credential UI and the Consent UI.</span></span>

3.  <span data-ttu-id="42a71-166">**個別提高許可權的進程。**</span><span class="sxs-lookup"><span data-stu-id="42a71-166">**Separate elevated process.**</span></span> <span data-ttu-id="42a71-167">就內部而言，會建立新的提高許可權程式來執行工作。</span><span class="sxs-lookup"><span data-stu-id="42a71-167">Internally, a new elevated process is created to perform the task.</span></span>
4.  <span data-ttu-id="42a71-168">**還原為最低許可權。**</span><span class="sxs-lookup"><span data-stu-id="42a71-168">**Revert to least privilege.**</span></span> <span data-ttu-id="42a71-169">如有必要，請還原為最低許可權，以完成任何不需要提高許可權的步驟。</span><span class="sxs-lookup"><span data-stu-id="42a71-169">If necessary, revert to least privilege to complete any steps that don't require elevation.</span></span>

<span data-ttu-id="42a71-170">請注意，工作不會「記住」提高許可權的狀態。</span><span class="sxs-lookup"><span data-stu-id="42a71-170">Note that tasks don't "remember" elevated states.</span></span> <span data-ttu-id="42a71-171">例如，如果使用者在嚮導的提高許可權進入點上來回流覽，則使用者必須每次都提升許可權。</span><span class="sxs-lookup"><span data-stu-id="42a71-171">For example, if the user navigates back and forth over an elevation entry point in a wizard, the user must elevate each time.</span></span>

## <a name="usage-patterns"></a><span data-ttu-id="42a71-172">使用模式</span><span class="sxs-lookup"><span data-stu-id="42a71-172">Usage patterns</span></span>

<span data-ttu-id="42a71-173">「使用者帳戶控制」有數種使用模式 (依喜好) 順序排列：</span><span class="sxs-lookup"><span data-stu-id="42a71-173">User Account Control has several usage patterns (in order of preference):</span></span>

1.  <span data-ttu-id="42a71-174">**適用于標準使用者。**</span><span class="sxs-lookup"><span data-stu-id="42a71-174">**Work for Standard users.**</span></span> <span data-ttu-id="42a71-175">將其範圍限制為目前的使用者，以設計所有使用者的功能。</span><span class="sxs-lookup"><span data-stu-id="42a71-175">Design the feature for all users by limiting its scope to the current user.</span></span> <span data-ttu-id="42a71-176">藉由將設定限制為目前使用者 (而非全系統) ，您就不需要完全提高提高許可權的 UI，並讓使用者完成工作。</span><span class="sxs-lookup"><span data-stu-id="42a71-176">By limiting settings to the current user (as opposed to system-wide), you eliminate the need for an Elevation UI entirely, and enable users to complete the task.</span></span>

    <span data-ttu-id="42a71-177">**不正確：**</span><span class="sxs-lookup"><span data-stu-id="42a71-177">**Incorrect:**</span></span>

    ![<span data-ttu-id="42a71-178">訊息的螢幕擷取畫面：您沒有許可權</span><span class="sxs-lookup"><span data-stu-id="42a71-178">screen shot of message: you do not have privilege</span></span> ](images/winenv-uac-image6.png)

    <span data-ttu-id="42a71-179">在此範例中，Windows XP 使用者必須具有系統管理許可權，才能查看或變更目前的時區。</span><span class="sxs-lookup"><span data-stu-id="42a71-179">In this example, Windows XP users had to have administrative privileges to view or change the current time zone.</span></span>

    <span data-ttu-id="42a71-180">**正確：**</span><span class="sxs-lookup"><span data-stu-id="42a71-180">**Correct:**</span></span>

    ![<span data-ttu-id="42a71-181">[日期和時間] 對話方塊的螢幕擷取畫面</span><span class="sxs-lookup"><span data-stu-id="42a71-181">screen shot of date and time dialog box</span></span> ](images/winenv-uac-image7.png)

    <span data-ttu-id="42a71-182">在此範例中，Windows 7 和 Windows Vista 中的時區功能已經過重新設計，可供所有使用者使用。</span><span class="sxs-lookup"><span data-stu-id="42a71-182">In this example, the time zone feature was redesigned in Windows 7 and Windows Vista to work for all users.</span></span>

2.  <span data-ttu-id="42a71-183">**為標準使用者和系統管理員提供個別的 UI 元素。**</span><span class="sxs-lookup"><span data-stu-id="42a71-183">**Have separate UI elements for Standard users and administrators.**</span></span> <span data-ttu-id="42a71-184">明確地分隔標準使用者工作與系統管理工作。</span><span class="sxs-lookup"><span data-stu-id="42a71-184">Clearly separate Standard user tasks from administrative tasks.</span></span> <span data-ttu-id="42a71-185">讓所有使用者都能存取有用的唯讀資訊。</span><span class="sxs-lookup"><span data-stu-id="42a71-185">Give all users access to useful read-only information.</span></span> <span data-ttu-id="42a71-186">使用 UAC 防護來清楚識別系統管理工作。</span><span class="sxs-lookup"><span data-stu-id="42a71-186">Clearly identify administrative tasks with the UAC shield.</span></span>

    ![<span data-ttu-id="42a71-187">uac 盾牌的圖形，顯示需要提高許可權</span><span class="sxs-lookup"><span data-stu-id="42a71-187">graphic of uac shield showing elevation required</span></span> ](images/winenv-uac-image8.png)

    <span data-ttu-id="42a71-188">在此範例中，[系統控制台] 專案會對所有使用者顯示其狀態，但變更全系統設定需要提高許可權。</span><span class="sxs-lookup"><span data-stu-id="42a71-188">In this example, the System control panel item shows its state to all users, but changing the system-wide settings requires elevation.</span></span>

3.  <span data-ttu-id="42a71-189">**允許標準使用者嘗試工作，並在失敗時提升許可權。**</span><span class="sxs-lookup"><span data-stu-id="42a71-189">**Allow Standard users to attempt task, and to elevate on failure.**</span></span> <span data-ttu-id="42a71-190">如果標準使用者可以查看資訊，而且可以進行一些變更，而不需要提高許可權，請允許他們存取 UI，而且只有在工作失敗時才會提升許可權。</span><span class="sxs-lookup"><span data-stu-id="42a71-190">If Standard users can view the information and are able to make some changes without elevation, allow them to access the UI and have them elevate only if the task fails.</span></span> <span data-ttu-id="42a71-191">當標準使用者的存取權有限時（例如，在 Windows 檔案總管中具有自己檔案的屬性），這種方法很適合。</span><span class="sxs-lookup"><span data-stu-id="42a71-191">This approach is suitable when Standard users have limited access, such as with properties of their own files in Windows Explorer.</span></span> <span data-ttu-id="42a71-192">它也適用于主控台混合式中樞頁面上的設定。</span><span class="sxs-lookup"><span data-stu-id="42a71-192">It is also suitable for settings on Control Panel hybrid hub pages.</span></span>

    ![<span data-ttu-id="42a71-193">[拒絕存取] 訊息的螢幕擷取畫面</span><span class="sxs-lookup"><span data-stu-id="42a71-193">screen shot of access is denied message</span></span> ](images/winenv-uac-image9.png)

    <span data-ttu-id="42a71-194">在此範例中，使用者嘗試變更程式檔案屬性，但沒有足夠的許可權。</span><span class="sxs-lookup"><span data-stu-id="42a71-194">In this example, the user attempted to change program file properties but didn't have sufficient privileges.</span></span> <span data-ttu-id="42a71-195">使用者可以提升許可權，然後再試一次。</span><span class="sxs-lookup"><span data-stu-id="42a71-195">The user can elevate and try again.</span></span>

4.  <span data-ttu-id="42a71-196">**僅適用于系統管理員。**</span><span class="sxs-lookup"><span data-stu-id="42a71-196">**Work for administrators only.**</span></span> <span data-ttu-id="42a71-197">這種方法只適用于系統管理員功能和程式！</span><span class="sxs-lookup"><span data-stu-id="42a71-197">Use this approach only for administrator features and programs!</span></span> <span data-ttu-id="42a71-198">如果功能僅供系統 (管理員使用，且沒有適用于標準使用者) 的導覽路徑或有用的唯讀資訊，您可以在顯示任何 UI 之前，在進入點提示輸入系統管理員認證。</span><span class="sxs-lookup"><span data-stu-id="42a71-198">If a feature is intended only for administrators (and has no navigation paths or useful read-only information for Standard users), you can prompt for administrator credentials at the entry point before showing any UI.</span></span> <span data-ttu-id="42a71-199">當所有路徑都需要系統管理許可權時，請使用此方法來處理冗長的嚮導和 [分頁流程](glossary.md) 。</span><span class="sxs-lookup"><span data-stu-id="42a71-199">Use this approach for lengthy wizards and [page flows](glossary.md) when all paths require administrative privileges.</span></span>

    <span data-ttu-id="42a71-200">如果整個程式僅供系統管理員，請將它標示為提示輸入系統管理員認證，才能啟動。</span><span class="sxs-lookup"><span data-stu-id="42a71-200">If the entire program is for administrators only, mark it to prompt for administrator credentials in order to launch.</span></span> <span data-ttu-id="42a71-201">Windows 會顯示具有 UAC 防護覆迭的程式圖示。</span><span class="sxs-lookup"><span data-stu-id="42a71-201">Windows displays such program icons with the UAC shield overlay.</span></span>

    ![<span data-ttu-id="42a71-202">windows 標誌和 uac 防護的螢幕擷取畫面</span><span class="sxs-lookup"><span data-stu-id="42a71-202">screen shot of windows logo and uac shield overlay</span></span> ](images/winenv-uac-image10.png)

    <span data-ttu-id="42a71-203">在此範例中，程式需要系統管理許可權才能啟動。</span><span class="sxs-lookup"><span data-stu-id="42a71-203">In this example, the program requires administrative privileges to launch.</span></span>

## <a name="guidelines"></a><span data-ttu-id="42a71-204">指導方針</span><span class="sxs-lookup"><span data-stu-id="42a71-204">Guidelines</span></span>

### <a name="uac-shield-icon"></a><span data-ttu-id="42a71-205">UAC 防護圖示</span><span class="sxs-lookup"><span data-stu-id="42a71-205">UAC shield icon</span></span>

-   <span data-ttu-id="42a71-206">**使用 uac 防護顯示控制項，指出當 uac 完全啟用時，工作需要立即提高許可權，** 即使 uac 目前未完全啟用也是如此。</span><span class="sxs-lookup"><span data-stu-id="42a71-206">**Display controls with the UAC shield to indicate that the task requires immediate elevation when UAC is fully enabled,** even if UAC isn't currently fully enabled.</span></span> <span data-ttu-id="42a71-207">如果 wizard 和 [頁面流程](glossary.md) 的所有路徑都需要提高許可權，請在工作的進入點顯示 UAC 盾牌。</span><span class="sxs-lookup"><span data-stu-id="42a71-207">If all paths of a wizard and [page flow](glossary.md) require elevation, display the UAC shield at the task's entry point.</span></span> <span data-ttu-id="42a71-208">UAC 防護的適當使用可協助使用者在需要提高許可權時進行預測。</span><span class="sxs-lookup"><span data-stu-id="42a71-208">Proper use of the UAC shield helps users predict when elevation is required.</span></span>
-   <span data-ttu-id="42a71-209">**如果您的程式支援多個版本的 Windows，如果至少有一個版本需要提高許可權，就會顯示 UAC 防護程式。**</span><span class="sxs-lookup"><span data-stu-id="42a71-209">**If your program supports multiple versions of Windows, display the UAC shield if at least one version requires elevation.**</span></span> <span data-ttu-id="42a71-210">由於 Windows XP 不需要提高許可權，因此如果您可以一致且不會危害效能，請考慮移除 Windows XP 的 UAC 防護。</span><span class="sxs-lookup"><span data-stu-id="42a71-210">Because Windows XP never requires elevation, consider removing the UAC shields for Windows XP if you can do so consistently and without harming performance.</span></span>
-   <span data-ttu-id="42a71-211">**請勿在大部分內容中都不需要提高許可權的工作上顯示 UAC 防護板。**</span><span class="sxs-lookup"><span data-stu-id="42a71-211">**Don't display the UAC shield for tasks that don't require elevation in most contexts.**</span></span> <span data-ttu-id="42a71-212">因為這種方法有時會造成誤導，所以慣用的方法是改為使用適當受防護的內容相關命令。</span><span class="sxs-lookup"><span data-stu-id="42a71-212">Because this approach will sometimes be misleading, the preferred approach is to use a properly shielded contextual command instead.</span></span>

    ![<span data-ttu-id="42a71-213">windows explorer 中相片檔案的螢幕擷取畫面</span><span class="sxs-lookup"><span data-stu-id="42a71-213">screen shot of photo files in windows explorer</span></span> ](images/winenv-uac-image11.png)

    <span data-ttu-id="42a71-214">因為 [新增資料夾] 命令只會在系統資料夾中使用時才需要提高許可權，所以不會顯示 UAC 盾牌。</span><span class="sxs-lookup"><span data-stu-id="42a71-214">Because the New folder command requires elevation only when used in system folders, it is displayed without a UAC shield.</span></span>

-   <span data-ttu-id="42a71-215">UAC 防護可以顯示在下列控制項上：</span><span class="sxs-lookup"><span data-stu-id="42a71-215">The UAC shield can be displayed on the following controls:</span></span>

    <span data-ttu-id="42a71-216">**命令按鈕：**</span><span class="sxs-lookup"><span data-stu-id="42a71-216">**Command buttons:**</span></span>

    ![<span data-ttu-id="42a71-217">具有 uac 防護圖示的命令按鈕螢幕擷取畫面</span><span class="sxs-lookup"><span data-stu-id="42a71-217">screen shot of command button with uac shield icon</span></span> ](images/winenv-uac-image12.png)

    <span data-ttu-id="42a71-218">需要立即提高許可權的命令按鈕。</span><span class="sxs-lookup"><span data-stu-id="42a71-218">A command button that requires immediate elevation.</span></span>

    <span data-ttu-id="42a71-219">**命令連結：**</span><span class="sxs-lookup"><span data-stu-id="42a71-219">**Command links:**</span></span>

    ![<span data-ttu-id="42a71-220">具有 uac 防護圖示的命令連結螢幕擷取畫面</span><span class="sxs-lookup"><span data-stu-id="42a71-220">screen shot of command link with uac shield icon</span></span> ](images/winenv-uac-image13.png)

    <span data-ttu-id="42a71-221">需要立即提高許可權的命令連結。</span><span class="sxs-lookup"><span data-stu-id="42a71-221">A command link that requires immediate elevation.</span></span>

    <span data-ttu-id="42a71-222">**連結：**</span><span class="sxs-lookup"><span data-stu-id="42a71-222">**Links:**</span></span>

    ![<span data-ttu-id="42a71-223">變更帳戶連結與 uac 防護板的螢幕擷取畫面</span><span class="sxs-lookup"><span data-stu-id="42a71-223">screen shot of change account link with uac shield</span></span> ](images/winenv-uac-image14.png)

    <span data-ttu-id="42a71-224">需要立即提高許可權的連結。</span><span class="sxs-lookup"><span data-stu-id="42a71-224">A link that requires immediate elevation.</span></span>

    <span data-ttu-id="42a71-225">**功能表：**</span><span class="sxs-lookup"><span data-stu-id="42a71-225">**Menus:**</span></span>

    ![<span data-ttu-id="42a71-226">具有 uac 防護功能表的螢幕擷取畫面</span><span class="sxs-lookup"><span data-stu-id="42a71-226">screen shot of menu with uac shield</span></span> ](images/winenv-uac-image15.png)

    <span data-ttu-id="42a71-227">需要立即提高許可權的下拉式功能表。</span><span class="sxs-lookup"><span data-stu-id="42a71-227">A drop-down menu that requires immediate elevation.</span></span>

-   <span data-ttu-id="42a71-228">因為工作不記得提高的狀態，請 **不要變更 UAC 防護以反映狀態。**</span><span class="sxs-lookup"><span data-stu-id="42a71-228">Because tasks don't remember elevated states, **don't change the UAC shield to reflect state.**</span></span>
-   <span data-ttu-id="42a71-229">**即使已關閉使用者帳戶控制或使用者使用內建的系統管理員帳戶，也會顯示 UAC 防護程式。**</span><span class="sxs-lookup"><span data-stu-id="42a71-229">**Display the UAC shield even if User Account Control has been turned off or the user is using the Built-in Administrator account.**</span></span> <span data-ttu-id="42a71-230">以一致的方式顯示 UAC 防護程式更容易進行程式設計，並且為使用者提供工作本質的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="42a71-230">Consistently displaying the UAC shield is easier to program, and provides users with information about the nature of the task.</span></span>

### <a name="elevation"></a><span data-ttu-id="42a71-231">Elevation</span><span class="sxs-lookup"><span data-stu-id="42a71-231">Elevation</span></span>

-   <span data-ttu-id="42a71-232">**可能的話，請在不提高許可權的情況下，由標準使用者執行設計工作。**</span><span class="sxs-lookup"><span data-stu-id="42a71-232">**Whenever possible, design tasks to be performed by Standard users without elevation.**</span></span> <span data-ttu-id="42a71-233">讓所有使用者都能存取有用的唯讀資訊。</span><span class="sxs-lookup"><span data-stu-id="42a71-233">Give all users access to useful read-only information.</span></span>
-   <span data-ttu-id="42a71-234">**針對每個工作（而不是每個設定）來提高許可權。**</span><span class="sxs-lookup"><span data-stu-id="42a71-234">**Elevate on a per task basis, not on a per setting basis.**</span></span> <span data-ttu-id="42a71-235">請勿在單一頁面或對話方塊中，以系統管理設定來混合標準使用者設定。</span><span class="sxs-lookup"><span data-stu-id="42a71-235">Don't mix Standard user settings with administrative settings in a single page or dialog box.</span></span> <span data-ttu-id="42a71-236">例如，如果標準使用者可以變更部分（而非全部）設定，請將這些設定分割為個別的 UI 介面。</span><span class="sxs-lookup"><span data-stu-id="42a71-236">For example, if Standard users can change some but not all settings, split those settings out as a separate UI surface.</span></span>

    <span data-ttu-id="42a71-237">**不正確：**</span><span class="sxs-lookup"><span data-stu-id="42a71-237">**Incorrect:**</span></span>

    ![<span data-ttu-id="42a71-238">[日期和時間設定] 對話方塊的螢幕擷取畫面</span><span class="sxs-lookup"><span data-stu-id="42a71-238">screen shot of date and time settings dialog box</span></span> ](images/winenv-uac-image16.png)

    <span data-ttu-id="42a71-239">在此範例中，標準使用者設定與系統管理設定不正確地混合。</span><span class="sxs-lookup"><span data-stu-id="42a71-239">In this example, Standard user settings are incorrectly mixed with administrative settings.</span></span>

    <span data-ttu-id="42a71-240">**正確：**</span><span class="sxs-lookup"><span data-stu-id="42a71-240">**Correct:**</span></span>

    ![<span data-ttu-id="42a71-241">相同對話方塊沒有 uac 防護的螢幕擷取畫面</span><span class="sxs-lookup"><span data-stu-id="42a71-241">screen shot of same dialog box without uac shields</span></span> ](images/winenv-uac-image17.png)

    <span data-ttu-id="42a71-242">在此範例中，變更日期和時間的設定位於個別的對話方塊中，僅適用于系統管理員。</span><span class="sxs-lookup"><span data-stu-id="42a71-242">In this example, the settings for changing the date and time are in a separate dialog box, available only to administrators.</span></span> <span data-ttu-id="42a71-243">時區設定可供標準使用者使用，且不會與系統管理設定混合。</span><span class="sxs-lookup"><span data-stu-id="42a71-243">The time zone settings are available to Standard users, and are not mixed with administrative settings.</span></span>

-   <span data-ttu-id="42a71-244">**決定是否應該顯示或停用控制項時，請勿考慮需要提高許可權。**</span><span class="sxs-lookup"><span data-stu-id="42a71-244">**Don't consider the need to elevate when determining if a control should be displayed or disabled.**</span></span> <span data-ttu-id="42a71-245">原因：</span><span class="sxs-lookup"><span data-stu-id="42a71-245">This is because:</span></span>
    -   <span data-ttu-id="42a71-246">在未受管理的環境中，假設標準使用者可以藉由要求系統管理員來提升許可權。</span><span class="sxs-lookup"><span data-stu-id="42a71-246">In unmanaged environments, assume that Standard users could elevate by asking an administrator.</span></span> <span data-ttu-id="42a71-247">停用需要提高許可權的控制項，會使使用者無法讓系統管理員提升許可權。</span><span class="sxs-lookup"><span data-stu-id="42a71-247">Disabling controls that require elevation would prevent users from having administrators elevate.</span></span>
    -   <span data-ttu-id="42a71-248">在受控環境中，假設標準使用者完全無法提升許可權。</span><span class="sxs-lookup"><span data-stu-id="42a71-248">In managed environments, assume that Standard users can't elevate at all.</span></span> <span data-ttu-id="42a71-249">移除需要提高許可權的控制項，可防止使用者知道何時停止查看。</span><span class="sxs-lookup"><span data-stu-id="42a71-249">Removing controls that require elevation would prevent users from knowing when to stop looking.</span></span>
-   <span data-ttu-id="42a71-250">**若要排除不必要的提高許可權：**</span><span class="sxs-lookup"><span data-stu-id="42a71-250">**To eliminate unnecessary elevation:**</span></span>
    -   <span data-ttu-id="42a71-251">**如果工作可能需要提高許可權，請盡可能延遲提升。**</span><span class="sxs-lookup"><span data-stu-id="42a71-251">**If a task might require elevation, elevate as late as possible.**</span></span> <span data-ttu-id="42a71-252">如果工作需要 [確認](mess-confirm.md)，請在使用者確認之後才顯示提高許可權的 UI。</span><span class="sxs-lookup"><span data-stu-id="42a71-252">If a task needs a [confirmation](mess-confirm.md), display the elevation UI only after the user has confirmed.</span></span> <span data-ttu-id="42a71-253">如果工作一律需要提高許可權，請在其進入點提升許可權。</span><span class="sxs-lookup"><span data-stu-id="42a71-253">If a task always requires elevation, elevate at its entry point.</span></span>
    -   <span data-ttu-id="42a71-254">**提高許可權之後，請保持提高許可權，直到不再需要較高的許可權為止。**</span><span class="sxs-lookup"><span data-stu-id="42a71-254">**Once elevated, stay elevated until elevated privileges are no longer necessary.**</span></span> <span data-ttu-id="42a71-255">使用者不應該需要提高多次來執行單一工作。</span><span class="sxs-lookup"><span data-stu-id="42a71-255">Users shouldn't have to elevate multiple times to perform a single task.</span></span>
    -   <span data-ttu-id="42a71-256">**如果使用者必須提升以進行變更，但選擇不進行任何變更，請將正面的認可按鈕保持在啟用狀態，但將認可處理為取消。**</span><span class="sxs-lookup"><span data-stu-id="42a71-256">**If users must elevate to make a change but choose not to make any changes, leave the positive commit buttons enabled but handle the commit as a cancel.**</span></span> <span data-ttu-id="42a71-257">這麼做可讓使用者不需要提高許可權就能關閉視窗。</span><span class="sxs-lookup"><span data-stu-id="42a71-257">Doing so eliminates users having to elevate just to close a window.</span></span>
    -   <span data-ttu-id="42a71-258">**不正確：**</span><span class="sxs-lookup"><span data-stu-id="42a71-258">**Incorrect:**</span></span>
    -   ![<span data-ttu-id="42a71-259">視窗的螢幕擷取畫面，其中只有一個作用中的按鈕</span><span class="sxs-lookup"><span data-stu-id="42a71-259">screen shot of window with only one button active</span></span> ](images/winenv-uac-image18.png)
    -   <span data-ttu-id="42a71-260">在此範例中，[儲存變更] 按鈕會停用，以避免不必要的提高許可權，但會在使用者變更選取專案時變成啟用狀態。</span><span class="sxs-lookup"><span data-stu-id="42a71-260">In this example, the Save Changes button is disabled to avoid an unnecessary elevation, but becomes enabled when users change the selection.</span></span> <span data-ttu-id="42a71-261">不過，已停用的 [認可] 按鈕讓使用者看起來好像沒有選擇。</span><span class="sxs-lookup"><span data-stu-id="42a71-261">However, the disabled commit button makes it look like users really don't have a choice.</span></span>
-   <span data-ttu-id="42a71-262">**當工作失敗時，不會顯示錯誤訊息，因為使用者選擇不提升許可權。**</span><span class="sxs-lookup"><span data-stu-id="42a71-262">**Don't display an error message when tasks fail because users chose not to elevate.**</span></span> <span data-ttu-id="42a71-263">假設使用者刻意選擇不繼續，因此不會將這種情況視為錯誤。</span><span class="sxs-lookup"><span data-stu-id="42a71-263">Assume that users intentionally chose not to proceed, so they won't regard this situation as an error.</span></span>

    <span data-ttu-id="42a71-264">**不正確：**</span><span class="sxs-lookup"><span data-stu-id="42a71-264">**Incorrect:**</span></span>

    ![<span data-ttu-id="42a71-265">訊息的螢幕擷取畫面： fabrikam restore 無法執行</span><span class="sxs-lookup"><span data-stu-id="42a71-265">screen shot of message: fabrikam restore can't run</span></span> ](images/winenv-uac-image19.png)

    <span data-ttu-id="42a71-266">在此範例中，如果使用者決定不提升許可權，Fabrikam 還原會錯誤地提供錯誤訊息。</span><span class="sxs-lookup"><span data-stu-id="42a71-266">In this example, Fabrikam Restore incorrectly gives an error message when the user decides to not elevate.</span></span>

-   <span data-ttu-id="42a71-267">**請勿顯示警告，以說明使用者可能需要提高其許可權來執行工作。**</span><span class="sxs-lookup"><span data-stu-id="42a71-267">**Don't display warnings to explain that users might need to elevate their privileges to perform tasks.**</span></span> <span data-ttu-id="42a71-268">讓使用者自行探索此事實。</span><span class="sxs-lookup"><span data-stu-id="42a71-268">Let users discover this fact on their own.</span></span>
-   <span data-ttu-id="42a71-269">**根據下表顯示 UAC 防護和提高許可權的 UI：**</span><span class="sxs-lookup"><span data-stu-id="42a71-269">**Display the UAC shield and elevation UI based on the following table:**</span></span>

    |                       |                                                                                                                                                                  |                                                                                                                                                                                                                       |                                                                                                      |
    |-----------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------|
    | <span data-ttu-id="42a71-270">**Object**</span><span class="sxs-lookup"><span data-stu-id="42a71-270">**Object**</span></span>      | <span data-ttu-id="42a71-271">**情況**</span><span class="sxs-lookup"><span data-stu-id="42a71-271">**Circumstance**</span></span>                                                                                                                                                | <span data-ttu-id="42a71-272">**放置 UAC 防護的位置**</span><span class="sxs-lookup"><span data-stu-id="42a71-272">**Where to put UAC shield**</span></span>                                                                                                                                                                               | <span data-ttu-id="42a71-273">**提升時機**</span><span class="sxs-lookup"><span data-stu-id="42a71-273">**When to elevate**</span></span>                                                                            |
    | <span data-ttu-id="42a71-274">程式</span><span class="sxs-lookup"><span data-stu-id="42a71-274">Program</span></span><br/>    | <span data-ttu-id="42a71-275">整個程式只適用于系統管理員。</span><span class="sxs-lookup"><span data-stu-id="42a71-275">Entire program is for administrators only.</span></span><br/>                                                                                                            | ![<span data-ttu-id="42a71-276">windows 標誌和 uac 防護的螢幕擷取畫面</span><span class="sxs-lookup"><span data-stu-id="42a71-276">screen shot of windows logo and uac shield overlay</span></span> ](images/winenv-uac-image10.png)<br/> <span data-ttu-id="42a71-277">程式圖示上的 UAC 防護程式圖示。</span><span class="sxs-lookup"><span data-stu-id="42a71-277">UAC shield overlay on program icon.</span></span><br/>                                                                       | <span data-ttu-id="42a71-278">在啟動時顯示提高許可權的 UI。</span><span class="sxs-lookup"><span data-stu-id="42a71-278">Display elevation UI at launch.</span></span><br/>                                                           |
    | <span data-ttu-id="42a71-279">命令</span><span class="sxs-lookup"><span data-stu-id="42a71-279">Command</span></span><br/>    | <span data-ttu-id="42a71-280">整個命令僅適用于系統管理員。</span><span class="sxs-lookup"><span data-stu-id="42a71-280">Entire command is for administrators only.</span></span><br/>                                                                                                            | ![<span data-ttu-id="42a71-281">變更帳戶連結和 uac 防護的螢幕擷取畫面</span><span class="sxs-lookup"><span data-stu-id="42a71-281">screen shot of change account link and uac shield</span></span> ](images/winenv-uac-image14.png)<br/> <span data-ttu-id="42a71-282">命令按鈕或連結上的 UAC 盾牌。</span><span class="sxs-lookup"><span data-stu-id="42a71-282">UAC shield on command button or link.</span></span><br/>                                                                      | <span data-ttu-id="42a71-283">當按下命令按鈕或連結時，但在任何確認之後，顯示提高許可權的 UI。</span><span class="sxs-lookup"><span data-stu-id="42a71-283">Display elevation UI when command button or link is clicked, but after any confirmations.</span></span><br/> |
    | <span data-ttu-id="42a71-284">命令</span><span class="sxs-lookup"><span data-stu-id="42a71-284">Command</span></span><br/>    | <span data-ttu-id="42a71-285">命令會顯示適用于所有使用者的實用唯讀資訊，但變更需要系統管理許可權。</span><span class="sxs-lookup"><span data-stu-id="42a71-285">Command displays useful read-only information appropriate for all users, but changes require administrative privileges.</span></span><br/>                               | ![<span data-ttu-id="42a71-286">變更設定連結和 uac 防護的螢幕擷取畫面</span><span class="sxs-lookup"><span data-stu-id="42a71-286">screen shot of change settings link and uac shield</span></span> ](images/winenv-uac-image8.png)<br/> <span data-ttu-id="42a71-287">命令按鈕上的 UAC 防護或連結以進行變更。</span><span class="sxs-lookup"><span data-stu-id="42a71-287">UAC shield on command button or link to make changes.</span></span><br/>                                                      | <span data-ttu-id="42a71-288">當您按一下 [命令] 按鈕時，但在任何確認之後，顯示提高許可權的 UI。</span><span class="sxs-lookup"><span data-stu-id="42a71-288">Display elevation UI when command button is clicked, but after any confirmations.</span></span><br/>         |
    | <span data-ttu-id="42a71-289">命令</span><span class="sxs-lookup"><span data-stu-id="42a71-289">Command</span></span><br/>    | <span data-ttu-id="42a71-290">標準使用者可以查看資訊，而且可能會進行一些變更，而不需要提高許可權。</span><span class="sxs-lookup"><span data-stu-id="42a71-290">Standard users can view the information and possibly make some changes without elevation.</span></span> <span data-ttu-id="42a71-291">允許標準使用者嘗試，並在失敗時提升許可權。</span><span class="sxs-lookup"><span data-stu-id="42a71-291">allow standard users to attempt, and to elevate on failure.</span></span><br/> | ![<span data-ttu-id="42a71-292">[重試] 按鈕上 uac 圖示錯誤的螢幕擷取畫面</span><span class="sxs-lookup"><span data-stu-id="42a71-292">screen shot of error with uac icon on retry button</span></span> ](images/winenv-uac-image9.png)<br/> <span data-ttu-id="42a71-293">不要顯示命令的 UAC 防護程式，但如果命令失敗，則顯示為提高許可權進入點。</span><span class="sxs-lookup"><span data-stu-id="42a71-293">Don't show the UAC shield for the command, but show it for the elevation entry point if the command fails.</span></span><br/> | <span data-ttu-id="42a71-294">當使用者重試命令時顯示提高許可權的 UI。</span><span class="sxs-lookup"><span data-stu-id="42a71-294">Display elevation UI when user retries the command.</span></span><br/>                                       |
    | <span data-ttu-id="42a71-295">工作步驟</span><span class="sxs-lookup"><span data-stu-id="42a71-295">Task step</span></span><br/>  | <span data-ttu-id="42a71-296">所有後續步驟都需要提高許可權。</span><span class="sxs-lookup"><span data-stu-id="42a71-296">All subsequent steps require elevation.</span></span><br/>                                                                                                               | ![<span data-ttu-id="42a71-297">使用 uac 防護的下一個命令按鈕的螢幕擷取畫面</span><span class="sxs-lookup"><span data-stu-id="42a71-297">screen shot of next command button with uac shield</span></span> ](images/winenv-uac-image20.png)<br/> <span data-ttu-id="42a71-298">[下一步] 按鈕上的 UAC 盾牌 (或對等的) 。</span><span class="sxs-lookup"><span data-stu-id="42a71-298">UAC shield on Next button (or equivalent).</span></span><br/>                                                                | <span data-ttu-id="42a71-299">按一下 [下一步] 或 [其他認可] 按鈕時，顯示提高許可權的 UI。</span><span class="sxs-lookup"><span data-stu-id="42a71-299">Display elevation UI when Next or other commit button is clicked.</span></span><br/>                         |
    | <span data-ttu-id="42a71-300">工作步驟</span><span class="sxs-lookup"><span data-stu-id="42a71-300">Task step</span></span><br/>  | <span data-ttu-id="42a71-301">某些分支需要提高許可權。</span><span class="sxs-lookup"><span data-stu-id="42a71-301">Some branches require elevation.</span></span><br/>                                                                                                                      | ![<span data-ttu-id="42a71-302">命令連結與 uac 防護板的螢幕擷取畫面</span><span class="sxs-lookup"><span data-stu-id="42a71-302">screen shot of command link with uac shield</span></span> ](images/winenv-uac-image21.png)<br/> <span data-ttu-id="42a71-303">需要提高許可權的命令連結上有 UAC 防護。</span><span class="sxs-lookup"><span data-stu-id="42a71-303">UAC shield on command links that require elevation.</span></span><br/>                                                              | <span data-ttu-id="42a71-304">按一下具有 UAC 盾牌的命令連結時，顯示提高許可權的 UI。</span><span class="sxs-lookup"><span data-stu-id="42a71-304">Display elevation UI when command links with UAC shield are clicked.</span></span><br/>                      |

    

     

### <a name="elevation-ui"></a><span data-ttu-id="42a71-305">提高許可權 UI</span><span class="sxs-lookup"><span data-stu-id="42a71-305">Elevation UI</span></span>

-   <span data-ttu-id="42a71-306">**如果使用者提供的帳戶無效 (名稱或密碼) 或沒有系統管理員許可權，請只重新顯示認證 UI。**</span><span class="sxs-lookup"><span data-stu-id="42a71-306">**If the user provides an account that isn't valid (name or password) or doesn't have administrator privileges, just redisplay the Credential UI.**</span></span> <span data-ttu-id="42a71-307">不要顯示錯誤訊息。</span><span class="sxs-lookup"><span data-stu-id="42a71-307">Don't display an error message.</span></span>
-   <span data-ttu-id="42a71-308">**如果使用者取消認證 UI，請將使用者回到原始的 UI。**</span><span class="sxs-lookup"><span data-stu-id="42a71-308">**If the user cancels the Credential UI, return the user back to the original UI.**</span></span> <span data-ttu-id="42a71-309">不要顯示錯誤訊息。</span><span class="sxs-lookup"><span data-stu-id="42a71-309">Don't display an error message.</span></span>
-   <span data-ttu-id="42a71-310">如果使用者帳戶控制已關閉，而標準使用者嘗試執行需要提高許可權的工作，請提供錯誤訊息，指出「此工作需要系統管理員許可權。</span><span class="sxs-lookup"><span data-stu-id="42a71-310">If User Account Control has been turned off and a Standard user attempts to perform a task that requires elevation, provide an error message that states "This task requires administrator privileges.</span></span> <span data-ttu-id="42a71-311">若要執行這項工作，您必須使用系統管理員帳戶登入。」</span><span class="sxs-lookup"><span data-stu-id="42a71-311">To perform this task, you must log on using an administrator account."</span></span>

![<span data-ttu-id="42a71-312">工作需要許可權訊息的螢幕擷取畫面</span><span class="sxs-lookup"><span data-stu-id="42a71-312">screen shot of task requires privileges message</span></span> ](images/winenv-uac-image22.png)

<span data-ttu-id="42a71-313">在此範例中，使用者帳戶控制已關閉，因此會出現錯誤訊息，說明使用者必須使用系統管理員帳戶。</span><span class="sxs-lookup"><span data-stu-id="42a71-313">In this example, User Account Control has been turned off so an error message explains that the user must use an administrator account.</span></span>

### <a name="wizards"></a><span data-ttu-id="42a71-314">精靈</span><span class="sxs-lookup"><span data-stu-id="42a71-314">Wizards</span></span>

-   <span data-ttu-id="42a71-315">**不要多次提升。**</span><span class="sxs-lookup"><span data-stu-id="42a71-315">**Don't elevate multiple times.**</span></span> <span data-ttu-id="42a71-316">當嚮導提高許可權之後，就應該保持提高許可權。</span><span class="sxs-lookup"><span data-stu-id="42a71-316">Once a wizard is elevated, it should stay elevated.</span></span>
-   <span data-ttu-id="42a71-317">如果工作是在嚮導內執行，請在認可頁面的 [下一步] 按鈕上放入 UAC 盾牌 (應提供更 [明確的標籤](win-wizards.md)) 。</span><span class="sxs-lookup"><span data-stu-id="42a71-317">If the task is performed within the wizard, put a UAC shield on the Commit page's "Next" button (which should be given a more [specific label](win-wizards.md)).</span></span> <span data-ttu-id="42a71-318">當使用者認可時：</span><span class="sxs-lookup"><span data-stu-id="42a71-318">When the user commits:</span></span>
    -   <span data-ttu-id="42a71-319">如果下一頁是進度頁面，請移至該頁面，並以強制回應方式顯示提高許可權的 UI。</span><span class="sxs-lookup"><span data-stu-id="42a71-319">If the next page is a Progress page, advance to that page and modally display the elevation UI.</span></span> <span data-ttu-id="42a71-320">在成功提升許可權之後，請執行此工作。</span><span class="sxs-lookup"><span data-stu-id="42a71-320">After successful elevation, perform the task.</span></span>
    -   <span data-ttu-id="42a71-321">如果下一頁是 [完成] 頁面，請移至該頁面 (但暫時將其內容取代為 [正在等候許可權 ...] ) ，並以強制回應方式顯示提高許可權的 UI。</span><span class="sxs-lookup"><span data-stu-id="42a71-321">If the next page is a Completion page, advance to that page (but temporarily replace its contents with "Waiting for permission...") and modally display the elevation UI.</span></span> <span data-ttu-id="42a71-322">在成功提升許可權之後，請執行工作，然後顯示完成頁面內容。</span><span class="sxs-lookup"><span data-stu-id="42a71-322">After successful elevation, perform the task, and then display the Completion page contents.</span></span>
    -   <span data-ttu-id="42a71-323">如果使用者取消提高許可權的 UI，請返回 [認可] 頁面。</span><span class="sxs-lookup"><span data-stu-id="42a71-323">If the user cancels the elevation UI, return to the Commit page.</span></span> <span data-ttu-id="42a71-324">這麼做可讓使用者再試一次。</span><span class="sxs-lookup"><span data-stu-id="42a71-324">Doing so allows the user to try again.</span></span>
-   <span data-ttu-id="42a71-325">如果工作是在 wizard 完成後執行，請在認可頁面的 [完成] 按鈕上放入 UAC 盾牌 (應提供更 [明確的標籤](win-wizards.md)) 。</span><span class="sxs-lookup"><span data-stu-id="42a71-325">If the task is performed after the wizard completes, put a UAC shield on the Commit page's "Finish" button (which should be given a more [specific label](win-wizards.md)).</span></span> <span data-ttu-id="42a71-326">當使用者認可時：</span><span class="sxs-lookup"><span data-stu-id="42a71-326">When the user commits:</span></span>
    -   <span data-ttu-id="42a71-327">維持在 [認可] 頁面，並以強制回應方式顯示提高許可權的 UI。</span><span class="sxs-lookup"><span data-stu-id="42a71-327">Remain on the Commit page and modally display the elevation UI.</span></span> <span data-ttu-id="42a71-328">在成功提升許可權之後，請關閉嚮導。</span><span class="sxs-lookup"><span data-stu-id="42a71-328">After successful elevation, close the wizard.</span></span>
    -   <span data-ttu-id="42a71-329">如果使用者取消提高許可權的 UI，請返回 [認可] 頁面。</span><span class="sxs-lookup"><span data-stu-id="42a71-329">If the user cancels the elevation UI, return to the Commit page.</span></span> <span data-ttu-id="42a71-330">這麼做可讓使用者再試一次。</span><span class="sxs-lookup"><span data-stu-id="42a71-330">Doing so allows the user to try again.</span></span>
-   <span data-ttu-id="42a71-331">針對僅供系統管理員的冗長的系統管理員，您可以在顯示任何 UI 之前，在進入點提示輸入系統管理員認證。</span><span class="sxs-lookup"><span data-stu-id="42a71-331">For lengthy wizards intended only for administrators, you can prompt for administrator credentials at the entry point before showing any UI.</span></span>

## <a name="text"></a><span data-ttu-id="42a71-332">Text</span><span class="sxs-lookup"><span data-stu-id="42a71-332">Text</span></span>

-   <span data-ttu-id="42a71-333">**請不要使用省略號，因為命令需要提高許可權。**</span><span class="sxs-lookup"><span data-stu-id="42a71-333">**Don't use an ellipsis just because a command requires elevation.**</span></span> <span data-ttu-id="42a71-334">要提高許可權的需要以 UAC 防護來表示。</span><span class="sxs-lookup"><span data-stu-id="42a71-334">The need to elevate is indicated with the UAC shield.</span></span>

## <a name="documentation"></a><span data-ttu-id="42a71-335">文件</span><span class="sxs-lookup"><span data-stu-id="42a71-335">Documentation</span></span>

<span data-ttu-id="42a71-336">參考使用者帳戶控制時：</span><span class="sxs-lookup"><span data-stu-id="42a71-336">When referring to User Account Control:</span></span>

-   <span data-ttu-id="42a71-337">請參閱「使用者帳戶控制」 (第一次提及) 或 UAC (後續提及的) ，而不是最低許可權的使用者帳戶或 LUA。</span><span class="sxs-lookup"><span data-stu-id="42a71-337">Refer to the feature as User Account Control (on first mention) or UAC (on subsequent mention), not Least-privileged User Account or LUA.</span></span>
-   <span data-ttu-id="42a71-338">請以標準使用者身分參閱非系統管理員。</span><span class="sxs-lookup"><span data-stu-id="42a71-338">Refer to non-administrators as Standard users.</span></span>
-   <span data-ttu-id="42a71-339">請將內建的電腦系統管理員稱為內建的系統管理員。</span><span class="sxs-lookup"><span data-stu-id="42a71-339">Refer to built-in computer administrators as Built-in administrators.</span></span>

<span data-ttu-id="42a71-340">在使用者檔中：</span><span class="sxs-lookup"><span data-stu-id="42a71-340">In user documentation:</span></span>

-   <span data-ttu-id="42a71-341">請參閱授與同意以授與許可權給執行系統管理工作的動作。</span><span class="sxs-lookup"><span data-stu-id="42a71-341">Refer to the act of giving consent to perform an administrative task as giving permission.</span></span>

<span data-ttu-id="42a71-342">在程式設計和其他技術檔中：</span><span class="sxs-lookup"><span data-stu-id="42a71-342">In programming and other technical documentation:</span></span>

-   <span data-ttu-id="42a71-343">請參閱授與同意以提高許可權執行系統管理工作的動作。</span><span class="sxs-lookup"><span data-stu-id="42a71-343">Refer to the act of giving consent to perform an administrative task as elevation.</span></span>
-   <span data-ttu-id="42a71-344">在 UAC 的內容中，如果沒有提高許可權，請將系統管理員稱為受保護的系統管理員，並在提高許可權之後，將系統管理員視為</span><span class="sxs-lookup"><span data-stu-id="42a71-344">In the context of UAC, refer to administrators as Protected administrators when not elevated, and Elevated administrators after elevation.</span></span>
-   <span data-ttu-id="42a71-345">請參閱用來輸入密碼做為認證 UI 的對話方塊。</span><span class="sxs-lookup"><span data-stu-id="42a71-345">Refer to the dialog box used to enter passwords as the Credential UI.</span></span> <span data-ttu-id="42a71-346">請參閱用來將同意授與同意 UI 的對話方塊。</span><span class="sxs-lookup"><span data-stu-id="42a71-346">Refer to the dialog box used to give consent as the Consent UI.</span></span> <span data-ttu-id="42a71-347">請參閱兩者一般都是提高許可權的 UI。</span><span class="sxs-lookup"><span data-stu-id="42a71-347">Refer to both generally as Elevation UI.</span></span>

