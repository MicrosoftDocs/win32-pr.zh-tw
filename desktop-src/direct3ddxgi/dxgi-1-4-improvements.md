---
description: Microsoft DirectX Graphic Infrastructure (DXGI) 1.4 新增或變更了下列功能，主要是支援 Direct3D 12。
ms.assetid: DEA901EA-B0F9-41D9-802C-ED1D6A7888E0
title: DXGI 1.4 改進
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 24e9a8a48dd026248afac7c1a7df23a99176adef
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/06/2021
ms.locfileid: "104025651"
---
# <a name="dxgi-14-improvements"></a><span data-ttu-id="93999-103">DXGI 1.4 改進</span><span class="sxs-lookup"><span data-stu-id="93999-103">DXGI 1.4 Improvements</span></span>

<span data-ttu-id="93999-104">Microsoft DirectX Graphic Infrastructure (DXGI) 1.4 新增或變更了下列功能，主要是支援 Direct3D 12。</span><span class="sxs-lookup"><span data-stu-id="93999-104">The following functionality has been added or changed in Microsoft DirectX Graphics Infrastructure (DXGI) 1.4, largely to support Direct3D 12.</span></span>

## <a name="cheaper-adapter-enumeration"></a><span data-ttu-id="93999-105">較便宜的介面卡列舉</span><span class="sxs-lookup"><span data-stu-id="93999-105">Cheaper adapter enumeration</span></span>

<span data-ttu-id="93999-106">針對 Direct3D 12，無法再從裝置回溯至用來建立它的 [**IDXGIAdapter**](/windows/win32/api/DXGI/nn-dxgi-idxgiadapter) 。</span><span class="sxs-lookup"><span data-stu-id="93999-106">For Direct3D 12, it’s no longer possible to backtrack from a device to the [**IDXGIAdapter**](/windows/win32/api/DXGI/nn-dxgi-idxgiadapter) that was used to create it.</span></span> <span data-ttu-id="93999-107">也無法再將 D3D \_ 驅動程式類型的扭曲提供給 \_ \_ [**D3D12CreateDevice**](/windows/win32/api/d3d12/nf-d3d12-d3d12createdevice)。</span><span class="sxs-lookup"><span data-stu-id="93999-107">It’s also no longer possible to provide D3D\_DRIVER\_TYPE\_WARP into [**D3D12CreateDevice**](/windows/win32/api/d3d12/nf-d3d12-d3d12createdevice).</span></span> <span data-ttu-id="93999-108">若要更輕鬆地進行開發，您可以使用 [**IDXGIFactory4**](/windows/win32/api/DXGI1_4/nn-dxgi1_4-idxgifactory4) 來處理這兩者。</span><span class="sxs-lookup"><span data-stu-id="93999-108">To make development easier, you can use [**IDXGIFactory4**](/windows/win32/api/DXGI1_4/nn-dxgi1_4-idxgifactory4) to deal with both of these.</span></span> <span data-ttu-id="93999-109">[**IDXGIFactory4：： EnumAdapterByLuid**](/windows/win32/api/DXGI1_4/nf-dxgi1_4-idxgifactory4-enumadapterbyluid) (設計成與 [**ID3D12Device：：) GetAdapterLuid**](/windows/win32/api/d3d12/nf-d3d12-id3d12device-getadapterluid) 配對，可讓應用程式抓取建立 Direct3D 12 裝置的介面卡相關資訊。</span><span class="sxs-lookup"><span data-stu-id="93999-109">[**IDXGIFactory4::EnumAdapterByLuid**](/windows/win32/api/DXGI1_4/nf-dxgi1_4-idxgifactory4-enumadapterbyluid) (designed to be paired with [**ID3D12Device::GetAdapterLuid**](/windows/win32/api/d3d12/nf-d3d12-id3d12device-getadapterluid)) enables an app to retrieve information about the adapter where a Direct3D 12 device was created.</span></span> <span data-ttu-id="93999-110">[**IDXGIFactory4：： EnumWarpAdapter**](/windows/win32/api/DXGI1_4/nf-dxgi1_4-idxgifactory4-enumwarpadapter) 提供可提供給 **D3D12CreateDevice** 使用變形轉譯器的介面卡。</span><span class="sxs-lookup"><span data-stu-id="93999-110">[**IDXGIFactory4::EnumWarpAdapter**](/windows/win32/api/DXGI1_4/nf-dxgi1_4-idxgifactory4-enumwarpadapter) provides an adapter which can be provided to **D3D12CreateDevice** to use the WARP renderer.</span></span>

## <a name="video-memory-budget-tracking"></a><span data-ttu-id="93999-111">影片記憶體預算追蹤</span><span class="sxs-lookup"><span data-stu-id="93999-111">Video memory budget tracking</span></span>

<span data-ttu-id="93999-112">建議應用程式開發人員使用視訊記憶體保留系統，以通知作業系統沒有應用程式無法移出的實體視訊記憶體數量。</span><span class="sxs-lookup"><span data-stu-id="93999-112">Application developers are encouraged to use a video memory reservation system, to inform the OS of the amount of physical video memory the app cannot go without.</span></span>

<span data-ttu-id="93999-113">進程可用的實體記憶體數量稱為「影片記憶體預算」。</span><span class="sxs-lookup"><span data-stu-id="93999-113">The amount of physical memory available for a process is known as the "video memory budget".</span></span> <span data-ttu-id="93999-114">在背景進程喚醒和睡眠的情況下，預算可能會明顯波動;當使用者切換到另一個應用程式時，就會大幅波動。</span><span class="sxs-lookup"><span data-stu-id="93999-114">The budget can fluctuate noticeably as background processes wake-up and sleep; and fluctuate dramatically when the user switches away to another application.</span></span> <span data-ttu-id="93999-115">當預算變更時，應用程式可以收到通知，而且會輪詢目前的預算和目前耗用的記憶體數量。</span><span class="sxs-lookup"><span data-stu-id="93999-115">The application can be notified when the budget changes and poll both the current budget and the currently consumed amount of memory.</span></span> <span data-ttu-id="93999-116">如果應用程式不在其預算內，則會間歇性凍結程式以允許其他應用程式執行，並/或建立 Api 將會傳回失敗。</span><span class="sxs-lookup"><span data-stu-id="93999-116">If an application doesn’t stay within its budget, the process will be intermittently frozen to allow other applications to run and/or the creation APIs will return failure.</span></span> <span data-ttu-id="93999-117">[**IDXGIAdapter3**](/windows/win32/api/dxgi1_4/nn-dxgi1_4-idxgiadapter3)介面提供與這項功能有關的方法，特別是 [**QueryVideoMemoryInfo**](/windows/win32/api/dxgi1_4/nf-dxgi1_4-idxgiadapter3-queryvideomemoryinfo)和 [**RegisterVideoMemoryBudgetChangeNotificationEvent**](/windows/win32/api/dxgi1_4/nf-dxgi1_4-idxgiadapter3-registervideomemorybudgetchangenotificationevent)。</span><span class="sxs-lookup"><span data-stu-id="93999-117">The [**IDXGIAdapter3**](/windows/win32/api/dxgi1_4/nn-dxgi1_4-idxgiadapter3) interface provides the methods pertaining to this functionality, in particular [**QueryVideoMemoryInfo**](/windows/win32/api/dxgi1_4/nf-dxgi1_4-idxgiadapter3-queryvideomemoryinfo) and [**RegisterVideoMemoryBudgetChangeNotificationEvent**](/windows/win32/api/dxgi1_4/nf-dxgi1_4-idxgiadapter3-registervideomemorybudgetchangenotificationevent).</span></span>

<span data-ttu-id="93999-118">如需詳細資訊，請參閱「 [常駐](../direct3d12/residency.md)」上的 Direct3D 12 主題。</span><span class="sxs-lookup"><span data-stu-id="93999-118">For more information, refer to the Direct3D 12 topic on [Residency](../direct3d12/residency.md).</span></span>

## <a name="direct3d-12-swapchain-changes"></a><span data-ttu-id="93999-119">Direct3D 12 Swapchain 變更</span><span class="sxs-lookup"><span data-stu-id="93999-119">Direct3D 12 Swapchain Changes</span></span>

<span data-ttu-id="93999-120">某些現有的 Direct3D 11 swapchain 功能已被取代，以達到 Direct3D 12 的額外負擔。</span><span class="sxs-lookup"><span data-stu-id="93999-120">Some of the existing Direct3D 11 swapchain functionality was deprecated to achieve the overhead reductions in Direct3D 12.</span></span> <span data-ttu-id="93999-121">雖然已對 Direct3D 12 的概念進行其他變更，或為 Direct3D 12 功能提供更好的支援。</span><span class="sxs-lookup"><span data-stu-id="93999-121">While other changes were made to either align to Direct3D 12 concepts or provide better support for Direct3D 12 features.</span></span>

<span data-ttu-id="93999-122">**不變背景緩衝區身分識別**</span><span class="sxs-lookup"><span data-stu-id="93999-122">**Invariant Backbuffer Identity**</span></span>

<span data-ttu-id="93999-123">在 Direct3D 11 中，應用程式可以呼叫 [**GetBuffer**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-getbuffer) ( 0，.。。</span><span class="sxs-lookup"><span data-stu-id="93999-123">In Direct3D 11, applications could call [**GetBuffer**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-getbuffer)( 0, …</span></span> <span data-ttu-id="93999-124">僅 ) 一次。</span><span class="sxs-lookup"><span data-stu-id="93999-124">) only once.</span></span> <span data-ttu-id="93999-125">每個 [**出現**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-present) 的呼叫都會以隱含方式變更所傳回介面的資源識別。</span><span class="sxs-lookup"><span data-stu-id="93999-125">Every call to [**Present**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-present) implicitly changed the resource identity of the returned interface.</span></span> <span data-ttu-id="93999-126">由於所需的 CPU 負擔和彈性的資源描述項設計，Direct3D 12 不再支援該隱含資源身分識別變更。</span><span class="sxs-lookup"><span data-stu-id="93999-126">Direct3D 12 no longer supports that implicit resource identity change, due to the CPU overhead required and the flexible resource descriptor design.</span></span> <span data-ttu-id="93999-127">因此，應用程式必須針對每個使用 swapchain 所建立的緩衝區，以手動方式呼叫 **GetBuffer** 。</span><span class="sxs-lookup"><span data-stu-id="93999-127">As a result, the application must manually call **GetBuffer** for every each buffer created with the swapchain.</span></span> <span data-ttu-id="93999-128">應用程式必須 **在呼叫後**，以手動方式轉譯為序列中的下一個緩衝區。</span><span class="sxs-lookup"><span data-stu-id="93999-128">The application must manually render to the next buffer in the sequence after calling **Present**.</span></span> <span data-ttu-id="93999-129">建議應用程式為 **每個緩衝區** 建立描述項的快取，而不是重新建立每個緩衝區的最多物件。</span><span class="sxs-lookup"><span data-stu-id="93999-129">Applications are encouraged to create a cache of descriptors for each buffer, instead of re-creating many objects each **Present**.</span></span>

<span data-ttu-id="93999-130">**多介面卡支援**</span><span class="sxs-lookup"><span data-stu-id="93999-130">**Multi-Adapter Support**</span></span>

<span data-ttu-id="93999-131">在多重 GPU 介面卡上建立 swapchain 時，會在節點1上建立 backbuffers，而且只支援單一命令佇列。</span><span class="sxs-lookup"><span data-stu-id="93999-131">When a swapchain is created on a multi-GPU adapter, the backbuffers are all created on node 1 and only a single command queue is supported.</span></span> <span data-ttu-id="93999-132">[**ResizeBuffers1**](/windows/win32/api/DXGI1_4/nf-dxgi1_4-idxgiswapchain3-resizebuffers1) 可讓應用程式在不同的節點上建立 backbuffers，讓不同的命令佇列可以搭配使用。</span><span class="sxs-lookup"><span data-stu-id="93999-132">[**ResizeBuffers1**](/windows/win32/api/DXGI1_4/nf-dxgi1_4-idxgiswapchain3-resizebuffers1) enables applications to create backbuffers on different nodes, allowing a different command queue to be used with each.</span></span> <span data-ttu-id="93999-133">這些功能可 (AFR) 技術，以搭配 swapchain 使用，以提供替代的框架轉譯。</span><span class="sxs-lookup"><span data-stu-id="93999-133">These capabilities enable Alternate Frame Rendering (AFR) techniques to be used with the swapchain.</span></span> <span data-ttu-id="93999-134">請參閱 [多介面卡系統](../direct3d12/multi-engine.md)。</span><span class="sxs-lookup"><span data-stu-id="93999-134">Refer to [Multi-adapter systems](../direct3d12/multi-engine.md).</span></span>

<span data-ttu-id="93999-135">**其他**</span><span class="sxs-lookup"><span data-stu-id="93999-135">**Miscellaneous**</span></span>

-   <span data-ttu-id="93999-136">必須將命令佇列物件傳遞給 [**CreateSwapChain**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory-createswapchain) 方法，而不是 Direct3D 12 裝置物件。</span><span class="sxs-lookup"><span data-stu-id="93999-136">A command queue object must be passed to [**CreateSwapChain**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory-createswapchain) methods instead of the Direct3D 12 device object.</span></span>
-   <span data-ttu-id="93999-137">只支援下列兩個 flip 模型交換效果：</span><span class="sxs-lookup"><span data-stu-id="93999-137">Only the following two flip model swap effects are supported:</span></span> <dl> <span data-ttu-id="93999-138">\_ \_ \_ \_ 當應用程式在呈現之前完全轉譯背景緩衝區，或想要輕鬆地支援多個介面卡案例時，建議您最好採用 DXGI 交換效果翻轉捨棄。</span><span class="sxs-lookup"><span data-stu-id="93999-138">DXGI\_SWAP\_EFFECT\_FLIP\_DISCARD should be preferred when applications fully render over the backbuffer before presenting it or are interested in supporting multi-adapter scenarios easily.</span></span>  
    <span data-ttu-id="93999-139">\_ \_ \_ \_ 使用部分呈現優化或定期從先前顯示的 backbuffers 中讀取的應用程式應該使用 DXGI 交換效果反轉順序。</span><span class="sxs-lookup"><span data-stu-id="93999-139">DXGI\_SWAP\_EFFECT\_FLIP\_SEQUENTIAL should be used by applications that rely on partial presentation optimizations or regularly read from previously presented backbuffers.</span></span>  
    </dl>
-   [**SetFullscreenState**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-setfullscreenstate) no longer exclusively owns the display, so user-initiated operating system elements can seamlessly appear in front of application output. Volume settings is an example of this.

## <a name="related-topics"></a><span data-ttu-id="93999-140">相關主題</span><span class="sxs-lookup"><span data-stu-id="93999-140">Related topics</span></span>

[<span data-ttu-id="93999-141">Direct3D 12 硬體功能等級</span><span class="sxs-lookup"><span data-stu-id="93999-141">Direct3D 12 Hardware Feature Levels</span></span>](../direct3d12/hardware-feature-levels.md)

[<span data-ttu-id="93999-142">DXGI 的程式設計指南</span><span class="sxs-lookup"><span data-stu-id="93999-142">Programming Guide for DXGI</span></span>](dx-graphics-dxgi-overviews.md)
