---
title: OpenType 變數字型
description: 本主題說明 OpenType 變數字型、其在 DirectWrite 和 Direct2D 中的支援，以及如何在您的應用程式中使用它們。 .
ms.assetid: 788558a7-efe7-b075-942f-ac75a5b86b84
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 60a9e6bdf27da0d70841973515636736859294dd
ms.sourcegitcommit: af9983bab40fe0b042f177ce7ca79f2eb0f9d0e8
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 02/06/2021
ms.locfileid: "103853232"
---
# <a name="opentype-variable-fonts"></a><span data-ttu-id="0bd3e-104">OpenType 變數字型</span><span class="sxs-lookup"><span data-stu-id="0bd3e-104">OpenType Variable Fonts</span></span>

<span data-ttu-id="0bd3e-105">本主題說明 OpenType 變數字型、其在 DirectWrite 和 Direct2D 中的支援，以及如何在您的應用程式中使用它們。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-105">This topic describes OpenType variable fonts, their support in DirectWrite and Direct2D, and how to use them in your app.</span></span> 

-   [<span data-ttu-id="0bd3e-106">什麼是 OpenType 變數字型？</span><span class="sxs-lookup"><span data-stu-id="0bd3e-106">What are OpenType variable fonts?</span></span>](#what-are-opentype-variable-fonts)
-   [<span data-ttu-id="0bd3e-107">DirectWrite 中的 OpenType 變數字型支援</span><span class="sxs-lookup"><span data-stu-id="0bd3e-107">OpenType variable font support in DirectWrite</span></span>](#opentype-variable-font-support-in-directwrite)
-   [<span data-ttu-id="0bd3e-108">使用 OpenType 變數字型</span><span class="sxs-lookup"><span data-stu-id="0bd3e-108">Using OpenType variable fonts</span></span>](#using-opentype-variable-fonts)

## <a name="what-are-opentype-variable-fonts"></a><span data-ttu-id="0bd3e-109">什麼是 OpenType 變數字型？</span><span class="sxs-lookup"><span data-stu-id="0bd3e-109">What are OpenType variable fonts?</span></span>

<span data-ttu-id="0bd3e-110">[Opentype 字型格式規格](https://www.microsoft.com/typography/otspec/)的1.8 版引進了新的格式延伸模組，稱為[OpenType 字型變化](/typography/opentype/spec/otvaroverview)。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-110">Version 1.8 of the [OpenType font format specification](https://www.microsoft.com/typography/otspec/) introduced a new extension to the format known as [OpenType Font Variations](/typography/opentype/spec/otvaroverview).</span></span> <span data-ttu-id="0bd3e-111">使用這些延伸模組的字型稱為「OpenType 變數字型」。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-111">Fonts that use these extensions are known as OpenType variable fonts.</span></span> <span data-ttu-id="0bd3e-112">OpenType 變數字型是單一字型，其行為就像數個字型一樣，方法是使用不同設計之間的連續插補，全都定義在單一字型內。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-112">An OpenType variable font is a single font that can behave like several fonts by using continuous interpolation between different designs, all defined within the single font.</span></span>

<span data-ttu-id="0bd3e-113">OpenType 變數字型可以在一或多個獨立軸（例如權數或寬度）上定義其設計的連續變化：</span><span class="sxs-lookup"><span data-stu-id="0bd3e-113">An OpenType variable font can define continuous variation of its design along one or more independent axes, such as weight or width:</span></span> 

 

![顯示使用字母 ' G ' 的 OpenType 變數字型，並顯示水準寬度軸和垂直權數軸的不同變化。](images/opentype-width-weight.png)

<span data-ttu-id="0bd3e-115">字型開發人員會決定要在指定字型中使用的一組變化軸。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-115">A font developer determines a set of variation axes to use in a given font.</span></span> <span data-ttu-id="0bd3e-116">這些軸可以包含一組知名的 (或「已註冊」 ) 的變異軸，例如權數和寬度，但也可以包含字型開發人員所定義的任意自訂座標軸。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-116">These axes can include a set of well-known (or “registered”) axes of variation, such as weight and width, but they can also include arbitrary, custom axes of variation defined by the font developer.</span></span>  

<span data-ttu-id="0bd3e-117">藉由選取字型的一組變化軸，字型開發人員會為字型定義設計變化的抽象、多元的空間。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-117">By selecting a set of variation axes for a font, the font developer defines an abstract, n-dimensional space of design variation for the font.</span></span> <span data-ttu-id="0bd3e-118">文字引擎可以在用來配置和轉譯文字的連續空間中指定可能的任何位置或「實例」。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-118">Text engines can specify potentially any position, or “instance”, within that continuous space for laying out and rendering text.</span></span> 

<span data-ttu-id="0bd3e-119">字型開發人員也可以選取名稱，並將其指派給設計變化空間內的特定實例;這些稱為「命名實例」。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-119">The font developer can also select and assign names to particular instances within the design-variation space; these are referred to as “named instances”.</span></span> <span data-ttu-id="0bd3e-120">例如，具有權數變化的字型可能會在非常輕量和非常繁重的筆劃之間支援連續變化，而字型開發人員已選取特定權數，以及將其指派給它們的名稱，例如 "Light"、"Regular" 和 "Semibold"。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-120">For example, a font with weight variation may support continuous variation between very light and very heavy strokes, while the font developer has selected particular weights along that continuum and assigned names to them, such as “Light”, “Regular” and “Semibold”.</span></span> 

<span data-ttu-id="0bd3e-121">OpenType 變數字型格式會使用在傳統 OpenType 字型中找到的資料表，再加上一些額外的表格，說明不同的資料項目值如何針對不同的實例而變更。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-121">The OpenType variable font format uses data tables found in traditional OpenType fonts plus certain additional tables that describe how the values of various data items change for different instances.</span></span> <span data-ttu-id="0bd3e-122">此格式會將一個變化實例指定為「預設實例」，這會使用傳統資料表來取得預設值。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-122">The format designates one variation instance as a “default instance”, which uses traditional tables to get default values.</span></span> <span data-ttu-id="0bd3e-123">所有其他實例都相依于預設資料和其他差異資料。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-123">All other instances depend on the default data plus other delta data.</span></span> <span data-ttu-id="0bd3e-124">例如，「glyf」資料表可以有一個「名義」圖像圖形描述，也就是用於預設實例的圖形，而「gvar」資料表則會說明如何針對其他實例調整圖像的貝塞爾線控制點。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-124">For example, a ‘glyf’ table can have a Bezier-curve description of a nominal glyph shape, which is the shape used for the default instance, while a ‘gvar’ table will describe how the Bezier control points for the glyph are adjusted for other instances.</span></span> <span data-ttu-id="0bd3e-125">同樣地，其他字型值也可以有名義值加上差異資料，以描述這些值如何針對不同的實例而變更;例如，x 高度和其他全字型的度量，或字元特定的標記錨定位置和字偶間距調整。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-125">Similarly, other font values can have a nominal value plus delta data describing how those values change for different instances; for example, x-height and other font-wide metrics, or glyph-specific mark-anchoring positions and kerning adjustments.</span></span> 

<span data-ttu-id="0bd3e-126">因為變數字型可支援任意一組變異軸，所以它們需要可延伸的字型系列模型，更直接反映字型設計工具建立字型系列的方式：字型家族是由家族名稱和某些常數的設計特性所定義，而且有任一數字 (由字型開發人員) ，以設計的變化方式來決定。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-126">Because variable fonts can support an arbitrary set of variation axes, they require an extensible model of font families that more directly reflects how font designers create families of fonts: a font family is defined by a family name and certain design characteristics that are constant, with an arbitrary number (determined by the font developer) of ways in which the design can vary.</span></span> <span data-ttu-id="0bd3e-127">您可以使用權數的變異來建立一個字型系列，但是可以使用 x-height、serif 大小、"funkiness" 或任何字型開發人員想要的變數來建立不同的字型系列。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-127">One font family may be created with variants for weight, but a different font family may be created with variants for x-height, serif-size, “funkiness”, or whatever the font developer wishes.</span></span> <span data-ttu-id="0bd3e-128">在此模型中，使用一般或「慣用」或「印刷樣式」、系列名稱加上一組成對的索引鍵/值組，其中每個索引鍵/值組都代表一種不同的變化和特定值，且一般是一種可延伸的集合，就能描述字型選取範圍。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-128">In this model, a font face selection is best described using the general, or “preferred” or "typographic", family name plus a set of key-value pairs, each representing a kind of variation and specific value, with the kinds of variation in general being an extensible set.</span></span> <span data-ttu-id="0bd3e-129">字型家族的一般概念可以套用至傳統、非變數字型以及變數字型。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-129">This general notion of a font family can apply to traditional, non-variable fonts as well as to variable fonts.</span></span> <span data-ttu-id="0bd3e-130">例如，在此一般的印刷樣式系列模型中，「Selawik VF」系列可能會有權數、光學大小和 serif 設計的變化，例如「Semilight 做橫幅 San」。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-130">For example, under this general, typographic family model, a family "Selawik VF" might have variations for weight, optical size and serif design, with instances such as "Semilight Banner Sans".</span></span> 

<span data-ttu-id="0bd3e-131">不過，某些現有的軟體實施（包括現有的 DirectWrite Api）可能會設計為假設有更多的字型家族模型。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-131">Some existing software implementations, however, including existing DirectWrite APIs, may be designed assuming a more limited model of font families.</span></span> <span data-ttu-id="0bd3e-132">例如，有些應用程式可能會假設字型家族最多隻能有一般、粗體、斜體和粗體字。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-132">For example, some applications may assume that a font family can have, at most, Regular, Bold, Italic and Bold Italic variants.</span></span> <span data-ttu-id="0bd3e-133">現有的 [**IDWriteFontCollection**](/windows/win32/api/dwrite/nn-dwrite-idwritefontcollection) 和 [**IDWriteFontFamily**](/windows/win32/api/dwrite/nn-dwrite-idwritefontfamily) 介面採用權數/延展/樣式 ( "WSS" ) 系列模型，讓您可以使用 [**DWRITE \_ 字型 \_ 粗細**](/windows/win32/api/dwrite/ne-dwrite-dwrite_font_weight)、 [**DWRITE \_ 字型 \_ 延展**](/windows/win32/api/dwrite/ne-dwrite-dwrite_font_stretch) 或 [**DWRITE \_ 字型 \_ 樣式**](/windows/win32/api/dwrite/ne-dwrite-dwrite_font_style) 列舉作為參數，來指定系列內的變體。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-133">The existing [**IDWriteFontCollection**](/windows/win32/api/dwrite/nn-dwrite-idwritefontcollection) and [**IDWriteFontFamily**](/windows/win32/api/dwrite/nn-dwrite-idwritefontfamily) interfaces assume a weight/stretch/style (“WSS”) family model, allowing for variants within a family to be specified using the [**DWRITE\_FONT\_WEIGHT**](/windows/win32/api/dwrite/ne-dwrite-dwrite_font_weight), [**DWRITE\_FONT\_STRETCH**](/windows/win32/api/dwrite/ne-dwrite-dwrite_font_stretch) or [**DWRITE\_FONT\_STYLE**](/windows/win32/api/dwrite/ne-dwrite-dwrite_font_style) enumerations as parameters.</span></span> <span data-ttu-id="0bd3e-134">在上述範例中，不會將光學大小和 serif 軸視為 WSS 模型中變化的系列內部軸。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-134">Taking the previous example, the optical size and serif axes would not be treated as family-internal axes of variation in the WSS model.</span></span> 

<span data-ttu-id="0bd3e-135">完整支援變數字型需要 Api，讓您能夠以字型所決定的數個參數來指定家庭成員。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-135">Complete support for variable fonts would require APIs that allow a family member to be specified with potentially several parameters, as determined by the font.</span></span> <span data-ttu-id="0bd3e-136">但現有的 API 設計可以藉由將變數字型中定義的命名實例投射到更受限的字型系列模型中，來提供變數字型的部分支援。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-136">But existing API designs may be able to provide partial support for variable fonts by projecting the named instances defined in a variable font into the more-limited font-family models.</span></span> <span data-ttu-id="0bd3e-137">在上述範例中，"Selawik VF Semilight 做橫幅 San" 可投影至 WSS 模型，作為「Selawik VF 橫幅 San」系列（具有 "Semilight 做" 作為權數變化）。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-137">In the previous example, "Selawik VF Semilight Banner Sans" could be projected into the WSS model as a "Selawik VF Banner Sans" family with "Semilight" as a weight variant.</span></span> 

<span data-ttu-id="0bd3e-138">針對另一個範例，請考慮使用印刷樣式的字型系列（例如 Sitka），其粗細和光學大小變化。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-138">For another example, consider a typographic font family such as Sitka, with weight and optical size variants.</span></span> <span data-ttu-id="0bd3e-139">系列內的命名變數包括 Sitka 文字一般和 Sitka 橫幅粗體 (再加上許多其他) 。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-139">Named variants within the family include Sitka Text Regular and Sitka Banner Bold (plus many others).</span></span> <span data-ttu-id="0bd3e-140">印刷樣式系列名稱為 "Sitka"，而印刷樣式系列模型中這些變異的臉部名稱會是「文字一般」和「橫幅粗體」。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-140">The typographic family name is “Sitka” while the face names for these variants in the typographic family model would be “Text Regular” and “Banner Bold”.</span></span> <span data-ttu-id="0bd3e-141">四個成員和 WSS 系列模型不允許家族內的光學大小變化，因此必須將光學大小的區別視為家庭層級的差異。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-141">The four-member and WSS family models do not allow for optical size variants within a family, and so optical-size distinctions must be treated like family-level distinctions.</span></span> <span data-ttu-id="0bd3e-142">下表說明如何將 Sitka 印刷樣式系列中的字型選取範圍視為 WSS 系列模型：</span><span class="sxs-lookup"><span data-stu-id="0bd3e-142">The following table illustrates how a selection of fonts from the Sitka typographic family would be treated in the WSS family model:</span></span> 



<span data-ttu-id="0bd3e-143">印刷樣式系列模型</span><span class="sxs-lookup"><span data-stu-id="0bd3e-143">Typographic family model</span></span>

<span data-ttu-id="0bd3e-144">WSS 系列模型</span><span class="sxs-lookup"><span data-stu-id="0bd3e-144">WSS family model</span></span>

<span data-ttu-id="0bd3e-145">系列</span><span class="sxs-lookup"><span data-stu-id="0bd3e-145">Family</span></span>

<span data-ttu-id="0bd3e-146">臉部</span><span class="sxs-lookup"><span data-stu-id="0bd3e-146">Face</span></span>

<span data-ttu-id="0bd3e-147">系列</span><span class="sxs-lookup"><span data-stu-id="0bd3e-147">Family</span></span>

<span data-ttu-id="0bd3e-148">臉部</span><span class="sxs-lookup"><span data-stu-id="0bd3e-148">Face</span></span>

<span data-ttu-id="0bd3e-149">錫特卡</span><span class="sxs-lookup"><span data-stu-id="0bd3e-149">Sitka</span></span>

<span data-ttu-id="0bd3e-150">一般文字</span><span class="sxs-lookup"><span data-stu-id="0bd3e-150">Text Regular</span></span>

<span data-ttu-id="0bd3e-151">Sitka 文字</span><span class="sxs-lookup"><span data-stu-id="0bd3e-151">Sitka Text</span></span>

<span data-ttu-id="0bd3e-152">標準</span><span class="sxs-lookup"><span data-stu-id="0bd3e-152">Regular</span></span>

<span data-ttu-id="0bd3e-153">錫特卡</span><span class="sxs-lookup"><span data-stu-id="0bd3e-153">Sitka</span></span>

<span data-ttu-id="0bd3e-154">橫幅粗體</span><span class="sxs-lookup"><span data-stu-id="0bd3e-154">Banner Bold</span></span>

<span data-ttu-id="0bd3e-155">Sitka 橫幅</span><span class="sxs-lookup"><span data-stu-id="0bd3e-155">Sitka Banner</span></span>

<span data-ttu-id="0bd3e-156">粗體</span><span class="sxs-lookup"><span data-stu-id="0bd3e-156">Bold</span></span>

<span data-ttu-id="0bd3e-157">錫特卡</span><span class="sxs-lookup"><span data-stu-id="0bd3e-157">Sitka</span></span>

<span data-ttu-id="0bd3e-158">標題斜體</span><span class="sxs-lookup"><span data-stu-id="0bd3e-158">Caption Italic</span></span>

<span data-ttu-id="0bd3e-159">Sitka 標題</span><span class="sxs-lookup"><span data-stu-id="0bd3e-159">Sitka Caption</span></span>

<span data-ttu-id="0bd3e-160">斜體</span><span class="sxs-lookup"><span data-stu-id="0bd3e-160">Italic</span></span>



 

<span data-ttu-id="0bd3e-161">從印刷樣式系列模型到 WSS 系列模型的名稱投影可以套用至非變數字型，並套用至變數字型的已命名實例。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-161">The projection of names from a typographic family model to the WSS family model can be applied to non-variable fonts, and to the named instances of variable fonts.</span></span> <span data-ttu-id="0bd3e-162">但是，您無法從變數字型的持續設計變化空間，針對其他非命名的實例進行這項操作。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-162">This cannot be done, however, for other, non-named instances from the continuous design-variation space of a variable font.</span></span> <span data-ttu-id="0bd3e-163">基於這個理由，支援變數字型的完整功能，需要 Api 設計來參考印刷樣式系列內的臉部，而不受限制的變異軸和軸值集。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-163">For this reason, support for the complete functionality of variable fonts will require APIs designed to reference faces within a typographic family in terms of an unconstrained set of variation axes and axis values.</span></span> 

## <a name="opentype-variable-font-support-in-directwrite"></a><span data-ttu-id="0bd3e-164">DirectWrite 中的 OpenType 變數字型支援</span><span class="sxs-lookup"><span data-stu-id="0bd3e-164">OpenType variable font support in DirectWrite</span></span>

<span data-ttu-id="0bd3e-165">在 Windows 10 Creators Update 版本中，OpenType 變數字型格式仍然是非常新的，而字型廠商、平臺和應用程式仍在執行新格式的流程中。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-165">As of the release of the Windows 10 Creators Update, the OpenType variable font format is still very new, and font vendors, platforms and apps are still in the process of implementing the new format.</span></span> <span data-ttu-id="0bd3e-166">此更新會在 DirectWrite 中提供此格式的初始實作為。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-166">This update provides initial implementation for this format in DirectWrite.</span></span> 

<span data-ttu-id="0bd3e-167">DirectWrite 內部已更新為支援 OpenType 變數字型。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-167">DirectWrite internals have been updated to support OpenType variable fonts.</span></span> <span data-ttu-id="0bd3e-168">使用目前的 Api，這會提供變數字型之任何命名實例的支援。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-168">Using current APIs, this provides support for any named instances of a variable font.</span></span> <span data-ttu-id="0bd3e-169">這項支援可用於完整的工作流程，從列舉的實例列舉、已命名實例的選取專案、用於版面配置和成形，到轉譯和列印。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-169">This support can be used for complete workflows — from enumeration of the named instances, selection of a named instance, use in layout and shaping, to rendering and printing.</span></span> <span data-ttu-id="0bd3e-170">為了讓也針對某些作業使用 GDI 文字 interop 的應用程式受益，也在現有的 GDI Api 中新增了類似的支援。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-170">For the benefit of apps that also use GDI text interop for certain operations, similar support has also been added in existing GDI APIs.</span></span> 

<span data-ttu-id="0bd3e-171">在 Windows 10 Creators Update 中，DirectWrite 不支援使用變數字型之連續變化功能的任意實例。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-171">In the Windows 10 Creators Update, DirectWrite does not support arbitrary instances that utilize the continuous-variation capability of variable fonts.</span></span>

<span data-ttu-id="0bd3e-172">在許多作業中，變數字型的命名實例 DirectWrite 中的行為，無法與非變數字型的行為進行區別。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-172">In many operations, the behavior in DirectWrite of named instances of a variable font cannot be distinguished from the behavior of non-variable fonts.</span></span> <span data-ttu-id="0bd3e-173">由於支援是使用現有的 DirectWrite Api 所提供，因此，已命名的變數字型實例甚至可以在許多現有的 DirectWrite 應用程式中運作，而不需要進行任何變更。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-173">And since support is provided using existing DirectWrite APIs, the named instances of variable fonts can even work in many existing DirectWrite apps without any changes.</span></span> <span data-ttu-id="0bd3e-174">不過，在某些情況下可能會發生例外狀況：</span><span class="sxs-lookup"><span data-stu-id="0bd3e-174">Exceptions may apply, however, in certain situations:</span></span>  

-   <span data-ttu-id="0bd3e-175">如果應用程式直接處理特定作業的字型資料。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-175">If an app processes font data directly for certain operations.</span></span> <span data-ttu-id="0bd3e-176">例如，如果應用程式直接從字型檔案讀取圖像大綱資料，以建立某些視覺效果。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-176">For example, if an app reads glyph outline data directly from the font file to create certain visual effects.</span></span>
-   <span data-ttu-id="0bd3e-177">如果應用程式使用協力廠商程式庫來進行某些作業。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-177">If an app uses a third-party library for certain operations.</span></span> <span data-ttu-id="0bd3e-178">例如，如果應用程式使用 DirectWrite 進行配置，則會取得最終的字元索引和位置，但接著會使用協力廠商程式庫來轉譯。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-178">For example, if an app uses DirectWrite for layout, to get final glyph indices and positions, but then uses a third-party library for rendering.</span></span>
-   <span data-ttu-id="0bd3e-179">如果應用程式將字型資料內嵌至檔，或以其他方式將字型資料傳遞給下游處理常式。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-179">If an app embeds font data into a document or in some other way passes font data to a downstream process.</span></span>

<span data-ttu-id="0bd3e-180">如果使用不支援變數字型的執行來執行作業，則這些作業可能不會產生預期的結果。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-180">If operations are performed using implementations that do not support variable fonts, then these operations may not produce the expected results.</span></span> <span data-ttu-id="0bd3e-181">例如，可能會為變數字型的一個命名實例計算圖像位置，但可能會以不同的已命名實例來呈現圖像。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-181">For example, glyph positions might be calculated for one named instance of the variable font, but the glyphs might be rendered assuming a different named instance.</span></span> <span data-ttu-id="0bd3e-182">視應用程式的執行而定，結果可能會在某些環境中運作，但無法在其他可能使用其他程式庫的內容中運作。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-182">Depending on application implementation, results may work in some contexts but not in other contexts in which other libraries may be used.</span></span> <span data-ttu-id="0bd3e-183">例如，文字可能會在螢幕上正確顯示，但在列印時則不會正確顯示。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-183">For example, text may display correctly on screen, but not when printed.</span></span> <span data-ttu-id="0bd3e-184">如果僅使用 DirectWrite 來執行端對端工作流程，則可能會對變數字型的命名實例有正確的行為。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-184">If end-to-end workflows are implemented using only DirectWrite, then correct behavior for named instances of a variable font can be expected.</span></span> 

<span data-ttu-id="0bd3e-185">由於現有的 DirectWrite Api 支援使用權數/延展/樣式模型的臉部選取，因此使用其他變異軸的已命名字型實例將會從一般的印刷樣式系列模型投射到 WSS 模型中，如上所述。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-185">Since existing DirectWrite APIs support face selection using the weight/stretch/style model, the named instances of fonts that use other axes of variation will be projected from the general, typographic family model into the WSS model, as described above.</span></span> <span data-ttu-id="0bd3e-186">這會依賴變數字型，包括「樣式屬性」 ( ' STAT ' ) 資料表（具有軸值 subtables），而 DWrite 會使用此標記來區別臉部名稱標記，以從與其他軸變異相關的標記中指定權數、stretch 或樣式屬性。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-186">This relies on a variable font including a “style attributes” (‘STAT’) table with axis-value subtables, which DWrite uses to distinguish face name tokens that designate weight, stretch or style attributes from tokens that pertain to other axes of variation.</span></span>  

<span data-ttu-id="0bd3e-187">如果變數字型未包含 OpenType 規格所需的「STAT」資料表，則 DirectWrite 會將字型視為包含預設實例的非變數字型。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-187">If a variable font does not include a ‘STAT’ table, as required for variable fonts by the OpenType specification, then DirectWrite will treat the font as a non-variable font containing only the default instance.</span></span>  

<span data-ttu-id="0bd3e-188">如果字型包含 ' STAT ' 資料表，但不包含適當的軸值 subtables，這可能會導致非預期的結果，例如擁有具有相同臉部名稱的多個臉部。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-188">If a font does contain a ‘STAT’ table but it does not include appropriate axis-value subtables, this may lead to unexpected results, such as having multiple faces that have identical face names.</span></span> <span data-ttu-id="0bd3e-189">這一次不支援這類字型。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-189">Such fonts are not supported at this time.</span></span> 

<span data-ttu-id="0bd3e-190">OpenType 規格允許以兩種格式的其中一種來表示字元外框資料：使用 ' glyf ' 資料表（使用 TrueType 大綱和提示格式），或使用 ' CFF ' 資料表（使用壓縮字型格式 ( "CFF" ) 標記法）。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-190">The OpenType specification allows for glyph outline data to be represented in one of two formats: using a ‘glyf’ table, which uses TrueType outline and hinting format, or using a ‘CFF’ table, which uses Compact Font Format (“CFF”) representation.</span></span> <span data-ttu-id="0bd3e-191">在具有 TrueType 大綱的變數字型中，會繼續使用 ' glyf ' 資料表，並且會使用提供外框之變異資料的 ' gvar ' 資料表來補充。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-191">In a variable font with TrueType outlines, the ‘glyf’ table continues to be used, and is supplemented with a ‘gvar’ table that supplies the variation data for the outlines.</span></span> <span data-ttu-id="0bd3e-192">這表示具有 TrueType 大綱的變數字型預設實例只會使用不具變數字型支援的舊版軟體所支援的傳統 OpenType 資料表。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-192">This means that the default instance of a variable font with TrueType outlines uses only traditional OpenType tables that will be supported in older software that has no variable font support.</span></span> <span data-ttu-id="0bd3e-193">不過，在具有 CFF 大綱的變數字型中，' CFF ' 資料表會被 ' CFF2 ' 資料表取代，這會將預設大綱資料和相關聯的變化資料封裝在一個資料表中。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-193">In a variable font with CFF outlines, however, the ‘CFF’ table is superseded by the ‘CFF2’ table, which encapsulates the default outline data and the associated variation data in one table.</span></span> <span data-ttu-id="0bd3e-194">CFF 資料是由適用于 TrueType 資料的個別轉譯器所處理，而 ' CFF2 ' 資料表則需要具有 ' CFF2 ' 支援的更新 CFF 轉譯器。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-194">CFF data is processed by a separate rasterizer from that used for TrueType data, and a ‘CFF2’ table requires an updated CFF rasterizer that has ‘CFF2’ support.</span></span> <span data-ttu-id="0bd3e-195">較舊的 CFF rasterizers 無法處理 ' CFF2 ' 資料表。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-195">A ‘CFF2’ table cannot be processed by older CFF rasterizers.</span></span> <span data-ttu-id="0bd3e-196">針對具有 CFF 大綱資料的變數字型，這表示即使是預設實例也無法在較舊的軟體中運作。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-196">For a variable font with CFF outline data, this means that even the default instance will not work in older software.</span></span> 

<span data-ttu-id="0bd3e-197">在 Windows 10 Creators Update 中，DirectWrite 不支援使用 ' CFF2 ' 資料表 CFF 大綱資料的變數字型。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-197">In the Windows 10 Creators Update, DirectWrite does not support variable fonts with CFF outline data using the ‘CFF2’ table.</span></span> 

## <a name="using-opentype-variable-fonts"></a><span data-ttu-id="0bd3e-198">使用 OpenType 變數字型</span><span class="sxs-lookup"><span data-stu-id="0bd3e-198">Using OpenType variable fonts</span></span>

<span data-ttu-id="0bd3e-199">您可以輕鬆地使用 OpenType 變數字型，並記住上面所述的目前限制：</span><span class="sxs-lookup"><span data-stu-id="0bd3e-199">OpenType variable fonts can be easy to use, keeping in mind the current limitations noted above:</span></span> 

-   <span data-ttu-id="0bd3e-200">目前只支援變數字型的命名實例。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-200">Only named instances of a variable font are supported at this time.</span></span>
-   <span data-ttu-id="0bd3e-201">目前只支援使用 TrueType 字元外框大綱資料 (未 CFF 大綱的變數字型) 。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-201">Only variable fonts that use TrueType glyph outline data (not CFF outlines) are supported at this time.</span></span> 
-   <span data-ttu-id="0bd3e-202">如果字型使用權數、stretch 或 style 以外的設計變化軸，則會將名為 instance 的實例投射到 WSS 系列模型中，這可能會導致某些命名的實例顯示為個別的系列， (在過去針對非變數字型) 的情況。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-202">For fonts that use axes of design variation other than weight, stretch or style, named instances will get projected into the WSS family model, which may result in some named instances appearing as separate families (as would happen in the past for non-variable fonts).</span></span> <span data-ttu-id="0bd3e-203">若要支援這種情況，變數字型必須有包含適當軸值 subtables 的 ' STAT ' 資料表。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-203">To support this, variable fonts must have a ‘STAT’ table that includes appropriate axis-value subtables.</span></span>
-   <span data-ttu-id="0bd3e-204">DirectWrite Api 支援變數字型的命名實例，但如果某些作業是在不支援可變字型的舊版執行中執行，則這些作業可能會產生不正確的結果。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-204">Named instances of variable fonts are supported in DirectWrite APIs, but if certain operations are performed in older implementations that do not support variable fonts, those may produce incorrect results.</span></span> 
-   <span data-ttu-id="0bd3e-205">某些 DirectWrite Api 會使用 [**DWRITE \_ 字型 \_ 粗細**](/windows/win32/api/dwrite/ne-dwrite-dwrite_font_weight)、 [**DWRITE \_ 字型 \_ 延展**](/windows/win32/api/dwrite/ne-dwrite-dwrite_font_stretch) 和 [**DWRITE \_ 字型 \_ 樣式**](/windows/win32/api/dwrite/ne-dwrite-dwrite_font_style) 列舉，在選取臉部時指定權數、延展和樣式屬性。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-205">Certain DirectWrite APIs use the [**DWRITE\_FONT\_WEIGHT**](/windows/win32/api/dwrite/ne-dwrite-dwrite_font_weight), [**DWRITE\_FONT\_STRETCH**](/windows/win32/api/dwrite/ne-dwrite-dwrite_font_stretch) and [**DWRITE\_FONT\_STYLE**](/windows/win32/api/dwrite/ne-dwrite-dwrite_font_style) enumerations for specifying weight, stretch and style attributes when selecting faces.</span></span> <span data-ttu-id="0bd3e-206">如果變數字型使用對應的變異軸，但是有許多命名的實例需要更細微的資料細微性，則並非所有的命名實例都可在這些 Api 中選取。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-206">If a variable font uses corresponding variation axes but has many named instances that require finer granularity, not all of the named instances will be selectable in those APIs.</span></span>

<span data-ttu-id="0bd3e-207">符合這些需求的 OpenType 變數字型可以從 Windows shell 安裝，就像其他 OpenType 字型一樣，也可以在應用程式所建立的自訂字型集中使用。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-207">OpenType variable fonts that conform to these requirements can be installed from the Windows shell just like other OpenType fonts, and can also be used in custom font sets created by an app.</span></span>  

<span data-ttu-id="0bd3e-208">當安裝在系統中時，變數字型的所有命名實例都將包含在呼叫 IDWriteFontFamily3：：[**GetSystemFontSet**](/windows/win32/api/dwrite_3/nf-dwrite_3-idwritefactory3-getsystemfontset) 方法所傳回的字型集中。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-208">When installed in the system, all named instances of a variable font will be included in the font set returned by calling the IDWriteFontFamily3::[**GetSystemFontSet**](/windows/win32/api/dwrite_3/nf-dwrite_3-idwritefactory3-getsystemfontset) method.</span></span> <span data-ttu-id="0bd3e-209">請注意，字型組是沒有家族群組階層的一般清單，但集合中的每個專案都有以 WSS 系列模型為基礎的系列名稱屬性。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-209">Note that a font set is a flat list without a family-grouping hierarchy, but each item in the set has a family-name property based on the WSS family model.</span></span> <span data-ttu-id="0bd3e-210">您可以使用 [**IDWriteFontSet：： GetMatchingFonts**](idwritefontset-getmatchingfonts-overload.md) 方法，針對特定的變數字型（名為 instance）篩選字型集。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-210">The font set can be filtered for a particular variable-font named instance using the [**IDWriteFontSet::GetMatchingFonts**](idwritefontset-getmatchingfonts-overload.md) methods.</span></span> <span data-ttu-id="0bd3e-211">但是，如果使用採用 familyName 的 **GetMatchingFonts** 多載，則指定的 familyName 必須使用符合 WSS 字型系列模型的名稱。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-211">If using the **GetMatchingFonts** overload that takes a familyName, though, the familyName specified must use the name conforming to the WSS font-family model.</span></span> <span data-ttu-id="0bd3e-212">您可以使用 [**IDWriteFontSet：： system.configuration.settingsprovider.getpropertyvalues**](/windows/win32/api/dwrite_3/nf-dwrite_3-idwritefontset-getpropertyvalues(dwrite_font_property_id_idwritestringlist)) 方法，使用 DWRITE \_ 字型 \_ 屬性 \_ 識別碼 \_ 系列 \_ 名稱來取得在字型集中出現之 WSS 相容系列名稱的完整清單。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-212">The complete list of WSS-compatible family names occurring in a font set can be obtained using the [**IDWriteFontSet::GetPropertyValues**](/windows/win32/api/dwrite_3/nf-dwrite_3-idwritefontset-getpropertyvalues(dwrite_font_property_id_idwritestringlist)) methods using DWRITE\_FONT\_PROPERTY\_ID\_FAMILY\_NAME.</span></span>  

<span data-ttu-id="0bd3e-213">同樣地，變數字型的所有已命名實例都會在 IDWriteFactory：：[**GetSystemFontCollection**](/windows/win32/api/dwrite/nf-dwrite-idwritefactory-getsystemfontcollection) 方法所傳回的字型集合中表示。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-213">Similarly, all of the named instances of a variable font will be represented in the font collection returned by the IDWriteFactory::[**GetSystemFontCollection**](/windows/win32/api/dwrite/nf-dwrite-idwritefactory-getsystemfontcollection) method.</span></span> <span data-ttu-id="0bd3e-214">因為字型集合的元素是以 WSS 模型為基礎的字型系列，所以變數字型的命名實例可能會在集合中表示為兩個或多個字型系列的成員。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-214">Because the elements of a font collection are font families based on the WSS model, the named instances of a variable font may be represented in a collection as members of two or more font families.</span></span> <span data-ttu-id="0bd3e-215">如果使用 [**IDWriteFontCollection：： FindFamilyName**](/windows/win32/api/dwrite/nf-dwrite-idwritefontcollection-findfamilyname) 方法，則 familyName 參數必須是 WSS 相容的系列名稱。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-215">If the [**IDWriteFontCollection::FindFamilyName**](/windows/win32/api/dwrite/nf-dwrite-idwritefontcollection-findfamilyname) method is used, the familyName parameter must be a WSS-compatible family name.</span></span> <span data-ttu-id="0bd3e-216">若要從字型集合中尋找所有 WSS 相容的系列名稱，應用程式可以在每個系列中執行迴圈，並呼叫 [**IDWriteFontFamily：： GetFamilyNames**](/windows/win32/api/dwrite/nf-dwrite-idwritefontfamily-getfamilynames)，不過，您可以更輕鬆地取得對應的字型集，並使用上述的 [**system.configuration.settingsprovider.getpropertyvalues**](/windows/win32/api/dwrite_3/nf-dwrite_3-idwritefontset-getpropertyvalues(dwrite_font_property_id_idwritestringlist)) 方法。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-216">To find all of the WSS-compatible family names from a font collection, an app can loop through each family and call [**IDWriteFontFamily::GetFamilyNames**](/windows/win32/api/dwrite/nf-dwrite-idwritefontfamily-getfamilynames), though it may be easier to obtain a corresponding font set and use the [**GetPropertyValues**](/windows/win32/api/dwrite_3/nf-dwrite_3-idwritefontset-getpropertyvalues(dwrite_font_property_id_idwritestringlist)) method as described above.</span></span> 

<span data-ttu-id="0bd3e-217">使用自訂字型時，可使用 [自訂字型組](custom-font-sets-win10.md) 主題中所述的各種方法來建立字型集。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-217">When working with custom fonts, various approaches described in the [Custom Font Sets](custom-font-sets-win10.md) topic can be used to create a font set.</span></span> <span data-ttu-id="0bd3e-218">若要將變數字型加入自訂字型集，建議使用 [**IDWriteFontSetBuilder1：： AddFontFile**](/windows/win32/api/dwrite_3/nf-dwrite_3-idwritefontsetbuilder1-addfontfile) 方法，因為它支援變數字型，並會在單一呼叫中加入變數字型的所有已命名實例。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-218">To add a variable font to a custom font set, the [**IDWriteFontSetBuilder1::AddFontFile**](/windows/win32/api/dwrite_3/nf-dwrite_3-idwritefontsetbuilder1-addfontfile) method is recommended since it supports variable fonts and will add all of the named instances of a variable font in a single call.</span></span> <span data-ttu-id="0bd3e-219">目前沒有任何方法可以使用 [**IDWriteFontSetBuilder：： AddFontFaceReference**](/windows/win32/api/dwrite_3/nf-dwrite_3-idwritefontsetbuilder-addfontfacereference(idwritefontfacereference)) 方法，將自訂變數字型的個別名稱實例新增至字型集，因為無法建立字型臉部參考，以指定要從變數字型檔案指定的命名實例。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-219">There is no way at this time to add individual named instances of a custom variable font to a font set using the [**IDWriteFontSetBuilder::AddFontFaceReference**](/windows/win32/api/dwrite_3/nf-dwrite_3-idwritefontsetbuilder-addfontfacereference(idwritefontfacereference)) methods since there is no way to create a font face reference specifying which of the named instances from a variable font file is intended.</span></span> <span data-ttu-id="0bd3e-220">這表示目前沒有任何方法可將自訂字型的命名實例加入至已指派自訂屬性的自訂字型集。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-220">This means that currently there is no way to add named instances of a custom font to a custom font set with custom properties assigned.</span></span> <span data-ttu-id="0bd3e-221">也就是說，自訂變數字型目前無法輕易地與遠端字型的 DirectWrite Api 搭配使用。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-221">That in turn means that custom variable fonts currently cannot easily be used in conjunction with DirectWrite APIs for remote fonts.</span></span> <span data-ttu-id="0bd3e-222">如果系統字型集中包含變數字型的命名實例，則每個已命名實例的字型臉部參考都會存在，而且可以加入自訂的字型集，包括使用自訂屬性值。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-222">If named instances of a variable font are included in a system font set, however, font face references for each named instance will already exist, and these can be added to custom font sets, including with the use of custom property values.</span></span> <span data-ttu-id="0bd3e-223">如需詳細資訊，請參閱自訂字型組主題。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-223">See the Custom Font Sets topic for more details.</span></span> 

<span data-ttu-id="0bd3e-224">使用可變字型時，DirectWrite [**DWRITE \_ 字型 \_ 粗細**](/windows/win32/api/dwrite/ne-dwrite-dwrite_font_weight) 和 [**DWRITE \_ 字型 \_ 延展**](/windows/win32/api/dwrite/ne-dwrite-dwrite_font_stretch) 列舉會緊密地連接至 OpenType 規格中定義的權數和寬度變化軸，但不相同。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-224">When working with variable fonts, the DirectWrite [**DWRITE\_FONT\_WEIGHT**](/windows/win32/api/dwrite/ne-dwrite-dwrite_font_weight) and [**DWRITE\_FONT\_STRETCH**](/windows/win32/api/dwrite/ne-dwrite-dwrite_font_stretch) enumerations are closely connected to the weight and width variation axes defined in the OpenType specification, but are not the same.</span></span> <span data-ttu-id="0bd3e-225">首先，任何變化軸的數值小數位數一律支援小數值，而 fontWeight 和 fontStretch 則使用整數。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-225">First, the numeric scale for any variation axis always supports fractional values, while fontWeight and fontStretch use integers.</span></span> <span data-ttu-id="0bd3e-226">OpenType 權數軸刻度使用的值範圍從1到1000，這也是 fontWeight 所支援的值。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-226">The OpenType weight axis scale uses values ranging from 1 to 1000, which is also supported by fontWeight.</span></span> <span data-ttu-id="0bd3e-227">因此，從變異的權數軸值變更為 fontWeight 相對較小：針對命名實例所報告的 fontWeight 可能會從用來在字型內定義已命名實例的精確值中四捨五入。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-227">Thus the change from a variation weight axis value to fontWeight is relatively minor: the fontWeight reported for a named instance may be rounded from the precise value used to define the named instance within the font.</span></span> <span data-ttu-id="0bd3e-228">DirectWrite fontStretch 和 OpenType 寬度軸刻度的差異較大： DirectWrite 會使用1到9的值，並遵循 OpenType OS/2 資料表的 [usWidthClass](/typography/opentype/spec/os2#uswidthclass) 值，而 opentype 寬度軸刻度則使用表示正常寬度百分比的正值。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-228">The distinction between DirectWrite fontStretch and the OpenType width axis scale is greater: DirectWrite uses values from 1 to 9, following the [usWidthClass](/typography/opentype/spec/os2#uswidthclass) values of the OpenType OS/2 table, while the OpenType width axis scale uses positive values representing a percentage of normal width.</span></span> <span data-ttu-id="0bd3e-229">OpenType 規格中的 [usWidthClass](/typography/opentype/spec/os2#uswidthclass) 檔會提供介於1到9之間的值與百分比標準值之間的對應。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-229">The [usWidthClass](/typography/opentype/spec/os2#uswidthclass) documentation in the OpenType specification provides a mapping between values 1 to 9 and percent-of-normal values.</span></span> <span data-ttu-id="0bd3e-230">從寬度軸值進行轉換時，針對命名實例所報告的 fontStretch 值可能牽涉到四捨五入。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-230">The fontStretch value reported for a named instance may involve rounding when converting from width axis values.</span></span> 

<span data-ttu-id="0bd3e-231">建立 [**IDWriteTextFormat**](/windows/win32/api/dwrite/nn-dwrite-idwritetextformat)時，必須指定字型集合和 WSS 相容的字型屬性 (系列名稱、權數、延展和樣式) 。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-231">When creating an [**IDWriteTextFormat**](/windows/win32/api/dwrite/nn-dwrite-idwritetextformat), a font collection and WSS-compatible font properties (family name, weight, stretch and style) must be specified.</span></span> <span data-ttu-id="0bd3e-232">這也適用于設定 [**IDWriteTextLayout**](/windows/win32/api/dwrite/nn-dwrite-idwritetextlayout) 文字範圍的字型格式屬性時。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-232">This also applies when setting font formatting properties on a [**IDWriteTextLayout**](/windows/win32/api/dwrite/nn-dwrite-idwritetextlayout) text range.</span></span> <span data-ttu-id="0bd3e-233">您可以從 [**IDWriteFontFace3**](/windows/win32/api/dwrite_3/nn-dwrite_3-idwritefontface3) 物件或 [**IDWriteFont**](/windows/win32/api/dwrite/nn-dwrite-idwritefont) 和 [**IDWriteFontFamily**](/windows/win32/api/dwrite/nn-dwrite-idwritefontfamily) 物件（代表特定的已命名實例）中取得屬性。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-233">The properties can be obtained from an [**IDWriteFontFace3**](/windows/win32/api/dwrite_3/nn-dwrite_3-idwritefontface3) object or from [**IDWriteFont**](/windows/win32/api/dwrite/nn-dwrite-idwritefont) and [**IDWriteFontFamily**](/windows/win32/api/dwrite/nn-dwrite-idwritefontfamily) objects that represent a particular named instance.</span></span> <span data-ttu-id="0bd3e-234">如上所述，GetWeight 和 GetStretch 方法所傳回的值，可能會針對用來定義已命名之實例的實際座標軸值進行舍入，但 DirectWrite 會將屬性的組合對應回所需的已命名實例。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-234">As observed above, the values returned by the GetWeight and GetStretch methods may be rounded approximations for the actual axis values used to define the named instance, but DirectWrite will map the combination of properties back to the desired named instance.</span></span> 

<span data-ttu-id="0bd3e-235">同樣地，如果應用程式使用 [**IDWriteFontFallbackBuilder**](idwritefontfallbackbuilder.md) 來建立自訂字型回資料，則會使用與 WSS 相容的系列名稱來指定字元範圍對應的系列。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-235">Similarly, if an app uses [**IDWriteFontFallbackBuilder**](idwritefontfallbackbuilder.md) to create custom font fallback data, families are specified for character-range mappings using WSS-compatible family names.</span></span> <span data-ttu-id="0bd3e-236">DirectWrite 內的字型回復是以家族為基礎，而 DirectWrite 則是在回復系列內選取變異，這是與起始系列變異的最接近之處。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-236">Font fallback within DirectWrite is based on families with DirectWrite selecting a variant within a fallback family that is a nearest match for the variant of the starting family.</span></span> <span data-ttu-id="0bd3e-237">對於涉及加權、stretch 和 style 以外維度的變體，除非特別建立自訂的回溯資料來為具有特定非 WSS 屬性的系列（例如 "Caption" 光學大小變化）提供回溯對應，否則 DirectWrite 目前無法在該回系列內選取這類變異。</span><span class="sxs-lookup"><span data-stu-id="0bd3e-237">For variants that involve dimensions other than weight, stretch and style, DirectWrite currently would not be able to select such variants within a fallback family unless custom fallback data were created specifically to provide fallback mappings for families that have particular non-WSS attributes, such as “Caption” optical size variants.</span></span>

 

 