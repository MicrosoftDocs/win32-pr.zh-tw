---
title: DirectWrite 的新功能
description: 以下是 DirectWrite 新增的一些新功能。
ms.assetid: 2512D222-C6EB-4C2D-80A6-7978FED56F7A
ms.topic: article
ms.date: 09/23/2019
ms.openlocfilehash: 2184ce1df7a9912a67baf1e15aa8c19f6c44f300f991506c505b672025067ae4
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/11/2021
ms.locfileid: "119963808"
---
# <a name="whats-new-in-directwrite"></a>DirectWrite 的新功能

本主題說明各種版本的 Windows 10 [DirectWrite](direct-write-portal.md)中的新功能。

## <a name="windows-app-sdk"></a>Windows 應用程式 SDK

[Windows App SDK](/windows/apps/windows-app-sdk/)引進新版本的 DirectWrite，稱為 DWriteCore。 如需詳細資訊，請參閱 [DWriteCore 總覽](dwritecore-overview.md)。

## <a name="windows-10-may-2019-update"></a>Windows 10 2019 年 5 月更新

未新增或更新 Windows 10 的任何功能或 api，版本 1903 (10.0;組建 18362) &mdash; 也稱為 Windows 10 2019 年5月更新。

## <a name="windows-10-october-2018-update"></a>Windows 10 2018 年 10 月更新

已針對 Windows 10 版本 1809 (10.0 新增或更新下列功能和 api;組建 17763) &mdash; 也稱為 Windows 10 2018 年10月更新。

### <a name="new"></a>新增

- [**DWRITE_FONT_SOURCE_TYPE**](/windows/win32/api/dwrite_3/ne-dwrite_3-dwrite_font_source_type) 列舉
- [**IDWriteFontSet3**](/windows/win32/api/dwrite_3/nn-dwrite_3-idwritefontset3) 介面及其方法

## <a name="windows-10-april-2018-update"></a>Windows 10 2018 4 月更新

已新增或更新 Windows 10 的下列功能和 api，版本 1803 (10.0;組建 17134) &mdash; 也稱為 Windows 10 2018 年4月更新。

### <a name="new"></a>新增

- [**IDWriteFactory7**](/windows/win32/api/dwrite_3/nn-dwrite_3-idwritefactory7) 介面及其方法
- [**IDWriteFontCollection3**](/windows/win32/api/dwrite_3/nn-dwrite_3-idwritefontcollection3) 介面及其方法
- [**IDWriteFontSet2**](/windows/win32/api/dwrite_3/nn-dwrite_3-idwritefontset2) 介面及其方法

## <a name="windows-10-fall-creators-update"></a>Windows 10 Fall Creators Update

已新增或更新 Windows 10 的下列功能和 api，版本 1709 (10.0;組建 16299) &mdash; 也稱為 Windows 10 Fall Creators Update。

### <a name="new"></a>新增

- [**DWRITE_AUTOMATIC_FONT_AXES**](/windows/win32/api/dwrite_3/ne-dwrite_3-dwrite_automatic_font_axes) 列舉
- [**DWRITE_FONT_AXIS_ATTRIBUTES**](/windows/win32/api/dwrite_3/ne-dwrite_3-dwrite_font_axis_attributes) 列舉
- [**DWRITE_FONT_AXIS_TAG**](/windows/win32/api/dwrite_3/ne-dwrite_3-dwrite_font_axis_tag) 列舉
- [**DWRITE_FONT_FAMILY_MODEL**](/windows/win32/api/dwrite_3/ne-dwrite_3-dwrite_font_family_model) 列舉
- [**IDWriteFactory6**](/windows/win32/api/dwrite_3/nn-dwrite_3-idwritefactory6) 介面及其方法
- [**IDWriteFontCollection2**](/windows/win32/api/dwrite_3/nn-dwrite_3-idwritefontcollection2) 介面及其方法
- [**IDWriteFontFace5**](/windows/win32/api/dwrite_3/nn-dwrite_3-idwritefontface5) 介面及其方法
- [**IDWriteFontFaceReference1**](/windows/win32/api/dwrite_3/nn-dwrite_3-idwritefontfacereference1) 介面及其方法
- [**IDWriteFontFallback1**](/windows/win32/api/dwrite_3/nn-dwrite_3-idwritefontfallback1) 介面及其方法
- [**IDWriteFontFamily2**](/windows/win32/api/dwrite_3/nn-dwrite_3-idwritefontfamily2) 介面及其方法
- [**IDWriteFontList2**](/windows/win32/api/dwrite_3/nn-dwrite_3-idwritefontlist2) 介面及其方法
- [**IDWriteFontResource**](/windows/win32/api/dwrite_3/nn-dwrite_3-idwritefontresource) 介面及其方法
- [**IDWriteFontSet1**](/windows/win32/api/dwrite_3/nn-dwrite_3-idwritefontset1) 介面及其方法
- [**IDWriteFontSetBuilder2**](/windows/win32/api/dwrite_3/nn-dwrite_3-idwritefontsetbuilder2) 介面及其方法
- [**IDWriteTextFormat3**](/windows/win32/api/dwrite_3/nn-dwrite_3-idwritetextformat3) 介面及其方法
- [**IDWriteTextLayout4**](/windows/win32/api/dwrite_3/nn-dwrite_3-idwritetextlayout4) 介面及其方法
- [**DWRITE_MAKE_FONT_AXIS_TAG**](/windows/win32/api/dwrite_3/nf-dwrite_3-dwrite_make_font_axis_tag) 宏
- [**DWRITE_FONT_AXIS_RANGE**](/windows/win32/api/dwrite_3/ns-dwrite_3-dwrite_font_axis_range) 結構
- [**DWRITE_FONT_AXIS_VALUE**](/windows/win32/api/dwrite_3/ns-dwrite_3-dwrite_font_axis_value) 結構

### <a name="moved"></a>搬

從[](/windows/win32/api/dcommon/ne-dcommon-dwrite_glyph_image_formats)移至的 DWRITE_GLYPH_IMAGE_FORMATS `dwrite_3.h` 列舉 `dcommon.h` 。

## <a name="windows-10-creators-update"></a>Windows 10 Creators Update

已新增或更新 Windows 10 的下列功能和 api，版本 1703 (10.0;組建 15063) &mdash; 也稱為 Windows 10 Creators Update。

### <a name="expanded-api-support-for-cloud-fonts-and-custom-font-sets"></a>適用于雲端字型和自訂字型組的擴充 API 支援

Windows 10 包含的 api 可讓應用程式輕鬆地從 Windows 字型服務存取字型。 在 Windows 10 Creators Update 中，會擴充遠端字型的 api，讓您可以輕鬆地從網路上的其他來源存取可使用 HTTP 或 HTTPS 存取的字型。 

新的遠端字型 Api 可以搭配公用或私用 Web 服務使用。 此外，它們也可以用來存取原始的 OpenType 字型檔案 (. ttf、. otf、simsun18030.ttc、. otc-n-us-sat-bsa-press) 或以 [WOFF](https://www.w3.org/TR/WOFF/) 或 [WOFF2](https://www.w3.org/TR/WOFF2/) 容器格式封裝的字型。 新的 Api 會與現有 Api 搭配使用，以將下載遠端字型資料和處理實際下載程式的要求排入佇列。

其他新的 Api 可讓應用程式更容易使用儲存在本機檔案系統中或載入至記憶體緩衝區的自訂字型。

如需有關使用遠端字型、自訂字型組或 WOFF/WOFF2 容器格式之新 Api 的詳細資訊，請參閱下列主題：

[自訂字型集](custom-font-sets-win10.md)

另請參閱該主題中提供的 API 參考主題連結。  [DirectWrite 的自訂字型組範例](https://github.com/Microsoft/Windows-classic-samples/tree/master/Samples/DirectWriteCustomFontSets/)也會說明使用新的和現有的 api 來處理自訂字型。 此範例說明幾個不同案例的程式碼執行，包括磁片上的本機字型、網路上的遠端字型、記憶體內部字型資料，以及壓縮的 WOFF 或 WOFF2 格式的字型。

### <a name="initial-support-for-opentype-font-variations"></a>OpenType 字型變化的初始支援

OpenType 字型格式規格的1.8 版引進了一種令人興奮的新延伸模組，稱為 OpenType 字型變化。 DirectWrite 已在 Windows 10 Creators Update 中更新，以支援變數字型的命名實例。 如需詳細資訊，請參閱下列主題：

[OpenType 變數字型](opentype-variable-fonts.md)

## <a name="windows-10-anniversary-update"></a>Windows 10 年度更新

已新增或更新 Windows 10 的下列功能和 api，版本 1607 (10.0;組建 14393) &mdash; 也稱為 Windows 10 周年更新。

### <a name="improved-support-for-color-fonts"></a>改善的色彩字型支援

從 Windows 10 周年更新開始，DirectWrite 為各種不同的色彩字型格式提供內建支援，可讓開發人員在其 DirectWrite 提供的應用程式中使用比以往更多的字型類型。 這包括下列項目的支援：

-   ' COLR ' OpenType 資料表，可在字型中啟用精簡向量內容。 自 Windows 8.1 之後 (支援。 ) 
-   「SVG」 OpenType 資料表，可在字型中啟用 SVG 內容。
-   ' CBDT ' OpenType 資料表，可在字型中啟用色彩點陣圖內容。
-   ' Sbix ' OpenType 資料表，可在字型中啟用色彩點陣圖內容。

使用 DirectWrite 進行文字轉譯的 [Direct2D](../direct2d/direct2d-portal.md)，會在啟用 [ [**D2D1 \_ 繪圖 \_ 文字 \_ 選項 \_ 啟用 \_ 色彩 \_ 字型**](/windows/win32/api/d2d1/ne-d2d1-d2d1_draw_text_options)] 旗標時自動支援這些色彩字型格式。 如需詳細資訊，請參閱下列主題：

-   [色彩字型](color-fonts.md)
-   [DirectWrite 色符號範例](https://github.com/Microsoft/Windows-universal-samples/tree/master/Samples/DWriteColorGlyph)

### <a name="support-for-adobe-typekit-and-other-font-service-clients"></a>Adobe Typekit 和其他字型服務用戶端的支援

某些字型服務（例如 Adobe Typekit）具有用戶端公用程式，可讓使用者從服務載入字型，並在其 Windows 電腦上的不同應用程式中使用這些字型。 這些公用程式通常是藉由對 GDI 發出執行時間呼叫以載入其他字型來運作，而不是在系統上永久安裝字型。 基於該設計，在舊版 Windows，字型將可在以 GDI 為基礎的應用程式中使用，但不能在 DirectWrite 的應用程式中使用。 從 Windows 10 周年更新開始，這類公用程式所載入的字型也會在 DirectWrite 和 GDI 中提供使用。

藉由呼叫 [**IDWriteFactory：： GetSystemFontCollection**](/windows/win32/api/dwrite/nf-dwrite-idwritefactory-getsystemfontcollection) 方法所取得的系統字型集合，可以看到字型服務公用程式所載入的字型。 因為字型服務通常會遵循每一使用者授權模型，所以這些公用程式所載入的字型會以每個使用者為基礎來管理。 如此一來，現有的 DirectWrite 應用程式就可以利用使用者使用這類服務所取得的字型，而不需要在應用程式中變更任何程式碼，為使用者提供更順暢的體驗。

### <a name="support-for-opentype-collections-using-cff-outlines"></a>支援使用 CFF 大綱的 OpenType 集合

OpenType 和 TrueType 字型格式有很長的支援能夠將多個字型封裝在單一字型檔案中，稱為「字型集合」。 OpenType 規格一律允許字型使用 TrueType 或 CFF 格式的圖像外框資料。 不過，在最近，只有在使用 TrueType 格式的集合中，才允許該規格使用 TrueType 格式。 OpenType 1.7 版現在可讓集合使用 TrueType 或 CFF 格式的圖像外框資料。 從 Windows 10 周年更新開始，DirectWrite 將會使用 CFF 大綱資料來支援 OpenType 集合。

## <a name="windows-10"></a>Windows 10

### <a name="windows-font-service-integration"></a>Windows 字型服務整合

從 Windows 10 開始，包含在 Windows 中的字型可在線上服務中取得，而且可透過任何 Windows 10 裝置上的 DirectWrite 存取。 這適用于所有 Windows 10 版本，包括 Windows 10 行動裝置版、Xbox 和 HoloLens 以及桌面用戶端。 這可讓應用程式使用任何 Windows 字型來顯示內容，即使該字型目前未安裝在裝置上也一樣。

xaml 架構已實 DirectWrite 字型服務機制的支援，這表示使用 XAML 的任何應用程式都不需要變更程式碼，就能利用字型服務。 可下載的字型 [ (XAML) 程式碼範例](https://github.com/Microsoft/Windows-universal-samples/tree/master/Samples/XamlCloudFontIntegration) 會示範這一點。 直接呼叫 DirectWrite api 的應用程式，必須使用新的 api 來利用字型服務機制。 如需詳細資訊，請參閱下列主題：

-   [**IDWriteFactory3：： GetSystemFontCollection**](/windows/win32/api/dwrite_3/nf-dwrite_3-idwritefactory3-getsystemfontcollection) 方法
-   [**IDWriteTextLayout3**](idwritetextlayout3.md) 介面
-   [**IDWriteFontDownloadQueue**](/windows/win32/api/dwrite_3/nn-dwrite_3-idwritefontdownloadqueue) 介面
-   [**IDWriteFontDownloadListener**](/windows/win32/api/dwrite_3/nn-dwrite_3-idwritefontdownloadlistener) 介面

可下載的字型[ (DirectWrite) 程式碼範例](https://github.com/Microsoft/Windows-universal-samples/tree/master/Samples/DWriteTextLayoutCloudFont)說明如何使用幾個新的 api。

### <a name="font-set-apis"></a>字型組 Api

DirectWrite 的字型集合介面會提供一組字型的視圖，這些字型是依字型家族、粗細、延展和樣式做為子系列屬性所組成。 就內部而言，DirectWrite 使用具有各種屬性之字型的一般清單來執行字型集合介面。 這種方法更有彈性，因為它可以支援加權/延展/樣式系列的列舉，但也可以支援使用其他字型屬性進行查詢和篩選。

在 Windows 10 中，應用程式可透過 IDWriteFontSet 和相關的 api 取得更具彈性的字型處理機制。 例如，您可以使用字型組 Api 來建立自訂的字型選擇器使用者介面，利用自訂字型集中的應用程式自訂字型屬性。

如需詳細資訊，請參閱下列主題：

-   [**IDWriteFontSet**](/windows/win32/api/dwrite_3/nn-dwrite_3-idwritefontset) 介面
-   [**IDWriteFontSetBuilder**](/windows/win32/api/dwrite_3/nn-dwrite_3-idwritefontsetbuilder) 介面
-   [**DWRITE \_字型 \_ 屬性 \_ 識別碼**](/windows/win32/api/dwrite_3/ne-dwrite_3-dwrite_font_property_id) 列舉
-   [**IDWriteFontFactory3：： GetSystemFontSet**](/windows/win32/api/dwrite_3/nf-dwrite_3-idwritefactory3-getsystemfontset) 方法

### <a name="new-text-layout-line-spacing-modes"></a>新的文字-版面配置行間距模式

DirectWrite 的文字格式和文字版面配置介面支援新的行間距模式。 在舊版中，DirectWrite 的文字版面配置實作為行間距，其中每一行的高度是根據行內最高的專案（ (「預設」) 模式）自動設定，或是將所有線條的行間距設定為應用程式所決定的一致高度 (「統一」模式) 。 在 Windows 10 中，支援多個「比例」的行間距模式，可為應用程式提供更多的行間距行為選項。 如需詳細資訊，請參閱下列主題：

-   [**IDWriteTextLayout3**](idwritetextlayout3.md) 介面
-   [**IDWriteTextLayout3：： SetLineSpacing**](idwritetextlayout3-setlinespacing.md) 方法
-   [**DWRITE \_行距 \_**](/windows/win32/api/Dwrite_3/ns-dwrite_3-dwrite_line_spacing) 結構
-   [**DWRITE \_行 \_ 間距 \_ 方法**](/windows/win32/api/dwrite/ne-dwrite-dwrite_line_spacing_method) 列舉
-   [**DWRITE \_字型 \_ 行 \_ 間距 \_ 用法**](/windows/win32/api/dwrite_3/ne-dwrite_3-dwrite_font_line_gap_usage) 列舉
-   [**IDWriteTextLayout3：： GetLineMetrics**](idwritetextlayout3-getlinemetrics.md) 方法
-   [**DWRITE \_LINE \_ METRICS1**](/windows/win32/api/dwrite_3/ns-dwrite_3-dwrite_line_metrics1) 結構

[行間距 (DirectWrite) 程式碼範例](https://github.com/Microsoft/Windows-universal-samples/tree/master/Samples/DWriteLineSpacingModes)說明如何使用幾個新的 api，同時也提供所有不同行間距模式的視覺效果，讓您更容易瞭解可用的各種行間距選項。

### <a name="gdi-interop"></a>GDI interop

自從 Windows 7 的簡介中，DirectWrite 為原本使用 GDI 的字型模型、文字配置和轉譯所執行的應用程式，提供了遷移路徑。 這是透過 \[ \[ IDWriteGdiInterop 介面提供 \] \] 。 在 Windows 10 中，其他 api 會提供額外的 GDI interop 功能。 如需詳細資訊，請參閱下列主題：

-   [**IDWriteGdiInterop1**](/windows/win32/api/dwrite_3/nn-dwrite_3-idwritegdiinterop1) 介面

## <a name="windows-81"></a>Windows 8.1

### <a name="rendering-color-fonts"></a>轉譯色彩字型

從 Windows Windows 8.1 開始，DirectWrite 提供色彩字型的支援。 [Direct2D](../direct2d/direct2d-portal.md)（使用 DirectWrite 進行文字轉譯）已新增列舉值 D2D1 \_ 繪製 \_ 文字 \_ 選項 \_ 啟用 \_ 色彩字型， \_ 以在繪製文字時啟用這項功能。 如需詳細資訊，請參閱下列主題：

-   [**D2D1 \_繪製 \_ 文字 \_ 選項**](/windows/win32/api/d2d1/ne-d2d1-d2d1_draw_text_options) 列舉
-   [**IDWriteFactory2：： TranslateColorGlyphRun**](/windows/win32/api/dwrite_2/nf-dwrite_2-idwritefactory2-translatecolorglyphrun) 方法

## <a name="windows-8"></a>Windows 8

新的 factory 介面 [**IDWriteFactory1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritefactory1)，可用來建立其他可用的介面。

其他字型屬性，例如： super/下標、插入號斜率、PANOSE 和 Unicode 範圍。

-   [**IDWriteFont1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritefont1)
-   [**IDWriteFontFace1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritefontface1)

間距改善，例如：控制字元間距、舊版的字偶間距組合和對齊方式。 如需詳細資訊，請參閱 [理由、字偶間距調整及間距](justification--kerning--and-spacing.md) 主題。

-   [**IDWriteTextLayout1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextlayout1)
-   [**IDWriteTextAnalyzer1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalyzer1)

改進的轉譯目標和參數。

-   [**IDWriteBitmapRenderTarget1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritebitmaprendertarget1)
-   [**IDWriteRenderingParams1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwriterenderingparams1)

文字複雜性分析改善。

-   [**IDWriteTextAnalyzer1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalyzer1)

新的腳本屬性、新的腳本支援 (Unicode 6) 、字型回溯新增、配對括弧和雙向增強。

字型快取效能增強功能。 從開始 Windows 8 字型快取是全域的，並且會在電腦開機時啟動。

新的轉譯模式。

從 Windows 8 開始， [DirectWrite](direct-write-portal.md)支援許多功能，可協助您為全球市場提供應用程式。

以下有幾個領域可協助您執行可針對全球各地客戶量身打造的 rich text 應用程式。

### <a name="chinese-japanese-and-korean-extensions-c--d"></a>中文、日文和韓文擴充功能 C & D

在幾年，Unicode 協會都會將一份標準化的新增功能，釋出到中文、日文和韓文統一的表意文字區塊。 使用 Unicode 6.0 修訂時，它們已釋放擴充功能區塊 C 和 D。您可以在 Unicode 網站 [擴充功能 C](https://www.unicode.org/charts/PDF/U2A700.pdf) 和 [副檔名 D](https://www.unicode.org/charts/PDF/U2B740.pdf)上找到這些表意文字的區塊。

從 Windows 8 開始， [DirectWrite](direct-write-portal.md)支援這些新的標準 CJK 表意文字區塊的 Unicode 字碼指標，讓您可以在 DirectWrite 應用程式中使用它們。

### <a name="indian-rupee-symbol"></a>印度盧比符號

在2005年3月，印度政府宣佈了一個競賽，以選擇印度盧比貨幣的符號。 在許多競賽之後，在2010年7月15日，印度政府會選擇由 d. Udaya Kumar 所建立的設計，而[DirectWrite](direct-write-portal.md)包含系結至符號的 Unicode 點的支援。 因此，DirectWrite apps 現在支援此貨幣符號。

### <a name="emoji"></a>Emoji

[DirectWrite](direct-write-portal.md)現在支援在應用程式中使用表情。 舊版的 DirectWrite，如果您嘗試轉譯表情漢字，則會顯示遺漏的圖像方塊。 從 Windows 8 開始，DirectWrite 支援與表情相關聯的 unicode codeblock，因此，如果您的應用程式使用表情的 unicode 標準字碼指標，則會顯示適當的字元。

### <a name="myanmar-tiffinagh-and-old-hangul-languages"></a>緬甸、Tiffinagh 和舊的韓文語言

從 Windows 8 開始， [DirectWrite](direct-write-portal.md)支援對應至緬甸、Tiffinagh 和舊的韓文語言中之字元的 Unicode 字碼指標區塊，因此您可以建立包含這三種語言之文字的應用程式。 除了支援這些字元以外，DirectWrite 還支援舊的韓文處理換行的獨特方式。

### <a name="new-scripts"></a>新腳本

從 Windows 8 開始， [**GetScriptProperties**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-getscriptproperties)方法會傳回一些新腳本的資訊。 以下是在 Windows 8 和之後[DirectWrite](direct-write-portal.md)支援的腳本清單。

-   Avestan
-   語
-   文
-   Brahmi
-   埃及 hieroglyphics
-   英制 Aramaic
-   Inscriptional Pahlavi
-   Inscriptional Parthian
-   爪哇文
-   Kaithi
-   Fraser) 的傈僳文 (
-   阿拉米
-   曼尼普爾文
-   舊南阿拉伯
-   舊的土耳其文 (的) 
-   撒 瑪利亞
-   泰 Tham (Lanna) 
-   泰樂文
