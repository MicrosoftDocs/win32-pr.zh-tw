---
title: 一般移植指導方針
description: 將32位應用程式移植到64位 Microsoft Windows 將比將16位應用程式移植到32位 Windows 更容易。 但是，透過一些審慎的規劃，移動會更順暢。 以下是一些一般的指導方針。
ms.assetid: 28c1656e-93a2-441b-8946-18017e0b2b29
keywords:
- 將32位應用程式移植到64位 Windows 64 位 Windows 程式設計
- 64位 Windows 程式設計指南64位 Windows 程式設計，移植指導方針
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d31734edd8b85bd61b8b84cb2c66d835f0085ac1
ms.sourcegitcommit: 35bb565804eaeed7ac5503595753f59d120076dd
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 02/09/2021
ms.locfileid: "104195670"
---
# <a name="general-porting-guidelines"></a>一般移植指導方針

將32位應用程式移植到64位 Microsoft Windows 將比將16位應用程式移植到32位 Windows 更容易。 但是，透過一些審慎的規劃，移動會更順暢。 以下是一些一般的指導方針。

## <a name="planning"></a>規劃

-   判斷埠所需的工作量量。 藉由識別下列專案來量測涉及多少工作：
    -   問題 32-位代碼。 使用64位編譯器編譯您的32位程式碼，並檢查錯誤和警告的範圍。
    -   共用元件或相依性。 判斷您應用程式中的哪些元件源自其他小組，以及這些小組是否計畫開發64位版本的程式碼。
    -   舊版或元件代碼。 16位的 Windows 應用程式不會在64位的 Windows 上執行，而且必須重寫。 在 WOW64 中執行 x86 程式碼時，您可能會想要重寫此程式碼，以利用 Intel Itanium 架構的速度。
-   移植整個應用程式，而不只是部分的應用程式。

    雖然您可以將應用程式的部分或限制程式碼限制為使用/LARGEADDRESSAWARE：否，但這項策略會針對長期難題交易短期的取得。

    > [!Note]  
    > /LARGEADDRESSAWARE： ARM64 二進位檔的 NO 會被忽略。

     

-   尋找不會移植的技術替代。

    某些技術（包括 DAO (資料存取物件) 和 Jet Red database engine）將不會移植到64位的 Windows。

-   將您的64位版本視為個別的產品版本。

    雖然您的64位產品可能與您的32位共用相同的程式碼基底，但它需要額外的測試，而且可能會有其他的發行考慮。

## <a name="development"></a>部署

-   立即開始開發符合規範的程式碼。

    開發人員可以使用最新的 Windows 標頭檔和新的資料類型來開始撰寫符合規範的程式碼，而不會對32位的產品開發造成負面影響。 如需詳細資訊，請參閱 [準備開始64位 Windows](getting-ready-for-64-bit-windows.md)。

-   確定您的程式碼可以同時針對 32-和64位 Windows 進行編譯。

    新的資料模型的設計目的，是為了允許從單一程式碼基底建立32和64位應用程式，但只需進行一些修改。 SQL Server 和 Windows 開發團隊正在從相同的程式碼基底開發32和64位版本的產品。

-   使用編譯器的新優化功能，以獲得最佳效能。

    Intel Itanium 處理器的程式碼優化比針對 x86 更為重要。 編譯器會假設有許多先前由微處理器處理的優化函數。 您可以使用編譯器的兩項新優化功能，將64位應用程式的效能最大化：特性 *指引優化* 和 *整個程式優化*。 這兩項功能會導致組建時間更長，且需要早期開發良好的測試案例。

    特性 *指引優化* 牽涉到兩個步驟的編譯流程。 在第一次編譯期間，會檢測程式碼來捕捉執行行為。 這項資訊會在第二個編譯期間用來引導所有的優化功能。

    *整個程式優化* 會分析所有應用程式檔中的程式碼，而不只是單一檔案。 這種方法會以數種方式提高效能，包括更佳的內嵌，以及改善的副作用分析和自訂呼叫慣例。

## <a name="testing"></a>測試

-   判斷您是否要測試在 WOW64 中執行的64或32位程式碼。

    某些應用程式包括原生64位程式碼和在 WOW64 中執行的32位程式碼。 在開發測試計劃時仔細調查，並決定您的測試控管應為64位、32位或組合。 您通常需要在64位的 Windows 上測試應用程式的64和32位版本。

-   測試經常使用的32位元件。

    首先，將您的程式碼重新編譯為64位並進行測試。 其次，修正問題，在32位中重新編譯，然後進行測試。 第三，重新編譯為64位並進行測試。

-   測試 COM 和 RPC 元件。

    請確定32和64位 COM 和 RPC 元件都能正確地通訊。 您可能也必須透過網路測試與16位元件之間的通訊。

-   在64位 Windows 上測試您的32位版本。

    客戶可以在64位 Windows 上繼續使用32位應用程式，其中的效能和記憶體問題不是主要考慮。

-   測試不同的記憶體設定。

    在伺服器上新增海量儲存體時，有時會在應用程式或作業系統中顯示先前未察覺的問題。

 

 




