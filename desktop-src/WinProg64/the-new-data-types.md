---
title: 新的資料類型
description: 針對64位的 Windows 固定精確度資料類型、指標精確度型別和特定指標精確度型別引進了三種資料類型類別。
ms.assetid: 016977d4-e7bf-463e-9755-7ef13f16e9e5
keywords:
- 64位 Windows 程式設計指南64位 Windows 程式設計，資料類型
- 資料類型64位 Windows 程式設計
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ff6cf5960b5344da1d459d12dee96a2f67f2cfbc
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/20/2020
ms.locfileid: "104316216"
---
# <a name="the-new-data-types"></a><span data-ttu-id="e604b-105">新的資料類型</span><span class="sxs-lookup"><span data-stu-id="e604b-105">The New Data Types</span></span>

<span data-ttu-id="e604b-106">針對64位 Windows 引進了三種資料類型：固定精確度資料類型、指標精確度類型，以及特定指標精確度類型。</span><span class="sxs-lookup"><span data-stu-id="e604b-106">Three classes of data types were introduced for 64-bit Windows: fixed-precision data types, pointer-precision types, and specific-pointer-precision types.</span></span> <span data-ttu-id="e604b-107">這些類型已新增至開發環境，可讓開發人員為64位 Windows 做好準備。</span><span class="sxs-lookup"><span data-stu-id="e604b-107">These types were added to the development environment to allow developers to prepare for 64-bit Windows.</span></span> <span data-ttu-id="e604b-108">這些類型衍生自基本的 C 語言整數和 long 類型。</span><span class="sxs-lookup"><span data-stu-id="e604b-108">These types are derived from the basic C-language integer and long types.</span></span> <span data-ttu-id="e604b-109">因此，您可以在32位 Windows 上編譯並測試的程式碼中使用這些資料類型，然後在以64位 Windows 為目標時，使用64位編譯器進行重新編譯。</span><span class="sxs-lookup"><span data-stu-id="e604b-109">Therefore, you can use these data types in code that you compile and test on 32-bit Windows, and then recompile with the 64-bit compiler when targeting 64-bit Windows.</span></span>

<span data-ttu-id="e604b-110">即使是以32位 Windows 為目標的應用程式，採用這些新的資料類型可讓您的程式碼更健全。</span><span class="sxs-lookup"><span data-stu-id="e604b-110">Even for applications that target only 32-bit Windows, adopting these new data types makes your code more robust.</span></span> <span data-ttu-id="e604b-111">若要使用這些資料類型，您必須掃描程式碼中是否有潛在的不安全指標使用方式、多型和資料定義。</span><span class="sxs-lookup"><span data-stu-id="e604b-111">To use these data types, you must scan your code for potentially unsafe pointer usage, polymorphism, and data definitions.</span></span> <span data-ttu-id="e604b-112">例如，當變數屬於 **ULONG \_ PTR** 類型時，就會清除它將用於轉換算數運算或多型的指標。</span><span class="sxs-lookup"><span data-stu-id="e604b-112">For example, when a variable is of type **ULONG\_PTR**, it is clear that it will be used for casting pointers for arithmetic operations or polymorphism.</span></span> <span data-ttu-id="e604b-113">使用較舊的資料類型，並不可能直接指出這類使用量。</span><span class="sxs-lookup"><span data-stu-id="e604b-113">It is not possible to indicate such usage directly by using the older data types.</span></span> <span data-ttu-id="e604b-114"> (您可以使用衍生的型別命名或匈牙利文標記法來間接完成這項作業，但是這兩種技術很容易發生錯誤。 ) </span><span class="sxs-lookup"><span data-stu-id="e604b-114">(You can do this indirectly by using derived type naming or Hungarian notation, but both techniques are prone to errors.)</span></span>

<span data-ttu-id="e604b-115">所有這些資料類型都是在 BaseTsd 中宣告。</span><span class="sxs-lookup"><span data-stu-id="e604b-115">All of these data types are declared in BaseTsd.h.</span></span> <span data-ttu-id="e604b-116">如需詳細資訊（包括這些資料類型的定義），請參閱 [Windows 資料類型](/windows/desktop/WinProg/windows-data-types)。</span><span class="sxs-lookup"><span data-stu-id="e604b-116">For more information, including definitions of these data types, see [Windows Data Types](/windows/desktop/WinProg/windows-data-types).</span></span>

## <a name="fixed-precision"></a><span data-ttu-id="e604b-117">固定有效位數</span><span class="sxs-lookup"><span data-stu-id="e604b-117">Fixed Precision</span></span>

<span data-ttu-id="e604b-118">固定精確度的資料類型在32和64位的視窗中都是相同的長度。</span><span class="sxs-lookup"><span data-stu-id="e604b-118">Fixed-precision data types are the same length in both 32- and 64-bit Windows.</span></span> <span data-ttu-id="e604b-119">為了協助您記住這一點，其精確度是資料類型名稱的一部分。</span><span class="sxs-lookup"><span data-stu-id="e604b-119">To help you remember this, their precision is part of the name of the data type.</span></span> <span data-ttu-id="e604b-120">以下是固定精確度的資料類型。</span><span class="sxs-lookup"><span data-stu-id="e604b-120">The following are the fixed-precision data types.</span></span>



| <span data-ttu-id="e604b-121">詞彙</span><span class="sxs-lookup"><span data-stu-id="e604b-121">Term</span></span>                                                                       | <span data-ttu-id="e604b-122">描述</span><span class="sxs-lookup"><span data-stu-id="e604b-122">Description</span></span>                        |
|----------------------------------------------------------------------------|------------------------------------|
| <span data-ttu-id="e604b-123"><span id="DWORD32"></span><span id="dword32"></span>**DWORD32**</span><span class="sxs-lookup"><span data-stu-id="e604b-123"><span id="DWORD32"></span><span id="dword32"></span>**DWORD32**</span></span><br/> | <span data-ttu-id="e604b-124">32 位元不帶正負號的整數</span><span class="sxs-lookup"><span data-stu-id="e604b-124">32-bit unsigned integer</span></span><br/> |
| <span data-ttu-id="e604b-125"><span id="DWORD64"></span><span id="dword64"></span>**DWORD64**</span><span class="sxs-lookup"><span data-stu-id="e604b-125"><span id="DWORD64"></span><span id="dword64"></span>**DWORD64**</span></span><br/> | <span data-ttu-id="e604b-126">64 位元不帶正負號的整數</span><span class="sxs-lookup"><span data-stu-id="e604b-126">64-bit unsigned integer</span></span><br/> |
| <span data-ttu-id="e604b-127"><span id="INT32"></span><span id="int32"></span>**時會**</span><span class="sxs-lookup"><span data-stu-id="e604b-127"><span id="INT32"></span><span id="int32"></span>**INT32**</span></span><br/>       | <span data-ttu-id="e604b-128">32 位元帶正負號的整數</span><span class="sxs-lookup"><span data-stu-id="e604b-128">32-bit signed integer</span></span><br/>   |
| <span data-ttu-id="e604b-129"><span id="INT64"></span><span id="int64"></span>**INT64**</span><span class="sxs-lookup"><span data-stu-id="e604b-129"><span id="INT64"></span><span id="int64"></span>**INT64**</span></span><br/>       | <span data-ttu-id="e604b-130">64 位元帶正負號的整數</span><span class="sxs-lookup"><span data-stu-id="e604b-130">64-bit signed integer</span></span><br/>   |
| <span data-ttu-id="e604b-131"><span id="LONG32"></span><span id="long32"></span>**LONG32**</span><span class="sxs-lookup"><span data-stu-id="e604b-131"><span id="LONG32"></span><span id="long32"></span>**LONG32**</span></span><br/>    | <span data-ttu-id="e604b-132">32 位元帶正負號的整數</span><span class="sxs-lookup"><span data-stu-id="e604b-132">32-bit signed integer</span></span><br/>   |
| <span data-ttu-id="e604b-133"><span id="LONG64"></span><span id="long64"></span>**LONG64**</span><span class="sxs-lookup"><span data-stu-id="e604b-133"><span id="LONG64"></span><span id="long64"></span>**LONG64**</span></span><br/>    | <span data-ttu-id="e604b-134">64 位元帶正負號的整數</span><span class="sxs-lookup"><span data-stu-id="e604b-134">64-bit signed integer</span></span><br/>   |
| <span data-ttu-id="e604b-135"><span id="UINT32"></span><span id="uint32"></span>**UINT32**</span><span class="sxs-lookup"><span data-stu-id="e604b-135"><span id="UINT32"></span><span id="uint32"></span>**UINT32**</span></span><br/>    | <span data-ttu-id="e604b-136">不帶正負號的 **INT32**</span><span class="sxs-lookup"><span data-stu-id="e604b-136">Unsigned **INT32**</span></span><br/>      |
| <span data-ttu-id="e604b-137"><span id="UINT64"></span><span id="uint64"></span>**UINT64**</span><span class="sxs-lookup"><span data-stu-id="e604b-137"><span id="UINT64"></span><span id="uint64"></span>**UINT64**</span></span><br/>    | <span data-ttu-id="e604b-138">未簽署的 **INT64**</span><span class="sxs-lookup"><span data-stu-id="e604b-138">Unsigned **INT64**</span></span><br/>      |
| <span data-ttu-id="e604b-139"><span id="ULONG32"></span><span id="ulong32"></span>**ULONG32**</span><span class="sxs-lookup"><span data-stu-id="e604b-139"><span id="ULONG32"></span><span id="ulong32"></span>**ULONG32**</span></span><br/> | <span data-ttu-id="e604b-140">未簽署的 **LONG32**</span><span class="sxs-lookup"><span data-stu-id="e604b-140">Unsigned **LONG32**</span></span><br/>     |
| <span data-ttu-id="e604b-141"><span id="ULONG64"></span><span id="ulong64"></span>**ULONG64**</span><span class="sxs-lookup"><span data-stu-id="e604b-141"><span id="ULONG64"></span><span id="ulong64"></span>**ULONG64**</span></span><br/> | <span data-ttu-id="e604b-142">未簽署的 **LONG64**</span><span class="sxs-lookup"><span data-stu-id="e604b-142">Unsigned **LONG64**</span></span><br/>     |



 

## <a name="pointer-precision"></a><span data-ttu-id="e604b-143">指標精確度</span><span class="sxs-lookup"><span data-stu-id="e604b-143">Pointer Precision</span></span>

<span data-ttu-id="e604b-144">隨著指標精確度的變更 (也就是，當32位 Windows 上的32位和64位 Windows) 的64位時，指標精確度資料類型會據以反映精確度。</span><span class="sxs-lookup"><span data-stu-id="e604b-144">As the pointer precision changes (that is, as it becomes 32 bits on 32-bit Windows and 64 bits with 64-bit Windows), the pointer precision data types reflect the precision accordingly.</span></span> <span data-ttu-id="e604b-145">因此，在執行指標算術時，可以安全地將指標轉換成下列其中一種類型：如果指標有效位數是64位，則類型為64位。</span><span class="sxs-lookup"><span data-stu-id="e604b-145">Therefore, it is safe to cast a pointer to one of these types when performing pointer arithmetic; if the pointer precision is 64 bits, the type is 64 bits.</span></span> <span data-ttu-id="e604b-146">計數類型也會反映指標可參考的大小上限。</span><span class="sxs-lookup"><span data-stu-id="e604b-146">The count types also reflect the maximum size to which a pointer can refer.</span></span> <span data-ttu-id="e604b-147">以下是指標精確度和計數類型。</span><span class="sxs-lookup"><span data-stu-id="e604b-147">The following are the pointer-precision and count types.</span></span>



| <span data-ttu-id="e604b-148">詞彙</span><span class="sxs-lookup"><span data-stu-id="e604b-148">Term</span></span>                                                                              | <span data-ttu-id="e604b-149">描述</span><span class="sxs-lookup"><span data-stu-id="e604b-149">Description</span></span>                                                                                                                      |
|-----------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="e604b-150"><span id="DWORD_PTR"></span><span id="dword_ptr"></span>**DWORD \_ PTR**</span><span class="sxs-lookup"><span data-stu-id="e604b-150"><span id="DWORD_PTR"></span><span id="dword_ptr"></span>**DWORD\_PTR**</span></span><br/> | <span data-ttu-id="e604b-151">指標有效位數不帶正負號的 long 類型。</span><span class="sxs-lookup"><span data-stu-id="e604b-151">Unsigned long type for pointer precision.</span></span><br/>                                                                             |
| <span data-ttu-id="e604b-152"><span id="HALF_PTR"></span><span id="half_ptr"></span>**半 \_ PTR**</span><span class="sxs-lookup"><span data-stu-id="e604b-152"><span id="HALF_PTR"></span><span id="half_ptr"></span>**HALF\_PTR**</span></span><br/>    | <span data-ttu-id="e604b-153">指標的一半大小。</span><span class="sxs-lookup"><span data-stu-id="e604b-153">Half the size of a pointer.</span></span> <span data-ttu-id="e604b-154">在包含指標和兩個小型欄位的結構中使用。</span><span class="sxs-lookup"><span data-stu-id="e604b-154">Use within a structure that contains a pointer and two small fields.</span></span><br/>                      |
| <span data-ttu-id="e604b-155"><span id="INT_PTR"></span><span id="int_ptr"></span>**INT \_ PTR**</span><span class="sxs-lookup"><span data-stu-id="e604b-155"><span id="INT_PTR"></span><span id="int_ptr"></span>**INT\_PTR**</span></span><br/>       | <span data-ttu-id="e604b-156">指標有效位數的帶正負號整數類型。</span><span class="sxs-lookup"><span data-stu-id="e604b-156">Signed integer type for pointer precision.</span></span><br/>                                                                            |
| <span data-ttu-id="e604b-157"><span id="LONG_PTR"></span><span id="long_ptr"></span>**長 \_ PTR**</span><span class="sxs-lookup"><span data-stu-id="e604b-157"><span id="LONG_PTR"></span><span id="long_ptr"></span>**LONG\_PTR**</span></span><br/>    | <span data-ttu-id="e604b-158">指標有效位數的帶正負號的 long 類型。</span><span class="sxs-lookup"><span data-stu-id="e604b-158">Signed long type for pointer precision.</span></span><br/>                                                                               |
| <span data-ttu-id="e604b-159"><span id="SIZE_T"></span><span id="size_t"></span>**大小 \_ T**</span><span class="sxs-lookup"><span data-stu-id="e604b-159"><span id="SIZE_T"></span><span id="size_t"></span>**SIZE\_T**</span></span><br/>          | <span data-ttu-id="e604b-160">指標可以參考的最大位元組數目。</span><span class="sxs-lookup"><span data-stu-id="e604b-160">The maximum number of bytes to which a pointer can refer.</span></span> <span data-ttu-id="e604b-161">用於必須橫跨指標完整範圍的計數。</span><span class="sxs-lookup"><span data-stu-id="e604b-161">Use for a count that must span the full range of a pointer.</span></span><br/> |
| <span data-ttu-id="e604b-162"><span id="SSIZE_T"></span><span id="ssize_t"></span>**SSIZE \_ T**</span><span class="sxs-lookup"><span data-stu-id="e604b-162"><span id="SSIZE_T"></span><span id="ssize_t"></span>**SSIZE\_T**</span></span><br/>       | <span data-ttu-id="e604b-163">帶正負 **號的大小 \_ T**。</span><span class="sxs-lookup"><span data-stu-id="e604b-163">Signed **SIZE\_T**.</span></span><br/>                                                                                                   |
| <span data-ttu-id="e604b-164"><span id="UHALF_PTR"></span><span id="uhalf_ptr"></span>**UHALF \_ PTR**</span><span class="sxs-lookup"><span data-stu-id="e604b-164"><span id="UHALF_PTR"></span><span id="uhalf_ptr"></span>**UHALF\_PTR**</span></span><br/> | <span data-ttu-id="e604b-165">不帶正負號的 **半 \_ PTR**。</span><span class="sxs-lookup"><span data-stu-id="e604b-165">Unsigned **HALF\_PTR**.</span></span><br/>                                                                                               |
| <span data-ttu-id="e604b-166"><span id="UINT_PTR"></span><span id="uint_ptr"></span>**UINT \_ PTR**</span><span class="sxs-lookup"><span data-stu-id="e604b-166"><span id="UINT_PTR"></span><span id="uint_ptr"></span>**UINT\_PTR**</span></span><br/>    | <span data-ttu-id="e604b-167">不帶正負號的 **INT \_ PTR**。</span><span class="sxs-lookup"><span data-stu-id="e604b-167">Unsigned **INT\_PTR**.</span></span><br/>                                                                                                |
| <span data-ttu-id="e604b-168"><span id="ULONG_PTR"></span><span id="ulong_ptr"></span>**ULONG \_ PTR**</span><span class="sxs-lookup"><span data-stu-id="e604b-168"><span id="ULONG_PTR"></span><span id="ulong_ptr"></span>**ULONG\_PTR**</span></span><br/> | <span data-ttu-id="e604b-169">不帶正負號的 **長 \_ 指標**。</span><span class="sxs-lookup"><span data-stu-id="e604b-169">Unsigned **LONG\_PTR**.</span></span><br/>                                                                                               |



 

## <a name="specific-pointer-precision-types"></a><span data-ttu-id="e604b-170">特定的 Pointer-Precision 類型</span><span class="sxs-lookup"><span data-stu-id="e604b-170">Specific Pointer-Precision Types</span></span>

<span data-ttu-id="e604b-171">下列新指標類型會明確地調整指標的大小。</span><span class="sxs-lookup"><span data-stu-id="e604b-171">The following new pointer types explicitly size the pointer.</span></span> <span data-ttu-id="e604b-172">在64位程式碼中使用指標時請務必小心：如果您使用32位類型宣告指標，作業系統會藉由截斷64位指標來建立指標。</span><span class="sxs-lookup"><span data-stu-id="e604b-172">Be cautious when using pointers in 64-bit code: If you declare the pointer using a 32-bit type, the operating system creates the pointer by truncating a 64-bit pointer.</span></span> <span data-ttu-id="e604b-173"> (64 位 Windows 上的所有指標都是64位。 ) </span><span class="sxs-lookup"><span data-stu-id="e604b-173">(All pointers are 64 bits on 64-bit Windows.)</span></span>



| <span data-ttu-id="e604b-174">詞彙</span><span class="sxs-lookup"><span data-stu-id="e604b-174">Term</span></span>                                                                                 | <span data-ttu-id="e604b-175">描述</span><span class="sxs-lookup"><span data-stu-id="e604b-175">Description</span></span>                                                                                                                                                                                                            |
|--------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="e604b-176"><span id="POINTER_32"></span><span id="pointer_32"></span>**指標 \_ 32**</span><span class="sxs-lookup"><span data-stu-id="e604b-176"><span id="POINTER_32"></span><span id="pointer_32"></span>**POINTER\_32**</span></span><br/> | <span data-ttu-id="e604b-177">32位指標。</span><span class="sxs-lookup"><span data-stu-id="e604b-177">A 32-bit pointer.</span></span> <span data-ttu-id="e604b-178">在32位的 Windows 上，這是原生指標。</span><span class="sxs-lookup"><span data-stu-id="e604b-178">On 32-bit Windows, this is a native pointer.</span></span> <span data-ttu-id="e604b-179">在64位的 Windows 上，這是截斷的64位指標。</span><span class="sxs-lookup"><span data-stu-id="e604b-179">On 64-bit Windows, this is a truncated 64-bit pointer.</span></span><br/>                                                                                       |
| <span data-ttu-id="e604b-180"><span id="POINTER_64"></span><span id="pointer_64"></span>**指標 \_ 64**</span><span class="sxs-lookup"><span data-stu-id="e604b-180"><span id="POINTER_64"></span><span id="pointer_64"></span>**POINTER\_64**</span></span><br/> | <span data-ttu-id="e604b-181">64位指標。</span><span class="sxs-lookup"><span data-stu-id="e604b-181">A 64-bit pointer.</span></span> <span data-ttu-id="e604b-182">在64位的 Windows 上，這是原生指標。</span><span class="sxs-lookup"><span data-stu-id="e604b-182">On 64-bit Windows, this is a native pointer.</span></span> <span data-ttu-id="e604b-183">在32位的 Windows 上，這是一個帶正負號的32位指標。</span><span class="sxs-lookup"><span data-stu-id="e604b-183">On 32-bit Windows, this is a sign-extended 32-bit pointer.</span></span> <br/> <span data-ttu-id="e604b-184">請注意，假設高指標位的狀態並不安全。</span><span class="sxs-lookup"><span data-stu-id="e604b-184">Note that it is not safe to assume the state of the high pointer bit.</span></span><br/> |



 

 

