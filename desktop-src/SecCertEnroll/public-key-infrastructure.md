---
description: 公開金鑰加密 (也稱為非對稱金鑰加密) 使用金鑰組來加密和解密內容。
ms.assetid: 93f65367-ca4b-4b44-9833-0653cfd3f3d3
title: 公開金鑰基礎結構
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 55e4ff0b2b3912bc44851be105c2e2b15200eb62
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/08/2021
ms.locfileid: "106996794"
---
# <a name="public-key-infrastructure"></a><span data-ttu-id="c2b1f-103">公開金鑰基礎結構</span><span class="sxs-lookup"><span data-stu-id="c2b1f-103">Public Key Infrastructure</span></span>

<span data-ttu-id="c2b1f-104">公開金鑰加密 (也稱為非對稱金鑰加密) 使用金鑰組來加密和解密內容。</span><span class="sxs-lookup"><span data-stu-id="c2b1f-104">Public-key cryptography (also called asymmetric-key cryptography) uses a key pair to encrypt and decrypt content.</span></span> <span data-ttu-id="c2b1f-105">金鑰組包含一個與數學相關的公用和一個私密金鑰。</span><span class="sxs-lookup"><span data-stu-id="c2b1f-105">The key pair consists of one public and one private key that are mathematically related.</span></span> <span data-ttu-id="c2b1f-106">想要與其他人安全地通訊的個人可以散發 [*公開金鑰*](/windows/desktop/SecGloss/p-gly) ，但必須保留 [*私密金鑰*](/windows/desktop/SecGloss/p-gly) 秘密。</span><span class="sxs-lookup"><span data-stu-id="c2b1f-106">An individual who intends to communicate securely with others can distribute the [*public key*](/windows/desktop/SecGloss/p-gly) but must keep the [*private key*](/windows/desktop/SecGloss/p-gly) secret.</span></span> <span data-ttu-id="c2b1f-107">使用其中一個金鑰加密的內容，可以使用其他金鑰進行解密。</span><span class="sxs-lookup"><span data-stu-id="c2b1f-107">Content encrypted by using one of the keys can be decrypted by using the other.</span></span> <span data-ttu-id="c2b1f-108">例如，假設 Bob 想要傳送安全的電子郵件訊息給 Alice。</span><span class="sxs-lookup"><span data-stu-id="c2b1f-108">Assume, for example, that Bob wants to send a secure email message to Alice.</span></span> <span data-ttu-id="c2b1f-109">您可以透過下列方式來完成這項作業：</span><span class="sxs-lookup"><span data-stu-id="c2b1f-109">This can be accomplished in the following manner:</span></span>

1.  <span data-ttu-id="c2b1f-110">Bob 和 Alice 都有自己的金鑰組。</span><span class="sxs-lookup"><span data-stu-id="c2b1f-110">Both Bob and Alice have their own key pairs.</span></span> <span data-ttu-id="c2b1f-111">他們將其私用金鑰安全地保留給自己，並將其公開金鑰直接傳送給彼此。</span><span class="sxs-lookup"><span data-stu-id="c2b1f-111">They have kept their private keys securely to themselves and have sent their public keys directly to each other.</span></span>
2.  <span data-ttu-id="c2b1f-112">Bob 使用 Alice 的公開金鑰來加密訊息，並將訊息傳送給她。</span><span class="sxs-lookup"><span data-stu-id="c2b1f-112">Bob uses Alice's public key to encrypt the message and sends it to her.</span></span>
3.  <span data-ttu-id="c2b1f-113">Alice 會使用她的私密金鑰來解密訊息。</span><span class="sxs-lookup"><span data-stu-id="c2b1f-113">Alice uses her private key to decrypt the message.</span></span>

<span data-ttu-id="c2b1f-114">這個簡化的範例醒目提示 Bob 必須知道他用來加密訊息的公開金鑰。</span><span class="sxs-lookup"><span data-stu-id="c2b1f-114">This simplified example highlights at least one obvious concern Bob must have about the public key he used to encrypt the message.</span></span> <span data-ttu-id="c2b1f-115">也就是說，他無法確定他用來加密的金鑰實際上屬於 Alice。</span><span class="sxs-lookup"><span data-stu-id="c2b1f-115">That is, he cannot know with certainty that the key he used for encryption actually belonged to Alice.</span></span> <span data-ttu-id="c2b1f-116">另一方可能會監視 Bob 與 Alice 之間的通道替代不同的金鑰。</span><span class="sxs-lookup"><span data-stu-id="c2b1f-116">It is possible that another party monitoring the communication channel between Bob and Alice substituted a different key.</span></span>

<span data-ttu-id="c2b1f-117">公開金鑰基礎結構概念已演進，可協助解決此問題和其他問題。</span><span class="sxs-lookup"><span data-stu-id="c2b1f-117">The public key infrastructure concept has evolved to help address this problem and others.</span></span> <span data-ttu-id="c2b1f-118"> (PKI) 的公開金鑰基礎結構是由受信任的協力廠商可用來建立公開金鑰完整性和擁有權的軟體和硬體元素所組成。</span><span class="sxs-lookup"><span data-stu-id="c2b1f-118">A public key infrastructure (PKI) consists of software and hardware elements that a trusted third party can use to establish the integrity and ownership of a public key.</span></span> <span data-ttu-id="c2b1f-119">受信任的合作物件（稱為 [*憑證授權單位*](/windows/desktop/SecGloss/c-gly) 單位 (CA) ）通常會將已簽署的 (加密) 二進位憑證來確認憑證主體的身分識別，並將該身分識別系結至憑證中包含的公開金鑰。</span><span class="sxs-lookup"><span data-stu-id="c2b1f-119">The trusted party, called a [*certification authority*](/windows/desktop/SecGloss/c-gly) (CA), typically accomplishes this by issuing signed (encrypted) binary certificates that affirm the identity of the certificate subject and bind that identity to the public key contained in the certificate.</span></span> <span data-ttu-id="c2b1f-120">CA 會使用私密金鑰來簽署憑證。</span><span class="sxs-lookup"><span data-stu-id="c2b1f-120">The CA signs the certificate by using its private key.</span></span> <span data-ttu-id="c2b1f-121">它會向自我簽署 CA 憑證中的所有感興趣的合作物件發出對應的公開金鑰。</span><span class="sxs-lookup"><span data-stu-id="c2b1f-121">It issues the corresponding public key to all interested parties in a self-signed CA certificate.</span></span> <span data-ttu-id="c2b1f-122">使用 CA 時，可以透過下列方式修改上述範例：</span><span class="sxs-lookup"><span data-stu-id="c2b1f-122">When a CA is used, the preceding example can be modified in the following manner:</span></span>

1.  <span data-ttu-id="c2b1f-123">假設 CA 已發出包含其公開金鑰的帶正負號數位憑證。</span><span class="sxs-lookup"><span data-stu-id="c2b1f-123">Assume that the CA has issued a signed digital certificate that contains its public key.</span></span> <span data-ttu-id="c2b1f-124">CA 會使用與憑證中公開金鑰對應的私密金鑰來自我簽署此憑證。</span><span class="sxs-lookup"><span data-stu-id="c2b1f-124">The CA self-signs this certificate by using the private key that corresponds to the public key in the certificate.</span></span>
2.  <span data-ttu-id="c2b1f-125">Alice 和 Bob 同意使用 CA 來驗證其身分識別。</span><span class="sxs-lookup"><span data-stu-id="c2b1f-125">Alice and Bob agree to use the CA to verify their identities.</span></span>
3.  <span data-ttu-id="c2b1f-126">Alice 向 CA 要求公開金鑰憑證。</span><span class="sxs-lookup"><span data-stu-id="c2b1f-126">Alice requests a public key certificate from the CA.</span></span>
4.  <span data-ttu-id="c2b1f-127">CA 會驗證她的身分識別、計算將構成憑證之內容的雜湊、使用對應至已發佈 CA 憑證中公開金鑰的私密金鑰來簽署雜湊、串連憑證內容和簽署的雜湊來建立新的憑證，以及讓新的憑證公開可用。</span><span class="sxs-lookup"><span data-stu-id="c2b1f-127">The CA verifies her identity, computes a hash of the content that will make up her certificate, signs the hash by using the private key that corresponds to the public key in the published CA certificate, creates a new certificate by concatenating the certificate content and the signed hash, and makes the new certificate publicly available.</span></span>
5.  <span data-ttu-id="c2b1f-128">Bob 抓取憑證、使用 CA 的公開金鑰解密簽署的雜湊、計算憑證內容的新雜湊，以及比較這兩個雜湊。</span><span class="sxs-lookup"><span data-stu-id="c2b1f-128">Bob retrieves the certificate, decrypts the signed hash by using the public key of the CA, computes a new hash of the certificate content, and compares the two hashes.</span></span> <span data-ttu-id="c2b1f-129">如果雜湊相符，則會驗證簽章，而 Bob 可以假設憑證中的公開金鑰確實屬於 Alice。</span><span class="sxs-lookup"><span data-stu-id="c2b1f-129">If the hashes match, the signature is verified and Bob can assume that the public key in the certificate does indeed belong to Alice.</span></span>
6.  <span data-ttu-id="c2b1f-130">Bob 使用 Alice 驗證的公開金鑰來加密訊息給她。</span><span class="sxs-lookup"><span data-stu-id="c2b1f-130">Bob uses Alice's verified public key to encrypt a message to her.</span></span>
7.  <span data-ttu-id="c2b1f-131">Alice 會使用她的私密金鑰來解密來自 Bob 的訊息。</span><span class="sxs-lookup"><span data-stu-id="c2b1f-131">Alice uses her private key to decrypt the message from Bob.</span></span>

<span data-ttu-id="c2b1f-132">總而言之，憑證簽署程式可讓 Bob 驗證公開金鑰未在傳輸期間遭到篡改或損毀。</span><span class="sxs-lookup"><span data-stu-id="c2b1f-132">In summary, the certificate signing process enables Bob to verify that the public key was not tampered with or corrupted during transit.</span></span> <span data-ttu-id="c2b1f-133">發出憑證之前，CA 會雜湊內容、簽署 (使用自己的私密金鑰來加密) 雜湊，並在發行的憑證中包含加密的雜湊。</span><span class="sxs-lookup"><span data-stu-id="c2b1f-133">Before issuing a certificate, the CA hashes the contents, signs (encrypts) the hash by using its own private key, and includes the encrypted hash in the issued certificate.</span></span> <span data-ttu-id="c2b1f-134">Bob 藉由使用 CA 公開金鑰解密雜湊、執行個別的憑證內容雜湊，以及比較這兩個雜湊來驗證憑證內容。</span><span class="sxs-lookup"><span data-stu-id="c2b1f-134">Bob verifies the certificate contents by decrypting the hash with the CA public key, performing a separate hash of the certificate contents, and comparing the two hashes.</span></span> <span data-ttu-id="c2b1f-135">如果兩者相符，則 Bob 可以合理確定憑證和它所包含的公開金鑰尚未改變。</span><span class="sxs-lookup"><span data-stu-id="c2b1f-135">If they match, Bob can be reasonably certain that the certificate and the public key it contains have not been altered.</span></span>

<span data-ttu-id="c2b1f-136">一般 PKI 是由下列元素所組成。</span><span class="sxs-lookup"><span data-stu-id="c2b1f-136">A typical PKI consists of the following elements.</span></span>

| <span data-ttu-id="c2b1f-137">元素</span><span class="sxs-lookup"><span data-stu-id="c2b1f-137">Element</span></span>                            | <span data-ttu-id="c2b1f-138">描述</span><span class="sxs-lookup"><span data-stu-id="c2b1f-138">Description</span></span>                                                                                                                                                                               |
|------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="c2b1f-139">憑證授權單位</span><span class="sxs-lookup"><span data-stu-id="c2b1f-139">Certification Authority</span></span><br/> | <span data-ttu-id="c2b1f-140">作為公開金鑰基礎結構中的根信任，並提供服務來驗證網路中的個人、電腦和其他實體的身分識別。</span><span class="sxs-lookup"><span data-stu-id="c2b1f-140">Acts as the root of trust in a public key infrastructure and provides services that authenticate the identity of individuals, computers, and other entities in a network.</span></span><br/>      |
| <span data-ttu-id="c2b1f-141">註冊授權單位</span><span class="sxs-lookup"><span data-stu-id="c2b1f-141">Registration Authority</span></span><br/>  | <span data-ttu-id="c2b1f-142">由根 CA 認證，可針對根目錄允許的特定用途發出憑證。</span><span class="sxs-lookup"><span data-stu-id="c2b1f-142">Is certified by a root CA to issue certificates for specific uses permitted by the root.</span></span> <span data-ttu-id="c2b1f-143">在 Microsoft PKI 中， (RA) 的註冊授權單位通常稱為「次級 CA」。</span><span class="sxs-lookup"><span data-stu-id="c2b1f-143">In a Microsoft PKI, a registration authority (RA) is usually called a subordinate CA.</span></span><br/> |
| <span data-ttu-id="c2b1f-144">憑證資料庫</span><span class="sxs-lookup"><span data-stu-id="c2b1f-144">Certificate Database</span></span><br/>    | <span data-ttu-id="c2b1f-145">儲存憑證要求，並在 CA 或 RA 上儲存和撤銷憑證和憑證要求。</span><span class="sxs-lookup"><span data-stu-id="c2b1f-145">Saves certificate requests and issued and revoked certificates and certificate requests on the CA or RA.</span></span><br/>                                                                       |
| <span data-ttu-id="c2b1f-146">憑證存放區</span><span class="sxs-lookup"><span data-stu-id="c2b1f-146">Certificate Store</span></span><br/>       | <span data-ttu-id="c2b1f-147">在本機電腦上儲存已發行的憑證，以及暫止或已拒絕的憑證要求。</span><span class="sxs-lookup"><span data-stu-id="c2b1f-147">Saves issued certificates and pending or rejected certificate requests on the local computer.</span></span><br/>                                                                                  |
| <span data-ttu-id="c2b1f-148">金鑰保存伺服器</span><span class="sxs-lookup"><span data-stu-id="c2b1f-148">Key Archival Server</span></span><br/>     | <span data-ttu-id="c2b1f-149">在憑證資料庫中儲存加密的私密金鑰，以在遺失之後復原。</span><span class="sxs-lookup"><span data-stu-id="c2b1f-149">Saves encrypted private keys in the certificate database for recovery after loss.</span></span><br/>                                                                                              |



 

<span data-ttu-id="c2b1f-150">憑證註冊 API 可讓您將憑證和金鑰保存要求提交給認證和登錄授權單位，並在本機電腦上安裝已發行的憑證。</span><span class="sxs-lookup"><span data-stu-id="c2b1f-150">The Certificate Enrollment API enables you to submit certificate and key archival requests to certification and registration authorities and install the issued certificate on a local computer.</span></span> <span data-ttu-id="c2b1f-151">它不能讓您直接操作憑證資料庫或憑證存放區。</span><span class="sxs-lookup"><span data-stu-id="c2b1f-151">It does not enable you to directly manipulate the certificate database or certificate store.</span></span>

<span data-ttu-id="c2b1f-152">下列主題會更詳細地討論 Microsoft 公開金鑰基礎結構：</span><span class="sxs-lookup"><span data-stu-id="c2b1f-152">The following topics discuss the Microsoft public key infrastructure in more detail:</span></span>

-   [<span data-ttu-id="c2b1f-153">X.509 公開金鑰憑證</span><span class="sxs-lookup"><span data-stu-id="c2b1f-153">X.509 Public Key Certificates</span></span>](about-x-509-public-key-certificates.md)
-   [<span data-ttu-id="c2b1f-154">PKI 元素</span><span class="sxs-lookup"><span data-stu-id="c2b1f-154">PKI Elements</span></span>](about-pki-components.md)
-   [<span data-ttu-id="c2b1f-155">信任模型</span><span class="sxs-lookup"><span data-stu-id="c2b1f-155">Trust Models</span></span>](about-trust-models.md)

## <a name="related-topics"></a><span data-ttu-id="c2b1f-156">相關主題</span><span class="sxs-lookup"><span data-stu-id="c2b1f-156">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="c2b1f-157">關於憑證註冊 API</span><span class="sxs-lookup"><span data-stu-id="c2b1f-157">About the Certificate Enrollment API</span></span>](about-the-certificate-enrollment-api.md)
</dt> </dl>

 

