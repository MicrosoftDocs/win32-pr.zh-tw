---
title: 輸入、串流和輸出
description: 輸入、串流和輸出
ms.assetid: f9f979c4-a15c-4f2a-b63c-7fe776394fdd
keywords:
- Windows媒體格式 SDK，輸入
- Windows媒體格式 SDK，資料流程
- Windows媒體格式 SDK，輸出
- Advanced Systems Format (ASF) 、輸入
- ASF (Advanced Systems Format) ，輸入
- Advanced Systems Format (ASF) 、串流
- ASF (Advanced Systems Format) ，資料流程
- Advanced Systems Format (ASF) 、輸出
- ASF (Advanced Systems Format) ，輸出
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c4518ed60495aa2318ad27cdade2885aa2660698b5dbf2659290dabf985246da
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/11/2021
ms.locfileid: "118701822"
---
# <a name="inputs-streams-and-outputs"></a>輸入、串流和輸出

本檔中的「輸入」是任何數位媒體資料流程 (例如音訊或影片) ，您的應用程式會使用適當的 Api，從來源將其傳遞至寫入器物件。 輸入必須以支援的格式傳遞。 支援數種標準 RGB 和 YUV 格式作為輸入，而音訊編解碼器支援 PCM。 如果編解碼器原生不支援指定的輸入格式，寫入器物件將會具現化能夠將各種格式轉換成編解碼器可接受之格式的音訊或影片協助程式物件。 若為音訊輸入，helper 物件將會視需要調整位元速率、取樣率和通道數目。 針對影片輸入，影片協助程式物件會執行色彩空間轉換和矩形大小調整。 在某些情況下，可以在輸入資料流程中傳遞壓縮的音訊和影片資料。 輸入可能是除了音訊和影片以外的其他媒體類型，例如文字、指令碼命令、靜止影像或任意檔案資料。

本檔中的「輸出」是指讀取器物件傳遞給應用程式進行轉譯的資料。 輸出會等於播放時的單一資料流程。 如果您使用相互排除，則所有互斥資料流程都會共用單一輸出。 輸出資料通常會以未壓縮的音訊或影片資料的形式呈現，雖然它可以包含任何類型的資料。 本檔的其他位置會列出支援的影片輸出格式。

本檔中的「資料流程」一詞是指 ASF 檔中的資料，而不是在寫入器物件處理之前， (1) 輸入來源資料，並在讀取器物件解壓縮輸出資料後， (2) 輸出資料。 ASF 資料流程所包含的資料是來自寫入器物件上的單一輸入，雖然可以從相同的輸入建立一個以上的資料流程。 資料流程的格式和壓縮設定從開始到結尾。 簡單的 ASF 檔案有兩個數據流，一個用於音訊，另一個用於影片。 較複雜的檔案可能會有兩個音訊串流和數個影片串流。 音訊串流可能會有相同的壓縮設定，但包含不同的內容，例如不同語言的旁白。 影片串流可能包含相同的內容，但有不同的壓縮設定。 寫入器物件將套用至每個資料流程的媒體格式和壓縮設定會指定于設定檔中。

輸入、資料流程和輸出之間的關聯性可以有三種基本類型。 下列三個圖表說明關聯性。

在最基本的關聯性中（不含任何互斥的設定檔），每個輸入都會由寫入器處理，並以單一資料流程的形式插入 ASF 檔案中。 在播放時，讀取器會讀取資料流程並以單一輸出形式傳遞未壓縮的範例，如下圖所示。

![顯示輸入、資料流程和輸出之間的一般關聯性的圖表。](images/formatsdk03.png)

使用多個位速率互斥時，會發生比較複雜的關聯性。 在此情況下，寫入器會處理單一輸入，並以數種位元速率編碼。 每個資料編碼都會以個別資料流程的形式插入 ASF 檔案中。 在播放時，讀取器會根據可用的頻寬來決定要解壓縮的資料流程。 讀取器接著會讀取選取的資料流程，並以單一輸出形式傳遞未壓縮的範例，如下圖所示。

![此圖顯示使用多個位速率互斥時，輸入、資料流程和輸出之間的關聯性。](images/formatsdk04.png)

使用以語言為基礎或自訂的互斥時，可能會發生第三種類型的關聯性。 在此關聯性中，讀取器會處理多個輸入，而且每個輸入都會以個別資料流程的形式插入 ASF 檔案中。 在播放時，您的應用程式會根據您提供的邏輯，以手動方式選取要解壓縮的資料流程。 讀取器接著會讀取選取的資料流程，並以單一輸出形式傳遞未壓縮的範例。 此程式可用於包含多種語言的 soundtracks。 下圖說明此程序。

![此圖顯示使用自訂相互排除時輸入、資料流程和輸出之間的關聯性。](images/formatsdk02.png)

先前所述的關聯性有一些變化。 例如，檔案可以包含三個關聯性，或其中一個或兩個關聯性。 您也可以壓縮某些輸入，在這種情況下，寫入器不會執行額外的壓縮。 讀者也可以傳遞壓縮的範例。 但在此情況下，您必須依串流號碼存取它們，而不是依輸出編號來存取。

> [!Note]  
> 輸入、steams 和輸出都是由 Windows 媒體格式 SDK 的物件所指派的數位。 資料流程具有您在設定檔中定義的資料流程編號（以1為基礎）。 每個資料流程也會被指派一個資料流程索引，以用於列舉設定檔中的資料流程。 這些數位都不保證彼此一致。 也就是說，輸入編號1可能不會對應到資料流程編號1，資料流程編號1可能不會對應到資料流程索引1，依此類推。

 

## <a name="related-topics"></a>相關主題

<dl> <dt>

[**概念**](concepts.md)
</dt> <dt>

[**互斥**](mutual-exclusion.md)
</dt> </dl>

 

 




