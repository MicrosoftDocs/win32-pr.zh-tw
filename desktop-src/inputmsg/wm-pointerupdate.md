---
title: WM_POINTERUPDATE 訊息
description: 張貼以提供指標的更新，而該指標是在視窗的工作區上，或是在視窗的工作區上停留在滑鼠停留 uncaptured 指標上。
ms.assetid: 3bdc37da-227c-4be1-bf0b-99704b8ac222
keywords:
- WM_POINTERUPDATE 訊息輸入訊息和通知
topic_type:
- apiref
api_name:
- WM_POINTERUPDATE
api_location:
- Winuser.h
api_type:
- HeaderDef
ms.topic: article
ms.date: 02/03/2020
ms.openlocfilehash: 215874f4dc1b3438ae3d69b22758ced09a050f0f
ms.sourcegitcommit: a1494c819bc5200050696e66057f1020f5b142cb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 12/12/2020
ms.locfileid: "104106313"
---
# <a name="wm_pointerupdate-message"></a><span data-ttu-id="125ee-104">WM_POINTERUPDATE 訊息</span><span class="sxs-lookup"><span data-stu-id="125ee-104">WM_POINTERUPDATE message</span></span>

<span data-ttu-id="125ee-105">張貼以提供指標的更新，而該指標是在視窗的工作區上，或是在視窗的工作區上停留在滑鼠停留 uncaptured 指標上。</span><span class="sxs-lookup"><span data-stu-id="125ee-105">Posted to provide an update on a pointer that made contact over the client area of a window or on a hovering uncaptured pointer over the client area of a window.</span></span> <span data-ttu-id="125ee-106">當指標停留時，訊息會以指標發生的任何視窗為目標。</span><span class="sxs-lookup"><span data-stu-id="125ee-106">While the pointer is hovering, the message targets whichever window the pointer happens to be over.</span></span> <span data-ttu-id="125ee-107">當指標與介面聯繫時，指標就會隱含地捕捉到指標所變成的視窗，而該視窗會繼續接收指標的輸入，直到中斷連絡人為止。</span><span class="sxs-lookup"><span data-stu-id="125ee-107">While the pointer is in contact with the surface, the pointer is implicitly captured to the window over which the pointer made contact and that window continues to receive input for the pointer until it breaks contact.</span></span>

> <span data-ttu-id="125ee-108">\[!重要\]</span><span class="sxs-lookup"><span data-stu-id="125ee-108">\[!Important\]</span></span>  
> <span data-ttu-id="125ee-109">桌面應用程式應該要感知 DPI。</span><span class="sxs-lookup"><span data-stu-id="125ee-109">Desktop apps should be DPI aware.</span></span> <span data-ttu-id="125ee-110">如果您的應用程式不是 DPI 感知，指標訊息和相關結構中所包含的螢幕座標可能會因為 DPI 虛擬化而出現不正確的情況。</span><span class="sxs-lookup"><span data-stu-id="125ee-110">If your app is not DPI aware, screen coordinates contained in pointer messages and related structures might appear inaccurate due to DPI virtualization.</span></span> <span data-ttu-id="125ee-111">DPI 虛擬化提供自動調整支援給非 DPI 感知的應用程式，而且預設為使用中 (使用者可以關閉) 。</span><span class="sxs-lookup"><span data-stu-id="125ee-111">DPI virtualization provides automatic scaling support to applications that are not DPI aware and is active by default (users can turn it off).</span></span> <span data-ttu-id="125ee-112">如需詳細資訊，請參閱 [撰寫高 DPI 的 Win32 應用程式](/previous-versions//dd464660(v=vs.85))。</span><span class="sxs-lookup"><span data-stu-id="125ee-112">For more information, see [Writing High-DPI Win32 Applications](/previous-versions//dd464660(v=vs.85)).</span></span>

 


```C++
#define WM_POINTERUPDATE              0x0245
```



## <a name="parameters"></a><span data-ttu-id="125ee-113">參數</span><span class="sxs-lookup"><span data-stu-id="125ee-113">Parameters</span></span>

<dl> <dt>

<span data-ttu-id="125ee-114">*wParam*</span><span class="sxs-lookup"><span data-stu-id="125ee-114">*wParam*</span></span> 
</dt> <dd>

<span data-ttu-id="125ee-115">包含指標的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="125ee-115">Contains information about the pointer.</span></span> <span data-ttu-id="125ee-116">使用下列宏從 wParam 參數取出資訊。</span><span class="sxs-lookup"><span data-stu-id="125ee-116">Use the following macros to retrieve information from the wParam parameter.</span></span>

-   <span data-ttu-id="125ee-117">[**GET_POINTERID_WPARAM**](/previous-versions/windows/desktop/api) (WPARAM) ：指標識別碼。</span><span class="sxs-lookup"><span data-stu-id="125ee-117">[**GET_POINTERID_WPARAM**](/previous-versions/windows/desktop/api)(wParam): the pointer identifier.</span></span>
-   <span data-ttu-id="125ee-118">[**IS_POINTER_NEW_WPARAM**](/previous-versions/windows/desktop/api) (WPARAM) ：指出此訊息是否代表新指標所產生之第一個輸入的旗標。</span><span class="sxs-lookup"><span data-stu-id="125ee-118">[**IS_POINTER_NEW_WPARAM**](/previous-versions/windows/desktop/api)(wParam): a flag that indicates whether this message represents the first input generated by a new pointer.</span></span>
-   <span data-ttu-id="125ee-119">[**IS_POINTER_INRANGE_WPARAM**](/previous-versions/windows/desktop/api) (WPARAM) ：此旗標會指出此訊息是否會在其存留期間由指標產生。</span><span class="sxs-lookup"><span data-stu-id="125ee-119">[**IS_POINTER_INRANGE_WPARAM**](/previous-versions/windows/desktop/api)(wParam): a flag that indicates whether this message was generated by a pointer during its lifetime.</span></span> <span data-ttu-id="125ee-120">未在指出指標具有左方偵測範圍的訊息上設定此旗標</span><span class="sxs-lookup"><span data-stu-id="125ee-120">This flag is not set on messages that indicate that the pointer has left detection range</span></span>
-   <span data-ttu-id="125ee-121">[**IS_POINTER_INCONTACT_WPARAM**](/previous-versions/windows/desktop/api) (WPARAM) ：此旗標會指出此訊息是否由與視窗介面聯繫的指標所產生。</span><span class="sxs-lookup"><span data-stu-id="125ee-121">[**IS_POINTER_INCONTACT_WPARAM**](/previous-versions/windows/desktop/api)(wParam): a flag that indicates whether this message was generated by a pointer that is in contact with the window surface.</span></span> <span data-ttu-id="125ee-122">此旗標不會設定在指出暫留指標的訊息上。</span><span class="sxs-lookup"><span data-stu-id="125ee-122">This flag is not set on messages that indicate a hovering pointer.</span></span>
-   <span data-ttu-id="125ee-123">[**IS_POINTER_PRIMARY_WPARAM**](/previous-versions/windows/desktop/api) (WPARAM) ：表示此指標已指定為主要指標。</span><span class="sxs-lookup"><span data-stu-id="125ee-123">[**IS_POINTER_PRIMARY_WPARAM**](/previous-versions/windows/desktop/api)(wParam): indicates that this pointer has been designated as primary.</span></span>
-   <span data-ttu-id="125ee-124">[**IS_POINTER_FIRSTBUTTON_WPARAM**](/previous-versions/windows/desktop/api) (WPARAM) ：指出是否有主要動作的旗標。</span><span class="sxs-lookup"><span data-stu-id="125ee-124">[**IS_POINTER_FIRSTBUTTON_WPARAM**](/previous-versions/windows/desktop/api)(wParam): a flag that indicates whether there is a primary action.</span></span>
    -   <span data-ttu-id="125ee-125">這類似于按下滑鼠左鍵。</span><span class="sxs-lookup"><span data-stu-id="125ee-125">This is analogous to a mouse left button down.</span></span>
    -   <span data-ttu-id="125ee-126">當觸控指標與數位板介面聯繫時，會有此設定。</span><span class="sxs-lookup"><span data-stu-id="125ee-126">A touch pointer will have this set when it is in contact with the digitizer surface.</span></span>
    -   <span data-ttu-id="125ee-127">當畫筆指標與數位板介面聯繫時，如果未按下任何按鈕，就會有此設定。</span><span class="sxs-lookup"><span data-stu-id="125ee-127">A pen pointer will have this set when it is in contact with the digitizer surface with no buttons pressed.</span></span>
-   <span data-ttu-id="125ee-128">[**IS_POINTER_SECONDBUTTON_WPARAM**](/previous-versions/windows/desktop/api) (WPARAM) ：指出是否有次要動作的旗標。</span><span class="sxs-lookup"><span data-stu-id="125ee-128">[**IS_POINTER_SECONDBUTTON_WPARAM**](/previous-versions/windows/desktop/api)(wParam): a flag that indicates whether there is a secondary action.</span></span>
    -   <span data-ttu-id="125ee-129">這類似于滑鼠右鍵向下按鈕。</span><span class="sxs-lookup"><span data-stu-id="125ee-129">This is analogous to a mouse right button down.</span></span>
    -   <span data-ttu-id="125ee-130">當畫筆指標與數位板介面聯繫時，如果已按下畫筆圓筒按鈕，就會有此設定。</span><span class="sxs-lookup"><span data-stu-id="125ee-130">A pen pointer will have this set when it is in contact with the digitizer surface with the pen barrel button pressed.</span></span>
-   <span data-ttu-id="125ee-131">[**IS_POINTER_THIRDBUTTON_WPARAM**](/previous-versions/windows/desktop/api) (WPARAM) ：旗標，指出是否有一或多個以指標類型為基礎的三個動作;想要回應第三個動作的應用程式必須抓取指標類型的特定資訊，以判斷要按下的第三個按鈕。</span><span class="sxs-lookup"><span data-stu-id="125ee-131">[**IS_POINTER_THIRDBUTTON_WPARAM**](/previous-versions/windows/desktop/api)(wParam): a flag that indicates whether there are one or more tertiary actions based on the pointer type; applications that wish to respond to tertiary actions must retrieve information specific to the pointer type to determine which tertiary buttons are pressed.</span></span> <span data-ttu-id="125ee-132">例如，應用程式可以藉由呼叫 [**GetPointerPenInfo**](/previous-versions/windows/desktop/api) 和檢查指定按鈕狀態的旗標，判斷畫筆的按鈕狀態。</span><span class="sxs-lookup"><span data-stu-id="125ee-132">For example, an application can determine the buttons states of a pen by calling [**GetPointerPenInfo**](/previous-versions/windows/desktop/api) and examining the flags that specify button states.</span></span>
-   <span data-ttu-id="125ee-133">[**IS_POINTER_FOURTHBUTTON_WPARAM**](/previous-versions/windows/desktop/api) (WPARAM) ：指出指定的指標是否採取第四個動作的旗標。</span><span class="sxs-lookup"><span data-stu-id="125ee-133">[**IS_POINTER_FOURTHBUTTON_WPARAM**](/previous-versions/windows/desktop/api)(wParam): a flag that indicates whether the specified pointer took fourth action.</span></span> <span data-ttu-id="125ee-134">想要回應第四個動作的應用程式必須抓取指標類型的特定資訊，以判斷是否按下第一個擴充滑鼠 (XButton1) 按鈕。</span><span class="sxs-lookup"><span data-stu-id="125ee-134">Applications that wish to respond to fourth actions must retrieve information specific to the pointer type to determine if the first extended mouse (XButton1) button is pressed.</span></span>
-   <span data-ttu-id="125ee-135">[**IS_POINTER_FIFTHBUTTON_WPARAM**](/previous-versions/windows/desktop/api) (WPARAM) ： [**旗**](pointer-flags-contants.md) 標，指出指定的指標是否花費第五個動作。</span><span class="sxs-lookup"><span data-stu-id="125ee-135">[**IS_POINTER_FIFTHBUTTON_WPARAM**](/previous-versions/windows/desktop/api)(wParam): a [**flag**](pointer-flags-contants.md) that indicates whether the specified pointer took fifth action.</span></span> <span data-ttu-id="125ee-136">想要回應第五個動作的應用程式必須抓取指標類型的特定資訊，以判斷是否按下第二個擴充滑鼠 (XButton2) 按鈕。</span><span class="sxs-lookup"><span data-stu-id="125ee-136">Applications that wish to respond to fifth actions must retrieve information specific to the pointer type to determine if the second extended mouse (XButton2) button is pressed.</span></span>

    <span data-ttu-id="125ee-137">如需詳細資訊，請參閱 [**指標旗標**](pointer-flags-contants.md) 。</span><span class="sxs-lookup"><span data-stu-id="125ee-137">See [**Pointer Flags**](pointer-flags-contants.md) for more details.</span></span>

    > [!Note]  
    > <span data-ttu-id="125ee-138">停留指標沒有設定按鈕旗標。</span><span class="sxs-lookup"><span data-stu-id="125ee-138">A hovering pointer has none of the button flags set.</span></span> <span data-ttu-id="125ee-139">這類似于未按下滑鼠按鍵的滑鼠移動。</span><span class="sxs-lookup"><span data-stu-id="125ee-139">This is analogous to a mouse move with no mouse buttons down.</span></span> <span data-ttu-id="125ee-140">應用程式可以藉由呼叫 [**GetPointerPenInfo**](/previous-versions/windows/desktop/api) 和檢查指定按鈕狀態的旗標，來決定暫留畫筆的按鈕狀態。</span><span class="sxs-lookup"><span data-stu-id="125ee-140">An application can determine the buttons states of a hovering pen, for example, by calling [**GetPointerPenInfo**](/previous-versions/windows/desktop/api) and examining the flags that specify button states.</span></span>

     

</dd> <dt>

<span data-ttu-id="125ee-141">*lParam*</span><span class="sxs-lookup"><span data-stu-id="125ee-141">*lParam*</span></span> 
</dt> <dd>

<span data-ttu-id="125ee-142">包含指標的點位置。</span><span class="sxs-lookup"><span data-stu-id="125ee-142">Contains the point location of the pointer.</span></span>

> [!Note]  
> <span data-ttu-id="125ee-143">因為指標可能會透過非一般區域與裝置聯繫，所以這個點位置可以簡化更複雜的指標區域。</span><span class="sxs-lookup"><span data-stu-id="125ee-143">Because the pointer may make contact with the device over a non-trivial area, this point location may be a simplification of a more complex pointer area.</span></span> <span data-ttu-id="125ee-144">如果可能的話，應用程式應該使用完整的指標區域資訊，而不是點位置。</span><span class="sxs-lookup"><span data-stu-id="125ee-144">Whenever possible, an application should use the complete pointer area information instead of the point location.</span></span>

 

<span data-ttu-id="125ee-145">您可以使用下列宏來取出點的實際螢幕座標。</span><span class="sxs-lookup"><span data-stu-id="125ee-145">Use the following macros to retrieve the physical screen coordinates of the point.</span></span>

-   <span data-ttu-id="125ee-146">[**GET_X_LPARAM**](/windows/win32/api/windowsx/nf-windowsx-get_x_lparam) (LPARAM) ： X (水準點) 座標。</span><span class="sxs-lookup"><span data-stu-id="125ee-146">[**GET_X_LPARAM**](/windows/win32/api/windowsx/nf-windowsx-get_x_lparam)(lParam): the x (horizontal point) coordinate.</span></span>
-   <span data-ttu-id="125ee-147">[**GET_Y_LPARAM**](/windows/win32/api/windowsx/nf-windowsx-get_y_lparam) (LPARAM) ： Y (垂直點) 座標。</span><span class="sxs-lookup"><span data-stu-id="125ee-147">[**GET_Y_LPARAM**](/windows/win32/api/windowsx/nf-windowsx-get_y_lparam)(lParam): the y (vertical point) coordinate.</span></span>

</dd> </dl>

## <a name="return-value"></a><span data-ttu-id="125ee-148">傳回值</span><span class="sxs-lookup"><span data-stu-id="125ee-148">Return value</span></span>

<span data-ttu-id="125ee-149">如果應用程式處理此訊息，它應該會傳回零。</span><span class="sxs-lookup"><span data-stu-id="125ee-149">If an application processes this message, it should return zero.</span></span>

<span data-ttu-id="125ee-150">如果應用程式未處理此訊息，則應該呼叫 [**DefWindowProc**](/windows/win32/api/winuser/nf-winuser-defwindowproca)。</span><span class="sxs-lookup"><span data-stu-id="125ee-150">If the application does not process this message, it should call [**DefWindowProc**](/windows/win32/api/winuser/nf-winuser-defwindowproca).</span></span>

## <a name="remarks"></a><span data-ttu-id="125ee-151">備註</span><span class="sxs-lookup"><span data-stu-id="125ee-151">Remarks</span></span>

<span data-ttu-id="125ee-152">每個指標在其存留期內都有唯一的指標識別碼。</span><span class="sxs-lookup"><span data-stu-id="125ee-152">Each pointer has a unique pointer identifier during its lifetime.</span></span> <span data-ttu-id="125ee-153">指標的存留期會在第一次偵測到時開始。</span><span class="sxs-lookup"><span data-stu-id="125ee-153">The lifetime of a pointer begins when it is first detected.</span></span>

<span data-ttu-id="125ee-154">如果偵測到停留指標，就會產生 [**WM_POINTERENTER**](wm-pointerenter.md) 訊息。</span><span class="sxs-lookup"><span data-stu-id="125ee-154">A [**WM_POINTERENTER**](wm-pointerenter.md) message is generated if a hovering pointer is detected.</span></span> <span data-ttu-id="125ee-155">如果偵測不到停留指標，則會產生 [**WM_POINTERDOWN**](wm-pointerdown.md) 訊息，後面接著 **WM_POINTERENTER** 訊息。</span><span class="sxs-lookup"><span data-stu-id="125ee-155">A [**WM_POINTERDOWN**](wm-pointerdown.md) message followed by a **WM_POINTERENTER** message is generated if a non-hovering pointer is detected.</span></span>

<span data-ttu-id="125ee-156">在其存留期內，指標可能會在其停留或聯繫時產生一系列的 **WM_POINTERUPDATE** 訊息。</span><span class="sxs-lookup"><span data-stu-id="125ee-156">During its lifetime, a pointer may generate a series of **WM_POINTERUPDATE** messages while it is hovering or in contact.</span></span>

<span data-ttu-id="125ee-157">指標的存留期會在不再偵測到它時結束。</span><span class="sxs-lookup"><span data-stu-id="125ee-157">The lifetime of a pointer ends when it is no longer detected.</span></span> <span data-ttu-id="125ee-158">這會產生 [**WM_POINTERLEAVE**](wm-pointerleave.md) 的訊息。</span><span class="sxs-lookup"><span data-stu-id="125ee-158">This generates a [**WM_POINTERLEAVE**](wm-pointerleave.md) message.</span></span>

<span data-ttu-id="125ee-159">當指標中止時，會設定 [**POINTER_FLAG_CANCELED**](pointer-flags-contants.md) 。</span><span class="sxs-lookup"><span data-stu-id="125ee-159">When a pointer is aborted, [**POINTER_FLAG_CANCELED**](pointer-flags-contants.md) is set.</span></span>

<span data-ttu-id="125ee-160">當非捕捉的指標移至視窗的範圍之外時，也可能會產生 [**WM_POINTERLEAVE**](wm-pointerleave.md) 訊息。</span><span class="sxs-lookup"><span data-stu-id="125ee-160">A [**WM_POINTERLEAVE**](wm-pointerleave.md) message may also be generated when a non-captured pointer moves outside the bounds of a window.</span></span>

<span data-ttu-id="125ee-161">若要取得指標的水準和垂直位置，請使用下列程式：</span><span class="sxs-lookup"><span data-stu-id="125ee-161">To obtain the horizontal and vertical position of a pointer, use the following:</span></span>


```
xPos = GET_X_LPARAM(lParam); 
yPos = GET_Y_LPARAM(lParam);
```



<span data-ttu-id="125ee-162">[**MAKEPOINTS**](/windows/win32/api/wingdi/nf-wingdi-makepoints)宏也可以用來將 lParam 參數轉換成 [**點**](/previous-versions//dd162808(v=vs.85))結構。</span><span class="sxs-lookup"><span data-stu-id="125ee-162">The [**MAKEPOINTS**](/windows/win32/api/wingdi/nf-wingdi-makepoints) macro can also be used to convert the lParam parameter to a [**POINTS**](/previous-versions//dd162808(v=vs.85)) structure.</span></span>

<span data-ttu-id="125ee-163">[**GetKeyState**](/windows/win32/api/winuser/nf-winuser-getkeystate)函數可以用來判斷與此訊息相關聯的鍵盤輔助按鍵狀態。</span><span class="sxs-lookup"><span data-stu-id="125ee-163">The [**GetKeyState**](/windows/win32/api/winuser/nf-winuser-getkeystate) function can be used to determine the keyboard modifier key states associated with this message.</span></span> <span data-ttu-id="125ee-164">例如，若要偵測是否已按下 ALT 鍵，請檢查 **GetKeyState** (VK_MENU) &lt; 0。</span><span class="sxs-lookup"><span data-stu-id="125ee-164">For example, to detect that the ALT key was pressed, check whether **GetKeyState** (VK_MENU) &lt; 0.</span></span>

<span data-ttu-id="125ee-165">如果應用程式不會處理此訊息， [**DefWindowProc**](/windows/win32/api/winuser/nf-winuser-defwindowproca) 可能會產生一或多個 [**WM_GESTURE**](../wintouch/wm-gesture.md) 訊息（如果此和中的輸入順序可能會被辨識為手勢）。</span><span class="sxs-lookup"><span data-stu-id="125ee-165">If the application does not process this message, [**DefWindowProc**](/windows/win32/api/winuser/nf-winuser-defwindowproca) may generate one or more [**WM_GESTURE**](../wintouch/wm-gesture.md) messages if the sequence of input from this and, possibly, other pointers is recognized as a gesture.</span></span> <span data-ttu-id="125ee-166">如果無法辨識手勢， **DefWindowProc** 可能會產生滑鼠輸入。</span><span class="sxs-lookup"><span data-stu-id="125ee-166">If a gesture is not recognized, **DefWindowProc** may generate mouse input.</span></span>

<span data-ttu-id="125ee-167">如果應用程式選擇性地取用一些指標輸入，並將 rest 傳遞給 [**DefWindowProc**](/windows/win32/api/winuser/nf-winuser-defwindowproca)，則產生的行為是未定義的。</span><span class="sxs-lookup"><span data-stu-id="125ee-167">If an application selectively consumes some pointer input and passes the rest to [**DefWindowProc**](/windows/win32/api/winuser/nf-winuser-defwindowproca), the resulting behavior is undefined.</span></span>

<span data-ttu-id="125ee-168">您可以使用 [**GetPointerInfo**](/previous-versions/windows/desktop/api) 函式來取得與此訊息相關的進一步資訊。</span><span class="sxs-lookup"><span data-stu-id="125ee-168">Use the [**GetPointerInfo**](/previous-versions/windows/desktop/api) function to retrieve further information related to this message.</span></span>

<span data-ttu-id="125ee-169">如果應用程式在產生這些訊息時，不會快速處理這些訊息，則可能會有一些移動。</span><span class="sxs-lookup"><span data-stu-id="125ee-169">If the application does not process these messages as fast as they are generated, some moves may be coalesced.</span></span> <span data-ttu-id="125ee-170">您可以使用 [**GetPointerInfoHistory**](/previous-versions/windows/desktop/api) 函式來抓取合併到此訊息的輸入歷程記錄。</span><span class="sxs-lookup"><span data-stu-id="125ee-170">The history of inputs that were coalesced into this message can be retrieved using the [**GetPointerInfoHistory**](/previous-versions/windows/desktop/api) function.</span></span>

## <a name="examples"></a><span data-ttu-id="125ee-171">範例</span><span class="sxs-lookup"><span data-stu-id="125ee-171">Examples</span></span>

<span data-ttu-id="125ee-172">下列程式碼範例示範如何使用 [**GET_X_LPARAM**](/windows/win32/api/windowsx/nf-windowsx-get_x_lparam)、 [**GET_Y_LPARAM**](/windows/win32/api/windowsx/nf-windowsx-get_y_lparam)、 [**IS_POINTER_FIRSTBUTTON_WPARAM**](/previous-versions/windows/desktop/api)和 [**IS_POINTER_SECONDBUTTON_WPARAM**](/previous-versions/windows/desktop/api) ，從 **WM_POINTERUPDATE** 訊息的 WPARAM 和 LPARAM 參數中取出相關資訊。</span><span class="sxs-lookup"><span data-stu-id="125ee-172">The following code example shows how to use [**GET_X_LPARAM**](/windows/win32/api/windowsx/nf-windowsx-get_x_lparam), [**GET_Y_LPARAM**](/windows/win32/api/windowsx/nf-windowsx-get_y_lparam), [**IS_POINTER_FIRSTBUTTON_WPARAM**](/previous-versions/windows/desktop/api), and [**IS_POINTER_SECONDBUTTON_WPARAM**](/previous-versions/windows/desktop/api) to retrieve relevant information from the wParam and lParam parameters of the **WM_POINTERUPDATE** message.</span></span>


```
int xPos = GET_X_LPARAM(lParam);
int yPos = GET_Y_LPARAM(lParam);

if (IS_POINTER_PRIMARYBUTTON_WPARAM(wParam))
{
    // process pointer move while down, similar to mouse move with left button down
}
else if (IS_POINTER_SECONDARYBUTTON_WPARAM(wParam))
{
    // process pointer move while down, similar to mouse move with right button down
}
```



<span data-ttu-id="125ee-173">下列程式碼範例示範如何使用 [**GET_POINTERID_WPARAM**](/previous-versions/windows/desktop/api) 從 **WM_POINTERUPDATE** 訊息的 WPARAM 參數取出指標識別碼。</span><span class="sxs-lookup"><span data-stu-id="125ee-173">The following code example shows how to use [**GET_POINTERID_WPARAM**](/previous-versions/windows/desktop/api) to retrieve the pointer id from the wParam parameter of the **WM_POINTERUPDATE** message.</span></span>


```
POINTER_INFO pointerInfo;
UINT32       pointerId = GET_POINTERID_WPARAM(wParam);

// Retrieve common pointer information
if (!GetPointerInfo(pointerId, &amp;pointerInfo))
{
    // failure, call GetLastError()
}
else
{
    // success, process pointerInfo
}
```



<span data-ttu-id="125ee-174">下列程式碼範例顯示如何處理不同的指標類型。</span><span class="sxs-lookup"><span data-stu-id="125ee-174">The following code example shows how to handle different pointer types.</span></span>


```
POINTER_TOUCH_INFO   touchInfo;
POINTER_PEN_INFO     penInfo;
POINTER_INFO pointerInfo;
UINT32       pointerId = GET_POINTERID_WPARAM(wParam);
POINTER_INPUT_TYPE pointerType = PT_POINTER;

// default to unhandled to enable call to DefWindowProc
fHandled = FALSE;

if (!GetPointerType(pointerId, &pointerType))
{
    // failure, call GetLastError()
    // set PT_POINTER to fall to default case below
    pointerType = PT_POINTER;
}

switch (pointerType)
{
case PT_TOUCH:
    // Retrieve touch information
    if (!GetPointerTouchInfo(pointerId, &touchInfo))
    {
        // failure, call GetLastError()
    }
    else
    {
        // success, process touchInfo
        // mark as handled to skip call to DefWindowProc
        fHandled = TRUE;
    }
    break;
case PT_PEN:
    // Retrieve pen information
    if (!GetPointerPenInfo(pointerId, &penInfo))
    {
        // failure, call GetLastError()
    }
    else
    {
        // success, process penInfo
        // mark as handled to skip call to DefWindowProc
        fHandled = TRUE;
    }
    break;
default:
    if (!GetPointerInfo(pointerId, &pointerInfo)) 
    {
        // failure.
    } 
    else 
    {
        // success, proceed with pointerInfo.
        fHandled = HandleGenericPointerInfo(&pointerInfo);
    }
    break;
}
```



## <a name="requirements"></a><span data-ttu-id="125ee-175">規格需求</span><span class="sxs-lookup"><span data-stu-id="125ee-175">Requirements</span></span>



| <span data-ttu-id="125ee-176">需求</span><span class="sxs-lookup"><span data-stu-id="125ee-176">Requirement</span></span> | <span data-ttu-id="125ee-177">值</span><span class="sxs-lookup"><span data-stu-id="125ee-177">Value</span></span> |
|-------------------------------------|----------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="125ee-178">最低支援的用戶端</span><span class="sxs-lookup"><span data-stu-id="125ee-178">Minimum supported client</span></span><br/> | <span data-ttu-id="125ee-179">\[僅 Windows 8 桌面應用程式\]</span><span class="sxs-lookup"><span data-stu-id="125ee-179">Windows 8 \[desktop apps only\]</span></span><br/>                                                               |
| <span data-ttu-id="125ee-180">最低支援的伺服器</span><span class="sxs-lookup"><span data-stu-id="125ee-180">Minimum supported server</span></span><br/> | <span data-ttu-id="125ee-181">僅限 Windows Server 2012 \[ desktop 應用程式\]</span><span class="sxs-lookup"><span data-stu-id="125ee-181">Windows Server 2012 \[desktop apps only\]</span></span><br/>                                                     |
| <span data-ttu-id="125ee-182">標頭</span><span class="sxs-lookup"><span data-stu-id="125ee-182">Header</span></span><br/>                   | <dl> <span data-ttu-id="125ee-183"><dt>Winuser (包含) 的 Windows。h </dt></span><span class="sxs-lookup"><span data-stu-id="125ee-183"><dt>Winuser.h (include Windows.h)</dt></span></span> </dl> |



## <a name="see-also"></a><span data-ttu-id="125ee-184">另請參閱</span><span class="sxs-lookup"><span data-stu-id="125ee-184">See also</span></span>

<dl> <dt>

[<span data-ttu-id="125ee-185">訊息</span><span class="sxs-lookup"><span data-stu-id="125ee-185">Messages</span></span>](messages.md)
</dt> <dt>

<span data-ttu-id="125ee-186">**參考**</span><span class="sxs-lookup"><span data-stu-id="125ee-186">**Reference**</span></span>
</dt> <dt>

[<span data-ttu-id="125ee-187">**指標旗標**</span><span class="sxs-lookup"><span data-stu-id="125ee-187">**Pointer Flags**</span></span>](pointer-flags-contants.md)
</dt> <dt>

[<span data-ttu-id="125ee-188">**GET_POINTERID_WPARAM**</span><span class="sxs-lookup"><span data-stu-id="125ee-188">**GET_POINTERID_WPARAM**</span></span>](/previous-versions/windows/desktop/api)
</dt> <dt>

[<span data-ttu-id="125ee-189">**IS_POINTER_NEW_WPARAM**</span><span class="sxs-lookup"><span data-stu-id="125ee-189">**IS_POINTER_NEW_WPARAM**</span></span>](/previous-versions/windows/desktop/api)
</dt> <dt>

[<span data-ttu-id="125ee-190">**IS_POINTER_INRANGE_WPARAM**</span><span class="sxs-lookup"><span data-stu-id="125ee-190">**IS_POINTER_INRANGE_WPARAM**</span></span>](/previous-versions/windows/desktop/api)
</dt> <dt>

[<span data-ttu-id="125ee-191">**IS_POINTER_INCONTACT_WPARAM**</span><span class="sxs-lookup"><span data-stu-id="125ee-191">**IS_POINTER_INCONTACT_WPARAM**</span></span>](/previous-versions/windows/desktop/api)
</dt> <dt>

[<span data-ttu-id="125ee-192">**IS_POINTER_PRIMARY_WPARAM**</span><span class="sxs-lookup"><span data-stu-id="125ee-192">**IS_POINTER_PRIMARY_WPARAM**</span></span>](/previous-versions/windows/desktop/api)
</dt> <dt>

[<span data-ttu-id="125ee-193">**IS_POINTER_FIRSTBUTTON_WPARAM**</span><span class="sxs-lookup"><span data-stu-id="125ee-193">**IS_POINTER_FIRSTBUTTON_WPARAM**</span></span>](/previous-versions/windows/desktop/api)
</dt> <dt>

[<span data-ttu-id="125ee-194">**IS_POINTER_SECONDBUTTON_WPARAM**</span><span class="sxs-lookup"><span data-stu-id="125ee-194">**IS_POINTER_SECONDBUTTON_WPARAM**</span></span>](/previous-versions/windows/desktop/api)
</dt> <dt>

[<span data-ttu-id="125ee-195">**IS_POINTER_THIRDBUTTON_WPARAM**</span><span class="sxs-lookup"><span data-stu-id="125ee-195">**IS_POINTER_THIRDBUTTON_WPARAM**</span></span>](/previous-versions/windows/desktop/api)
</dt> <dt>

[<span data-ttu-id="125ee-196">**IS_POINTER_FOURTHBUTTON_WPARAM**</span><span class="sxs-lookup"><span data-stu-id="125ee-196">**IS_POINTER_FOURTHBUTTON_WPARAM**</span></span>](/previous-versions/windows/desktop/api)
</dt> <dt>

[<span data-ttu-id="125ee-197">**IS_POINTER_FIFTHBUTTON_WPARAM**</span><span class="sxs-lookup"><span data-stu-id="125ee-197">**IS_POINTER_FIFTHBUTTON_WPARAM**</span></span>](/previous-versions/windows/desktop/api)
</dt> </dl>

 

