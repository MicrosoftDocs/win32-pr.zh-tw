---
description: 「命名空間」（namespace）是指將 (關聯為最小) 通訊協定的一些功能，並以一或多個易記名稱來定址網路服務的屬性。
ms.assetid: 4139a8c2-d940-41e0-a3e8-fce3b70a1ff3
title: 名稱解析模型
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: dcb209254dcee2419e1ed92c017fc7d37dc9c0a6
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/07/2021
ms.locfileid: "104511428"
---
# <a name="name-resolution-model"></a>名稱解析模型

「 *命名空間* 」（namespace）是指將 (關聯為最小) 通訊協定的一些功能，並以一或多個易記名稱來定址網路服務的屬性。 許多命名空間目前都是廣泛使用，包括網際網路的 [網域名稱系統](../dns/dns-start-page.md) (DNS) 、 [Active Directory Domain Services、、](../ad/active-directory-domain-services.md)、NetWare 目錄服務 (來自 Novell 的 NDS) 和 X 500。 這些命名空間的組織和實行方式有很大的差異。 從 Winsock 名稱解析的觀點來看，某些屬性特別重要。

## <a name="types-of-namespaces"></a>命名空間的類型

有三種不同類型的命名空間，可在其中註冊服務：

-   動態
-   Static
-   持續性

動態命名空間可讓服務即時註冊命名空間，並讓用戶端在執行時間探索可用的服務。 動態命名空間經常依賴廣播來指出網路服務的持續可用性。 較舊的動態命名空間範例包含 (在 NetWare 環境中使用的 SAP) 命名空間的服務廣告通訊協定，以及 AppleTalk 使用的名稱系結通訊協定 (NBP) 命名空間。 在 Windows 上使用的對等名稱解析通訊協定 (PNRP) 命名空間是較新的動態命名空間範例。

靜態命名空間需要預先註冊所有服務，也就是建立命名空間的時候。 靜態命名空間的範例包括大部分 TCP/IP 執行所使用的 *主機*、 *通訊協定* 和 *服務* 檔案。 在 Windows 中，這些檔案通常位於 *C： \\ Windows \\ system32 \\ 驅動程式 \\ 等* 資料夾中。

持續性命名空間可讓服務即時註冊命名空間。 但不同于動態命名空間，持續性命名空間會保留靜態儲存體中的註冊資訊，在此情況下，它會一直保留到服務要求移除時為止。 持續性的命名空間是由目錄服務（例如 X. 500 和 NDS (NetWare 目錄服務) ）所 typified。 這些環境可讓您新增、刪除和修改服務屬性。 此外，代表目錄服務內之服務的服務物件可以有各種與服務相關聯的屬性。 用戶端應用程式最重要的屬性是服務的定址資訊。 DNS 是永久性命名空間的另一個範例。 雖然有程式設計方式可使用 Windows 通訊端來解析 DNS 名稱，但 Windows 中的 DNS 命名空間提供者不支援使用 Winsock 註冊新的 DNS 名稱。 您必須直接使用 DNS 功能來註冊 DNS 名稱。 如需詳細資訊，請參閱 [DNS 參考](../dns/dns-reference.md)。

## <a name="namespace-organization"></a>命名空間組織

許多命名空間會以階層方式排列。 有些（例如，X. 500 和 NDS）允許無限制的嵌套。 其他則允許將服務合併為單一層級的階層或群組。 這通常稱為 *工作組*。 當您建立查詢時，通常必須在命名空間階層內建立搜尋開始的內容點。

## <a name="namespace-provider-architecture"></a>命名空間提供者架構

當然，程式設計介面可用來查詢不同類型的命名空間，並在命名空間中註冊資訊 (如果支援) 的差異很大。 *命名空間提供者* 是一種本機常駐的軟體，它知道如何在 Winsock 命名空間 SPI 和某些現有的命名空間之間進行對應， (可在本機上執行，或透過網路) 來存取。 命名空間提供者架構如下所示：

![命名空間提供者架構](images/ovrvw3-1.png)

請注意，指定的命名空間（例如 DNS）可能會在指定的電腦上安裝一個以上的命名空間提供者。

如上所述，泛型詞彙 *服務* 是指用戶端/伺服器應用程式的半部伺服器。 在 Winsock 中，服務與 *服務類別* 相關聯，而特定服務的每個實例都有服務 *名稱* ，此名稱在服務類別中必須是唯一的。 服務類別的範例包括 FTP 伺服器、SQL Server、XYZ Corp、員工資訊伺服器等等。如範例所示，某些服務類別是已知的，有些則是特定的垂直應用程式特有的。 在任一種情況下，每個服務類別都會以類別名稱和類別識別碼來表示。 類別名稱不一定需要是唯一的，但類別識別碼必須是。 全域唯一識別碼 (Guid) 用來表示服務類別識別碼。 針對已知的服務， (Guid) 的類別名稱和類別識別碼已預先配置，而宏可用於轉換，例如，以主機位元組順序 (的 TCP 埠號碼) 和對應的類別識別碼 Guid。 對於其他服務，開發人員可以選擇類別名稱，並使用 Uuidgen.exe 公用程式來產生類別識別碼的 GUID。

服務類別的概念可讓您建立一組屬性，而這些屬性會由特定服務的所有實例共同保存。 這組屬性是在服務類別定義為 Winsock 時提供，而且稱為服務類別架構資訊。 在主機電腦上安裝並提供服務時，該服務會被視為具現 *化*，並使用其服務名稱來區別服務的特定實例與其他可能命名空間的實例。

請注意，服務類別的安裝只需要在服務執行所在的電腦上執行，而不是在所有可能使用服務的用戶端上發生。 在可能的情況下，Ws2 \_32.dll 會在服務的具現化註冊或起始服務查詢時，為命名空間提供者提供服務類別架構資訊。 當然，Ws2 \_32.dll 並不會儲存這項資訊，但是會嘗試從已指出提供此資料的命名空間提供者取得它。 因為無法保證 Ws2 \_32.dll 可以提供服務類別架構，所以需要此資訊的命名空間提供者必須具有可透過命名空間特定的方法取得的回溯機制。

如上所述，網際網路採用以主機為中心的服務模型。 需要找出服務傳輸位址的應用程式通常必須先解析已知裝載服務的特定主機位址。 在此位址中，他們會新增知名的埠號碼，並因此建立完整的傳輸位址。 為了加速解析主機名稱，已預先配置 (**SVCID \_ 主機名稱**) 的特殊服務類別識別碼。 此查詢會將 **SVCID \_ 主機** 名指定為服務類別，並指定服務實例名稱的主機名稱，如果查詢成功，則會傳回主機位址資訊。

在 Windows 通訊端2中，與通訊協定無關的應用程式應該避免需要理解傳輸位址的內部詳細資料。 因此，必須先取得主機位址，然後再新增至埠有問題。 若要避免這種情況，查詢也可能包含特定服務的已知名稱，以及服務運作的通訊協定，例如 FTP over TCP。 在此情況下，成功的查詢會傳回所指定主機上所指定服務的完整傳輸位址，而且應用程式不需要檢查 [**sockaddr**](sockaddr-2.md) 結構的內部。

網際網路的網域名稱系統沒有妥善定義的方法來儲存服務類別架構資訊。 因此，Winsock 的 DNS 命名空間提供者只能容納已預先佈建服務類別 GUID 的知名 TCP/IP 服務。

在實務上，這不是嚴重的限制，因為已針對整組 TCP 和 UDP 埠預先佈建服務類別 Guid，而宏可以用來抓取以主機位元組順序表示之埠的任何 TCP 或 UDP 埠相關聯的 GUID。 因此，所有熟悉的服務（例如 HTTP、FTP、Telnet、Whois 等）都受到妥善支援。

繼續進行我們的服務類別範例時，FTP 服務的實例名稱可能是 "alder.intel.com" 或 "ftp.microsoft.com"，而 XYZ Corp 的實例名稱則可能會命名為 "XYZ Corp. Employee Info Server Version 3.5"。

在前兩個案例中，FTP 的服務類別 GUID 和電腦名稱稱的組合 (提供作為服務實例名稱，) 唯一識別所需的服務。 在第三個案例中，可以在服務查詢時探索服務所在的主機名稱，因此服務實例名稱不需要包含主機名稱。

## <a name="related-topics"></a>相關主題

<dl> <dt>

[DNS 參考](../dns/dns-reference.md)
</dt> <dt>

[名稱解析資料結構](name-resolution-data-structures-2.md)
</dt> <dt>

[通訊協定獨立名稱解析](protocol-independent-name-resolution-2.md)
</dt> <dt>

[註冊和名稱解析](registration-and-name-resolution-2.md)
</dt> <dt>

[**SOCKADDR**](sockaddr-2.md)
</dt> <dt>

[名稱解析函數的摘要](summary-of-name-resolution-functions-2.md)
</dt> </dl>

 

 
