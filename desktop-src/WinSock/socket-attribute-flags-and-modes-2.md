---
description: 有幾個通訊端屬性可透過 WSPSocket 中的旗標參數來表示。
ms.assetid: 5fd4321b-a5cc-4921-bec5-bdf625261ea2
title: 通訊端屬性旗標和模式
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8da1a5f621a7d9f489f4e91782462c215659772b
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/08/2021
ms.locfileid: "106987289"
---
# <a name="socket-attribute-flags-and-modes"></a><span data-ttu-id="1aa65-103">通訊端屬性旗標和模式</span><span class="sxs-lookup"><span data-stu-id="1aa65-103">Socket Attribute Flags and Modes</span></span>

<span data-ttu-id="1aa65-104">有幾個通訊端屬性可透過 [**WSPSocket**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspsocket)中的 *旗標* 參數來表示。</span><span class="sxs-lookup"><span data-stu-id="1aa65-104">There are several socket attributes which can be indicated through the *flags* parameter in [**WSPSocket**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspsocket).</span></span> <span data-ttu-id="1aa65-105">WSA 旗標重迭 \_ \_ 旗標表示將會使用通訊端來進行重迭的 i/o 作業。</span><span class="sxs-lookup"><span data-stu-id="1aa65-105">The WSA\_FLAG\_OVERLAPPED flag indicates that a socket will be used for overlapped I/O operations.</span></span> <span data-ttu-id="1aa65-106">所有服務提供者都必須支援此屬性。</span><span class="sxs-lookup"><span data-stu-id="1aa65-106">Support of this attribute is mandatory for all service providers.</span></span> <span data-ttu-id="1aa65-107">如需詳細資訊，請參閱重迭的 [i/o](overlapped-i-o-2.md) 。</span><span class="sxs-lookup"><span data-stu-id="1aa65-107">See [Overlapped I/O](overlapped-i-o-2.md) for more information.</span></span> <span data-ttu-id="1aa65-108">請注意，若要建立具有重迭屬性的通訊端，就不會影響通訊端目前處於封鎖或非封鎖模式。</span><span class="sxs-lookup"><span data-stu-id="1aa65-108">Note that creating a socket with the overlapped attribute has no impact on whether a socket is currently in blocking or nonblocking mode.</span></span> <span data-ttu-id="1aa65-109">使用重迭屬性建立的通訊端可以用來執行重迭的 i/o，而這樣做並不會變更通訊端的封鎖模式。</span><span class="sxs-lookup"><span data-stu-id="1aa65-109">Sockets created with the overlapped attribute may be used to perform overlapped I/O, and doing so does not change the blocking mode of a socket.</span></span> <span data-ttu-id="1aa65-110">由於重迭的 i/o 作業不會封鎖，因此通訊端的封鎖模式與這些作業無關。</span><span class="sxs-lookup"><span data-stu-id="1aa65-110">Since overlapped I/O operations do not block, the blocking mode of a socket is irrelevant for these operations.</span></span>

<span data-ttu-id="1aa65-111">建立要用於 multipoint 和/或多播作業的通訊端時，會使用四個額外的屬性旗標，而這些屬性的支援是選擇性的。</span><span class="sxs-lookup"><span data-stu-id="1aa65-111">Four additional attribute flags are used when creating sockets that are to be used for multipoint and/or multicast operations, and support for these attributes is optional.</span></span> <span data-ttu-id="1aa65-112">支援 multipoint 屬性的提供者會 \_ \_ 在其各自的 [**WSAPROTOCOL \_ 資訊**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) 結構中透過 XP1 支援 multipoint bit 來指出這一點。</span><span class="sxs-lookup"><span data-stu-id="1aa65-112">Providers that support multipoint attributes indicate this through the XP1\_SUPPPORT\_MULTIPOINT bit in their respective [**WSAPROTOCOL\_INFO**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) structures.</span></span> <span data-ttu-id="1aa65-113">如需這些旗標的定義和使用方式，請參閱 API 中的 [**WSPSocket**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspsocket) 和 [通訊協定獨立多播和 Multipoint](protocol-independent-multicast-and-multipoint-in-the-spi-2.md) 。</span><span class="sxs-lookup"><span data-stu-id="1aa65-113">See [**WSPSocket**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspsocket) and [Protocol-Independent Multicast and Multipoint in the API](protocol-independent-multicast-and-multipoint-in-the-spi-2.md) for the definition and usage of each of these flags.</span></span> <span data-ttu-id="1aa65-114">只有使用 multipoint 相關屬性建立的通訊端可以用在 [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) 函式中，以建立 multipoint 會話。</span><span class="sxs-lookup"><span data-stu-id="1aa65-114">Only sockets that are created with multipoint-related attributes can be used in the [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) function for creating multipoint sessions.</span></span>

<span data-ttu-id="1aa65-115">通訊端處於兩種模式的其中一種，也就是封鎖和非封鎖的。</span><span class="sxs-lookup"><span data-stu-id="1aa65-115">A socket is in one of two modes, blocking and nonblocking, at any time.</span></span> <span data-ttu-id="1aa65-116">通訊端預設會在封鎖模式下建立，而且可以藉由呼叫 [**WSPAsyncSelect**](/previous-versions/windows/desktop/legacy/ms742267(v=vs.85))、 [**WSPEventSelect**](/previous-versions/windows/hardware/network/ff566287(v=vs.85))或 [**WSPIoctl**](/previous-versions/windows/hardware/network/ff566296(v=vs.85))來變更為非封鎖模式。</span><span class="sxs-lookup"><span data-stu-id="1aa65-116">Sockets are created in the blocking mode by default, and can be changed to nonblocking mode by calling [**WSPAsyncSelect**](/previous-versions/windows/desktop/legacy/ms742267(v=vs.85)), [**WSPEventSelect**](/previous-versions/windows/hardware/network/ff566287(v=vs.85)), or [**WSPIoctl**](/previous-versions/windows/hardware/network/ff566296(v=vs.85)).</span></span> <span data-ttu-id="1aa65-117">如果沒有作用中的 **WSPAsyncSelect** 或 **WSPEventSelect** ，則可以使用 **WSPIoctl** ，將通訊端切換回封鎖模式。</span><span class="sxs-lookup"><span data-stu-id="1aa65-117">A socket can be switched back to blocking mode by using **WSPIoctl** if no **WSPAsyncSelect** or **WSPEventSelect** is active.</span></span> <span data-ttu-id="1aa65-118">通訊端的模式只會影響可能封鎖的函式，而不會影響重迭的 i/o 作業。</span><span class="sxs-lookup"><span data-stu-id="1aa65-118">The mode for a socket only affects those functions which may block, and does not affect overlapped I/O operations.</span></span> <span data-ttu-id="1aa65-119">如需詳細資訊，請參閱 [封鎖作業](blocking-operations-2.md) 。</span><span class="sxs-lookup"><span data-stu-id="1aa65-119">See [Blocking Operations](blocking-operations-2.md) for more information.</span></span>

 

 
