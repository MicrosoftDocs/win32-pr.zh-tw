---
description: 程式設計介面，可用來查詢不同類型的命名空間，並在命名空間中註冊資訊（如果支援的話），但差異較大。
ms.assetid: 6a037e8d-49f3-4286-929a-8bb64ea0960f
title: SPI 中的命名空間提供者架構
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e1cb567933cae60f56137eba39845bf27ad8c1a8
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/07/2021
ms.locfileid: "104191331"
---
# <a name="namespace-provider-architecture-in-the-spi"></a><span data-ttu-id="b6814-103">SPI 中的命名空間提供者架構</span><span class="sxs-lookup"><span data-stu-id="b6814-103">Namespace Provider Architecture in the SPI</span></span>

<span data-ttu-id="b6814-104">程式設計介面，可用來查詢不同類型的命名空間，並在命名空間中註冊資訊（如果支援的話），但差異較大。</span><span class="sxs-lookup"><span data-stu-id="b6814-104">Programmatic interfaces used to query the various types of namespaces and to register information within a namespace, if supported, differ widely.</span></span> <span data-ttu-id="b6814-105">命名空間提供者是一個本機駐留的應用程式，可以在 Windows 通訊端命名空間 SPI 和一些可在本機上執行或透過網路存取的現有命名空間之間進行對應。</span><span class="sxs-lookup"><span data-stu-id="b6814-105">A namespace provider is a locally-resident application that can map between the Windows Sockets namespace SPI and some existing namespace that could be implemented locally or accessed through the network.</span></span> <span data-ttu-id="b6814-106">如下所示：</span><span class="sxs-lookup"><span data-stu-id="b6814-106">This is illustrated as follows:</span></span>

![命名空間提供者圖表](images/ovrvw3-1.png)

> [!Note]  
> <span data-ttu-id="b6814-108">指定的命名空間（例如 DNS）可能會在指定的電腦上安裝一個以上的命名空間提供者。</span><span class="sxs-lookup"><span data-stu-id="b6814-108">It is possible for a given namespace, for example DNS, to have more than one namespace provider installed on a given computer.</span></span>

 

<span data-ttu-id="b6814-109">如先前所述，一般的「服務」是指用戶端/伺服器應用程式的半部伺服器。</span><span class="sxs-lookup"><span data-stu-id="b6814-109">As mentioned above, the generic term, service, refers to the server-half of a client/server application.</span></span> <span data-ttu-id="b6814-110">在 Windows 通訊端中，服務與服務類別相關聯，而特定服務的每個實例都有服務名稱，此名稱在服務類別中必須是唯一的。</span><span class="sxs-lookup"><span data-stu-id="b6814-110">In Windows Sockets, a service is associated with a service class and each instance of a particular service has a service name which must be unique within the service class.</span></span> <span data-ttu-id="b6814-111">服務類別的範例包括 FTP 伺服器、SQL Server、XYZ Corp、員工資訊伺服器等等。</span><span class="sxs-lookup"><span data-stu-id="b6814-111">Examples of service classes include FTP Server, SQL Server, XYZ Corp. Employee Info Server, and so on.</span></span>

<span data-ttu-id="b6814-112">如範例所示，某些服務類別是已知的，有些則是特定的垂直應用程式特有的。</span><span class="sxs-lookup"><span data-stu-id="b6814-112">As the example attempts to illustrate, some service classes are well known while others are unique and specific to a particular vertical application.</span></span> <span data-ttu-id="b6814-113">在任一種情況下，每個服務類別都會以類別名稱和類別識別碼來表示。</span><span class="sxs-lookup"><span data-stu-id="b6814-113">In either case, every service class is represented by both a class name and a class identifier.</span></span> <span data-ttu-id="b6814-114">類別名稱不一定需要是唯一的，但類別識別碼必須是。</span><span class="sxs-lookup"><span data-stu-id="b6814-114">The class name does not necessarily need to be unique, but the class identifier must be.</span></span> <span data-ttu-id="b6814-115">全域唯一識別碼 (Guid) 用來表示服務類別識別碼。</span><span class="sxs-lookup"><span data-stu-id="b6814-115">Globally Unique Identifiers (GUIDs) are used to represent service class IDs.</span></span> <span data-ttu-id="b6814-116">針對已知的服務、類別名稱和類別識別碼 (Guid) 已經預先配置過，而宏可用於轉換，例如 TCP 埠號碼和對應的類別識別碼 Guid。</span><span class="sxs-lookup"><span data-stu-id="b6814-116">For well-known services, class names, and class identifiers (GUIDs) have been preallocated, and macros are available to convert between, for example, TCP port numbers and the corresponding class identifier GUIDs.</span></span> <span data-ttu-id="b6814-117">對於其他服務，開發人員可以選擇類別名稱，並使用 Uuidgen.exe 公用程式來產生類別識別碼的 GUID。</span><span class="sxs-lookup"><span data-stu-id="b6814-117">For other services, the developer chooses the class name and uses the Uuidgen.exe utility to generate a GUID for the class identifier.</span></span>

<span data-ttu-id="b6814-118">服務類別的概念可讓您建立一組屬性，而這些屬性會由特定服務的所有實例共同保存。</span><span class="sxs-lookup"><span data-stu-id="b6814-118">The concept of a service class exists to allow a set of attributes to be established that are held in common by all instances of a particular service.</span></span> <span data-ttu-id="b6814-119">這組屬性會在定義服務類別時，提供給 Windows 通訊端，並稱為服務類別架構資訊。</span><span class="sxs-lookup"><span data-stu-id="b6814-119">This set of attributes is supplied to Windows Sockets at the time the service class is defined, and is referred to as the service class schema information.</span></span> <span data-ttu-id="b6814-120">Ws2 \_32.dll 接著會將這項資訊轉送至所有使用中的命名空間提供者。</span><span class="sxs-lookup"><span data-stu-id="b6814-120">The Ws2\_32.dll in turn relays this information to all active namespace providers.</span></span> <span data-ttu-id="b6814-121">在主機電腦上安裝並提供服務的實例時，會使用它的服務名稱來區別此特定實例與其他可能已知的命名空間。</span><span class="sxs-lookup"><span data-stu-id="b6814-121">When an instance of a service is installed and made available on a host computer, its service name is used to distinguish this particular instance from others that may be known to the namespace.</span></span>

<span data-ttu-id="b6814-122">請注意，服務類別的安裝只需要在服務執行所在的電腦上執行，而不是在所有可能使用服務的用戶端上發生。</span><span class="sxs-lookup"><span data-stu-id="b6814-122">Be aware that the installation of a service class only needs to occur on computers where the service executes, not on all of the clients which may utilize the service.</span></span> <span data-ttu-id="b6814-123">可能的話，Ws2 \_32.dll 會在服務的實例註冊或起始服務查詢時，將服務類別架構資訊提供給命名空間提供者。</span><span class="sxs-lookup"><span data-stu-id="b6814-123">When possible, the Ws2\_32.dll will provide service class schema information to a namespace provider at the time an instance of a service is to be registered or a service query is initiated.</span></span> <span data-ttu-id="b6814-124">當然，Ws2 \_32.dll 並不會儲存這項資訊，但是會嘗試從已指出提供此資料的命名空間提供者取得它。</span><span class="sxs-lookup"><span data-stu-id="b6814-124">The Ws2\_32.dll does not, of course, store this information itself, but attempts to retrieve it from a namespace provider that has indicated its ability to supply this data.</span></span> <span data-ttu-id="b6814-125">因為無法保證 Ws2 \_32.dll 將能夠提供服務類別架構，所以需要此資訊的命名空間提供者必須具有可透過命名空間特定的方法取得的回溯機制。</span><span class="sxs-lookup"><span data-stu-id="b6814-125">Because there is no guarantee that the Ws2\_32.dll will be able to supply the service class schema, namespace providers that require this information must have a fallback mechanism to obtain it through namespace-specific means.</span></span>

<span data-ttu-id="b6814-126">網際網路網域名稱系統沒有妥善定義的方法來儲存服務類別架構資訊。</span><span class="sxs-lookup"><span data-stu-id="b6814-126">The Internet Domain Name System does not have a well-defined means to store service class schema information.</span></span> <span data-ttu-id="b6814-127">如此一來，DNS 命名空間提供者將只能容納已預先佈建服務類別 GUID 的知名 TCP/IP 服務。</span><span class="sxs-lookup"><span data-stu-id="b6814-127">As a result, DNS namespace providers will only be able to accommodate well-known TCP/IP services for which a service class GUID has been preallocated.</span></span> <span data-ttu-id="b6814-128">在實務上，這不是嚴重的限制，因為已針對整組 TCP 和 UDP 埠預先佈建服務類別 Guid，而宏可供取出與任何 TCP 或 UDP 埠相關聯的 GUID。</span><span class="sxs-lookup"><span data-stu-id="b6814-128">In practice, this is not a serious limitation since service class GUIDs have been preallocated for the entire set of TCP and UDP ports, and macros are available to retrieve the GUID associated with any TCP or UDP port.</span></span> <span data-ttu-id="b6814-129">因此，所有熟悉的服務（例如 ftp、telnet、Whois 等）都受到妥善支援。</span><span class="sxs-lookup"><span data-stu-id="b6814-129">Thus, all of the familiar services such as ftp, telnet, whois, etc. are well supported.</span></span> <span data-ttu-id="b6814-130">當查詢這些服務時，依照慣例，目的電腦的主機名稱是服務實例名稱。</span><span class="sxs-lookup"><span data-stu-id="b6814-130">When querying for these services, by convention the host name of the target computer is the service instance name.</span></span>

<span data-ttu-id="b6814-131">繼續進行我們的服務類別範例時，ftp 服務的實例名稱可能是 "alder.intel.com" 或 "rhino.microsoft.com"，而 XYZ Corp 的實例名稱則可能會命名為 "XYZ Corp. Employee Info Server Version 3.5"。</span><span class="sxs-lookup"><span data-stu-id="b6814-131">Continuing with our service class example, instance names of the ftp service may be "alder.intel.com" or "rhino.microsoft.com" while an instance of the XYZ Corp. Employee Info Server might be named "XYZ Corp. Employee Info Server Version 3.5".</span></span> <span data-ttu-id="b6814-132">在前兩個案例中，ftp 的服務類別 GUID 和電腦名稱稱的組合 (提供作為服務實例名稱，) 唯一識別所需的服務。</span><span class="sxs-lookup"><span data-stu-id="b6814-132">In the first two cases, the combination of the service class GUID for ftp and the computer name (supplied as the service instance name) uniquely identify the desired service.</span></span> <span data-ttu-id="b6814-133">在第三個案例中，可以在服務查詢時探索服務所在的主機名稱，因此服務實例名稱不需要包含主機名稱。</span><span class="sxs-lookup"><span data-stu-id="b6814-133">In the third case, the host name where the service resides can be discovered at service query time, so the service instance name does not need to include a host name.</span></span>

 

 



