---
description: 程式設計介面，可用來查詢不同類型的命名空間，並在命名空間中註冊資訊（如果支援的話），但差異較大。
ms.assetid: 6a037e8d-49f3-4286-929a-8bb64ea0960f
title: SPI 中的命名空間提供者架構
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e1cb567933cae60f56137eba39845bf27ad8c1a8
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/07/2021
ms.locfileid: "104191331"
---
# <a name="namespace-provider-architecture-in-the-spi"></a>SPI 中的命名空間提供者架構

程式設計介面，可用來查詢不同類型的命名空間，並在命名空間中註冊資訊（如果支援的話），但差異較大。 命名空間提供者是一個本機駐留的應用程式，可以在 Windows 通訊端命名空間 SPI 和一些可在本機上執行或透過網路存取的現有命名空間之間進行對應。 如下所示：

![命名空間提供者圖表](images/ovrvw3-1.png)

> [!Note]  
> 指定的命名空間（例如 DNS）可能會在指定的電腦上安裝一個以上的命名空間提供者。

 

如先前所述，一般的「服務」是指用戶端/伺服器應用程式的半部伺服器。 在 Windows 通訊端中，服務與服務類別相關聯，而特定服務的每個實例都有服務名稱，此名稱在服務類別中必須是唯一的。 服務類別的範例包括 FTP 伺服器、SQL Server、XYZ Corp、員工資訊伺服器等等。

如範例所示，某些服務類別是已知的，有些則是特定的垂直應用程式特有的。 在任一種情況下，每個服務類別都會以類別名稱和類別識別碼來表示。 類別名稱不一定需要是唯一的，但類別識別碼必須是。 全域唯一識別碼 (Guid) 用來表示服務類別識別碼。 針對已知的服務、類別名稱和類別識別碼 (Guid) 已經預先配置過，而宏可用於轉換，例如 TCP 埠號碼和對應的類別識別碼 Guid。 對於其他服務，開發人員可以選擇類別名稱，並使用 Uuidgen.exe 公用程式來產生類別識別碼的 GUID。

服務類別的概念可讓您建立一組屬性，而這些屬性會由特定服務的所有實例共同保存。 這組屬性會在定義服務類別時，提供給 Windows 通訊端，並稱為服務類別架構資訊。 Ws2 \_32.dll 接著會將這項資訊轉送至所有使用中的命名空間提供者。 在主機電腦上安裝並提供服務的實例時，會使用它的服務名稱來區別此特定實例與其他可能已知的命名空間。

請注意，服務類別的安裝只需要在服務執行所在的電腦上執行，而不是在所有可能使用服務的用戶端上發生。 可能的話，Ws2 \_32.dll 會在服務的實例註冊或起始服務查詢時，將服務類別架構資訊提供給命名空間提供者。 當然，Ws2 \_32.dll 並不會儲存這項資訊，但是會嘗試從已指出提供此資料的命名空間提供者取得它。 因為無法保證 Ws2 \_32.dll 將能夠提供服務類別架構，所以需要此資訊的命名空間提供者必須具有可透過命名空間特定的方法取得的回溯機制。

網際網路網域名稱系統沒有妥善定義的方法來儲存服務類別架構資訊。 如此一來，DNS 命名空間提供者將只能容納已預先佈建服務類別 GUID 的知名 TCP/IP 服務。 在實務上，這不是嚴重的限制，因為已針對整組 TCP 和 UDP 埠預先佈建服務類別 Guid，而宏可供取出與任何 TCP 或 UDP 埠相關聯的 GUID。 因此，所有熟悉的服務（例如 ftp、telnet、Whois 等）都受到妥善支援。 當查詢這些服務時，依照慣例，目的電腦的主機名稱是服務實例名稱。

繼續進行我們的服務類別範例時，ftp 服務的實例名稱可能是 "alder.intel.com" 或 "rhino.microsoft.com"，而 XYZ Corp 的實例名稱則可能會命名為 "XYZ Corp. Employee Info Server Version 3.5"。 在前兩個案例中，ftp 的服務類別 GUID 和電腦名稱稱的組合 (提供作為服務實例名稱，) 唯一識別所需的服務。 在第三個案例中，可以在服務查詢時探索服務所在的主機名稱，因此服務實例名稱不需要包含主機名稱。

 

 



