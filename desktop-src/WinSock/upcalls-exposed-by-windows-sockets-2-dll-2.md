---
description: 本節列出服務提供者可能會在 Windows 通訊端用戶端中進行的 upcalls。
ms.assetid: a2069814-de95-40a2-ab09-c5187ecd56a7
title: 由 Windows 通訊端 2 DLL 公開的 Upcalls
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3575dc0ecf03c4907f6c418448a84f95a48fda94
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/08/2021
ms.locfileid: "106978284"
---
# <a name="upcalls-exposed-by-windows-sockets-2-dll"></a><span data-ttu-id="7c2ff-103">由 Windows 通訊端 2 DLL 公開的 Upcalls</span><span class="sxs-lookup"><span data-stu-id="7c2ff-103">Upcalls Exposed by Windows Sockets 2 DLL</span></span>

<span data-ttu-id="7c2ff-104">本節列出服務提供者可能會在 Windows 通訊端用戶端中進行的 upcalls。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-104">This section lists the upcalls that service providers may make into the Windows Sockets client.</span></span> <span data-ttu-id="7c2ff-105">服務提供者會以 [**WSPStartup**](/windows/desktop/api/Ws2spi/nf-ws2spi-wspstartup) 函式的參數形式接收 upcall 分派資料表，並使用此資料表中的專案來進行 upcalls。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-105">Service providers receive an upcall dispatch table as a parameter to [**WSPStartup**](/windows/desktop/api/Ws2spi/nf-ws2spi-wspstartup) function, and use entries in this table to make the upcalls.</span></span> <span data-ttu-id="7c2ff-106">因此，用戶端不需要匯出其 WPU 函式。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-106">Therefore, a client does not need to export its WPU functions.</span></span>

<span data-ttu-id="7c2ff-107">提供者不一定要使用這些 upcalls。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-107">It is not mandatory that providers use all of these upcalls.</span></span> <span data-ttu-id="7c2ff-108">下表指出必須使用哪些 upcalls，哪些是選擇性的。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-108">The following table indicates which upcalls must be used and which are optional.</span></span>

| <span data-ttu-id="7c2ff-109">函式</span><span class="sxs-lookup"><span data-stu-id="7c2ff-109">Function</span></span>                                                               | <span data-ttu-id="7c2ff-110">描述</span><span class="sxs-lookup"><span data-stu-id="7c2ff-110">Description</span></span>                                                                                                              | <span data-ttu-id="7c2ff-111">狀態</span><span class="sxs-lookup"><span data-stu-id="7c2ff-111">Status</span></span>                         | <span data-ttu-id="7c2ff-112">意義</span><span class="sxs-lookup"><span data-stu-id="7c2ff-112">Meaning</span></span>                                                                                                                                                                          |
|------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------|--------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="7c2ff-113">**WPUCloseEvent**</span><span class="sxs-lookup"><span data-stu-id="7c2ff-113">**WPUCloseEvent**</span></span>](/windows/desktop/api/Ws2spi/nf-ws2spi-wpucloseevent)                               | <span data-ttu-id="7c2ff-114">關閉開啟的事件物件控制碼。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-114">Closes an open event object handle.</span></span>                                                                                      | <span data-ttu-id="7c2ff-115">選擇性。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-115">Optional.</span></span>                      | <span data-ttu-id="7c2ff-116">提供者可能會改為使用適當的 Windows 呼叫。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-116">The provider may use an an appropriate Windows call instead.</span></span>                                                                                                                     |
| [<span data-ttu-id="7c2ff-117">**WPUCloseSocketHandle**</span><span class="sxs-lookup"><span data-stu-id="7c2ff-117">**WPUCloseSocketHandle**</span></span>](/windows/desktop/api/Ws2spi/nf-ws2spi-wpuclosesockethandle)                 | <span data-ttu-id="7c2ff-118">關閉 Windows 通訊端 DLL 所配置的通訊端控制碼。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-118">Closes a socket handle allocated by the Windows Sockets DLL.</span></span>                                                             | <span data-ttu-id="7c2ff-119">必要。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-119">Required.</span></span>                      | <span data-ttu-id="7c2ff-120">Ws2 \_32.dll 需要查詢及/或修改與 socket 控制碼相關聯的內部狀態資訊。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-120">The Ws2\_32.dll needs to query and/or modify internal state information associated with the socket handle.</span></span>                                                                       |
| [<span data-ttu-id="7c2ff-121">**WPUCloseThread**</span><span class="sxs-lookup"><span data-stu-id="7c2ff-121">**WPUCloseThread**</span></span>](/windows/desktop/api/Ws2spi/nf-ws2spi-wpuclosethread)                             | <span data-ttu-id="7c2ff-122">關閉內部服務執行緒的執行緒識別碼。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-122">Closes a thread ID for an internal service thread.</span></span>                                                                       |                                |                                                                                                                                                                                  |
| [<span data-ttu-id="7c2ff-123">**WPUCompleteOverlappedRequest**</span><span class="sxs-lookup"><span data-stu-id="7c2ff-123">**WPUCompleteOverlappedRequest**</span></span>](/windows/desktop/api/Ws2spi/nf-ws2spi-wpucompleteoverlappedrequest) | <span data-ttu-id="7c2ff-124">提供重迭的 i/o 完成通知，其中完成機制是使用者模式 APC 以外的其他作業。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-124">Delivers overlapped I/O completion notification where the completion mechanism is something other than user mode APC.</span></span>    |                                |                                                                                                                                                                                  |
| [<span data-ttu-id="7c2ff-125">**WPUCreateEvent**</span><span class="sxs-lookup"><span data-stu-id="7c2ff-125">**WPUCreateEvent**</span></span>](/windows/desktop/api/Ws2spi/nf-ws2spi-wpucreateevent)                             | <span data-ttu-id="7c2ff-126">建立新的事件物件。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-126">Creates a new event object.</span></span>                                                                                              | <span data-ttu-id="7c2ff-127">選擇性。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-127">Optional.</span></span>                      | <span data-ttu-id="7c2ff-128">提供者可能會改為使用適當的 Windows 呼叫。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-128">The provider may use an appropriate Windows call instead.</span></span>                                                                                                                        |
| [<span data-ttu-id="7c2ff-129">**WPUCreateSocketHandle**</span><span class="sxs-lookup"><span data-stu-id="7c2ff-129">**WPUCreateSocketHandle**</span></span>](/windows/desktop/api/Ws2spi/nf-ws2spi-wpucreatesockethandle)               | <span data-ttu-id="7c2ff-130">為 nonIFS 提供者建立新的通訊端控制碼。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-130">Creates a new socket handle for nonIFS providers.</span></span>                                                                        | <span data-ttu-id="7c2ff-131">NonIFS 提供者所需。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-131">Required for nonIFS providers.</span></span> | <span data-ttu-id="7c2ff-132">Ws2 \_32.dll 需要查詢及/或修改與 socket 控制碼相關聯的內部狀態資訊。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-132">The Ws2\_32.dll needs to query and/or modify internal state information associated with the socket handle.</span></span>                                                                       |
| [<span data-ttu-id="7c2ff-133">**WPUFDIsSet**</span><span class="sxs-lookup"><span data-stu-id="7c2ff-133">**WPUFDIsSet**</span></span>](/windows/desktop/api/Ws2spi/nf-ws2spi-wpufdisset)                                     | <span data-ttu-id="7c2ff-134">檢查指定之通訊端控制碼的成員資格。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-134">Checks the membership of the specified socket handle.</span></span>                                                                    | <span data-ttu-id="7c2ff-135">選擇性。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-135">Optional.</span></span>                      | <span data-ttu-id="7c2ff-136">這只是一個便利的函式，它知道如何透過 [**fd \_ 設定**](/windows/desktop/api/winsock/nf-winsock-fd_set) 結構來深入探討。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-136">This is just a convenience function that knows how to dig through [**fd\_set**](/windows/desktop/api/winsock/nf-winsock-fd_set) structures.</span></span> <span data-ttu-id="7c2ff-137">提供者可能必須明確地深入探討這些結構。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-137">A provider may need to dig through these structures explicitly anyway.</span></span> |
| [<span data-ttu-id="7c2ff-138">**WPUGetProviderPath**</span><span class="sxs-lookup"><span data-stu-id="7c2ff-138">**WPUGetProviderPath**</span></span>](/windows/desktop/api/Ws2spi/nf-ws2spi-wpugetproviderpath)                     | <span data-ttu-id="7c2ff-139">抓取所指定提供者的 DLL 路徑。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-139">Retrieves the DLL path for the specified provider.</span></span>                                                                       | <span data-ttu-id="7c2ff-140">必要。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-140">Required.</span></span>                      | <span data-ttu-id="7c2ff-141">只有 Ws2 \_32.dll 知道連續的通訊協定層 (可能來自另一個廠商) 的已安裝。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-141">Only the Ws2\_32.dll would know where an adjacent protocol layer (potentially from another vendor) has been installed.</span></span>                                                           |
| [<span data-ttu-id="7c2ff-142">**WPUModifyIFSHandle**</span><span class="sxs-lookup"><span data-stu-id="7c2ff-142">**WPUModifyIFSHandle**</span></span>](/windows/desktop/api/Ws2spi/nf-ws2spi-wpumodifyifshandle)                     | <span data-ttu-id="7c2ff-143">從 Windows 通訊端 DLL 接收 (可能) 修改過的 IFS 控制碼。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-143">Receives a (possibly) modified IFS handle from the Windows Sockets DLL.</span></span>                                                  | <span data-ttu-id="7c2ff-144">IFS 提供者的必要參數。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-144">Required for IFS providers.</span></span>    | <span data-ttu-id="7c2ff-145">Ws2 \_32.dll 需要查詢及/或修改與 socket 控制碼相關聯的內部狀態資訊。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-145">The Ws2\_32.dll needs to query and/or modify internal state information associated with the socket handle.</span></span>                                                                       |
| [<span data-ttu-id="7c2ff-146">**WPUPostMessage**</span><span class="sxs-lookup"><span data-stu-id="7c2ff-146">**WPUPostMessage**</span></span>](/windows/desktop/api/Ws2spi/nf-ws2spi-wpupostmessage)                             | <span data-ttu-id="7c2ff-147">以維護回溯相容性的方式執行標準 [**PostMessage**](/windows/win32/api/winuser/nf-winuser-postmessagea) 函式。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-147">Performs the standard [**PostMessage**](/windows/win32/api/winuser/nf-winuser-postmessagea) function in a way that maintains backward compatibility.</span></span> | <span data-ttu-id="7c2ff-148">必要。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-148">Required.</span></span>                      | <span data-ttu-id="7c2ff-149">僅限 Windows 2000 及 Windows NT。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-149">Windows 2000 and Windows NT only.</span></span> <span data-ttu-id="7c2ff-150">Windows 95 允許來自核心模式的 post 訊息。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-150">Windows 95 allows post message from kernel mode.</span></span>                                                                                               |
| [<span data-ttu-id="7c2ff-151">**WPUQueryBlockingCallback**</span><span class="sxs-lookup"><span data-stu-id="7c2ff-151">**WPUQueryBlockingCallback**</span></span>](/windows/desktop/api/Ws2spi/nf-ws2spi-wpuqueryblockingcallback)         | <span data-ttu-id="7c2ff-152">傳回執行緒封鎖攔截函式的指標。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-152">Returns a pointer to a thread's blocking hook function.</span></span>                                                                  | <span data-ttu-id="7c2ff-153">必要。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-153">Required.</span></span>                      | <span data-ttu-id="7c2ff-154">沒有對應的 Windows 功能。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-154">There is no corresponding Windows functionality.</span></span> <span data-ttu-id="7c2ff-155">只有 Ws2 \_32.dll 具有完成此動作的資訊。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-155">Only the Ws2\_32.dll has the information to accomplish this.</span></span>                                                                    |
| [<span data-ttu-id="7c2ff-156">**WPUQuerySocketHandleCoNtext**</span><span class="sxs-lookup"><span data-stu-id="7c2ff-156">**WPUQuerySocketHandleContext**</span></span>](/windows/desktop/api/Ws2spi/nf-ws2spi-wpuquerysockethandlecontext)   | <span data-ttu-id="7c2ff-157">取得通訊端的內容值， (只) 的 nonIFS 提供者。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-157">Gets a socket's context value (nonIFS providers only).</span></span>                                                                   | <span data-ttu-id="7c2ff-158">NonIFS 提供者所需。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-158">Required for nonIFS providers.</span></span> | <span data-ttu-id="7c2ff-159">Ws2 \_32.dll 需要查詢及/或修改與 socket 控制碼相關聯的內部狀態資訊。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-159">The Ws2\_32.dll needs to query and/or modify internal state information associated with the socket handle.</span></span>                                                                       |
| [<span data-ttu-id="7c2ff-160">**WPUQueueApc**</span><span class="sxs-lookup"><span data-stu-id="7c2ff-160">**WPUQueueApc**</span></span>](/windows/desktop/api/Ws2spi/nf-ws2spi-wpuqueueapc)                                   | <span data-ttu-id="7c2ff-161">將使用者模式的 APC 佇列排入指定的執行緒。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-161">Queues a user-mode APC to the specified thread.</span></span>                                                                          | <span data-ttu-id="7c2ff-162">選擇性。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-162">Optional.</span></span>                      | <span data-ttu-id="7c2ff-163">也可以使用 [**QueueUserApc**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-queueuserapc) 。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-163">The [**QueueUserApc**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-queueuserapc) may also be used.</span></span>                                                                                                                      |
| [<span data-ttu-id="7c2ff-164">**WPUResetEvent**</span><span class="sxs-lookup"><span data-stu-id="7c2ff-164">**WPUResetEvent**</span></span>](/windows/desktop/api/Ws2spi/nf-ws2spi-wpuresetevent)                               | <span data-ttu-id="7c2ff-165">重設事件物件。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-165">Resets an event object.</span></span>                                                                                                  | <span data-ttu-id="7c2ff-166">選擇性。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-166">Optional.</span></span>                      | <span data-ttu-id="7c2ff-167">提供者可能會改為使用適當的 Windows 呼叫。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-167">The provider may use an appropriate Windows call instead.</span></span>                                                                                                                        |
| [<span data-ttu-id="7c2ff-168">**WPUSetEvent**</span><span class="sxs-lookup"><span data-stu-id="7c2ff-168">**WPUSetEvent**</span></span>](/windows/desktop/api/Ws2spi/nf-ws2spi-wpusetevent)                                   | <span data-ttu-id="7c2ff-169">設定事件物件。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-169">Sets an event object.</span></span>                                                                                                    | <span data-ttu-id="7c2ff-170">選擇性。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-170">Optional.</span></span>                      | <span data-ttu-id="7c2ff-171">提供者可能會改為使用適當的 Windows 呼叫。</span><span class="sxs-lookup"><span data-stu-id="7c2ff-171">The provider may use an appropriate Windows call instead.</span></span>                                                                                                                        |



 

 

 
