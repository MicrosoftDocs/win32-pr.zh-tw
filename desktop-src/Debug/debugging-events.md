---
description: 偵錯工具事件是正在進行調試的進程中，導致系統通知偵錯工具的事件。
ms.assetid: 43ca51f1-ba73-4031-96c3-5815311ce6f6
title: 調試事件
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: bee6d159dded992e56ac05bc1d751246cd051733
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/07/2021
ms.locfileid: "104025821"
---
# <a name="debugging-events"></a><span data-ttu-id="c3387-103">調試事件</span><span class="sxs-lookup"><span data-stu-id="c3387-103">Debugging Events</span></span>

<span data-ttu-id="c3387-104">偵錯工具事件是正在進行調試的進程中，導致系統通知偵錯工具的事件。</span><span class="sxs-lookup"><span data-stu-id="c3387-104">A debugging event is an incident in the process being debugged that causes the system to notify the debugger.</span></span> <span data-ttu-id="c3387-105">偵錯工具事件包括建立進程、建立執行緒、載入動態連結程式庫 (DLL) 、卸載 DLL、傳送輸出字串，以及產生例外狀況。</span><span class="sxs-lookup"><span data-stu-id="c3387-105">Debugging events include creating a process, creating a thread, loading a dynamic-link library (DLL), unloading a DLL, sending an output string, and generating an exception.</span></span>

<span data-ttu-id="c3387-106">如果偵錯工具在等候一個事件時發生，系統會以描述事件的資訊填入 [**WaitForDebugEvent**](/windows/win32/api/debugapi/nf-debugapi-waitfordebugevent)所指定的 [**DEBUG \_ 事件**](/windows/win32/api/minwinbase/ns-minwinbase-debug_event)結構。</span><span class="sxs-lookup"><span data-stu-id="c3387-106">If a debugging event occurs while a debugger is waiting for one, the system fills the [**DEBUG\_EVENT**](/windows/win32/api/minwinbase/ns-minwinbase-debug_event) structure specified by [**WaitForDebugEvent**](/windows/win32/api/debugapi/nf-debugapi-waitfordebugevent) with information describing the event.</span></span>

<span data-ttu-id="c3387-107">當系統通知偵錯工具的偵錯工具時，它也會暫止受影響進程中的所有線程。</span><span class="sxs-lookup"><span data-stu-id="c3387-107">When the system notifies the debugger of a debugging event, it also suspends all threads in the affected process.</span></span> <span data-ttu-id="c3387-108">除非偵錯工具使用 [**ContinueDebugEvent**](/windows/win32/api/debugapi/nf-debugapi-continuedebugevent)繼續進行偵錯工具，否則執行緒不會繼續執行。</span><span class="sxs-lookup"><span data-stu-id="c3387-108">The threads do not resume execution until the debugger continues the debugging event by using [**ContinueDebugEvent**](/windows/win32/api/debugapi/nf-debugapi-continuedebugevent).</span></span> <span data-ttu-id="c3387-109">偵錯工具時可能會發生下列偵錯工具事件。</span><span class="sxs-lookup"><span data-stu-id="c3387-109">The following debugging events may occur while a process is being debugged.</span></span>



| <span data-ttu-id="c3387-110">調試事件</span><span class="sxs-lookup"><span data-stu-id="c3387-110">Debugging event</span></span>                          | <span data-ttu-id="c3387-111">Description</span><span class="sxs-lookup"><span data-stu-id="c3387-111">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="c3387-112">建立 \_ 進程的 \_ 偵錯工具 \_ 事件</span><span class="sxs-lookup"><span data-stu-id="c3387-112">CREATE\_PROCESS\_DEBUG\_EVENT</span></span><br/> | <span data-ttu-id="c3387-113">每當在要進行調試的進程中建立新進程時，或每當偵錯工具開始進行已在使用中的進程時，就會產生。</span><span class="sxs-lookup"><span data-stu-id="c3387-113">Generated whenever a new process is created in a process being debugged or whenever the debugger begins debugging an already active process.</span></span> <span data-ttu-id="c3387-114">系統會在進程開始以使用者模式執行之前，以及在系統為新的進程產生任何其他的偵測事件之前，先產生此偵錯工具事件。</span><span class="sxs-lookup"><span data-stu-id="c3387-114">The system generates this debugging event before the process begins to execute in user mode and before the system generates any other debugging events for the new process.</span></span> <br/> <span data-ttu-id="c3387-115">[**Debug \_ 事件**](/windows/win32/api/minwinbase/ns-minwinbase-debug_event)結構包含 [**CREATE \_ PROCESS \_ DEBUG \_ INFO**](/windows/win32/api/minwinbase/ns-minwinbase-create_process_debug_info)結構。</span><span class="sxs-lookup"><span data-stu-id="c3387-115">The [**DEBUG\_EVENT**](/windows/win32/api/minwinbase/ns-minwinbase-debug_event) structure contains a [**CREATE\_PROCESS\_DEBUG\_INFO**](/windows/win32/api/minwinbase/ns-minwinbase-create_process_debug_info) structure.</span></span> <span data-ttu-id="c3387-116">此結構包含新進程的控制碼、進程的影像檔控制碼、進程初始執行緒的控制碼，以及其他描述新進程的資訊。</span><span class="sxs-lookup"><span data-stu-id="c3387-116">This structure includes a handle to the new process, a handle to the process's image file, a handle to the process's initial thread, and other information that describes the new process.</span></span><br/> <span data-ttu-id="c3387-117">進程的控制碼具有進程 \_ vm \_ 讀取和處理 \_ vm \_ 寫入存取權。</span><span class="sxs-lookup"><span data-stu-id="c3387-117">The handle to the process has PROCESS\_VM\_READ and PROCESS\_VM\_WRITE access.</span></span> <span data-ttu-id="c3387-118">如果偵錯工具有線程的這些存取類型，則可以使用 [**ReadProcessMemory**](/windows/win32/api/memoryapi/nf-memoryapi-readprocessmemory) 和 [**WriteProcessMemory**](/windows/win32/api/memoryapi/nf-memoryapi-writeprocessmemory) 函式來讀取和寫入進程的記憶體。</span><span class="sxs-lookup"><span data-stu-id="c3387-118">If a debugger has these types of access to a thread, it can read and write to the process's memory by using the [**ReadProcessMemory**](/windows/win32/api/memoryapi/nf-memoryapi-readprocessmemory) and [**WriteProcessMemory**](/windows/win32/api/memoryapi/nf-memoryapi-writeprocessmemory) functions.</span></span> <span data-ttu-id="c3387-119">如果系統先前回報了「結束 \_ 處理常式」 \_ \_ 事件事件，則當偵錯工具呼叫 [**ContinueDebugEvent**](/windows/win32/api/debugapi/nf-debugapi-continuedebugevent) 函式時，系統會關閉這個控制碼。</span><span class="sxs-lookup"><span data-stu-id="c3387-119">If the system previously reported an EXIT\_PROCESS\_DEBUG\_EVENT event, the system closes this handle when the debugger calls the [**ContinueDebugEvent**](/windows/win32/api/debugapi/nf-debugapi-continuedebugevent) function.</span></span><br/> <span data-ttu-id="c3387-120">進程之影像檔案的控制碼具有一般 \_ 讀取權限，並且會開啟以供讀取共用。</span><span class="sxs-lookup"><span data-stu-id="c3387-120">The handle to the process's image file has GENERIC\_READ access and is opened for read-sharing.</span></span> <span data-ttu-id="c3387-121">偵錯工具在處理建立 \_ 進程的偵錯工具時，應該關閉這個控制碼 \_ \_ 。</span><span class="sxs-lookup"><span data-stu-id="c3387-121">The debugger should close this handle while processing CREATE\_PROCESS\_DEBUG\_EVENT.</span></span><br/> <span data-ttu-id="c3387-122">進程初始執行緒的控制碼具有線程 \_ GET \_ 內容、執行緒 \_ 集 \_ 內容，以及執行緒暫止 \_ \_ 繼續存取執行緒。</span><span class="sxs-lookup"><span data-stu-id="c3387-122">The handle to the process's initial thread has THREAD\_GET\_CONTEXT, THREAD\_SET\_CONTEXT, and THREAD\_SUSPEND\_RESUME access to the thread.</span></span> <span data-ttu-id="c3387-123">如果偵錯工具有線程的這些存取類型，則可以使用 [**GetThreadCoNtext**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getthreadcontext) 和 [**SetThreadCoNtext**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadcontext) 函式來讀取和寫入執行緒的暫存器，並且可以使用 [**SuspendThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-suspendthread) 和 [**ResumeThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-resumethread) 函式來暫止和繼續執行緒。</span><span class="sxs-lookup"><span data-stu-id="c3387-123">If a debugger has these types of access to a thread, it can read from and write to the thread's registers by using the [**GetThreadContext**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getthreadcontext) and [**SetThreadContext**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadcontext) functions and can suspend and resume the thread by using the [**SuspendThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-suspendthread) and [**ResumeThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-resumethread) functions.</span></span> <span data-ttu-id="c3387-124">如果系統先前回報了「結束 \_ 處理常式」 \_ \_ 事件事件，則當偵錯工具呼叫 [**ContinueDebugEvent**](/windows/win32/api/debugapi/nf-debugapi-continuedebugevent) 函式時，系統會關閉這個控制碼。</span><span class="sxs-lookup"><span data-stu-id="c3387-124">If the system previously reported an EXIT\_PROCESS\_DEBUG\_EVENT event, the system closes this handle when the debugger calls the [**ContinueDebugEvent**](/windows/win32/api/debugapi/nf-debugapi-continuedebugevent) function.</span></span><br/> |
| <span data-ttu-id="c3387-125">建立 \_ 執行緒 \_ 調試 \_ 事件</span><span class="sxs-lookup"><span data-stu-id="c3387-125">CREATE\_THREAD\_DEBUG\_EVENT</span></span><br/>  | <span data-ttu-id="c3387-126">每當在要進行調試的進程中建立新的執行緒時，或每當偵錯工具開始進行已在使用中的進程時，就會產生。</span><span class="sxs-lookup"><span data-stu-id="c3387-126">Generated whenever a new thread is created in a process being debugged or whenever the debugger begins debugging an already active process.</span></span> <span data-ttu-id="c3387-127">在新執行緒開始以使用者模式執行之前，會產生此偵錯工具事件。</span><span class="sxs-lookup"><span data-stu-id="c3387-127">This debugging event is generated before the new thread begins to execute in user mode.</span></span> <br/> <span data-ttu-id="c3387-128">[**Debug \_ 事件**](/windows/win32/api/minwinbase/ns-minwinbase-debug_event)結構包含 [**建立執行緒的 \_ \_ debug \_ 資訊**](/windows/win32/api/minwinbase/ns-minwinbase-create_thread_debug_info)結構。</span><span class="sxs-lookup"><span data-stu-id="c3387-128">The [**DEBUG\_EVENT**](/windows/win32/api/minwinbase/ns-minwinbase-debug_event) structure contains a [**CREATE\_THREAD\_DEBUG\_INFO**](/windows/win32/api/minwinbase/ns-minwinbase-create_thread_debug_info) structure.</span></span> <span data-ttu-id="c3387-129">此結構包含新執行緒的控制碼和執行緒的起始位址。</span><span class="sxs-lookup"><span data-stu-id="c3387-129">This structure includes a handle to the new thread and the thread's starting address.</span></span> <span data-ttu-id="c3387-130">控制碼具有線程 \_ GET \_ 內容、執行緒 \_ 集 \_ 內容，以及執行緒 \_ 暫止 \_ 繼續存取執行緒。</span><span class="sxs-lookup"><span data-stu-id="c3387-130">The handle has THREAD\_GET\_CONTEXT, THREAD\_SET\_CONTEXT, and THREAD\_SUSPEND\_RESUME access to the thread.</span></span> <span data-ttu-id="c3387-131">如果偵錯工具有線程的這些存取類型，則可以使用 [**GetThreadCoNtext**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getthreadcontext) 和 [**SetThreadCoNtext**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadcontext) 函式來讀取和寫入執行緒的暫存器，並且可以使用 [**SuspendThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-suspendthread) 和 [**ResumeThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-resumethread) 函式來暫止和繼續執行緒。</span><span class="sxs-lookup"><span data-stu-id="c3387-131">If a debugger has these types of access to a thread, it can read from and write to the thread's registers by using the [**GetThreadContext**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getthreadcontext) and [**SetThreadContext**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadcontext) functions and can suspend and resume the thread by using the [**SuspendThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-suspendthread) and [**ResumeThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-resumethread) functions.</span></span><br/> <span data-ttu-id="c3387-132">如果系統先前回報了「結束 \_ 執行緒偵測」 \_ \_ 事件事件，則當偵錯工具呼叫 [**ContinueDebugEvent**](/windows/win32/api/debugapi/nf-debugapi-continuedebugevent) 函式時，系統會關閉新執行緒的控制碼。</span><span class="sxs-lookup"><span data-stu-id="c3387-132">If the system previously reported an EXIT\_THREAD\_DEBUG\_EVENT event, the system closes the handle to the new thread when the debugger calls the [**ContinueDebugEvent**](/windows/win32/api/debugapi/nf-debugapi-continuedebugevent) function.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span data-ttu-id="c3387-133">例外狀況 \_ 調試 \_ 事件</span><span class="sxs-lookup"><span data-stu-id="c3387-133">EXCEPTION\_DEBUG\_EVENT</span></span><br/>       | <span data-ttu-id="c3387-134">在所要進行的進程中發生例外狀況時產生。</span><span class="sxs-lookup"><span data-stu-id="c3387-134">Generated whenever an exception occurs in the process being debugged.</span></span> <span data-ttu-id="c3387-135">可能的例外狀況包括嘗試存取無法存取的記憶體、執行中斷點指令、嘗試零除，或 [結構化例外狀況處理](structured-exception-handling.md)中注明的任何其他例外狀況。</span><span class="sxs-lookup"><span data-stu-id="c3387-135">Possible exceptions include attempting to access inaccessible memory, executing breakpoint instructions, attempting to divide by zero, or any other exception noted in [Structured Exception Handling](structured-exception-handling.md).</span></span> <br/> <span data-ttu-id="c3387-136">[**Debug \_ 事件**](/windows/win32/api/minwinbase/ns-minwinbase-debug_event)結構包含例外狀況 [**的 \_ 調試 \_ 資訊**](/windows/win32/api/minwinbase/ns-minwinbase-exception_debug_info)結構。</span><span class="sxs-lookup"><span data-stu-id="c3387-136">The [**DEBUG\_EVENT**](/windows/win32/api/minwinbase/ns-minwinbase-debug_event) structure contains an [**EXCEPTION\_DEBUG\_INFO**](/windows/win32/api/minwinbase/ns-minwinbase-exception_debug_info) structure.</span></span> <span data-ttu-id="c3387-137">此結構描述造成偵錯工具事件的例外狀況。</span><span class="sxs-lookup"><span data-stu-id="c3387-137">This structure describes the exception that caused the debugging event.</span></span><br/> <span data-ttu-id="c3387-138">除了標準例外狀況以外，在主控台進程的偵錯工具期間可能會發生額外的例外狀況代碼。</span><span class="sxs-lookup"><span data-stu-id="c3387-138">Besides the standard exception conditions, an additional exception code can occur during console process debugging.</span></span> <span data-ttu-id="c3387-139">\_ \_ 當 Ctrl + c 是輸入至處理 Ctrl + c 信號且正在進行調試的主控台進程時，系統會產生一個 DBG 控制項 C 例外狀況程式碼。</span><span class="sxs-lookup"><span data-stu-id="c3387-139">The system generates a DBG\_CONTROL\_C exception code when CTRL+C is input to a console process that handles CTRL+C signals and is being debugged.</span></span> <span data-ttu-id="c3387-140">此例外狀況程式碼不應由應用程式處理。</span><span class="sxs-lookup"><span data-stu-id="c3387-140">This exception code is not meant to be handled by applications.</span></span> <span data-ttu-id="c3387-141">應用程式絕對不應該使用例外狀況處理常式來處理它。</span><span class="sxs-lookup"><span data-stu-id="c3387-141">An application should never use an exception handler to deal with it.</span></span> <span data-ttu-id="c3387-142">它只會針對偵錯工具的優點引發，而且只會在偵錯工具連接到主控台進程時使用。</span><span class="sxs-lookup"><span data-stu-id="c3387-142">It is raised only for the benefit of the debugger and is only used when a debugger is attached to the console process.</span></span><br/> <span data-ttu-id="c3387-143">如果處理常式不在進行中，或偵錯工具 \_ \_ 透過 gn 命令) ，而無法處理 (的 DBG 控制項 C 例外狀況，則會搜尋應用程式函式的清單（如 [**SetConsoleCtrlHandler**](/windows/console/setconsolectrlhandler) 函式所述）。</span><span class="sxs-lookup"><span data-stu-id="c3387-143">If a process is not being debugged or if the debugger passes on the DBG\_CONTROL\_C exception unhandled (through the gn command), the application's list of handler functions is searched, as documented for the [**SetConsoleCtrlHandler**](/windows/console/setconsolectrlhandler) function.</span></span><br/> <span data-ttu-id="c3387-144">如果偵錯工具 \_ \_ 透過 gh 命令) 處理 DBG CONTROL C 例外 (，應用程式將不會注意到 CTRL + C，除非在類似下面的程式碼中。</span><span class="sxs-lookup"><span data-stu-id="c3387-144">If the debugger handles the DBG\_CONTROL\_C exception (through the gh command), an application will not notice the CTRL+C except in code like this.</span></span><br/> `while ((inputChar = getchar()) != EOF) ...`<br/> <span data-ttu-id="c3387-145">因此，偵錯工具無法用來停止終止這類程式碼中的讀取等候。</span><span class="sxs-lookup"><span data-stu-id="c3387-145">Thus, the debugger cannot be used to stop the read wait in such code from terminating.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                           |
| <span data-ttu-id="c3387-146">結束 \_ 進程的 \_ 偵錯工具 \_ 事件</span><span class="sxs-lookup"><span data-stu-id="c3387-146">EXIT\_PROCESS\_DEBUG\_EVENT</span></span><br/>   | <span data-ttu-id="c3387-147">每當正在進行的進程中的最後一個執行緒結束時就會產生。</span><span class="sxs-lookup"><span data-stu-id="c3387-147">Generated whenever the last thread in a process being debugged exits.</span></span> <span data-ttu-id="c3387-148">當系統卸載進程的 Dll 並更新進程的結束代碼時，就會立即發生這個偵錯工具事件。</span><span class="sxs-lookup"><span data-stu-id="c3387-148">This debugging event occurs immediately after the system unloads the process's DLLs and updates the process's exit code.</span></span> <br/> <span data-ttu-id="c3387-149">[**Debug \_ 事件**](/windows/win32/api/minwinbase/ns-minwinbase-debug_event)結構包含可指定結束代碼的結束 [**處理常式 \_ \_ DEBUG \_ 資訊**](/windows/win32/api/minwinbase/ns-minwinbase-exit_process_debug_info)結構。</span><span class="sxs-lookup"><span data-stu-id="c3387-149">The [**DEBUG\_EVENT**](/windows/win32/api/minwinbase/ns-minwinbase-debug_event) structure contains an [**EXIT\_PROCESS\_DEBUG\_INFO**](/windows/win32/api/minwinbase/ns-minwinbase-exit_process_debug_info) structure that specifies the exit code.</span></span><br/> <span data-ttu-id="c3387-150">偵錯工具會在收到此偵錯工具時，解除配置與進程相關聯的任何內部結構。</span><span class="sxs-lookup"><span data-stu-id="c3387-150">The debugger deallocates any internal structures associated with the process on receipt of this debugging event.</span></span> <span data-ttu-id="c3387-151">系統會關閉偵錯工具對結束進程的控制碼，以及所有進程的執行緒。</span><span class="sxs-lookup"><span data-stu-id="c3387-151">The system closes the debugger's handle to the exiting process and all of the process's threads.</span></span> <span data-ttu-id="c3387-152">偵錯工具不應關閉這些控制碼。</span><span class="sxs-lookup"><span data-stu-id="c3387-152">The debugger should not close these handles.</span></span><br/> <span data-ttu-id="c3387-153">在接收此事件的偵錯工具呼叫 [**ContinueDebugEvent**](/windows/win32/api/debugapi/nf-debugapi-continuedebugevent)之前，無法完成進程關機的核心模式部分。</span><span class="sxs-lookup"><span data-stu-id="c3387-153">The kernel-mode portion of process shutdown cannot be completed until the debugger that receives this event calls [**ContinueDebugEvent**](/windows/win32/api/debugapi/nf-debugapi-continuedebugevent).</span></span> <span data-ttu-id="c3387-154">在那之前，進程控制碼是開啟的，而且不會釋放虛擬位址空間，因此偵錯工具可以檢查子進程。</span><span class="sxs-lookup"><span data-stu-id="c3387-154">Until then, the process handles are open and the virtual address space is not released, so the debugger can examine the child process.</span></span> <span data-ttu-id="c3387-155">若要在處理常式關閉的核心模式部分完成時收到通知，請複製以 CREATE process DEBUG 事件傳回的控制碼 \_ \_ \_ ，然後呼叫 **ContinueDebugEvent**，然後等候重複的進程控制碼收到信號。</span><span class="sxs-lookup"><span data-stu-id="c3387-155">To receive notification when the kernel-mode portion of process shutdown is complete, duplicate the handle returned with CREATE\_PROCESS\_DEBUG\_EVENT, call **ContinueDebugEvent**, and then wait for the duplicated process handle to be signaled.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| <span data-ttu-id="c3387-156">結束 \_ 執行緒 \_ 調試 \_ 事件</span><span class="sxs-lookup"><span data-stu-id="c3387-156">EXIT\_THREAD\_DEBUG\_EVENT</span></span><br/>    | <span data-ttu-id="c3387-157">每次在正在進行調試的進程中的執行緒結束時產生。</span><span class="sxs-lookup"><span data-stu-id="c3387-157">Generated whenever a thread that is part of a process being debugged exits.</span></span> <span data-ttu-id="c3387-158">系統會在更新執行緒的結束代碼之後，立即產生此偵錯工具事件。</span><span class="sxs-lookup"><span data-stu-id="c3387-158">The system generates this debugging event immediately after it updates the thread's exit code.</span></span> <br/> <span data-ttu-id="c3387-159">[**DEBUG \_ 事件**](/windows/win32/api/minwinbase/ns-minwinbase-debug_event)結構包含結束 [**執行緒的 \_ \_ debug \_ 資訊**](/windows/win32/api/minwinbase/ns-minwinbase-exit_thread_debug_info)結構，可指定結束代碼。</span><span class="sxs-lookup"><span data-stu-id="c3387-159">The [**DEBUG\_EVENT**](/windows/win32/api/minwinbase/ns-minwinbase-debug_event) structure contains an [**EXIT\_THREAD\_DEBUG\_INFO**](/windows/win32/api/minwinbase/ns-minwinbase-exit_thread_debug_info) structure that specifies the exit code.</span></span><br/> <span data-ttu-id="c3387-160">如果結束的執行緒是進程的最後一個執行緒，就不會發生這個偵錯工具事件。</span><span class="sxs-lookup"><span data-stu-id="c3387-160">This debugging event does not occur if the exiting thread is the last thread of a process.</span></span> <span data-ttu-id="c3387-161">在此情況下，會改為執行「結束處理常式偵錯工具」事件 \_ \_ 偵錯工具 \_ 。</span><span class="sxs-lookup"><span data-stu-id="c3387-161">In this case, the EXIT\_PROCESS\_DEBUG\_EVENT debugging event occurs instead.</span></span><br/> <span data-ttu-id="c3387-162">偵錯工具會在收到此偵錯工具事件時，解除配置與執行緒相關聯的任何內部結構。</span><span class="sxs-lookup"><span data-stu-id="c3387-162">The debugger deallocates any internal structures associated with the thread on receipt of this debugging event.</span></span> <span data-ttu-id="c3387-163">系統會關閉偵錯工具對離開執行緒的控制碼。</span><span class="sxs-lookup"><span data-stu-id="c3387-163">The system closes the debugger's handle to the exiting thread.</span></span> <span data-ttu-id="c3387-164">偵錯工具不應該關閉這個控制碼。</span><span class="sxs-lookup"><span data-stu-id="c3387-164">The debugger should not close this handle.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span data-ttu-id="c3387-165">載入 \_ DLL \_ DEBUG \_ 事件</span><span class="sxs-lookup"><span data-stu-id="c3387-165">LOAD\_DLL\_DEBUG\_EVENT</span></span><br/>       | <span data-ttu-id="c3387-166">每次正在調試的進程載入 DLL 時產生。</span><span class="sxs-lookup"><span data-stu-id="c3387-166">Generated whenever a process being debugged loads a DLL.</span></span> <span data-ttu-id="c3387-167">當系統載入器解析 DLL 的連結，或當已調試的進程使用 [**LoadLibrary**](/windows/win32/api/libloaderapi/nf-libloaderapi-loadlibrarya) 函式時，就會發生這個偵錯工具事件。</span><span class="sxs-lookup"><span data-stu-id="c3387-167">This debugging event occurs when the system loader resolves links to a DLL or when the debugged process uses the [**LoadLibrary**](/windows/win32/api/libloaderapi/nf-libloaderapi-loadlibrarya) function.</span></span> <span data-ttu-id="c3387-168">只有在系統第一次將 DLL 附加至進程的虛擬位址空間時，才會發生這個偵錯工具事件。</span><span class="sxs-lookup"><span data-stu-id="c3387-168">This debugging event only occurs the first time the system attaches a DLL to the virtual address space of a process.</span></span> <br/> <span data-ttu-id="c3387-169">[**Debug \_ 事件**](/windows/win32/api/minwinbase/ns-minwinbase-debug_event)結構包含 [**載入 DLL 的 \_ \_ 調試 \_ 資訊**](/windows/win32/api/minwinbase/ns-minwinbase-load_dll_debug_info)結構。</span><span class="sxs-lookup"><span data-stu-id="c3387-169">The [**DEBUG\_EVENT**](/windows/win32/api/minwinbase/ns-minwinbase-debug_event) structure contains a [**LOAD\_DLL\_DEBUG\_INFO**](/windows/win32/api/minwinbase/ns-minwinbase-load_dll_debug_info) structure.</span></span> <span data-ttu-id="c3387-170">此結構包含新載入之 DLL 的控制碼、DLL 的基底位址，以及描述 DLL 的其他資訊。</span><span class="sxs-lookup"><span data-stu-id="c3387-170">This structure includes a handle to the newly loaded DLL, the base address of the DLL, and other information that describes the DLL.</span></span> <span data-ttu-id="c3387-171">偵錯工具應該在處理載入 \_ dll DEBUG 事件時關閉 DLL 控制碼的控制碼 \_ \_ 。</span><span class="sxs-lookup"><span data-stu-id="c3387-171">The debugger should close the handle to the DLL handle while processing LOAD\_DLL\_DEBUG\_EVENT.</span></span><br/> <span data-ttu-id="c3387-172">一般情況下，偵錯工具會在收到此偵錯工具事件時載入與 DLL 相關聯的符號資料表。</span><span class="sxs-lookup"><span data-stu-id="c3387-172">Typically, a debugger loads a symbol table associated with the DLL on receipt of this debugging event.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| <span data-ttu-id="c3387-173">輸出 \_ DEBUG \_ 字串 \_ 事件</span><span class="sxs-lookup"><span data-stu-id="c3387-173">OUTPUT\_DEBUG\_STRING\_EVENT</span></span><br/>  | <span data-ttu-id="c3387-174">在正在進行調試的進程使用時產生</span><span class="sxs-lookup"><span data-stu-id="c3387-174">Generated when a process being debugged uses the</span></span> <br/><span data-ttu-id="c3387-175">[**OutputDebugString**](/windows/win32/api/debugapi/nf-debugapi-outputdebugstringa) 函式。</span><span class="sxs-lookup"><span data-stu-id="c3387-175">[**OutputDebugString**](/windows/win32/api/debugapi/nf-debugapi-outputdebugstringa) function.</span></span> <span data-ttu-id="c3387-176">[**Debug \_ 事件**](/windows/win32/api/minwinbase/ns-minwinbase-debug_event)結構包含輸出的 [**\_ debug \_ 字串 \_ 資訊**](/windows/win32/api/minwinbase/ns-minwinbase-output_debug_string_info)結構。</span><span class="sxs-lookup"><span data-stu-id="c3387-176">The [**DEBUG\_EVENT**](/windows/win32/api/minwinbase/ns-minwinbase-debug_event) structure contains an [**OUTPUT\_DEBUG\_STRING\_INFO**](/windows/win32/api/minwinbase/ns-minwinbase-output_debug_string_info) structure.</span></span> <span data-ttu-id="c3387-177">此結構會指定偵錯工具字串的位址、長度和格式。</span><span class="sxs-lookup"><span data-stu-id="c3387-177">This structure specifies the address, length, and format of the debugging string.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="c3387-178">卸載 \_ DLL \_ DEBUG \_ 事件</span><span class="sxs-lookup"><span data-stu-id="c3387-178">UNLOAD\_DLL\_DEBUG\_EVENT</span></span><br/>     | <span data-ttu-id="c3387-179">每次使用 [**FreeLibrary**](/windows/win32/api/libloaderapi/nf-libloaderapi-freelibrary) 函式來卸載 DLL 時，就會產生。</span><span class="sxs-lookup"><span data-stu-id="c3387-179">Generated whenever a process being debugged unloads a DLL by using the [**FreeLibrary**](/windows/win32/api/libloaderapi/nf-libloaderapi-freelibrary) function.</span></span> <span data-ttu-id="c3387-180">這個偵錯工具只會在最後一次從進程的位址空間卸載 DLL 時 (也就是，當 DLL 的使用計數為零) 時。</span><span class="sxs-lookup"><span data-stu-id="c3387-180">This debugging event only occurs the last time a DLL is unloaded from a process's address space (that is, when the DLL's usage count is zero).</span></span> <br/> <span data-ttu-id="c3387-181">[**Debug \_ 事件**](/windows/win32/api/minwinbase/ns-minwinbase-debug_event)結構包含卸載 [**DLL 的 \_ \_ debug \_ 資訊**](/windows/win32/api/minwinbase/ns-minwinbase-unload_dll_debug_info)結構。</span><span class="sxs-lookup"><span data-stu-id="c3387-181">The [**DEBUG\_EVENT**](/windows/win32/api/minwinbase/ns-minwinbase-debug_event) structure contains an [**UNLOAD\_DLL\_DEBUG\_INFO**](/windows/win32/api/minwinbase/ns-minwinbase-unload_dll_debug_info) structure.</span></span> <span data-ttu-id="c3387-182">此結構會在卸載 DLL 之進程的位址空間中，指定 DLL 的基底位址。</span><span class="sxs-lookup"><span data-stu-id="c3387-182">This structure specifies the base address of the DLL in the address space of the process that unloads the DLL.</span></span><br/> <span data-ttu-id="c3387-183">通常，偵錯工具會在收到此偵錯工具事件時，卸載與 DLL 相關聯的符號資料表。</span><span class="sxs-lookup"><span data-stu-id="c3387-183">Typically, a debugger unloads a symbol table associated with the DLL upon receiving this debugging event.</span></span><br/> <span data-ttu-id="c3387-184">當進程結束時，系統會自動卸載進程的 Dll，但不會產生卸載 dll 的 \_ 偵錯工具事件 \_ \_ 。</span><span class="sxs-lookup"><span data-stu-id="c3387-184">When a process exits, the system automatically unloads the process's DLLs, but does not generate an UNLOAD\_DLL\_DEBUG\_EVENT debugging event.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="c3387-185">RIP \_ 事件</span><span class="sxs-lookup"><span data-stu-id="c3387-185">RIP\_EVENT</span></span><br/>                    | <span data-ttu-id="c3387-186">每當正在調試的進程在系統偵錯工具的控制範圍外發生時產生。</span><span class="sxs-lookup"><span data-stu-id="c3387-186">Generated whenever a process being debugged dies outside of the control of the system debugger.</span></span><br/> <span data-ttu-id="c3387-187">[**DEBUG \_ 事件**](/windows/win32/api/minwinbase/ns-minwinbase-debug_event)結構包含 [**RIP \_ 資訊**](/windows/win32/api/minwinbase/ns-minwinbase-rip_info)結構。</span><span class="sxs-lookup"><span data-stu-id="c3387-187">The [**DEBUG\_EVENT**](/windows/win32/api/minwinbase/ns-minwinbase-debug_event) structure contains a [**RIP\_INFO**](/windows/win32/api/minwinbase/ns-minwinbase-rip_info) structure.</span></span> <span data-ttu-id="c3387-188">此結構會指定錯誤和錯誤類型。</span><span class="sxs-lookup"><span data-stu-id="c3387-188">This structure specifies the error and type of error.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |



 

 

 
