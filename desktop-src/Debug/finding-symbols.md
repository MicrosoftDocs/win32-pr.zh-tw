---
description: 將符號檔載入至符號處理常式之後，應用程式可以使用符號定位器函式來傳回指定位址的符號資訊。
ms.assetid: bfc068e1-eced-4ab2-80a3-acc2ed07c841
title: 尋找符號
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5f65830032cf363771b14f779726c59d976e8d30
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/07/2021
ms.locfileid: "104109968"
---
# <a name="finding-symbols"></a><span data-ttu-id="bc291-103">尋找符號</span><span class="sxs-lookup"><span data-stu-id="bc291-103">Finding Symbols</span></span>

<span data-ttu-id="bc291-104">將符號檔載入至符號處理常式之後，應用程式可以使用符號定位器函式來傳回指定位址的符號資訊。</span><span class="sxs-lookup"><span data-stu-id="bc291-104">After a symbol file has been loaded into the symbol handler, an application can use the symbol locator functions to return symbol information for a specified address.</span></span> <span data-ttu-id="bc291-105">這些函數也可以找到位址的原始程式碼檔案名和行號位置。</span><span class="sxs-lookup"><span data-stu-id="bc291-105">These functions can also find a source code file name and line number location for an address.</span></span>

## <a name="enumerating-symbol-files"></a><span data-ttu-id="bc291-106">列舉符號檔</span><span class="sxs-lookup"><span data-stu-id="bc291-106">Enumerating Symbol Files</span></span>

<span data-ttu-id="bc291-107">若要取得由模組名稱載入的所有符號檔清單，請呼叫 [**SymEnumerateModules64**](/windows/desktop/api/Dbghelp/nf-dbghelp-symenumeratemodules) 函式。</span><span class="sxs-lookup"><span data-stu-id="bc291-107">To retrieve a list of all symbol files loaded by module name, call the [**SymEnumerateModules64**](/windows/desktop/api/Dbghelp/nf-dbghelp-symenumeratemodules) function.</span></span> <span data-ttu-id="bc291-108">如需範例，請參閱 [列舉符號模組](enumerating-symbol-modules.md)。</span><span class="sxs-lookup"><span data-stu-id="bc291-108">For an example, see [Enumerating Symbol Modules](enumerating-symbol-modules.md).</span></span> <span data-ttu-id="bc291-109">若要取得指定模組的符號清單，請呼叫 [**SymEnumSymbols**](/windows/desktop/api/Dbghelp/nf-dbghelp-symenumsymbols) 函數。</span><span class="sxs-lookup"><span data-stu-id="bc291-109">To retrieve a list of symbols for a given module, call the [**SymEnumSymbols**](/windows/desktop/api/Dbghelp/nf-dbghelp-symenumsymbols) function.</span></span> <span data-ttu-id="bc291-110">如需範例，請參閱 [列舉符號](enumerating-symbols.md)。</span><span class="sxs-lookup"><span data-stu-id="bc291-110">For an example, see [Enumerating Symbols](enumerating-symbols.md).</span></span>

## <a name="retrieving-symbols-by-address"></a><span data-ttu-id="bc291-111">依位址抓取符號</span><span class="sxs-lookup"><span data-stu-id="bc291-111">Retrieving Symbols by Address</span></span>

<span data-ttu-id="bc291-112">若要取得特定位址的符號資訊，請使用 [**SymFromAddr**](/windows/desktop/api/Dbghelp/nf-dbghelp-symfromaddr) 函數。</span><span class="sxs-lookup"><span data-stu-id="bc291-112">To retrieve symbolic information for a specific address, use the [**SymFromAddr**](/windows/desktop/api/Dbghelp/nf-dbghelp-symfromaddr) function.</span></span> <span data-ttu-id="bc291-113">此函式會抓取資訊，並將其儲存在 [**符號 \_ 資訊**](/windows/desktop/api/DbgHelp/ns-dbghelp-symbol_info) 結構中。</span><span class="sxs-lookup"><span data-stu-id="bc291-113">This function retrieves information and stores it in a [**SYMBOL\_INFO**](/windows/desktop/api/DbgHelp/ns-dbghelp-symbol_info) structure.</span></span> <span data-ttu-id="bc291-114">由於符號名稱的長度是變數，因此您必須在 **符號 \_ 資訊** 結構宣告之後提供其他緩衝區空間。</span><span class="sxs-lookup"><span data-stu-id="bc291-114">Because symbol names are variable in length, you must provide additional buffer space following the **SYMBOL\_INFO** structure declaration.</span></span> <span data-ttu-id="bc291-115">如需範例，請參閱 [依位址抓取符號資訊](retrieving-symbol-information-by-address.md)。</span><span class="sxs-lookup"><span data-stu-id="bc291-115">For an example, see [Retrieving Symbol Information by Address](retrieving-symbol-information-by-address.md).</span></span>

<span data-ttu-id="bc291-116">請注意，位址不需要位於符號界限上。</span><span class="sxs-lookup"><span data-stu-id="bc291-116">Note that the address does not need to be on a symbol boundary.</span></span> <span data-ttu-id="bc291-117">如果位址出現在符號開頭之後，但符號的開頭 (符號的開頭加上符號大小) ，則函式會尋找符號。</span><span class="sxs-lookup"><span data-stu-id="bc291-117">If the address comes after the beginning of a symbol but before the end of the symbol (the beginning of the symbol plus the symbol size), the function will locate the symbol.</span></span>

## <a name="retrieving-symbols-by-symbol-name"></a><span data-ttu-id="bc291-118">依符號名稱抓取符號</span><span class="sxs-lookup"><span data-stu-id="bc291-118">Retrieving Symbols by Symbol Name</span></span>

<span data-ttu-id="bc291-119">若要在符號資訊結構中取出特定模組和符號名稱的符號資訊，請使用 [**SymFromName**](/windows/desktop/api/Dbghelp/nf-dbghelp-symfromname)函數。 [**\_**](/windows/desktop/api/DbgHelp/ns-dbghelp-symbol_info)</span><span class="sxs-lookup"><span data-stu-id="bc291-119">To retrieve symbolic information in a [**SYMBOL\_INFO**](/windows/desktop/api/DbgHelp/ns-dbghelp-symbol_info) structure for a specific module and symbol name, use the [**SymFromName**](/windows/desktop/api/Dbghelp/nf-dbghelp-symfromname) function.</span></span> <span data-ttu-id="bc291-120">如果已設定延遲的符號載入， **SymFromName** 會嘗試載入尚未載入之模組的符號檔。</span><span class="sxs-lookup"><span data-stu-id="bc291-120">If deferred symbol loading is set, **SymFromName** will attempt to load the symbol file for a module if it has not already been loaded.</span></span> <span data-ttu-id="bc291-121">若要指定模組名稱以及符號名稱，請使用語法 *模組*！*SymName*。</span><span class="sxs-lookup"><span data-stu-id="bc291-121">To specify a module name along with a symbol name, use the syntax *Module*!*SymName*.</span></span> <span data-ttu-id="bc291-122">"！" 字元會從符號名稱分隔模組名稱。</span><span class="sxs-lookup"><span data-stu-id="bc291-122">The "!" character delimits the module name from the symbol name.</span></span> <span data-ttu-id="bc291-123">如需範例，請參閱 [依名稱抓取符號資訊](retrieving-symbol-information-by-name.md)。</span><span class="sxs-lookup"><span data-stu-id="bc291-123">For an example, see [Retrieving Symbol Information by Name](retrieving-symbol-information-by-name.md).</span></span>

## <a name="retrieving-line-numbers-by-address"></a><span data-ttu-id="bc291-124">依位址取出行號</span><span class="sxs-lookup"><span data-stu-id="bc291-124">Retrieving Line Numbers by Address</span></span>

<span data-ttu-id="bc291-125">若要取得特定位址的原始程式碼位置，請使用 [**SymGetLineFromAddr64**](/windows/desktop/api/Dbghelp/nf-dbghelp-symgetlinefromaddr) 函數。</span><span class="sxs-lookup"><span data-stu-id="bc291-125">To retrieve the source code location for a specific address, use the [**SymGetLineFromAddr64**](/windows/desktop/api/Dbghelp/nf-dbghelp-symgetlinefromaddr) function.</span></span> <span data-ttu-id="bc291-126">此函式會填入 [**Imagehlp.dll \_ LINE64**](/windows/desktop/api/DbgHelp/ns-dbghelp-imagehlp_line) 結構，其中包含指定位址所參考的原始程式檔名稱和行號位置。</span><span class="sxs-lookup"><span data-stu-id="bc291-126">This function fills an [**IMAGEHLP\_LINE64**](/windows/desktop/api/DbgHelp/ns-dbghelp-imagehlp_line) structure that includes the source file name and line number location referred to by the specified address.</span></span> <span data-ttu-id="bc291-127">如需範例，請參閱 [依位址抓取符號資訊](retrieving-symbol-information-by-address.md)。</span><span class="sxs-lookup"><span data-stu-id="bc291-127">For an example, see [Retrieving Symbol Information by Address](retrieving-symbol-information-by-address.md).</span></span>

## <a name="retrieving-line-numbers-by-symbol-name"></a><span data-ttu-id="bc291-128">依符號名稱來取出行號</span><span class="sxs-lookup"><span data-stu-id="bc291-128">Retrieving Line Numbers by Symbol Name</span></span>

<span data-ttu-id="bc291-129">若要取得特定符號名稱的原始程式碼位置，請使用 [**SymGetLineFromName64**](/windows/desktop/api/Dbghelp/nf-dbghelp-symgetlinefromname) 函數。</span><span class="sxs-lookup"><span data-stu-id="bc291-129">To retrieve source code location for a specific symbol name, use the [**SymGetLineFromName64**](/windows/desktop/api/Dbghelp/nf-dbghelp-symgetlinefromname) function.</span></span> <span data-ttu-id="bc291-130">此函式類似于 [**SymGetSymFromName64**](/windows/desktop/api/Dbghelp/nf-dbghelp-symgetsymfromname)，但會抓取 [**imagehlp.dll \_ LINE64**](/windows/desktop/api/DbgHelp/ns-dbghelp-imagehlp_line) 結構。</span><span class="sxs-lookup"><span data-stu-id="bc291-130">This function is similar to [**SymGetSymFromName64**](/windows/desktop/api/Dbghelp/nf-dbghelp-symgetsymfromname), but retrieves an [**IMAGEHLP\_LINE64**](/windows/desktop/api/DbgHelp/ns-dbghelp-imagehlp_line) structure.</span></span> <span data-ttu-id="bc291-131">若要使用 [**SymGetLineFromAddr64**](/windows/desktop/api/Dbghelp/nf-dbghelp-symgetlinefromaddr)或 **SymGetLineFromName64**，您必須使用 SymSetOptions 函式，將載入行選項 (SYMOPT \_ 載入 \_ 行) 。 [](/windows/desktop/api/Dbghelp/nf-dbghelp-symsetoptions)</span><span class="sxs-lookup"><span data-stu-id="bc291-131">To use [**SymGetLineFromAddr64**](/windows/desktop/api/Dbghelp/nf-dbghelp-symgetlinefromaddr) or **SymGetLineFromName64**, you must set the load lines option (SYMOPT\_LOAD\_LINES) using the [**SymSetOptions**](/windows/desktop/api/Dbghelp/nf-dbghelp-symsetoptions) function.</span></span> <span data-ttu-id="bc291-132">如需範例，請參閱 [依名稱抓取符號資訊](retrieving-symbol-information-by-name.md)。</span><span class="sxs-lookup"><span data-stu-id="bc291-132">For an example, see [Retrieving Symbol Information by Name](retrieving-symbol-information-by-name.md).</span></span>

 

 



