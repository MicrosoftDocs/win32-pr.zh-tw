---
description: 辨識器外掛程式是一種物件，可監視筆勢、手寫或其他物件的 tablet 畫筆移動。
ms.assetid: 764a327e-1da0-487f-9245-b6a4f3f43502
title: 辨識器外掛程式
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: bbf3ac866a211a78e2d8f347e89ca20a1906f436
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/08/2021
ms.locfileid: "104552206"
---
# <a name="recognizer-plug-ins"></a><span data-ttu-id="e33aa-103">辨識器外掛程式</span><span class="sxs-lookup"><span data-stu-id="e33aa-103">Recognizer Plug-ins</span></span>

<span data-ttu-id="e33aa-104">辨識器外掛程式是一種物件，可監視筆勢、手寫或其他物件的 tablet 畫筆移動。</span><span class="sxs-lookup"><span data-stu-id="e33aa-104">A recognizer plug-in is an object that monitors the movement of the tablet pen for gesture, handwriting, or other objects.</span></span>

## <a name="system-gestures"></a><span data-ttu-id="e33aa-105">系統手勢</span><span class="sxs-lookup"><span data-stu-id="e33aa-105">System Gestures</span></span>

<span data-ttu-id="e33aa-106">[**RealTimeStylus**](realtimestylus-class.md)物件可識別系統手勢。</span><span class="sxs-lookup"><span data-stu-id="e33aa-106">The [**RealTimeStylus**](realtimestylus-class.md) object recognizes system gestures.</span></span> <span data-ttu-id="e33aa-107">**RealTimeStylus** 物件會將 [SystemGestureData](/previous-versions/ms824019(v=msdn.10))物件新增至 [StylusQueues](/previous-versions/ms824786(v=msdn.10))佇列，以回應完成手勢的資料，例如 [SystemGesture](/previous-versions/bb345349(v=vs.100))的 [StylusUpData](/previous-versions/ms824057(v=msdn.10))物件。</span><span class="sxs-lookup"><span data-stu-id="e33aa-107">The **RealTimeStylus** object adds a [SystemGestureData](/previous-versions/ms824019(v=msdn.10)) object to the [StylusQueues](/previous-versions/ms824786(v=msdn.10)) queue in response to the data that finishes the gesture, such as a [StylusUpData](/previous-versions/ms824057(v=msdn.10)) object for the [SystemGesture](/previous-versions/bb345349(v=vs.100)).</span></span> <span data-ttu-id="e33aa-108">如需詳細資訊，請參閱 [外掛程式資料和 RealTimeStylus 類別](plug-in-data-and-the-realtimestylus-class.md)。</span><span class="sxs-lookup"><span data-stu-id="e33aa-108">For more information, see [Plug-in Data and the RealTimeStylus Class](plug-in-data-and-the-realtimestylus-class.md).</span></span>

## <a name="the-gesturerecognizer-object"></a><span data-ttu-id="e33aa-109">GestureRecognizer 物件</span><span class="sxs-lookup"><span data-stu-id="e33aa-109">The GestureRecognizer Object</span></span>

<span data-ttu-id="e33aa-110">[**GestureRecognizer**](gesturerecognizer-class.md)物件會實 [**IStylusSyncPlugin**](/windows/win32/api/rtscom/nn-rtscom-istylussyncplugin)和 [**IStylusAsyncPlugin**](/windows/win32/api/rtscom/nn-rtscom-istylusasyncplugin)介面。</span><span class="sxs-lookup"><span data-stu-id="e33aa-110">The [**GestureRecognizer**](gesturerecognizer-class.md) object implements the [**IStylusSyncPlugin**](/windows/win32/api/rtscom/nn-rtscom-istylussyncplugin) and [**IStylusAsyncPlugin**](/windows/win32/api/rtscom/nn-rtscom-istylusasyncplugin) interfaces.</span></span> <span data-ttu-id="e33aa-111">**GestureRecognizer** 物件可識別應用程式手勢。</span><span class="sxs-lookup"><span data-stu-id="e33aa-111">The **GestureRecognizer** object recognizes application gestures.</span></span> <span data-ttu-id="e33aa-112">就內部而言， **GestureRecognizer** 物件會使用 Microsoft 手勢辨識器來執行手勢辨識。</span><span class="sxs-lookup"><span data-stu-id="e33aa-112">Internally, the **GestureRecognizer** object uses the Microsoft gesture recognizer to perform gesture recognition.</span></span>

<span data-ttu-id="e33aa-113">當 [**GestureRecognizer**](gesturerecognizer-class.md) 物件辨識手勢時，它會將自訂手寫筆資料新增至 [StylusQueues](/previous-versions/ms824786(v=msdn.10)) 佇列，以回應筆劃的 [StylusUpData](/previous-versions/ms824057(v=msdn.10)) 物件。</span><span class="sxs-lookup"><span data-stu-id="e33aa-113">When the [**GestureRecognizer**](gesturerecognizer-class.md) object recognizes a gesture, it adds custom stylus data to the [StylusQueues](/previous-versions/ms824786(v=msdn.10)) queue in response to the [StylusUpData](/previous-versions/ms824057(v=msdn.10)) object for the stroke.</span></span> <span data-ttu-id="e33aa-114">[CustomStylusData](/previous-versions/ms575208(v=vs.100))物件的[CustomDataId](/previous-versions/ms824748(v=msdn.10))屬性設定為[GestureRecognitionDataGuid](/previous-versions/ms826344(v=msdn.10))值，而 CustomStylusData 物件的[Data](/previous-versions/ms824749(v=msdn.10))屬性包含[GestureRecognitionData](/previous-versions/ms824594(v=msdn.10))物件。</span><span class="sxs-lookup"><span data-stu-id="e33aa-114">The [CustomStylusData](/previous-versions/ms575208(v=vs.100)) object's [CustomDataId](/previous-versions/ms824748(v=msdn.10)) property is set to the [GestureRecognitionDataGuid](/previous-versions/ms826344(v=msdn.10)) value, and the CustomStylusData object's [Data](/previous-versions/ms824749(v=msdn.10)) property contains a [GestureRecognitionData](/previous-versions/ms824594(v=msdn.10)) object.</span></span>

<span data-ttu-id="e33aa-115">下圖說明 [**GestureRecognizer**](gesturerecognizer-class.md) 物件如何將資料新增至 tablet 畫筆資料。</span><span class="sxs-lookup"><span data-stu-id="e33aa-115">The following diagram illustrates how the [**GestureRecognizer**](gesturerecognizer-class.md) object adds data to the tablet pen data.</span></span>

![gesturerecognizer 資料流程的圖例](images/c4c77c33-deee-49d0-84bc-12612575ec66.gif)

<span data-ttu-id="e33aa-117">在此圖中，以字母 "SD" 表示 [StylusDownData](/previous-versions/ms824107(v=msdn.10))物件，而圓形 "P" 代表已新增至 [**RealTimeStylus**](realtimestylus-class.md)物件輸出佇列且尚未傳送至非同步外掛程式集合的 [PacketsData](/previous-versions/ms824590(v=msdn.10))物件。</span><span class="sxs-lookup"><span data-stu-id="e33aa-117">In this diagram the circle lettered "SD" represents a [StylusDownData](/previous-versions/ms824107(v=msdn.10)) object and the circles lettered "P" represent [PacketsData](/previous-versions/ms824590(v=msdn.10)) objects that have already been added to the [**RealTimeStylus**](realtimestylus-class.md) object's output queue and that have not yet been sent to the asynchronous plug-in collection.</span></span> <span data-ttu-id="e33aa-118">以字母 "SU" 表示 [StylusUpData](/previous-versions/ms824057(v=msdn.10)) 物件，此物件目前正在 **處理的物件** 。</span><span class="sxs-lookup"><span data-stu-id="e33aa-118">The circle lettered "SU" represents a [StylusUpData](/previous-versions/ms824057(v=msdn.10)) object that the **RealTimeStylus** object is currently processing.</span></span> <span data-ttu-id="e33aa-119">它會傳送至同步的外掛程式集合，然後放在輸出佇列中。</span><span class="sxs-lookup"><span data-stu-id="e33aa-119">It is sent to the synchronous plug-in collection and then placed on the output queue.</span></span> <span data-ttu-id="e33aa-120">圓形「GR」表示自訂手寫筆資料，由 [**GestureRecognizer**](gesturerecognizer-class.md) 外掛程式新增至輸入佇列，以回應與「SU」相關聯的手寫筆上傳通知。</span><span class="sxs-lookup"><span data-stu-id="e33aa-120">The circles lettered "GR" represent custom stylus data that is added to the input queue by the [**GestureRecognizer**](gesturerecognizer-class.md) plug-in in response to the stylus up notification associated with "SU".</span></span> <span data-ttu-id="e33aa-121">自訂手寫筆資料的字母 "GR" 接著會傳遞至同步的外掛程式，然後再傳遞至輸出佇列，然後再處理下一個 tablet 畫筆資料。</span><span class="sxs-lookup"><span data-stu-id="e33aa-121">The custom stylus data lettered "GR" is then passed to the synchronous plug-ins and then to the output queue before the next tablet pen data is processed.</span></span> <span data-ttu-id="e33aa-122">空的圓形代表在輸出佇列中加入未來 tablet 畫筆資料的位置。</span><span class="sxs-lookup"><span data-stu-id="e33aa-122">The empty circle represents the position in the output queue where future tablet pen data is added.</span></span>

<span data-ttu-id="e33aa-123">根據預設， [**GestureRecognizer**](gesturerecognizer-class.md) 物件只會辨識單一筆劃手勢;不過， **GestureRecognizer** 物件可以設定為辨識 multistroke 手勢。</span><span class="sxs-lookup"><span data-stu-id="e33aa-123">By default, the [**GestureRecognizer**](gesturerecognizer-class.md) object recognizes only single-stroke gestures; however, the **GestureRecognizer** object can be set to recognize multistroke gestures.</span></span> <span data-ttu-id="e33aa-124">針對 multistroke 手勢， [CustomStylusData](/previous-versions/ms575208(v=vs.100)) 物件會加入至 [StylusQueues](/previous-versions/ms824786(v=msdn.10)) 佇列，以回應筆勢最後筆劃的 [StylusUpData](/previous-versions/ms824057(v=msdn.10)) 物件。</span><span class="sxs-lookup"><span data-stu-id="e33aa-124">For multistroke gestures, the [CustomStylusData](/previous-versions/ms575208(v=vs.100)) object is added to the [StylusQueues](/previous-versions/ms824786(v=msdn.10)) queue in response to the [StylusUpData](/previous-versions/ms824057(v=msdn.10)) object for the final stroke of the gesture.</span></span> <span data-ttu-id="e33aa-125">辨識 multistroke 手勢時，您可能會收到重迭筆劃集合的通知。</span><span class="sxs-lookup"><span data-stu-id="e33aa-125">When recognizing multistroke gestures, you may receive notifications for overlapping sets of strokes.</span></span> <span data-ttu-id="e33aa-126">例如，第一個和第二個筆劃會被辨識為一個手勢，而第二個筆劃本身可能會被辨識為手勢。</span><span class="sxs-lookup"><span data-stu-id="e33aa-126">For example, the first and second strokes together may be recognized as one gesture and the second stroke by itself may be recognized as a gesture.</span></span> <span data-ttu-id="e33aa-127">如需 multistroke 手勢辨識的詳細資訊，請參閱 **GestureRecognizer** 類別和 [MaxStrokeCount](/previous-versions/ms826053(v=msdn.10)) 屬性。</span><span class="sxs-lookup"><span data-stu-id="e33aa-127">For more information about multistroke gesture recognition, see the **GestureRecognizer** class and the [MaxStrokeCount](/previous-versions/ms826053(v=msdn.10)) property.</span></span>

<span data-ttu-id="e33aa-128">如果您使用 [**GestureRecognizer**](gesturerecognizer-class.md) 物件進行 multistroke 手勢辨識，則可以使用串聯的 [**realtimestylus**](realtimestylus-class.md) 模型並將 **GestureRecognizer** 物件附加至次要 **RealTimeStylus** 物件，以達到最佳效能。</span><span class="sxs-lookup"><span data-stu-id="e33aa-128">If you are using the [**GestureRecognizer**](gesturerecognizer-class.md) object for multistroke gesture recognition, you may achieve optimal performance by using a cascaded [**RealTimeStylus**](realtimestylus-class.md) model and attaching the **GestureRecognizer** object to the secondary **RealTimeStylus** object.</span></span> <span data-ttu-id="e33aa-129">如需串聯式 **realtimestylus** 模型的詳細資訊，請參閱 [串聯的 realtimestylus 模型](the-cascaded-realtimestylus-model.md)。</span><span class="sxs-lookup"><span data-stu-id="e33aa-129">For more information about the cascading **RealTimeStylus** model, see [The Cascaded RealTimeStylus Model](the-cascaded-realtimestylus-model.md).</span></span>

### <a name="special-considerations"></a><span data-ttu-id="e33aa-130">特殊考慮</span><span class="sxs-lookup"><span data-stu-id="e33aa-130">Special Considerations</span></span>

<span data-ttu-id="e33aa-131">下列清單描述使用 [**GestureRecognizer**](gesturerecognizer-class.md) 物件時應考慮的其他重點。</span><span class="sxs-lookup"><span data-stu-id="e33aa-131">The following list describes other points to take into consideration when using the [**GestureRecognizer**](gesturerecognizer-class.md) object.</span></span>

-   <span data-ttu-id="e33aa-132">您不應該將 [**GestureRecognizer**](gesturerecognizer-class.md) 物件附加至一個以上的 [**RealTimeStylus**](realtimestylus-class.md) 物件。</span><span class="sxs-lookup"><span data-stu-id="e33aa-132">You should not attach a [**GestureRecognizer**](gesturerecognizer-class.md) object to more than one [**RealTimeStylus**](realtimestylus-class.md) object.</span></span> <span data-ttu-id="e33aa-133">一旦已啟用 **GestureRecognizer** 物件附加的兩個 **RealTimeStylus** 物件，就會發生下列情況。</span><span class="sxs-lookup"><span data-stu-id="e33aa-133">Once two **RealTimeStylus** objects to which the **GestureRecognizer** object is attached are enabled, the following occurs.</span></span>
    -   <span data-ttu-id="e33aa-134">[**GestureRecognizer**](gesturerecognizer-class.md)物件會擲回例外狀況，以回應其 RealTimeStylusEnabled 方法的第二次呼叫。</span><span class="sxs-lookup"><span data-stu-id="e33aa-134">The [**GestureRecognizer**](gesturerecognizer-class.md) object throws an exception in response to the second call to its RealTimeStylusEnabled method.</span></span>
    -   <span data-ttu-id="e33aa-135">已啟用的第二個 [**RealTimeStylus**](realtimestylus-class.md) 物件會產生 [ErrorData](/previous-versions/ms824740(v=msdn.10)) 物件，並在該錯誤的外掛程式集合中通知剩餘的外掛程式。</span><span class="sxs-lookup"><span data-stu-id="e33aa-135">The second [**RealTimeStylus**](realtimestylus-class.md) object that was enabled generates a [ErrorData](/previous-versions/ms824740(v=msdn.10)) object and notifies the remaining plug-ins in its plug-in collections of the error.</span></span>
    -   <span data-ttu-id="e33aa-136">[**GestureRecognizer**](gesturerecognizer-class.md)物件會停止辨識手勢。</span><span class="sxs-lookup"><span data-stu-id="e33aa-136">The [**GestureRecognizer**](gesturerecognizer-class.md) object stops recognizing gestures.</span></span>
-   <span data-ttu-id="e33aa-137">當呼叫 [AddCustomStylusDataToQueue](/previous-versions/ms825761(v=msdn.10))方法時，如果將 *guid* 參數設定為 [StylusInput](/previous-versions/ms826344(v=msdn.10)) [**，則會**](realtimestylus-class.md)擲回例外狀況（ (guid) 的全域唯一識別碼）。</span><span class="sxs-lookup"><span data-stu-id="e33aa-137">The [**RealTimeStylus**](realtimestylus-class.md) object throws an exception when its [AddCustomStylusDataToQueue](/previous-versions/ms825761(v=msdn.10)) method is called with the *guid* parameter set to the [Microsoft.StylusInput.GestureRecognizer.GestureRecognitionDataGuid](/previous-versions/ms826344(v=msdn.10)) globally unique identifier (GUID).</span></span>
-   <span data-ttu-id="e33aa-138">[**GestureRecognizer**](gesturerecognizer-class.md)物件會實作為元件物件模型 (COM) 包裝函式，而且您無法直接呼叫其 [**IStylusSyncPlugin**](/windows/win32/api/rtscom/nn-rtscom-istylussyncplugin)或 [**IStylusAsyncPlugin**](/windows/win32/api/rtscom/nn-rtscom-istylusasyncplugin)介面方法。</span><span class="sxs-lookup"><span data-stu-id="e33aa-138">The [**GestureRecognizer**](gesturerecognizer-class.md) object is implemented as a Component Object Model (COM) wrapper, and you cannot call its [**IStylusSyncPlugin**](/windows/win32/api/rtscom/nn-rtscom-istylussyncplugin) or [**IStylusAsyncPlugin**](/windows/win32/api/rtscom/nn-rtscom-istylusasyncplugin) interface methods directly.</span></span> <span data-ttu-id="e33aa-139">如需 COM 執行和 [**RealTimeStylus**](realtimestylus-class.md) 物件的詳細資訊，請參閱 [StylusInput Api 的執行附注](implementation-notes-for-the-stylusinput-apis.md)。</span><span class="sxs-lookup"><span data-stu-id="e33aa-139">For more information about COM implementation and the [**RealTimeStylus**](realtimestylus-class.md) object, see [Implementation Notes for the StylusInput APIs](implementation-notes-for-the-stylusinput-apis.md).</span></span>

## <a name="custom-gesture-recognition"></a><span data-ttu-id="e33aa-140">自訂手勢辨識</span><span class="sxs-lookup"><span data-stu-id="e33aa-140">Custom Gesture Recognition</span></span>

<span data-ttu-id="e33aa-141">您可以透過下列方式建立可辨識手寫、手勢或其他物件的自訂辨識器外掛程式：</span><span class="sxs-lookup"><span data-stu-id="e33aa-141">You can create a custom recognizer plug-in that recognizes handwriting, gestures, or other objects by:</span></span>

-   <span data-ttu-id="e33aa-142">將筆劃資訊傳遞給現有的辨識 [器](/previous-versions/ms829434(v=msdn.10)) 物件，並使用 [AddCustomStylusDataToQueue](/previous-versions/ms825761(v=msdn.10)) 方法將結果新增至 tablet 畫筆資料串流。</span><span class="sxs-lookup"><span data-stu-id="e33aa-142">Passing the stroke information to an existing [Recognizer](/previous-versions/ms829434(v=msdn.10)) object and using the [AddCustomStylusDataToQueue](/previous-versions/ms825761(v=msdn.10)) method to add the results to the tablet pen data stream.</span></span>
-   <span data-ttu-id="e33aa-143">在您的外掛程式內執行辨識，並使用 [AddCustomStylusDataToQueue](/previous-versions/ms825761(v=msdn.10)) 方法將結果新增至 tablet 畫筆資料串流。</span><span class="sxs-lookup"><span data-stu-id="e33aa-143">Performing the recognition within your plug-in and using the [AddCustomStylusDataToQueue](/previous-versions/ms825761(v=msdn.10)) method to add the results to the tablet pen data stream.</span></span>

## <a name="related-topics"></a><span data-ttu-id="e33aa-144">相關主題</span><span class="sxs-lookup"><span data-stu-id="e33aa-144">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="e33aa-145">應用程式手勢</span><span class="sxs-lookup"><span data-stu-id="e33aa-145">Application Gestures</span></span>](application-gestures.md)
</dt> <dt>

[<span data-ttu-id="e33aa-146">系統手勢</span><span class="sxs-lookup"><span data-stu-id="e33aa-146">System Gestures</span></span>](system-gestures.md)
</dt> <dt>

[<span data-ttu-id="e33aa-147">滑鼠訊息和系統事件的時間軸</span><span class="sxs-lookup"><span data-stu-id="e33aa-147">Timeline of Mouse Messages and System Events</span></span>](timeline-of-mouse-messages-and-system-events.md)
</dt> </dl>

 

 
