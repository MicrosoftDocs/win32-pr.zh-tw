---
description: 一般執行緒考慮的總覽。
ms.assetid: cf35724f-5f80-4b3e-992a-a9d5ea99aae9
title: 一般執行緒考慮
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 21f825ec7a1397dae7d60aa14b31603ee76a2f59
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/07/2021
ms.locfileid: "104511717"
---
# <a name="general-threading-considerations"></a><span data-ttu-id="ef279-103">一般執行緒考慮</span><span class="sxs-lookup"><span data-stu-id="ef279-103">General Threading Considerations</span></span>

<span data-ttu-id="ef279-104">以下是針對 Tablet PC 進行開發時的一般執行緒考慮。</span><span class="sxs-lookup"><span data-stu-id="ef279-104">The following are general threading considerations when developing for Tablet PC.</span></span>

-   [<span data-ttu-id="ef279-105">應用程式和非應用程式執行緒</span><span class="sxs-lookup"><span data-stu-id="ef279-105">Application and Non-Application Threads</span></span>](#application-and-non-application-threads)
-   [<span data-ttu-id="ef279-106">效能考量</span><span class="sxs-lookup"><span data-stu-id="ef279-106">Performance Considerations</span></span>](#performance-considerations)
    -   [<span data-ttu-id="ef279-107">事件處理常式</span><span class="sxs-lookup"><span data-stu-id="ef279-107">Event Handlers</span></span>](#event-handlers)
    -   [<span data-ttu-id="ef279-108">AutoRedraw 屬性</span><span class="sxs-lookup"><span data-stu-id="ef279-108">AutoRedraw Property</span></span>](#autoredraw-property)
    -   [<span data-ttu-id="ef279-109">DynamicRendering 屬性</span><span class="sxs-lookup"><span data-stu-id="ef279-109">DynamicRendering Property</span></span>](#dynamicrendering-property)
-   [<span data-ttu-id="ef279-110">事件執行緒考慮</span><span class="sxs-lookup"><span data-stu-id="ef279-110">Event Threading Considerations</span></span>](#event-threading-considerations)
    -   [<span data-ttu-id="ef279-111">InkCollector 和 InkOverlay 物件事件</span><span class="sxs-lookup"><span data-stu-id="ef279-111">InkCollector and InkOverlay Objects Events</span></span>](#inkcollector-and-inkoverlay-objects-events)
    -   [<span data-ttu-id="ef279-112">筆跡物件和筆劃集合事件</span><span class="sxs-lookup"><span data-stu-id="ef279-112">Ink Object and Strokes Collection Events</span></span>](#ink-object-and-strokes-collection-events)
    -   [<span data-ttu-id="ef279-113">辨識事件</span><span class="sxs-lookup"><span data-stu-id="ef279-113">Recognition Events</span></span>](#recognition-events)
    -   [<span data-ttu-id="ef279-114">畫筆輸入面板事件</span><span class="sxs-lookup"><span data-stu-id="ef279-114">Pen Input Panel Events</span></span>](#pen-input-panel-events)
-   [<span data-ttu-id="ef279-115">相關主題</span><span class="sxs-lookup"><span data-stu-id="ef279-115">Related topics</span></span>](#related-topics)

## <a name="application-and-non-application-threads"></a><span data-ttu-id="ef279-116">應用程式和非應用程式執行緒</span><span class="sxs-lookup"><span data-stu-id="ef279-116">Application and Non-Application Threads</span></span>

<span data-ttu-id="ef279-117">所有筆墨事件都是在個別、高優先順序的筆墨線程上產生。</span><span class="sxs-lookup"><span data-stu-id="ef279-117">All ink events are generated on a separate, high-priority ink thread.</span></span> <span data-ttu-id="ef279-118">即使應用程式執行速度很慢，也可讓筆墨順暢地流動。</span><span class="sxs-lookup"><span data-stu-id="ef279-118">This allows ink to flow smoothly even when an application is running slowly.</span></span> <span data-ttu-id="ef279-119">不過，事件處理常式可能會變慢或封鎖筆墨的轉譯。</span><span class="sxs-lookup"><span data-stu-id="ef279-119">However, event handlers can slow down or block the rendering of ink.</span></span>

<span data-ttu-id="ef279-120">背景辨識方法呼叫所產生的所有辨識事件都是在個別的一般優先順序背景辨識執行緒上處理。</span><span class="sxs-lookup"><span data-stu-id="ef279-120">All recognition events generated by background recognition method calls are handled on a separate, normal-priority background recognition thread.</span></span>

<span data-ttu-id="ef279-121">系統會在應用程式的主要使用者介面上產生所有滑鼠事件 (UI) 執行緒。</span><span class="sxs-lookup"><span data-stu-id="ef279-121">All mouse events are generated on the application's main user interface (UI) thread.</span></span>

## <a name="performance-considerations"></a><span data-ttu-id="ef279-122">效能考量</span><span class="sxs-lookup"><span data-stu-id="ef279-122">Performance Considerations</span></span>

### <a name="event-handlers"></a><span data-ttu-id="ef279-123">事件處理常式</span><span class="sxs-lookup"><span data-stu-id="ef279-123">Event Handlers</span></span>

<span data-ttu-id="ef279-124">Tablet PC 平臺應用程式開發介面 (API) 具有事件（而非通知模型）的互動式模型。</span><span class="sxs-lookup"><span data-stu-id="ef279-124">The Tablet PC Platform application programming interface (API) has an interactive model for events rather than a notification model.</span></span> <span data-ttu-id="ef279-125">讓事件處理常式中的程式碼保持簡短，以減少筆墨轉譯遭到封鎖的時間。</span><span class="sxs-lookup"><span data-stu-id="ef279-125">Keep code in event handlers short to reduce the time that ink rendering is blocked.</span></span> <span data-ttu-id="ef279-126">Tablet PC 的筆墨集合不會被封鎖，但您的應用程式在封鎖應用程式時不會收到筆墨。</span><span class="sxs-lookup"><span data-stu-id="ef279-126">The collection of ink by the Tablet PC is not blocked, but your application does not receive the ink while your application is blocked.</span></span>

### <a name="autoredraw-property"></a><span data-ttu-id="ef279-127">AutoRedraw 屬性</span><span class="sxs-lookup"><span data-stu-id="ef279-127">AutoRedraw Property</span></span>

<span data-ttu-id="ef279-128">當您的應用程式執行自訂轉譯時，或是當應用程式對繪製問題很敏感時，您可以自行處理重新繪製，並將 [**InkCollector**](inkcollector-class.md)物件、 [**InkOverlay**](inkoverlay-class.md)物件或 [InkPicture](inkpicture-control.md)控制項的 [**AutoRedraw**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkcollector-get_autoredraw)屬性設定為 **false** 。</span><span class="sxs-lookup"><span data-stu-id="ef279-128">When your application is performing custom rendering or when your application is sensitive to painting issues, you can handle the repainting yourself and set the [**AutoRedraw**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkcollector-get_autoredraw) property to **false** for the [**InkCollector**](inkcollector-class.md) object, the [**InkOverlay**](inkoverlay-class.md) object, or the [InkPicture](inkpicture-control.md) control.</span></span> <span data-ttu-id="ef279-129">使用下表中的事件來處理重新繪製。</span><span class="sxs-lookup"><span data-stu-id="ef279-129">Use the events in the following table to handle the repainting.</span></span>



| <span data-ttu-id="ef279-130">物件或控制項</span><span class="sxs-lookup"><span data-stu-id="ef279-130">Object or Control</span></span>                                            | <span data-ttu-id="ef279-131">事件</span><span class="sxs-lookup"><span data-stu-id="ef279-131">Event</span></span>                                                                                                                                                                                                                     |
|--------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="ef279-132">[**InkCollector**](inkcollector-class.md) 物件</span><span class="sxs-lookup"><span data-stu-id="ef279-132">[**InkCollector**](inkcollector-class.md) Object</span></span><br/> | <span data-ttu-id="ef279-133">基礎控制項的 [控制項。無效](/dotnet/api/system.windows.forms.control.invalidated?view=netcore-3.1) 的控制項和 [控制項。繪製](/dotnet/api/system.windows.forms.control.paint?view=netcore-3.1) 事件。</span><span class="sxs-lookup"><span data-stu-id="ef279-133">The underlying control's [Control.Invalidated](/dotnet/api/system.windows.forms.control.invalidated?view=netcore-3.1) and [Control.Paint](/dotnet/api/system.windows.forms.control.paint?view=netcore-3.1) events.</span></span><br/>                                 |
| <span data-ttu-id="ef279-134">[**InkOverlay**](inkoverlay-class.md) 物件</span><span class="sxs-lookup"><span data-stu-id="ef279-134">[**InkOverlay**](inkoverlay-class.md) Object</span></span><br/>     | <span data-ttu-id="ef279-135">基礎控制項的 [控制項。無效](/dotnet/api/system.windows.forms.control.invalidated?view=netcore-3.1) 的控制項和 [控制項。繪製](/dotnet/api/system.windows.forms.control.paint?view=netcore-3.1) 事件。</span><span class="sxs-lookup"><span data-stu-id="ef279-135">The underlying control's [Control.Invalidated](/dotnet/api/system.windows.forms.control.invalidated?view=netcore-3.1) and [Control.Paint](/dotnet/api/system.windows.forms.control.paint?view=netcore-3.1) events.</span></span><br/>                                 |
| <span data-ttu-id="ef279-136">[InkPicture](inkpicture-control.md) 控制</span><span class="sxs-lookup"><span data-stu-id="ef279-136">[InkPicture](inkpicture-control.md) Control</span></span><br/>      | <span data-ttu-id="ef279-137">[InkPicture](inkpicture-control.md) 控制項的繼承 [控制項。無效](/dotnet/api/system.windows.forms.control.invalidated?view=netcore-3.1) 的控制項。 [繪製](/dotnet/api/system.windows.forms.control.paint?view=netcore-3.1) 事件。</span><span class="sxs-lookup"><span data-stu-id="ef279-137">[InkPicture](inkpicture-control.md) control's inherited [Control.Invalidated](/dotnet/api/system.windows.forms.control.invalidated?view=netcore-3.1) and [Control.Paint](/dotnet/api/system.windows.forms.control.paint?view=netcore-3.1) events.</span></span><br/> |



 

### <a name="dynamicrendering-property"></a><span data-ttu-id="ef279-138">DynamicRendering 屬性</span><span class="sxs-lookup"><span data-stu-id="ef279-138">DynamicRendering Property</span></span>

<span data-ttu-id="ef279-139">當您的應用程式執行自訂轉譯時，或是當您想要資訊（而不是筆墨）時，您可以自行處理筆墨的版面配置，並藉由將 [**InkCollector**](inkcollector-class.md)物件、 [**InkOverlay**](inkoverlay-class.md)物件或 [InkPicture](inkpicture-control.md)控制項的 [**DynamicRendering**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkcollector-get_dynamicrendering)屬性設定為 **false** ，來關閉筆跡的即時呈現。</span><span class="sxs-lookup"><span data-stu-id="ef279-139">When your application is performing custom rendering or when you want the information, but not the ink, you can handle the laying down of ink yourself and turn off real-time rendering of ink by setting the [**DynamicRendering**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkcollector-get_dynamicrendering) property to **false** for the [**InkCollector**](inkcollector-class.md) object, the [**InkOverlay**](inkoverlay-class.md) object, or the [InkPicture](inkpicture-control.md) control.</span></span>

## <a name="event-threading-considerations"></a><span data-ttu-id="ef279-140">事件執行緒考慮</span><span class="sxs-lookup"><span data-stu-id="ef279-140">Event Threading Considerations</span></span>

<span data-ttu-id="ef279-141">Tablet PC 平臺 API 事件會在不同的執行緒上引發。</span><span class="sxs-lookup"><span data-stu-id="ef279-141">Tablet PC Platform API events are raised on various threads.</span></span>

### <a name="inkcollector-and-inkoverlay-objects-events"></a><span data-ttu-id="ef279-142">InkCollector 和 InkOverlay 物件事件</span><span class="sxs-lookup"><span data-stu-id="ef279-142">InkCollector and InkOverlay Objects Events</span></span>

<span data-ttu-id="ef279-143">大部分的 [**InkCollector**](inkcollector-class.md) 和 [**InkOverlay**](inkoverlay-class.md) 物件事件都會在筆墨線程上引發。</span><span class="sxs-lookup"><span data-stu-id="ef279-143">Most [**InkCollector**](inkcollector-class.md) and [**InkOverlay**](inkoverlay-class.md) object events are raised on the ink thread.</span></span> <span data-ttu-id="ef279-144">只有這些物件的滑鼠事件會在 UI 執行緒上引發。</span><span class="sxs-lookup"><span data-stu-id="ef279-144">Only the mouse events for these objects are raised on the UI thread.</span></span> <span data-ttu-id="ef279-145">例如，針對 **InkCollector** 物件，會在 UI 執行緒上引發 [**MouseDown**](inkcollector-mousedown.md) 事件，並在筆墨線程上引發 [**CursorDown**](inkcollector-cursordown.md) 事件。</span><span class="sxs-lookup"><span data-stu-id="ef279-145">For example, for the **InkCollector** object, the [**MouseDown**](inkcollector-mousedown.md) event is raised on the UI thread, and the [**CursorDown**](inkcollector-cursordown.md) event is raised on the ink thread.</span></span>

### <a name="ink-object-and-strokes-collection-events"></a><span data-ttu-id="ef279-146">筆跡物件和筆劃集合事件</span><span class="sxs-lookup"><span data-stu-id="ef279-146">Ink Object and Strokes Collection Events</span></span>

<span data-ttu-id="ef279-147">[**筆墨**](inkdisp-class.md)物件和 [**筆劃**](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85))集合事件可能來自筆墨線程或 UI 執行緒。</span><span class="sxs-lookup"><span data-stu-id="ef279-147">The [**Ink**](inkdisp-class.md) object and [**Strokes**](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) collection events may come from the ink thread or the UI thread.</span></span> <span data-ttu-id="ef279-148">當您的應用程式操作 **筆墨** 物件或 **筆劃** 集合時，會在 UI 執行緒中產生事件。</span><span class="sxs-lookup"><span data-stu-id="ef279-148">When your application manipulates the **Ink** object or **Strokes** collection, the event is generated in the UI thread.</span></span> <span data-ttu-id="ef279-149">當 [**InkCollector**](inkcollector-class.md) 或 [**InkOverlay**](inkoverlay-class.md) 物件更新 **筆墨** 物件或 **筆劃** 集合時，會在筆墨線程中產生事件。</span><span class="sxs-lookup"><span data-stu-id="ef279-149">When the [**InkCollector**](inkcollector-class.md) or the [**InkOverlay**](inkoverlay-class.md) object updates the **Ink** object or **Strokes** collection, the event is generated in the ink thread.</span></span>

<span data-ttu-id="ef279-150">[InkPicture](inkpicture-control-reference.md)和[InkEdit](inkedit-control-reference.md)控制項會在單一執行緒的單元 (STA) 中運作。</span><span class="sxs-lookup"><span data-stu-id="ef279-150">The [InkPicture](inkpicture-control-reference.md) and [InkEdit](inkedit-control-reference.md) controls operate in a single-threaded apartment (STA).</span></span> <span data-ttu-id="ef279-151">當 InkPicture 或 InkEdit 控制項更新 [**筆墨**](inkdisp-class.md) 物件或 [**筆劃**](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) 集合時，會在 UI 執行緒上引發事件。</span><span class="sxs-lookup"><span data-stu-id="ef279-151">When the InkPicture or InkEdit control updates the [**Ink**](inkdisp-class.md) object or [**Strokes**](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) collection, the event is raised on the UI thread.</span></span>

### <a name="recognition-events"></a><span data-ttu-id="ef279-152">辨識事件</span><span class="sxs-lookup"><span data-stu-id="ef279-152">Recognition Events</span></span>

<span data-ttu-id="ef279-153">辨識事件是在 UI 執行緒或背景辨識執行緒上引發。</span><span class="sxs-lookup"><span data-stu-id="ef279-153">Recognition events are raised on the UI thread or the background recognition thread.</span></span>

-   <span data-ttu-id="ef279-154">[InkEdit](inkedit-control-reference.md)控制項的辨識方法只 [會在 UI](/previous-versions/ms836436(v=msdn.10))執行緒上) 或 [**RecognitionResult**](inkedit-recognitionresult.md) (Automation) 事件，來引發 [**辨識**](/windows/desktop/api/inked/nf-inked-iinkedit-recognize) (受控程式庫。</span><span class="sxs-lookup"><span data-stu-id="ef279-154">The [InkEdit](inkedit-control-reference.md) control's [**Recognize**](/windows/desktop/api/inked/nf-inked-iinkedit-recognize) method raises the [Recognition](/previous-versions/ms836436(v=msdn.10)) (Managed Library only) or [**RecognitionResult**](inkedit-recognitionresult.md) (Automation only) event on the UI thread.</span></span>
-   <span data-ttu-id="ef279-155">[**RecognizerCoNtext**](inkrecognizercontext-class.md)物件的 [**BackgroundRecognize**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-backgroundrecognize)和 [**BackgroundRecognizeWithAlternates**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-backgroundrecognizewithalternates)方法會引發背景辨識執行緒上的 [**辨識和**](inkrecognizercontext-recognition.md) [**RecognitionWithAlternates**](inkrecognizercontext-recognitionwithalternates.md)事件。</span><span class="sxs-lookup"><span data-stu-id="ef279-155">The [**RecognizerContext**](inkrecognizercontext-class.md) object's [**BackgroundRecognize**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-backgroundrecognize) and [**BackgroundRecognizeWithAlternates**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-backgroundrecognizewithalternates) methods raise the [**Recognition**](inkrecognizercontext-recognition.md) and [**RecognitionWithAlternates**](inkrecognizercontext-recognitionwithalternates.md) events on the background recognition thread.</span></span>

### <a name="pen-input-panel-events"></a><span data-ttu-id="ef279-156">畫筆輸入面板事件</span><span class="sxs-lookup"><span data-stu-id="ef279-156">Pen Input Panel Events</span></span>

<span data-ttu-id="ef279-157">[**PenInputPanel**](peninputpanel-class.md) 事件會在建立 **PenInputPanel** 物件的執行緒上引發。</span><span class="sxs-lookup"><span data-stu-id="ef279-157">[**PenInputPanel**](peninputpanel-class.md) events are raised on the thread in which the **PenInputPanel** object is created.</span></span>

## <a name="related-topics"></a><span data-ttu-id="ef279-158">相關主題</span><span class="sxs-lookup"><span data-stu-id="ef279-158">Related topics</span></span>

<dl> <dt>

<span data-ttu-id="ef279-159">[InkCollector. DynamicRendering](/previous-versions/ms836502(v=msdn.10))</span><span class="sxs-lookup"><span data-stu-id="ef279-159">[Microsoft.Ink.InkCollector.DynamicRendering](/previous-versions/ms836502(v=msdn.10))</span></span>
</dt> <dt>

<span data-ttu-id="ef279-160">[DynamicRendering。](/previous-versions/ms833104(v=msdn.10))</span><span class="sxs-lookup"><span data-stu-id="ef279-160">[Microsoft.Ink.InkOverlay.DynamicRendering](/previous-versions/ms833104(v=msdn.10))</span></span>
</dt> <dt>

<span data-ttu-id="ef279-161">[InkPicture. DynamicRendering](/previous-versions/ms582188(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="ef279-161">[Microsoft.Ink.InkPicture.DynamicRendering](/previous-versions/ms582188(v=vs.100))</span></span>
</dt> <dt>

<span data-ttu-id="ef279-162">[InkCollector. AutoRedraw](/previous-versions/ms836495(v=msdn.10))</span><span class="sxs-lookup"><span data-stu-id="ef279-162">[Microsoft.Ink.InkCollector.AutoRedraw](/previous-versions/ms836495(v=msdn.10))</span></span>
</dt> <dt>

<span data-ttu-id="ef279-163">[AutoRedraw。](/previous-versions/ms833082(v=msdn.10))</span><span class="sxs-lookup"><span data-stu-id="ef279-163">[Microsoft.Ink.InkOverlay.AutoRedraw](/previous-versions/ms833082(v=msdn.10))</span></span>
</dt> <dt>

<span data-ttu-id="ef279-164">[InkPicture. AutoRedraw](/previous-versions/ms582180(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="ef279-164">[Microsoft.Ink.InkPicture.AutoRedraw](/previous-versions/ms582180(v=vs.100))</span></span>
</dt> </dl>

 

