---
description: File 資料表包含安裝的所有原始程式檔的完整清單。
ms.assetid: 481fdc45-82db-4128-93de-388562f636e9
title: 排序封包、檔案資料表和媒體資料表中的檔案序號
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 87f64558a570c7184da36feba8aeea6d2a7dc32c0d8add4c6963dece131c4849
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/11/2021
ms.locfileid: "119327864"
---
# <a name="ordering-file-sequence-numbers-in-a-cabinet-file-table-and-media-table"></a>排序封包、檔案資料表和媒體資料表中的檔案序號

[File 資料表](file-table.md)包含安裝的所有原始程式檔的完整清單。 檔案可以儲存在來源媒體上做為個別檔案，或壓縮在封 [包](cabinet-files.md)檔中。 File 資料表之 [順序] 資料行中的序號，以及 [媒體資料表](media-table.md)的 [LastSequence] 欄位，指定檔案的安裝順序，以及每個檔案所在的來源媒體。 媒體資料表中的每一筆記錄都會識別來源磁片，內含序號小於或等於 LastSequence 資料行中所顯示的值，且大於前一個磁片之 LastSequence 值的所有檔案。

例如，假設檔案的 [順序] 資料行中輸入了92的序號。 為了判斷此檔案所在的來源磁片，安裝程式會檢查媒體資料表的記錄是否有最小 LastSequence 值大於92的專案。 DiskId 資料行是媒體資料表的主要索引鍵，而此欄位可唯一識別資料表中的磁片。

Windows Installer 封裝的檔案資料表中可列出的檔案數目上限為32767個檔案。 若要建立包含更多檔案的 Windows Installer 套件，請參閱[撰寫大型封裝](authoring-a-large-package.md)。

封裝作者可以壓縮原始程式檔並將它們包含在封包檔中，以縮減其安裝套件的大小。 來源檔案映射可以是壓縮、未壓縮或混合兩種類型。 如需壓縮和未壓縮來源的詳細資訊，請參閱 [壓縮和未](compressed-and-uncompressed-sources.md)壓縮的來源。 壓縮的來源檔案必須儲存在封包檔中。 封包內的壓縮檔案有自己的內部序號。 這些內部序號的值不需要符合 File 資料表內序號的值。 但是，檔案資料表中指定的檔案順序必須與封包內的實際檔案順序相同。 未壓縮檔案的序號不需要是唯一的。 例如，如果所有檔案都已解壓縮且位於一個磁片上，則檔案資料表中的所有檔案都可以有相同的序號。

媒體資料表描述組成安裝來源媒體的磁片集。 媒體資料表中的第一個專案在 DiskId 欄位中一律必須有1個。 檔案應組織于來源媒體上，讓磁片1上的所有檔案都具有比磁片2上的檔案序號還小的檔案資料表序號，而磁片2上的所有序號都應該小於磁片3的序號，依此類推。 這項需求也適用于同時包含壓縮和未壓縮來源的磁片。 例如，如果安裝的媒體來源位於兩個來源磁片上，而且如果磁片1同時包含未壓縮的檔案和封包檔，則這兩個未壓縮的檔案和封包檔中的檔案都必須小於磁片磁碟機上所儲存之任何檔案的最小檔案序號。 如果磁片1上的所有檔案都壓縮成封包檔，則可以撰寫如下表所示的媒體資料表。

[媒體資料表](media-table.md) (部分) 



| DiskId | LastSequence | DiskPrompt | 內閣   | VolumeLabel |
|--------|--------------|------------|-----------|-------------|
| 1      | 5            | 1          | mycab.cab | 磁片1      |
| 2      | 10           | 2          |           | 磁片2      |



 

如果磁片1上的某些檔案壓縮成封包，有些檔案未壓縮，則可以依照下列方式撰寫媒體資料表。

[媒體資料表](media-table.md) (部分) 



| DiskId | LastSequence | DiskPrompt | 內閣   | VolumeLabel |
|--------|--------------|------------|-----------|-------------|
| 1      | 5            | 1          |           | 磁片1      |
| 2      | 10           | 1          | mycab.cab | 磁片1      |
| 3      | 15           | 2          |           | 磁片2      |



 

請注意，下列媒體資料表中的撰寫不正確，因為它指定磁片2上的一些檔案序號，小於磁片1上的封包中的某些檔案。

[媒體資料表](media-table.md)



| DiskId | LastSequence | DiskPrompt | 內閣   | VolumeLabel |
|--------|--------------|------------|-----------|-------------|
| 1      | 5            | 1          |           | 磁片1      |
| 2      | 10           | 2          |           | 磁片2      |
| 3      | 15           | 1          | mycab.cab | 磁片1      |



 

大型檔案可以分割成兩個或多個封包檔。 在下一個封包檔中，任何一個封包檔中都不能有15個以上的檔案。 例如，如果您有三個封包檔，第一個封包可以有15個檔案跨越第二個封包檔，而第二個封包可以有15個檔案跨越第三封封包檔。 當您針對多個封包的檔案將記錄新增至檔案資料表時，請使用檔案的第一個部分來指定您在 [順序] 資料行中輸入的檔案序號。

如果有三個檔案、兩個封包和兩個磁片，則可以撰寫檔案和媒體資料表，如下所示。 在此範例中，c1.cab 位於 disk1 上，c2.cab 位於 disk2 上。 File f2 會跨越兩個封包。 c1.cab 的封包包含整個 f1 檔案和檔案 f2 的第一個部分。 c2.cab 的封包包含 f2 和整個 f3 檔案的第二部分。

[媒體資料表](media-table.md) (部分) 



| DiskId | LastSequence | DiskPrompt | 內閣 | VolumeLabel |
|--------|--------------|------------|---------|-------------|
| 1      | 5            | 1          | c1.cab  | 磁片1      |
| 2      | 10           | 2          | c2.cab  | 磁片2      |



 

[檔資料表](file-table.md) (部分) 



| 檔案 | 順序 |
|------|----------|
| 按   | 1        |
| 進入   | 2        |
| f3   | 6        |



 

 

 



