---
description: 格式化的資料類型是一種文字字串，可進行處理以解析內嵌的屬性名稱、資料表索引鍵、環境變數參考和其他特殊子字串。
ms.assetid: 7a1bc160-a06c-4d57-b429-e39167893a45
title: 已格式化
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cdd15dca46839b25dbf186d8a741b7a5c37c05f3
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/08/2021
ms.locfileid: "103944549"
---
# <a name="formatted"></a><span data-ttu-id="da7f6-103">已格式化</span><span class="sxs-lookup"><span data-stu-id="da7f6-103">Formatted</span></span>

<span data-ttu-id="da7f6-104">格式化的資料類型是一種文字字串，可進行處理以解析內嵌的屬性名稱、資料表索引鍵、環境變數參考和其他特殊子字串。</span><span class="sxs-lookup"><span data-stu-id="da7f6-104">The Formatted data type is a text string that is processed to resolve embedded property names, table keys, environment variable references, and other special substrings.</span></span> <span data-ttu-id="da7f6-105">下列慣例可辨識為可解析字串：</span><span class="sxs-lookup"><span data-stu-id="da7f6-105">The following conventions are recognized to resolve the string:</span></span>

-   <span data-ttu-id="da7f6-106">括弧 (\[ \]) 或大括弧 ( {} ) 沒有相符的配對會留在文字中。</span><span class="sxs-lookup"><span data-stu-id="da7f6-106">Square brackets (\[ \]) or curly braces ({ }) with no matching pair are left in the text.</span></span>
-   <span data-ttu-id="da7f6-107">如果遇到了格式 propertyname 的子字串 \[  \] ，就會由屬性的值取代。</span><span class="sxs-lookup"><span data-stu-id="da7f6-107">If a substring of the form \[*propertyname*\] is encountered, it is replaced by the value of the property.</span></span> <span data-ttu-id="da7f6-108">如果 *propertyname* 不是有效的屬性名稱，則子字串會解析為空白。</span><span class="sxs-lookup"><span data-stu-id="da7f6-108">If *propertyname* is not a valid property name, then the substring resolves as blank.</span></span> <span data-ttu-id="da7f6-109">例如， [LaunchCondition 資料表](launchcondition-table.md) 的 Description 資料行採用格式化的字串。</span><span class="sxs-lookup"><span data-stu-id="da7f6-109">For example, the Description column of the [LaunchCondition Table](launchcondition-table.md) takes a Formatted string.</span></span> <span data-ttu-id="da7f6-110">如果 ERRORTXT 已設定為「請洽詢您的支援人員」。</span><span class="sxs-lookup"><span data-stu-id="da7f6-110">If ERRORTXT has been set to "Please contact your support personnel."</span></span> <span data-ttu-id="da7f6-111">然後，針對啟動條件失敗所顯示的文字會包含這個字串。</span><span class="sxs-lookup"><span data-stu-id="da7f6-111">then the text displayed for failing the launch condition would include this string.</span></span> <span data-ttu-id="da7f6-112">如果未設定 ERRORTXT，則顯示為啟動狀況失敗的文字會是「系統不符合安裝需求」。</span><span class="sxs-lookup"><span data-stu-id="da7f6-112">If ERRORTXT is not set then the text displayed for failing the launch condition would be just "System does not meet installation requirements."</span></span>

    

    | <span data-ttu-id="da7f6-113">條件</span><span class="sxs-lookup"><span data-stu-id="da7f6-113">Condition</span></span> | <span data-ttu-id="da7f6-114">描述</span><span class="sxs-lookup"><span data-stu-id="da7f6-114">Description</span></span>                                                  |
    |-----------|--------------------------------------------------------------|
    | <span data-ttu-id="da7f6-115">Version9X</span><span class="sxs-lookup"><span data-stu-id="da7f6-115">Version9X</span></span> | <span data-ttu-id="da7f6-116">系統不符合安裝需求。</span><span class="sxs-lookup"><span data-stu-id="da7f6-116">System does not meet installation requirements.</span></span> <span data-ttu-id="da7f6-117">\[ERRORTXT\]</span><span class="sxs-lookup"><span data-stu-id="da7f6-117">\[ERRORTXT\]</span></span> |

    

     

-   <span data-ttu-id="da7f6-118">可以逐一查看方括弧，並從內部解析屬性名稱。例如，假設子字串 \[ \[ PropertyA \] \] 出現在文字中。</span><span class="sxs-lookup"><span data-stu-id="da7f6-118">The square brackets may be iterated and the property names are resolved from inside out. For example, suppose the substring \[\[PropertyA\]\] appears in the text.</span></span> <span data-ttu-id="da7f6-119">首先，會取出屬性 PropertyA 的值。</span><span class="sxs-lookup"><span data-stu-id="da7f6-119">First, the value of property PropertyA is retrieved.</span></span> <span data-ttu-id="da7f6-120">如果此值是有效的屬性名稱（例如 PropertyB），則會抓取 PropertyB 的值，而整個子字串 \[ \[ PropertyA \] \] 會取代為 PropertyB 的值。</span><span class="sxs-lookup"><span data-stu-id="da7f6-120">If the value is a valid property name, such as PropertyB, then the value of PropertyB is retrieved, and the entire substring \[\[PropertyA\]\] is substituted with the value of PropertyB.</span></span> <span data-ttu-id="da7f6-121">如果 PropertyA 不是有效的屬性名稱，或 PropertyA 的值不是有效的屬性名稱，則子字串會空白。</span><span class="sxs-lookup"><span data-stu-id="da7f6-121">If PropertyA is not a valid property name, or if the value of PropertyA is not a valid property name, then the substring is blank.</span></span>
-   <span data-ttu-id="da7f6-122">如果找到 environmentvariable 格式的子字串 \[ %  \] ，則會將環境變數的值取代為子字串。</span><span class="sxs-lookup"><span data-stu-id="da7f6-122">If a substring of the form \[%*environmentvariable*\] is found, the value of the environment variable is substituted for the substring.</span></span>
-   <span data-ttu-id="da7f6-123">如果找到 x 格式的子字串，則會將 \[ \\  \] 它取代為字元 *x* ，其中 *x* 是一個字元，不需要任何進一步的處理。</span><span class="sxs-lookup"><span data-stu-id="da7f6-123">If a substring of the form \[\\*x*\] is found, it is replaced by the character *x* , where *x* is one character, without any further processing.</span></span> <span data-ttu-id="da7f6-124">只保留反斜線之後的第一個字元;所有其他專案都已移除。</span><span class="sxs-lookup"><span data-stu-id="da7f6-124">Only the first character after the backslash is kept; everything else is removed.</span></span> <span data-ttu-id="da7f6-125">例如，若要在) 中包含常值左括弧 (\[ ，請使用 \[ \\ \[ \] 。</span><span class="sxs-lookup"><span data-stu-id="da7f6-125">For example, to include a literal left bracket (\[), use \[\\\[\].</span></span> <span data-ttu-id="da7f6-126">文字 \[ \\ \[ \] 括弧文字會 \[ \\ \] \] 解析成 \[ 括弧文字 \] 。</span><span class="sxs-lookup"><span data-stu-id="da7f6-126">The text \[\\\[\]Bracket Text\[\\\]\] resolves to \[Bracket Text\].</span></span>
-   <span data-ttu-id="da7f6-127">如果子字串以大括弧括住 ( {} ) ，而且未包含以方括弧括住的屬性名稱 (\[ \]) ，則子字串會保持不變，包括大括弧。</span><span class="sxs-lookup"><span data-stu-id="da7f6-127">If a substring is enclosed in curly braces ({ }), and it contains no property names enclosed in square brackets (\[ \]), the substring is left unchanged, including the curly braces.</span></span>
-   <span data-ttu-id="da7f6-128">如果子字串是以大括弧括住 ( {} ) 而且它包含一個或多個以方括弧括住的屬性名稱 (\[ \]) 然後，如果所有的屬性名稱都有效，則會顯示具有已解析之替換 (的文字) ，但不含大括弧。</span><span class="sxs-lookup"><span data-stu-id="da7f6-128">If a substring is enclosed in curly braces ({ }) and it contains one or more property names enclosed in square brackets (\[ \]) then, if all the property names are valid, the text (with the resolved substitutions) is displayed without the curly braces.</span></span>
-   <span data-ttu-id="da7f6-129">如果找到表單的子字串，則會 \[ ~ \] 以 null 字元取代。</span><span class="sxs-lookup"><span data-stu-id="da7f6-129">If a substring of the form \[~\] is found, it is replaced with the null character.</span></span> <span data-ttu-id="da7f6-130">這是用來在登錄 [資料表](registry-table.md)中撰寫 **REG \_ 多重 \_ SZ** 字元字串。</span><span class="sxs-lookup"><span data-stu-id="da7f6-130">This is used to author **REG\_MULTI\_SZ** character strings in the [Registry table](registry-table.md).</span></span> <span data-ttu-id="da7f6-131">請注意，您 \[ ~ \] 也可以使用[環境資料表](environment-table.md)，將值附加至環境變數或將其前置詞。</span><span class="sxs-lookup"><span data-stu-id="da7f6-131">Note that \[~\] is also used to append or prefix values to environment variables using the [Environment table](environment-table.md).</span></span>
-   <span data-ttu-id="da7f6-132">如果找到 filekey 格式的子字串，則會以檔案的 \[ \#  \] 完整路徑來取代它，而值 *filekey* 會用來做為檔案 [資料表](file-table.md)中的索引鍵。</span><span class="sxs-lookup"><span data-stu-id="da7f6-132">If a substring of the form \[\#*filekey*\] is found, it is replaced by the full path of the file, with the value *filekey* used as a key into the [File table](file-table.md).</span></span> <span data-ttu-id="da7f6-133">Filekey 的值 \[ \#  \] 會保持空白，而且在安裝程式執行[CostInitialize 動作](costinitialize-action.md)、 [FileCost 動作](filecost-action.md)和[CostFinalize 動作](costfinalize-action.md)之前，不會由路徑取代。</span><span class="sxs-lookup"><span data-stu-id="da7f6-133">The value of \[\#*filekey*\] remains blank and is not replaced by a path until the installer runs the [CostInitialize action](costinitialize-action.md), [FileCost action](filecost-action.md), and [CostFinalize action](costfinalize-action.md).</span></span> <span data-ttu-id="da7f6-134">Filekey 的值 \[ \#  \] 取決於檔案所屬元件的安裝狀態。</span><span class="sxs-lookup"><span data-stu-id="da7f6-134">The value of \[\#*filekey*\] depends upon the installation state of the component to which the file belongs.</span></span> <span data-ttu-id="da7f6-135">如果元件是從來源執行，則此值為檔案來源位置的路徑。</span><span class="sxs-lookup"><span data-stu-id="da7f6-135">If the component is run from the source, the value is the path to the source location of the file.</span></span> <span data-ttu-id="da7f6-136">如果元件是在本機執行，則此值是安裝之後檔案目標位置的路徑。</span><span class="sxs-lookup"><span data-stu-id="da7f6-136">If the component is run locally, the value is the path to the target location of the file after installation.</span></span> <span data-ttu-id="da7f6-137">如果元件的動作狀態為 [不存在]，則會使用元件的已安裝狀態來決定 \[ \) 。</span><span class="sxs-lookup"><span data-stu-id="da7f6-137">If the component has an action state of absent, the installed state of the component is used to determine the \[\).</span></span>
-   <span data-ttu-id="da7f6-138">如果找到 componentkey 格式的子字串 \[ $  \] ，就會由元件的安裝目錄取代，並以值 *componentkey* 做為 [元件資料表](component-table.md)中的索引鍵。</span><span class="sxs-lookup"><span data-stu-id="da7f6-138">If a substring of the form \[$*componentkey*\] is found, it is replaced by the install directory of the component, with the value *componentkey* used as a key into the [Component table](component-table.md).</span></span> <span data-ttu-id="da7f6-139">Componentkey 的值 \[ $  \] 會保持空白，而且在安裝程式執行[CostInitialize 動作](costinitialize-action.md)、 [FileCost 動作](filecost-action.md)和[CostFinalize 動作](costfinalize-action.md)之前，不會以目錄取代。</span><span class="sxs-lookup"><span data-stu-id="da7f6-139">The value of \[$*componentkey*\] remains blank and is not replaced by a directory until the installer runs the [CostInitialize action](costinitialize-action.md), [FileCost action](filecost-action.md), and [CostFinalize action](costfinalize-action.md).</span></span> <span data-ttu-id="da7f6-140">Componentkey 的值 \[ $  \] 取決於元件的安裝狀態及其發生位置。</span><span class="sxs-lookup"><span data-stu-id="da7f6-140">The value of \[$*componentkey*\] depends upon the installation state of the component and where it occurs.</span></span> <span data-ttu-id="da7f6-141">在登錄 [資料表](registry-table.md)的 [值] 資料行中，這個子字串可能會參考此元件的動作狀態或要求的動作狀態。</span><span class="sxs-lookup"><span data-stu-id="da7f6-141">In the Value column of the [Registry Table](registry-table.md), this substring may refer to the action state or the requested action state of the component.</span></span> <span data-ttu-id="da7f6-142">在其他所有情況下，這個子字串是指元件的動作狀態。</span><span class="sxs-lookup"><span data-stu-id="da7f6-142">In all other cases, this substring refers to the action state of the component.</span></span> <span data-ttu-id="da7f6-143">例如，如果元件是從來源執行，則此值為檔案的來原始目錄。</span><span class="sxs-lookup"><span data-stu-id="da7f6-143">For example, if the component is run from the source, the value is the source directory of the file.</span></span> <span data-ttu-id="da7f6-144">如果元件是在本機執行，則在安裝之後，此值會是目標目錄。</span><span class="sxs-lookup"><span data-stu-id="da7f6-144">If the component is run locally, the value is the target directory after installation.</span></span> <span data-ttu-id="da7f6-145">如果元件不存在，此值會保留空白。</span><span class="sxs-lookup"><span data-stu-id="da7f6-145">If the component is absent, the value is left blank.</span></span> <span data-ttu-id="da7f6-146">Windows Installer 追蹤元件的動作和要求的安裝狀態。</span><span class="sxs-lookup"><span data-stu-id="da7f6-146">Windows Installer tracks both the action and requested installation states of components.</span></span> <span data-ttu-id="da7f6-147">例如，如果已安裝元件，它可能會有本機的要求狀態，以及 null 的動作狀態。</span><span class="sxs-lookup"><span data-stu-id="da7f6-147">For example, if a component is already installed, it may have a requested state of local and an action state of null.</span></span> <span data-ttu-id="da7f6-148">如需有關檢查元件安裝狀態的詳細資訊，請參閱 [檢查功能、元件、](checking-the-installation-of-features-components-files.md)檔案的安裝。</span><span class="sxs-lookup"><span data-stu-id="da7f6-148">For more information about checking the installation state of components, see [Checking the Installation of Features, Components, Files](checking-the-installation-of-features-components-files.md).</span></span>
-   <span data-ttu-id="da7f6-149">請注意，如果元件已安裝，且未在目前安裝期間重新安裝、移除或移動，則元件的動作狀態為 null，且字串 \[ $ *componentkey* 會 \] 評估為 null。</span><span class="sxs-lookup"><span data-stu-id="da7f6-149">Note that if a component is already installed, and is not reinstalled, removed, or moved during the current installation, the action state of the component is null and the string \[$*componentkey*\] evaluates to Null.</span></span>
-   <span data-ttu-id="da7f6-150">如果表單的子字串 \[ ！*filekey* \] 找到，它會取代為檔案的完整短路徑，而值 *filekey* 會用來做為檔案 [資料表](file-table.md)中的索引鍵。</span><span class="sxs-lookup"><span data-stu-id="da7f6-150">If a substring of the form \[!*filekey*\] is found, it is replaced by the full short path of the file, with the value *filekey* used as a key into the [File table](file-table.md).</span></span>

    <span data-ttu-id="da7f6-151">只有在登錄或 IniFile 資料表的 Value 資料行中使用此語法時，此語法才有效。</span><span class="sxs-lookup"><span data-stu-id="da7f6-151">This syntax is valid only when used in the Value column of the Registry or the IniFile tables.</span></span> <span data-ttu-id="da7f6-152">在其他資料行中使用時，此語法會視為與 \[ \# *filekey* 相同 \] 。</span><span class="sxs-lookup"><span data-stu-id="da7f6-152">When used in other columns this syntax is treated the same as \[\#*filekey*\] .</span></span>

 

 



