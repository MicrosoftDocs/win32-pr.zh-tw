---
description: 媒體接收器是接收媒體資料的管線物件。
ms.assetid: a0fbce1b-0a16-4449-9eca-906fd9056a1c
title: 媒體接收器
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e9394cbfd49a631d59b9296202a2b6ca7a868869
ms.sourcegitcommit: c16214e53680dc71d1c07111b51f72b82a4512d8
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 03/03/2021
ms.locfileid: "104321475"
---
# <a name="media-sinks"></a><span data-ttu-id="24be6-103">媒體接收器</span><span class="sxs-lookup"><span data-stu-id="24be6-103">Media Sinks</span></span>

<span data-ttu-id="24be6-104">*媒體接收器* 是接收媒體資料的管線物件。</span><span class="sxs-lookup"><span data-stu-id="24be6-104">*Media sinks* are the pipeline objects that receive media data.</span></span> <span data-ttu-id="24be6-105">媒體接收器是一或多個媒體資料流程的目的地。</span><span class="sxs-lookup"><span data-stu-id="24be6-105">A media sink is the destination for one or more media streams.</span></span> <span data-ttu-id="24be6-106">媒體接收器分為兩個一般類別：</span><span class="sxs-lookup"><span data-stu-id="24be6-106">Media sinks fall into two general categories:</span></span>

-   <span data-ttu-id="24be6-107">轉譯 *器是顯示* 播放資料的媒體接收器。</span><span class="sxs-lookup"><span data-stu-id="24be6-107">A *renderer* is a media sink that presents data for playback.</span></span> <span data-ttu-id="24be6-108">增強型影片轉譯器 (EVR) 會顯示影片畫面，而音訊轉譯器會透過音效卡或其他音訊裝置播放音訊串流。</span><span class="sxs-lookup"><span data-stu-id="24be6-108">The enhanced video renderer (EVR) displays video frames, and the audio renderer plays audio streams through the sound card or other audio device.</span></span>

-   <span data-ttu-id="24be6-109">*保存接收器* 是將資料寫入檔案或其他儲存體的媒體接收器。</span><span class="sxs-lookup"><span data-stu-id="24be6-109">An *archive sink* is a media sink that writes data to a file or other storage.</span></span>

<span data-ttu-id="24be6-110">兩者之間的主要差異在於，封存接收不會以固定的播放速率取用資料。</span><span class="sxs-lookup"><span data-stu-id="24be6-110">The main difference between them is that an archive sink does not consume the data at a fixed playback rate.</span></span> <span data-ttu-id="24be6-111">相反地，它會以最快的速度來寫入所收到的資料。</span><span class="sxs-lookup"><span data-stu-id="24be6-111">Instead, it writes the data that it receives as quickly as possible.</span></span>

<span data-ttu-id="24be6-112">媒體接收器會公開 [**IMFMediaSink**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasink) 介面。</span><span class="sxs-lookup"><span data-stu-id="24be6-112">Media sinks expose the [**IMFMediaSink**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasink) interface.</span></span> <span data-ttu-id="24be6-113">每個媒體接收都包含一或多個 *串流接收器*。</span><span class="sxs-lookup"><span data-stu-id="24be6-113">Each media sink contains one or more *stream sinks*.</span></span> <span data-ttu-id="24be6-114">每個資料流程接收都會接收一個資料流程中的資料。</span><span class="sxs-lookup"><span data-stu-id="24be6-114">Each stream sink receives the data from one stream.</span></span> <span data-ttu-id="24be6-115">資料流程接收會公開 [**IMFStreamSink**](/windows/desktop/api/mfidl/nn-mfidl-imfstreamsink) 介面。</span><span class="sxs-lookup"><span data-stu-id="24be6-115">Stream sinks expose the [**IMFStreamSink**](/windows/desktop/api/mfidl/nn-mfidl-imfstreamsink) interface.</span></span> <span data-ttu-id="24be6-116">一般來說，應用程式不會直接建立媒體接收器。</span><span class="sxs-lookup"><span data-stu-id="24be6-116">Typically an application does not create media sinks directly.</span></span> <span data-ttu-id="24be6-117">相反地，應用程式會建立一個或多個啟用物件，媒體會話會使用這些物件來建立接收器。</span><span class="sxs-lookup"><span data-stu-id="24be6-117">Instead, the application creates one or more activation objects, which the Media Session uses to create the sink.</span></span> <span data-ttu-id="24be6-118">接收上的所有其他作業都是由媒體會話處理，而應用程式不會呼叫媒體接收或任何資料流程接收上的任何方法。</span><span class="sxs-lookup"><span data-stu-id="24be6-118">All other operations on the sink are handled by the Media Session, and the application does not call any methods on the media sink or any of the stream sinks.</span></span> <span data-ttu-id="24be6-119">如需啟用物件的詳細資訊，請參閱 [啟用物件](activation-objects.md)。</span><span class="sxs-lookup"><span data-stu-id="24be6-119">For more information about activation objects, see [Activation Objects](activation-objects.md).</span></span>

<span data-ttu-id="24be6-120">如果您要撰寫自訂媒體接收，或是想要直接使用媒體接收器而不使用媒體會話，請閱讀本主題的其餘部分。</span><span class="sxs-lookup"><span data-stu-id="24be6-120">You should read the remainder of this topic if you are writing a custom media sink, or if you want to use a media sink directly without the Media Session.</span></span>

-   [<span data-ttu-id="24be6-121">串流接收器</span><span class="sxs-lookup"><span data-stu-id="24be6-121">Stream Sinks</span></span>](#stream-sinks)
-   [<span data-ttu-id="24be6-122">簡報時鐘</span><span class="sxs-lookup"><span data-stu-id="24be6-122">Presentation Clock</span></span>](#presentation-clock)
-   [<span data-ttu-id="24be6-123">資料流程格式</span><span class="sxs-lookup"><span data-stu-id="24be6-123">Stream Formats</span></span>](#stream-formats)
-   [<span data-ttu-id="24be6-124">資料流程</span><span class="sxs-lookup"><span data-stu-id="24be6-124">Data Flow</span></span>](#data-flow)
-   [<span data-ttu-id="24be6-125">標記</span><span class="sxs-lookup"><span data-stu-id="24be6-125">Markers</span></span>](#markers)
-   [<span data-ttu-id="24be6-126">狀態變更</span><span class="sxs-lookup"><span data-stu-id="24be6-126">State Changes</span></span>](#state-changes)
-   [<span data-ttu-id="24be6-127">敲定</span><span class="sxs-lookup"><span data-stu-id="24be6-127">Finalizing</span></span>](#finalizing)
-   [<span data-ttu-id="24be6-128">關閉</span><span class="sxs-lookup"><span data-stu-id="24be6-128">Shutting Down</span></span>](#shutting-down)
-   [<span data-ttu-id="24be6-129">媒體接收器介面</span><span class="sxs-lookup"><span data-stu-id="24be6-129">Media Sink Interfaces</span></span>](#media-sink-interfaces)
-   [<span data-ttu-id="24be6-130">資料流程接收介面</span><span class="sxs-lookup"><span data-stu-id="24be6-130">Stream Sink Interfaces</span></span>](#stream-sink-interfaces)
-   [<span data-ttu-id="24be6-131">資料流程接收事件</span><span class="sxs-lookup"><span data-stu-id="24be6-131">Stream Sink Events</span></span>](#stream-sink-events)
-   [<span data-ttu-id="24be6-132">相關主題</span><span class="sxs-lookup"><span data-stu-id="24be6-132">Related topics</span></span>](#related-topics)

## <a name="stream-sinks"></a><span data-ttu-id="24be6-133">串流接收器</span><span class="sxs-lookup"><span data-stu-id="24be6-133">Stream Sinks</span></span>

<span data-ttu-id="24be6-134">媒體接收器可以有固定數目的資料流程接收器，也可以支援新增和移除資料流程接收。</span><span class="sxs-lookup"><span data-stu-id="24be6-134">A media sink can have a fixed number of stream sinks, or it can support adding and removing stream sinks.</span></span> <span data-ttu-id="24be6-135">如果有固定的資料流程接收數目， [**IMFMediaSink：： GetCharacteristics**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getcharacteristics) 方法會傳回 MEDIASINK \_ 固定 \_ 資料流程旗標。</span><span class="sxs-lookup"><span data-stu-id="24be6-135">If it has a fixed number of stream sinks, the [**IMFMediaSink::GetCharacteristics**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getcharacteristics) method returns the MEDIASINK\_FIXED\_STREAMS flag.</span></span> <span data-ttu-id="24be6-136">否則，您可以新增和移除資料流程接收。</span><span class="sxs-lookup"><span data-stu-id="24be6-136">Otherwise, you can add and remove stream sinks.</span></span> <span data-ttu-id="24be6-137">若要加入新的資料流程接收，請呼叫 [**IMFMediaSink：： AddStreamSink**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-addstreamsink)。</span><span class="sxs-lookup"><span data-stu-id="24be6-137">To add a new stream sink, call [**IMFMediaSink::AddStreamSink**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-addstreamsink).</span></span> <span data-ttu-id="24be6-138">若要移除資料流程接收，請呼叫 [**IMFMediaSink：： RemoveStreamSink**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-removestreamsink)。</span><span class="sxs-lookup"><span data-stu-id="24be6-138">To remove a stream sink, call [**IMFMediaSink::RemoveStreamSink**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-removestreamsink).</span></span> <span data-ttu-id="24be6-139">MEDIASINK \_ 固定 \_ 資料流程旗標表示媒體接收器不支援這兩種方法。</span><span class="sxs-lookup"><span data-stu-id="24be6-139">The MEDIASINK\_FIXED\_STREAMS flag indicates that the media sink does not support these two methods.</span></span> <span data-ttu-id="24be6-140"> (它可能會支援一些其他方式來設定資料流程的數目，例如，在建立接收器時設定初始化參數。 ) 資料流程接收清單的順序。</span><span class="sxs-lookup"><span data-stu-id="24be6-140">(It might support some other way to configure the number of streams, for example by setting initialization parameters when the sink is created.) The list of stream sinks is ordered.</span></span> <span data-ttu-id="24be6-141">若要依索引值列舉它們，請呼叫 [**IMFMediaSink：： GetStreamSinkByIndex**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getstreamsinkbyindex) 方法。</span><span class="sxs-lookup"><span data-stu-id="24be6-141">To enumerate them by index value, call the [**IMFMediaSink::GetStreamSinkByIndex**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getstreamsinkbyindex) method.</span></span>

<span data-ttu-id="24be6-142">資料流程接收也有識別碼。</span><span class="sxs-lookup"><span data-stu-id="24be6-142">Stream sinks also have identifiers.</span></span> <span data-ttu-id="24be6-143">串流識別碼在媒體接收器中是唯一的，但不需要連續。</span><span class="sxs-lookup"><span data-stu-id="24be6-143">Stream identifiers are unique within the media sink, but do not have to be consecutive.</span></span> <span data-ttu-id="24be6-144">根據媒體接收，資料流程識別碼可能會有一些與內容相關的意義。</span><span class="sxs-lookup"><span data-stu-id="24be6-144">Depending on the media sink, the stream identifiers might have some meaning that is related to the content.</span></span> <span data-ttu-id="24be6-145">例如，封存接收可能會將串流識別碼寫入檔案標頭。</span><span class="sxs-lookup"><span data-stu-id="24be6-145">For example, an archive sink might write the stream identifiers into the file header.</span></span> <span data-ttu-id="24be6-146">否則，它們是任意的。</span><span class="sxs-lookup"><span data-stu-id="24be6-146">Otherwise, they are arbitrary.</span></span> <span data-ttu-id="24be6-147">若要依識別碼取得資料流程接收，請呼叫 [**IMFMediaSink：： GetStreamSinkById**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getstreamsinkbyid)。</span><span class="sxs-lookup"><span data-stu-id="24be6-147">To get a stream sink by its identifier, call [**IMFMediaSink::GetStreamSinkById**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getstreamsinkbyid).</span></span>

## <a name="presentation-clock"></a><span data-ttu-id="24be6-148">簡報時鐘</span><span class="sxs-lookup"><span data-stu-id="24be6-148">Presentation Clock</span></span>

<span data-ttu-id="24be6-149">媒體接收器取用樣本的速率是由 [呈現時鐘](presentation-clock.md)來控制。</span><span class="sxs-lookup"><span data-stu-id="24be6-149">The rate at which a media sink consumes samples is controlled by the [Presentation Clock](presentation-clock.md).</span></span> <span data-ttu-id="24be6-150">媒體會話會透過呼叫媒體接收器的 [**IMFMediaSink：： SetPresentationClock**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-setpresentationclock) 方法，來選取簡報時鐘，並在媒體接收器上設定它。</span><span class="sxs-lookup"><span data-stu-id="24be6-150">The Media Session selects the presentation clock and sets it on the media sink by calling the media sink's [**IMFMediaSink::SetPresentationClock**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-setpresentationclock) method.</span></span> <span data-ttu-id="24be6-151">您必須在媒體接收器上設定簡報時鐘，才能開始串流。</span><span class="sxs-lookup"><span data-stu-id="24be6-151">The presentation clock must be set on the media sink before streaming can begin.</span></span> <span data-ttu-id="24be6-152">每個媒體接收器都需要簡報時鐘才能執行。</span><span class="sxs-lookup"><span data-stu-id="24be6-152">Every media sink requires a presentation clock to run.</span></span> <span data-ttu-id="24be6-153">媒體接收器會使用簡報時鐘進行兩個用途：</span><span class="sxs-lookup"><span data-stu-id="24be6-153">The media sink uses the presentation clock for two purposes:</span></span>

-   <span data-ttu-id="24be6-154">在串流啟動或停止時接收通知。</span><span class="sxs-lookup"><span data-stu-id="24be6-154">To receive notifications when streaming starts or stops.</span></span> <span data-ttu-id="24be6-155">媒體接收器會透過 [**IMFClockStateSink**](/windows/desktop/api/mfidl/nn-mfidl-imfclockstatesink) 介面接收這些通知，所有媒體接收都必須執行這些通知。</span><span class="sxs-lookup"><span data-stu-id="24be6-155">The media sink receives these notifications through the [**IMFClockStateSink**](/windows/desktop/api/mfidl/nn-mfidl-imfclockstatesink) interface, which all media sinks must implement.</span></span>

-   <span data-ttu-id="24be6-156">判斷它應該呈現範例的時機。</span><span class="sxs-lookup"><span data-stu-id="24be6-156">To determine when it should render samples.</span></span> <span data-ttu-id="24be6-157">當媒體接收器收到新的範例時，它會從範例取得時間戳記，並嘗試在該呈現時間轉譯樣本。</span><span class="sxs-lookup"><span data-stu-id="24be6-157">When the media sink receives a new sample, it gets the time stamp from the sample and tries to render the sample at that presentation time.</span></span>

<span data-ttu-id="24be6-158">簡報時鐘衍生自另一個物件（稱為「 *展示時間來源*」）的時鐘時間。</span><span class="sxs-lookup"><span data-stu-id="24be6-158">The presentation clock derives its clock times from another object called the *presentation time source*.</span></span> <span data-ttu-id="24be6-159">展示時間來源會公開 [**IMFPresentationTimeSource**](/windows/desktop/api/mfidl/nn-mfidl-imfpresentationtimesource) 介面。</span><span class="sxs-lookup"><span data-stu-id="24be6-159">Presentation time sources expose the [**IMFPresentationTimeSource**](/windows/desktop/api/mfidl/nn-mfidl-imfpresentationtimesource) interface.</span></span> <span data-ttu-id="24be6-160">有些媒體接收器可以存取精確的時鐘，因此會公開此介面。</span><span class="sxs-lookup"><span data-stu-id="24be6-160">Some media sinks have access to an accurate clock, so they expose this interface.</span></span> <span data-ttu-id="24be6-161">這表示媒體接收器可能會根據自己的時鐘所提供的時間來排定樣本。</span><span class="sxs-lookup"><span data-stu-id="24be6-161">This means that a media sink might schedule samples against a time provided by its own clock.</span></span> <span data-ttu-id="24be6-162">不過，媒體接收器無法假設這是如此。</span><span class="sxs-lookup"><span data-stu-id="24be6-162">However, the media sink cannot assume this to be the case.</span></span> <span data-ttu-id="24be6-163">無論呈現時鐘是由媒體接收器本身或其他時鐘驅動，都必須一律使用呈現時鐘的時間。</span><span class="sxs-lookup"><span data-stu-id="24be6-163">It must always use the time from the presentation clock, regardless of whether the presentation clock is driven by the media sink itself, or by some other clock.</span></span>

<span data-ttu-id="24be6-164">如果媒體接收器無法以其本身的時鐘來比對速率，則 [**GetCharacteristics**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getcharacteristics) 方法會傳回 MEDIASINK \_ 不 \_ 符合 \_ 時鐘旗標。</span><span class="sxs-lookup"><span data-stu-id="24be6-164">If a media sink cannot match rates with a clock other than its own, the [**GetCharacteristics**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getcharacteristics) method returns the MEDIASINK\_CANNOT\_MATCH\_CLOCK flag.</span></span> <span data-ttu-id="24be6-165">如果出現此旗標，且簡報時鐘使用不同的呈現時間來源，則媒體接收器的執行效能可能不佳。</span><span class="sxs-lookup"><span data-stu-id="24be6-165">If this flag is present and the presentation clock uses a different presentation time source, the media sink is likely to perform poorly.</span></span> <span data-ttu-id="24be6-166">例如，播放期間可能會有問題。</span><span class="sxs-lookup"><span data-stu-id="24be6-166">For example, it might glitch during playback.</span></span>

<span data-ttu-id="24be6-167">*Rateless* 接收是一個媒體接收，會忽略樣本上的時間戳記，並在每個範例抵達時立即取用資料。</span><span class="sxs-lookup"><span data-stu-id="24be6-167">A *rateless* sink is a media sink that ignores the time stamps on samples and consumes data as soon as each sample arrives.</span></span> <span data-ttu-id="24be6-168">Rateless 媒體接收器會傳回 \_ [**GetCharacteristics**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getcharacteristics) 方法中的 MEDIASINK rateless 旗標。</span><span class="sxs-lookup"><span data-stu-id="24be6-168">A rateless media sink returns the MEDIASINK\_RATELESS flag from the [**GetCharacteristics**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getcharacteristics) method.</span></span> <span data-ttu-id="24be6-169">此旗標通常會套用至封存接收。</span><span class="sxs-lookup"><span data-stu-id="24be6-169">Typically this flag applies to archive sinks.</span></span> <span data-ttu-id="24be6-170">如果管線中的每個媒體接收器都 rateless，媒體會話就會使用特殊的 rateless 呈現頻率。</span><span class="sxs-lookup"><span data-stu-id="24be6-170">If every media sink in the pipeline is rateless, the Media Session uses a special rateless presentation clock.</span></span> <span data-ttu-id="24be6-171">當接收取用樣本時，此時鐘的執行速度很快。</span><span class="sxs-lookup"><span data-stu-id="24be6-171">This clock runs as quickly as the sinks consume samples.</span></span>

## <a name="stream-formats"></a><span data-ttu-id="24be6-172">資料流程格式</span><span class="sxs-lookup"><span data-stu-id="24be6-172">Stream Formats</span></span>

<span data-ttu-id="24be6-173">在媒體接收器可以接收範例之前，用戶端必須先設定資料流程接收上的媒體類型。</span><span class="sxs-lookup"><span data-stu-id="24be6-173">Before the media sink can receive samples, the client must set the media type on the stream sinks.</span></span> <span data-ttu-id="24be6-174">若要設定媒體類型，請呼叫串流接收器的 [**IMFStreamSink：： GetMediaTypeHandler**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-getmediatypehandler) 方法。</span><span class="sxs-lookup"><span data-stu-id="24be6-174">To set the media type, call the stream sink's [**IMFStreamSink::GetMediaTypeHandler**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-getmediatypehandler) method.</span></span> <span data-ttu-id="24be6-175">這個方法會傳回 [**IMFMediaTypeHandler**](/windows/desktop/api/mfidl/nn-mfidl-imfmediatypehandler) 介面的指標。</span><span class="sxs-lookup"><span data-stu-id="24be6-175">This method returns a pointer to the [**IMFMediaTypeHandler**](/windows/desktop/api/mfidl/nn-mfidl-imfmediatypehandler) interface.</span></span> <span data-ttu-id="24be6-176">您可以使用此介面來取得慣用媒體類型的清單、取得目前的媒體類型，以及設定媒體類型。</span><span class="sxs-lookup"><span data-stu-id="24be6-176">Use this interface to get the list of preferred media types, get the current media type, and set the media type.</span></span>

<span data-ttu-id="24be6-177">若要取得慣用媒體類型的清單，請呼叫 [**IMFMediaTypeHandler：： GetMediaTypeByIndex**](/windows/desktop/api/mfidl/nf-mfidl-imfmediatypehandler-getmediatypebyindex)。</span><span class="sxs-lookup"><span data-stu-id="24be6-177">To get the list of preferred media types, call [**IMFMediaTypeHandler::GetMediaTypeByIndex**](/windows/desktop/api/mfidl/nf-mfidl-imfmediatypehandler-getmediatypebyindex).</span></span> <span data-ttu-id="24be6-178">慣用的型別應做為用戶端的提示。</span><span class="sxs-lookup"><span data-stu-id="24be6-178">The preferred types should be taken as a hint to the client.</span></span> <span data-ttu-id="24be6-179">清單可能不完整或包含部分媒體類型。</span><span class="sxs-lookup"><span data-stu-id="24be6-179">The list might be incomplete or include partial media types.</span></span> <span data-ttu-id="24be6-180">部分媒體類型是指沒有描述有效格式所需的所有屬性。</span><span class="sxs-lookup"><span data-stu-id="24be6-180">A partial media type is one that does not have all of the attributes needed to describe a valid format.</span></span> <span data-ttu-id="24be6-181">例如，部分影片類型可能會指定色彩空間和位深度，而不是影像寬度或高度。</span><span class="sxs-lookup"><span data-stu-id="24be6-181">For example, a partial video type might specify the color space and bit depth but not the image width or height.</span></span> <span data-ttu-id="24be6-182">部分音訊類型可能會指定壓縮格式和取樣率，但不能指定音訊聲道數目。</span><span class="sxs-lookup"><span data-stu-id="24be6-182">A partial audio type might specify the compression format and the sample rate but not the number of audio channels.</span></span>

<span data-ttu-id="24be6-183">若要取得資料流程接收器目前的媒體類型，請呼叫 [**IMFMediaTypeHandler：： GetCurrentMediaType**](/windows/desktop/api/mfidl/nf-mfidl-imfmediatypehandler-getcurrentmediatype)。</span><span class="sxs-lookup"><span data-stu-id="24be6-183">To get the stream sink's current media type, call [**IMFMediaTypeHandler::GetCurrentMediaType**](/windows/desktop/api/mfidl/nf-mfidl-imfmediatypehandler-getcurrentmediatype).</span></span> <span data-ttu-id="24be6-184">第一次建立資料流程接收時，可能會有已設定的預設媒體類型，或在用戶端設定一個之前，它可能沒有任何媒體類型。</span><span class="sxs-lookup"><span data-stu-id="24be6-184">When a stream sink is first created, it might have a default media type already set, or it might have no media type until the client sets one.</span></span>

<span data-ttu-id="24be6-185">若要設定媒體類型，請呼叫 [**IMFMediaTypeHandler：： SetCurrentMediaType**](/windows/desktop/api/mfidl/nf-mfidl-imfmediatypehandler-setcurrentmediatype)。</span><span class="sxs-lookup"><span data-stu-id="24be6-185">To set the media type, call [**IMFMediaTypeHandler::SetCurrentMediaType**](/windows/desktop/api/mfidl/nf-mfidl-imfmediatypehandler-setcurrentmediatype).</span></span> <span data-ttu-id="24be6-186">某些資料流程接收可能不支援在設定之後變更類型。</span><span class="sxs-lookup"><span data-stu-id="24be6-186">Some stream sinks might not support changing the type after is has been set.</span></span> <span data-ttu-id="24be6-187">因此，在設定媒體類型之前先測試它很有用。</span><span class="sxs-lookup"><span data-stu-id="24be6-187">Therefore, it useful to test media types before setting them.</span></span> <span data-ttu-id="24be6-188">若要測試媒體接收器是否接受媒體類型， (不將類型設定) ，請呼叫 [**IMFMediaTypeHandler：： IsMediaTypeSupported**](/windows/desktop/api/mfidl/nf-mfidl-imfmediatypehandler-ismediatypesupported)。</span><span class="sxs-lookup"><span data-stu-id="24be6-188">To test whether the media sink will accept a media type, (without setting the type), call [**IMFMediaTypeHandler::IsMediaTypeSupported**](/windows/desktop/api/mfidl/nf-mfidl-imfmediatypehandler-ismediatypesupported).</span></span>

## <a name="data-flow"></a><span data-ttu-id="24be6-189">資料流程</span><span class="sxs-lookup"><span data-stu-id="24be6-189">Data Flow</span></span>

<span data-ttu-id="24be6-190">媒體接收器使用 *提取模型*，這表示資料流程會在需要時接收資料。</span><span class="sxs-lookup"><span data-stu-id="24be6-190">Media sinks use a *pull model*, which means that the stream sinks request data as they need it.</span></span> <span data-ttu-id="24be6-191">用戶端應該及時回應，以避免任何瑕疵。</span><span class="sxs-lookup"><span data-stu-id="24be6-191">The client should respond in a timely manner to avoid any glitching.</span></span>

<span data-ttu-id="24be6-192">有些媒體接收器支援 *prerolling*。</span><span class="sxs-lookup"><span data-stu-id="24be6-192">Some media sinks support *prerolling*.</span></span> <span data-ttu-id="24be6-193">Prerolling 是在簡報時鐘開始之前，將資料提供給媒體接收器的程式。</span><span class="sxs-lookup"><span data-stu-id="24be6-193">Prerolling is the process of giving data to the media sink before the presentation clock starts.</span></span> <span data-ttu-id="24be6-194">如果媒體接收器支援 prerolling，則媒體接收器會公開 [**IMFMediaSinkPreroll**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasinkpreroll) 介面，而 [**GetCharacteristics**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getcharacteristics) 方法會傳回 MEDIASINK 可以預先建立 \_ 旗標 \_ 。</span><span class="sxs-lookup"><span data-stu-id="24be6-194">If a media sink supports prerolling, the media sink exposes the [**IMFMediaSinkPreroll**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasinkpreroll) interface, and the [**GetCharacteristics**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getcharacteristics) method returns the MEDIASINK\_CAN\_PREROLL flag.</span></span> <span data-ttu-id="24be6-195">Prerolling 可確保媒體接收器準備好在簡報時鐘開始時顯示第一個範例。</span><span class="sxs-lookup"><span data-stu-id="24be6-195">Prerolling ensures that the media sink is ready to present the first sample when the presentation clock starts.</span></span> <span data-ttu-id="24be6-196">如果媒體接收器支援，則建議用戶端一律為預先執行，因為它可能會在播放期間防止瑕疵或間距。</span><span class="sxs-lookup"><span data-stu-id="24be6-196">It is recommended that the client always preroll if the media sink supports it, because it can prevent glitching or gaps during playback.</span></span>

<span data-ttu-id="24be6-197">傳送至媒體接收器的資料流程如下所示：</span><span class="sxs-lookup"><span data-stu-id="24be6-197">Data flow to a media sink works as follows:</span></span>

1.  <span data-ttu-id="24be6-198">用戶端會設定媒體類型和表示時鐘。</span><span class="sxs-lookup"><span data-stu-id="24be6-198">The client sets the media types and the presentation clock.</span></span> <span data-ttu-id="24be6-199">媒體接收器會向簡報時鐘註冊本身，以接收時鐘狀態變更的通知。</span><span class="sxs-lookup"><span data-stu-id="24be6-199">The media sink registers itself with the presentation clock to receive notifications about clock state changes.</span></span>
2.  <span data-ttu-id="24be6-200">（選擇性）用戶端查詢 [**IMFMediaSinkPreroll**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasinkpreroll)。</span><span class="sxs-lookup"><span data-stu-id="24be6-200">Optionally, the client queries for [**IMFMediaSinkPreroll**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasinkpreroll).</span></span> <span data-ttu-id="24be6-201">如果媒體接收器公開此介面，用戶端會呼叫 [**IMFMediaSinkPreroll：： NotifyPreroll**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasinkpreroll-notifypreroll)。</span><span class="sxs-lookup"><span data-stu-id="24be6-201">If the media sink exposes this interface, the client calls [**IMFMediaSinkPreroll::NotifyPreroll**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasinkpreroll-notifypreroll).</span></span> <span data-ttu-id="24be6-202">否則，用戶端會跳到步驟5。</span><span class="sxs-lookup"><span data-stu-id="24be6-202">Otherwise, the client skips to step 5.</span></span>
3.  <span data-ttu-id="24be6-203">每個資料流程接收都會傳送一個或多個 [MEStreamSinkRequestSample](mestreamsinkrequestsample.md) 事件。</span><span class="sxs-lookup"><span data-stu-id="24be6-203">Each stream sink sends one or more [MEStreamSinkRequestSample](mestreamsinkrequestsample.md) events.</span></span> <span data-ttu-id="24be6-204">為了回應每個事件，用戶端會取得該資料流程的下一個範例資料，並呼叫 [**IMFStreamSink：:P rocesssample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample)。</span><span class="sxs-lookup"><span data-stu-id="24be6-204">In response to each of these events, the client gets the next sample of data for that stream and calls [**IMFStreamSink::ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample).</span></span>
4.  <span data-ttu-id="24be6-205">當每個串流接收收到足夠的預先產生資料時，它會傳送 [MEStreamSinkPrerolled](mestreamsinkprerolled.md) 事件。</span><span class="sxs-lookup"><span data-stu-id="24be6-205">When each stream sink receives enough preroll data, it sends an [MEStreamSinkPrerolled](mestreamsinkprerolled.md) event.</span></span>
5.  <span data-ttu-id="24be6-206">用戶端會呼叫 [**IMFPresentationClock：： start**](/windows/desktop/api/mfidl/nf-mfidl-imfpresentationclock-start) 來啟動簡報時鐘。</span><span class="sxs-lookup"><span data-stu-id="24be6-206">The client calls [**IMFPresentationClock::Start**](/windows/desktop/api/mfidl/nf-mfidl-imfpresentationclock-start) to start the presentation clock.</span></span>
6.  <span data-ttu-id="24be6-207">簡報時鐘會藉由呼叫 [**IMFClockStateSink：： OnClockStart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart)，通知媒體接收器正在啟動時鐘。</span><span class="sxs-lookup"><span data-stu-id="24be6-207">The presentation clock notifies the media sink that the clock is starting, by calling [**IMFClockStateSink::OnClockStart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart).</span></span>
7.  <span data-ttu-id="24be6-208">為了取得更多資料，每個資料流程接收都會傳送 [MEStreamSinkRequestSample](mestreamsinkrequestsample.md) 事件。</span><span class="sxs-lookup"><span data-stu-id="24be6-208">To get more data, each stream sink sends [MEStreamSinkRequestSample](mestreamsinkrequestsample.md) events.</span></span> <span data-ttu-id="24be6-209">為了回應每個事件，用戶端會取得下一個範例，並呼叫 [**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample)。</span><span class="sxs-lookup"><span data-stu-id="24be6-209">In response to each of these events, the client gets the next sample and calls [**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample).</span></span> <span data-ttu-id="24be6-210">此步驟會重複，直到簡報結束為止。</span><span class="sxs-lookup"><span data-stu-id="24be6-210">This step is repeated until the presentation ends.</span></span>

<span data-ttu-id="24be6-211">大部分的媒體接收器都會以非同步方式處理範例，因此串流接收一次可以傳送一個以上的範例要求。</span><span class="sxs-lookup"><span data-stu-id="24be6-211">Most media sinks process samples asynchronously, so the stream sinks can send out more than one sample request at a time.</span></span>

<span data-ttu-id="24be6-212">在串流處理期間，用戶端可以隨時呼叫 [**IMFStreamSink：:P lacemarker**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker) 和 [**IMFStreamSink：： Flush**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-flush) 。</span><span class="sxs-lookup"><span data-stu-id="24be6-212">During streaming, the client can call [**IMFStreamSink::PlaceMarker**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker) and [**IMFStreamSink::Flush**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-flush) at any time.</span></span> <span data-ttu-id="24be6-213">下一節將說明標記。</span><span class="sxs-lookup"><span data-stu-id="24be6-213">Markers are described in the next section.</span></span> <span data-ttu-id="24be6-214">清除會導致串流接收卸載已排入佇列但尚未轉譯的任何範例。</span><span class="sxs-lookup"><span data-stu-id="24be6-214">Flushing causes the stream sink to drop any samples that it has queued but not rendered yet.</span></span>

## <a name="markers"></a><span data-ttu-id="24be6-215">標記</span><span class="sxs-lookup"><span data-stu-id="24be6-215">Markers</span></span>

<span data-ttu-id="24be6-216">標記提供一種方式，讓用戶端表示資料流程中的特定點。</span><span class="sxs-lookup"><span data-stu-id="24be6-216">Markers provide a way for the client to indicate specific points in the stream.</span></span> <span data-ttu-id="24be6-217">標記是由下列資訊所組成：</span><span class="sxs-lookup"><span data-stu-id="24be6-217">A marker consists of the following information:</span></span>

-   <span data-ttu-id="24be6-218">標記類型，定義為 [**MFSTREAMSINK \_ 標記 \_ 類型**](/windows/desktop/api/mfidl/ne-mfidl-mfstreamsink_marker_type) 列舉的成員。</span><span class="sxs-lookup"><span data-stu-id="24be6-218">The marker type, defined as a member of the [**MFSTREAMSINK\_MARKER\_TYPE**](/windows/desktop/api/mfidl/ne-mfidl-mfstreamsink_marker_type) enumeration.</span></span>
-   <span data-ttu-id="24be6-219">與標記相關聯的資料。</span><span class="sxs-lookup"><span data-stu-id="24be6-219">Data associated with the marker.</span></span> <span data-ttu-id="24be6-220">資料的意義取決於標記類型。</span><span class="sxs-lookup"><span data-stu-id="24be6-220">The meaning of the data depends on the marker type.</span></span> <span data-ttu-id="24be6-221">某些標記類型沒有資料。</span><span class="sxs-lookup"><span data-stu-id="24be6-221">Some marker types do not have data.</span></span>
-   <span data-ttu-id="24be6-222">用戶端本身使用的選擇性資料。</span><span class="sxs-lookup"><span data-stu-id="24be6-222">Optional data for the client's own use.</span></span>

<span data-ttu-id="24be6-223">為了放置標記，用戶端會呼叫 [**IMFStreamSink：:P lacemarker**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker)。</span><span class="sxs-lookup"><span data-stu-id="24be6-223">To place a marker, the client calls [**IMFStreamSink::PlaceMarker**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker).</span></span> <span data-ttu-id="24be6-224">資料流程接收會完成處理 **PlaceMarker** 呼叫之前所收到的任何範例，然後傳送 [MEStreamSinkMarker](mestreamsinkmarker.md) 事件。</span><span class="sxs-lookup"><span data-stu-id="24be6-224">The stream sink finishes processing any samples that it received before the **PlaceMarker** call, and then sends an [MEStreamSinkMarker](mestreamsinkmarker.md) event.</span></span>

<span data-ttu-id="24be6-225">大部分的媒體接收器都會保留擱置範例的佇列，而這些範例會以非同步方式處理。</span><span class="sxs-lookup"><span data-stu-id="24be6-225">Most media sinks keep a queue of pending samples, which they process asynchronously.</span></span> <span data-ttu-id="24be6-226">標記事件必須使用範例處理進行序列化，因此媒體接收器應該將標記放置在相同的佇列中。</span><span class="sxs-lookup"><span data-stu-id="24be6-226">Marker events must be serialized with sample processing, so the media sink should place the markers in the same queue.</span></span> <span data-ttu-id="24be6-227">例如，假設用戶端會呼叫下列方法：</span><span class="sxs-lookup"><span data-stu-id="24be6-227">For example, suppose the client makes the following method calls:</span></span>

1.  <span data-ttu-id="24be6-228">[**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) (範例 \# 1) </span><span class="sxs-lookup"><span data-stu-id="24be6-228">[**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) (Sample \#1)</span></span>
2.  <span data-ttu-id="24be6-229">[**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) (範例 \# 2) </span><span class="sxs-lookup"><span data-stu-id="24be6-229">[**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) (Sample \#2)</span></span>
3.  <span data-ttu-id="24be6-230">[**PlaceMarker**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker) (標記 \# 1) </span><span class="sxs-lookup"><span data-stu-id="24be6-230">[**PlaceMarker**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker) (Marker \#1)</span></span>
4.  <span data-ttu-id="24be6-231">[**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) (範例 \# 3) </span><span class="sxs-lookup"><span data-stu-id="24be6-231">[**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) (Sample \#3)</span></span>
5.  <span data-ttu-id="24be6-232">[**PlaceMarker**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker) (標記 \# 2) </span><span class="sxs-lookup"><span data-stu-id="24be6-232">[**PlaceMarker**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker) (Marker \#2)</span></span>

<span data-ttu-id="24be6-233">在此範例中，資料流程接收在處理範例2之後必須傳送標記1的 [MEStreamSinkMarker](mestreamsinkmarker.md) 事件 \# \# ，並在 \# 處理範例3之後傳送標記2的事件 \# 。</span><span class="sxs-lookup"><span data-stu-id="24be6-233">In this example, the stream sink must send the [MEStreamSinkMarker](mestreamsinkmarker.md) event for marker \#1 after it processes sample \#2, and the event for marker \#2 after it processes sample \#3.</span></span>

<span data-ttu-id="24be6-234">如果用戶端排清資料流程接收，資料流程接收會立即處理佇列中的所有標記。</span><span class="sxs-lookup"><span data-stu-id="24be6-234">If the client flushes a stream sink, the stream sink immediately processes any markers that were in the queue.</span></span> <span data-ttu-id="24be6-235">它會將這些事件的狀態碼設定為 E \_ ABORT。</span><span class="sxs-lookup"><span data-stu-id="24be6-235">It sets the status code to E\_ABORT on these events.</span></span>

<span data-ttu-id="24be6-236">某些標記包含與媒體接收器相關的資訊：</span><span class="sxs-lookup"><span data-stu-id="24be6-236">Some markers contain information that is relevant to the media sink:</span></span>

-   <span data-ttu-id="24be6-237">**MFSTREAMSINK \_標記 \_ 刻度**：指出資料流程中有間距。</span><span class="sxs-lookup"><span data-stu-id="24be6-237">**MFSTREAMSINK\_MARKER\_TICK**: Indicates there is a gap in the stream.</span></span> <span data-ttu-id="24be6-238">下一個範例將會是不連續的。</span><span class="sxs-lookup"><span data-stu-id="24be6-238">The next sample will be a discontinuity.</span></span>
-   <span data-ttu-id="24be6-239">**MFSTREAMSINK \_標記 \_ ENDOFSEGMENT**：表示資料流程的區段結尾或結尾。</span><span class="sxs-lookup"><span data-stu-id="24be6-239">**MFSTREAMSINK\_MARKER\_ENDOFSEGMENT**: Indicates the end of a segment or the end of a stream.</span></span> <span data-ttu-id="24be6-240">下一個範例 (是否有任何) 可能是不連續的。</span><span class="sxs-lookup"><span data-stu-id="24be6-240">The next sample (if any) might be a discontinuity.</span></span>
-   <span data-ttu-id="24be6-241">**MFSTREAMSINK \_標記 \_ 事件**：包含事件。</span><span class="sxs-lookup"><span data-stu-id="24be6-241">**MFSTREAMSINK\_MARKER\_EVENT**: Contains an event.</span></span> <span data-ttu-id="24be6-242">根據事件種類和媒體接收器的執行，媒體接收器可能會處理事件或忽略它。</span><span class="sxs-lookup"><span data-stu-id="24be6-242">Depending on the event type and the implementation of the media sink, the media sink might handle the event or ignore it.</span></span>

## <a name="state-changes"></a><span data-ttu-id="24be6-243">狀態變更</span><span class="sxs-lookup"><span data-stu-id="24be6-243">State Changes</span></span>

<span data-ttu-id="24be6-244">媒體接收會透過媒體接收器的 [**IMFClockStateSink**](/windows/desktop/api/mfidl/nn-mfidl-imfclockstatesink) 介面，通知呈現時鐘中的狀態變更。</span><span class="sxs-lookup"><span data-stu-id="24be6-244">A media sink is notified of state changes in the presentation clock through the media sink's [**IMFClockStateSink**](/windows/desktop/api/mfidl/nn-mfidl-imfclockstatesink) interface.</span></span> <span data-ttu-id="24be6-245">當用戶端設定簡報時鐘時，媒體接收器會呼叫 [**IMFPresentationClock：： AddClockStateSink**](/windows/desktop/api/mfidl/nf-mfidl-imfpresentationclock-addclockstatesink) ，以註冊來自時鐘的通知。</span><span class="sxs-lookup"><span data-stu-id="24be6-245">When the client sets the presentation clock, the media sink calls [**IMFPresentationClock::AddClockStateSink**](/windows/desktop/api/mfidl/nf-mfidl-imfpresentationclock-addclockstatesink) to register itself for notifications from the clock.</span></span> <span data-ttu-id="24be6-246">下表摘要說明媒體接收器回應時鐘狀態變更的行為。</span><span class="sxs-lookup"><span data-stu-id="24be6-246">The following table summarizes how a media sink behaves in response to clock state changes.</span></span>



| <span data-ttu-id="24be6-247">時鐘狀態變更</span><span class="sxs-lookup"><span data-stu-id="24be6-247">Clock state change</span></span>                                         | <span data-ttu-id="24be6-248">來樣加工</span><span class="sxs-lookup"><span data-stu-id="24be6-248">Sample processing</span></span>                                                                                                                                                                                                                                             | <span data-ttu-id="24be6-249">標記處理</span><span class="sxs-lookup"><span data-stu-id="24be6-249">Marker processing</span></span>                                                                                                                                                                                   |
|------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="24be6-250">**OnClockStart**</span><span class="sxs-lookup"><span data-stu-id="24be6-250">**OnClockStart**</span></span>](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart)     | <span data-ttu-id="24be6-251">時間戳記等於或晚于時鐘開始時間的進程範例。</span><span class="sxs-lookup"><span data-stu-id="24be6-251">Process samples whose time stamp is equal to or later than the clock start time.</span></span>                                                                                                                                                                              | <span data-ttu-id="24be6-252">在處理標記之前收到的所有範例都傳送 [MEStreamSinkMarker](mestreamsinkmarker.md) 事件。</span><span class="sxs-lookup"><span data-stu-id="24be6-252">Send the [MEStreamSinkMarker](mestreamsinkmarker.md) event when all of the samples received before the marker have been processed.</span></span>                                                                 |
| [<span data-ttu-id="24be6-253">**OnClockPause**</span><span class="sxs-lookup"><span data-stu-id="24be6-253">**OnClockPause**</span></span>](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockpause)     | <span data-ttu-id="24be6-254">媒體接收器可能會在暫停時失敗 [**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) 。</span><span class="sxs-lookup"><span data-stu-id="24be6-254">The media sink can fail [**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) while paused.</span></span><br/> <span data-ttu-id="24be6-255">如果媒體接收器在暫停時接受樣本，則必須先將它們排在佇列中，直到時鐘重新開機為止。</span><span class="sxs-lookup"><span data-stu-id="24be6-255">If the media sink accepts samples while paused, it must queue them until the clock restarts.</span></span> <span data-ttu-id="24be6-256">暫停時，請勿處理任何已排入佇列的範例。</span><span class="sxs-lookup"><span data-stu-id="24be6-256">Do not process any queued samples while paused.</span></span><br/> | <span data-ttu-id="24be6-257">如果有已排入佇列的範例，請將標記放在相同的佇列上。</span><span class="sxs-lookup"><span data-stu-id="24be6-257">If there are queued samples, put markers onto the same queue.</span></span> <span data-ttu-id="24be6-258">當時鐘重新開機時，傳送標記事件。</span><span class="sxs-lookup"><span data-stu-id="24be6-258">Send the marker event when the clock restarts.</span></span><br/> <span data-ttu-id="24be6-259">否則，請立即傳送標記事件。</span><span class="sxs-lookup"><span data-stu-id="24be6-259">Otherwise, send the marker event immediately.</span></span><br/>                    |
| [<span data-ttu-id="24be6-260">**OnClockRestart**</span><span class="sxs-lookup"><span data-stu-id="24be6-260">**OnClockRestart**</span></span>](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockrestart) | <span data-ttu-id="24be6-261">處理在暫停時排入佇列的任何範例，然後將其視為與 [**OnClockStart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart)相同。</span><span class="sxs-lookup"><span data-stu-id="24be6-261">Process any samples that were queued while paused, and then treat the same as [**OnClockStart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart).</span></span>                                                                                                                         | <span data-ttu-id="24be6-262">傳送已排入佇列之標記的 [MEStreamSinkMarker](mestreamsinkmarker.md) 事件 (使用範例處理) 進行序列化，然後將相同的視為 [**OnClockStart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart)。</span><span class="sxs-lookup"><span data-stu-id="24be6-262">Send [MEStreamSinkMarker](mestreamsinkmarker.md) events for queued markers (serialized with sample processing), and then treat the same as [**OnClockStart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart).</span></span> |
| [<span data-ttu-id="24be6-263">**OnClockStop**</span><span class="sxs-lookup"><span data-stu-id="24be6-263">**OnClockStop**</span></span>](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstop)       | <span data-ttu-id="24be6-264">捨棄所有已排入佇列的範例。</span><span class="sxs-lookup"><span data-stu-id="24be6-264">Drop all queued samples.</span></span> <span data-ttu-id="24be6-265">對 [**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) 的後續呼叫可能會失敗。</span><span class="sxs-lookup"><span data-stu-id="24be6-265">Further calls to [**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) can fail.</span></span>                                                                                                                                                      | <span data-ttu-id="24be6-266">傳送已排入佇列的標記事件。</span><span class="sxs-lookup"><span data-stu-id="24be6-266">Send queued marker events.</span></span> <span data-ttu-id="24be6-267">在後續呼叫 [**PlaceMarker**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker)時，立即傳送標記事件。</span><span class="sxs-lookup"><span data-stu-id="24be6-267">On subsequent calls to [**PlaceMarker**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker), send the marker event immediately.</span></span>                                                              |



 

<span data-ttu-id="24be6-268">此外，當資料流程接收完成狀態轉換時，必須傳送下列事件：</span><span class="sxs-lookup"><span data-stu-id="24be6-268">In addition, stream sinks must send the following events when they have completed the state transitions:</span></span>

-   <span data-ttu-id="24be6-269">[**OnClockStart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart)， [**OnClockRestart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockrestart)： [MEStreamSinkStarted](mestreamsinkstarted.md) 事件</span><span class="sxs-lookup"><span data-stu-id="24be6-269">[**OnClockStart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart), [**OnClockRestart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockrestart): [MEStreamSinkStarted](mestreamsinkstarted.md) event</span></span>
-   <span data-ttu-id="24be6-270">[**OnClockPause**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockpause)： [MEStreamSinkPaused](mestreamsinkpaused.md) 事件</span><span class="sxs-lookup"><span data-stu-id="24be6-270">[**OnClockPause**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockpause): [MEStreamSinkPaused](mestreamsinkpaused.md) event</span></span>
-   <span data-ttu-id="24be6-271">[**OnClockStop**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstop)： [MEStreamSinkStopped](mestreamsinkstopped.md) 事件</span><span class="sxs-lookup"><span data-stu-id="24be6-271">[**OnClockStop**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstop): [MEStreamSinkStopped](mestreamsinkstopped.md) event</span></span>

## <a name="finalizing"></a><span data-ttu-id="24be6-272">敲定</span><span class="sxs-lookup"><span data-stu-id="24be6-272">Finalizing</span></span>

<span data-ttu-id="24be6-273">在傳遞最後一個範例之後，有些媒體接收器需要額外的處理步驟。</span><span class="sxs-lookup"><span data-stu-id="24be6-273">Some media sinks require an extra processing step after the last sample is delivered.</span></span> <span data-ttu-id="24be6-274">這項需求通常適用于封存接收，必須將標頭或索引寫入至檔案。</span><span class="sxs-lookup"><span data-stu-id="24be6-274">Typically this requirement applies to archive sinks, which must write headers or indexes into the file.</span></span> <span data-ttu-id="24be6-275">如果媒體接收器需要任何最終處理，它會公開 [**IMFFinalizableMediaSink**](/windows/desktop/api/mfidl/nn-mfidl-imffinalizablemediasink) 介面。</span><span class="sxs-lookup"><span data-stu-id="24be6-275">If a media sink requires any final processing, it exposes the [**IMFFinalizableMediaSink**](/windows/desktop/api/mfidl/nn-mfidl-imffinalizablemediasink) interface.</span></span>

<span data-ttu-id="24be6-276">用戶端提供最後一個範例之後，用戶端就會查詢這個介面。</span><span class="sxs-lookup"><span data-stu-id="24be6-276">After the client delivers the last sample, the client queries for this interface.</span></span> <span data-ttu-id="24be6-277">如果媒體接收器支援介面，用戶端會呼叫 [**IMFFinalizableMediaSink：： BeginFinalize**](/windows/desktop/api/mfidl/nf-mfidl-imffinalizablemediasink-beginfinalize) 來以非同步方式執行最終處理。</span><span class="sxs-lookup"><span data-stu-id="24be6-277">If the media sink supports the interface, the client calls [**IMFFinalizableMediaSink::BeginFinalize**](/windows/desktop/api/mfidl/nf-mfidl-imffinalizablemediasink-beginfinalize) to perform the final processing asynchronously.</span></span> <span data-ttu-id="24be6-278">這個方法會遵循 [非同步回呼方法](asynchronous-callback-methods.md)中所述的標準媒體基礎非同步模型。</span><span class="sxs-lookup"><span data-stu-id="24be6-278">This method follows the standard Media Foundation asynchronous model, described in [Asynchronous Callback Methods](asynchronous-callback-methods.md).</span></span> <span data-ttu-id="24be6-279">媒體接收器可以假設用戶端會呼叫 **BeginFinalize**。</span><span class="sxs-lookup"><span data-stu-id="24be6-279">The media sink can assume that the client will call **BeginFinalize**.</span></span> <span data-ttu-id="24be6-280">無法呼叫 **BeginFinalize** 可能會導致檔案撰寫不正確。</span><span class="sxs-lookup"><span data-stu-id="24be6-280">Failure to call **BeginFinalize** can result in an incorrectly authored file.</span></span>

## <a name="shutting-down"></a><span data-ttu-id="24be6-281">關閉</span><span class="sxs-lookup"><span data-stu-id="24be6-281">Shutting Down</span></span>

<span data-ttu-id="24be6-282">當用戶端使用媒體接收器完成時，用戶端會呼叫 [**IMFMediaSink：： Shutdown**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-shutdown)。</span><span class="sxs-lookup"><span data-stu-id="24be6-282">When the client is done using the media sink, the client calls [**IMFMediaSink::Shutdown**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-shutdown).</span></span> <span data-ttu-id="24be6-283">在這個方法內，媒體接收器應該會中斷任何迴圈參考計數。</span><span class="sxs-lookup"><span data-stu-id="24be6-283">Inside this method, the media sink should break any circular reference counts.</span></span> <span data-ttu-id="24be6-284">一般而言，媒體接收和資料流程接收之間會有迴圈參考。</span><span class="sxs-lookup"><span data-stu-id="24be6-284">Typically, there will be circular references between the media sink and the stream sinks.</span></span>

<span data-ttu-id="24be6-285">如果您使用事件佇列 helper 物件來執行 [**IMFMediaEventGenerator**](/windows/desktop/api/mfobjects/nn-mfobjects-imfmediaeventgenerator)，請在事件佇列上呼叫 [**IMFMediaEventQueue：： Shutdown**](/windows/desktop/api/mfobjects/nf-mfobjects-imfmediaeventqueue-shutdown) 。</span><span class="sxs-lookup"><span data-stu-id="24be6-285">If you are using the event queue helper object to implement [**IMFMediaEventGenerator**](/windows/desktop/api/mfobjects/nn-mfobjects-imfmediaeventgenerator), call [**IMFMediaEventQueue::Shutdown**](/windows/desktop/api/mfobjects/nf-mfobjects-imfmediaeventqueue-shutdown) on the event queue.</span></span> <span data-ttu-id="24be6-286">這個方法會關閉事件佇列，並對目前正在等候事件的任何呼叫端發出信號。</span><span class="sxs-lookup"><span data-stu-id="24be6-286">This method shuts down the event queue and signals any caller that is currently waiting for an event.</span></span>

<span data-ttu-id="24be6-287">關機之後，媒體接收器上的所有方法都會傳回 MF \_ E \_ 關機，但 **IUnknown** 方法除外。</span><span class="sxs-lookup"><span data-stu-id="24be6-287">After shutdown, all methods on the media sink return MF\_E\_SHUTDOWN, with the exception of **IUnknown** methods.</span></span>

## <a name="media-sink-interfaces"></a><span data-ttu-id="24be6-288">媒體接收器介面</span><span class="sxs-lookup"><span data-stu-id="24be6-288">Media Sink Interfaces</span></span>

<span data-ttu-id="24be6-289">下表列出媒體接收器可透過 **QueryInterface** 公開的標準介面。</span><span class="sxs-lookup"><span data-stu-id="24be6-289">The following table lists the standard interfaces that media sinks can expose through **QueryInterface**.</span></span> <span data-ttu-id="24be6-290">媒體接收也可以公開自訂介面。</span><span class="sxs-lookup"><span data-stu-id="24be6-290">Media sinks can also expose custom interfaces.</span></span>



| <span data-ttu-id="24be6-291">介面</span><span class="sxs-lookup"><span data-stu-id="24be6-291">Interface</span></span>                                                      | <span data-ttu-id="24be6-292">描述</span><span class="sxs-lookup"><span data-stu-id="24be6-292">Description</span></span>                                                                                   |
|----------------------------------------------------------------|-----------------------------------------------------------------------------------------------|
| [<span data-ttu-id="24be6-293">**IMFMediaSink**</span><span class="sxs-lookup"><span data-stu-id="24be6-293">**IMFMediaSink**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfmediasink)                           | <span data-ttu-id="24be6-294">媒體接收器的主要介面。</span><span class="sxs-lookup"><span data-stu-id="24be6-294">The primary interface for media sinks.</span></span> <span data-ttu-id="24be6-295">(必要項。)</span><span class="sxs-lookup"><span data-stu-id="24be6-295">(Required.)</span></span>                                            |
| [<span data-ttu-id="24be6-296">**IMFClockStateSink**</span><span class="sxs-lookup"><span data-stu-id="24be6-296">**IMFClockStateSink**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfclockstatesink)                 | <span data-ttu-id="24be6-297">用來在簡報時鐘變更狀態時通知媒體接收器。</span><span class="sxs-lookup"><span data-stu-id="24be6-297">Used to notify the media sink when presentation clock changes state.</span></span> <span data-ttu-id="24be6-298">(必要項。)</span><span class="sxs-lookup"><span data-stu-id="24be6-298">(Required.)</span></span>              |
| [<span data-ttu-id="24be6-299">**IMFFinalizableMediaSink**</span><span class="sxs-lookup"><span data-stu-id="24be6-299">**IMFFinalizableMediaSink**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imffinalizablemediasink)     | <span data-ttu-id="24be6-300">如果媒體接收器必須執行最終處理步驟，請執行。</span><span class="sxs-lookup"><span data-stu-id="24be6-300">Implement if the media sink must perform a final processing step.</span></span> <span data-ttu-id="24be6-301">(選擇性。)</span><span class="sxs-lookup"><span data-stu-id="24be6-301">(Optional.)</span></span>                 |
| [<span data-ttu-id="24be6-302">**IMFGetService**</span><span class="sxs-lookup"><span data-stu-id="24be6-302">**IMFGetService**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfgetservice)                         | <span data-ttu-id="24be6-303">如果媒體接收器公開任何服務介面，請執行。</span><span class="sxs-lookup"><span data-stu-id="24be6-303">Implement if the media sink exposes any service interfaces.</span></span> <span data-ttu-id="24be6-304">(選擇性。)</span><span class="sxs-lookup"><span data-stu-id="24be6-304">(Optional.)</span></span>                       |
| [<span data-ttu-id="24be6-305">**IMFMediaEventGenerator**</span><span class="sxs-lookup"><span data-stu-id="24be6-305">**IMFMediaEventGenerator**</span></span>](/windows/desktop/api/mfobjects/nn-mfobjects-imfmediaeventgenerator)       | <span data-ttu-id="24be6-306">如果媒體接收器傳送任何事件，則執行。</span><span class="sxs-lookup"><span data-stu-id="24be6-306">Implement if the media sink sends any events.</span></span> <span data-ttu-id="24be6-307">(選擇性。)</span><span class="sxs-lookup"><span data-stu-id="24be6-307">(Optional.)</span></span>                                     |
| [<span data-ttu-id="24be6-308">**IMFMediaSinkPreroll**</span><span class="sxs-lookup"><span data-stu-id="24be6-308">**IMFMediaSinkPreroll**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfmediasinkpreroll)             | <span data-ttu-id="24be6-309">如果媒體接收器支援預先執行，則會執行。</span><span class="sxs-lookup"><span data-stu-id="24be6-309">Implement if the media sink supports preroll.</span></span> <span data-ttu-id="24be6-310">(選擇性。)</span><span class="sxs-lookup"><span data-stu-id="24be6-310">(Optional.)</span></span>                                     |
| [<span data-ttu-id="24be6-311">**IMFPresentationTimeSource**</span><span class="sxs-lookup"><span data-stu-id="24be6-311">**IMFPresentationTimeSource**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfpresentationtimesource) | <span data-ttu-id="24be6-312">如果媒體接收器可以提供簡報時鐘的時間來源，則會執行。</span><span class="sxs-lookup"><span data-stu-id="24be6-312">Implement if the media sink can provide a time source for the presentation clock.</span></span> <span data-ttu-id="24be6-313">(選擇性。)</span><span class="sxs-lookup"><span data-stu-id="24be6-313">(Optional.)</span></span> |
| [<span data-ttu-id="24be6-314">**IMFQualityAdvise**</span><span class="sxs-lookup"><span data-stu-id="24be6-314">**IMFQualityAdvise**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfqualityadvise)                   | <span data-ttu-id="24be6-315">如果媒體接收器可以調整播放品質，請執行。</span><span class="sxs-lookup"><span data-stu-id="24be6-315">Implement if the media sink can adjust playback quality.</span></span> <span data-ttu-id="24be6-316">(選擇性。)</span><span class="sxs-lookup"><span data-stu-id="24be6-316">(Optional.)</span></span>                          |



 

<span data-ttu-id="24be6-317">媒體接收器可以選擇性地將下列介面做為服務來執行。</span><span class="sxs-lookup"><span data-stu-id="24be6-317">Optionally, a media sink can implement the following interface as a service.</span></span>



| <span data-ttu-id="24be6-318">服務介面</span><span class="sxs-lookup"><span data-stu-id="24be6-318">Service interface</span></span>                        | <span data-ttu-id="24be6-319">Description</span><span class="sxs-lookup"><span data-stu-id="24be6-319">Description</span></span>                                    |
|------------------------------------------|------------------------------------------------|
| [<span data-ttu-id="24be6-320">**IMFRateSupport**</span><span class="sxs-lookup"><span data-stu-id="24be6-320">**IMFRateSupport**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfratesupport) | <span data-ttu-id="24be6-321">報告支援播放速率的範圍。</span><span class="sxs-lookup"><span data-stu-id="24be6-321">Reports the range of supported playback rates.</span></span> |



 

<span data-ttu-id="24be6-322">如需服務介面和 [**IMFGetService**](/windows/desktop/api/mfidl/nn-mfidl-imfgetservice)的詳細資訊，請參閱 [服務介面](service-interfaces.md)。</span><span class="sxs-lookup"><span data-stu-id="24be6-322">For more information about service interfaces and [**IMFGetService**](/windows/desktop/api/mfidl/nn-mfidl-imfgetservice), see [Service Interfaces](service-interfaces.md).</span></span>

## <a name="stream-sink-interfaces"></a><span data-ttu-id="24be6-323">資料流程接收介面</span><span class="sxs-lookup"><span data-stu-id="24be6-323">Stream Sink Interfaces</span></span>

<span data-ttu-id="24be6-324">資料流程接收必須透過 **QueryInterface** 公開下列介面。</span><span class="sxs-lookup"><span data-stu-id="24be6-324">Stream sinks must expose the following interfaces through **QueryInterface**.</span></span>



| <span data-ttu-id="24be6-325">介面</span><span class="sxs-lookup"><span data-stu-id="24be6-325">Interface</span></span>                                                | <span data-ttu-id="24be6-326">描述</span><span class="sxs-lookup"><span data-stu-id="24be6-326">Description</span></span>                                                                                              |
|----------------------------------------------------------|----------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="24be6-327">**IMFStreamSink**</span><span class="sxs-lookup"><span data-stu-id="24be6-327">**IMFStreamSink**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfstreamsink)                   | <span data-ttu-id="24be6-328">資料流程接收的主要介面。</span><span class="sxs-lookup"><span data-stu-id="24be6-328">The primary interface for stream sinks.</span></span> <span data-ttu-id="24be6-329">(必要項。)</span><span class="sxs-lookup"><span data-stu-id="24be6-329">(Required.)</span></span>                                                      |
| [<span data-ttu-id="24be6-330">**IMFMediaEventGenerator**</span><span class="sxs-lookup"><span data-stu-id="24be6-330">**IMFMediaEventGenerator**</span></span>](/windows/desktop/api/mfobjects/nn-mfobjects-imfmediaeventgenerator) | <span data-ttu-id="24be6-331">佇列事件。</span><span class="sxs-lookup"><span data-stu-id="24be6-331">Queues events.</span></span> <span data-ttu-id="24be6-332">[**IMFStreamSink**](/windows/desktop/api/mfidl/nn-mfidl-imfstreamsink)介面會繼承這個介面。</span><span class="sxs-lookup"><span data-stu-id="24be6-332">The [**IMFStreamSink**](/windows/desktop/api/mfidl/nn-mfidl-imfstreamsink) interface inherits this interface.</span></span> <span data-ttu-id="24be6-333">(必要項。)</span><span class="sxs-lookup"><span data-stu-id="24be6-333">(Required.)</span></span> |



 

<span data-ttu-id="24be6-334">目前沒有針對資料流程接收定義任何服務介面。</span><span class="sxs-lookup"><span data-stu-id="24be6-334">Currently no service interfaces are defined for stream sinks.</span></span>

## <a name="stream-sink-events"></a><span data-ttu-id="24be6-335">資料流程接收事件</span><span class="sxs-lookup"><span data-stu-id="24be6-335">Stream Sink Events</span></span>

<span data-ttu-id="24be6-336">下表列出針對一般資料流程接收定義的事件。</span><span class="sxs-lookup"><span data-stu-id="24be6-336">The following table lists the events that are defined for generic stream sinks.</span></span> <span data-ttu-id="24be6-337">資料流程接收也可以傳送此處未列出的自訂事件。</span><span class="sxs-lookup"><span data-stu-id="24be6-337">Stream sinks can also send custom events not listed here.</span></span>



| <span data-ttu-id="24be6-338">事件</span><span class="sxs-lookup"><span data-stu-id="24be6-338">Event</span></span>                                                                  | <span data-ttu-id="24be6-339">描述</span><span class="sxs-lookup"><span data-stu-id="24be6-339">Description</span></span>                                                  |
|------------------------------------------------------------------------|--------------------------------------------------------------|
| [<span data-ttu-id="24be6-340">MEStreamSinkFormatChanged</span><span class="sxs-lookup"><span data-stu-id="24be6-340">MEStreamSinkFormatChanged</span></span>](mestreamsinkformatchanged.md)             | <span data-ttu-id="24be6-341">資料流程接收的媒體類型已不再有效。</span><span class="sxs-lookup"><span data-stu-id="24be6-341">The stream sink's media type is no longer valid.</span></span> <span data-ttu-id="24be6-342">(選擇性。)</span><span class="sxs-lookup"><span data-stu-id="24be6-342">(Optional.)</span></span> |
| [<span data-ttu-id="24be6-343">MEStreamSinkMarker</span><span class="sxs-lookup"><span data-stu-id="24be6-343">MEStreamSinkMarker</span></span>](mestreamsinkmarker.md)                           | <span data-ttu-id="24be6-344">已處理標記。</span><span class="sxs-lookup"><span data-stu-id="24be6-344">A marker was processed.</span></span> <span data-ttu-id="24be6-345">(必要項。)</span><span class="sxs-lookup"><span data-stu-id="24be6-345">(Required.)</span></span>                          |
| [<span data-ttu-id="24be6-346">MEStreamSinkPaused</span><span class="sxs-lookup"><span data-stu-id="24be6-346">MEStreamSinkPaused</span></span>](mestreamsinkpaused.md)                           | <span data-ttu-id="24be6-347">資料流程接收已暫停。</span><span class="sxs-lookup"><span data-stu-id="24be6-347">The stream sink has paused.</span></span> <span data-ttu-id="24be6-348">(必要項。)</span><span class="sxs-lookup"><span data-stu-id="24be6-348">(Required.)</span></span>                      |
| [<span data-ttu-id="24be6-349">MEStreamSinkPrerolled</span><span class="sxs-lookup"><span data-stu-id="24be6-349">MEStreamSinkPrerolled</span></span>](mestreamsinkprerolled.md)                     | <span data-ttu-id="24be6-350">預先執行已完成。</span><span class="sxs-lookup"><span data-stu-id="24be6-350">Preroll is complete.</span></span> <span data-ttu-id="24be6-351">(選擇性。)</span><span class="sxs-lookup"><span data-stu-id="24be6-351">(Optional.)</span></span>                             |
| [<span data-ttu-id="24be6-352">MEStreamSinkRateChanged</span><span class="sxs-lookup"><span data-stu-id="24be6-352">MEStreamSinkRateChanged</span></span>](mestreamsinkratechanged.md)                 | <span data-ttu-id="24be6-353">串流接收器已變更播放速率。</span><span class="sxs-lookup"><span data-stu-id="24be6-353">The stream sink has changed playback rate.</span></span> <span data-ttu-id="24be6-354">(選擇性。)</span><span class="sxs-lookup"><span data-stu-id="24be6-354">(Optional.)</span></span>       |
| [<span data-ttu-id="24be6-355">MEStreamSinkRequestSample</span><span class="sxs-lookup"><span data-stu-id="24be6-355">MEStreamSinkRequestSample</span></span>](mestreamsinkrequestsample.md)             | <span data-ttu-id="24be6-356">要求新的範例。</span><span class="sxs-lookup"><span data-stu-id="24be6-356">A new sample is requested.</span></span> <span data-ttu-id="24be6-357">(必要項。)</span><span class="sxs-lookup"><span data-stu-id="24be6-357">(Required.)</span></span>                       |
| [<span data-ttu-id="24be6-358">MEStreamSinkScrubSampleComplete</span><span class="sxs-lookup"><span data-stu-id="24be6-358">MEStreamSinkScrubSampleComplete</span></span>](mestreamsinkscrubsamplecomplete.md) | <span data-ttu-id="24be6-359">已完成清除要求。</span><span class="sxs-lookup"><span data-stu-id="24be6-359">A scrub request was completed.</span></span> <span data-ttu-id="24be6-360">(選擇性。)</span><span class="sxs-lookup"><span data-stu-id="24be6-360">(Optional.)</span></span>                   |
| [<span data-ttu-id="24be6-361">MEStreamSinkStarted</span><span class="sxs-lookup"><span data-stu-id="24be6-361">MEStreamSinkStarted</span></span>](mestreamsinkstarted.md)                         | <span data-ttu-id="24be6-362">資料流程接收器已啟動。</span><span class="sxs-lookup"><span data-stu-id="24be6-362">The stream sink has started.</span></span> <span data-ttu-id="24be6-363">(必要項。)</span><span class="sxs-lookup"><span data-stu-id="24be6-363">(Required.)</span></span>                     |
| [<span data-ttu-id="24be6-364">MEStreamSinkStopped</span><span class="sxs-lookup"><span data-stu-id="24be6-364">MEStreamSinkStopped</span></span>](mestreamsinkstopped.md)                         | <span data-ttu-id="24be6-365">資料流程接收已停止。</span><span class="sxs-lookup"><span data-stu-id="24be6-365">The stream sink has stopped.</span></span> <span data-ttu-id="24be6-366">(必要項。)</span><span class="sxs-lookup"><span data-stu-id="24be6-366">(Required.)</span></span>                     |



 

<span data-ttu-id="24be6-367">目前沒有針對媒體接收器定義一般用途的事件。</span><span class="sxs-lookup"><span data-stu-id="24be6-367">Currently no general-purpose events are defined for media sinks.</span></span> <span data-ttu-id="24be6-368">某些媒體接收可能會傳送自訂事件。</span><span class="sxs-lookup"><span data-stu-id="24be6-368">Some media sinks might send custom events.</span></span>

## <a name="related-topics"></a><span data-ttu-id="24be6-369">相關主題</span><span class="sxs-lookup"><span data-stu-id="24be6-369">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="24be6-370">媒體基礎管線</span><span class="sxs-lookup"><span data-stu-id="24be6-370">Media Foundation Pipeline</span></span>](media-foundation-pipeline.md)
</dt> <dt>

[<span data-ttu-id="24be6-371">媒體基礎架構</span><span class="sxs-lookup"><span data-stu-id="24be6-371">Media Foundation Architecture</span></span>](media-foundation-architecture.md)
</dt> </dl>

 

 




