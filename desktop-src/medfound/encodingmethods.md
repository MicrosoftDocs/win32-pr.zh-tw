---
description: 編碼方法
ms.assetid: 17ab5ecc-0173-4c5c-9d65-40e506ab7e07
title: '編碼方法 (Microsoft 媒體基礎) '
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: e4366f11ea9d120d638c5600f84fc16f6c5320f8
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/07/2021
ms.locfileid: "106991656"
---
# <a name="encoding-methods-microsoft-media-foundation"></a>編碼方法 (Microsoft 媒體基礎) 

大部分的 Windows Media 音訊和影片編解碼器都支援多種編碼方法。 瞭解每個方法的使用方式和時機，可以協助您建立高品質的壓縮內容。

編碼方法全都專注于編碼器用來管理壓縮輸入資料的緩衝區。 這個緩衝區是以資料流程的位元速率（每秒位數）和緩衝區視窗（以毫秒為單位）來定義。 編碼時，會以緩衝區的限制來遵守編解碼器。 如需有關緩衝區的詳細資訊，請參閱 [有漏洞 Bucket 緩衝區模型](the-leaky-bucket-buffer-model.md)。

## <a name="constant-bit-rate-encoding"></a>常數位元速率編碼

其中一個 Windows Media 音訊和視頻編碼器所編碼之資料流程的位元速率不是常數。 固定位元速率 (CBR) 編碼方式是有點誤導的詞彙。 CBR 編碼資料流程的區別功能是一個小型的緩衝區視窗，會限制樣本大小的變化。 CBR 編碼主要用於透過網路串流至其目的地的內容。 在這種情況下，務必要能夠依賴一致的頻寬使用方式。

從設定的觀點來看，CBR 編碼方式與開始編碼之前的其他模式不同，您可以設定輸出內容的平均位元速率，以及套用至該位元速率的緩衝區視窗。 在其他模式中，當您設定編碼器時，這兩個值的其中之一或兩者都是未知的，並且會在編碼時由編解碼器計算。 CBR 是 Windows Media 編碼器 DMOs 所使用的標準編碼模式。

## <a name="two-pass-constant-bit-rate-encoding"></a>Two-Pass 常數位速率編碼

標準 CBR 只使用單一編碼傳遞。 您可以將內容提供為輸入範例，而編解碼器會壓縮內容並傳回輸出範例。 您也可以處理輸入範例兩次。 在第一次通過時，編解碼器會執行計算，以優化您的內容編碼。 在第二個階段，編解碼器會使用第一次傳遞時所收集的資料來編碼內容。

雙通路 CBR 編碼有許多優點。 它通常會產生高品質的標準 CBR 編碼方式，而不需要變更任何緩衝需求。 這會讓此編碼模式非常適合透過網路進行串流處理的內容。 只有當您編碼來自即時來源的內容，而且無法使用第二次傳遞時，才會發生兩次傳遞 CBR 的情況。

雙傳遞 CBR 資料流程的輸出媒體類型與標準 CBR 資料流程的輸出媒體類型相同;您仍然可以指定要使用的位元速率與緩衝區視窗。 設定 SQL-DMO 時，您必須將它設定為執行兩次行程。 當您完成第一次行程的傳送範例時，您必須通知。

## <a name="quality-based-variable-bit-rate-encoding"></a>Quality-Based 變數位速率編碼

由於 CBR 編碼實際上不會維持固定的位元速率，因此 (VBR) ，它與變數位元速率編碼之間的差異看起來可能有點模糊。 CBR 和 VBR 之間的主要差異在於使用的緩衝區視窗大小。 相較于 CBR 編碼的資料流程，VBR 編碼的資料流程通常會有大型的緩衝區視窗。 以品質為基礎的 VBR 沒有例外，在此情況下，您不會為其定義位速率或緩衝區視窗。 相反地，您可以設定品質值。 然後，編解碼器會嘗試壓縮資料，讓編碼媒體的品質在整個持續期間都一致，不論產生之資料流程的緩衝區需求為何。

以品質為基礎的 VBR 使用單一編碼階段，通常會建立大型的壓縮資料流程。 當編碼完成時，編解碼器會設定緩衝區需求，讓解碼器可以解壓縮資料。 編碼的 VBR 資料流程不適合透過網路進行串流處理，因此以品質為基礎的 VBR 只應用於本機播放案例 (或下載並播放) 。

## <a name="unconstrained-variable-bit-rate-encoding"></a>不受限制的變數位速率編碼

不受限制的 VBR 與以品質為基礎的 VBR 不同，不會編碼為特定的品質等級。 相反地，它會將內容編碼為可能品質的最高，同時維持指定的位元速率。 未受限制的 VBR 會使用兩種編碼階段，類似于兩次傳遞 CBR，不同之處在于您未指定資料流程的緩衝區視窗設定。 這表示，只要平均位元速率小於或等於您設定的值，資料流程中個別樣本的大小就沒有任何限制。

未受限制的 VBR 受限，因為有幾種播放案例都有需求來維持緩衝區需求。 編解碼器可以在編碼之後將緩衝區視窗設定為任何需要的值，讓您無法控制緩衝區大小。 在大部分情況下，如果您不在意緩衝區大小或頻寬使用量的一致性，則應該使用以品質為基礎的 VBR。

## <a name="peak-constrained-variable-bit-rate-encoding"></a>Peak-Constrained 變數位速率編碼

最終的編碼模式是尖峰限制的 VBR。 這種模式與不受限制的 VBR 一樣，會使用兩種編碼傳遞，並將編碼為指定的位元速率。 不過，使用尖峰限制 VBR 也可以設定編碼的尖峰值。 尖峰值類似于一般的緩衝區設定值：有尖峰位元速率和尖峰緩衝區視窗。 檔案經過編碼，以符合尖峰值所描述的緩衝區，條件是資料流程的整體平均位元速率等於或小於您指定的平均位元速率值。

受限的 VBR 可能難以理解。 以下是最簡單的方式，可考慮使用的緩衝模型。 假設串流是一種 CBR 資料流程，其中的尖峰位速率和尖峰緩衝區視窗用來定義緩衝區。 通常，尖峰位速率很高。 編碼器可確保您所指出的預期平均位元速率值會在資料流程的持續時間內進行維護。 在資料流程中的任何特定點上，平均位元速率保證會大於串流的總大小（以秒為單位）（以秒為單位），) 。

請考慮下列範例：您設定的資料流程具有每秒16000位的平均位元速率、每秒48000位的尖峰位速率，以及 3000 (3 秒) 的尖峰緩衝區視窗。 用於資料流程的緩衝區大小為144000位 (每秒48000位 x 3 秒，) 由尖峰值決定。 編碼器會壓縮資料以符合該緩衝區。 此外，資料流程的平均位元速率必須為16000或更少。 如果編碼器需要建立一些非常大型的範例來處理複雜的內容區段，它可以利用大型緩衝區大小。 但是資料流程的其他部分必須以較低的位元速率編碼，以將平均值帶到指定的層級。

尖峰限制的 VBR 編碼適用于具有有限緩衝區容量和某些資料速率條件約束的播放裝置。 其中一個常見的範例是用於 Dvd 的編碼方式。

## <a name="related-topics"></a>相關主題

<dl> <dt>

[使用 VBR 編碼](usingvbrencoding.md)
</dt> <dt>

[Windows Media 轉碼器](windows-media-codecs.md)
</dt> </dl>

 

 



