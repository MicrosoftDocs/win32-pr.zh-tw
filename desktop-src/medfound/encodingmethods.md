---
description: 編碼方法
ms.assetid: 17ab5ecc-0173-4c5c-9d65-40e506ab7e07
title: '編碼方法 (Microsoft 媒體基礎) '
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: e4366f11ea9d120d638c5600f84fc16f6c5320f8
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/07/2021
ms.locfileid: "106991656"
---
# <a name="encoding-methods-microsoft-media-foundation"></a><span data-ttu-id="65e0f-103">編碼方法 (Microsoft 媒體基礎) </span><span class="sxs-lookup"><span data-stu-id="65e0f-103">Encoding Methods (Microsoft Media Foundation)</span></span>

<span data-ttu-id="65e0f-104">大部分的 Windows Media 音訊和影片編解碼器都支援多種編碼方法。</span><span class="sxs-lookup"><span data-stu-id="65e0f-104">Most of the Windows Media Audio and Video codecs support multiple encoding methods.</span></span> <span data-ttu-id="65e0f-105">瞭解每個方法的使用方式和時機，可以協助您建立高品質的壓縮內容。</span><span class="sxs-lookup"><span data-stu-id="65e0f-105">Knowing how and when to use each method can help you create high-quality compressed content.</span></span>

<span data-ttu-id="65e0f-106">編碼方法全都專注于編碼器用來管理壓縮輸入資料的緩衝區。</span><span class="sxs-lookup"><span data-stu-id="65e0f-106">The encoding methods all focus on the buffer used by the decoder to manage compressed input data.</span></span> <span data-ttu-id="65e0f-107">這個緩衝區是以資料流程的位元速率（每秒位數）和緩衝區視窗（以毫秒為單位）來定義。</span><span class="sxs-lookup"><span data-stu-id="65e0f-107">This buffer is defined by the bit rate of the stream, in bits per second, and the buffer window, in milliseconds.</span></span> <span data-ttu-id="65e0f-108">編碼時，會以緩衝區的限制來遵守編解碼器。</span><span class="sxs-lookup"><span data-stu-id="65e0f-108">When encoding, the codec abides by the restraints of the buffer.</span></span> <span data-ttu-id="65e0f-109">如需有關緩衝區的詳細資訊，請參閱 [有漏洞 Bucket 緩衝區模型](the-leaky-bucket-buffer-model.md)。</span><span class="sxs-lookup"><span data-stu-id="65e0f-109">For more information about the buffer, see [The Leaky Bucket Buffer Model](the-leaky-bucket-buffer-model.md).</span></span>

## <a name="constant-bit-rate-encoding"></a><span data-ttu-id="65e0f-110">常數位元速率編碼</span><span class="sxs-lookup"><span data-stu-id="65e0f-110">Constant Bit Rate Encoding</span></span>

<span data-ttu-id="65e0f-111">其中一個 Windows Media 音訊和視頻編碼器所編碼之資料流程的位元速率不是常數。</span><span class="sxs-lookup"><span data-stu-id="65e0f-111">The bit rate for any stream encoded by one of the Windows Media Audio and Video codecs is not constant.</span></span> <span data-ttu-id="65e0f-112">固定位元速率 (CBR) 編碼方式是有點誤導的詞彙。</span><span class="sxs-lookup"><span data-stu-id="65e0f-112">Constant bit rate (CBR) encoding is, therefore, a somewhat misleading term.</span></span> <span data-ttu-id="65e0f-113">CBR 編碼資料流程的區別功能是一個小型的緩衝區視窗，會限制樣本大小的變化。</span><span class="sxs-lookup"><span data-stu-id="65e0f-113">The distinguishing feature of a CBR-encoded stream is a small buffer window, which limits the variation of sample sizes.</span></span> <span data-ttu-id="65e0f-114">CBR 編碼主要用於透過網路串流至其目的地的內容。</span><span class="sxs-lookup"><span data-stu-id="65e0f-114">CBR encoding is used primarily for content that is streamed over a network to its destination.</span></span> <span data-ttu-id="65e0f-115">在這種情況下，務必要能夠依賴一致的頻寬使用方式。</span><span class="sxs-lookup"><span data-stu-id="65e0f-115">In such a scenario, it is important to be able to rely on consistent bandwidth usage.</span></span>

<span data-ttu-id="65e0f-116">從設定的觀點來看，CBR 編碼方式與開始編碼之前的其他模式不同，您可以設定輸出內容的平均位元速率，以及套用至該位元速率的緩衝區視窗。</span><span class="sxs-lookup"><span data-stu-id="65e0f-116">From a configuration point of view, CBR encoding differs from the other modes in that before starting to encode, you set both the average bit rate of the output content, and the buffer window that applies to that bit rate.</span></span> <span data-ttu-id="65e0f-117">在其他模式中，當您設定編碼器時，這兩個值的其中之一或兩者都是未知的，並且會在編碼時由編解碼器計算。</span><span class="sxs-lookup"><span data-stu-id="65e0f-117">In other modes, one or both of those values is unknown when you configure the encoder, and is computed by the codec while it encodes.</span></span> <span data-ttu-id="65e0f-118">CBR 是 Windows Media 編碼器 DMOs 所使用的標準編碼模式。</span><span class="sxs-lookup"><span data-stu-id="65e0f-118">CBR is the standard encoding mode used by the Windows Media Encoder DMOs.</span></span>

## <a name="two-pass-constant-bit-rate-encoding"></a><span data-ttu-id="65e0f-119">Two-Pass 常數位速率編碼</span><span class="sxs-lookup"><span data-stu-id="65e0f-119">Two-Pass Constant Bit Rate Encoding</span></span>

<span data-ttu-id="65e0f-120">標準 CBR 只使用單一編碼傳遞。</span><span class="sxs-lookup"><span data-stu-id="65e0f-120">Standard CBR uses only a single encoding pass.</span></span> <span data-ttu-id="65e0f-121">您可以將內容提供為輸入範例，而編解碼器會壓縮內容並傳回輸出範例。</span><span class="sxs-lookup"><span data-stu-id="65e0f-121">You provide your content as input samples, and the codec compresses the content and returns output samples.</span></span> <span data-ttu-id="65e0f-122">您也可以處理輸入範例兩次。</span><span class="sxs-lookup"><span data-stu-id="65e0f-122">It is also possible to process input samples twice.</span></span> <span data-ttu-id="65e0f-123">在第一次通過時，編解碼器會執行計算，以優化您的內容編碼。</span><span class="sxs-lookup"><span data-stu-id="65e0f-123">On the first pass, the codec performs calculations to optimize encoding for your content.</span></span> <span data-ttu-id="65e0f-124">在第二個階段，編解碼器會使用第一次傳遞時所收集的資料來編碼內容。</span><span class="sxs-lookup"><span data-stu-id="65e0f-124">On the second pass, the codec uses the data gathered during the first pass to encode the content.</span></span>

<span data-ttu-id="65e0f-125">雙通路 CBR 編碼有許多優點。</span><span class="sxs-lookup"><span data-stu-id="65e0f-125">Two-pass CBR encoding has many advantages.</span></span> <span data-ttu-id="65e0f-126">它通常會產生高品質的標準 CBR 編碼方式，而不需要變更任何緩衝需求。</span><span class="sxs-lookup"><span data-stu-id="65e0f-126">It often yields significant quality gains over standard CBR encoding without changing any of the buffering requirements.</span></span> <span data-ttu-id="65e0f-127">這會讓此編碼模式非常適合透過網路進行串流處理的內容。</span><span class="sxs-lookup"><span data-stu-id="65e0f-127">This makes this encoding mode ideal for content that is streamed over a network.</span></span> <span data-ttu-id="65e0f-128">只有當您編碼來自即時來源的內容，而且無法使用第二次傳遞時，才會發生兩次傳遞 CBR 的情況。</span><span class="sxs-lookup"><span data-stu-id="65e0f-128">The only situation where two-pass CBR is not feasible is when you encode content from a live source and cannot use a second pass.</span></span>

<span data-ttu-id="65e0f-129">雙傳遞 CBR 資料流程的輸出媒體類型與標準 CBR 資料流程的輸出媒體類型相同;您仍然可以指定要使用的位元速率與緩衝區視窗。</span><span class="sxs-lookup"><span data-stu-id="65e0f-129">The output media type of a two-pass CBR stream is identical to that of a standard CBR stream; you still specify the bit rate and buffer window to use.</span></span> <span data-ttu-id="65e0f-130">設定 SQL-DMO 時，您必須將它設定為執行兩次行程。</span><span class="sxs-lookup"><span data-stu-id="65e0f-130">When configuring the DMO, you must set it to perform two passes.</span></span> <span data-ttu-id="65e0f-131">當您完成第一次行程的傳送範例時，您必須通知。</span><span class="sxs-lookup"><span data-stu-id="65e0f-131">And you must notify the DMO when you are finished sending samples for the first pass.</span></span>

## <a name="quality-based-variable-bit-rate-encoding"></a><span data-ttu-id="65e0f-132">Quality-Based 變數位速率編碼</span><span class="sxs-lookup"><span data-stu-id="65e0f-132">Quality-Based Variable Bit Rate Encoding</span></span>

<span data-ttu-id="65e0f-133">由於 CBR 編碼實際上不會維持固定的位元速率，因此 (VBR) ，它與變數位元速率編碼之間的差異看起來可能有點模糊。</span><span class="sxs-lookup"><span data-stu-id="65e0f-133">Because CBR encoding does not actually maintain a constant bit rate, the distinction between it and variable bit rate encoding (VBR) may seem a little hazy.</span></span> <span data-ttu-id="65e0f-134">CBR 和 VBR 之間的主要差異在於使用的緩衝區視窗大小。</span><span class="sxs-lookup"><span data-stu-id="65e0f-134">The primary difference between CBR and VBR is the size of the buffer window used.</span></span> <span data-ttu-id="65e0f-135">相較于 CBR 編碼的資料流程，VBR 編碼的資料流程通常會有大型的緩衝區視窗。</span><span class="sxs-lookup"><span data-stu-id="65e0f-135">VBR-encoded streams usually have large buffer windows compared to CBR-encoded streams.</span></span> <span data-ttu-id="65e0f-136">以品質為基礎的 VBR 沒有例外，在此情況下，您不會為其定義位速率或緩衝區視窗。</span><span class="sxs-lookup"><span data-stu-id="65e0f-136">Quality-based VBR is no exception, in that you define neither bit rate nor buffer window for it.</span></span> <span data-ttu-id="65e0f-137">相反地，您可以設定品質值。</span><span class="sxs-lookup"><span data-stu-id="65e0f-137">Instead, you set a quality value.</span></span> <span data-ttu-id="65e0f-138">然後，編解碼器會嘗試壓縮資料，讓編碼媒體的品質在整個持續期間都一致，不論產生之資料流程的緩衝區需求為何。</span><span class="sxs-lookup"><span data-stu-id="65e0f-138">The codec then attempts to compress the data so that the quality of the encoded media is consistent throughout its duration, regardless of the buffer requirements of the resulting stream.</span></span>

<span data-ttu-id="65e0f-139">以品質為基礎的 VBR 使用單一編碼階段，通常會建立大型的壓縮資料流程。</span><span class="sxs-lookup"><span data-stu-id="65e0f-139">Quality-based VBR uses a single encoding pass and tends to create large compressed streams.</span></span> <span data-ttu-id="65e0f-140">當編碼完成時，編解碼器會設定緩衝區需求，讓解碼器可以解壓縮資料。</span><span class="sxs-lookup"><span data-stu-id="65e0f-140">When encoding is complete, the codec sets the buffer requirements so that the decoder can decompress the data.</span></span> <span data-ttu-id="65e0f-141">編碼的 VBR 資料流程不適合透過網路進行串流處理，因此以品質為基礎的 VBR 只應用於本機播放案例 (或下載並播放) 。</span><span class="sxs-lookup"><span data-stu-id="65e0f-141">The encoded VBR stream is not suitable for streaming over a network, so quality-based VBR should be used only for local playback scenarios (or download and play).</span></span>

## <a name="unconstrained-variable-bit-rate-encoding"></a><span data-ttu-id="65e0f-142">不受限制的變數位速率編碼</span><span class="sxs-lookup"><span data-stu-id="65e0f-142">Unconstrained Variable Bit Rate Encoding</span></span>

<span data-ttu-id="65e0f-143">不受限制的 VBR 與以品質為基礎的 VBR 不同，不會編碼為特定的品質等級。</span><span class="sxs-lookup"><span data-stu-id="65e0f-143">Unlike quality-based VBR, unconstrained VBR does not encode to a specific quality level.</span></span> <span data-ttu-id="65e0f-144">相反地，它會將內容編碼為可能品質的最高，同時維持指定的位元速率。</span><span class="sxs-lookup"><span data-stu-id="65e0f-144">Instead, it encodes the content to the highest possible quality while maintaining a specified bit rate.</span></span> <span data-ttu-id="65e0f-145">未受限制的 VBR 會使用兩種編碼階段，類似于兩次傳遞 CBR，不同之處在于您未指定資料流程的緩衝區視窗設定。</span><span class="sxs-lookup"><span data-stu-id="65e0f-145">Unconstrained VBR uses two encoding passes and is similar to two-pass CBR, except that you do not specify a buffer window setting for the stream.</span></span> <span data-ttu-id="65e0f-146">這表示，只要平均位元速率小於或等於您設定的值，資料流程中個別樣本的大小就沒有任何限制。</span><span class="sxs-lookup"><span data-stu-id="65e0f-146">This means that there is no limit to the size of individual samples in the stream, as long as the average bit rate is less than or equal to the value you set.</span></span>

<span data-ttu-id="65e0f-147">未受限制的 VBR 受限，因為有幾種播放案例都有需求來維持緩衝區需求。</span><span class="sxs-lookup"><span data-stu-id="65e0f-147">Unconstrained VBR is of limited use, because there are few playback scenarios that have requirements in keeping with its buffer requirements.</span></span> <span data-ttu-id="65e0f-148">編解碼器可以在編碼之後將緩衝區視窗設定為任何需要的值，讓您無法控制緩衝區大小。</span><span class="sxs-lookup"><span data-stu-id="65e0f-148">The codec can set the buffer window to whatever value is required after encoding, giving you no control over the buffer size.</span></span> <span data-ttu-id="65e0f-149">在大部分情況下，如果您不在意緩衝區大小或頻寬使用量的一致性，則應該使用以品質為基礎的 VBR。</span><span class="sxs-lookup"><span data-stu-id="65e0f-149">In most cases, if you are not concerned about the size of the buffer or the consistency of bandwidth usage, you should use quality-based VBR.</span></span>

## <a name="peak-constrained-variable-bit-rate-encoding"></a><span data-ttu-id="65e0f-150">Peak-Constrained 變數位速率編碼</span><span class="sxs-lookup"><span data-stu-id="65e0f-150">Peak-Constrained Variable Bit Rate Encoding</span></span>

<span data-ttu-id="65e0f-151">最終的編碼模式是尖峰限制的 VBR。</span><span class="sxs-lookup"><span data-stu-id="65e0f-151">The final encoding mode is peak-constrained VBR.</span></span> <span data-ttu-id="65e0f-152">這種模式與不受限制的 VBR 一樣，會使用兩種編碼傳遞，並將編碼為指定的位元速率。</span><span class="sxs-lookup"><span data-stu-id="65e0f-152">Like unconstrained VBR, this mode uses two encoding passes and encodes to a specified bit rate.</span></span> <span data-ttu-id="65e0f-153">不過，使用尖峰限制 VBR 也可以設定編碼的尖峰值。</span><span class="sxs-lookup"><span data-stu-id="65e0f-153">However, with peak constrained VBR you also configure the peak value for the encoding.</span></span> <span data-ttu-id="65e0f-154">尖峰值類似于一般的緩衝區設定值：有尖峰位元速率和尖峰緩衝區視窗。</span><span class="sxs-lookup"><span data-stu-id="65e0f-154">Peak values are similar to normal buffer configuration values: there is a peak bit rate and a peak buffer window.</span></span> <span data-ttu-id="65e0f-155">檔案經過編碼，以符合尖峰值所描述的緩衝區，條件是資料流程的整體平均位元速率等於或小於您指定的平均位元速率值。</span><span class="sxs-lookup"><span data-stu-id="65e0f-155">The file is encoded to conform to a buffer described by the peak values, with the condition that the overall average bit rate of the stream be equal to or less than the average bit rate value you specify.</span></span>

<span data-ttu-id="65e0f-156">受限的 VBR 可能難以理解。</span><span class="sxs-lookup"><span data-stu-id="65e0f-156">Constrained VBR can be difficult to conceptualize.</span></span> <span data-ttu-id="65e0f-157">以下是最簡單的方式，可考慮使用的緩衝模型。</span><span class="sxs-lookup"><span data-stu-id="65e0f-157">Here is the easiest way to think of the buffering model used.</span></span> <span data-ttu-id="65e0f-158">假設串流是一種 CBR 資料流程，其中的尖峰位速率和尖峰緩衝區視窗用來定義緩衝區。</span><span class="sxs-lookup"><span data-stu-id="65e0f-158">Suppose the stream is a CBR stream with the peak bit rate and peak buffer window used to define the buffer.</span></span> <span data-ttu-id="65e0f-159">通常，尖峰位速率很高。</span><span class="sxs-lookup"><span data-stu-id="65e0f-159">Typically, the peak bit rate is quite high.</span></span> <span data-ttu-id="65e0f-160">編碼器可確保您所指出的預期平均位元速率值會在資料流程的持續時間內進行維護。</span><span class="sxs-lookup"><span data-stu-id="65e0f-160">The encoder ensures that the expected average bit rate value you indicate is maintained over the duration of the stream.</span></span> <span data-ttu-id="65e0f-161">在資料流程中的任何特定點上，平均位元速率保證會大於串流的總大小（以秒為單位）（以秒為單位），) 。</span><span class="sxs-lookup"><span data-stu-id="65e0f-161">At any particular point in the stream, the average bit rate is guaranteed to be greater than the total stream size in bits divided by the stream duration in seconds).</span></span>

<span data-ttu-id="65e0f-162">請考慮下列範例：您設定的資料流程具有每秒16000位的平均位元速率、每秒48000位的尖峰位速率，以及 3000 (3 秒) 的尖峰緩衝區視窗。</span><span class="sxs-lookup"><span data-stu-id="65e0f-162">Consider the following example: You configure a stream with an average bit rate of 16,000 bits per second, a peak bit rate of 48,000 bits per second, and a peak buffer window of 3,000 (3 seconds).</span></span> <span data-ttu-id="65e0f-163">用於資料流程的緩衝區大小為144000位 (每秒48000位 x 3 秒，) 由尖峰值決定。</span><span class="sxs-lookup"><span data-stu-id="65e0f-163">The size of the buffer used for the stream is 144,000 bits (48,000 bits per second x 3 seconds) as determined by the peak values.</span></span> <span data-ttu-id="65e0f-164">編碼器會壓縮資料以符合該緩衝區。</span><span class="sxs-lookup"><span data-stu-id="65e0f-164">The encoder compresses the data to conform to that buffer.</span></span> <span data-ttu-id="65e0f-165">此外，資料流程的平均位元速率必須為16000或更少。</span><span class="sxs-lookup"><span data-stu-id="65e0f-165">Additionally, the average bit rate of the stream must be 16,000 or less.</span></span> <span data-ttu-id="65e0f-166">如果編碼器需要建立一些非常大型的範例來處理複雜的內容區段，它可以利用大型緩衝區大小。</span><span class="sxs-lookup"><span data-stu-id="65e0f-166">If the encoder needs to make some very large samples to handle a complex segment of content, it can take advantage of the large buffer size.</span></span> <span data-ttu-id="65e0f-167">但是資料流程的其他部分必須以較低的位元速率編碼，以將平均值帶到指定的層級。</span><span class="sxs-lookup"><span data-stu-id="65e0f-167">But other parts of the stream must be encoded at a lower bit rate to bring the average down to the specified level.</span></span>

<span data-ttu-id="65e0f-168">尖峰限制的 VBR 編碼適用于具有有限緩衝區容量和某些資料速率條件約束的播放裝置。</span><span class="sxs-lookup"><span data-stu-id="65e0f-168">Peak-constrained VBR encoding is useful for playback devices with a finite buffer capacity and some data rate constraints.</span></span> <span data-ttu-id="65e0f-169">其中一個常見的範例是用於 Dvd 的編碼方式。</span><span class="sxs-lookup"><span data-stu-id="65e0f-169">A common example of this is the encoding used for DVDs.</span></span>

## <a name="related-topics"></a><span data-ttu-id="65e0f-170">相關主題</span><span class="sxs-lookup"><span data-stu-id="65e0f-170">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="65e0f-171">使用 VBR 編碼</span><span class="sxs-lookup"><span data-stu-id="65e0f-171">Using VBR Encoding</span></span>](usingvbrencoding.md)
</dt> <dt>

[<span data-ttu-id="65e0f-172">Windows Media 轉碼器</span><span class="sxs-lookup"><span data-stu-id="65e0f-172">Windows Media Codecs</span></span>](windows-media-codecs.md)
</dt> </dl>

 

 



