---
description: 擴充的色彩資訊
ms.assetid: 05ca73c6-d105-47bc-96bc-b784f669febe
title: 擴充的色彩資訊
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 29ba43180a0f1e5253540088c1638f59d52380c9
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/07/2021
ms.locfileid: "103689299"
---
# <a name="extended-color-information"></a><span data-ttu-id="76e54-103">擴充的色彩資訊</span><span class="sxs-lookup"><span data-stu-id="76e54-103">Extended Color Information</span></span>

<span data-ttu-id="76e54-104">如果您知道 RGB 色彩的任何相關資訊，您就知道 (255、255、255) 是 *白色* 色彩的8位 RGB 三位數。</span><span class="sxs-lookup"><span data-stu-id="76e54-104">If you know anything about RGB color, you know that (255, 255, 255) is the 8-bit RGB triplet for the color *white*.</span></span> <span data-ttu-id="76e54-105">但是，這三種方法所定義的實際 *色彩* 為何？</span><span class="sxs-lookup"><span data-stu-id="76e54-105">But what is the actual *color* defined by this triplet?</span></span>

<span data-ttu-id="76e54-106">答案可能會令人驚訝：沒有一些額外的資訊，這三種情況不會定義任何特定的色彩！</span><span class="sxs-lookup"><span data-stu-id="76e54-106">The answer may be surprising: Without some additional information, this triplet does not define any particular color!</span></span> <span data-ttu-id="76e54-107">任何 RGB 值的意義取決於 *色彩空間*。</span><span class="sxs-lookup"><span data-stu-id="76e54-107">The meaning of any RGB value depends on the *color space*.</span></span> <span data-ttu-id="76e54-108">如果我們不知道色彩空間，請嚴格說，我們不知道色彩。</span><span class="sxs-lookup"><span data-stu-id="76e54-108">If we don't know the color space, then strictly speaking we don't know the color.</span></span>

<span data-ttu-id="76e54-109">色彩空間會定義指定色彩值的數值標記法如何以實體光線的形式重現。</span><span class="sxs-lookup"><span data-stu-id="76e54-109">A color space defines how the numeric representation of a given color value should be reproduced as physical light.</span></span> <span data-ttu-id="76e54-110">當影片編碼于一個色彩空間中，但顯示于另一個色彩空間時，除非影片經過色彩校正，否則會產生失真的色彩。</span><span class="sxs-lookup"><span data-stu-id="76e54-110">When video is encoded in one color space but is displayed in another, it results in distorted colors, unless the video is color-corrected.</span></span> <span data-ttu-id="76e54-111">因此，若要達到精確的色彩精確度，請務必知道來源影片的色彩空間。</span><span class="sxs-lookup"><span data-stu-id="76e54-111">To achieve accurate color fidelity, therefore, it is crucial to know the color space of the source video.</span></span> <span data-ttu-id="76e54-112">在過去，Windows 中的影片管線並未包含預期色彩空間的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="76e54-112">Previously, the video pipeline in Windows did not carry information about the intended color space.</span></span> <span data-ttu-id="76e54-113">從 Windows Vista 開始，DirectShow 和媒體基礎都支援媒體類型中的擴充色彩資訊。</span><span class="sxs-lookup"><span data-stu-id="76e54-113">Starting in Windows Vista, both DirectShow and Media Foundation support extended color information in the media type.</span></span> <span data-ttu-id="76e54-114">這項資訊也適用于 DirectX Video 加速 (DXVA) 。</span><span class="sxs-lookup"><span data-stu-id="76e54-114">This information is also available for DirectX Video Acceleration (DXVA).</span></span>

<span data-ttu-id="76e54-115">以數學方式描述色彩空間的標準方式是使用 CIE 的 XYZ 色彩空間，其定義依據照明的國際委員會 (CIE) 。</span><span class="sxs-lookup"><span data-stu-id="76e54-115">The standard way to describe a color space mathematically is to use the CIE XYZ color space, defined by the International Commission on Illumination (CIE).</span></span> <span data-ttu-id="76e54-116">在影片中直接使用 CIE XYZ 值並不實用，但 CIE XYZ 色彩空間可做為在色彩空間之間轉換時的中繼標記法。</span><span class="sxs-lookup"><span data-stu-id="76e54-116">It is not practical to use CIE XYZ values directly in video, but the CIE XYZ color space can be used as an intermediate representation when converting between color spaces.</span></span>

<span data-ttu-id="76e54-117">若要精確地重現色彩，需要下列資訊：</span><span class="sxs-lookup"><span data-stu-id="76e54-117">To reproduce colors accurately, the following information is needed:</span></span>

-   <span data-ttu-id="76e54-118">色彩主要複本。</span><span class="sxs-lookup"><span data-stu-id="76e54-118">Color primaries.</span></span> <span data-ttu-id="76e54-119">色彩主要複本定義 CIE XYZ tristimulus 值如何以 RGB 元件表示。</span><span class="sxs-lookup"><span data-stu-id="76e54-119">The color primaries define how CIE XYZ tristimulus values are represented as RGB components.</span></span> <span data-ttu-id="76e54-120">實際上，色彩主要複本會定義指定 RGB 值的「意義」。</span><span class="sxs-lookup"><span data-stu-id="76e54-120">In effect, the color primaries define the "meaning" of a given RGB value.</span></span>
-   <span data-ttu-id="76e54-121">Transfer 函數。</span><span class="sxs-lookup"><span data-stu-id="76e54-121">Transfer function.</span></span> <span data-ttu-id="76e54-122">傳送函式是將線性 RGB 值轉換成非線性 R'G'B 值的函式。</span><span class="sxs-lookup"><span data-stu-id="76e54-122">The transfer function is a function that converts linear RGB values to non-linear R'G'B' values.</span></span> <span data-ttu-id="76e54-123">這個函式也稱為 *gamma 校正*。</span><span class="sxs-lookup"><span data-stu-id="76e54-123">This function is also called *gamma correction*.</span></span>
-   <span data-ttu-id="76e54-124">轉移矩陣。</span><span class="sxs-lookup"><span data-stu-id="76e54-124">Transfer matrix.</span></span> <span data-ttu-id="76e54-125">傳送矩陣會定義 R'G'B ' 轉換成 Y'PbPr 的方式。</span><span class="sxs-lookup"><span data-stu-id="76e54-125">The transfer matrix defines how R'G'B' is converted to Y'PbPr.</span></span>
-   <span data-ttu-id="76e54-126">色度取樣。</span><span class="sxs-lookup"><span data-stu-id="76e54-126">Chroma sampling.</span></span> <span data-ttu-id="76e54-127">在 luma 的色度元件中，大部分的 YUV 影片都會以較少的解析度進行傳輸。</span><span class="sxs-lookup"><span data-stu-id="76e54-127">Most YUV video is transmitted with less resolution in the chroma components than the luma.</span></span> <span data-ttu-id="76e54-128">以影片格式的 FOURCC 表示色度取樣。</span><span class="sxs-lookup"><span data-stu-id="76e54-128">Chroma sampling is indicated by the FOURCC of the video format.</span></span> <span data-ttu-id="76e54-129">例如，YUY2 是4:2:2 格式，這表示會以2的因數水準取樣色度樣本。</span><span class="sxs-lookup"><span data-stu-id="76e54-129">For example, YUY2 is a 4:2:2 format, meaning the chroma samples are sampled horizontally by a factor of 2.</span></span>
-   <span data-ttu-id="76e54-130">色度地點。</span><span class="sxs-lookup"><span data-stu-id="76e54-130">Chroma siting.</span></span> <span data-ttu-id="76e54-131">取樣色度時，與 luma 樣本相關的色度樣本位置會決定如何插入遺漏的樣本。</span><span class="sxs-lookup"><span data-stu-id="76e54-131">When the chroma is sampled, the position of the chroma samples relative to the luma samples determines how the missing samples should be interpolated.</span></span>
-   <span data-ttu-id="76e54-132">名義範圍。</span><span class="sxs-lookup"><span data-stu-id="76e54-132">Nominal range.</span></span> <span data-ttu-id="76e54-133">名義範圍定義如何將 Y'PbPr 值調整為 Y'CbCr。</span><span class="sxs-lookup"><span data-stu-id="76e54-133">The nominal range defines how Y'PbPr values are scaled to Y'CbCr.</span></span>

## <a name="color-space-in-media-types"></a><span data-ttu-id="76e54-134">媒體類型中的色彩空間</span><span class="sxs-lookup"><span data-stu-id="76e54-134">Color Space in Media Types</span></span>

<span data-ttu-id="76e54-135">DirectShow、媒體基礎和 DirectX Video 加速 (DXVA) 都有不同的方式來表示影片格式。</span><span class="sxs-lookup"><span data-stu-id="76e54-135">DirectShow, Media Foundation, and DirectX Video Acceleration (DXVA) all have different ways to represent video formats.</span></span> <span data-ttu-id="76e54-136">幸運的是，由於相關列舉相同，因此很容易就能將色彩空間資訊從一個轉換成另一個。</span><span class="sxs-lookup"><span data-stu-id="76e54-136">Fortunately, it is easy to translate the color-space information from one to another, because the relevant enumerations are the same.</span></span>

-   <span data-ttu-id="76e54-137">DXVA 1.0： [**DXVA \_ ExtendedFormat**](/windows-hardware/drivers/ddi/dxva/ns-dxva-_dxva_extendedformat) 結構中提供了色彩空間資訊。</span><span class="sxs-lookup"><span data-stu-id="76e54-137">DXVA 1.0: Color-space information is given in the [**DXVA\_ExtendedFormat**](/windows-hardware/drivers/ddi/dxva/ns-dxva-_dxva_extendedformat) structure.</span></span>
-   <span data-ttu-id="76e54-138">DXVA 2.0： [**DXVA2 \_ ExtendedFormat**](/windows/desktop/api/dxva2api/ns-dxva2api-dxva2_extendedformat) 結構結構中提供了色彩空間資訊。</span><span class="sxs-lookup"><span data-stu-id="76e54-138">DXVA 2.0: Color-space information is given in the [**DXVA2\_ExtendedFormat**](/windows/desktop/api/dxva2api/ns-dxva2api-dxva2_extendedformat) structure structure.</span></span> <span data-ttu-id="76e54-139">此結構與 DXVA 1.0 結構相同，而且欄位的意義相同。</span><span class="sxs-lookup"><span data-stu-id="76e54-139">This structure is identical to the DXVA 1.0 structure, and the meaning of the fields is the same.</span></span>
-   <span data-ttu-id="76e54-140">DirectShow： [**VIDEOINFOHEADER2**](/previous-versions/windows/desktop/api/dvdmedia/ns-dvdmedia-videoinfoheader2) 結構中提供色彩空間資訊。</span><span class="sxs-lookup"><span data-stu-id="76e54-140">DirectShow: Color-space information is given in the [**VIDEOINFOHEADER2**](/previous-versions/windows/desktop/api/dvdmedia/ns-dvdmedia-videoinfoheader2) structure.</span></span> <span data-ttu-id="76e54-141">這項資訊會儲存在 **dwControlFlags** 欄位的最高24位。</span><span class="sxs-lookup"><span data-stu-id="76e54-141">The information is stored in the upper 24 bits of the **dwControlFlags** field.</span></span> <span data-ttu-id="76e54-142">如果有色彩空間資訊，請在 **dwControlFlags** 中設定 **AMCONTROL \_ COLORINFO \_ 目前** 旗標。</span><span class="sxs-lookup"><span data-stu-id="76e54-142">If color-space information is present, set the **AMCONTROL\_COLORINFO\_PRESENT** flag in **dwControlFlags**.</span></span> <span data-ttu-id="76e54-143">當設定這個旗標時， **dwControlFlags** 欄位應該被解釋為 [**DXVA \_ ExtendedFormat**](/windows-hardware/drivers/ddi/dxva/ns-dxva-_dxva_extendedformat) 結構，但結構的較低8個位會保留給 **AMCONTROL \_ xxx** 旗標。</span><span class="sxs-lookup"><span data-stu-id="76e54-143">When this flag is set, the **dwControlFlags** field should be interpreted as a [**DXVA\_ExtendedFormat**](/windows-hardware/drivers/ddi/dxva/ns-dxva-_dxva_extendedformat) structure, except that the lower 8 bits of the structure are reserved for **AMCONTROL\_xxx** flags.</span></span>
-   <span data-ttu-id="76e54-144">影片捕獲驅動程式：在 [**KS \_ VIDEOINFOHEADER2**](/windows-hardware/drivers/ddi/ksmedia/ns-ksmedia-tagks_videoinfoheader2) 結構中提供色彩空間資訊。</span><span class="sxs-lookup"><span data-stu-id="76e54-144">Video capture drivers: Color-space information is given in the [**KS\_VIDEOINFOHEADER2**](/windows-hardware/drivers/ddi/ksmedia/ns-ksmedia-tagks_videoinfoheader2) structure.</span></span> <span data-ttu-id="76e54-145">此結構與 [**VIDEOINFOHEADER2**](/previous-versions/windows/desktop/api/dvdmedia/ns-dvdmedia-videoinfoheader2) 結構相同，而且欄位的意義相同。</span><span class="sxs-lookup"><span data-stu-id="76e54-145">This structure is identical to the [**VIDEOINFOHEADER2**](/previous-versions/windows/desktop/api/dvdmedia/ns-dvdmedia-videoinfoheader2) structure, and the meaning of the fields is the same.</span></span>
-   <span data-ttu-id="76e54-146">媒體基礎：色彩空間資訊會以屬性的形式儲存在媒體類型中：</span><span class="sxs-lookup"><span data-stu-id="76e54-146">Media Foundation: Color-space information is stored as attributes in the media type:</span></span>

    

    | <span data-ttu-id="76e54-147">色彩資訊</span><span class="sxs-lookup"><span data-stu-id="76e54-147">Color information</span></span>  | <span data-ttu-id="76e54-148">屬性</span><span class="sxs-lookup"><span data-stu-id="76e54-148">Attribute</span></span>                                                                                                                                                   |
    |--------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------|
    | <span data-ttu-id="76e54-149">色彩主要複本</span><span class="sxs-lookup"><span data-stu-id="76e54-149">Color primaries</span></span>    | [<span data-ttu-id="76e54-150">**MF \_ MT \_ 影片 \_ 主要複本**</span><span class="sxs-lookup"><span data-stu-id="76e54-150">**MF\_MT\_VIDEO\_PRIMARIES**</span></span>](mf-mt-video-primaries-attribute.md)                                                                                         |
    | <span data-ttu-id="76e54-151">Transfer 函數</span><span class="sxs-lookup"><span data-stu-id="76e54-151">Transfer function</span></span>  | [<span data-ttu-id="76e54-152">**MF \_ MT \_ 傳送函式 \_**</span><span class="sxs-lookup"><span data-stu-id="76e54-152">**MF\_MT\_TRANSFER\_FUNCTION**</span></span>](mf-mt-transfer-function-attribute.md)                                                                                     |
    | <span data-ttu-id="76e54-153">轉移矩陣</span><span class="sxs-lookup"><span data-stu-id="76e54-153">Transfer matrix</span></span>    | [<span data-ttu-id="76e54-154">**MF \_ MT \_ YUV \_ 矩陣**</span><span class="sxs-lookup"><span data-stu-id="76e54-154">**MF\_MT\_YUV\_MATRIX**</span></span>](mf-mt-yuv-matrix-attribute.md)                                                                                                   |
    | <span data-ttu-id="76e54-155">色度次取樣</span><span class="sxs-lookup"><span data-stu-id="76e54-155">Chroma subsampling</span></span> | [<span data-ttu-id="76e54-156">**MF \_ MT \_ 子類型**</span><span class="sxs-lookup"><span data-stu-id="76e54-156">**MF\_MT\_SUBTYPE**</span></span>](mf-mt-subtype-attribute.md)<br/> <span data-ttu-id="76e54-157">FOURCC 所指定的 (，會儲存在子類型 GUID 的第一個 **DWORD** 中 ) </span><span class="sxs-lookup"><span data-stu-id="76e54-157">(Given by the FOURCC, which is stored in the first **DWORD** of the subtype GUID.)</span></span><br/> |
    | <span data-ttu-id="76e54-158">色度地點</span><span class="sxs-lookup"><span data-stu-id="76e54-158">Chroma siting</span></span>      | [<span data-ttu-id="76e54-159">**MF \_ MT \_ 視頻 \_ 色度 \_ 地點**</span><span class="sxs-lookup"><span data-stu-id="76e54-159">**MF\_MT\_VIDEO\_CHROMA\_SITING**</span></span>](mf-mt-video-chroma-siting-attribute.md)                                                                                |
    | <span data-ttu-id="76e54-160">名義範圍</span><span class="sxs-lookup"><span data-stu-id="76e54-160">Nominal range</span></span>      | [<span data-ttu-id="76e54-161">**MF \_ MT \_ 影片 \_ 名義 \_ 範圍**</span><span class="sxs-lookup"><span data-stu-id="76e54-161">**MF\_MT\_VIDEO\_NOMINAL\_RANGE**</span></span>](mf-mt-video-nominal-range-attribute.md)                                                                                |

    

     

## <a name="color-space-conversion"></a><span data-ttu-id="76e54-162">色彩空間轉換</span><span class="sxs-lookup"><span data-stu-id="76e54-162">Color Space Conversion</span></span>

<span data-ttu-id="76e54-163">從一個 Y'CbCr 空間轉換成另一個空間需要執行下列步驟。</span><span class="sxs-lookup"><span data-stu-id="76e54-163">Conversion from one Y'CbCr space to another requires the following steps.</span></span>

1.  <span data-ttu-id="76e54-164">反向量化：使用來源名義範圍將 Y'CbCr 表示轉換成 Y'PbPr 標記法。</span><span class="sxs-lookup"><span data-stu-id="76e54-164">Inverse quantization: Convert the Y'CbCr representation to a Y'PbPr representation, using the source nominal range.</span></span>
2.  <span data-ttu-id="76e54-165">Upsampling：插上色度值以將取樣的色度值轉換為4:4:4。</span><span class="sxs-lookup"><span data-stu-id="76e54-165">Upsampling: Convert the sampled chroma values to 4:4:4 by interpolating chroma values.</span></span>
3.  <span data-ttu-id="76e54-166">YUV 至 RGB 轉換：使用來源傳輸矩陣從 Y'PbPr 轉換成非線性 R'G'B。</span><span class="sxs-lookup"><span data-stu-id="76e54-166">YUV to RGB conversion: Convert from Y'PbPr to non-linear R'G'B', using the source transfer matrix.</span></span>
4.  <span data-ttu-id="76e54-167">反向傳送函式：使用傳送函式的反向轉換非線性 R'G'B ' 轉換為線性 RGB。</span><span class="sxs-lookup"><span data-stu-id="76e54-167">Inverse transfer function: Convert non-linear R'G'B' to linear RGB, using the inverse of the transfer function.</span></span>
5.  <span data-ttu-id="76e54-168">RGB 色彩空間轉換：使用色彩主要複本從來源 RGB 空間轉換成目標 RGB 空間。</span><span class="sxs-lookup"><span data-stu-id="76e54-168">RGB color space conversion: Use the color primaries to convert from the source RGB space to the target RGB space.</span></span>
6.  <span data-ttu-id="76e54-169">傳送函式：使用目標傳送函式，將線性 RGB 轉換成非線性 R'G'B。</span><span class="sxs-lookup"><span data-stu-id="76e54-169">Transfer function: Convert linear RGB to non-linear R'G'B, using the target transfer function.</span></span>

7.  <span data-ttu-id="76e54-170">RGB 至 YUV 轉換：使用目標傳輸矩陣將 R'G'B ' 轉換為 Y'PbPr。</span><span class="sxs-lookup"><span data-stu-id="76e54-170">RGB to YUV conversion: Convert R'G'B' to Y'PbPr, using the target transfer matrix.</span></span>
8.  <span data-ttu-id="76e54-171">縮減取樣：篩選色度值以將4:4:4 轉換為4:2:2、4:2:0 或4:1:1。</span><span class="sxs-lookup"><span data-stu-id="76e54-171">Downsampling: Convert 4:4:4 to 4:2:2, 4:2:0, or 4:1:1 by filtering the chroma values.</span></span>
9.  <span data-ttu-id="76e54-172">量化：使用目標名義範圍將 Y'PbPr 轉換為 Y'CbCr。</span><span class="sxs-lookup"><span data-stu-id="76e54-172">Quantization: Convert Y'PbPr to Y'CbCr, using the target nominal range.</span></span>

<span data-ttu-id="76e54-173">步驟1–4發生于來源色彩空間，而步驟6–9則出現在目標色彩空間中。</span><span class="sxs-lookup"><span data-stu-id="76e54-173">Steps 1–4 occur in the source color space, and steps 6–9 occur in the target color space.</span></span> <span data-ttu-id="76e54-174">在實際的執行中，中間步驟可以是近似值，而且可以合併連續的步驟。</span><span class="sxs-lookup"><span data-stu-id="76e54-174">In the actual implementation, intermediate steps can be approximated and adjacent steps can be combined.</span></span> <span data-ttu-id="76e54-175">一般來說，精確度和計算成本之間會有取捨。</span><span class="sxs-lookup"><span data-stu-id="76e54-175">There is generally a trade-off between accuracy and computational cost.</span></span>

<span data-ttu-id="76e54-176">例如，若要從 RT. 601 轉換為 RT. 709 需要下列階段：</span><span class="sxs-lookup"><span data-stu-id="76e54-176">For example, to convert from RT.601 to RT.709 requires the following stages:</span></span>

-   <span data-ttu-id="76e54-177">反向量化： Y'CbCr (601) 至 Y'PbPr (601) </span><span class="sxs-lookup"><span data-stu-id="76e54-177">Inverse quantization: Y'CbCr(601) to Y'PbPr(601)</span></span>
-   <span data-ttu-id="76e54-178">Upsampling： Y'PbPr (601) </span><span class="sxs-lookup"><span data-stu-id="76e54-178">Upsampling: Y'PbPr(601)</span></span>
-   <span data-ttu-id="76e54-179">YUV 至 RGB： Y'PbPr (601) 至 R'G'B ' (601) </span><span class="sxs-lookup"><span data-stu-id="76e54-179">YUV to RGB: Y'PbPr(601) to R'G'B'(601)</span></span>
-   <span data-ttu-id="76e54-180">反向傳送函式： R'G'B ' (601) 至 RGB (601) </span><span class="sxs-lookup"><span data-stu-id="76e54-180">Inverse transfer function: R'G'B'(601) to RGB(601)</span></span>
-   <span data-ttu-id="76e54-181">RGB 色彩空間轉換： RGB (601) 至 RGB (709) </span><span class="sxs-lookup"><span data-stu-id="76e54-181">RGB color space conversion: RGB(601) to RGB(709)</span></span>
-   <span data-ttu-id="76e54-182">傳送函式： RGB (709) R'G'B ' (709) </span><span class="sxs-lookup"><span data-stu-id="76e54-182">Transfer function: RGB(709) to R'G'B'(709)</span></span>
-   <span data-ttu-id="76e54-183">RGB 至 YUV： R'G'B ' (709) 至 Y'PbPr (709) </span><span class="sxs-lookup"><span data-stu-id="76e54-183">RGB to YUV: R'G'B'(709) to Y'PbPr(709)</span></span>
-   <span data-ttu-id="76e54-184">縮減取樣： Y'PbPr (709) </span><span class="sxs-lookup"><span data-stu-id="76e54-184">Downsampling: Y'PbPr(709)</span></span>

-   <span data-ttu-id="76e54-185">量化： Y'PbPr (709) 至 Y'CbCr (709) </span><span class="sxs-lookup"><span data-stu-id="76e54-185">Quantization: Y'PbPr(709) to Y'CbCr(709)</span></span>

## <a name="using-extended-color-information"></a><span data-ttu-id="76e54-186">使用擴充的色彩資訊</span><span class="sxs-lookup"><span data-stu-id="76e54-186">Using Extended Color Information</span></span>

<span data-ttu-id="76e54-187">若要在整個管線中保持色彩精確度，必須在來源或解碼器導入色彩空間資訊，並透過管線將所有方法傳達給接收器。</span><span class="sxs-lookup"><span data-stu-id="76e54-187">To preserve color fidelity throughout the pipeline, color-space information must be introduced at the source or the decoder and conveyed all the way through the pipeline to the sink.</span></span>

### <a name="video-capture-devices"></a><span data-ttu-id="76e54-188">影片捕獲裝置</span><span class="sxs-lookup"><span data-stu-id="76e54-188">Video Capture Devices</span></span>

<span data-ttu-id="76e54-189">大部分的類比捕獲裝置會在捕獲影片時使用妥善定義的色彩空間。</span><span class="sxs-lookup"><span data-stu-id="76e54-189">Most analog capture devices use a well-defined color space when capturing video.</span></span> <span data-ttu-id="76e54-190">Capture 驅動程式應該提供包含色彩資訊之 **KS \_ VIDEOINFOHEADER2** 格式區塊的格式。</span><span class="sxs-lookup"><span data-stu-id="76e54-190">Capture drivers should offer a format with a **KS\_VIDEOINFOHEADER2** format block that contains the color information.</span></span> <span data-ttu-id="76e54-191">為了回溯相容性，驅動程式應該接受不包含色彩資訊的格式。</span><span class="sxs-lookup"><span data-stu-id="76e54-191">For backward compatibility, the driver should accept formats that do not contain the color information.</span></span> <span data-ttu-id="76e54-192">這可讓驅動程式使用不接受擴充色彩資訊的元件。</span><span class="sxs-lookup"><span data-stu-id="76e54-192">This will enable the driver to work with components that do not accept the extended color information.</span></span>

### <a name="file-based-sources"></a><span data-ttu-id="76e54-193">以檔案為基礎的來源</span><span class="sxs-lookup"><span data-stu-id="76e54-193">File-based Sources</span></span>

<span data-ttu-id="76e54-194">剖析影片檔案時，DirectShow) 中的媒體來源 (或剖析器篩選器可能會提供一些色彩資訊。</span><span class="sxs-lookup"><span data-stu-id="76e54-194">When parsing a video file, the media source (or parser filter, in DirectShow) might be able to provide some of the color information.</span></span> <span data-ttu-id="76e54-195">例如，DVD 導覽器可以根據 DVD 內容來決定色彩空間。</span><span class="sxs-lookup"><span data-stu-id="76e54-195">For example, the DVD Navigator can determine the color space based on the DVD content.</span></span> <span data-ttu-id="76e54-196">其他色彩資訊可能可用於此解碼器。</span><span class="sxs-lookup"><span data-stu-id="76e54-196">Other color information might be available to the decoder.</span></span> <span data-ttu-id="76e54-197">例如，MPEG-2 基本影片串流會在序列顯示延伸模組欄位中提供色彩資訊 \_ \_ 。</span><span class="sxs-lookup"><span data-stu-id="76e54-197">For example, an MPEG-2 elementary video stream gives the color information in the sequence\_display\_extension field.</span></span> <span data-ttu-id="76e54-198">如果色彩資訊未在來源中明確描述，則可能由內容類型隱含定義。</span><span class="sxs-lookup"><span data-stu-id="76e54-198">If the color information is not explicitly described in the source, it might be defined implicitly by the type of content.</span></span> <span data-ttu-id="76e54-199">例如，NTSC 和 PAL 的 DV 影片各使用不同的色彩空間。</span><span class="sxs-lookup"><span data-stu-id="76e54-199">For example, the NTSC and PAL varieties of DV video each use different color spaces.</span></span> <span data-ttu-id="76e54-200">最後，該解碼器可以使用從來源的媒體類型取得的任何色彩資訊。</span><span class="sxs-lookup"><span data-stu-id="76e54-200">Finally, the decoder can use whatever color information it gets from the source's media type.</span></span>

### <a name="other-components"></a><span data-ttu-id="76e54-201">其他元件</span><span class="sxs-lookup"><span data-stu-id="76e54-201">Other Components</span></span>

<span data-ttu-id="76e54-202">其他元件可能需要在媒體類型中使用色彩空間資訊：</span><span class="sxs-lookup"><span data-stu-id="76e54-202">Other components might need to use the color-space information in a media type:</span></span>

-   <span data-ttu-id="76e54-203">選取轉換演算法時，軟體色彩空間轉換器應該使用色彩空間資訊。</span><span class="sxs-lookup"><span data-stu-id="76e54-203">Software color-space converters should use color-space information when selecting a conversion algorithm.</span></span>
-   <span data-ttu-id="76e54-204">影片 mixers （例如增強的影片轉譯器 (EVR) 混音器）應該在混合不同內容類型的影片串流時使用色彩資訊。</span><span class="sxs-lookup"><span data-stu-id="76e54-204">Video mixers, such as the enhanced video renderer (EVR) mixer, should use the color information when mixing video streams from different types of content.</span></span>
-   <span data-ttu-id="76e54-205">DXVA 影片處理 Api 和 DDIs 可讓呼叫者指定色彩空間資訊資訊。</span><span class="sxs-lookup"><span data-stu-id="76e54-205">The DXVA video processing APIs and DDIs enable the caller to specify color-space information information.</span></span> <span data-ttu-id="76e54-206">GPU 應該在執行模擬器的影片混合時使用此資訊。</span><span class="sxs-lookup"><span data-stu-id="76e54-206">The GPU should use this information when it performs hardward video mixing.</span></span>

## <a name="related-topics"></a><span data-ttu-id="76e54-207">相關主題</span><span class="sxs-lookup"><span data-stu-id="76e54-207">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="76e54-208">影片媒體類型</span><span class="sxs-lookup"><span data-stu-id="76e54-208">Video Media Types</span></span>](video-media-types.md)
</dt> <dt>

[<span data-ttu-id="76e54-209">DirectX Video 加速2。0</span><span class="sxs-lookup"><span data-stu-id="76e54-209">DirectX Video Acceleration 2.0</span></span>](directx-video-acceleration-2-0.md)
</dt> </dl>

 

 
