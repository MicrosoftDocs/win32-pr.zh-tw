---
description: 關於拓撲
ms.assetid: 4f69b099-0ca7-4ea6-8412-0f1ea02e1600
title: 關於拓撲
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 35008d839e8054554370039dd13297ae7a1f0b0a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/07/2021
ms.locfileid: "104555604"
---
# <a name="about-topologies"></a>關於拓撲

拓撲是物件，代表管線中的資料流程。 應用程式會建立拓撲，以描述每個串流從媒體來源到媒體接收器所採用的路徑。 應用程式會將拓撲傳遞給媒體會話，而媒體會話會使用拓撲來控制資料流程。

管線中的資料處理元件 (媒體來源、轉換和媒體接收器) 會在拓撲中表示為 *節點*。 從某個元件到另一個元件的資料流程會以節點之間的連接來表示。 以下是定義的節點類型：

-   來源節點：代表媒體來源上的媒體資料流程。
-   轉換節點：代表媒體基礎轉換 (MFT) 。
-   輸出節點：表示媒體接收上的資料流程接收。
-   T a node：代表資料流程中的分支。 T 節點是節點代表管線物件的規則例外。 與其他節點型別不同的是，t 節點會直接導向資料的流程。

正常運作的拓撲必須包含至少一個連接至輸出節點的來源節點，可能是透過一或多個轉換節點。 例如，下圖顯示具有一個資料流程的簡單拓撲。

![顯示具有一個資料流程之拓撲的圖表。](images/topology01.png)

針對檔案播放，轉換節點可能代表一個解碼器，輸出節點則代表音訊或影片轉譯器。 針對檔案編碼，[轉換] 節點會代表一個編碼器，而輸出節點則代表一個封存接收器，例如「ASF 檔案接收」。

如果有兩個節點連接，則產生資料的節點稱為 *上游* 節點，而接收資料的節點稱為 *下游* 節點。 例如，在上圖中，來源節點是 [轉換] 節點的上游。

在一對連接的節點中，上游節點上的連接點稱為 *輸出*。 下游節點上的連接點稱為 *輸入*。 下圖顯示一對節點及其連接點，以及兩者之間的資料流程動。 連接點不會以拓撲中的個別物件表示。 它們是由節點物件上的索引值所指定。

![顯示兩個已連線節點的圖表。](images/topology04.png)

來源節點不能有任何輸入。 因此，不能有來自來源節點的任何節點上游。 同樣地，輸出節點不能有輸出，也不能有輸出節點下游的任何節點。 從來源節點到輸出節點的節點鏈稱為拓撲的 *分支* 。 本主題中的第一個圖表顯示具有單一分支的拓撲。 一般來說，每個串流都有一個分支。 例如，若要播放包含一個音訊串流和一個影片串流的檔案，則需要具有兩個分支的拓撲。

## <a name="partial-topologies"></a>部分拓撲

完整或 *完整* 拓撲包含所需的每個管線物件的節點。 不過，應用程式不一定需要建立完整的拓撲。 相反地，它會建立省略一或多個轉換節點的 *部分* 拓撲。

媒體會話會使用稱為 *拓撲載入* 器的物件來完成拓撲。 拓撲載入器會插入所需的轉換，將部分拓撲轉換成完整的拓撲。 轉換的處理常式稱為 *解析* 拓撲。

例如，若要播放編碼的音訊串流，拓撲在來源和輸出節點之間必須有一個解碼器。 應用程式會建立部分拓撲，將來源節點直接連接至輸出節點，而不使用解碼器。 拓撲載入器會檢查串流格式、尋找正確的解碼器，並將轉換節點插入拓撲中。

下圖顯示應用程式所建立的部分拓撲。

![顯示部分具有來源節點和輸出節點的圖表。](images/topology02.png)

下圖顯示拓撲載入器解析之後的完整拓撲。 在此範例中，拓撲載入器已插入了該解碼器的轉換節點。

![顯示完整拓撲的圖表。](images/topology03.png)

在目前版本的媒體基礎中，拓撲載入器支援播放的拓撲。 針對檔案編碼和其他案例，應用程式必須建立完整的拓撲。

應用程式也可以建立拓撲載入器並直接使用。 例如，您可以使用拓撲載入器來解析部分拓撲，然後修改完整拓撲，再將它提供給媒體會話。 若要建立拓撲載入器，請呼叫 [**MFCreateTopoLoader**](/windows/desktop/api/mfidl/nf-mfidl-mfcreatetopoloader)。

## <a name="related-topics"></a>相關主題

<dl> <dt>

[拓撲](topologies.md)
</dt> </dl>

 

 



