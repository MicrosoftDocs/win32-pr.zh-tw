---
title: Windows 應用程式認證套件測試
description: 以下是認證 dekstop apps 的測試詳細資料。
ms.assetid: FA160F46-C266-4F89-B77F-166FEA9ED96B
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a353eef0cd73fecac275b750345b3dd97d05dc87
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/20/2020
ms.locfileid: "106965249"
---
# <a name="windows-app-certification-kit-tests"></a><span data-ttu-id="e3c15-103">Windows 應用程式認證套件測試</span><span class="sxs-lookup"><span data-stu-id="e3c15-103">Windows App Certification Kit tests</span></span>

<span data-ttu-id="e3c15-104">以下是認證 dekstop apps 的測試詳細資料。</span><span class="sxs-lookup"><span data-stu-id="e3c15-104">Below are test details for certifying dekstop apps.</span></span> <span data-ttu-id="e3c15-105">如需詳細資訊，請參閱 [使用 Windows 應用程式認證套件](using-the-windows-app-certification-kit.md)。</span><span class="sxs-lookup"><span data-stu-id="e3c15-105">For information, please refer to [Using the Windows App Certification Kit](using-the-windows-app-certification-kit.md).</span></span>

-   [<span data-ttu-id="e3c15-106">清除可還原的安裝</span><span class="sxs-lookup"><span data-stu-id="e3c15-106">Clean reversible install</span></span>](#clean-reversible-install)
-   [<span data-ttu-id="e3c15-107">安裝到正確的資料夾測試</span><span class="sxs-lookup"><span data-stu-id="e3c15-107">Install to the correct folders test</span></span>](#install-to-the-correct-folders-test)
-   [<span data-ttu-id="e3c15-108">經過數位簽署的檔案測試</span><span class="sxs-lookup"><span data-stu-id="e3c15-108">Digitally signed file test</span></span>](#digitally-signed-file-test)
-   [<span data-ttu-id="e3c15-109">支援 x64 Windows 測試</span><span class="sxs-lookup"><span data-stu-id="e3c15-109">Support x64 Windows test</span></span>](#support-x64-windows-test)
-   [<span data-ttu-id="e3c15-110">作業系統版本檢查測試</span><span class="sxs-lookup"><span data-stu-id="e3c15-110">OS version checking test</span></span>](#os-version-checking-test)
-   [<span data-ttu-id="e3c15-111"> (UAC) 測試的使用者帳戶控制</span><span class="sxs-lookup"><span data-stu-id="e3c15-111">User account control (UAC) test</span></span>](#user-account-control-uac-test)
-   [<span data-ttu-id="e3c15-112">遵守系統重新開機管理員訊息</span><span class="sxs-lookup"><span data-stu-id="e3c15-112">Adhere to system restart manager messages</span></span>](#adhere-to-system-restart-manager-messages)
-   [<span data-ttu-id="e3c15-113">安全模式測試</span><span class="sxs-lookup"><span data-stu-id="e3c15-113">Safe mode test</span></span>](#safe-mode-test)
-   [<span data-ttu-id="e3c15-114">多使用者會話測試</span><span class="sxs-lookup"><span data-stu-id="e3c15-114">Multiuser session test</span></span>](#multiuser-session-test)
-   [<span data-ttu-id="e3c15-115">當機和停止回應測試</span><span class="sxs-lookup"><span data-stu-id="e3c15-115">Crashes and hangs test</span></span>](#crashes-and-hangs-test)
-   [<span data-ttu-id="e3c15-116">相容性與復原能力測試</span><span class="sxs-lookup"><span data-stu-id="e3c15-116">Compatibility and resiliency test</span></span>](#compatibility-and-resiliency-test)
-   [<span data-ttu-id="e3c15-117">Windows 安全性最佳作法測試</span><span class="sxs-lookup"><span data-stu-id="e3c15-117">Windows Security best practices test</span></span>](#windows-security-best-practices-test)
-   [<span data-ttu-id="e3c15-118">Windows 安全性功能測試</span><span class="sxs-lookup"><span data-stu-id="e3c15-118">Windows Security features test</span></span>](#windows-security-features-test)
-   [<span data-ttu-id="e3c15-119">高 DPI 測試</span><span class="sxs-lookup"><span data-stu-id="e3c15-119">High DPI test</span></span>](#high-dpi-test)

## <a name="clean-reversible-install"></a><span data-ttu-id="e3c15-120">清除可還原的安裝</span><span class="sxs-lookup"><span data-stu-id="e3c15-120">Clean reversible install</span></span>

<span data-ttu-id="e3c15-121">安裝和卸載應用程式，並檢查剩餘的檔案和登錄專案。</span><span class="sxs-lookup"><span data-stu-id="e3c15-121">Installs and uninstalls the app and checks for residual files and registry entries.</span></span>

-   <span data-ttu-id="e3c15-122">背景</span><span class="sxs-lookup"><span data-stu-id="e3c15-122">Background</span></span>
    -   <span data-ttu-id="e3c15-123">乾淨且可還原的安裝可讓使用者部署和移除應用程式。</span><span class="sxs-lookup"><span data-stu-id="e3c15-123">A clean, reversible installation enables users to deploy and remove apps.</span></span> <span data-ttu-id="e3c15-124">若要通過此測試，應用程式必須執行下列動作：</span><span class="sxs-lookup"><span data-stu-id="e3c15-124">To pass this test, the app must do the following:</span></span>
        -   <span data-ttu-id="e3c15-125">安裝或卸載應用程式之後，應用程式不會強制系統立即重新開機。</span><span class="sxs-lookup"><span data-stu-id="e3c15-125">The app doesn't force the system to restart immediately after installing or uninstalling the app.</span></span> <span data-ttu-id="e3c15-126">*應用程式的安裝或卸載程式在完成後，應該永遠不需要重新開機系統。如果需要重新開機系統，使用者應該能夠在方便的情況下重新開機系統。*</span><span class="sxs-lookup"><span data-stu-id="e3c15-126">*An app's install or uninstall process should never require a system restart right after it completes. If this requires the system to be restarted, users should be able to restart the system at their convenience.*</span></span>
        -   <span data-ttu-id="e3c15-127">應用程式不會相依于 8.3 (SFN) 的簡短檔案名。</span><span class="sxs-lookup"><span data-stu-id="e3c15-127">The app isn't dependent on 8.3 short file names (SFN).</span></span> <span data-ttu-id="e3c15-128">*應用程式的安裝和卸載程式必須能夠使用長檔名和資料夾路徑。*</span><span class="sxs-lookup"><span data-stu-id="e3c15-128">*The app's install and uninstall processes must be able to use long file names and folder paths.*</span></span>
        -   <span data-ttu-id="e3c15-129">應用程式不會封鎖無訊息安裝/卸載</span><span class="sxs-lookup"><span data-stu-id="e3c15-129">The app doesn't block silent install/uninstall</span></span>
        -   <span data-ttu-id="e3c15-130">應用程式會在系統登錄中建立必要的專案。</span><span class="sxs-lookup"><span data-stu-id="e3c15-130">The app makes the required entries in the system registry.</span></span> <span data-ttu-id="e3c15-131">*Windows 清查工具和遙測工具需要已安裝應用程式的完整資訊。應用程式安裝程式必須建立正確的登錄專案，以允許偵測和卸載成功。*</span><span class="sxs-lookup"><span data-stu-id="e3c15-131">*Windows inventory tools and telemetry tools require complete info about installed apps. App installers must create the correct registry entries to allow successful detection and uninstalls.*</span></span>
    -   <span data-ttu-id="e3c15-132">如果您使用以 MSI 為基礎的安裝程式，MSI 會自動建立下面的登錄專案。</span><span class="sxs-lookup"><span data-stu-id="e3c15-132">If you are using an MSI-based installer, MSI automatically creates the registry entries below.</span></span> <span data-ttu-id="e3c15-133">如果您不是使用 MSI 安裝程式，則安裝模組必須在安裝期間建立下列登錄專案：</span><span class="sxs-lookup"><span data-stu-id="e3c15-133">If you are not using an MSI installer, the installation module must create the following registry entries during installation:</span></span>
        -   <span data-ttu-id="e3c15-134">DisplayName</span><span class="sxs-lookup"><span data-stu-id="e3c15-134">DisplayName</span></span>
        -   <span data-ttu-id="e3c15-135">InstallLocation</span><span class="sxs-lookup"><span data-stu-id="e3c15-135">InstallLocation</span></span>
        -   <span data-ttu-id="e3c15-136">Publisher</span><span class="sxs-lookup"><span data-stu-id="e3c15-136">Publisher</span></span>
        -   <span data-ttu-id="e3c15-137">UninstallString</span><span class="sxs-lookup"><span data-stu-id="e3c15-137">UninstallString</span></span>
        -   <span data-ttu-id="e3c15-138">VersionMajor 或 MajorVersion</span><span class="sxs-lookup"><span data-stu-id="e3c15-138">VersionMajor or MajorVersion</span></span>
        -   <span data-ttu-id="e3c15-139">VersionMinor 或 MinorVersion</span><span class="sxs-lookup"><span data-stu-id="e3c15-139">VersionMinor or MinorVersion</span></span>
    -   <span data-ttu-id="e3c15-140">應用程式必須移除其在 [新增/移除程式] 中的所有專案。</span><span class="sxs-lookup"><span data-stu-id="e3c15-140">The app must remove all of its entries in Add/Remove Programs.</span></span>
-   <span data-ttu-id="e3c15-141">測試詳細資料</span><span class="sxs-lookup"><span data-stu-id="e3c15-141">Test details</span></span>
    -   <span data-ttu-id="e3c15-142">此測試會檢查應用程式的安裝和卸載程式，以取得所需的行為。</span><span class="sxs-lookup"><span data-stu-id="e3c15-142">This test checks the app's install and uninstall processes for the required behavior.</span></span>
-   <span data-ttu-id="e3c15-143">更正動作</span><span class="sxs-lookup"><span data-stu-id="e3c15-143">Corrective Action</span></span>
    -   <span data-ttu-id="e3c15-144">根據上述需求來檢查應用程式的設計和行為。</span><span class="sxs-lookup"><span data-stu-id="e3c15-144">Review the app's design and behavior against the requirements described above.</span></span>

## <a name="install-to-the-correct-folders-test"></a><span data-ttu-id="e3c15-145">安裝到正確的資料夾測試</span><span class="sxs-lookup"><span data-stu-id="e3c15-145">Install to the correct folders test</span></span>

<span data-ttu-id="e3c15-146">確認應用程式將其程式和資料檔案寫入正確的資料夾。</span><span class="sxs-lookup"><span data-stu-id="e3c15-146">Verifies that the app writes its program and data files to the correct folders.</span></span>

-   <span data-ttu-id="e3c15-147">背景</span><span class="sxs-lookup"><span data-stu-id="e3c15-147">Background</span></span>
    -   <span data-ttu-id="e3c15-148">應用程式必須正確地使用使用者系統和每個使用者資料夾，讓它可以存取所需的資料和設定，同時保護使用者的資料和設定，防止未經授權的存取。</span><span class="sxs-lookup"><span data-stu-id="e3c15-148">Apps must user system and per-user folders correctly so it can access the data and settings it needs while protecting the user's data and settings from unauthorized access.</span></span>
-   <span data-ttu-id="e3c15-149">Program Files 資料夾</span><span class="sxs-lookup"><span data-stu-id="e3c15-149">Program Files folders</span></span>
    -   <span data-ttu-id="e3c15-150">根據預設，應用程式必須安裝在 Program Files 資料夾中， ( 原生32位和64位應用程式的% ProgramFiles%，以及在 x64) 上執行32位應用程式的% ProgramFiles (x86) %。</span><span class="sxs-lookup"><span data-stu-id="e3c15-150">The app must be installed in the Program Files folder by default (%ProgramFiles% for native 32-bit and 64-bit apps, and %ProgramFiles(x86)% for 32-bit apps running on x64).</span></span>
    -   <span data-ttu-id="e3c15-151">**注意：** 應用程式不能將使用者資料或應用程式資料儲存在 Program Files 資料夾中，因為已為此資料夾設定安全性許可權。</span><span class="sxs-lookup"><span data-stu-id="e3c15-151">**Note:** The app must not store user data or app data in a Program Files folder because of the security permissions configured for this folder.</span></span>
    -   <span data-ttu-id="e3c15-152">Windows 系統資料夾上的 Acl 只允許系統管理員帳戶讀取和寫入它們。</span><span class="sxs-lookup"><span data-stu-id="e3c15-152">The ACLs on Windows system folders allow only administrator accounts to read and write to them.</span></span> <span data-ttu-id="e3c15-153">因此，標準使用者帳戶將無法存取這些資料夾。</span><span class="sxs-lookup"><span data-stu-id="e3c15-153">As a result, standard user accounts will not have access to these folders.</span></span> <span data-ttu-id="e3c15-154">不過，檔案虛擬化可讓應用程式將檔案（例如設定檔）儲存在通常只能由系統管理員進行寫入的系統位置中。</span><span class="sxs-lookup"><span data-stu-id="e3c15-154">File virtualization, however, lets apps store a file, such as a configuration file, in a system location that is typically writeable only by administrators.</span></span> <span data-ttu-id="e3c15-155">在這種情況下，以標準使用者的形式執行程式可能會在無法存取必要的檔案時導致失敗。</span><span class="sxs-lookup"><span data-stu-id="e3c15-155">Running programs as a standard user in this situation could result in failure if they can't access a required file.</span></span>
    -   <span data-ttu-id="e3c15-156">應用程式應該使用 [已知的資料夾](/previous-versions/windows/desktop/legacy/bb776911(v=vs.85)) ，以確保它們可以存取其資料。</span><span class="sxs-lookup"><span data-stu-id="e3c15-156">Apps should use [Known Folders](/previous-versions/windows/desktop/legacy/bb776911(v=vs.85)) to ensure they will be able to access their data.</span></span>
    -   <span data-ttu-id="e3c15-157">**注意：** Windows 提供檔案虛擬化來改善應用程式相容性，並消除當應用程式在 Windows 上以標準使用者的形式執行時的問題。</span><span class="sxs-lookup"><span data-stu-id="e3c15-157">**Note:** Windows provides file virtualization to improve app compatibility and eliminate problems when apps run as a standard user on Windows.</span></span> <span data-ttu-id="e3c15-158">您的應用程式不應該依賴虛擬化存在未來的 Windows 版本。</span><span class="sxs-lookup"><span data-stu-id="e3c15-158">Your app should not rely on virtualization being present in future versions of Windows.</span></span>
-   <span data-ttu-id="e3c15-159">使用者特定的應用程式資料檔案夾</span><span class="sxs-lookup"><span data-stu-id="e3c15-159">User-specific app data folders</span></span>
    -   <span data-ttu-id="e3c15-160">在「個別電腦」安裝中，應用程式不能在安裝期間寫入使用者專屬的資料。</span><span class="sxs-lookup"><span data-stu-id="e3c15-160">In “per-machine” installations, the app must not write user-specific data during the installation.</span></span> <span data-ttu-id="e3c15-161">只有在使用者第一次啟動應用程式時，才應寫入使用者特定安裝資料。</span><span class="sxs-lookup"><span data-stu-id="e3c15-161">User-specific installation data should only be written when a user starts the app for the first time.</span></span> <span data-ttu-id="e3c15-162">這是因為沒有正確的使用者位置可在安裝時儲存資料。</span><span class="sxs-lookup"><span data-stu-id="e3c15-162">This is because there is no correct user location at which to store data at time of installation.</span></span> <span data-ttu-id="e3c15-163">在安裝之後，應用程式嘗試修改電腦層級的預設關聯線為將會失敗。</span><span class="sxs-lookup"><span data-stu-id="e3c15-163">Attempts by an app to modify default association behaviors at a machine level after installation will be unsuccessful.</span></span> <span data-ttu-id="e3c15-164">相反地，預設值必須在每個使用者層級宣告，如此可防止多個使用者覆寫彼此的預設值。</span><span class="sxs-lookup"><span data-stu-id="e3c15-164">Instead, defaults must be claimed on a per-user level, which prevents multiple users from overwriting each other's defaults.</span></span>
    -   <span data-ttu-id="e3c15-165">特定使用者專屬的所有應用程式資料，而不是與電腦的其他使用者共用，則必須儲存在使用者 \\ <username> \\ AppData 中。</span><span class="sxs-lookup"><span data-stu-id="e3c15-165">All app data exclusive to a specific user and not to be shared with other users of the computer must be stored in Users\\<username>\\AppData.</span></span>
    -   <span data-ttu-id="e3c15-166">必須在電腦上的使用者之間共用的所有應用程式資料都應儲存在 ProgramData 中。</span><span class="sxs-lookup"><span data-stu-id="e3c15-166">All app data that must be shared among users on the computer should be stored within ProgramData.</span></span>
-   <span data-ttu-id="e3c15-167">其他系統資料夾和登錄機碼</span><span class="sxs-lookup"><span data-stu-id="e3c15-167">Other system folders and registry keys</span></span>
    -   <span data-ttu-id="e3c15-168">應用程式永遠不應該直接寫入 Windows 目錄和或子目錄。</span><span class="sxs-lookup"><span data-stu-id="e3c15-168">The app should never write directly to the Windows directory and or subdirectories.</span></span> <span data-ttu-id="e3c15-169">使用正確的方法，將檔案（例如字型或驅動程式）安裝至這些目錄。</span><span class="sxs-lookup"><span data-stu-id="e3c15-169">Use the correct methods for installing files, such as fonts or drivers, to these directories.</span></span>
    -   <span data-ttu-id="e3c15-170">應用程式不應該在啟動時自動啟動，例如將專案新增至下列其中一個或多個位置：</span><span class="sxs-lookup"><span data-stu-id="e3c15-170">Apps should not start automatically on startup, such as by adding an entry to one or more of these locations:</span></span>
        -   <span data-ttu-id="e3c15-171">登錄執行金鑰 HKLM、或軟體 \\ Microsoft \\ Windows \\ CURRENTVERSION 下的 HKCU</span><span class="sxs-lookup"><span data-stu-id="e3c15-171">Registry run keys HKLM and, or HKCU under Software\\Microsoft\\Windows\\CurrentVersion</span></span>
        -   <span data-ttu-id="e3c15-172">登錄執行金鑰 HKLM 和或 HKCU 下的 Software \\ Wow6432Node \\ Microsoft \\ windows \\ CurrentVersion</span><span class="sxs-lookup"><span data-stu-id="e3c15-172">Registry run keys HKLM, and or HKCU under Software\\Wow6432Node\\Microsoft\\windows\\CurrentVersion</span></span>
        -   <span data-ttu-id="e3c15-173">開始功能表 AllPrograms > 啟動</span><span class="sxs-lookup"><span data-stu-id="e3c15-173">Start Menu AllPrograms > STARTUP</span></span>
-   <span data-ttu-id="e3c15-174">測試詳細資料</span><span class="sxs-lookup"><span data-stu-id="e3c15-174">Test details</span></span>
    -   <span data-ttu-id="e3c15-175">這項測試會驗證應用程式是否使用 Windows 提供的檔案系統中的特定位置，來儲存程式和軟體元件、共用應用程式資料，以及使用者特定的應用程式資料。</span><span class="sxs-lookup"><span data-stu-id="e3c15-175">This test verifies that the app uses the specific locations in the file system that Windows provides to store programs and software components, shared app data, and app data that is specific to a user.</span></span>
-   <span data-ttu-id="e3c15-176">修正動作</span><span class="sxs-lookup"><span data-stu-id="e3c15-176">Corrective actions</span></span>
    -   <span data-ttu-id="e3c15-177">請參閱應用程式如何使用系統的資料夾，並確定它使用的是正確的。</span><span class="sxs-lookup"><span data-stu-id="e3c15-177">Review how the app uses the system's folders and make sure it's using them correctly.</span></span>
-   <span data-ttu-id="e3c15-178">例外狀況和豁免</span><span class="sxs-lookup"><span data-stu-id="e3c15-178">Exceptions and Waivers</span></span>
    -   <span data-ttu-id="e3c15-179">寫入全域組件快取 (GAC 的桌面應用程式必須要有棄權)  ( .NET 應用程式應該將元件相依性保留為私用，並將其儲存在應用程式的目錄中，除非) 中明確需要共用元件。</span><span class="sxs-lookup"><span data-stu-id="e3c15-179">A waiver is required for desktop apps writing to the global assembly cache (GAC) (.NET apps should keep assembly dependencies private, and store it in the app's directory unless sharing an assembly is explicitly required).</span></span>
    -   <span data-ttu-id="e3c15-180">只有在 SW 基礎類別下，才需要安裝 [program Files] 資料夾，才能達成 SW 標誌。</span><span class="sxs-lookup"><span data-stu-id="e3c15-180">Installation to the Programs Files folder is not a requirement for Desktop SW packages to achieve SW Logo, only under the SW Fundamentals category.</span></span>

## <a name="digitally-signed-file-test"></a><span data-ttu-id="e3c15-181">經過數位簽署的檔案測試</span><span class="sxs-lookup"><span data-stu-id="e3c15-181">Digitally signed file test</span></span>

<span data-ttu-id="e3c15-182">測試可執行檔和設備磁碟機，以確認它們具有有效的數位簽章。</span><span class="sxs-lookup"><span data-stu-id="e3c15-182">Tests executable files and device drivers to verify they have a valid digital signature.</span></span>

-   <span data-ttu-id="e3c15-183">背景</span><span class="sxs-lookup"><span data-stu-id="e3c15-183">Background</span></span>
    -   <span data-ttu-id="e3c15-184">數位簽署的檔案可讓您確認檔案是否為正版，以及偵測檔案是否已遭修改。</span><span class="sxs-lookup"><span data-stu-id="e3c15-184">Digitally signed files make it possible to verify the file is genuine and to detect if the file has been tampered with.</span></span>
    -   <span data-ttu-id="e3c15-185">核心模式程式碼簽署強制是一項 Windows 功能，也稱為程式碼完整性 (CI) 。</span><span class="sxs-lookup"><span data-stu-id="e3c15-185">Kernel-mode code signing enforcement is a Windows feature that is also known as code integrity (CI).</span></span> <span data-ttu-id="e3c15-186">CI 會在每次將檔案載入記憶體時驗證其完整性，藉以改善 Windows 的安全性。</span><span class="sxs-lookup"><span data-stu-id="e3c15-186">CI improves the security of Windows by verifying the integrity of a file each time it is loaded into memory.</span></span> <span data-ttu-id="e3c15-187">CI 會偵測是否有惡意程式碼修改系統二進位檔案，並在核心模組的簽章無法正確確認時，產生診斷和系統審核記錄事件。</span><span class="sxs-lookup"><span data-stu-id="e3c15-187">CI detects whether malicious code has modified a system binary file and generates a diagnostic and system-audit log event when the signature of a kernel module fails to verify correctly.</span></span>
    -   <span data-ttu-id="e3c15-188">如果應用程式需要較高的許可權，提高許可權提示會顯示要求提升存取權之可執行檔的相關內容資訊。</span><span class="sxs-lookup"><span data-stu-id="e3c15-188">If the app requires elevated permissions, the elevation prompt displays contextual info about the executable file that is requesting elevated access.</span></span> <span data-ttu-id="e3c15-189">視應用程式是否經過 Authenticode 簽署而定，使用者可能會看到同意提示或認證提示。</span><span class="sxs-lookup"><span data-stu-id="e3c15-189">Depending on whether the app is Authenticode signed, the user may see the consent prompt or the credential prompt.</span></span>
    -   <span data-ttu-id="e3c15-190">強式名稱可防止協力廠商詐騙您的程式碼，只要您將私密金鑰保持安全。</span><span class="sxs-lookup"><span data-stu-id="e3c15-190">Strong names prevent third parties from spoofing your code, as long as you keep the private key secure.</span></span> <span data-ttu-id="e3c15-191">.NET Framework 會在載入元件時驗證數位簽章，或將它安裝在 GAC 中。</span><span class="sxs-lookup"><span data-stu-id="e3c15-191">The .NET Framework verifies the digital signature either when it loads the assembly or installs it in the GAC.</span></span> <span data-ttu-id="e3c15-192">如果沒有私密金鑰的存取權，惡意使用者就無法修改您的程式碼並重新簽署。</span><span class="sxs-lookup"><span data-stu-id="e3c15-192">Without access to the private key, a malicious user cannot modify your code and sign it again.</span></span>
-   <span data-ttu-id="e3c15-193">測試詳細資料</span><span class="sxs-lookup"><span data-stu-id="e3c15-193">Test details</span></span>
    -   <span data-ttu-id="e3c15-194">所有可執行檔（例如副檔名為 .exe、.dll、.ocx、sys、winspool.drv 和 .scr 的檔案）都必須使用 Authenticode 憑證進行簽署。</span><span class="sxs-lookup"><span data-stu-id="e3c15-194">All executable files, such as those with file extensions of .exe, .dll, .ocx, .sys, .cpl, .drv, and .scr, must be signed with an Authenticode certificate.</span></span>
    -   <span data-ttu-id="e3c15-195">應用程式安裝的所有核心模式驅動程式都必須具備透過 WHQL 或 DRS 程式取得的 Microsoft 簽章。</span><span class="sxs-lookup"><span data-stu-id="e3c15-195">All kernel mode drivers installed by the app must have a Microsoft signature obtained through the WHQL or DRS program.</span></span> <span data-ttu-id="e3c15-196">所有檔案系統篩選器驅動程式都必須經過 WHQL 簽署。</span><span class="sxs-lookup"><span data-stu-id="e3c15-196">All file system filter drivers must be WHQL signed.</span></span>
-   <span data-ttu-id="e3c15-197">更正動作</span><span class="sxs-lookup"><span data-stu-id="e3c15-197">Corrective Action</span></span>
    -   <span data-ttu-id="e3c15-198">簽署應用程式的可執行檔。</span><span class="sxs-lookup"><span data-stu-id="e3c15-198">Sign the app’s executable files.</span></span>
    -   <span data-ttu-id="e3c15-199">使用 makecert.exe 來產生憑證，或從) 的其中一個商業憑證發行 (機構單位（例如 VeriSign、Thawte 或 Microsoft CA）取得程式碼簽署金鑰。</span><span class="sxs-lookup"><span data-stu-id="e3c15-199">Use makecert.exe to generate a certificate or obtain a code-signing key from one of the commercial certification authorities (CAs), such as VeriSign, Thawte, or a Microsoft CA.</span></span>
-   <span data-ttu-id="e3c15-200">例外狀況和豁免</span><span class="sxs-lookup"><span data-stu-id="e3c15-200">Exceptions and waivers</span></span>
    -   <span data-ttu-id="e3c15-201">只有未簽署的協力廠商可轉散發套件才會考慮豁免。</span><span class="sxs-lookup"><span data-stu-id="e3c15-201">Waivers will be considered only for unsigned third-party redistributables.</span></span> <span data-ttu-id="e3c15-202">若要授與此棄權的要求，必須對要求籤署版本的可轉散發套件 () s 進行通訊證明。</span><span class="sxs-lookup"><span data-stu-id="e3c15-202">A proof of communication requesting a signed version of the redistributable(s) is required for this waiver to be granted.</span></span>
    -   <span data-ttu-id="e3c15-203">裝置值新增的軟體套件豁免于核心模式驅動程式憑證，因為驅動程式必須由 Windows 硬體認證認證。</span><span class="sxs-lookup"><span data-stu-id="e3c15-203">Device value-added software packages are exempt from the kernel mode driver certification, because drivers must be certified in by Windows Hardware Certification.</span></span>

## <a name="support-x64-windows-test"></a><span data-ttu-id="e3c15-204">支援 x64 Windows 測試</span><span class="sxs-lookup"><span data-stu-id="e3c15-204">Support x64 Windows test</span></span>

<span data-ttu-id="e3c15-205">測試應用程式，以確定 .exe 是針對將安裝的平臺架構所建立。</span><span class="sxs-lookup"><span data-stu-id="e3c15-205">Test the app to make sure the .exe is built for the platform architecture onto which it will be installed.</span></span>

-   <span data-ttu-id="e3c15-206">背景</span><span class="sxs-lookup"><span data-stu-id="e3c15-206">Background</span></span>
    -   <span data-ttu-id="e3c15-207">可執行檔必須針對安裝它的處理器架構建立。</span><span class="sxs-lookup"><span data-stu-id="e3c15-207">The executable file must be built for the processor architecture on which it is installed.</span></span> <span data-ttu-id="e3c15-208">某些可執行檔可能會在不同的處理器架構上執行，但是這並不可靠。</span><span class="sxs-lookup"><span data-stu-id="e3c15-208">Some executable files might run on a different processor architecture, but this is not reliable.</span></span>
    -   <span data-ttu-id="e3c15-209">架構相容性很重要，因為32位進程無法載入64位 Dll，而64位進程無法載入32位 Dll。</span><span class="sxs-lookup"><span data-stu-id="e3c15-209">Architecture compatibility is important because 32-bit processes cannot load 64-bit DLLs and 64-bit processes cannot load 32-bit DLLs.</span></span> <span data-ttu-id="e3c15-210">同樣地，64位版本的 Windows 不支援執行以16位 Windows 為基礎的應用程式，因為控制碼在64位 Windows 上具有32個有效位，因此無法將它們傳遞給16位應用程式。</span><span class="sxs-lookup"><span data-stu-id="e3c15-210">Likewise, 64-bit versions of Windows does not support running 16-bit Windows-based applications because handles have 32 significant bits on 64-bit Windows an so they can't be passed to 16-bit applications.</span></span> <span data-ttu-id="e3c15-211">因此，嘗試啟動16位應用程式將會在64位版本的 Windows 上失敗。</span><span class="sxs-lookup"><span data-stu-id="e3c15-211">Therefore, trying to launch a 16-bit application will fail on 64-bit versions of Windows.</span></span>
    -   <span data-ttu-id="e3c15-212">32位設備磁碟機無法在64位版本的 Windows 上執行，因此必須將它們移植到64位架構。</span><span class="sxs-lookup"><span data-stu-id="e3c15-212">32-bit device drivers cannot run on 64-bit versions of Windows and therefore, they must be ported to the 64-bit architecture.</span></span>
    -   <span data-ttu-id="e3c15-213">在使用者模式應用程式中，64位 Windows 包含 WOW64，可讓32位 Windows 應用程式在執行64位 Windows 的系統上執行，儘管效能會降低。</span><span class="sxs-lookup"><span data-stu-id="e3c15-213">For user-mode applications, 64-bit Windows includes WOW64, which enables 32-bit Windows applications to execute on systems running 64-bit Windows, albeit with some loss of performance.</span></span> <span data-ttu-id="e3c15-214">設備磁碟機沒有對等的轉譯層存在。</span><span class="sxs-lookup"><span data-stu-id="e3c15-214">No equivalent translation layer exists for device drivers.</span></span>
    -   <span data-ttu-id="e3c15-215">為了維持與64位版本 Windows 的相容性，應用程式必須以原生方式支援64位，或者，至少32位的 Windows 應用程式必須在64位系統上順暢地執行：</span><span class="sxs-lookup"><span data-stu-id="e3c15-215">To maintain compatibility with 64-bit versions of Windows, apps must natively support 64-bit or, at a minimum, 32-bit Windows-based apps must run seamlessly on 64-bit systems:</span></span>
        -   <span data-ttu-id="e3c15-216">應用程式及其安裝程式不得包含任何16位程式碼，或依賴任何16位元件。</span><span class="sxs-lookup"><span data-stu-id="e3c15-216">Apps and their installers mustn't contain any 16-bit code or rely on any 16-bit component.</span></span>
        -   <span data-ttu-id="e3c15-217">應用程式安裝程式必須在64位版本的 Windows 上偵測並安裝適當的驅動程式和元件。</span><span class="sxs-lookup"><span data-stu-id="e3c15-217">App setup must detect and install the proper drivers and components on 64-bit versions of Windows.</span></span>
        -   <span data-ttu-id="e3c15-218">任何 shell 外掛程式都必須在64位版本的 Windows 上執行。</span><span class="sxs-lookup"><span data-stu-id="e3c15-218">Any shell plug-ins must run on 64-bit versions of Windows.</span></span>
        -   <span data-ttu-id="e3c15-219">在 WoW64 模擬器下執行的應用程式不應該嘗試略過 Wow64 虛擬化機制。</span><span class="sxs-lookup"><span data-stu-id="e3c15-219">Apps that run under the WoW64 emulator should not attempt to bypass Wow64 virtualization mechanisms.</span></span> <span data-ttu-id="e3c15-220">如果有應用程式需要偵測到在 WoW64 模擬器中執行的特定案例，則應該呼叫 [**IsWow64Process**](/windows/desktop/api/wow64apiset/nf-wow64apiset-iswow64process)來執行此動作。</span><span class="sxs-lookup"><span data-stu-id="e3c15-220">If there are specific scenarios where apps need to detect if they are running in a WoW64 emulator, they should do so by calling [**IsWow64Process**](/windows/desktop/api/wow64apiset/nf-wow64apiset-iswow64process).</span></span>
-   <span data-ttu-id="e3c15-221">測試詳細資料</span><span class="sxs-lookup"><span data-stu-id="e3c15-221">Test details</span></span>
    -   <span data-ttu-id="e3c15-222">應用程式不應該安裝任何16位二進位檔。</span><span class="sxs-lookup"><span data-stu-id="e3c15-222">The app should not install any 16-bit binaries.</span></span> <span data-ttu-id="e3c15-223">如果應用程式應該在64位電腦上執行，則應用程式不應安裝32位核心模式驅動程式。</span><span class="sxs-lookup"><span data-stu-id="e3c15-223">The app should not install a 32-bit kernel mode driver if it is supposed to run on a 64-bit machine.</span></span>
-   <span data-ttu-id="e3c15-224">更正措施</span><span class="sxs-lookup"><span data-stu-id="e3c15-224">Corrective Actions</span></span>
    -   <span data-ttu-id="e3c15-225">針對您要安裝的處理器架構，建立可執行檔和驅動程式。</span><span class="sxs-lookup"><span data-stu-id="e3c15-225">Build the executable files and drivers for the processor architecture for which you want to install them.</span></span>

## <a name="os-version-checking-test"></a><span data-ttu-id="e3c15-226">作業系統版本檢查測試</span><span class="sxs-lookup"><span data-stu-id="e3c15-226">OS version checking test</span></span>

<span data-ttu-id="e3c15-227">測試應用程式如何檢查正在執行的 Windows 版本。</span><span class="sxs-lookup"><span data-stu-id="e3c15-227">Tests how the app checks for the version of Windows on which it's running.</span></span>

-   <span data-ttu-id="e3c15-228">背景</span><span class="sxs-lookup"><span data-stu-id="e3c15-228">Background</span></span>
    -   <span data-ttu-id="e3c15-229">應用程式會藉由測試大於或等於所需版本的版本來檢查作業系統版本，以確保與未來版本的 Windows 相容。</span><span class="sxs-lookup"><span data-stu-id="e3c15-229">Apps check the OS version by testing for a version that is greater than or equal to the required version to ensure compatibility with future versions of Windows.</span></span>
-   <span data-ttu-id="e3c15-230">測試詳細資料</span><span class="sxs-lookup"><span data-stu-id="e3c15-230">Test details</span></span>
    -   <span data-ttu-id="e3c15-231">模擬在不同版本的 Windows 上執行應用程式，以查看其回應方式。</span><span class="sxs-lookup"><span data-stu-id="e3c15-231">Simulates running the app on different versions of Windows to see how it reacts.</span></span>
-   <span data-ttu-id="e3c15-232">修正動作</span><span class="sxs-lookup"><span data-stu-id="e3c15-232">Corrective actions</span></span>
    -   <span data-ttu-id="e3c15-233">測試目前版本是否大於或等於您的應用程式、服務或驅動程式所需的版本，以測試正確的 Windows 版本。</span><span class="sxs-lookup"><span data-stu-id="e3c15-233">Test for the correct version of Windows by testing if the current version is greater-than or equal to the version your app, service, or driver needs.</span></span>
    -   <span data-ttu-id="e3c15-234">驅動程式安裝程式和卸載模組絕不能檢查作業系統版本。</span><span class="sxs-lookup"><span data-stu-id="e3c15-234">Driver installers and uninstall modules must never check the OS version.</span></span>
-   <span data-ttu-id="e3c15-235">例外狀況和豁免</span><span class="sxs-lookup"><span data-stu-id="e3c15-235">Exceptions and Waivers</span></span>
    -   <span data-ttu-id="e3c15-236">將會針對符合下列準則的應用程式考慮豁免： *(僅適用于桌面應用程式認證)*</span><span class="sxs-lookup"><span data-stu-id="e3c15-236">Waivers will be considered for apps that meet the following criteria: *(Applies to desktop app certification only)*</span></span>
        -   <span data-ttu-id="e3c15-237">在 Windows XP、Windows Vista 和 Windows 7 上以一個套件的形式傳遞的應用程式，而且需要檢查作業系統版本，以判斷要在指定的作業系統上安裝哪些元件。</span><span class="sxs-lookup"><span data-stu-id="e3c15-237">Apps that are delivered as one package that runs on Windows XP, Windows Vista, and Windows 7 and need to check the OS version to determine which components to install on a given operating system.</span></span>
        -   <span data-ttu-id="e3c15-238">只有在安裝期間只會檢查作業系統的最小版本 (的應用程式，而不是在執行時間) 只使用核准的 API 呼叫，並在應用程式資訊清單中列出必要的最低版本需求。</span><span class="sxs-lookup"><span data-stu-id="e3c15-238">Apps that check only the minimum version of the OS (during install only, not at runtime) by using only the approved API calls and list the minimum version requirement in the app manifest as required.</span></span>
        -   <span data-ttu-id="e3c15-239">安全性應用程式，例如防毒軟體和防火牆應用程式、系統公用程式（例如重組公用程式和備份應用程式），以及只使用核准的 API 呼叫來檢查作業系統版本的診斷工具。</span><span class="sxs-lookup"><span data-stu-id="e3c15-239">Security apps such as antivirus and firewall apps, system utilities such as defrag utilities and backup apps, and diagnostics tools that check the OS version by using only the approved API calls.</span></span>

## <a name="user-account-control-uac-test"></a><span data-ttu-id="e3c15-240"> (UAC) 測試的使用者帳戶控制</span><span class="sxs-lookup"><span data-stu-id="e3c15-240">User account control (UAC) test</span></span>

<span data-ttu-id="e3c15-241">測試應用程式，以確認它不需要更高的許可權來執行。</span><span class="sxs-lookup"><span data-stu-id="e3c15-241">Tests the app to verify that it doesn't need unnecessarily elevated permissions to run.</span></span>

-   <span data-ttu-id="e3c15-242">背景</span><span class="sxs-lookup"><span data-stu-id="e3c15-242">Background</span></span>
    -   <span data-ttu-id="e3c15-243">只有當使用者為系統管理員時，才會操作或安裝的應用程式會強制使用者以不必要的提高許可權來執行應用程式，這可讓惡意程式碼進入使用者的電腦。</span><span class="sxs-lookup"><span data-stu-id="e3c15-243">An app that operates or installs only when the user is an administrator forces users to run the app with unnecessarily elevated permissions, which can allow malware to enter the user's computer.</span></span>
    -   <span data-ttu-id="e3c15-244">當使用者一律強制執行具有更高存取權杖的應用程式時，應用程式可以做為詐騙或惡意程式碼的進入點。</span><span class="sxs-lookup"><span data-stu-id="e3c15-244">When users are always forced to run apps with elevated access tokens, the app can server as an entry point for deceptive or malicious code.</span></span> <span data-ttu-id="e3c15-245">這種惡意程式碼可輕鬆地修改作業系統（或更糟的）來影響其他使用者。</span><span class="sxs-lookup"><span data-stu-id="e3c15-245">This malware can easily modify the operating system, or worse, affect other users.</span></span> <span data-ttu-id="e3c15-246">您幾乎無法控制具有完整系統管理員存取權的使用者，因為系統管理員可以安裝應用程式，並在電腦上執行任何應用程式或腳本。</span><span class="sxs-lookup"><span data-stu-id="e3c15-246">It is nearly impossible to control a user that has full administrator access, because Administrators can install apps and run any apps or script on the computer.</span></span> <span data-ttu-id="e3c15-247">IT 管理員一直都在尋求在使用者以標準使用者身份登入的情況下，建立「標準桌面」的方法。</span><span class="sxs-lookup"><span data-stu-id="e3c15-247">IT managers are always seeking ways to create "standard desktops" where users log on as standard users.</span></span> <span data-ttu-id="e3c15-248">標準桌面可大幅降低技術支援中心的成本，並降低 IT 額外負荷。</span><span class="sxs-lookup"><span data-stu-id="e3c15-248">Standard desktops greatly reduce help desk costs and reduce IT overhead.</span></span>
    -   <span data-ttu-id="e3c15-249">大部分的應用程式在執行時間並不需要系統管理員許可權。</span><span class="sxs-lookup"><span data-stu-id="e3c15-249">Most applications don't require administrator privileges at run time.</span></span> <span data-ttu-id="e3c15-250">標準使用者帳戶應該能夠執行這些工作。</span><span class="sxs-lookup"><span data-stu-id="e3c15-250">A standard-user account should be able to run them.</span></span> <span data-ttu-id="e3c15-251">Windows 應用程式必須有 (embedded 或 external) 的資訊清單，才能定義其執行層級，以告訴 OS 執行應用程式所需的許可權。</span><span class="sxs-lookup"><span data-stu-id="e3c15-251">Windows apps must have a manifest (embedded or external) to define its execution level that tells OS the privileges needed to run the app.</span></span> <span data-ttu-id="e3c15-252">應用程式資訊清單只適用于 .exe 檔案，而不是 .dll 檔案。</span><span class="sxs-lookup"><span data-stu-id="e3c15-252">The app manifest only applies to .exe files, not .dll files.</span></span> <span data-ttu-id="e3c15-253">使用者帳戶控制 (UAC) 不會在進程建立期間檢查 Dll。</span><span class="sxs-lookup"><span data-stu-id="e3c15-253">User Account Control (UAC) does not inspect DLLs during the creation of the process.</span></span> <span data-ttu-id="e3c15-254">UAC 規則不適用於 Microsoft 服務。</span><span class="sxs-lookup"><span data-stu-id="e3c15-254">UAC rules don't apply to Microsoft services.</span></span> <span data-ttu-id="e3c15-255">應用程式資訊清單可以是內嵌或外部。</span><span class="sxs-lookup"><span data-stu-id="e3c15-255">The app manifest can be embedded or external.</span></span>
    -   <span data-ttu-id="e3c15-256">若要建立資訊清單，請建立名為 <應用程式 \_ 名稱 # C1.exe 的檔案，並將它儲存在與 EXE 相同的目錄中。</span><span class="sxs-lookup"><span data-stu-id="e3c15-256">To create a manifest, create a file with the name <app\_name>.exe.manifest and store it in the same directory as the EXE.</span></span> <span data-ttu-id="e3c15-257">請注意，如果應用程式具有內部資訊清單，則會忽略任何外部資訊清單。</span><span class="sxs-lookup"><span data-stu-id="e3c15-257">Note that any external manifest is ignored if the app has an internal manifest.</span></span>
        -   <span data-ttu-id="e3c15-258">例如，<並無 requestedexecutionlevel level = "" asInvoker \| highestAvailable \| requireAdministrator "" uiAccess = "" true \| false ""/></span><span class="sxs-lookup"><span data-stu-id="e3c15-258">For example, <requestedExecutionLevel level=""asInvoker \| highestAvailable \| requireAdministrator"" uiAccess=""true\|false""/></span></span>
        -   <span data-ttu-id="e3c15-259">應用程式的主要處理常式必須以標準使用者的形式執行 (**asInvoker**) 。</span><span class="sxs-lookup"><span data-stu-id="e3c15-259">The main process of the app must be run as a standard user (**asInvoker**).</span></span> <span data-ttu-id="e3c15-260">任何系統管理功能都必須移至以系統管理許可權執行的個別進程。</span><span class="sxs-lookup"><span data-stu-id="e3c15-260">Any administrative features must be moved into a separate process that runs with administrative privileges.</span></span>
        -   <span data-ttu-id="e3c15-261">需要較高許可權的使用者面向應用程式必須經過 Authenticode 簽署。</span><span class="sxs-lookup"><span data-stu-id="e3c15-261">User facing apps that require elevated privileges must be Authenticode signed.</span></span>
-   <span data-ttu-id="e3c15-262">測試詳細資料</span><span class="sxs-lookup"><span data-stu-id="e3c15-262">Test details</span></span>
    -   <span data-ttu-id="e3c15-263">所有面向使用者的 exe 都應該以 asInvoker 屬性標記。</span><span class="sxs-lookup"><span data-stu-id="e3c15-263">All the user facing exes should be marked with asInvoker attribute.</span></span> <span data-ttu-id="e3c15-264">如果它們被標示為 highestAvailable 或 requireAdministrator，則應該正確地簽署 authenticode。</span><span class="sxs-lookup"><span data-stu-id="e3c15-264">If they are marked as highestAvailable or requireAdministrator then they should be correctly authenticode signed.</span></span> <span data-ttu-id="e3c15-265">任何應用程式 exe 都不應將 uiAccess 屬性設定為 true。</span><span class="sxs-lookup"><span data-stu-id="e3c15-265">Any app exe should not have the uiAccess attribute set to true.</span></span> <span data-ttu-id="e3c15-266">以服務方式執行的任何 exe 都會從此特定檢查中排除。</span><span class="sxs-lookup"><span data-stu-id="e3c15-266">Any exe which runs as a service is excluded from this particular check.</span></span>
-   <span data-ttu-id="e3c15-267">修正動作</span><span class="sxs-lookup"><span data-stu-id="e3c15-267">Corrective actions</span></span>
    -   <span data-ttu-id="e3c15-268">請檢查應用程式的資訊清單檔，以取得正確的專案和許可權等級。</span><span class="sxs-lookup"><span data-stu-id="e3c15-268">Review the app's manifest file for the correct entries and permission levels.</span></span>
-   <span data-ttu-id="e3c15-269">例外狀況和豁免</span><span class="sxs-lookup"><span data-stu-id="e3c15-269">Exceptions and waivers</span></span>
    -   <span data-ttu-id="e3c15-270">以更高的許可權執行其主要進程的應用程式需要棄權 (**requireAdministrator** 或 **highestAvailable**) 。</span><span class="sxs-lookup"><span data-stu-id="e3c15-270">A waiver is required for apps that run their main process with elevated privileges (**requireAdministrator** or **highestAvailable**).</span></span> <span data-ttu-id="e3c15-271">主要進程是提供使用者進入應用程式進入點的程式。</span><span class="sxs-lookup"><span data-stu-id="e3c15-271">The main process is the process that provides the user’s entry point to the app.</span></span>
    -   <span data-ttu-id="e3c15-272">在下列案例中，將會考慮棄權：</span><span class="sxs-lookup"><span data-stu-id="e3c15-272">Waivers will be considered for the following scenarios:</span></span>
        -   <span data-ttu-id="e3c15-273">執行層級設為 **highestAvailable**、 **requireAdministrator** 或兩者的系統管理或系統工具。</span><span class="sxs-lookup"><span data-stu-id="e3c15-273">Administrative or system tools with execution level set to **highestAvailable**, **requireAdministrator**, or both.</span></span>
        -   <span data-ttu-id="e3c15-274">只有協助工具或 UI 自動化架構應用程式會將 uiAccess 旗標設為 TRUE，以略過使用者介面許可權隔離 (UIPI) 。</span><span class="sxs-lookup"><span data-stu-id="e3c15-274">Only Accessibility or UI automation framework app sets the uiAccess flag to TRUE to bypass the user interface privilege isolation (UIPI).</span></span> <span data-ttu-id="e3c15-275">若要適當地開始使用應用程式，此旗標必須經過 Authenticode 簽署，而且必須位於檔案系統中受保護的位置，例如 Program Files。</span><span class="sxs-lookup"><span data-stu-id="e3c15-275">To properly start app utilization, this flag must be Authenticode signed, and must reside in a protected location in the file system, such as Program Files.</span></span>

## <a name="adhere-to-system-restart-manager-messages"></a><span data-ttu-id="e3c15-276">遵守系統重新開機管理員訊息</span><span class="sxs-lookup"><span data-stu-id="e3c15-276">Adhere to system restart manager messages</span></span>

<span data-ttu-id="e3c15-277">測試應用程式如何回應系統關機和重新開機訊息。</span><span class="sxs-lookup"><span data-stu-id="e3c15-277">Tests how the app responds to system shutdown and restart messages.</span></span>

-   <span data-ttu-id="e3c15-278">背景</span><span class="sxs-lookup"><span data-stu-id="e3c15-278">Background</span></span>
    -   <span data-ttu-id="e3c15-279">應用程式必須在系統正在關機時儘快結束，以提供回應式關機或使用者的電源關閉體驗。</span><span class="sxs-lookup"><span data-stu-id="e3c15-279">Apps must exit as quickly as possible when they are notified the system is shutting down to provide a responsive shutdown or power-off experience for the user.</span></span>
    -   <span data-ttu-id="e3c15-280">在重大關機中，傳回 FALSE 到 [**wm \_ QUERYENDSESSION**](/windows/desktop/Shutdown/wm-queryendsession) 的應用程式將會傳送至 wm **\_ ENDSESSION** 且已關閉，而這些應用程式會 \_ 被強制終止。</span><span class="sxs-lookup"><span data-stu-id="e3c15-280">In a critical shutdown, apps that return FALSE to [**WM\_QUERYENDSESSION**](/windows/desktop/Shutdown/wm-queryendsession) will be sent **WM\_ENDSESSION** and closed, while those that time out in response to WM\_QUERYENDSESSION will be forcibly terminated.</span></span>
-   <span data-ttu-id="e3c15-281">測試詳細資料</span><span class="sxs-lookup"><span data-stu-id="e3c15-281">Test details</span></span>
    -   <span data-ttu-id="e3c15-282">檢查應用程式如何回應關機和結束訊息。</span><span class="sxs-lookup"><span data-stu-id="e3c15-282">Examines how the app responds to shut down and exit messages.</span></span>
-   <span data-ttu-id="e3c15-283">修正動作</span><span class="sxs-lookup"><span data-stu-id="e3c15-283">Corrective actions</span></span>
    -   <span data-ttu-id="e3c15-284">如果您的應用程式未通過此測試，請參閱其處理這些 Windows 訊息的方式：</span><span class="sxs-lookup"><span data-stu-id="e3c15-284">If your app fails this test, review how it handles these Windows messages:</span></span>
        -   <span data-ttu-id="e3c15-285">[**WM \_QUERYENDSESSION**](/windows/desktop/Shutdown/wm-queryendsession) with *LPARAM*  =  **ENDSESSION \_ CLOSEAPP** (0x1) ：桌面應用程式必須在準備重新開機時立即回應 (TRUE) 。</span><span class="sxs-lookup"><span data-stu-id="e3c15-285">[**WM\_QUERYENDSESSION**](/windows/desktop/Shutdown/wm-queryendsession) with *LPARAM* = **ENDSESSION\_CLOSEAPP**(0x1): Desktop apps must respond (TRUE) immediately in preparation for a restart.</span></span> <span data-ttu-id="e3c15-286">主控台應用程式可以呼叫 [**SetConsoleCtrlHandler**](/windows/console/setconsolectrlhandler) 來接收關機通知。</span><span class="sxs-lookup"><span data-stu-id="e3c15-286">Console apps can call [**SetConsoleCtrlHandler**](/windows/console/setconsolectrlhandler) to receive shutdown notification.</span></span> <span data-ttu-id="e3c15-287">服務可以呼叫 [**RegisterServiceCtrlHandlerEx**](/windows/desktop/api/winsvc/nf-winsvc-registerservicectrlhandlerexa) ，以接收處理常式常式中的關機通知。</span><span class="sxs-lookup"><span data-stu-id="e3c15-287">Services can call [**RegisterServiceCtrlHandlerEx**](/windows/desktop/api/winsvc/nf-winsvc-registerservicectrlhandlerexa) to receive shutdown notifications in a handler routine.</span></span>
        -   <span data-ttu-id="e3c15-288">[**WM \_ENDSESSION**](/windows/desktop/Shutdown/wm-queryendsession) with *LPARAM*  =  **ENDSESSION \_ CLOSEAPP** (0x1) ：應用程式必須在30秒內傳回0值，並將其關閉。</span><span class="sxs-lookup"><span data-stu-id="e3c15-288">[**WM\_ENDSESSION**](/windows/desktop/Shutdown/wm-queryendsession) with *LPARAM* = **ENDSESSION\_CLOSEAPP**(0x1): Apps must return a 0 value within 30 seconds and shut down.</span></span> <span data-ttu-id="e3c15-289">應用程式至少應該藉由儲存任何使用者資料，並在重新開機之後指出所需的資訊，來做好準備。</span><span class="sxs-lookup"><span data-stu-id="e3c15-289">At a minimum, apps should prepare by saving any user data and state the info that is needed after a restart.</span></span>
    -   <span data-ttu-id="e3c15-290">接收 **CTRL + \_ \_ 事件** 通知的主控台應用程式應該立即關閉。</span><span class="sxs-lookup"><span data-stu-id="e3c15-290">Console apps that receive the **CTRL\_C\_EVENT** notification should shut down immediately.</span></span> <span data-ttu-id="e3c15-291">驅動程式不得拒絕系統關機事件。</span><span class="sxs-lookup"><span data-stu-id="e3c15-291">Drivers must not veto a system shutdown event.</span></span>
    -   <span data-ttu-id="e3c15-292">**注意：** 因為無法中斷的作業而必須封鎖關機的應用程式應該使用 [**ShutdownBlockReasonCreate**](/windows/desktop/api/winuser/nf-winuser-shutdownblockreasoncreate) 來註冊說明使用者原因的字串。</span><span class="sxs-lookup"><span data-stu-id="e3c15-292">**Note:** Apps that must block shutdown because of an operation that cannot be interrupted should use [**ShutdownBlockReasonCreate**](/windows/desktop/api/winuser/nf-winuser-shutdownblockreasoncreate) to register a string that explains the reason to the user.</span></span> <span data-ttu-id="e3c15-293">當作業完成時，應用程式應該呼叫 [**ShutdownBlockReasonDestroy**](/windows/desktop/api/winuser/nf-winuser-shutdownblockreasondestroy) 來指示系統可以關機。</span><span class="sxs-lookup"><span data-stu-id="e3c15-293">When the operation has completed, the app should call [**ShutdownBlockReasonDestroy**](/windows/desktop/api/winuser/nf-winuser-shutdownblockreasondestroy) to indicate that the system can be shut down.</span></span>

## <a name="safe-mode-test"></a><span data-ttu-id="e3c15-294">安全模式測試</span><span class="sxs-lookup"><span data-stu-id="e3c15-294">Safe mode test</span></span>

<span data-ttu-id="e3c15-295">測試驅動程式或服務是否已設定為以安全模式啟動。</span><span class="sxs-lookup"><span data-stu-id="e3c15-295">Tests if the driver or service is configured to start in safe mode.</span></span>

-   <span data-ttu-id="e3c15-296">背景</span><span class="sxs-lookup"><span data-stu-id="e3c15-296">Background</span></span>
    -   <span data-ttu-id="e3c15-297">安全模式可讓使用者診斷和疑難排解 Windows 的問題。</span><span class="sxs-lookup"><span data-stu-id="e3c15-297">Safe mode allows users to diagnose and troubleshoot problems with Windows.</span></span> <span data-ttu-id="e3c15-298">只有作業系統基本操作或提供診斷和復原服務所需的驅動程式和服務，才能以安全模式載入。</span><span class="sxs-lookup"><span data-stu-id="e3c15-298">Only drivers and services that are necessary to the basic operation of the operating system or provide diagnostic and recovery services should load in safe mode.</span></span> <span data-ttu-id="e3c15-299">在安全模式中載入其他檔案，可讓您更難排解作業系統的問題。</span><span class="sxs-lookup"><span data-stu-id="e3c15-299">Loading other files in safe mode makes it more difficult to troubleshoot problems with the operating system.</span></span>
    -   <span data-ttu-id="e3c15-300">依預設，只有隨 Windows 預先安裝的驅動程式和服務會以安全模式啟動。</span><span class="sxs-lookup"><span data-stu-id="e3c15-300">By default, only the drivers and services that come pre-installed with Windows start in safe mode.</span></span> <span data-ttu-id="e3c15-301">除非系統需要這些驅動程式與服務進行基本作業或用於診斷和復原，否則應停用所有其他驅動程式和服務。</span><span class="sxs-lookup"><span data-stu-id="e3c15-301">All other drivers and services should be disabled unless the system requires them for basic operations or for diagnostic and recovery purposes.</span></span>
-   <span data-ttu-id="e3c15-302">測試詳細資料</span><span class="sxs-lookup"><span data-stu-id="e3c15-302">Test details</span></span>
    -   <span data-ttu-id="e3c15-303">應用程式所安裝的驅動程式不應標示為以安全模式載入。</span><span class="sxs-lookup"><span data-stu-id="e3c15-303">Drivers installed by the app should not be marked for loading in safe mode.</span></span>
-   <span data-ttu-id="e3c15-304">修正動作</span><span class="sxs-lookup"><span data-stu-id="e3c15-304">Corrective actions</span></span>
    -   <span data-ttu-id="e3c15-305">如果驅動程式或服務不應該以安全模式啟動，請從登錄機碼中移除應用程式的專案。</span><span class="sxs-lookup"><span data-stu-id="e3c15-305">If the driver or service should not start in safe mode, remove the app's entries from the registry keys.</span></span>
-   <span data-ttu-id="e3c15-306">例外狀況和豁免</span><span class="sxs-lookup"><span data-stu-id="e3c15-306">Exceptions and waivers</span></span>
    -   <span data-ttu-id="e3c15-307">必須以安全模式啟動的驅動程式和服務需要獲得棄權認證。</span><span class="sxs-lookup"><span data-stu-id="e3c15-307">Drivers and services that must start in safe mode require a waiver to be certified.</span></span> <span data-ttu-id="e3c15-308">棄權要求必須包含每個要新增至安全開機登錄機碼的驅動程式和服務，並描述驅動程式或服務必須在安全模式中執行的技術原因。</span><span class="sxs-lookup"><span data-stu-id="e3c15-308">The waiver request must include each driver and service to add to the SafeBoot registry keys and describe the technical reasons for why the driver or service must run in safe mode.</span></span> <span data-ttu-id="e3c15-309">應用程式安裝程式必須在這些登錄機碼中註冊所有這類驅動程式和服務：</span><span class="sxs-lookup"><span data-stu-id="e3c15-309">The app installer must register all such drivers and services in these registry keys:</span></span>
        -   <span data-ttu-id="e3c15-310">HKLM/System/CurrentControlSet/Control/安全開機/基本</span><span class="sxs-lookup"><span data-stu-id="e3c15-310">HKLM/System/CurrentControlSet/Control/SafeBoot/Minimal</span></span>
        -   <span data-ttu-id="e3c15-311">HKLM/System/CurrentControlSet/Control/安全開機/Network</span><span class="sxs-lookup"><span data-stu-id="e3c15-311">HKLM/System/CurrentControlSet/Control/SafeBoot/Network</span></span>
-   <span data-ttu-id="e3c15-312">**注意：** 您必須測試要在安全模式中啟動的驅動程式和服務，以確保它們在安全模式下運作，而不會發生任何錯誤。</span><span class="sxs-lookup"><span data-stu-id="e3c15-312">**Note:** You must test the drivers and services you want to start in safe mode to ensure that they function in safe mode without any errors.</span></span>

## <a name="multiuser-session-test"></a><span data-ttu-id="e3c15-313">多使用者會話測試</span><span class="sxs-lookup"><span data-stu-id="e3c15-313">Multiuser session test</span></span>

<span data-ttu-id="e3c15-314">測試應用程式在多個會話中執行時的行為。</span><span class="sxs-lookup"><span data-stu-id="e3c15-314">Test how the app behaves when run in multiple sessions at the same time.</span></span>

-   <span data-ttu-id="e3c15-315">背景</span><span class="sxs-lookup"><span data-stu-id="e3c15-315">Background</span></span>
    -   <span data-ttu-id="e3c15-316">Windows 使用者必須能夠執行並行會話。</span><span class="sxs-lookup"><span data-stu-id="e3c15-316">Windows users must be able to run concurrent sessions.</span></span> <span data-ttu-id="e3c15-317">應用程式必須確保在本機或遠端執行多個會話時，應用程式的一般功能不會受到負面影響。</span><span class="sxs-lookup"><span data-stu-id="e3c15-317">Apps must ensure that when they run in multiple sessions, either locally or remotely, the normal functionality of the app is not adversely affected.</span></span> <span data-ttu-id="e3c15-318">應用程式設定和資料檔案必須是使用者專屬的，而且使用者的隱私權和喜好設定必須限制在使用者的會話中。</span><span class="sxs-lookup"><span data-stu-id="e3c15-318">App settings and data files must be user-specific and the user's privacy and preferences must be restricted to the user's session.</span></span>
-   <span data-ttu-id="e3c15-319">測試詳細資料</span><span class="sxs-lookup"><span data-stu-id="e3c15-319">Test details</span></span>
    -   <span data-ttu-id="e3c15-320">執行應用程式的多個並行實例來測試下列各項：</span><span class="sxs-lookup"><span data-stu-id="e3c15-320">Runs multiple concurrent instances of the app to test the following:</span></span>
        -   <span data-ttu-id="e3c15-321">同時執行之應用程式的多個實例會彼此隔離。</span><span class="sxs-lookup"><span data-stu-id="e3c15-321">Multiple instances of an app running at the same time are isolated from each other.</span></span>
    -   <span data-ttu-id="e3c15-322">這表示另一個實例看不到來自某個實例的使用者資料。</span><span class="sxs-lookup"><span data-stu-id="e3c15-322">This means that user data from one instance is not visible to another instance.</span></span> <span data-ttu-id="e3c15-323">非作用中使用者會話中的音效不應該在使用中的使用者會話中聽到。</span><span class="sxs-lookup"><span data-stu-id="e3c15-323">Sound in an inactive user session should not be heard in an active user session.</span></span> <span data-ttu-id="e3c15-324">在多個應用程式實例使用共用資源的情況下，應用程式必須確保不會發生衝突。</span><span class="sxs-lookup"><span data-stu-id="e3c15-324">In cases where multiple app instances use shared resources, the app must ensure that there is not a conflict.</span></span>
        -   <span data-ttu-id="e3c15-325">如果已為多個使用者安裝應用程式，則會將資料儲存在正確的資料夾 (s) 和登錄位置。</span><span class="sxs-lookup"><span data-stu-id="e3c15-325">If the app was installed for multiple users, it stores data in the correct folder(s) and registry locations.</span></span>
        -   <span data-ttu-id="e3c15-326">應用程式可以在多個使用者會話中執行， (快速使用者切換) 用於本機和遠端存取。</span><span class="sxs-lookup"><span data-stu-id="e3c15-326">The app can run in multiple user sessions (Fast User Switching) for both local and remote access.</span></span>
    -   <span data-ttu-id="e3c15-327">若要確保這種情況，應用程式必須檢查應用程式現有實例的其他終端機服務 (TS) 會話。</span><span class="sxs-lookup"><span data-stu-id="e3c15-327">To ensure this, the app must check other terminal service (TS) sessions for existing instances of the app.</span></span> <span data-ttu-id="e3c15-328">如果應用程式不支援多個使用者會話或遠端存取，則當使用者從這類會話啟動時，必須明確地將此內容告訴使用者。</span><span class="sxs-lookup"><span data-stu-id="e3c15-328">If the app does not support multiple user sessions or remote access, it must clearly say this to the user when it's launched from such a session.</span></span>
-   <span data-ttu-id="e3c15-329">更正措施</span><span class="sxs-lookup"><span data-stu-id="e3c15-329">Corrective action</span></span>
    -   <span data-ttu-id="e3c15-330">請確定應用程式不會在使用者專屬的資料存放區中儲存整個系統的資料檔案或設定，例如使用者設定檔或 HKCU。</span><span class="sxs-lookup"><span data-stu-id="e3c15-330">Make sure that the app doesn’t store system-wide data files or settings in user-specific data stores, such as User Profile or HKCU.</span></span> <span data-ttu-id="e3c15-331">如果有的話，其他使用者就無法使用該資訊。</span><span class="sxs-lookup"><span data-stu-id="e3c15-331">If it does, that info won’t be available to other users.</span></span>
    -   <span data-ttu-id="e3c15-332">在安裝期間，您的應用程式必須安裝全系統的設定和資料檔案，並且在使用者執行時建立使用者特定的檔案和設定。</span><span class="sxs-lookup"><span data-stu-id="e3c15-332">Your app must install system-wide configuration and data files during installation and create the user-specific files and settings after installation when a user runs it.</span></span>
    -   <span data-ttu-id="e3c15-333">請確定應用程式不會在本機或遠端封鎖多個並行會話。</span><span class="sxs-lookup"><span data-stu-id="e3c15-333">Make sure that the app doesn’t block multiple concurrent sessions, either locally or remotely.</span></span> <span data-ttu-id="e3c15-334">應用程式不得相依于全域 mutex 或其他命名物件，以檢查或封鎖多個並行會話。</span><span class="sxs-lookup"><span data-stu-id="e3c15-334">The app must not depend on global mutexes or other named-objects to check for or block multiple concurrent sessions.</span></span>
    -   <span data-ttu-id="e3c15-335">如果應用程式不允許每個使用者有多個並行會話，請針對 mutex 和其他命名物件，使用每個使用者或每個會話的命名空間。</span><span class="sxs-lookup"><span data-stu-id="e3c15-335">If the app can’t allow multiple concurrent sessions per user, use per-user or per-session namespaces for mutexes and other named-objects.</span></span>

## <a name="crashes-and-hangs-test"></a><span data-ttu-id="e3c15-336">當機和停止回應測試</span><span class="sxs-lookup"><span data-stu-id="e3c15-336">Crashes and hangs test</span></span>

<span data-ttu-id="e3c15-337">在認證測試期間監視 app，記錄該 app 何時發生當機或停滯情形。</span><span class="sxs-lookup"><span data-stu-id="e3c15-337">Monitors the app during certification testing to record when it crashes or hangs.</span></span>

-   <span data-ttu-id="e3c15-338">背景</span><span class="sxs-lookup"><span data-stu-id="e3c15-338">Background</span></span>
    -   <span data-ttu-id="e3c15-339">應用程式失敗（例如當機和停止回應）對使用者來說是一大幹擾，因而造成挫折。</span><span class="sxs-lookup"><span data-stu-id="e3c15-339">App failures such as crashes and hangs are a major disruption to users and cause frustration.</span></span> <span data-ttu-id="e3c15-340">消除這類失敗可改善應用程式的穩定性和可靠性，整體來說，可為使用者提供更好的應用程式體驗。</span><span class="sxs-lookup"><span data-stu-id="e3c15-340">Eliminating such failures improves app stability and reliability, and overall, provides users with a better app experience.</span></span> <span data-ttu-id="e3c15-341">停止回應或當機的應用程式會導致使用者遺失資料並產生不良的使用經驗。</span><span class="sxs-lookup"><span data-stu-id="e3c15-341">Apps that stop responding or crash can cause the user to lose data and have a poor experience.</span></span>
-   <span data-ttu-id="e3c15-342">測試詳細資料</span><span class="sxs-lookup"><span data-stu-id="e3c15-342">Test details</span></span>
    -   <span data-ttu-id="e3c15-343">我們會透過認證測試來測試 app 的復原能力和穩定性。</span><span class="sxs-lookup"><span data-stu-id="e3c15-343">We test the app resilience and stability throughout the certification testing.</span></span>
    -   <span data-ttu-id="e3c15-344">Windows 應用程式認證套件會呼叫 [**IApplicationActivationManager：： ActivateApplication**](/windows/desktop/api/shobjidl_core/nf-shobjidl_core-iapplicationactivationmanager-activateapplication) 來啟動 Windows Store 應用程式。</span><span class="sxs-lookup"><span data-stu-id="e3c15-344">The Windows App Certification Kit calls [**IApplicationActivationManager::ActivateApplication**](/windows/desktop/api/shobjidl_core/nf-shobjidl_core-iapplicationactivationmanager-activateapplication) to launch Windows Store apps.</span></span> <span data-ttu-id="e3c15-345">為了讓 **ActivateApplication** 啟動 app，必須啟用使用者帳戶控制 (UAC)，而且螢幕解析度至少必須為 1024 x 768 或 768 x 1024。</span><span class="sxs-lookup"><span data-stu-id="e3c15-345">For **ActivateApplication** to launch an app, User Account Control (UAC) must be enabled and the screen resolution must be at least 1024 x 768 or 768 x 1024.</span></span> <span data-ttu-id="e3c15-346">如果任一條件不符合，您的 app 就無法通過這個測試。</span><span class="sxs-lookup"><span data-stu-id="e3c15-346">If either condition is not met, your app will fail this test.</span></span>
-   <span data-ttu-id="e3c15-347">更正措施</span><span class="sxs-lookup"><span data-stu-id="e3c15-347">Corrective Actions</span></span>
    -   <span data-ttu-id="e3c15-348">確定測試電腦上的 UAC 已啟用。</span><span class="sxs-lookup"><span data-stu-id="e3c15-348">Make sure UAC is enabled on the test computer.</span></span>
    -   <span data-ttu-id="e3c15-349">確定您在螢幕夠大的電腦上執行測試。</span><span class="sxs-lookup"><span data-stu-id="e3c15-349">Make sure you are running the test on a computer with large enough screen.</span></span>
    -   <span data-ttu-id="e3c15-350">如果您的 app 無法啟動，但測試平台符合 [**ActivateApplication**](/windows/desktop/api/shobjidl_core/nf-shobjidl_core-iapplicationactivationmanager-activateapplication) 的先決條件，則您可以檢閱啟用事件記錄檔以疑難排解問題。</span><span class="sxs-lookup"><span data-stu-id="e3c15-350">If your app fails to launch and your test platform satisfies the prerequisites of [**ActivateApplication**](/windows/desktop/api/shobjidl_core/nf-shobjidl_core-iapplicationactivationmanager-activateapplication), you can troubleshoot the problem by reviewing the activation event log.</span></span> <span data-ttu-id="e3c15-351">在事件記錄檔中找到這些項目：</span><span class="sxs-lookup"><span data-stu-id="e3c15-351">To find these entries in the event log:</span></span>
        1.  <span data-ttu-id="e3c15-352">開啟 eventvwr.exe，然後流覽至 [ \\ Windows Logs \\ 應用程式] 節點。</span><span class="sxs-lookup"><span data-stu-id="e3c15-352">Open eventvwr.exe and navigate to the \\Windows Logs\\Application node.</span></span>
        2.  <span data-ttu-id="e3c15-353">篩選檢視，顯示事件識別碼：5900-6000。</span><span class="sxs-lookup"><span data-stu-id="e3c15-353">Filter the view to show Event Ids: 5900-6000.</span></span>
        3.  <span data-ttu-id="e3c15-354">查閱記錄項目，尋找說明為什麼應用程式無法啟動的資訊。</span><span class="sxs-lookup"><span data-stu-id="e3c15-354">Review the log entries for info that might explain why the app didn't launch.</span></span>
    -   <span data-ttu-id="e3c15-355">疑難排解有問題的檔案，並尋找和修正問題。</span><span class="sxs-lookup"><span data-stu-id="e3c15-355">Troubleshoot the file with the problem, identify and fix the problem.</span></span> <span data-ttu-id="e3c15-356">重新建置並重新測試應用程式。</span><span class="sxs-lookup"><span data-stu-id="e3c15-356">Rebuild and re-test the app.</span></span>
-   <span data-ttu-id="e3c15-357">其他資源</span><span class="sxs-lookup"><span data-stu-id="e3c15-357">Additional resources</span></span>
    -   [<span data-ttu-id="e3c15-358">在軟體發展生命週期內使用應用程式驗證器</span><span class="sxs-lookup"><span data-stu-id="e3c15-358">Using Application Verifier Within Your Software Development Lifecycle</span></span>](https://blogs.msdn.com/b/ntdebugging/archive/2014/01/13/debugging-a-windows-8-1-store-app-crash-dump.aspx)
    -   [<span data-ttu-id="e3c15-359">應用程式驗證器</span><span class="sxs-lookup"><span data-stu-id="e3c15-359">Application Verifier</span></span>]( https://go.microsoft.com/fwlink/p/?LinkId=708300)
    -   [<span data-ttu-id="e3c15-360">使用應用程式驗證器</span><span class="sxs-lookup"><span data-stu-id="e3c15-360">Using Application Verifier</span></span>](https://www.microsoft.com/?ref=go)
    -   [<span data-ttu-id="e3c15-361">AppInit Dll</span><span class="sxs-lookup"><span data-stu-id="e3c15-361">AppInit DLLs</span></span>](https://www.microsoft.com/?ref=go)
    -   <span data-ttu-id="e3c15-362">[將啟動時間縮到最短 (使用 C#/VB/C++ 和 XAML 的 Windows 市集應用程式)](/previous-versions/windows/apps/hh994639(v=win.10))</span><span class="sxs-lookup"><span data-stu-id="e3c15-362">[Minimize startup time (Windows Store apps using C#/VB/C++ and XAML)](/previous-versions/windows/apps/hh994639(v=win.10))</span></span>

## <a name="compatibility-and-resiliency-test"></a><span data-ttu-id="e3c15-363">相容性與復原能力測試</span><span class="sxs-lookup"><span data-stu-id="e3c15-363">Compatibility and resiliency test</span></span>

-   <span data-ttu-id="e3c15-364">背景</span><span class="sxs-lookup"><span data-stu-id="e3c15-364">Background</span></span>
    -   <span data-ttu-id="e3c15-365">這項檢查會驗證應用程式的兩個層面，也就是應用程式主要可執行檔 (s) 例如，使用者面向的應用程式進入點必須針對相容性進行檢查，以及宣告正確的 GUID。</span><span class="sxs-lookup"><span data-stu-id="e3c15-365">This check will validate two aspects of an app, the app main executable(s) e.g. user facing app entry point must be manifested for compatibility, as well as declaring the right GUID.</span></span> <span data-ttu-id="e3c15-366">為了支援這種新的測試，報表會在 [相容性 & 復原] 下有子節點。</span><span class="sxs-lookup"><span data-stu-id="e3c15-366">To support this new test the report will have a sub node under ‘Compatibility & resiliency’.</span></span> <span data-ttu-id="e3c15-367">如果遺失其中一個或兩個條件，應用程式將會失敗。</span><span class="sxs-lookup"><span data-stu-id="e3c15-367">The app will fail if one or both of these conditions are missing.</span></span>
-   <span data-ttu-id="e3c15-368">測試詳細資料</span><span class="sxs-lookup"><span data-stu-id="e3c15-368">Test Details</span></span>
    -   <span data-ttu-id="e3c15-369">**相容性：** 應用程式必須完全正常運作，而不需要使用 Windows 相容性模式、AppHelp 訊息或其他相容性修正程式。</span><span class="sxs-lookup"><span data-stu-id="e3c15-369">**Compatibility:** Apps must be fully functional without using Windows compatibility modes, AppHelp messages, or other compatibility fixes.</span></span> <span data-ttu-id="e3c15-370">相容性資訊清單可讓 Windows 在不同版本的作業系統下提供應用程式適當的相容行為</span><span class="sxs-lookup"><span data-stu-id="e3c15-370">A compatibility manifest allows Windows to provide your app the proper compatibility behavior under the different versions of the OS</span></span>
    -   <span data-ttu-id="e3c15-371">**AppInit：** 應用程式不能列出要在 HKEY 本機電腦軟體中載入的 Dll \_ \_ \\ \\ Microsoft \\ Windows NT \\ CurrentVersion \\ Windows \\ AppInit dll 登錄機 \_ 碼。</span><span class="sxs-lookup"><span data-stu-id="e3c15-371">**AppInit:** Apps must not list DLLs to load in the HKEY\_LOCAL\_MACHINE\\Software\\Microsoft\\Windows NT\\CurrentVersion\\Windows\\AppInit\_DLLs registry key.</span></span>
    -   <span data-ttu-id="e3c15-372">**Switchback：** 應用程式必須提供 switchback 資訊清單。</span><span class="sxs-lookup"><span data-stu-id="e3c15-372">**Switchback:** The application must provide the switchback manifest.</span></span> <span data-ttu-id="e3c15-373">如果遺漏資訊清單，Windows 應用程式認證套件會提供警告訊息。</span><span class="sxs-lookup"><span data-stu-id="e3c15-373">If the manifest is missing, Windows App Certification Kit gives a warning message.</span></span> <span data-ttu-id="e3c15-374">Windows 應用程式認證套件也會確認資訊清單是否包含有效的 OS GUID。</span><span class="sxs-lookup"><span data-stu-id="e3c15-374">Windows App Certification Kit will also verify the manifest contains valid OS GUID.</span></span>
-   <span data-ttu-id="e3c15-375">修正動作</span><span class="sxs-lookup"><span data-stu-id="e3c15-375">Corrective actions</span></span>
    -   <span data-ttu-id="e3c15-376">修正應用程式使用相容性修正程式的元件。</span><span class="sxs-lookup"><span data-stu-id="e3c15-376">Fix the app's component that uses the compatibility fix.</span></span>
    -   <span data-ttu-id="e3c15-377">請確定應用程式不會依賴其功能的相容性修正程式。</span><span class="sxs-lookup"><span data-stu-id="e3c15-377">Make sure that the app doesn’t rely on compatibility fixes for its functionality.</span></span>
    -   <span data-ttu-id="e3c15-378">確定您的應用程式已列入清單，而且相容性區段包含適當的值</span><span class="sxs-lookup"><span data-stu-id="e3c15-378">Ensure your app is manifested and the compatibility section include the appropriate values</span></span>
-   <span data-ttu-id="e3c15-379">其他資訊</span><span class="sxs-lookup"><span data-stu-id="e3c15-379">Additional Information</span></span>
    -   <span data-ttu-id="e3c15-380">如需詳細資訊，請參閱 [AppInit dll](/previous-versions/windows/apps/hh994639(v=win.10)) 。</span><span class="sxs-lookup"><span data-stu-id="e3c15-380">See [AppInit DLLs](/previous-versions/windows/apps/hh994639(v=win.10)) for more info.</span></span>

## <a name="windows-security-best-practices-test"></a><span data-ttu-id="e3c15-381">Windows 安全性最佳作法測試</span><span class="sxs-lookup"><span data-stu-id="e3c15-381">Windows Security best practices test</span></span>

-   <span data-ttu-id="e3c15-382">背景</span><span class="sxs-lookup"><span data-stu-id="e3c15-382">Background</span></span>
    -   <span data-ttu-id="e3c15-383">應用程式不應變更預設的 Windows 安全性設定</span><span class="sxs-lookup"><span data-stu-id="e3c15-383">An app should not change the default Windows security settings</span></span>
-   <span data-ttu-id="e3c15-384">測試詳細資料</span><span class="sxs-lookup"><span data-stu-id="e3c15-384">Test Details</span></span>
    -   <span data-ttu-id="e3c15-385">藉由執行受攻擊面分析器來測試應用程式的安全性。</span><span class="sxs-lookup"><span data-stu-id="e3c15-385">Tests the app's security by running the Attack Surface Analyzer.</span></span> <span data-ttu-id="e3c15-386">此方法會將每個測試的失敗分類加入。</span><span class="sxs-lookup"><span data-stu-id="e3c15-386">The approach will be to add categories of failure on a per test basis.</span></span> <span data-ttu-id="e3c15-387">例如，某些安全性測試的分類可能包括：</span><span class="sxs-lookup"><span data-stu-id="e3c15-387">For example some categories for security test may include:</span></span>
        -   <span data-ttu-id="e3c15-388">初始化失敗</span><span class="sxs-lookup"><span data-stu-id="e3c15-388">Initialization failure</span></span>
        -   <span data-ttu-id="e3c15-389">安全性架構失敗</span><span class="sxs-lookup"><span data-stu-id="e3c15-389">Security Architecture failure</span></span>
        -   <span data-ttu-id="e3c15-390">可能的緩衝區溢位失敗</span><span class="sxs-lookup"><span data-stu-id="e3c15-390">Possible Buffer overflow failure</span></span>
        -   <span data-ttu-id="e3c15-391">損毀失敗</span><span class="sxs-lookup"><span data-stu-id="e3c15-391">Crash failure</span></span>
    -   <span data-ttu-id="e3c15-392">如需詳細資訊，請參閱 [這裡](/previous-versions/windows/hh920280(v=win.10))。</span><span class="sxs-lookup"><span data-stu-id="e3c15-392">For details, refer [here](/previous-versions/windows/hh920280(v=win.10)).</span></span>
-   <span data-ttu-id="e3c15-393">修正動作</span><span class="sxs-lookup"><span data-stu-id="e3c15-393">Corrective actions</span></span>
    -   <span data-ttu-id="e3c15-394">針對測試所識別的問題進行疑難排解並加以修正。</span><span class="sxs-lookup"><span data-stu-id="e3c15-394">Troubleshoot and fix the problem identified by the tests.</span></span> <span data-ttu-id="e3c15-395">重新建置並重新測試應用程式。</span><span class="sxs-lookup"><span data-stu-id="e3c15-395">Rebuild and re-test the app.</span></span>

## <a name="windows-security-features-test"></a><span data-ttu-id="e3c15-396">Windows 安全性功能測試</span><span class="sxs-lookup"><span data-stu-id="e3c15-396">Windows security features test</span></span>

-   <span data-ttu-id="e3c15-397">背景</span><span class="sxs-lookup"><span data-stu-id="e3c15-397">Background</span></span>
    -   <span data-ttu-id="e3c15-398">應用程式必須加入 Windows 安全性功能。</span><span class="sxs-lookup"><span data-stu-id="e3c15-398">Applications must opt-into Windows security features.</span></span> <span data-ttu-id="e3c15-399">變更預設的 Windows 安全性保護會讓客戶面臨較高的風險。</span><span class="sxs-lookup"><span data-stu-id="e3c15-399">Changing the default Windows security protections can put customers at increased risk.</span></span>
-   <span data-ttu-id="e3c15-400">測試詳細資料</span><span class="sxs-lookup"><span data-stu-id="e3c15-400">Test details</span></span>
    -   <span data-ttu-id="e3c15-401">執行 BinScope 二元分析器以測試 app 的安全性。</span><span class="sxs-lookup"><span data-stu-id="e3c15-401">Tests the app's security by running the BinScope Binary Analyzer.</span></span> <span data-ttu-id="e3c15-402">如需詳細資訊，請參閱 [這裡](/previous-versions/windows/hh920280(v=win.10))。</span><span class="sxs-lookup"><span data-stu-id="e3c15-402">For details, refer [here](/previous-versions/windows/hh920280(v=win.10)).</span></span>
-   <span data-ttu-id="e3c15-403">修正動作</span><span class="sxs-lookup"><span data-stu-id="e3c15-403">Corrective actions</span></span>
    -   <span data-ttu-id="e3c15-404">針對測試所識別的問題進行疑難排解並加以修正。</span><span class="sxs-lookup"><span data-stu-id="e3c15-404">Troubleshoot and fix the problem identified by the tests.</span></span> <span data-ttu-id="e3c15-405">重新建置並重新測試應用程式。</span><span class="sxs-lookup"><span data-stu-id="e3c15-405">Rebuild and re-test the app.</span></span>

## <a name="high-dpi-test"></a><span data-ttu-id="e3c15-406">高 DPI 測試</span><span class="sxs-lookup"><span data-stu-id="e3c15-406">High DPI test</span></span>

<span data-ttu-id="e3c15-407">強烈建議 Win32 應用程式以 DPI 感知。</span><span class="sxs-lookup"><span data-stu-id="e3c15-407">It is highly recommended for the Win32 apps to be DPI aware.</span></span> <span data-ttu-id="e3c15-408">這是讓應用程式 UI 在各式各樣的高 DPI 顯示器設定中保持一致良好的關鍵。</span><span class="sxs-lookup"><span data-stu-id="e3c15-408">It is the key to make the app UI look consistently good across a wide variety of high-DPI display settings.</span></span> <span data-ttu-id="e3c15-409">在高 DPI 顯示器設定上執行的非 DPI 感知應用程式可能會發生問題，例如 UI 元素、裁剪文字和模糊影像的縮放比例不正確。</span><span class="sxs-lookup"><span data-stu-id="e3c15-409">A non-DPI-aware app running on a high-DPI display setting may have problems such as incorrect scaling of UI elements, clipped text, and blurry images.</span></span> <span data-ttu-id="e3c15-410">有兩種方式可宣告應用程式為 DPI 感知。</span><span class="sxs-lookup"><span data-stu-id="e3c15-410">There are two ways to declare an app is DPI aware.</span></span> <span data-ttu-id="e3c15-411">其中一個是宣告 DPI。</span><span class="sxs-lookup"><span data-stu-id="e3c15-411">One is to declare DPI.</span></span>

-   <span data-ttu-id="e3c15-412">背景</span><span class="sxs-lookup"><span data-stu-id="e3c15-412">Background</span></span>
    -   <span data-ttu-id="e3c15-413">這項檢查會驗證應用程式的兩個層面，主要可執行檔 (s) 例如，使用者面向的應用程式進入點必須針對高 DPI 感知，以及呼叫適當的 Api 來支援高 DPI。</span><span class="sxs-lookup"><span data-stu-id="e3c15-413">This check will validate two aspects of an app, the main executable(s) e.g. user facing app entry points must be manifested for HIGH-DPI awareness and that the proper APIs are being called to support HIGH-DPI.</span></span> <span data-ttu-id="e3c15-414">如果遺失其中一個或兩個條件，應用程式將會失敗。</span><span class="sxs-lookup"><span data-stu-id="e3c15-414">The app will fail if one or both of these conditions are missing.</span></span> <span data-ttu-id="e3c15-415">這項檢查將會在桌面報表中引進新的區段，請參閱下列範例。</span><span class="sxs-lookup"><span data-stu-id="e3c15-415">This check will introduce a new section in the desktop report, see example below.</span></span>
-   <span data-ttu-id="e3c15-416">測試詳細資料</span><span class="sxs-lookup"><span data-stu-id="e3c15-416">Test Details</span></span>
    -   <span data-ttu-id="e3c15-417">當偵測到下列任何一項時，測試將會產生警告：</span><span class="sxs-lookup"><span data-stu-id="e3c15-417">Test will generate a warning when we detect any of the following:</span></span>
        -   <span data-ttu-id="e3c15-418">主要 EXE 不會在其資訊清單中宣告 DPI 感知，也不會呼叫 SetProcessDPIAware API。</span><span class="sxs-lookup"><span data-stu-id="e3c15-418">The main EXE doesn’t declare DPI awareness in its manifest and it doesn’t call SetProcessDPIAware API.</span></span> <span data-ttu-id="e3c15-419">如果忘記新增 DPI 感知資訊清單) ， (會警告開發人員。</span><span class="sxs-lookup"><span data-stu-id="e3c15-419">(Warn the developer if he forgets to add DPI awareness manifest).</span></span>
        -   <span data-ttu-id="e3c15-420">主要 EXE 不會在其資訊清單中宣告 DPI 感知，但會呼叫 SetProcessDPIAware API (警告開發人員應該使用資訊清單來宣告 DPI 感知，而不是呼叫 API) 。</span><span class="sxs-lookup"><span data-stu-id="e3c15-420">The main EXE doesn’t declare DPI awareness in its manifest, but it calls SetProcessDPIAware API (Warn the developer that he should use manifest to declare DPI awareness instead of calling the API).</span></span>
        -   <span data-ttu-id="e3c15-421">MainEXE 會在其資訊清單中宣告 DPI 感知，但它也會呼叫 SetProcessDPIAware API (警告開發人員) 不需要呼叫該 API。</span><span class="sxs-lookup"><span data-stu-id="e3c15-421">The mainEXE declares DPI awareness in its manifest, but it also calls SetProcessDPIAware API (Warn the developer that calling that API is not necessary).</span></span>
        -   <span data-ttu-id="e3c15-422">針對不是主要 Exe 的二進位檔，如果它們呼叫 API，則不建議) 使用 (呼叫 API 的警告。</span><span class="sxs-lookup"><span data-stu-id="e3c15-422">For the binaries which are not main EXEs, if they calls the API, give a warning (Calling the API is not recommended).</span></span>
-   <span data-ttu-id="e3c15-423">修正動作</span><span class="sxs-lookup"><span data-stu-id="e3c15-423">Corrective actions</span></span>
    -   <span data-ttu-id="e3c15-424">不建議使用 SetProcessDPIAware () 函式。</span><span class="sxs-lookup"><span data-stu-id="e3c15-424">The use of SetProcessDPIAware() function is discouraged.</span></span> <span data-ttu-id="e3c15-425">如果 DLL 在初始化期間快取了 DPI 設定，則在應用程式中叫用 SetProcessDPIAware () 可能會產生競爭條件。</span><span class="sxs-lookup"><span data-stu-id="e3c15-425">If a DLL caches DPI settings during its initialization, invoking SetProcessDPIAware() in the app may generate a race condition.</span></span> <span data-ttu-id="e3c15-426">在 DLL 中呼叫 SetProcessDPIAware () 函式並不是很好的作法。</span><span class="sxs-lookup"><span data-stu-id="e3c15-426">Calling SetProcessDPIAware() function in a DLL is not a good practice either.</span></span>
-   <span data-ttu-id="e3c15-427">其他資訊</span><span class="sxs-lookup"><span data-stu-id="e3c15-427">Additional Information</span></span>
    -   <span data-ttu-id="e3c15-428">[撰寫高 DPI 應用程式](https://msdn.microsoft.com/library/windows/desktop/mt843498(v=vs.85).aspx(d=robot))</span><span class="sxs-lookup"><span data-stu-id="e3c15-428">[Writing High-DPI apps](https://msdn.microsoft.com/library/windows/desktop/mt843498(v=vs.85).aspx(d=robot))</span></span>

 

 