---
description: 系統會使用計數器來收集效能資料。
ms.assetid: d1f1a90c-425a-4606-b86d-2948305ea84a
title: 指定計數器路徑
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a359762e4d959992bebd338c4b3ee29825c63b4cb081b70722c82fb3376b5d19
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/11/2021
ms.locfileid: "119143801"
---
# <a name="specifying-a-counter-path"></a>指定計數器路徑

系統會使用計數器來收集效能資料。 每個計數器都會透過其名稱及其路徑或位置來唯一識別。 計數器路徑的語法為：

``` syntax
\\Computer\PerfObject(ParentInstance/ObjectInstance#InstanceIndex)\Counter
```

Computer 元素會指定您要從中查詢效能資料之電腦的名稱或 IP 位址。 如果計數器位於本機電腦上，則電腦名稱稱是選擇性的。

PerfObject 元素會指定要查詢的效能物件。 效能物件可以是實體元件，例如處理器、磁片和記憶體，或系統物件（例如進程和執行緒）。 每個系統物件都與電腦內的功能性元素相關，並有一組指派給它的標準計數器。 每部電腦上可能會安裝一組不同的效能物件和計數器，因為應用程式可以安裝自己的效能物件和計數器。 如需電腦上所安裝的效能物件和計數器清單，請參閱您電腦上 [效能] 工具中的 [ **新增計數器** ] 對話方塊。 這些物件也會列在 [PDH 流覽] 對話方塊中 (查看) [流覽計數器](browsing-counters.md) 。 如需系統效能物件和計數器的清單，請參閱 [依物件的計數器](/previous-versions/windows/it-pro/windows-server-2003/cc783073(v=ws.10))。

如果有多個物件實例可以存在，ParentInstance、ObjectInstance 和 InstanceIndex 就會包含在路徑中。 例如，進程和執行緒是多個實例物件，因為有多個進程或執行緒可以同時執行。 如果物件可以有一個以上的實例，則計數器路徑必須指定物件實例。

實例相關元素的格式取決於物件類型。 如果物件具有簡單的實例，則格式只是以括弧括住的實例名稱。 例如：

``` syntax
(Explorer)
```

如果這個物件的實例也需要父實例名稱，則父實例名稱必須在物件實例之前，並以正斜線字元分隔。 例如，執行緒屬於進程。 如果您查詢執行緒物件，您也必須指定它所屬的進程，如下列範例所示：

``` syntax
(Explorer/0)
```

如果物件具有多個具有相同名稱字串的實例，則可以藉由指定前置詞為井字型大小的實例索引，以順序來編制索引。 實例索引是以0為基礎。 如果您想要查詢第一個實例，請勿包含 \# 0，只要指定實例名稱即可。 若要指定第二個實例，請使用 \# 1; 若要指定第三個實例，請使用 \# 2; 依此類推。 例如：

``` syntax
(Explorer/0#1)
```

Counter 元素會指定您想要查詢指定效能物件的效能計數器。

PDH 在計數器路徑中使用下列特殊字元。 提供者不應該在其名稱中使用這些字元。 如果提供者使用這些特殊字元，則 PDH 無法剖析完整的計數器路徑以取得計數器和實例名稱。



| 字元 | 描述                                                |
|-----------|------------------------------------------------------------|
| \\        | 電腦、物件和計數器的一般分隔符號。       |
| (         | 實例名稱的開頭。                                |
| )         | 實例名稱的結尾。                                   |
| /         | 分隔實例和父實例。                    |
| \#n       | 識別相同名稱之實例的特定出現位置。 |
| \*        | 萬用字元。                                        |



 

下列範例顯示計數器路徑的可能格式：

-   \\\\電腦 \\ 物件 (父/實例 \# 索引) \\ 計數器
-   \\\\\\ (父/實例) 計數器的電腦物件 \\
-   \\\\\\ (實例 \# 索引) \\ 計數器的電腦物件
-   \\\\\\ (實例) 計數器的電腦物件 \\
-   \\\\電腦 \\ 物件 \\ 計數器
-   \\物件 (父/實例 \# 索引) \\ 計數器
-   \\物件 (父/實例) \\ 計數器
-   \\物件 (實例 \# 索引) \\ 計數器
-   \\物件 (實例) \\ 計數器
-   \\物件 \\ 計數器

## <a name="using-wildcard-characters"></a>使用萬用字元

計數器路徑只可包含實例名稱的萬用字元，如下列範例所示。

``` syntax
\Process(*)\% Processor Time
```

若要將萬用字元展開至包含在電腦上找到的實例或在記錄檔中的計數器路徑清單，請呼叫 [**PdhExpandWildCardPath**](/windows/desktop/api/Pdh/nf-pdh-pdhexpandwildcardpatha)。

 

 
