---
description: 定義邏輯上相關的計數器清單。
ms.assetid: d094146a-389e-4053-8ee5-acd29254e817
title: counterSet 複雜類型
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- kbSyntax
api_name: ''
api_type: ''
api_location: ''
ms.openlocfilehash: e753fab4308f1e981ab06e9470742ace46840a39
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/07/2021
ms.locfileid: "106974277"
---
# <a name="counterset-complex-type"></a><span data-ttu-id="5a1fd-103">counterSet 複雜類型</span><span class="sxs-lookup"><span data-stu-id="5a1fd-103">counterSet Complex Type</span></span>

<span data-ttu-id="5a1fd-104">定義邏輯上相關的計數器清單。</span><span class="sxs-lookup"><span data-stu-id="5a1fd-104">Defines a list of counters that are logically related.</span></span>

``` syntax
<xs:complexType name="counterSet">
    <xs:sequence>
        <xs:element name="structs"
            type="man:structs"
            minOccurs="0"
            maxOccurs="1"
         />
        <xs:element name="counter"
            type="man:counter"
            minOccurs="1"
            maxOccurs="unbounded"
         />
    </xs:sequence>
    <xs:attribute name="symbol"
        type="man:CSymbolType"
        use="required"
     />
    <xs:attribute name="guid"
        type="man:GUIDType"
        use="required"
     />
    <xs:attribute name="uri"
        type="xs:anyURI"
        use="required"
     />
    <xs:attribute name="name"
        use="required"
    >
        <xs:simpleType>
            <xs:restriction
                base="xs:string"
            >
                <xs:maxLength
                    value="1023"
                 />
            </xs:restriction>
        </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="description"
        type="xs:string"
        use="required"
     />
    <xs:attribute name="instances"
        use="optional"
        default="single"
    >
        <xs:simpleType>
            <xs:restriction
                base="xs:string"
            >
                <xs:enumeration
                    value="single"
                 />
                <xs:enumeration
                    value="multiple"
                 />
                <xs:enumeration
                    value="globalAggregate"
                 />
                <xs:enumeration
                    value="multipleAggregate"
                 />
                <xs:enumeration
                    value="globalAggregateHistory"
                 />
            </xs:restriction>
        </xs:simpleType>
    </xs:attribute>
</xs:complexType>
```

## <a name="child-elements"></a><span data-ttu-id="5a1fd-105">子元素</span><span class="sxs-lookup"><span data-stu-id="5a1fd-105">Child elements</span></span>



| <span data-ttu-id="5a1fd-106">元素</span><span class="sxs-lookup"><span data-stu-id="5a1fd-106">Element</span></span>     | <span data-ttu-id="5a1fd-107">類型</span><span class="sxs-lookup"><span data-stu-id="5a1fd-107">Type</span></span>                                                             | <span data-ttu-id="5a1fd-108">Description</span><span class="sxs-lookup"><span data-stu-id="5a1fd-108">Description</span></span>                                                                                            |
|-------------|------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="5a1fd-109">**計數器**</span><span class="sxs-lookup"><span data-stu-id="5a1fd-109">**counter**</span></span> | [<span data-ttu-id="5a1fd-110">**man：計數器**</span><span class="sxs-lookup"><span data-stu-id="5a1fd-110">**man:counter**</span></span>](performance-counters-counter-complex-type.md) | <span data-ttu-id="5a1fd-111">定義提供者所提供的計數器。</span><span class="sxs-lookup"><span data-stu-id="5a1fd-111">Defines a counter that the provider provides.</span></span><br/>                                               |
| <span data-ttu-id="5a1fd-112">**結構**</span><span class="sxs-lookup"><span data-stu-id="5a1fd-112">**structs**</span></span> | [<span data-ttu-id="5a1fd-113">**man：結構**</span><span class="sxs-lookup"><span data-stu-id="5a1fd-113">**man:structs**</span></span>](performance-counters-structs-complex-type.md) | <span data-ttu-id="5a1fd-114">結構元素的清單，其中包含此計數器集合中定義之計數器的值。</span><span class="sxs-lookup"><span data-stu-id="5a1fd-114">A list of struct elements that contain values for the counters defined in this counter set.</span></span><br/> |



## <a name="attributes"></a><span data-ttu-id="5a1fd-115">屬性</span><span class="sxs-lookup"><span data-stu-id="5a1fd-115">Attributes</span></span>



| <span data-ttu-id="5a1fd-116">名稱</span><span class="sxs-lookup"><span data-stu-id="5a1fd-116">Name</span></span>        | <span data-ttu-id="5a1fd-117">類型</span><span class="sxs-lookup"><span data-stu-id="5a1fd-117">Type</span></span>                                                                    | <span data-ttu-id="5a1fd-118">描述</span><span class="sxs-lookup"><span data-stu-id="5a1fd-118">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|-------------|-------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="5a1fd-119">description</span><span class="sxs-lookup"><span data-stu-id="5a1fd-119">description</span></span> | <span data-ttu-id="5a1fd-120">**xs:string**</span><span class="sxs-lookup"><span data-stu-id="5a1fd-120">**xs:string**</span></span>                                                           | <span data-ttu-id="5a1fd-121">計數器集合的簡短描述。</span><span class="sxs-lookup"><span data-stu-id="5a1fd-121">A short description of the counter set.</span></span> <br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| <span data-ttu-id="5a1fd-122">guid</span><span class="sxs-lookup"><span data-stu-id="5a1fd-122">guid</span></span>        | [<span data-ttu-id="5a1fd-123">**男人： GUIDType**</span><span class="sxs-lookup"><span data-stu-id="5a1fd-123">**man:GUIDType**</span></span>](performance-counters-guidtype-simple-type.md)       | <span data-ttu-id="5a1fd-124">可唯一識別計數器集合的 GUID。</span><span class="sxs-lookup"><span data-stu-id="5a1fd-124">A GUID that uniquely identifies the counter set.</span></span> <span data-ttu-id="5a1fd-125">如果已註冊 GUID，則計數器集合註冊會失敗。</span><span class="sxs-lookup"><span data-stu-id="5a1fd-125">The counter set registration fails if the GUID is already registered.</span></span> <span data-ttu-id="5a1fd-126">若要更新已註冊的計數器集合，您必須先卸載計數器集合，然後再註冊一次。</span><span class="sxs-lookup"><span data-stu-id="5a1fd-126">To update a counter set that is registered, you must first uninstall the counter set and then register it again.</span></span> <br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| <span data-ttu-id="5a1fd-127">執行個體</span><span class="sxs-lookup"><span data-stu-id="5a1fd-127">instances</span></span>   |                                                                         | <span data-ttu-id="5a1fd-128">判斷計數器集合是否可包含多個實例。</span><span class="sxs-lookup"><span data-stu-id="5a1fd-128">Determines whether the counter set can contain multiple instances.</span></span> <span data-ttu-id="5a1fd-129">以下列出可能的值：</span><span class="sxs-lookup"><span data-stu-id="5a1fd-129">The following lists the possible values:</span></span><br/> <dl> <span data-ttu-id="5a1fd-130"><dt><span id="single"></span><span id="SINGLE"></span>單</dt></span><span class="sxs-lookup"><span data-stu-id="5a1fd-130"><dt><span id="single"></span><span id="SINGLE"></span>single</dt></span></span> <dd> <span data-ttu-id="5a1fd-131">定義計數器集合，其中計數器集合中只能存在一個計數器的實例。</span><span class="sxs-lookup"><span data-stu-id="5a1fd-131">Defines a counter set where only one instance of the counters in the counter set can exist.</span></span> <span data-ttu-id="5a1fd-132">如果計數器提供整個系統的測量（例如實體記憶體），請指定此值。</span><span class="sxs-lookup"><span data-stu-id="5a1fd-132">Specify this value if the counters provide system-wide measurements, such as physical memory.</span></span> <span data-ttu-id="5a1fd-133">此為預設值。</span><span class="sxs-lookup"><span data-stu-id="5a1fd-133">This is the default.</span></span><br/> </dd> <span data-ttu-id="5a1fd-134"><dt><span id="multiple"></span><span id="MULTIPLE"></span>多個</dt></span><span class="sxs-lookup"><span data-stu-id="5a1fd-134"><dt><span id="multiple"></span><span id="MULTIPLE"></span>multiple</dt></span></span> <dd> <span data-ttu-id="5a1fd-135">定義計數器集合，其中計數器集合中的多個計數器實例可以存在。</span><span class="sxs-lookup"><span data-stu-id="5a1fd-135">Defines a counter set where multiple instances of the counters in the counter set can exist.</span></span> <span data-ttu-id="5a1fd-136">如果計數器提供依實例測量的度量，例如每個進程的處理器時間，請指定此值。</span><span class="sxs-lookup"><span data-stu-id="5a1fd-136">Specify this value if the counters provide per-instance measurements, such as processor time per process.</span></span><br/> </dd> <span data-ttu-id="5a1fd-137"><dt><span id="globalAggregate"></span><span id="globalaggregate"></span><span id="GLOBALAGGREGATE"></span>globalAggregate</dt></span><span class="sxs-lookup"><span data-stu-id="5a1fd-137"><dt><span id="globalAggregate"></span><span id="globalaggregate"></span><span id="GLOBALAGGREGATE"></span>globalAggregate</dt></span></span> <dd> <span data-ttu-id="5a1fd-138">定義單一實例計數器集合，其中計數器集合中的計數器必須從不同的使用中來源進行匯總。</span><span class="sxs-lookup"><span data-stu-id="5a1fd-138">Defines a single instance counter set where the counters in the counter set must be aggregated from various active sources.</span></span> <span data-ttu-id="5a1fd-139">例如，您可以建立包含計數器的計數器集合，該計數器會計算硬碟的磁片讀取次數。</span><span class="sxs-lookup"><span data-stu-id="5a1fd-139">For example, you could create a counter set that contains a counter that counts the number of disk reads for a hard disk.</span></span> <span data-ttu-id="5a1fd-140">如果電腦有三個硬碟，而取用者查詢磁片讀取次數，PERFLIB 會取得每個磁片的讀取次數，並加總其個別值。</span><span class="sxs-lookup"><span data-stu-id="5a1fd-140">If the computer has three hard disks and a consumer queries for the number of disk reads, PERFLIB will obtain the number of reads from each disk and sum their individual values.</span></span> <br/> </dd> <span data-ttu-id="5a1fd-141"><dt><span id="multipleAggregate"></span><span id="multipleaggregate"></span><span id="MULTIPLEAGGREGATE"></span>multipleAggregate</dt></span><span class="sxs-lookup"><span data-stu-id="5a1fd-141"><dt><span id="multipleAggregate"></span><span id="multipleaggregate"></span><span id="MULTIPLEAGGREGATE"></span>multipleAggregate</dt></span></span> <dd> <span data-ttu-id="5a1fd-142">定義多個實例計數器集合，其中計數器集合中的計數器必須在該計數器的所有實例之間進行匯總。</span><span class="sxs-lookup"><span data-stu-id="5a1fd-142">Defines a multiple instance counter set where the counters in the counter set must be aggregated across all instances of that counter.</span></span> <span data-ttu-id="5a1fd-143">例如，您可以建立多執行緒應用程式的計數器集合，其中包含計數器來測量執行緒效能 (每個執行緒都會參考計數器集合) 的實例。</span><span class="sxs-lookup"><span data-stu-id="5a1fd-143">For example, you could create a counter set for a multi-threaded application that contains a counter that measures thread performance (each thread would refer to an instance of the counter set).</span></span> <span data-ttu-id="5a1fd-144">當取用者查詢執行緒總執行時間計數器時，PERFLIB 會加匯流排程執行時間與每個實例的總執行時間。</span><span class="sxs-lookup"><span data-stu-id="5a1fd-144">When a consumer queries the total thread execution time counter, PERFLIB will sum the total thread execution time from each instance.</span></span><br/> </dd> <span data-ttu-id="5a1fd-145"><dt><span id="globalAggregateHistory"></span><span id="globalaggregatehistory"></span><span id="GLOBALAGGREGATEHISTORY"></span>globalAggregateHistory</dt></span><span class="sxs-lookup"><span data-stu-id="5a1fd-145"><dt><span id="globalAggregateHistory"></span><span id="globalaggregatehistory"></span><span id="GLOBALAGGREGATEHISTORY"></span>globalAggregateHistory</dt></span></span> <dd> <span data-ttu-id="5a1fd-146">定義單一實例計數器集合，其計數器值會在取用者的存留期內快取。</span><span class="sxs-lookup"><span data-stu-id="5a1fd-146">Defines a single instance counter set whose counter values are cached for the lifetime of the consumer.</span></span> <span data-ttu-id="5a1fd-147">請注意，系統會快取計數器集合中的所有計數器。</span><span class="sxs-lookup"><span data-stu-id="5a1fd-147">Note that all counters in the counter set are cached.</span></span> <span data-ttu-id="5a1fd-148">若只要快取特定計數器，請使用歷程記錄屬性來裝飾這些計數器。</span><span class="sxs-lookup"><span data-stu-id="5a1fd-148">To cache only specific counters, decorate those counters with the history attribute.</span></span><br/> <span data-ttu-id="5a1fd-149">使用 globalAggregate 的 disk read 範例，會快取計數器集合中的所有計數器值。</span><span class="sxs-lookup"><span data-stu-id="5a1fd-149">Using the disk read example from globalAggregate, all counter values in the counter set would be cached.</span></span> <span data-ttu-id="5a1fd-150">如果有一個磁片無法使用，該磁片所讀取之位元組總數的最後一個快取值仍可供取用者應用程式使用。</span><span class="sxs-lookup"><span data-stu-id="5a1fd-150">If one disk became unavailable, the last cached value for total bytes read by that disk would still be available to the consumer application.</span></span><br/> </dd> </dl> |
| <span data-ttu-id="5a1fd-151">NAME</span><span class="sxs-lookup"><span data-stu-id="5a1fd-151">name</span></span>        |                                                                         | <span data-ttu-id="5a1fd-152">計數器集合的顯示名稱。</span><span class="sxs-lookup"><span data-stu-id="5a1fd-152">The display name of the counter set.</span></span> <span data-ttu-id="5a1fd-153">必須少於1024個字元。</span><span class="sxs-lookup"><span data-stu-id="5a1fd-153">Must be less than 1,024 characters.</span></span> <span data-ttu-id="5a1fd-154">名稱區分大小寫。</span><span class="sxs-lookup"><span data-stu-id="5a1fd-154">The name is case-sensitive.</span></span> <br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="5a1fd-155">符號</span><span class="sxs-lookup"><span data-stu-id="5a1fd-155">symbol</span></span>      | [<span data-ttu-id="5a1fd-156">**男人： CSymbolType**</span><span class="sxs-lookup"><span data-stu-id="5a1fd-156">**man:CSymbolType**</span></span>](performance-counters-csymboltype-simple-type.md) | <span data-ttu-id="5a1fd-157">識別計數器集合的符號名稱。</span><span class="sxs-lookup"><span data-stu-id="5a1fd-157">A symbolic name that identifies the counter set.</span></span> <span data-ttu-id="5a1fd-158">[CTRPP](ctrpp.md)工具會建立 GUID 變數，您可以在呼叫需要計數器集 GUID (例如 [**PerfCreateInstance**](/windows/desktop/api/Perflib/nf-perflib-perfcreateinstance)) 的函式時使用。</span><span class="sxs-lookup"><span data-stu-id="5a1fd-158">The [CTRPP](ctrpp.md) tool creates a GUID variable that you can use when calling functions that require the counter set GUID (for example, [**PerfCreateInstance**](/windows/desktop/api/Perflib/nf-perflib-perfcreateinstance)).</span></span> <span data-ttu-id="5a1fd-159">變數名稱的格式為 *symbolicname* Guid。</span><span class="sxs-lookup"><span data-stu-id="5a1fd-159">The variable name is of the form, *symbolicname* Guid.</span></span> <br/> <span data-ttu-id="5a1fd-160">如果您在呼叫 [CTRPP](ctrpp.md)時包含 **-prefix** 引數，則前置詞字串會加入符號名稱的開頭。</span><span class="sxs-lookup"><span data-stu-id="5a1fd-160">If you include the **-prefix** argument when calling [CTRPP](ctrpp.md), the prefix string is added to the beginning of the symbolic name.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="5a1fd-161">uri</span><span class="sxs-lookup"><span data-stu-id="5a1fd-161">uri</span></span>         | <span data-ttu-id="5a1fd-162">**xs： anyURI**</span><span class="sxs-lookup"><span data-stu-id="5a1fd-162">**xs:anyURI**</span></span>                                                           | <span data-ttu-id="5a1fd-163">唯一的統一資源識別項，可讓使用者從任何位置存取計數器集合中的計數器。</span><span class="sxs-lookup"><span data-stu-id="5a1fd-163">A unique uniform resource identifier that lets users access the counters in the counter set from any location.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |



## <a name="requirements"></a><span data-ttu-id="5a1fd-164">規格需求</span><span class="sxs-lookup"><span data-stu-id="5a1fd-164">Requirements</span></span>



| <span data-ttu-id="5a1fd-165">需求</span><span class="sxs-lookup"><span data-stu-id="5a1fd-165">Requirement</span></span> | <span data-ttu-id="5a1fd-166">值</span><span class="sxs-lookup"><span data-stu-id="5a1fd-166">Value</span></span> |
|-------------------------------------|------------------------------------------------------|
| <span data-ttu-id="5a1fd-167">最低支援的用戶端</span><span class="sxs-lookup"><span data-stu-id="5a1fd-167">Minimum supported client</span></span><br/> | <span data-ttu-id="5a1fd-168">\[僅限 Windows Vista 桌面應用程式\]</span><span class="sxs-lookup"><span data-stu-id="5a1fd-168">Windows Vista \[desktop apps only\]</span></span><br/>       |
| <span data-ttu-id="5a1fd-169">最低支援的伺服器</span><span class="sxs-lookup"><span data-stu-id="5a1fd-169">Minimum supported server</span></span><br/> | <span data-ttu-id="5a1fd-170">僅限 Windows Server 2008 \[ desktop 應用程式\]</span><span class="sxs-lookup"><span data-stu-id="5a1fd-170">Windows Server 2008 \[desktop apps only\]</span></span><br/> |



 

 




