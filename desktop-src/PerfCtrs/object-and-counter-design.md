---
description: 效能物件是可使用效能資料的實體。
ms.assetid: 97b9c9ec-e758-4928-b3fa-90d220bca5fb
title: 物件和計數器設計
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9556882f5dd6c323697d9d41fa80727895550a5d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/07/2021
ms.locfileid: "103944258"
---
# <a name="object-and-counter-design"></a>物件和計數器設計

效能物件是可使用效能資料的實體。 效能計數器會定義效能物件可用的資料類型。 應用程式可提供多個效能物件的資訊。 效能物件可以包含單一實例計數器或多個實例計數器。 單一實例物件會傳回一組計數器值。

多個實例物件會針對每個應用程式所控制的物件，傳回物件的實例。 例如，SCSI 應用程式可以定義具有兩個計數器的磁片磁碟機物件，例如讀取的位元組和寫入位元組。 當取用者查詢物件時，效能 DLL 會針對應用程式所控制的每個磁片磁碟機，傳回物件的實例。

決定您的物件是否支援單一實例或多個實例之後，您必須決定要讓物件提供的計數器類型。 例如，您可以提供顯示為原始值、費率或百分比的計數器值。

如需您應從中選擇之預先定義計數器類型的清單，請參閱 [Windows Server 2003 部署套件](/previous-versions/windows/it-pro/windows-server-2003/cc776490(v=ws.10))的「計數器類型」一節。 視計數器類型而定，您可以直接提供原始資料，也可能必須提供時間和頻率資訊，以及取用者用來計算可顯示值的額外計數器資料。

您用來收集資料的方法可以像在每次呼叫應用程式中的特定常式時遞增計數器一樣簡單，也可能牽涉到耗時的計算。 計數器和計時器應該遞增，而且永遠不會清除。 計數器可以換行，只要它們不會在取用者取樣之間進行兩次。 只要應用程式不會影響其效能，您的應用程式就可以在其正常執行期間收集和儲存資料。

針對某些類型的資料，視需要收集資料可能更有效率或更適當。 在這種情況下，效能 DLL 必須與已要求資料的應用程式進行通訊。 針對 () 處理器時間或記憶體使用量來收集的資料，請考慮只在取用者要求 **昂貴** 的資料時收集資料。 這可讓取用者定期要求所有不昂貴的計數器資料。 只有在需要時，才可以要求資料。 效能工具不會收集 **成本高昂** 的資料。

 

 
