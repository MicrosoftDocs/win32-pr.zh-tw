---
title: 使用 System-Generated 值
description: 根據使用者提供的輸入語義，IA 階段會產生系統產生的值 (，) 以允許著色器作業中有某些效率。
ms.assetid: eed1e377-4b0e-4958-b6d4-945b2a952ad8
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1bbf190ed0c2d5cb4ce38cb3582d64d6d28daddac850e3ae3331254b86714724
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/11/2021
ms.locfileid: "119046656"
---
# <a name="using-system-generated-values"></a>使用 System-Generated 值

根據使用者提供的輸入 [語義](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-semantics) ，IA 階段會產生系統產生的值 (，) 以允許著色器作業中有某些效率。

藉由附加資料（例如，VS)  (可見的實例識別碼）、對 VS) 可見的頂點 (識別碼，或 GS/PS (可見的基本識別碼) ，後續的著色器階段可能會尋找這些系統值，以便在該階段中將處理優化。 例如，VS 階段可能會尋找實例識別碼，以抓取著色器的其他每個頂點資料，或執行其他作業;GS 和 PS 階段可能會使用基本識別碼以相同方式抓取每個基本的資料。

-   [VertexID](#vertexid)
-   [PrimitiveID](#primitiveid)
-   [InstanceID](#instanceid)
-   [範例](#example)
-   [相關主題](#related-topics)

## <a name="vertexid"></a>VertexID

每個著色器階段都會使用頂點識別碼來識別每個頂點。 它是預設值為 0 的 32 位元不帶正負號整數。 當 IA 階段處理基本類型時，就會將它指派給頂點。 將頂點識別碼語義附加至著色器輸入宣告，以通知 IA 階段產生每個頂點的識別碼。

IA 會將頂點識別碼加入至每個頂點，以供著色器階段使用。 針對每個繪製呼叫，頂點識別碼會遞增1。 跨索引的繪製呼叫，計數會重設回到起點。 若為 [**>id3d11devicecoNtext：:D rawindexed**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-drawindexed) 和 [**>id3d11devicecoNtext：:D rawindexedinstanced**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-drawindexedinstanced)，則頂點識別碼代表索引值。 如果頂點識別碼溢位 (超過2個³²-1) ，它會換成0。

針對所有基本型別，頂點都有與其相關聯的頂點識別碼 (無論連續的) 。

## <a name="primitiveid"></a>PrimitiveID

每個著色器階段都會使用基本識別碼來識別每個基本類型。 它是預設值為 0 的 32 位元不帶正負號整數。 當第一個基本類型由 IA 階段處理時，會將它指派給基本物件。 若要通知 IA 階段產生基本識別碼，請將基本識別碼語義附加至著色器輸入宣告。

IA 階段會將基本識別碼加入至每個基本型別，以供幾何著色器或圖元著色器階段使用 (第一個階段是在 IA 階段) 之後處於使用中階段的第一個階段。 對於每個索引繪製呼叫，基本識別碼都會遞增1，不過，每當新的實例開始時，基本識別碼就會重設為0。 所有其他繪製呼叫都不會變更實例識別碼的值。如果實例識別碼溢位 (超過2個³²-1) ，它會換成0。

圖元著色器階段沒有個別的基本識別碼輸入;不過，指定基本識別碼的任何圖元著色器輸入都會使用常數插補模式。

不支援自動為連續的基本識別碼產生基本識別碼。 若為具有連續的基本型別（例如具有連續的三角形區域），則只會針對 (非相鄰基本) 的內部基本型別維護基本識別碼，就像不連續的三角形區域中的一組基本識別碼一樣。

## <a name="instanceid"></a>InstanceID

每個著色器階段都會使用實例識別碼來識別目前正在處理之幾何的實例。 它是預設值為 0 的 32 位元不帶正負號整數。

如果頂點著色器輸入宣告包含實例識別碼語義，則 IA 階段會將實例識別碼加入至每個頂點。 對於每個索引繪製呼叫，實例識別碼都會遞增1。 所有其他繪製呼叫都不會變更實例識別碼的值。如果實例識別碼溢位 (超過2個³²-1) ，它會換成0。

## <a name="example"></a>範例

下圖顯示如何將系統值附加至 IA 階段中的實例三角形帶。

![執行個體化三角形連環系統值的圖例](images/d3d10-ia-example.png)

這些表格顯示兩個有相同三角形連環的執行個體的系統產生值。 第一個執行個體（執行個體 U）以藍色顯示，第二個執行個體（執行個體 V）以綠色顯示。 實線連接基本類型中的頂點，虛線連接相鄰頂點。

下表顯示執行個體 U 的系統產生值。



| 頂點資料    | C,U | D,U | E,U | F,U | G,U | H,U | I,U | J,U | K,U | L,U |
|----------------|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|
| **VertexID**   | 0   | 1   | 2   | 3   | 4   | 5   | 6   | 7   | 8   | 9   |
| **InstanceID** | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   |



 



|                 | 值    | 值    | 值    |
|-----------------|-----|-----|-----|
| **PrimitiveID** | 0   | 1   | 2   |
| **InstanceID**  | 0   | 0   | 0   |



 

下表顯示執行個體 V 的系統產生值。



| 頂點資料    | C,V | D,V | E,V | F,V | G,V | H,V | I,V | J,V | K,V | L,V |
|----------------|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|
| **VertexID**   | 0   | 1   | 2   | 3   | 4   | 5   | 6   | 7   | 8   | 9   |
| **InstanceID** | 1   | 1   | 1   | 1   | 1   | 1   | 1   | 1   | 1   | 1   |



 



|                 |值     | 值    |  值   |
|-----------------|-----|-----|-----|
| **PrimitiveID** | 0   | 1   | 2   |
| **InstanceID**  | 1   | 1   | 1   |



 

輸入組合語言會產生 (頂點、基本和實例) 的識別碼;另外也請注意，每個實例都會獲得唯一的實例識別碼。資料的結尾會是區域剪下，這會將每個三角形區域的實例隔開。

## <a name="related-topics"></a>相關主題

<dl> <dt>

[輸入組合階段](d3d10-graphics-programming-guide-input-assembler-stage.md)
</dt> </dl>

 

 