---
title: 對應在磚集區中
description: 使用 D3D11 資源的「其他並排顯示」旗標來建立資源時 \_ \_ \_ ，構成資源的磚會指向磚集區中的位置。
ms.assetid: 1DBE23B2-A1E6-4491-9B74-4E92508A68FC
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5d4a31d2e8cd4457281c047db514dd2450d3bf70d85be7e4933cb7e5f5e026a5
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/11/2021
ms.locfileid: "119045616"
---
# <a name="mappings-are-into-a-tile-pool"></a>對應在磚集區中

使用 [**D3D11 資源的「 \_ \_ 其他 \_**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_resource_misc_flag) 並排顯示」旗標來建立資源時，構成資源的磚會指向磚集區中的位置。 磚集區是記憶體的集區 (由一或多個配置於幕後備份 - 應用程式中看不見)。 作業系統和顯示器驅動程式管理這個記憶體集區，讓應用程式容易了解磁碟使用量。 並排顯示的資源會指向磚集區中的位置，以對應64KB 個區域。 這項設定的一個附帶結果是，它可以讓多資源共用及重複使用相同的動態磚，如有需要，也讓相同的動態磚在資源內的不同位置重複使用。

從磚集區彈性填入磚的成本是，該資源必須定義和維護磚集區中的磚對應代表資源所需的動態磚。 您可以變更磚對應。 並非所有資源中的磚每次都需要對應一次。資源可以有 **NULL** 對應。 **NULL** 對應定義為從存取之資源的觀點無法使用磚。

您可以建立多個磚集區，而且任何數目的並排顯示資源都可以同時對應到任何指定的磚集區。 磚集區也可以變大或縮小。 如需詳細資訊，請參閱[調整磚集區大小](tile-pool-resizing.md)。 一個可簡化顯示驅動程式和執行時間執行的條件約束，就是指定的並排顯示資源一次只能有一個磚集區的對應 (而不是同時對應到多個磚集區) 。

與並排顯示的資源本身相關聯的儲存體數量 (也就是獨立的磚集區記憶體) 大約與實際對應到集區的圖格數目成正比。 因此，對於硬體便需使用對應的磚數量大約調整分頁表儲存空間的磁碟使用量 (例如，視情況使用多層次頁面表格配置)。

磚集區可以視為完全軟體抽象，能使 Direct3D 應用程式有效地能有效地規劃圖形處理器 (GPU) 的網頁表格，而不需要知道低層實作細節 (或直接處理指標地址)。 在硬體中，磚集區不套用任何其他間接取值層級。 使用像是與磚集區概念無關的頁面目錄的建構的單層分頁表最佳化。

讓我們瀏覽分頁表本身在最糟情況可能要求的儲存體 (雖然實際上實作只需要和所對應者大約一致的儲存體)。

假設每個分頁表項目是 64 位元。

針對單一介面的最差案例頁面資料表大小，假設 Direct3D 11 中的資源限制，假設已建立並排的資源，並以128位的每個元素格式建立 (例如，RGBA 浮動) ，所以64KB 磚只包含4096圖元。 支援的 [**Texture2DArray**](/windows/desktop/direct3dhlsl/sm5-object-texture2darray) 大小上限為 16384 \* 16384 \* 2048 (但只有單一 mipmap) 如果完整填入 (不包括使用64位資料表專案的 mipmap) ，則在頁面資料表中需要大約1gb 的儲存體。 新增 Mipmap 會增加完全對應 (最糟情況) 分頁表儲存空間約 1.3GB 的三分之一。

這種情形存取約 10.6 TB 可定址記憶體。 但可能會限制可定址記憶體數量，這會使數量減少至約 TB 範圍。

另一個要考慮的情況是，以單一 [**Texture2D**](/windows/desktop/direct3dhlsl/sm5-object-texture2d) 的方式，將 16384 16384 的資源並排顯示為 \* 每個元素32位的格式，包括 mipmap。 完整填入分頁表所需的空間約 170 KB，具有 64 位元資料表項目。

最後，請考慮使用 BC 格式的範例，例如 BC7 含每個磚 128 位元 4x4 像素。 這是每個像素一個位元組。 16384 [](/windows/desktop/direct3dhlsl/sm5-object-texture2darray) \* 16384 2048 的 Texture2DArray \* （包括 MIPMAP）需要大約85MB 才能將此記憶體完整填入頁面資料表中。 這並不難考慮這種情況下，在此案例中，有一個並排的資源可跨越 550 gigapixels (512 GB 的記憶體) 。

實際上，如果實體可用記憶體數量不允許每次都對應和參考，便不定義這些完整對應。 但若有磚集區，應用程式便可以選擇重複使用動態磚 (例如，重複使用「黑」色磚針對影像中大型塊黑色區域) - 有效使用磚集區 (也就是分頁表對應) 當做記憶體壓縮工具。

分頁表所有項目的初始內容為 **NULL**。 應用程式也無法傳遞表面的記憶體內容的初始資料，因為它一開始便沒有輔助記憶體。

## <a name="in-this-section"></a>本節內容



| 主題                                                                                                   | 描述                                                                                                                                                                                                                                                                                                                                                                |
|---------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [建立磚集區](tile-pool-creation.md)<br/>                                                 | 磚集區會透過 [**ID3D11Device：： CreateBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createbuffer) API 來建立，其方式是在 *D3D11* 參數指向之 [**PDesc \_ 緩衝區 \_ DESC**](/windows/desktop/api/D3D11/ns-d3d11-d3d11_buffer_desc)結構的 **MiscFlags** 成員中傳遞 [**D3D11 \_ 資源 \_ 其他 \_ 磚 \_ 集**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_resource_misc_flag)區旗標。 <br/> |
| [調整磚集區大小](tile-pool-resizing.md)<br/>                                                 | 如果應用程式需要更多的工作集，以將並排顯示的資源對應至磚集區，或如果需要較少的空間，請使用 [**ID3D11DeviceCoNtext2：： ResizeTilePool**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-resizetilepool) API 來放大磚集區。 <br/>                                                                                                                    |
| [危險追蹤與磚集區資源](hazard-tracking-versus-tile-pool-resources.md)<br/> | 針對非並排顯示的資源，Direct3D 可以在轉譯期間防止特定的危險情況，但因為危險追蹤是在並排顯示的資源圖層級上，所以在呈現並排顯示的資源時追蹤危險的情況可能會太昂貴。 <br/>                                                                                                     |



 

## <a name="related-topics"></a>相關主題

<dl> <dt>

[建立磚資源](creating-tiled-resources.md)
</dt> </dl>

 

