---
title: HLSL 磚的資源曝光
description: 需要新的 Microsoft 高階著色器語言 (HLSL) 語法，以支援著色器模型5中的磚資源。
ms.assetid: B6CE51E6-1BA9-4D15-9654-86FE9BAAF585
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b2b266b98045b38645e1e8d24ed0014a5f448a38
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/20/2020
ms.locfileid: "104463388"
---
# <a name="hlsl-tiled-resources-exposure"></a><span data-ttu-id="ca80b-103">HLSL 磚的資源曝光</span><span class="sxs-lookup"><span data-stu-id="ca80b-103">HLSL tiled resources exposure</span></span>

<span data-ttu-id="ca80b-104">需要新的 Microsoft 高階著色器語言 (HLSL) 語法，以支援 [著色器模型 5](/windows/desktop/direct3dhlsl/d3d11-graphics-reference-sm5)中的磚資源。</span><span class="sxs-lookup"><span data-stu-id="ca80b-104">New Microsoft High Level Shader Language (HLSL) syntax is required to support tiled resources in [Shader Model 5](/windows/desktop/direct3dhlsl/d3d11-graphics-reference-sm5).</span></span>

<span data-ttu-id="ca80b-105">只有在具有並排資源支援的裝置上，才允許新的 HLSL 語法。</span><span class="sxs-lookup"><span data-stu-id="ca80b-105">The new HLSL syntax is allowed only on devices with tiled resources support.</span></span> <span data-ttu-id="ca80b-106">下表中並排顯示資源的每個相關 HLSL 方法，都會接受一個 (的意見反應) 或兩個 (的夾具和依此順序提供的意見反應) 其他選擇性參數。</span><span class="sxs-lookup"><span data-stu-id="ca80b-106">Each relevant HLSL method for tiled resources in the following table accepts either one (feedback) or two (clamp and feedback in this order) additional optional parameters.</span></span> <span data-ttu-id="ca80b-107">例如，**Sample** 方法為：</span><span class="sxs-lookup"><span data-stu-id="ca80b-107">For example, a **Sample** method is:</span></span>

<span data-ttu-id="ca80b-108">**範例 (取樣器、位置 \[ 、位移 \[ 、夾具 \[ 、意見反應 \] \] \])**</span><span class="sxs-lookup"><span data-stu-id="ca80b-108">**Sample(sampler, location \[, offset \[, clamp \[, feedback\] \] \])**</span></span>

<span data-ttu-id="ca80b-109">**Sample** 方法的範例為 [**Texture2D.Sample(S,float,int,float,uint)**](/windows/desktop/direct3dhlsl/t2darray-sample-s-float-int-float-uint-)。</span><span class="sxs-lookup"><span data-stu-id="ca80b-109">An example of a **Sample** method is [**Texture2D.Sample(S,float,int,float,uint)**](/windows/desktop/direct3dhlsl/t2darray-sample-s-float-int-float-uint-).</span></span>

<span data-ttu-id="ca80b-110">offset、clamp 和 feedback 參數為選用。</span><span class="sxs-lookup"><span data-stu-id="ca80b-110">The offset, clamp and feedback parameters are optional.</span></span> <span data-ttu-id="ca80b-111">您必須指定所有選用參數，直到您需要的參數，這與 C++ 對於預設函數引數的規則相同。</span><span class="sxs-lookup"><span data-stu-id="ca80b-111">You must specify all optional parameters up to the one you need, which is consistent with the C++ rules for default function arguments.</span></span> <span data-ttu-id="ca80b-112">例如，如果需要 feedback 狀態，offset 和 clamp 兩個參數就需要明確提供給 **Sample**，即使邏輯上可能不需要它們。</span><span class="sxs-lookup"><span data-stu-id="ca80b-112">For example, if the feedback status is needed, both offset and clamp parameters need to be explicitly supplied to **Sample**, even though they may not be logically needed.</span></span>

<span data-ttu-id="ca80b-113">clamp 參數是純量浮點值。</span><span class="sxs-lookup"><span data-stu-id="ca80b-113">The clamp parameter is a scalar float value.</span></span> <span data-ttu-id="ca80b-114">clamp=0.0f 的常值表示 clamp 作業未執行。</span><span class="sxs-lookup"><span data-stu-id="ca80b-114">The literal value of clamp=0.0f indicates that the clamp operation isn't performed.</span></span>

<span data-ttu-id="ca80b-115">feedback 參數是 **uint** 變數，您可以將它提供給記憶體存取查詢內建 [**CheckAccessFullyMapped**](/windows/desktop/direct3dhlsl/checkaccessfullymapped) 函數。</span><span class="sxs-lookup"><span data-stu-id="ca80b-115">The feedback parameter is a **uint** variable that you can supply to the memory-access querying intrinsic [**CheckAccessFullyMapped**](/windows/desktop/direct3dhlsl/checkaccessfullymapped) function.</span></span> <span data-ttu-id="ca80b-116">您不得修改或解譯 feedback 參數值；不過編譯器不會提供任何進階分析和診斷，來偵測您是否修改此值。</span><span class="sxs-lookup"><span data-stu-id="ca80b-116">You must not modify or interpret the value of the feedback parameter; but, the compiler doesn't provide any advanced analysis and diagnostics to detect whether you modified the value.</span></span>

<span data-ttu-id="ca80b-117">以下是 [**CheckAccessFullyMapped**](/windows/desktop/direct3dhlsl/checkaccessfullymapped) 的語法：</span><span class="sxs-lookup"><span data-stu-id="ca80b-117">Here is the syntax of [**CheckAccessFullyMapped**](/windows/desktop/direct3dhlsl/checkaccessfullymapped):</span></span>

<span data-ttu-id="ca80b-118">**bool CheckAccessFullyMapped(in uint FeedbackVar);**</span><span class="sxs-lookup"><span data-stu-id="ca80b-118">**bool CheckAccessFullyMapped(in uint FeedbackVar);**</span></span>

<span data-ttu-id="ca80b-119">[**CheckAccessFullyMapped**](/windows/desktop/direct3dhlsl/checkaccessfullymapped) 解譯 *FeedbackVar* 的值，並傳回 true，如果所有存取的資料都在資源中對應；否則 **CheckAccessFullyMapped** 傳回 false。</span><span class="sxs-lookup"><span data-stu-id="ca80b-119">[**CheckAccessFullyMapped**](/windows/desktop/direct3dhlsl/checkaccessfullymapped) interprets the value of *FeedbackVar* and returns true if all data being accessed was mapped in the resource; otherwise, **CheckAccessFullyMapped** returns false.</span></span>

<span data-ttu-id="ca80b-120">如果 clamp 或 feedback 參數存在，編譯器會發出基本指令的變化。</span><span class="sxs-lookup"><span data-stu-id="ca80b-120">If either the clamp or feedback parameter is present, the compiler emits a variant of the basic instruction.</span></span> <span data-ttu-id="ca80b-121">例如，磚資源的範例會產生 `sample_cl_s` 指令。</span><span class="sxs-lookup"><span data-stu-id="ca80b-121">For example, sample of a tiled resource generates the `sample_cl_s` instruction.</span></span> <span data-ttu-id="ca80b-122">如果 clamp 和 feedback 都未指定，編譯器就會發出基本指令，目前行為也就沒有變更。</span><span class="sxs-lookup"><span data-stu-id="ca80b-122">If neither clamp nor feedback is specified, the compiler emits the basic instruction, so that there is no change from the current behavior.</span></span> <span data-ttu-id="ca80b-123">clamp 值為 0.0f，表示不會執行 clamp；因此，驅動程式編譯器可進一步依照目標硬體建立指令。</span><span class="sxs-lookup"><span data-stu-id="ca80b-123">The clamp value of 0.0f indicates that no clamp is performed; thus, the driver compiler can further tailor the instruction to the target hardware.</span></span> <span data-ttu-id="ca80b-124">如果 feedback 為指令中的 NULL 暫存器，則 feedback 未使用；因此，驅動程式編譯器可以進一步依照目標架構建立指令。</span><span class="sxs-lookup"><span data-stu-id="ca80b-124">If feedback is a NULL register in an instruction, the feedback is unused; thus, the driver compiler can further tailor the instruction to the target architecture.</span></span>

<span data-ttu-id="ca80b-125">如果 HLSL 編譯器推斷 clamp 為 0.0f 且 feedback 未使用，則編譯器會發出對應的基本指令 (例如 `sample` 而非 `sample_cl_s`)。</span><span class="sxs-lookup"><span data-stu-id="ca80b-125">If the HLSL compiler infers that clamp is 0.0f and feedback is unused, the compiler emits the corresponding basic instruction (for example, `sample` rather than `sample_cl_s`).</span></span>

<span data-ttu-id="ca80b-126">如果並排的資源存取是由數個組成的位元組程式碼指令所組成（例如，針對結構化資源），編譯器會透過或作業匯總個別的意見值，以產生最終的意見反應值。</span><span class="sxs-lookup"><span data-stu-id="ca80b-126">If a tiled resource access consists of several constituent byte code instructions, for example, for structured resources, the compiler aggregates individual feedback values via the OR operation to produce the final feedback value.</span></span> <span data-ttu-id="ca80b-127">因此，您會看到這類複雜存取的單一 feedback 值。</span><span class="sxs-lookup"><span data-stu-id="ca80b-127">Therefore, you see a single feedback value for such a complex access.</span></span>

<span data-ttu-id="ca80b-128">這是 HLSL 方法的摘要表，已變更為支援 feedback 和/或 clamp。</span><span class="sxs-lookup"><span data-stu-id="ca80b-128">This is the summary table of HLSL methods that are changed to support feedback and/or clamp.</span></span> <span data-ttu-id="ca80b-129">這些全都適用于所有維度的並排顯示和非並排的資源。</span><span class="sxs-lookup"><span data-stu-id="ca80b-129">These all work on tiled and non-tiled resources of all dimensions.</span></span> <span data-ttu-id="ca80b-130">非並排顯示的資源一律會完全對應。</span><span class="sxs-lookup"><span data-stu-id="ca80b-130">Non-tiled resources always appear to be fully mapped.</span></span>



| [<span data-ttu-id="ca80b-131">HLSL 物件</span><span class="sxs-lookup"><span data-stu-id="ca80b-131">HLSL objects</span></span>](/windows/desktop/direct3dhlsl/d3d11-graphics-reference-sm5-objects)                                                                                                                                                                                                                                | <span data-ttu-id="ca80b-132">具有回饋選項的內建方法 (\*) -也有夾具選項</span><span class="sxs-lookup"><span data-stu-id="ca80b-132">Intrinsic methods with feedback option (\*) - also has clamp option</span></span>                                                                                                                                                                  |
|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="ca80b-133">\[RW \] Texture2D</span><span class="sxs-lookup"><span data-stu-id="ca80b-133">\[RW\]Texture2D</span></span><br/> <span data-ttu-id="ca80b-134">\[RW \] Texture2DArray</span><span class="sxs-lookup"><span data-stu-id="ca80b-134">\[RW\]Texture2DArray</span></span><br/> <span data-ttu-id="ca80b-135">TextureCUBE</span><span class="sxs-lookup"><span data-stu-id="ca80b-135">TextureCUBE</span></span><br/> <span data-ttu-id="ca80b-136">TextureCUBEArray</span><span class="sxs-lookup"><span data-stu-id="ca80b-136">TextureCUBEArray</span></span><br/>                                                                                                                                                                                    | <span data-ttu-id="ca80b-137">Gather</span><span class="sxs-lookup"><span data-stu-id="ca80b-137">Gather</span></span><br/> <span data-ttu-id="ca80b-138">GatherRed</span><span class="sxs-lookup"><span data-stu-id="ca80b-138">GatherRed</span></span><br/> <span data-ttu-id="ca80b-139">GatherGreen</span><span class="sxs-lookup"><span data-stu-id="ca80b-139">GatherGreen</span></span><br/> <span data-ttu-id="ca80b-140">GatherBlue</span><span class="sxs-lookup"><span data-stu-id="ca80b-140">GatherBlue</span></span><br/> <span data-ttu-id="ca80b-141">GatherAlpha</span><span class="sxs-lookup"><span data-stu-id="ca80b-141">GatherAlpha</span></span><br/> <span data-ttu-id="ca80b-142">GatherCmp</span><span class="sxs-lookup"><span data-stu-id="ca80b-142">GatherCmp</span></span><br/> <span data-ttu-id="ca80b-143">GatherCmpRed</span><span class="sxs-lookup"><span data-stu-id="ca80b-143">GatherCmpRed</span></span><br/> <span data-ttu-id="ca80b-144">GatherCmpGreen</span><span class="sxs-lookup"><span data-stu-id="ca80b-144">GatherCmpGreen</span></span><br/> <span data-ttu-id="ca80b-145">GatherCmpBlue</span><span class="sxs-lookup"><span data-stu-id="ca80b-145">GatherCmpBlue</span></span><br/> <span data-ttu-id="ca80b-146">GatherCmpAlpha</span><span class="sxs-lookup"><span data-stu-id="ca80b-146">GatherCmpAlpha</span></span><br/> |
| <span data-ttu-id="ca80b-147">\[RW \] Texture1D</span><span class="sxs-lookup"><span data-stu-id="ca80b-147">\[RW\]Texture1D</span></span><br/> <span data-ttu-id="ca80b-148">\[RW \] Texture1DArray</span><span class="sxs-lookup"><span data-stu-id="ca80b-148">\[RW\]Texture1DArray</span></span><br/> <span data-ttu-id="ca80b-149">\[RW \] Texture2D</span><span class="sxs-lookup"><span data-stu-id="ca80b-149">\[RW\]Texture2D</span></span><br/> <span data-ttu-id="ca80b-150">\[RW \] Texture2DArray</span><span class="sxs-lookup"><span data-stu-id="ca80b-150">\[RW\]Texture2DArray</span></span><br/> <span data-ttu-id="ca80b-151">\[RW \] Texture3D</span><span class="sxs-lookup"><span data-stu-id="ca80b-151">\[RW\]Texture3D</span></span><br/> <span data-ttu-id="ca80b-152">TextureCUBE</span><span class="sxs-lookup"><span data-stu-id="ca80b-152">TextureCUBE</span></span><br/> <span data-ttu-id="ca80b-153">TextureCUBEArray</span><span class="sxs-lookup"><span data-stu-id="ca80b-153">TextureCUBEArray</span></span><br/>                                                                                              | <span data-ttu-id="ca80b-154">範例\*</span><span class="sxs-lookup"><span data-stu-id="ca80b-154">Sample\*</span></span><br/> <span data-ttu-id="ca80b-155">SampleBias\*</span><span class="sxs-lookup"><span data-stu-id="ca80b-155">SampleBias\*</span></span><br/> <span data-ttu-id="ca80b-156">SampleCmp\*</span><span class="sxs-lookup"><span data-stu-id="ca80b-156">SampleCmp\*</span></span><br/> <span data-ttu-id="ca80b-157">SampleCmpLevelZero</span><span class="sxs-lookup"><span data-stu-id="ca80b-157">SampleCmpLevelZero</span></span><br/> <span data-ttu-id="ca80b-158">SampleGrad\*</span><span class="sxs-lookup"><span data-stu-id="ca80b-158">SampleGrad\*</span></span><br/> <span data-ttu-id="ca80b-159">SampleLevel</span><span class="sxs-lookup"><span data-stu-id="ca80b-159">SampleLevel</span></span><br/>                                                                                      |
| <span data-ttu-id="ca80b-160">\[RW \] Texture1D</span><span class="sxs-lookup"><span data-stu-id="ca80b-160">\[RW\]Texture1D</span></span><br/> <span data-ttu-id="ca80b-161">\[RW \] Texture1DArray</span><span class="sxs-lookup"><span data-stu-id="ca80b-161">\[RW\]Texture1DArray</span></span><br/> <span data-ttu-id="ca80b-162">\[RW \] Texture2D</span><span class="sxs-lookup"><span data-stu-id="ca80b-162">\[RW\]Texture2D</span></span><br/> <span data-ttu-id="ca80b-163">Texture2DMS</span><span class="sxs-lookup"><span data-stu-id="ca80b-163">Texture2DMS</span></span><br/> <span data-ttu-id="ca80b-164">\[RW \] Texture2DArray</span><span class="sxs-lookup"><span data-stu-id="ca80b-164">\[RW\]Texture2DArray</span></span><br/> <span data-ttu-id="ca80b-165">Texture2DArrayMS</span><span class="sxs-lookup"><span data-stu-id="ca80b-165">Texture2DArrayMS</span></span><br/> <span data-ttu-id="ca80b-166">\[RW \] Texture3D</span><span class="sxs-lookup"><span data-stu-id="ca80b-166">\[RW\]Texture3D</span></span><br/> <span data-ttu-id="ca80b-167">\[RW \] 緩衝區</span><span class="sxs-lookup"><span data-stu-id="ca80b-167">\[RW\]Buffer</span></span><br/> <span data-ttu-id="ca80b-168">\[RW \] ByteAddressBuffer</span><span class="sxs-lookup"><span data-stu-id="ca80b-168">\[RW\]ByteAddressBuffer</span></span><br/> <span data-ttu-id="ca80b-169">\[RW \] StructuredBuffer</span><span class="sxs-lookup"><span data-stu-id="ca80b-169">\[RW\]StructuredBuffer</span></span><br/> | <span data-ttu-id="ca80b-170">載入</span><span class="sxs-lookup"><span data-stu-id="ca80b-170">Load</span></span>                                                                                                                                                                                                                                 |



 

## <a name="related-topics"></a><span data-ttu-id="ca80b-171">相關主題</span><span class="sxs-lookup"><span data-stu-id="ca80b-171">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="ca80b-172">磚資源的管線存取</span><span class="sxs-lookup"><span data-stu-id="ca80b-172">Pipeline access to tiled resources</span></span>](pipeline-access-to-tiled-resources.md)
</dt> </dl>

 

