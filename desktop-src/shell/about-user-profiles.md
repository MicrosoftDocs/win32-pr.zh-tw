---
description: 系統會在使用者第一次登入電腦時建立使用者設定檔。 在後續的登入時，系統會載入使用者的設定檔，然後其他系統元件會根據設定檔中的資訊來設定使用者的環境。
title: 關於使用者設定檔
ms.topic: article
ms.date: 05/31/2018
ms.assetid: 333f1861-91fe-4796-af13-dd300a5c6ec3
api_name: ''
api_type: ''
api_location: ''
topic_type:
- kbArticle
ms.openlocfilehash: f0463a38623baa427a6ddaf3ea19b47704b90e3ef36cf91dea2469e0cd2baa00
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/11/2021
ms.locfileid: "119884768"
---
# <a name="about-user-profiles"></a>關於使用者設定檔

系統會在使用者第一次登入電腦時建立使用者設定檔。 在後續的登入時，系統會載入使用者的設定檔，然後其他系統元件會根據設定檔中的資訊來設定使用者的環境。

## <a name="types-of-user-profiles"></a>使用者設定檔的類型

-   [本機使用者設定檔](local-user-profiles.md)。 使用者第一次登入電腦時，會建立本機使用者設定檔。 設定檔會儲存在電腦的本機硬碟上。 對本機使用者設定檔所做的變更，對使用者以及進行變更的電腦而言是特定的。
-   [漫遊使用者設定檔](roaming-user-profiles.md)。 漫遊使用者設定檔是複製到伺服器共用並儲存在伺服器共用上的本機設定檔複本。 此設定檔會下載到使用者登入網路的任何電腦上。 當使用者登出時，對漫遊使用者設定檔所做的變更會與設定檔的伺服器複本進行同步處理。 漫遊使用者設定檔的優點是，使用者不需要在網路上所使用的每部電腦上建立設定檔。
-   [強制使用者設定檔](mandatory-user-profiles.md)。 強制使用者設定檔是一種配置檔案類型，可供系統管理員用來指定使用者的設定。 只有系統管理員可以對強制使用者設定檔進行變更。 使用者登出時，使用者對桌面設定所做的變更會遺失。
-   [暫時使用者設定檔](temporary-user-profiles.md)。 每次發生錯誤情況時，就會發出暫存設定檔，以防止使用者的設定檔載入。 暫時設定檔會在每個會話結束時刪除，而使用者對桌面設定和檔案所做的變更會在使用者登出時遺失。 只有在執行 Windows 2000 和更新版本的電腦上才能使用暫存設定檔。

使用者設定檔是由下列元素所組成：

-   登錄 hive。 登錄 hive 是 Ntuser.man 檔案。 系統會在使用者登入時載入 hive，並將其對應至 **HKEY \_ CURRENT \_ user** 登錄機碼。 使用者的登錄 hive 會維護使用者以登錄為基礎的喜好設定和設定。
-   儲存在檔案系統中的一組設定檔資料夾。 使用者設定檔是以每個使用者為基礎的資料夾來儲存在 **配置** 檔目錄中。 使用者設定檔資料夾是應用程式和其他系統元件的容器，可填入子資料夾和個別使用者資料，例如檔和設定檔案。 WindowsExplorer 會將使用者設定檔資料夾廣泛用在使用者的桌面、[**開始**] 功能表和 [**檔**] 資料夾等專案。

使用者設定檔提供下列優點：

-   當使用者登入電腦時，系統會使用使用者上次登出時所使用的相同設定。
-   與其他使用者共用電腦時，每位使用者在登入後都會收到他們自訂的桌面。
-   使用者設定檔中的設定對每個使用者都是唯一的。 其他使用者無法存取這些設定。 對某個使用者設定檔所做的變更不會影響其他使用者或其他使用者的設定檔。

## <a name="user-profile-tiles-in-windows-7-and-later"></a>Windows 7 和更新版本中的使用者設定檔磚

在 Windows 7 或更新版本中，每個使用者設定檔都有相關聯的影像顯示為使用者磚。 這些磚會顯示在 **使用者帳戶的 [使用者帳戶** ] 主控台專案和其 [ **管理帳戶** ] 子頁面上。 如果您有系統管理員存取權限，預設的 Guest 和預設使用者帳戶的影像檔案也會出現在這裡。

> [!Note]  
> 您可以透過 [**使用者帳戶**] 主控台專案中的 [**管理其他帳戶**] 連結來存取 [**管理帳戶**] 子頁面。

 

-   % ProgramData% \\ Microsoft \\ 使用者帳戶圖片 \\Guest.bmp
-   % ProgramData% \\ Microsoft \\ 使用者帳戶圖片 \\User.bmp

使用者的磚影像會儲存在% SystemDrive% \\ Users \\ <username> \\ AppData \\ 本機 \\ Temp 資料夾中，作為 <username>.bmp。  () 的任何斜線字元 \\ 都會轉換成加號字元 (+) 。 例如，網域 \\ 使用者會轉換成網域 + 使用者。

影像檔會出現在使用者的 **Temp** 資料夾中：

-   使用者完成初始系統設定之後 (OOBE) 。
-   當使用者第一次啟動主控台專案的 **使用者帳戶** 時。
-   當使用者移至 **使用者帳戶** 的 [**管理帳戶**] 子頁面時主控台專案。 此外，也會顯示電腦上所有其他使用者的磚。

這些實例是建立或更新映射的唯一時間。 因此，以程式設計方式使用 **暫存** 資料夾位置時，請注意下列幾點：

1.  使用者的磚不保證存在。 如果使用者以手動方式或透過刪除暫存檔案的公用程式來刪除 .bmp 檔案，則在使用者啟動 **使用者帳戶** 主控台專案或 **管理帳戶** 子頁面之前，不會自動重新建立該使用者磚。

2.  電腦上其他使用者的使用者磚可能不會出現在目前登入使用者的 **Temp** 資料夾中。 例如，如果使用者 A 透過 **使用者帳戶** 主控台專案建立使用者 b，則在 Windows 將使用者 a 傳送至 [**管理帳戶**] 子頁面時，會在使用者 a 的 **Temp** 資料夾中建立使用者 b 的磚。 因為在登入之前，不會為使用者 B 建立目錄結構，所以使用者 A 的 **Temp** 資料夾是使用者 b 的磚的唯一儲存位置。 當使用者 B 登入時，儲存在使用者 B **暫存** 資料夾中的唯一影像就是他或她自己的映射。

    1.  若要取得系統使用者的所有使用者磚，應用程式可能需要在每個使用者的 **暫存** 目錄中搜尋。
    2.  由於存取控制清單 (ACL) 這些 **暫存** 目錄允許存取系統、系統管理員和目前的使用者，因此應用程式必須提升為其他使用者的存取權。

3.  在其 **暫存** 資料夾中，其他使用者的磚不保證處於最新狀態。 如果使用者 B 更新其使用者磚，使用者 A 將不會看到變更，直到使用者 A 存取 [ **管理帳戶** ] 子頁面為止。 因此，如果應用程式使用使用者 A 的 **暫存** 資料夾來取得使用者 B 的磚，則這些應用程式可能會取得過期的影像檔案。

## <a name="related-topics"></a>相關主題

<dl> <dt>

[本機使用者設定檔](local-user-profiles.md)
</dt> <dt>

[漫遊使用者設定檔](roaming-user-profiles.md)
</dt> <dt>

[強制使用者設定檔](mandatory-user-profiles.md)
</dt> <dt>

[暫存使用者設定檔](temporary-user-profiles.md)
</dt> <dt>

[設定檔目錄](profiles-directory.md)
</dt> <dt>

[使用者環境變數](user-environment-variables.md)
</dt> <dt>

[快速切換使用者](fast-user-switching.md)
</dt> </dl>

 

 



