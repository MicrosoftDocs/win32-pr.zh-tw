---
title: Direct2D API 概觀
description: 提供 Direct2D 物件模型的總覽。
ms.assetid: b1362ef6-40fc-4fa5-ba5b-22c622c39f04
keywords:
- Direct2D，關於
- Direct2D、標頭檔
- Direct2D，物件模型
- Direct2D，介面
- ID2D1Factory 介面
- Direct2D，轉譯目標
- 呈現目標，關於
- Direct2D，繪製命令
- 呈現目標，繪製命令
- Direct2D，錯誤處理
- 轉譯目標，錯誤處理
- 錯誤處理
- 筆刷
- 呈現目標，筆刷
- geometries
- Direct2D，幾何
- Direct2D 的點陣圖
- Direct2D，點陣圖
- 原
- Direct2D，基本
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 858d03f626fe337b174f074d7725dcb1a636b463
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/20/2020
ms.locfileid: "106967679"
---
# <a name="direct2d-api-overview"></a><span data-ttu-id="0a8b3-123">Direct2D API 概觀</span><span class="sxs-lookup"><span data-stu-id="0a8b3-123">Direct2D API Overview</span></span>

<span data-ttu-id="0a8b3-124">Direct2D 會提供類似于 Direct3D 的 API，以搭配 C 或 c + + 使用。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-124">Direct2D provides an API, similar to Direct3D, for use with C or C++.</span></span> <span data-ttu-id="0a8b3-125">API 會公開各種繪圖相關的功能：</span><span class="sxs-lookup"><span data-stu-id="0a8b3-125">The API exposes a variety of drawing-related functionality:</span></span>

-   <span data-ttu-id="0a8b3-126">使用 Direct2D、Direct3D 或 GDI 轉譯顯示器和螢幕呈現的目標。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-126">Render targets for display and off-screen rendering using Direct2D, Direct3D, or GDI.</span></span>
-   <span data-ttu-id="0a8b3-127">用於管理繪圖狀態的物件，例如座標空間轉換和消除鋸齒模式。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-127">Objects for managing drawing state such as coordinate space transforms and antialiasing modes.</span></span>
-   <span data-ttu-id="0a8b3-128">幾何資料的標記法，以及幾何處理的函數。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-128">Representations for geometric data, and functions for geometry processing.</span></span>
-   <span data-ttu-id="0a8b3-129">點陣圖、幾何和文字的呈現功能。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-129">Rendering functionality for bitmaps, geometries, and text.</span></span>
-   <span data-ttu-id="0a8b3-130">使用以 GDI 或 Direct3D 建立的圖形內容進行布建。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-130">Provisions for using graphical content created using GDI or Direct3D.</span></span>

<span data-ttu-id="0a8b3-131">本主題概要說明組成 Direct2D API 的物件。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-131">This topic provides an overview of the objects that make up the Direct2D API.</span></span> <span data-ttu-id="0a8b3-132">它包含下列區段：</span><span class="sxs-lookup"><span data-stu-id="0a8b3-132">It contains the following sections:</span></span>

-   [<span data-ttu-id="0a8b3-133">Direct2D 標頭檔</span><span class="sxs-lookup"><span data-stu-id="0a8b3-133">Direct2D Header Files</span></span>](#direct2d-header-files)
-   [<span data-ttu-id="0a8b3-134">Direct2D 介面</span><span class="sxs-lookup"><span data-stu-id="0a8b3-134">Direct2D Interfaces</span></span>](#direct2d-interfaces)
-   [<span data-ttu-id="0a8b3-135">ID2D1Factory 介面</span><span class="sxs-lookup"><span data-stu-id="0a8b3-135">The ID2D1Factory Interface</span></span>](#the-id2d1factory-interface)
-   [<span data-ttu-id="0a8b3-136">呈現目標</span><span class="sxs-lookup"><span data-stu-id="0a8b3-136">Render Targets</span></span>](#render-targets)
    -   [<span data-ttu-id="0a8b3-137">呈現目標功能</span><span class="sxs-lookup"><span data-stu-id="0a8b3-137">Render Target Features</span></span>](#render-target-features)
    -   [<span data-ttu-id="0a8b3-138">呈現目標資源</span><span class="sxs-lookup"><span data-stu-id="0a8b3-138">Render Target Resources</span></span>](#render-target-resources)
    -   [<span data-ttu-id="0a8b3-139">繪製命令</span><span class="sxs-lookup"><span data-stu-id="0a8b3-139">Drawing Commands</span></span>](#drawing-commands)
    -   [<span data-ttu-id="0a8b3-140">錯誤處理</span><span class="sxs-lookup"><span data-stu-id="0a8b3-140">Error Handling</span></span>](#error-handling)
-   [<span data-ttu-id="0a8b3-141">繪製資源</span><span class="sxs-lookup"><span data-stu-id="0a8b3-141">Drawing Resources</span></span>](#drawing-resources)
    -   [<span data-ttu-id="0a8b3-142">筆刷</span><span class="sxs-lookup"><span data-stu-id="0a8b3-142">Brushes</span></span>](#brushes)
    -   [<span data-ttu-id="0a8b3-143">幾何</span><span class="sxs-lookup"><span data-stu-id="0a8b3-143">Geometries</span></span>](#geometries)
    -   [<span data-ttu-id="0a8b3-144">點陣圖</span><span class="sxs-lookup"><span data-stu-id="0a8b3-144">Bitmaps</span></span>](#bitmaps)
-   [<span data-ttu-id="0a8b3-145">繪製文字</span><span class="sxs-lookup"><span data-stu-id="0a8b3-145">Drawing Text</span></span>](#drawing-text)
-   [<span data-ttu-id="0a8b3-146">Direct2D 基本專案</span><span class="sxs-lookup"><span data-stu-id="0a8b3-146">Direct2D Primitives</span></span>](#direct2d-primitives)
-   [<span data-ttu-id="0a8b3-147">相關主題</span><span class="sxs-lookup"><span data-stu-id="0a8b3-147">Related topics</span></span>](#related-topics)

## <a name="direct2d-header-files"></a><span data-ttu-id="0a8b3-148">Direct2D 標頭檔</span><span class="sxs-lookup"><span data-stu-id="0a8b3-148">Direct2D Header Files</span></span>

<span data-ttu-id="0a8b3-149">Direct2D API 是由下列標頭檔所定義。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-149">The Direct2D API is defined by the following header files.</span></span>

| <span data-ttu-id="0a8b3-150">標頭檔</span><span class="sxs-lookup"><span data-stu-id="0a8b3-150">Header file</span></span>         | <span data-ttu-id="0a8b3-151">Description</span><span class="sxs-lookup"><span data-stu-id="0a8b3-151">Description</span></span>                                                                                                                  |
|---------------------|------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="0a8b3-152">d2d1。h</span><span class="sxs-lookup"><span data-stu-id="0a8b3-152">d2d1.h</span></span>              | <span data-ttu-id="0a8b3-153">定義主要 Direct2D API 的 C 和 c + + 版本。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-153">Defines C and C++ versions of the primary Direct2D API.</span></span>                                                                      |
| <span data-ttu-id="0a8b3-154">d2d1helper。h</span><span class="sxs-lookup"><span data-stu-id="0a8b3-154">d2d1helper.h</span></span>        | <span data-ttu-id="0a8b3-155">定義 c + + helper 函數、類別和結構。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-155">Defines C++ helper functions, classes, and structures.</span></span>                                                                       |
| <span data-ttu-id="0a8b3-156">d2dbasetypes。h</span><span class="sxs-lookup"><span data-stu-id="0a8b3-156">d2dbasetypes.h</span></span>      | <span data-ttu-id="0a8b3-157">定義 Direct2D 的繪圖基本專案，例如點和矩形。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-157">Defines drawing primitives for Direct2D, such as points and rectangles.</span></span> <span data-ttu-id="0a8b3-158">此標頭包含在 d2d1 中。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-158">This header is included with d2d1.h.</span></span>                 |
| <span data-ttu-id="0a8b3-159">d2derr。h</span><span class="sxs-lookup"><span data-stu-id="0a8b3-159">d2derr.h</span></span>            | <span data-ttu-id="0a8b3-160">定義 Direct2D 的錯誤碼。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-160">Defines the error codes for Direct2D.</span></span> <span data-ttu-id="0a8b3-161">此標頭包含在 d2d1 中。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-161">This header is included with d2d1.h.</span></span>                                                   |
| <span data-ttu-id="0a8b3-162">d2d1 \_ 1. h</span><span class="sxs-lookup"><span data-stu-id="0a8b3-162">d2d1\_1.h</span></span>           | <span data-ttu-id="0a8b3-163">定義 Windows 8 和更新版本之主要 Direct2D API 的 C 和 c + + 版本。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-163">Defines C and C++ versions of the primary Direct2D API for Windows 8 and later.</span></span>                                              |
| <span data-ttu-id="0a8b3-164">d2d1 \_ 1helper。h</span><span class="sxs-lookup"><span data-stu-id="0a8b3-164">d2d1\_1helper.h</span></span>     | <span data-ttu-id="0a8b3-165">定義 Windows 8 和更新版本的 c + + helper 函數、類別和結構。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-165">Defines C++ helper functions, classes, and structures for Windows 8 and later.</span></span>                                               |
| <span data-ttu-id="0a8b3-166">d2d1effects。h</span><span class="sxs-lookup"><span data-stu-id="0a8b3-166">d2d1effects.h</span></span>       | <span data-ttu-id="0a8b3-167">針對 Windows 8 和更新版本的 Direct2D API，定義 C 和 c + + 版本的影像效果部分。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-167">Defines C and C++ versions of the image effects part of the Direct2D API for Windows 8 and later.</span></span>                            |
| <span data-ttu-id="0a8b3-168">d2d1effecthelpers。h</span><span class="sxs-lookup"><span data-stu-id="0a8b3-168">d2d1effecthelpers.h</span></span> | <span data-ttu-id="0a8b3-169">針對 Windows 8 和更新版本，定義 c + + helper 函式、類別和影像效果的結構。 Direct2D API 的一部分。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-169">Defines C++ helper functions, classes, and structures of the image effects part of the Direct2D API for Windows 8 and later.</span></span> |



 

<span data-ttu-id="0a8b3-170">若要使用 Direct2D，您的應用程式應該包含 d2d1 .h 標頭檔。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-170">To use Direct2D, your application should include the d2d1.h header file.</span></span>

<span data-ttu-id="0a8b3-171">若要編譯 Direct2D 應用程式，請將 d2d1 新增至程式庫清單。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-171">To compile a Direct2D application, add d2d1.lib to the list of libraries.</span></span> <span data-ttu-id="0a8b3-172">您可以在 [適用于 Windows 7 的 Windows 軟體開發套件 (SDK) ](https://msdn.microsoft.com/windows/bb980924.aspx)中找到 d2d1 .h 和 d2d1。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-172">You can find d2d1.h and d2d1.lib in [Windows Software Development Kit (SDK) for Windows 7](https://msdn.microsoft.com/windows/bb980924.aspx).</span></span>

<span data-ttu-id="0a8b3-173">下列各節說明 Direct2D API 所提供的一些通用介面。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-173">The following sections describe some of the common interfaces provided by the Direct2D API.</span></span>

## <a name="direct2d-interfaces"></a><span data-ttu-id="0a8b3-174">Direct2D 介面</span><span class="sxs-lookup"><span data-stu-id="0a8b3-174">Direct2D Interfaces</span></span>

<span data-ttu-id="0a8b3-175">Direct2D API 的根目錄是 [**ID2D1Factory**](/windows/win32/api/d2d1/nn-d2d1-id2d1factory) 和 [**ID2D1Resource**](/windows/win32/api/d2d1/nn-d2d1-id2d1resource) 介面。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-175">At the root of the Direct2D API are the [**ID2D1Factory**](/windows/win32/api/d2d1/nn-d2d1-id2d1factory) and [**ID2D1Resource**](/windows/win32/api/d2d1/nn-d2d1-id2d1resource) interfaces.</span></span> <span data-ttu-id="0a8b3-176">**ID2D1Factory** 物件會建立 **ID2D1Resource** 物件，並作為使用 Direct2D 的起點。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-176">An **ID2D1Factory** object creates **ID2D1Resource** objects and serves as the starting point for using Direct2D.</span></span> <span data-ttu-id="0a8b3-177">所有其他 Direct2D 物件都是繼承自 **ID2D1Resource** 介面。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-177">All other Direct2D objects inherit from the **ID2D1Resource** interface.</span></span> <span data-ttu-id="0a8b3-178">Direct2D 資源有兩種類型：與裝置無關的資源和裝置相依的資源。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-178">There are two types of Direct2D resources: device-independent resources and device-dependent resources.</span></span>

-   <span data-ttu-id="0a8b3-179">與裝置無關的資源不會與特定的轉譯裝置相關聯，而且可以在應用程式的存留期內保存。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-179">Device-independent resources are not associated with a particular rendering device and can persist for the life of an application.</span></span>
-   <span data-ttu-id="0a8b3-180">與裝置相關的資源會與特定的轉譯裝置相關聯，而且如果移除該裝置，則會停止運作。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-180">Device-dependent resources are associated with a particular rendering device and cease to function if that device is removed.</span></span>

<span data-ttu-id="0a8b3-181"> (需有關資源和資源分享的詳細資訊，請參閱 [資源總覽](resources-and-resource-domains.md)。 ) </span><span class="sxs-lookup"><span data-stu-id="0a8b3-181">(For more information about resources and resource sharing, see the [Resources Overview](resources-and-resource-domains.md).)</span></span>

## <a name="the-id2d1factory-interface"></a><span data-ttu-id="0a8b3-182">ID2D1Factory 介面</span><span class="sxs-lookup"><span data-stu-id="0a8b3-182">The ID2D1Factory Interface</span></span>

<span data-ttu-id="0a8b3-183">[**ID2D1Factory**](/windows/win32/api/d2d1/nn-d2d1-id2d1factory)介面是使用 Direct2D 的起點。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-183">The [**ID2D1Factory**](/windows/win32/api/d2d1/nn-d2d1-id2d1factory) interface is the starting point for using Direct2D.</span></span> <span data-ttu-id="0a8b3-184">您可以使用 **ID2D1Factory** 來具現化 Direct2D 資源。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-184">You use an **ID2D1Factory** to instantiate Direct2D resources.</span></span> <span data-ttu-id="0a8b3-185">若要建立 ID2D1Factory，您可以使用其中一個 [**CreateFactory**](/windows/win32/api/d2d1/nf-d2d1-d2d1createfactory) 方法。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-185">To create an ID2D1Factory, you use one of the [**CreateFactory**](/windows/win32/api/d2d1/nf-d2d1-d2d1createfactory) methods.</span></span>

<span data-ttu-id="0a8b3-186">Factory 會定義一組可產生下列繪圖資源的建立 *資源* 方法：</span><span class="sxs-lookup"><span data-stu-id="0a8b3-186">A factory defines a set of Create *Resource* methods that can produce the following drawing resources:</span></span>

-   <span data-ttu-id="0a8b3-187">轉譯目標是轉譯繪製命令的物件。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-187">Render targets are objects that render drawing commands.</span></span>
-   <span data-ttu-id="0a8b3-188">繪製狀態欄塊是儲存繪圖狀態資訊的物件，例如目前的轉換和消除鋸齒模式。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-188">Drawing state blocks are objects that store drawing state information, such as the current transformation and antialiasing mode.</span></span>
-   <span data-ttu-id="0a8b3-189">幾何是代表簡單且可能複雜之圖形的物件。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-189">Geometries are objects that represent simple and potentially complex shapes.</span></span>

<span data-ttu-id="0a8b3-190">Factory 可以建立的其中一個最有用的物件是 [**ID2D1RenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1rendertarget)，如下一節所述。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-190">One of the most useful objects a factory can create is the [**ID2D1RenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1rendertarget), described in the following section.</span></span>

## <a name="render-targets"></a><span data-ttu-id="0a8b3-191">呈現目標</span><span class="sxs-lookup"><span data-stu-id="0a8b3-191">Render Targets</span></span>

<span data-ttu-id="0a8b3-192">轉譯目標是繼承自 [**ID2D1RenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1rendertarget) 介面的資源。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-192">A render target is a resource that inherits from the [**ID2D1RenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1rendertarget) interface.</span></span> <span data-ttu-id="0a8b3-193">轉譯目標會建立用來繪製和執行繪圖作業的資源。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-193">A render target creates resources for drawing and performs drawing operations.</span></span> <span data-ttu-id="0a8b3-194">有幾種轉譯目標可用於以下列方式呈現圖形：</span><span class="sxs-lookup"><span data-stu-id="0a8b3-194">There are several kinds of render targets that can be used to render graphics in the following ways:</span></span>

-   <span data-ttu-id="0a8b3-195">[**ID2D1HwndRenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1hwndrendertarget) 物件會將內容轉譯至視窗。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-195">[**ID2D1HwndRenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1hwndrendertarget) objects render content to a window.</span></span>
-   <span data-ttu-id="0a8b3-196">[**ID2D1DCRenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1dcrendertarget) 物件會轉譯成 GDI 裝置內容。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-196">[**ID2D1DCRenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1dcrendertarget) objects render to a GDI device context.</span></span>
-   <span data-ttu-id="0a8b3-197">點陣圖轉譯目標物件會將內容轉譯為非螢幕點陣圖。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-197">Bitmap render target objects render content to an off-screen bitmap.</span></span>
-   <span data-ttu-id="0a8b3-198">DXGI 轉譯目標物件會轉譯成 DXGI 介面，以搭配 Direct3D 使用。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-198">DXGI render target objects render to a DXGI surface for use with Direct3D.</span></span>

<span data-ttu-id="0a8b3-199">由於轉譯目標是與特定轉譯裝置相關聯，因此它是裝置相依的資源，如果裝置已移除，就會停止運作。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-199">Because a render target is associated with a particular rendering device, it is a device-dependent resource and ceases to function if the device is removed.</span></span>

### <a name="render-target-features"></a><span data-ttu-id="0a8b3-200">呈現目標功能</span><span class="sxs-lookup"><span data-stu-id="0a8b3-200">Render Target Features</span></span>

<span data-ttu-id="0a8b3-201">您可以指定轉譯目標是否應使用硬體加速，以及本機或遠端電腦是否應該呈現遠端顯示器。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-201">You can specify whether a render target should use hardware acceleration and whether remote display should be rendered by the local or remote computer.</span></span> <span data-ttu-id="0a8b3-202">您可以設定呈現目標，以進行別名或反鋸齒呈現。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-202">Render targets can be set up for aliased or antialiased rendering.</span></span> <span data-ttu-id="0a8b3-203">針對具有大量基本專案的轉譯場景，開發人員也可以在別名模式中轉譯2D 圖形，並使用 D3D 多取樣消除鋸齒來達成更高的擴充性。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-203">For rendering scenes with a large number of primitives, a developer can also render 2-D graphics in aliased mode and use D3D multisample antialiasing to achieve greater scalability.</span></span>

<span data-ttu-id="0a8b3-204">轉譯目標也可以將繪圖作業分組為 [**ID2D1Layer**](/windows/win32/api/d2d1/nn-d2d1-id2d1layer) 介面所代表的圖層。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-204">Render targets can also group drawing operations into layers that are represented by the [**ID2D1Layer**](/windows/win32/api/d2d1/nn-d2d1-id2d1layer) interface.</span></span> <span data-ttu-id="0a8b3-205">當轉譯畫面格時，圖層會用來收集要組合在一起的繪圖作業。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-205">Layers are useful for collecting drawing operations to be composited together when rendering a frame.</span></span> <span data-ttu-id="0a8b3-206">在某些案例中，這可能是轉譯成點陣圖轉譯目標的實用替代方式，然後重複使用點陣圖內容，因為階層式配置成本低於 [**ID2D1BitmapRenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1bitmaprendertarget)。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-206">For some scenarios, this can be a useful alternative to rendering to a bitmap render target, and then reusing the bitmap contents, as allocation costs for layering are lower than for an [**ID2D1BitmapRenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1bitmaprendertarget).</span></span>

<span data-ttu-id="0a8b3-207">轉譯目標可以建立與本身相容的新轉譯目標，這適用于中繼的非畫面轉譯，同時保留原始上設定的各種呈現目標屬性。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-207">Render targets can create new render targets that are compatible with themselves, which is useful for intermediate off-screen rendering while retaining the various render-target properties that were set on the original.</span></span>

<span data-ttu-id="0a8b3-208">您也可以在 Direct2D 轉譯目標上使用 GDI 來轉譯，方法是在 [**ID2D1GdiInteropRenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1gdiinteroprendertarget)的轉譯目標上呼叫 [**QueryInterface**](/windows/win32/api/unknwn/nf-unknwn-iunknown-queryinterface(q)) ，此方法上具有 [**GetDC**](/windows/win32/api/d2d1/nf-d2d1-id2d1gdiinteroprendertarget-getdc)和 [**ReleaseDC**](/windows/win32/api/d2d1/nf-d2d1-id2d1gdiinteroprendertarget-releasedc)方法，可用來取出 GDI 裝置內容。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-208">It is also possible to render using GDI on a Direct2D render target by calling [**QueryInterface**](/windows/win32/api/unknwn/nf-unknwn-iunknown-queryinterface(q)) on a render target for [**ID2D1GdiInteropRenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1gdiinteroprendertarget), which has [**GetDC**](/windows/win32/api/d2d1/nf-d2d1-id2d1gdiinteroprendertarget-getdc) and [**ReleaseDC**](/windows/win32/api/d2d1/nf-d2d1-id2d1gdiinteroprendertarget-releasedc) methods on it that can be used to retrieve a GDI device context.</span></span> <span data-ttu-id="0a8b3-209">只有當轉譯目標是使用 [**D2D1 轉譯 \_ \_ 目標 \_ 使用 \_ GDI \_ 相容**](/windows/win32/api/d2d1/ne-d2d1-d2d1_render_target_usage) 旗標集建立時，才可以透過 gdi 轉譯。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-209">Rendering via GDI is possible only if the render target was created with the [**D2D1\_RENDER\_TARGET\_USAGE\_GDI\_COMPATIBLE**](/windows/win32/api/d2d1/ne-d2d1-d2d1_render_target_usage) flag set.</span></span> <span data-ttu-id="0a8b3-210">這適用于主要以 Direct2D 轉譯，但具有擴充性模型或其他需要能夠以 GDI 轉譯之舊版內容的應用程式。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-210">This is useful for applications that primarily render with Direct2D but have an extensibility model or other legacy content that requires the ability to render with GDI.</span></span> <span data-ttu-id="0a8b3-211">如需詳細資訊，請參閱 [Direct2D 和 GDI 互通性總覽](direct2d-and-gdi-interoperation-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-211">For more information, see the [Direct2D and GDI Interoperability Overview](direct2d-and-gdi-interoperation-overview.md).</span></span>

### <a name="render-target-resources"></a><span data-ttu-id="0a8b3-212">呈現目標資源</span><span class="sxs-lookup"><span data-stu-id="0a8b3-212">Render Target Resources</span></span>

<span data-ttu-id="0a8b3-213">就像 factory 一樣，轉譯目標可以建立繪圖資源。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-213">Like a factory, a render target can create drawing resources.</span></span> <span data-ttu-id="0a8b3-214">轉譯目標所建立的任何資源都是與裝置相關的資源 (就像呈現目標) 一樣。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-214">Any resources created by a render target are device-dependent resources (just like the render target).</span></span> <span data-ttu-id="0a8b3-215">轉譯目標可建立下列類型的資源：</span><span class="sxs-lookup"><span data-stu-id="0a8b3-215">A render target can create the following types of resources:</span></span>

-   <span data-ttu-id="0a8b3-216">點陣圖</span><span class="sxs-lookup"><span data-stu-id="0a8b3-216">Bitmaps</span></span>
-   <span data-ttu-id="0a8b3-217">筆刷</span><span class="sxs-lookup"><span data-stu-id="0a8b3-217">Brushes</span></span>
-   <span data-ttu-id="0a8b3-218">圖層</span><span class="sxs-lookup"><span data-stu-id="0a8b3-218">Layers</span></span>
-   <span data-ttu-id="0a8b3-219">網狀</span><span class="sxs-lookup"><span data-stu-id="0a8b3-219">Meshes</span></span>

### <a name="drawing-commands"></a><span data-ttu-id="0a8b3-220">繪製命令</span><span class="sxs-lookup"><span data-stu-id="0a8b3-220">Drawing Commands</span></span>

<span data-ttu-id="0a8b3-221">若要轉譯內容，您可以使用呈現目標繪製方法。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-221">To render content, you use the render target drawing methods.</span></span> <span data-ttu-id="0a8b3-222">開始繪製之前，請先呼叫 [**ID2D1RenderTarget：： BeginDraw**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-begindraw) 方法。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-222">Before you begin drawing, you call the [**ID2D1RenderTarget::BeginDraw**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-begindraw) method.</span></span> <span data-ttu-id="0a8b3-223">完成繪製之後，您會呼叫 [**ID2D1RenderTarget：： EndDraw**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-enddraw) 方法。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-223">After you finished drawing, you call the [**ID2D1RenderTarget::EndDraw**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-enddraw) method.</span></span> <span data-ttu-id="0a8b3-224">在這些呼叫之間，您會使用 Draw 和 Fill 方法來呈現繪圖資源。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-224">In between these calls, you use Draw and Fill methods to render drawing resources.</span></span> <span data-ttu-id="0a8b3-225">大部分的繪圖和填滿方法都採用圖形 (基本或幾何) ，以及用來填滿或大綱圖形的筆刷。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-225">Most Draw and Fill methods take a shape (either a primitive or a geometry) and a brush for filling or outlining the shape.</span></span>

<span data-ttu-id="0a8b3-226">轉譯目標也提供剪下、套用不透明度遮罩，以及轉換座標空間的方法。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-226">Render targets also provide methods for clipping, applying opacity masks, and transforming the coordinate space.</span></span>

<span data-ttu-id="0a8b3-227">Direct2D 使用左方座標系統：正 X 軸的值會繼續往右，y 軸的正值則會往下進行。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-227">Direct2D uses a left-handed coordinate system: positive x-axis values proceed to the right and positive y-axis values proceed downward.</span></span>

### <a name="error-handling"></a><span data-ttu-id="0a8b3-228">錯誤處理</span><span class="sxs-lookup"><span data-stu-id="0a8b3-228">Error Handling</span></span>

<span data-ttu-id="0a8b3-229">轉譯目標繪製命令不會指出要求的作業是否成功。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-229">Render target drawing commands do not indicate whether the requested operation was successful.</span></span> <span data-ttu-id="0a8b3-230">若要找出是否有繪圖錯誤，請呼叫轉譯目標 [**Flush**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-flush) 方法或 [**EndDraw**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-enddraw) 方法來取得 **HRESULT**。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-230">To find out whether there were drawing errors, call the render target [**Flush**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-flush) method or [**EndDraw**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-enddraw) method to obtain an **HRESULT**.</span></span>

## <a name="drawing-resources"></a><span data-ttu-id="0a8b3-231">繪製資源</span><span class="sxs-lookup"><span data-stu-id="0a8b3-231">Drawing Resources</span></span>

<span data-ttu-id="0a8b3-232">下列各節描述可由轉譯目標和 factory 介面建立的一些資源。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-232">The following sections describe some of the resources that can be created by the render target and factory interfaces.</span></span>

### <a name="brushes"></a><span data-ttu-id="0a8b3-233">筆刷</span><span class="sxs-lookup"><span data-stu-id="0a8b3-233">Brushes</span></span>

<span data-ttu-id="0a8b3-234">[**ID2D1Brush**](/windows/win32/api/d2d1/nn-d2d1-id2d1brush)介面所代表的筆刷是由轉譯目標所建立的裝置相依資源，可繪製具有其輸出的區域。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-234">A brush, represented by the [**ID2D1Brush**](/windows/win32/api/d2d1/nn-d2d1-id2d1brush) interface, is a device-dependent resource, created by a render target, that paints an area with its output.</span></span> <span data-ttu-id="0a8b3-235">不同的筆刷有不同類型的輸出。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-235">Different brushes have different types of output.</span></span> <span data-ttu-id="0a8b3-236">某些筆刷會以純色繪製區域，有些則使用漸層或影像。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-236">Some brushes paint an area with a solid color, others with a gradient or an image.</span></span> <span data-ttu-id="0a8b3-237">Direct2D 提供四種類型的筆刷：</span><span class="sxs-lookup"><span data-stu-id="0a8b3-237">Direct2D provides four types of brushes:</span></span>

-   <span data-ttu-id="0a8b3-238">[**ID2D1SolidColorBrush**](/windows/win32/api/d2d1/nn-d2d1-id2d1solidcolorbrush) 以純色繪製區域。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-238">[**ID2D1SolidColorBrush**](/windows/win32/api/d2d1/nn-d2d1-id2d1solidcolorbrush) paints an area with a solid color.</span></span>
-   <span data-ttu-id="0a8b3-239">[**ID2D1LinearGradientBrush**](/windows/win32/api/d2d1/nn-d2d1-id2d1lineargradientbrush) 會繪製具有線性漸層的區域，以線上條（漸層軸）混合兩個以上的色彩。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-239">[**ID2D1LinearGradientBrush**](/windows/win32/api/d2d1/nn-d2d1-id2d1lineargradientbrush) paints an area with a linear gradient that blends two or more colors across a line, the gradient axis.</span></span>
-   <span data-ttu-id="0a8b3-240">[**ID2D1RadialGradientBrush**](/windows/win32/api/d2d1/nn-d2d1-id2d1radialgradientbrush) 繪製一個具有放射狀漸層的區域，可在橢圓形周圍混合兩個或多個色彩。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-240">[**ID2D1RadialGradientBrush**](/windows/win32/api/d2d1/nn-d2d1-id2d1radialgradientbrush) paints an area with a radial gradient that blends two or more colors around an ellipse.</span></span>
-   <span data-ttu-id="0a8b3-241">[**ID2D1BitmapBrush**](/windows/win32/api/d2d1/nn-d2d1-id2d1bitmapbrush) 會以點陣圖繪製區域。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-241">[**ID2D1BitmapBrush**](/windows/win32/api/d2d1/nn-d2d1-id2d1bitmapbrush) paints an area with a bitmap.</span></span>

<span data-ttu-id="0a8b3-242">若要建立筆刷，請使用其中一個 [**ID2D1RenderTarget：：**](/windows/win32/api/d2d1/nn-d2d1-id2d1rendertarget)create *<Type>* 筆刷方法，例如 [**CreateRadialGradientBrush**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-createradialgradientbrush(constd2d1_radial_gradient_brush_properties__constd2d1_brush_properties__id2d1gradientstopcollection_id2d1radialgradientbrush))。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-242">To create a brush, you use one of the [**ID2D1RenderTarget::**](/windows/win32/api/d2d1/nn-d2d1-id2d1rendertarget)Create *<Type>* Brush methods, such as [**CreateRadialGradientBrush**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-createradialgradientbrush(constd2d1_radial_gradient_brush_properties__constd2d1_brush_properties__id2d1gradientstopcollection_id2d1radialgradientbrush)).</span></span> <span data-ttu-id="0a8b3-243">筆刷可以與轉譯目標繪製和填滿方法搭配使用，以繪製形狀筆觸或外框，或做為不透明度遮罩。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-243">Brushes can be used with a render target Draw and Fill methods, either to paint a shape stroke or outline, or as an opacity mask.</span></span>

<span data-ttu-id="0a8b3-244">如需筆刷的詳細資訊，請參閱 [筆刷總覽](direct2d-brushes-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-244">For more information about brushes, see the [Brushes Overview](direct2d-brushes-overview.md).</span></span>

### <a name="geometries"></a><span data-ttu-id="0a8b3-245">幾何</span><span class="sxs-lookup"><span data-stu-id="0a8b3-245">Geometries</span></span>

<span data-ttu-id="0a8b3-246">除了基本繪圖基本專案，例如點、矩形和省略號之外，Direct2D 還提供 [**ID2D1Geometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometry) 介面來描述簡單和複雜的圖形。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-246">In addition to basic drawing primitives such as points, rectangles, and ellipses, Direct2D provides the [**ID2D1Geometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometry) interface for describing simple and complex shapes.</span></span> <span data-ttu-id="0a8b3-247">繼承自 **ID2D1Geometry** 的介面會定義不同類型的圖形，例如代表矩形的 [**ID2D1RectangleGeometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1rectanglegeometry) 、代表圓角矩形的 [**ID2D1RoundedRectangleGeometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1roundedrectanglegeometry) ，以及代表省略號的 [**ID2D1EllipseGeometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1ellipsegeometry) 。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-247">Interfaces that inherit from **ID2D1Geometry** define different types of shapes, such as [**ID2D1RectangleGeometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1rectanglegeometry) for representing rectangles, [**ID2D1RoundedRectangleGeometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1roundedrectanglegeometry) for representing rounded rectangles, and [**ID2D1EllipseGeometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1ellipsegeometry) for representing ellipses.</span></span>

<span data-ttu-id="0a8b3-248">您可以使用 [**ID2D1GeometrySink**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometrysink) 介面來指定以線條、曲線和弧形組成的一連串圖表，以建立更複雜的圖形。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-248">More complex shapes can be created by using the [**ID2D1GeometrySink**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometrysink) interface to specify a series of figures composed of lines, curves, and arcs.</span></span> <span data-ttu-id="0a8b3-249">**ID2D1GeometrySink** 會傳遞至 [**ID2D1PathGeometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1pathgeometry)的 Open 方法，以產生複雜的幾何。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-249">The **ID2D1GeometrySink** is passed to the Open method of an [**ID2D1PathGeometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1pathgeometry) to generate a complex geometry.</span></span> <span data-ttu-id="0a8b3-250">[**ID2D1SimplifiedGeometrySink**](/windows/win32/api/d2d1/nn-d2d1-id2d1simplifiedgeometrysink) 也可以與 DirectWrite API 搭配使用，以解壓縮適用于藝術轉譯的格式化文字路徑大綱。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-250">[**ID2D1SimplifiedGeometrySink**](/windows/win32/api/d2d1/nn-d2d1-id2d1simplifiedgeometrysink) can also be used with the DirectWrite API to extract path outlines of formatted text for artistic rendering.</span></span>

<span data-ttu-id="0a8b3-251">Geometry 介面提供的方法可透過擴展或簡化現有的幾何，或產生多個幾何的交集或等位，來操作圖形。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-251">The geometry interfaces provide methods for manipulating shapes by widening or simplifying existing geometries, or by generating the intersection or union of multiple geometries.</span></span> <span data-ttu-id="0a8b3-252">它們也提供方法來判斷幾何是否為交集或重迭、抓取界限資訊、計算幾何的區域或長度，以及沿著幾何插上位置。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-252">They also provide methods for determining whether geometries are intersecting or overlapping, retrieving bounds information, computing the area or length of a geometry, and interpolating locations along a geometry.</span></span> <span data-ttu-id="0a8b3-253">Direct2D 也可讓您建立從幾何鑲嵌的三角形網格。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-253">Direct2D also provides the ability to create a mesh of triangles that is tessellated from a geometry.</span></span>

<span data-ttu-id="0a8b3-254">若要建立幾何，請使用其中一個 [**ID2D1Factory**](/windows/win32/api/d2d1/nn-d2d1-id2d1factory)：： create *<Type>* geometry 方法，例如 [**CreatePathGeometry**](/windows/win32/api/d2d1/nf-d2d1-id2d1factory-createpathgeometry)。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-254">To create a geometry, you use one of the [**ID2D1Factory**](/windows/win32/api/d2d1/nn-d2d1-id2d1factory)::Create *<Type>* Geometry methods, such as [**CreatePathGeometry**](/windows/win32/api/d2d1/nf-d2d1-id2d1factory-createpathgeometry).</span></span> <span data-ttu-id="0a8b3-255">Geometry 是與裝置無關的資源。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-255">A geometry is a device-independent resource.</span></span>

<span data-ttu-id="0a8b3-256">若要呈現幾何，請使用轉譯目標的 [**DrawGeometry**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawgeometry) 和 [**FillGeometry**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-fillgeometry) 方法。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-256">To render a geometry, you use the [**DrawGeometry**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawgeometry) and [**FillGeometry**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-fillgeometry) methods of a render target.</span></span>

<span data-ttu-id="0a8b3-257">如需幾何的詳細資訊，請參閱 [幾何總覽](direct2d-geometries-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-257">For more information about geometries, see the [Geometries Overview](direct2d-geometries-overview.md).</span></span>

### <a name="bitmaps"></a><span data-ttu-id="0a8b3-258">點陣圖</span><span class="sxs-lookup"><span data-stu-id="0a8b3-258">Bitmaps</span></span>

<span data-ttu-id="0a8b3-259">Direct2D 不提供載入或儲存點陣圖的方法;相反地，它可讓您使用 [Windows 影像處理元件 (WIC) ](../wic/-wic-about-windows-imaging-codec.md)建立點陣圖。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-259">Direct2D does not provide methods for loading or storing bitmaps; rather, it enables you to create bitmaps using the [Windows Imaging Component (WIC)](../wic/-wic-about-windows-imaging-codec.md).</span></span> <span data-ttu-id="0a8b3-260">點陣圖資源可以使用 WIC 載入，然後用來透過 [**ID2D1RenderTarget：： CreateBitmapFromWicBitmap**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-createbitmapfromwicbitmap(iwicbitmapsource_constd2d1_bitmap_properties_id2d1bitmap))方法建立 [**ID2D1Bitmap**](/windows/win32/api/d2d1/nn-d2d1-id2d1bitmap) 。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-260">Bitmap resources can be loaded using WIC and then used to create an [**ID2D1Bitmap**](/windows/win32/api/d2d1/nn-d2d1-id2d1bitmap) through the [**ID2D1RenderTarget::CreateBitmapFromWicBitmap**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-createbitmapfromwicbitmap(iwicbitmapsource_constd2d1_bitmap_properties_id2d1bitmap)) method.</span></span>

<span data-ttu-id="0a8b3-261">點陣圖也可以從以其他方式設定的記憶體內部資料中建立。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-261">Bitmaps can also be created from in-memory data that was set up through other means.</span></span> <span data-ttu-id="0a8b3-262">點陣圖建立之後，就可以由轉譯目標 [**DrawBitmap**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawbitmap(id2d1bitmap_constd2d1_rect_f__float_d2d1_bitmap_interpolation_mode_constd2d1_rect_f_)) 方法或點陣圖筆刷繪製。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-262">After a bitmap has been created, it can be drawn by the render target [**DrawBitmap**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawbitmap(id2d1bitmap_constd2d1_rect_f__float_d2d1_bitmap_interpolation_mode_constd2d1_rect_f_)) method or with a bitmap brush.</span></span>

<span data-ttu-id="0a8b3-263">因為在硬體轉譯目標上建立點陣圖資源通常是昂貴的作業，所以 Direct2D 可以使用 [**CopyFromBitmap**](/windows/win32/api/d2d1/nf-d2d1-id2d1bitmap-copyfrombitmap)、 [**CopyFromRenderTarget**](/windows/win32/api/d2d1/nf-d2d1-id2d1bitmap-copyfromrendertarget)和 [**CopyFromMemory**](/windows/win32/api/d2d1/nf-d2d1-id2d1bitmap-copyfrommemory) 方法來更新點陣圖 (或點陣圖) 部分的內容。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-263">Because creating bitmap resources on hardware render targets is often an expensive operation, Direct2D can update the contents of a bitmap (or portion of the bitmap) by using the [**CopyFromBitmap**](/windows/win32/api/d2d1/nf-d2d1-id2d1bitmap-copyfrombitmap), [**CopyFromRenderTarget**](/windows/win32/api/d2d1/nf-d2d1-id2d1bitmap-copyfromrendertarget), and [**CopyFromMemory**](/windows/win32/api/d2d1/nf-d2d1-id2d1bitmap-copyfrommemory) methods.</span></span> <span data-ttu-id="0a8b3-264">使用這些方法可能會節省與其他 GPU 材質配置相關聯的成本。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-264">Using these methods can potentially save the costs associated with additional GPU texture allocations.</span></span>

## <a name="drawing-text"></a><span data-ttu-id="0a8b3-265">繪製文字</span><span class="sxs-lookup"><span data-stu-id="0a8b3-265">Drawing Text</span></span>

<span data-ttu-id="0a8b3-266">Direct2D 的設計目的是要與新文字 API DirectWrite 的文字作業搭配使用。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-266">Direct2D was designed to work with the text operations of the new text API, DirectWrite.</span></span> <span data-ttu-id="0a8b3-267">為了讓您更輕鬆地使用 DirectWrite API，轉譯目標提供三種轉譯 DirectWrite 文字資源的方法： [**DrawText**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawtext(constwchar_uint32_idwritetextformat_constd2d1_rect_f__id2d1brush_d2d1_draw_text_options_dwrite_measuring_mode))、 [**DrawTextLayout**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawtextlayout)和 [**DrawGlyphRun**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawglyphrun)。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-267">To make using the DirectWrite API simpler, render targets provide three methods for rendering DirectWrite text resources: [**DrawText**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawtext(constwchar_uint32_idwritetextformat_constd2d1_rect_f__id2d1brush_d2d1_draw_text_options_dwrite_measuring_mode)), [**DrawTextLayout**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawtextlayout), and [**DrawGlyphRun**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawglyphrun).</span></span> <span data-ttu-id="0a8b3-268">由於 Direct2D 會使用 GPU 進行 ClearType 文字轉譯程式，因此，Direct2D 提供的 CPU 使用率低於文字作業的 GDI 和更佳的擴充性，因為有更多的 GPU 處理能力可用。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-268">Because Direct2D uses the GPU for the ClearType text rendering process, Direct2D provides lower CPU usage than GDI for text operations and better scalability as more GPU processing power is available.</span></span>

<span data-ttu-id="0a8b3-269">[**ID2D1RenderTarget：:D rawtext**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawtext(constwchar_uint32_idwritetextformat_constd2d1_rect_f__id2d1brush_d2d1_draw_text_options_dwrite_measuring_mode))是針對最簡單的案例所設計，其中包含以最少量的格式轉譯 Unicode 文字字串。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-269">The [**ID2D1RenderTarget::DrawText**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawtext(constwchar_uint32_idwritetextformat_constd2d1_rect_f__id2d1brush_d2d1_draw_text_options_dwrite_measuring_mode)) is designed for the simplest scenarios involving rendering a string of Unicode text with minimal formatting.</span></span> <span data-ttu-id="0a8b3-270">透過 [**ID2D1RenderTarget：:D rawtextlayout**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawtextlayout) 方法可提供更複雜的版面配置和印刷樣式彈性，它會使用 [**IDWriteTextLayout**](/windows/win32/api/dwrite/nn-dwrite-idwritetextlayout) 物件來指定要轉譯的內容和格式。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-270">More complex layout and typographic flexibility is provided through the [**ID2D1RenderTarget::DrawTextLayout**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawtextlayout) method, which uses an [**IDWriteTextLayout**](/windows/win32/api/dwrite/nn-dwrite-idwritetextlayout) object to specify the content and formatting to be rendered.</span></span> <span data-ttu-id="0a8b3-271">**IDWriteTextLayout** 可讓您為文字的子字串和其他先進的印刷樣式選項指定個別的格式。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-271">**IDWriteTextLayout** enables you to specify individual formatting for substrings of text and other advanced typography options.</span></span>

<span data-ttu-id="0a8b3-272">針對需要精確控制圖像層級配置的案例， [**ID2D1RenderTarget：:D rawglyphrun**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawglyphrun) 方法可以搭配 [DirectWrite](../directwrite/direct-write-portal.md)所提供的測量設備一起使用。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-272">For scenarios where precise control of glyph-level layout is required, the [**ID2D1RenderTarget::DrawGlyphRun**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawglyphrun) method can be used in conjunction with the measurement facilities provided by [DirectWrite](../directwrite/direct-write-portal.md).</span></span>

<span data-ttu-id="0a8b3-273">若要使用 DirectWrite API，請包含 dwrite 的標頭。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-273">To use the DirectWrite API, include the dwrite.h header.</span></span> <span data-ttu-id="0a8b3-274">如同 Direct2D，DirectWrite 會使用 factory [**IDWriteFactory**](/windows/win32/api/dwrite/nn-dwrite-idwritefactory) 來建立文字物件。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-274">Like Direct2D, DirectWrite uses a factory, [**IDWriteFactory**](/windows/win32/api/dwrite/nn-dwrite-idwritefactory) to create text objects.</span></span> <span data-ttu-id="0a8b3-275">使用 [**DWriteCreateFactory**](/windows/win32/api/dwrite/nf-dwrite-dwritecreatefactory) 函式來建立 factory，然後使用其 create 方法來建立 DirectWrite 資源 (例如 [**IDWriteTextFormat**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawtext(constwchar_uint32_idwritetextformat_constd2d1_rect_f__id2d1brush_d2d1_draw_text_options_dwrite_measuring_mode))) 。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-275">Use the [**DWriteCreateFactory**](/windows/win32/api/dwrite/nf-dwrite-dwritecreatefactory) function to create a factory, and then use its Create methods to create DirectWrite resources (such as [**IDWriteTextFormat**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawtext(constwchar_uint32_idwritetextformat_constd2d1_rect_f__id2d1brush_d2d1_draw_text_options_dwrite_measuring_mode))).</span></span>

<span data-ttu-id="0a8b3-276">For more information about DirectWrite, see the [Introducing DirectWrite](../directwrite/introducing-directwrite.md) topic.</span><span class="sxs-lookup"><span data-stu-id="0a8b3-276">For more information about DirectWrite, see the [Introducing DirectWrite](../directwrite/introducing-directwrite.md) topic.</span></span>

## <a name="direct2d-primitives"></a><span data-ttu-id="0a8b3-277">Direct2D 基本專案</span><span class="sxs-lookup"><span data-stu-id="0a8b3-277">Direct2D Primitives</span></span>

<span data-ttu-id="0a8b3-278">Direct2D 會定義一組基本類型，類似于其他繪圖 Api 所提供的基本類型。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-278">Direct2D defines a set of primitives that are similar to those provided by other drawing APIs.</span></span> <span data-ttu-id="0a8b3-279">它會提供色彩結構、用於執行轉換的矩陣結構，以及浮點數和整數版本的點、矩形、橢圓形和大小結構。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-279">It provides a color structure, a matrix structure for performing transformations, and floating-point and integer versions of points, rectangles, ellipses, and size structures.</span></span> <span data-ttu-id="0a8b3-280">通常，您會使用這些結構的浮點版本。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-280">Usually, you use the floating-point versions of these structures.</span></span>

<span data-ttu-id="0a8b3-281">您未使用 factory 或轉譯目標來具現化 Direct2D 基本專案。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-281">You do not use a factory or a render target to instantiate Direct2D primitives.</span></span> <span data-ttu-id="0a8b3-282">您可以直接建立它們，或使用 d2d1helper 中定義的 helper 方法來建立它們。</span><span class="sxs-lookup"><span data-stu-id="0a8b3-282">You can create them directly, or use the helper methods defined in d2d1helper.h to create them.</span></span>

## <a name="related-topics"></a><span data-ttu-id="0a8b3-283">相關主題</span><span class="sxs-lookup"><span data-stu-id="0a8b3-283">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="0a8b3-284">Direct2D 參考</span><span class="sxs-lookup"><span data-stu-id="0a8b3-284">Direct2D Reference</span></span>](reference.md)
</dt> <dt>

[<span data-ttu-id="0a8b3-285">DirectWrite Hello World 範例</span><span class="sxs-lookup"><span data-stu-id="0a8b3-285">DirectWrite Hello World Sample</span></span>](/samples/browse/?redirectedfrom=MSDN-samples)
</dt> <dt>

[<span data-ttu-id="0a8b3-286">DirectWrite 簡介</span><span class="sxs-lookup"><span data-stu-id="0a8b3-286">Introducing DirectWrite</span></span>](../directwrite/introducing-directwrite.md)
</dt> <dt>

[<span data-ttu-id="0a8b3-287">資源總覽</span><span class="sxs-lookup"><span data-stu-id="0a8b3-287">Resources Overview</span></span>](resources-and-resource-domains.md)
</dt> <dt>

[<span data-ttu-id="0a8b3-288">Windows 影像處理元件 (WIC)</span><span class="sxs-lookup"><span data-stu-id="0a8b3-288">Windows Imaging Component (WIC)</span></span>](../wic/-wic-about-windows-imaging-codec.md)
</dt> </dl>

 

 