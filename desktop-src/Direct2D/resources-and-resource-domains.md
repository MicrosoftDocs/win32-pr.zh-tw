---
title: 資源總覽
description: 描述 Direct2D 資源，以及如何共用這些資源。
ms.assetid: afd308a7-9524-4436-9a0e-8575383d96fa
keywords:
- Direct2D，資源
ms.topic: article
ms.date: 05/31/2018
ms.custom: seodec18
ms.openlocfilehash: bf4eb807a25b592e32a2d83436532af17462d70c
ms.sourcegitcommit: 7d0cc7eb398fee8f5be55cd654a12d29937d643c
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 02/08/2021
ms.locfileid: "104321376"
---
# <a name="resources-overview"></a><span data-ttu-id="5d93f-104">資源總覽</span><span class="sxs-lookup"><span data-stu-id="5d93f-104">Resources Overview</span></span>

<span data-ttu-id="5d93f-105">Direct2D 資源是用來繪製和以 Direct2D 介面（例如 [**ID2D1Geometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometry) 或 [**ID2D1RenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1rendertarget)）表示的物件。</span><span class="sxs-lookup"><span data-stu-id="5d93f-105">A Direct2D resource is an object that is used for drawing and is represented by a Direct2D interface, such as [**ID2D1Geometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometry) or [**ID2D1RenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1rendertarget).</span></span> <span data-ttu-id="5d93f-106">本主題說明 Direct2D 資源的種類，以及如何共用這些資源。</span><span class="sxs-lookup"><span data-stu-id="5d93f-106">This topic describes the kinds of Direct2D resources and how they can be shared.</span></span>

<span data-ttu-id="5d93f-107">本主題包含下列幾節：</span><span class="sxs-lookup"><span data-stu-id="5d93f-107">This topic contains the following sections:</span></span>

-   [<span data-ttu-id="5d93f-108">關於 Direct2D 資源</span><span class="sxs-lookup"><span data-stu-id="5d93f-108">About Direct2D Resources</span></span>](#about-direct2d-resources)
-   [<span data-ttu-id="5d93f-109">與裝置無關的資源</span><span class="sxs-lookup"><span data-stu-id="5d93f-109">Device-Independent Resources</span></span>](#device-independent-resources)
-   [<span data-ttu-id="5d93f-110">裝置相依的資源</span><span class="sxs-lookup"><span data-stu-id="5d93f-110">Device-Dependent Resources</span></span>](#device-dependent-resources)
-   [<span data-ttu-id="5d93f-111">共用 Factory 資源</span><span class="sxs-lookup"><span data-stu-id="5d93f-111">Sharing Factory Resources</span></span>](#sharing-factory-resources)
-   [<span data-ttu-id="5d93f-112">共用呈現目標資源</span><span class="sxs-lookup"><span data-stu-id="5d93f-112">Sharing Render Target Resources</span></span>](#sharing-render-target-resources)
    -   [<span data-ttu-id="5d93f-113">硬體呈現目標</span><span class="sxs-lookup"><span data-stu-id="5d93f-113">Hardware Render Targets</span></span>](#hardware-render-targets)
    -   [<span data-ttu-id="5d93f-114">DXGI 介面呈現目標</span><span class="sxs-lookup"><span data-stu-id="5d93f-114">DXGI Surface Render Targets</span></span>](#dxgi-surface-render-targets)
    -   [<span data-ttu-id="5d93f-115">相容的呈現目標和共用點陣圖</span><span class="sxs-lookup"><span data-stu-id="5d93f-115">Compatible Render Targets and Shared Bitmaps</span></span>](#compatible-render-targets-and-shared-bitmaps)

## <a name="about-direct2d-resources"></a><span data-ttu-id="5d93f-116">關於 Direct2D 資源</span><span class="sxs-lookup"><span data-stu-id="5d93f-116">About Direct2D Resources</span></span>

<span data-ttu-id="5d93f-117">許多硬體加速 2D Api 都是針對 CPU 導向的資源模型，以及一組可在 Cpu 上運作正常的轉譯作業所設計。然後，API 的部分是硬體加速。</span><span class="sxs-lookup"><span data-stu-id="5d93f-117">Many hardware-accelerated 2D APIs are designed around a CPU-focused resource model and a set of rendering operations that work well on CPUs.Then, some part of the API is hardware-accelerated.</span></span> <span data-ttu-id="5d93f-118">執行這些 Api 需要資源管理員，以將 CPU 資源對應至 GPU 上的資源。</span><span class="sxs-lookup"><span data-stu-id="5d93f-118">Implementing these APIs requires a resource manager for mapping CPU resources to resources on the GPU.</span></span> <span data-ttu-id="5d93f-119">由於 GPU 限制，某些作業可能無法在每種情況下加速。</span><span class="sxs-lookup"><span data-stu-id="5d93f-119">Because of GPU limitations, some operations might be unable to be accelerated in every circumstance.</span></span> <span data-ttu-id="5d93f-120">在這些情況下，資源管理員必須在 CPU 與 GPU 之間來回進行通訊， (這種情況很昂貴) ，因此可以轉換為 CPU 轉譯。</span><span class="sxs-lookup"><span data-stu-id="5d93f-120">In these cases, the resource manager must communicate back and forth between the CPU and GPU (which is expensive) so that it can transition to CPU rendering.</span></span> <span data-ttu-id="5d93f-121">在某些情況下，它可能會無法預期地強制轉譯為完全回復到 CPU。</span><span class="sxs-lookup"><span data-stu-id="5d93f-121">In some cases, it might unpredictably force rendering to fall back completely to the CPU.</span></span> <span data-ttu-id="5d93f-122">此外，顯示簡單的轉譯作業可能需要暫時性的中繼轉譯步驟，這些步驟不會在 API 中公開，且需要額外的 GPU 資源。</span><span class="sxs-lookup"><span data-stu-id="5d93f-122">In addition, rendering operations that appear simple might require temporary intermediate rendering steps that are not exposed in the API and that require additional GPU resources.</span></span>

<span data-ttu-id="5d93f-123">Direct2D 可提供更直接的對應，以充分利用 GPU。</span><span class="sxs-lookup"><span data-stu-id="5d93f-123">Direct2D provides a more direct mapping to making full use of the GPU.</span></span> <span data-ttu-id="5d93f-124">它提供兩種類別的資源：裝置獨立和裝置相依。</span><span class="sxs-lookup"><span data-stu-id="5d93f-124">It provides two categories of resources: device-independent and device-dependent.</span></span>

-   <span data-ttu-id="5d93f-125">與裝置無關的資源（例如 [**ID2D1Geometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometry)）會保留在 CPU 上。</span><span class="sxs-lookup"><span data-stu-id="5d93f-125">Device-independent resources, such as [**ID2D1Geometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometry), are kept on the CPU.</span></span>
-   <span data-ttu-id="5d93f-126">裝置相依的資源（例如 [**ID2D1RenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1rendertarget) 和 [**ID2D1LinearGradientBrush**](/windows/win32/api/d2d1/nn-d2d1-id2d1lineargradientbrush)）可在硬體加速可用時，直接對應至 GPU (上的資源) 。</span><span class="sxs-lookup"><span data-stu-id="5d93f-126">Device-dependent resources, such as [**ID2D1RenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1rendertarget) and [**ID2D1LinearGradientBrush**](/windows/win32/api/d2d1/nn-d2d1-id2d1lineargradientbrush), directly map to resources on the GPU (when hardware acceleration is available).</span></span> <span data-ttu-id="5d93f-127">轉譯呼叫的執行方式，是將幾何和涵蓋範圍資訊與裝置相依資源所產生的紋理資訊結合在一起。</span><span class="sxs-lookup"><span data-stu-id="5d93f-127">Rendering calls are performed by combining vertex and coverage information from a geometry with texturing information produced by the device-dependent resources.</span></span>

<span data-ttu-id="5d93f-128">當您建立裝置相依的資源時，系統資源 (可用的 GPU （如果有的話），或在裝置建立時配置的 CPU) ，而不會從某個轉譯作業變更為另一個。</span><span class="sxs-lookup"><span data-stu-id="5d93f-128">When you create device-dependent resources, system resources (the GPU, if available, or the CPU) are allocated when the device is created and do not change from one rendering operation to another.</span></span> <span data-ttu-id="5d93f-129">這種情況下就不需要資源管理員。</span><span class="sxs-lookup"><span data-stu-id="5d93f-129">This situation eliminates the need for a resource manager.</span></span> <span data-ttu-id="5d93f-130">除了排除資源管理員所提供的一般效能改進之外，此模型還可讓您直接控制任何中繼轉譯。</span><span class="sxs-lookup"><span data-stu-id="5d93f-130">In addition to the general performance improvements that are provided by the elimination of a resource manager, this model enables you to directly control any intermediate rendering.</span></span>

<span data-ttu-id="5d93f-131">由於 Direct2D 可對資源提供太多控制權，因此您必須瞭解不同種類的資源，以及這些資源可以搭配使用的時機。</span><span class="sxs-lookup"><span data-stu-id="5d93f-131">Because Direct2D provides so much control over resources, you must understand the different kinds of resources and when they can be used together.</span></span>

## <a name="device-independent-resources"></a><span data-ttu-id="5d93f-132">Device-Independent 資源</span><span class="sxs-lookup"><span data-stu-id="5d93f-132">Device-Independent Resources</span></span>

<span data-ttu-id="5d93f-133">如上一節所述，與裝置無關的資源一律位於 CPU 上，而且永遠不會與硬體轉譯裝置產生關聯。</span><span class="sxs-lookup"><span data-stu-id="5d93f-133">As described in the previous section, device-independent resources always reside on the CPU and are never associated with a hardware rendering device.</span></span> <span data-ttu-id="5d93f-134">以下是與裝置無關的資源：</span><span class="sxs-lookup"><span data-stu-id="5d93f-134">The following are device-independent resources:</span></span>

-   [<span data-ttu-id="5d93f-135">**ID2D1DrawingStateBlock**</span><span class="sxs-lookup"><span data-stu-id="5d93f-135">**ID2D1DrawingStateBlock**</span></span>](/windows/win32/api/d2d1/nn-d2d1-id2d1drawingstateblock)
-   [<span data-ttu-id="5d93f-136">**ID2D1Factory**</span><span class="sxs-lookup"><span data-stu-id="5d93f-136">**ID2D1Factory**</span></span>](/windows/win32/api/d2d1/nn-d2d1-id2d1factory)
-   <span data-ttu-id="5d93f-137">[**ID2D1Geometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometry) 和繼承自它的介面。</span><span class="sxs-lookup"><span data-stu-id="5d93f-137">[**ID2D1Geometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometry) and the interfaces that inherit from it.</span></span>
-   <span data-ttu-id="5d93f-138">[**ID2D1GeometrySink**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometrysink)和 [ **ID2D1SimplifiedGeometrySink**](/windows/win32/api/d2d1/nn-d2d1-id2d1simplifiedgeometrysink)</span><span class="sxs-lookup"><span data-stu-id="5d93f-138">[**ID2D1GeometrySink**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometrysink) and [**ID2D1SimplifiedGeometrySink**](/windows/win32/api/d2d1/nn-d2d1-id2d1simplifiedgeometrysink)</span></span>
-   [<span data-ttu-id="5d93f-139">**ID2D1StrokeStyle**</span><span class="sxs-lookup"><span data-stu-id="5d93f-139">**ID2D1StrokeStyle**</span></span>](/windows/win32/api/d2d1/nn-d2d1-id2d1strokestyle)

<span data-ttu-id="5d93f-140">使用 [**ID2D1Factory**](/windows/win32/api/d2d1/nn-d2d1-id2d1factory)本身是與裝置無關的資源，來建立與裝置無關的資源。</span><span class="sxs-lookup"><span data-stu-id="5d93f-140">Use an [**ID2D1Factory**](/windows/win32/api/d2d1/nn-d2d1-id2d1factory), itself a device-independent resource, to create device-independent resources.</span></span> <span data-ttu-id="5d93f-141"> (若要建立 factory，請使用 [**CreateFactory**](/windows/desktop/api/d2d1/nf-d2d1-d2d1createfactory) 函數。 ) </span><span class="sxs-lookup"><span data-stu-id="5d93f-141">(To create a factory, use the [**CreateFactory**](/windows/desktop/api/d2d1/nf-d2d1-d2d1createfactory) function.)</span></span>

<span data-ttu-id="5d93f-142">除了轉譯目標之外，處理站所建立的所有資源都與裝置無關。</span><span class="sxs-lookup"><span data-stu-id="5d93f-142">Except for render targets, all the resources created by a factory are device-independent.</span></span> <span data-ttu-id="5d93f-143">轉譯目標是與裝置相關的資源。</span><span class="sxs-lookup"><span data-stu-id="5d93f-143">A render target is a device-dependent resource.</span></span>

## <a name="device-dependent-resources"></a><span data-ttu-id="5d93f-144">Device-Dependent 資源</span><span class="sxs-lookup"><span data-stu-id="5d93f-144">Device-Dependent Resources</span></span>

<span data-ttu-id="5d93f-145">未在前一個清單中命名的任何資源，都是與裝置相關的資源。</span><span class="sxs-lookup"><span data-stu-id="5d93f-145">Any resource that is not named in the previous list is a device-dependent resource.</span></span> <span data-ttu-id="5d93f-146">與裝置相關的資源會與特定的轉譯裝置相關聯。</span><span class="sxs-lookup"><span data-stu-id="5d93f-146">Device-dependent resources are associated with a particular rendering device.</span></span> <span data-ttu-id="5d93f-147">當硬體加速可用時，該裝置就是 GPU。</span><span class="sxs-lookup"><span data-stu-id="5d93f-147">When hardware acceleration is available, that device is the GPU.</span></span> <span data-ttu-id="5d93f-148">在其他情況下，則是 CPU。</span><span class="sxs-lookup"><span data-stu-id="5d93f-148">In other cases, it is the CPU.</span></span>

<span data-ttu-id="5d93f-149">若要建立與裝置相關的大部分資源，請使用呈現目標。</span><span class="sxs-lookup"><span data-stu-id="5d93f-149">To create most device-dependent resources, use a render target.</span></span> <span data-ttu-id="5d93f-150">在大多數情況下，請使用 factory 來建立轉譯目標。</span><span class="sxs-lookup"><span data-stu-id="5d93f-150">In most cases, use a factory to create a render target.</span></span>

<span data-ttu-id="5d93f-151">以下是與裝置相關的資源範例：</span><span class="sxs-lookup"><span data-stu-id="5d93f-151">The following are examples of device-dependent resources:</span></span>

-   <span data-ttu-id="5d93f-152">[**ID2D1Brush**](/windows/win32/api/d2d1/nn-d2d1-id2d1brush) 和繼承自它的介面。</span><span class="sxs-lookup"><span data-stu-id="5d93f-152">[**ID2D1Brush**](/windows/win32/api/d2d1/nn-d2d1-id2d1brush) and the interfaces that inherit from it.</span></span> <span data-ttu-id="5d93f-153">使用呈現目標來建立筆刷。</span><span class="sxs-lookup"><span data-stu-id="5d93f-153">Use a render target to create brushes.</span></span>
-   <span data-ttu-id="5d93f-154">[**ID2D1Layer**](/windows/win32/api/d2d1/nn-d2d1-id2d1layer)。</span><span class="sxs-lookup"><span data-stu-id="5d93f-154">[**ID2D1Layer**](/windows/win32/api/d2d1/nn-d2d1-id2d1layer).</span></span> <span data-ttu-id="5d93f-155">使用呈現目標來建立圖層。</span><span class="sxs-lookup"><span data-stu-id="5d93f-155">Use a render target to create layers.</span></span>
-   <span data-ttu-id="5d93f-156">[**ID2D1RenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1rendertarget) 和繼承自它的介面。</span><span class="sxs-lookup"><span data-stu-id="5d93f-156">[**ID2D1RenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1rendertarget) and the interfaces that inherit from it.</span></span> <span data-ttu-id="5d93f-157">若要建立轉譯目標，請使用 factory 或另一個呈現目標。</span><span class="sxs-lookup"><span data-stu-id="5d93f-157">To create a render target, use a factory or another render target.</span></span>

> [!Note]  
> <span data-ttu-id="5d93f-158">從 Windows 8 開始，有新的介面可建立裝置相依的資源。</span><span class="sxs-lookup"><span data-stu-id="5d93f-158">Starting with Windows 8, there are new interfaces that create device dependent resources.</span></span> <span data-ttu-id="5d93f-159">如果從相同的 **ID2D1Device** 建立裝置內容和資源， [**ID2D1Device**](/windows/win32/api/d2d1_1/nn-d2d1_1-id2d1device)和 [**ID2D1DeviceCoNtext**](/windows/win32/api/d2d1_1/nn-d2d1_1-id2d1devicecontext)可以共用資源。</span><span class="sxs-lookup"><span data-stu-id="5d93f-159">An [**ID2D1Device**](/windows/win32/api/d2d1_1/nn-d2d1_1-id2d1device) and a [**ID2D1DeviceContext**](/windows/win32/api/d2d1_1/nn-d2d1_1-id2d1devicecontext) can share a resource if the device context and the resource are created from the same **ID2D1Device**.</span></span>

 

<span data-ttu-id="5d93f-160">當相關聯的轉譯裝置變成無法使用時，裝置相依的資源就會變成無法使用。</span><span class="sxs-lookup"><span data-stu-id="5d93f-160">Device-dependent resources become unusable when the associated rendering devices become unavailable.</span></span> <span data-ttu-id="5d93f-161">這表示當您收到轉譯目標的 [**D2DERR \_ 重新建立 \_ 目標**](direct2d-error-codes.md) 錯誤時，必須重新建立轉譯目標及其所有資源。</span><span class="sxs-lookup"><span data-stu-id="5d93f-161">This means that when you receive the [**D2DERR\_RECREATE\_TARGET**](direct2d-error-codes.md) error for a render target, you must re-create the render target and all its resources.</span></span>

## <a name="sharing-factory-resources"></a><span data-ttu-id="5d93f-162">共用 Factory 資源</span><span class="sxs-lookup"><span data-stu-id="5d93f-162">Sharing Factory Resources</span></span>

<span data-ttu-id="5d93f-163">您可以與所有其他資源分享所有與裝置無關的資源， (與裝置無關或由相同處理站建立的裝置相依) 。</span><span class="sxs-lookup"><span data-stu-id="5d93f-163">You can share all device-independent resources created by a factory with all other resources (device-independent or device-dependent) created by the same factory.</span></span> <span data-ttu-id="5d93f-164">例如，如果兩個 **ID2D1RenderTarget** 物件都是由相同的 factory 所建立，則您可以使用兩個 [**ID2D1RenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1rendertarget)物件來繪製相同的 [**ID2D1RectangleGeometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1rectanglegeometry) 。</span><span class="sxs-lookup"><span data-stu-id="5d93f-164">For example, you can use two [**ID2D1RenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1rendertarget) objects to draw the same [**ID2D1RectangleGeometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1rectanglegeometry) if both of those **ID2D1RenderTarget** objects were created by the same factory.</span></span>

<span data-ttu-id="5d93f-165">接收介面 ([**ID2D1SimplifiedGeometrySink**](/windows/win32/api/d2d1/nn-d2d1-id2d1simplifiedgeometrysink)、 [**ID2D1GeometrySink**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometrysink)和 [**ID2D1TessellationSink**](/windows/win32/api/d2d1/nn-d2d1-id2d1tessellationsink)) 可與任何 factory 所建立的資源分享。</span><span class="sxs-lookup"><span data-stu-id="5d93f-165">The sink interfaces ([**ID2D1SimplifiedGeometrySink**](/windows/win32/api/d2d1/nn-d2d1-id2d1simplifiedgeometrysink), [**ID2D1GeometrySink**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometrysink), and [**ID2D1TessellationSink**](/windows/win32/api/d2d1/nn-d2d1-id2d1tessellationsink)) may be shared with resources created by any factory.</span></span> <span data-ttu-id="5d93f-166">不同于 Direct2D 中的其他介面，可以使用任何接收介面的實作為。</span><span class="sxs-lookup"><span data-stu-id="5d93f-166">Unlike other interfaces in Direct2D, any implementation of a sink interface can be used.</span></span> <span data-ttu-id="5d93f-167">例如，您可以使用自己的 **ID2D1SimplifiedGeometrySink** 執行。</span><span class="sxs-lookup"><span data-stu-id="5d93f-167">For example, you could use your own implementation of **ID2D1SimplifiedGeometrySink**.</span></span>

## <a name="sharing-render-target-resources"></a><span data-ttu-id="5d93f-168">共用呈現目標資源</span><span class="sxs-lookup"><span data-stu-id="5d93f-168">Sharing Render Target Resources</span></span>

<span data-ttu-id="5d93f-169">您共用轉譯目標所建立之資源的能力，取決於轉譯目標的種類。</span><span class="sxs-lookup"><span data-stu-id="5d93f-169">Your ability to share resources created by a render target depends on the kind of render target.</span></span> <span data-ttu-id="5d93f-170">當您建立型別 D2D1 轉譯目標 [**\_ \_ \_ 類型 \_ 預設值**](/windows/desktop/api/d2d1/ne-d2d1-d2d1_render_target_type)的轉譯目標時，該呈現目標所建立的資源只能由該轉譯目標 (使用，除非轉譯目標符合下列各節所述的其中一種類別) 。</span><span class="sxs-lookup"><span data-stu-id="5d93f-170">When you create a render target of type [**D2D1\_RENDER\_TARGET\_TYPE\_DEFAULT**](/windows/desktop/api/d2d1/ne-d2d1-d2d1_render_target_type), the resources created by that render target can only be used by that render target (unless the render target fits into one of the categories described in the following sections).</span></span> <span data-ttu-id="5d93f-171">發生這種情況是因為您不知道轉譯目標最後將使用的裝置，可能會導致轉譯至本機硬體、軟體或遠端用戶端的硬體。</span><span class="sxs-lookup"><span data-stu-id="5d93f-171">This occurs because you do not know what device the render target will end up using—it could end up rendering to local hardware, software, or to a remote client's hardware.</span></span> <span data-ttu-id="5d93f-172">例如，您可以撰寫一個程式，當它從遠端顯示時或轉譯目標的大小增加到轉譯硬體所支援的大小上限時，就會停止運作。</span><span class="sxs-lookup"><span data-stu-id="5d93f-172">For example, you could write a program that stops working when it is displayed remotely or when the render target is increased in size beyond the maximum size supported by the rendering hardware.</span></span>

<span data-ttu-id="5d93f-173">下列各節說明某個轉譯目標所建立的資源可與另一個轉譯目標共用的情況。</span><span class="sxs-lookup"><span data-stu-id="5d93f-173">The following sections describe the circumstances under which a resource created by one render target can be shared with another render target.</span></span>

### <a name="hardware-render-targets"></a><span data-ttu-id="5d93f-174">硬體呈現目標</span><span class="sxs-lookup"><span data-stu-id="5d93f-174">Hardware Render Targets</span></span>

<span data-ttu-id="5d93f-175">只要遠端模式相容，您就可以在任何明確使用硬體的轉譯目標之間共用資源。</span><span class="sxs-lookup"><span data-stu-id="5d93f-175">You can share resources between any render target that explicitly uses hardware, as long as the remoting mode is compatible.</span></span> <span data-ttu-id="5d93f-176">只有當兩個轉譯目標使用 D2D1 轉譯目標使用方式 [**\_ \_ \_ \_ 強制 \_ 點陣圖 \_ 遠端處理**](/windows/desktop/api/d2d1/ne-d2d1-d2d1_render_target_usage) 或 **D2D1 轉譯目標使用 \_ \_ \_ \_ GDI \_ 相容** 的使用旗標，或未指定任何旗標時，才保證遠端處理模式是相容的。</span><span class="sxs-lookup"><span data-stu-id="5d93f-176">The remoting mode is only guaranteed to be compatible when both render targets use the [**D2D1\_RENDER\_TARGET\_USAGE\_FORCE\_BITMAP\_REMOTING**](/windows/desktop/api/d2d1/ne-d2d1-d2d1_render_target_usage) or **D2D1\_RENDER\_TARGET\_USAGE\_GDI\_COMPATIBLE** usage flag, or if neither flag is specified.</span></span> <span data-ttu-id="5d93f-177">這些設定可保證資源一律會位於同一部電腦上。</span><span class="sxs-lookup"><span data-stu-id="5d93f-177">These settings guarantee that the resources will always be located on the same computer.</span></span> <span data-ttu-id="5d93f-178">若要指定使用模式，請使用一或多個 **D2D1 轉譯 \_ \_ 目標 \_ 使用** 方式旗標，設定用來建立轉譯目標之 [**D2D1 轉譯 \_ \_ 目標 \_ 屬性**](/windows/desktop/api/d2d1/ns-d2d1-d2d1_render_target_properties)結構的 [**使用** 方式] 欄位。</span><span class="sxs-lookup"><span data-stu-id="5d93f-178">To specify a usage mode, set the **usage** field of the [**D2D1\_RENDER\_TARGET\_PROPERTIES**](/windows/desktop/api/d2d1/ns-d2d1-d2d1_render_target_properties) structure that you used to create the render target with one or more **D2D1\_RENDER\_TARGET\_USAGE** flags.</span></span>

<span data-ttu-id="5d93f-179">若要建立明確使用硬體轉譯的呈現目標，請將您用來建立轉譯目標的 [**D2D1 轉譯 \_ \_ 目標 \_ 屬性**](/windows/desktop/api/d2d1/ns-d2d1-d2d1_render_target_properties)結構的 [**類型**] 欄位設定為 [**D2D1 轉譯 \_ \_ 目標 \_ 類型 \_ 硬體**](/windows/desktop/api/d2d1/ne-d2d1-d2d1_render_target_type)。</span><span class="sxs-lookup"><span data-stu-id="5d93f-179">To create a render target that explicitly uses hardware rendering, set the **type** field of the [**D2D1\_RENDER\_TARGET\_PROPERTIES**](/windows/desktop/api/d2d1/ns-d2d1-d2d1_render_target_properties) structure that you used to create the render target to [**D2D1\_RENDER\_TARGET\_TYPE\_HARDWARE**](/windows/desktop/api/d2d1/ne-d2d1-d2d1_render_target_type).</span></span>

### <a name="dxgi-surface-render-targets"></a><span data-ttu-id="5d93f-180">DXGI 介面呈現目標</span><span class="sxs-lookup"><span data-stu-id="5d93f-180">DXGI Surface Render Targets</span></span>

<span data-ttu-id="5d93f-181">您可以將 DXGI 介面轉譯目標所建立的資源，與使用相同基礎 Direct3D 裝置的任何其他 DXGI 介面呈現目標共用。</span><span class="sxs-lookup"><span data-stu-id="5d93f-181">You can share resources created by a DXGI surface render target with any other DXGI surface render target that is using the same underlying Direct3D device.</span></span>

### <a name="compatible-render-targets-and-shared-bitmaps"></a><span data-ttu-id="5d93f-182">相容的呈現目標和共用點陣圖</span><span class="sxs-lookup"><span data-stu-id="5d93f-182">Compatible Render Targets and Shared Bitmaps</span></span>

<span data-ttu-id="5d93f-183">您可以在轉譯目標和該呈現目標所建立的相容轉譯目標之間共用資源。</span><span class="sxs-lookup"><span data-stu-id="5d93f-183">You can share resources between a render target and compatible render targets that are created by that render target.</span></span> <span data-ttu-id="5d93f-184">若要建立相容的呈現目標，請使用 [**ID2D1RenderTarget：： CreateCompatibleRenderTarget**](/windows/desktop/api/d2d1/nf-d2d1-id2d1rendertarget-createcompatiblerendertarget(id2d1bitmaprendertarget)) 方法。</span><span class="sxs-lookup"><span data-stu-id="5d93f-184">To create a compatible render target, use the [**ID2D1RenderTarget::CreateCompatibleRenderTarget**](/windows/desktop/api/d2d1/nf-d2d1-id2d1rendertarget-createcompatiblerendertarget(id2d1bitmaprendertarget)) method.</span></span>

<span data-ttu-id="5d93f-185">您可以使用 [**ID2D1RenderTarget：： CreateSharedBitmap**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-createsharedbitmap) 方法建立可在方法呼叫所指定的兩個轉譯目標之間共用的 [**ID2D1Bitmap**](/windows/win32/api/d2d1/nn-d2d1-id2d1bitmap) （如果方法成功）。</span><span class="sxs-lookup"><span data-stu-id="5d93f-185">You can use the [**ID2D1RenderTarget::CreateSharedBitmap**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-createsharedbitmap) method to create an [**ID2D1Bitmap**](/windows/win32/api/d2d1/nn-d2d1-id2d1bitmap) that can be shared between the two render targets that are specified in the method call, if the method succeeds.</span></span> <span data-ttu-id="5d93f-186">只要兩個轉譯目標使用相同的基礎裝置來呈現，此方法就會成功。</span><span class="sxs-lookup"><span data-stu-id="5d93f-186">This method will succeed as long as the two render targets use the same underlying device for rendering.</span></span>

 

 
