---
title: D1159 不正確 Commandlist 拓撲
ms.assetid: 1cd2f085-8dff-4140-bed9-7509961ff4c8
description: 命令清單無法參考屬於效果圖形（使用命令清單）的效果。
keywords:
- D1159 不正確 Commandlist 拓撲 Direct2D
topic_type:
- apiref
api_name:
- D1159 Invalid Commandlist Topology
api_type:
- NA
ms.topic: reference
ms.date: 05/31/2018
ms.custom: seodec18
ms.openlocfilehash: cd3d513b5c4110b89ffff5be5f72cd5ffcbf6160
ms.sourcegitcommit: 57758ecb246c84d65e6e0e4bd5570d9176fa39cd
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/25/2019
ms.locfileid: "106967862"
---
# <a name="d1159-invalid-commandlist-topology"></a><span data-ttu-id="44a3e-104">D1159：不正確 Commandlist 拓撲</span><span class="sxs-lookup"><span data-stu-id="44a3e-104">D1159: Invalid Commandlist Topology</span></span>

<span data-ttu-id="44a3e-105">命令清單無法參考屬於效果圖形（使用命令清單）的效果。</span><span class="sxs-lookup"><span data-stu-id="44a3e-105">A command list cannot reference effects which are part of effect graphs that consume the command list.</span></span>



|             |             |
|-------------|-------------|
| <span data-ttu-id="44a3e-106">錯誤層級</span><span class="sxs-lookup"><span data-stu-id="44a3e-106">Error Level</span></span> | <span data-ttu-id="44a3e-107">資訊</span><span class="sxs-lookup"><span data-stu-id="44a3e-107">Information</span></span> |



 

## <a name="possible-causes"></a><span data-ttu-id="44a3e-108">可能的原因</span><span class="sxs-lookup"><span data-stu-id="44a3e-108">Possible Causes</span></span>

<span data-ttu-id="44a3e-109">在填入命令清單時，應用程式可能會包含對 ID2D1DeviceCoNtext：:D rawImage 的呼叫。</span><span class="sxs-lookup"><span data-stu-id="44a3e-109">While populating a command list, an application may include a call to ID2D1DeviceContext::DrawImage.</span></span> <span data-ttu-id="44a3e-110">ID2D1DeviceCoNtext：:D rawImage 可以用來繪製點陣圖、效果或命令清單。</span><span class="sxs-lookup"><span data-stu-id="44a3e-110">ID2D1DeviceContext::DrawImage may be used to draw bitmaps, effects or command lists.</span></span> <span data-ttu-id="44a3e-111">如此一來，ID2D1DeviceCoNtext 的語法可能是：:D rawImage 呼叫嘗試繪製命令清單，而該相同的命令清單設為目標。</span><span class="sxs-lookup"><span data-stu-id="44a3e-111">As a consequence, it is syntactically possible for an ID2D1DeviceContext::DrawImage call to attempt to draw a command list while that same command list is set as a target.</span></span> <span data-ttu-id="44a3e-112">但以這種方式自我參考的命令清單是不正確。</span><span class="sxs-lookup"><span data-stu-id="44a3e-112">Self-referencing command lists in this manner, however, is not valid.</span></span> <span data-ttu-id="44a3e-113">Direct2D 將會找出發生這種情況並回報錯誤的情況，而且 debug 層會輸出此訊息。</span><span class="sxs-lookup"><span data-stu-id="44a3e-113">Direct2D will identify cases in which this occurs and report an error, and the debug layer will output this message.</span></span>

## <a name="possible-fixes"></a><span data-ttu-id="44a3e-114">可能的修正</span><span class="sxs-lookup"><span data-stu-id="44a3e-114">Possible Fixes</span></span>

<span data-ttu-id="44a3e-115">填入命令清單時，請確定裝置內容不會發出任何使用相同命令清單的作業。</span><span class="sxs-lookup"><span data-stu-id="44a3e-115">While populating a command list, ensure that a device context does not issue any operation which consumes that same command list.</span></span> <span data-ttu-id="44a3e-116">發生這種情況最明顯的方法，就是使用設定為目標的相同命令清單來呼叫 ID2D1DeviceCoNtext：:D rawImage。</span><span class="sxs-lookup"><span data-stu-id="44a3e-116">The most obvious way in which this can happen is to call ID2D1DeviceContext::DrawImage with the same command list which is set as the target.</span></span> <span data-ttu-id="44a3e-117">不過，這種情況可能也比較不明顯： ID2D1DeviceCoNtext：:D rawImage 可以參考效果圖形，而效果圖形中的一個節點可能會嘗試取用目標命令清單。</span><span class="sxs-lookup"><span data-stu-id="44a3e-117">However, there are also less obvious ways in which this may occur: an ID2D1DeviceContext::DrawImage may refer to an effect graph, and one node in the effect graph may attempt to consume the target command list.</span></span> <span data-ttu-id="44a3e-118">請確定已正確填入命令清單，再使用，且對 ID2D1DeviceCoNtext：： SetTarget 的呼叫會參考預定的目標。</span><span class="sxs-lookup"><span data-stu-id="44a3e-118">Ensure that command lists are populated correctly before use, and that calls to ID2D1DeviceContext::SetTarget refer to the intended target.</span></span>

 

 




