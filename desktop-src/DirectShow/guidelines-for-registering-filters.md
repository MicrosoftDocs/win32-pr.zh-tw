---
description: 註冊篩選準則的指導方針
ms.assetid: 05945937-9e01-4930-ae95-1931a711b55e
title: 註冊篩選準則的指導方針
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5ed616d90c17d232995994d8ceccfdc72d022d56
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/06/2021
ms.locfileid: "104108433"
---
# <a name="guidelines-for-registering-filters"></a><span data-ttu-id="970f7-103">註冊篩選準則的指導方針</span><span class="sxs-lookup"><span data-stu-id="970f7-103">Guidelines for Registering Filters</span></span>

<span data-ttu-id="970f7-104">篩選登錄資訊會決定篩選圖形管理員在 [智慧型連接](intelligent-connect.md)期間的功能。</span><span class="sxs-lookup"><span data-stu-id="970f7-104">The filter registry information determines how the Filter Graph Manager functions during [Intelligent Connect](intelligent-connect.md).</span></span> <span data-ttu-id="970f7-105">因此，它會影響針對 DirectShow 撰寫的每個應用程式，而不只是將使用您篩選的應用程式。</span><span class="sxs-lookup"><span data-stu-id="970f7-105">Thus, it affects every application written for DirectShow, not just the ones that will use your filter.</span></span> <span data-ttu-id="970f7-106">您應該遵循下列指導方針，以確定您的篩選行為正確。</span><span class="sxs-lookup"><span data-stu-id="970f7-106">You should make sure that your filter behaves correctly, by following these guidelines.</span></span>

1.  <span data-ttu-id="970f7-107">您是否需要登錄中的篩選資料？</span><span class="sxs-lookup"><span data-stu-id="970f7-107">Do you need the filter data in the registry?</span></span> <span data-ttu-id="970f7-108">針對許多自訂篩選，沒有理由讓篩選器或系統裝置列舉值看不到篩選。</span><span class="sxs-lookup"><span data-stu-id="970f7-108">For many custom filters, there is no reason to make the filter visible to the Filter Mapper or the System Device Enumerator.</span></span> <span data-ttu-id="970f7-109">只要您註冊 DLL，您的應用程式就可以使用 **CoCreateInstance** 建立篩選器。</span><span class="sxs-lookup"><span data-stu-id="970f7-109">As long as you register the DLL, your application can create the filter using **CoCreateInstance**.</span></span> <span data-ttu-id="970f7-110">在這種情況下，只需省略 factory 範本中的 [**AMOVIESETUP \_ 篩選**](amoviesetup-filter.md) 結構。</span><span class="sxs-lookup"><span data-stu-id="970f7-110">In that case, simply omit the [**AMOVIESETUP\_FILTER**](amoviesetup-filter.md) structure from the factory template.</span></span> <span data-ttu-id="970f7-111"> (一個缺點是您的篩選器將不會顯示在 GraphEdit 中。</span><span class="sxs-lookup"><span data-stu-id="970f7-111">(One drawback is that your filter will not be visible in GraphEdit.</span></span> <span data-ttu-id="970f7-112">若要解決此問題，您可以使用 [**IFilterMapper2：： CreateCategory**](/windows/desktop/api/Strmif/nf-strmif-ifiltermapper2-createcategory) 方法建立私用「測試」類別。</span><span class="sxs-lookup"><span data-stu-id="970f7-112">To get around this, you can create a private "Testing" category using the [**IFilterMapper2::CreateCategory**](/windows/desktop/api/Strmif/nf-strmif-ifiltermapper2-createcategory) method.</span></span> <span data-ttu-id="970f7-113">您應該只針對 debug 組建進行此作業。 ) </span><span class="sxs-lookup"><span data-stu-id="970f7-113">You should only do this for debug builds.)</span></span>
2.  <span data-ttu-id="970f7-114">選擇正確的篩選準則分類。</span><span class="sxs-lookup"><span data-stu-id="970f7-114">Choose the correct filter category.</span></span> <span data-ttu-id="970f7-115">預設的「DirectShow 篩選準則」類別適用于一般用途的篩選準則。</span><span class="sxs-lookup"><span data-stu-id="970f7-115">The default "DirectShow Filters" category is for general purpose filters.</span></span> <span data-ttu-id="970f7-116">在適當的情況下，在更明確的類別中註冊您的篩選準則。</span><span class="sxs-lookup"><span data-stu-id="970f7-116">Whenever appropriate, register your filter in a more specific category.</span></span> <span data-ttu-id="970f7-117">當 [**IFilterMapper2**](/windows/desktop/api/Strmif/nn-strmif-ifiltermapper2) 搜尋篩選器時，它會忽略任何其業績不會 \_ \_ \_ 使用或小於的類別。</span><span class="sxs-lookup"><span data-stu-id="970f7-117">When [**IFilterMapper2**](/windows/desktop/api/Strmif/nn-strmif-ifiltermapper2) searches for a filter, it ignores any category whose merit is MERIT\_DO\_NOT\_USE or less.</span></span> <span data-ttu-id="970f7-118">不適用於正常播放的類別具有較低的優點。</span><span class="sxs-lookup"><span data-stu-id="970f7-118">Categories not intended for normal playback have low merit.</span></span>
3.  <span data-ttu-id="970f7-119">避免 \_ \_ \_ 在 pin 的 [**AMOVIESETUP \_ 媒體**](amoviesetup-mediatype.md) 資訊中指定媒體類型 None、MEDIASUBTYPE none 或 GUID Null。</span><span class="sxs-lookup"><span data-stu-id="970f7-119">Avoid specifying MEDIATYPE\_None, MEDIASUBTYPE\_None, or GUID\_NULL in the [**AMOVIESETUP\_MEDIATYPE**](amoviesetup-mediatype.md) information for a pin.</span></span> <span data-ttu-id="970f7-120">**IFilterMapper2** 會將這些視為萬用字元，這可能會使圖形建立進程變慢。</span><span class="sxs-lookup"><span data-stu-id="970f7-120">**IFilterMapper2** treats these as wildcards, which can slow the graph-building process.</span></span>
4.  <span data-ttu-id="970f7-121">選擇最小的可能值。</span><span class="sxs-lookup"><span data-stu-id="970f7-121">Choose the lowest merit value possible.</span></span> <span data-ttu-id="970f7-122">以下是一些指導方針：</span><span class="sxs-lookup"><span data-stu-id="970f7-122">Here are some guidelines:</span></span>

    | <span data-ttu-id="970f7-123">濾波器類型</span><span class="sxs-lookup"><span data-stu-id="970f7-123">Type of filter</span></span>                                                                                       | <span data-ttu-id="970f7-124">建議的優點</span><span class="sxs-lookup"><span data-stu-id="970f7-124">Recommended merit</span></span>                                                                                   |
    |------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------|
    | <span data-ttu-id="970f7-125">預設轉譯器</span><span class="sxs-lookup"><span data-stu-id="970f7-125">Default renderer</span></span>                                                                                     | <span data-ttu-id="970f7-126">\_慣用。</span><span class="sxs-lookup"><span data-stu-id="970f7-126">MERIT\_PREFERRED.</span></span> <span data-ttu-id="970f7-127">不過，對於標準媒體類型，自訂轉譯器絕對不應該是預設值。</span><span class="sxs-lookup"><span data-stu-id="970f7-127">For standard media types, however, a custom renderer should never be the default.</span></span> |
    | <span data-ttu-id="970f7-128">非預設轉譯器</span><span class="sxs-lookup"><span data-stu-id="970f7-128">Non-default renderer</span></span>                                                                                 | <span data-ttu-id="970f7-129">\_ \_ 不 \_ 太可能使用或不 \_ 太可能的業績</span><span class="sxs-lookup"><span data-stu-id="970f7-129">MERIT\_DO\_NOT\_USE or MERIT\_UNLIKELY</span></span>                                                              |
    | <span data-ttu-id="970f7-130">Mux</span><span class="sxs-lookup"><span data-stu-id="970f7-130">Mux</span></span>                                                                                                  | <span data-ttu-id="970f7-131">\_ \_ 未 \_ 使用的業績</span><span class="sxs-lookup"><span data-stu-id="970f7-131">MERIT\_DO\_NOT\_USE</span></span>                                                                                 |
    | <span data-ttu-id="970f7-132">解碼器</span><span class="sxs-lookup"><span data-stu-id="970f7-132">Decoder</span></span>                                                                                              | <span data-ttu-id="970f7-133">一般的業績 \_</span><span class="sxs-lookup"><span data-stu-id="970f7-133">MERIT\_NORMAL</span></span>                                                                                       |
    | <span data-ttu-id="970f7-134">Spitter，剖析器</span><span class="sxs-lookup"><span data-stu-id="970f7-134">Spitter, parser</span></span>                                                                                      | <span data-ttu-id="970f7-135">\_正常或較低的業績</span><span class="sxs-lookup"><span data-stu-id="970f7-135">MERIT\_NORMAL or lower</span></span>                                                                              |
    | <span data-ttu-id="970f7-136">特殊用途篩選;由應用程式直接建立的任何篩選</span><span class="sxs-lookup"><span data-stu-id="970f7-136">Special purpose filter; any filter that is created directly by the application</span></span>                       | <span data-ttu-id="970f7-137">\_ \_ 未 \_ 使用的業績</span><span class="sxs-lookup"><span data-stu-id="970f7-137">MERIT\_DO\_NOT\_USE</span></span>                                                                                 |
    | <span data-ttu-id="970f7-138">擷取</span><span class="sxs-lookup"><span data-stu-id="970f7-138">Capture</span></span>                                                                                              | <span data-ttu-id="970f7-139">\_ \_ 未 \_ 使用的業績</span><span class="sxs-lookup"><span data-stu-id="970f7-139">MERIT\_DO\_NOT\_USE</span></span>                                                                                 |
    | <span data-ttu-id="970f7-140">「Fallback」篩選;例如， [色彩空間轉換器篩選](color-space-converter-filter.md)</span><span class="sxs-lookup"><span data-stu-id="970f7-140">"Fallback" filter; for example, the [Color Space Converter Filter](color-space-converter-filter.md)</span></span> | <span data-ttu-id="970f7-141">不 \_ 太可能</span><span class="sxs-lookup"><span data-stu-id="970f7-141">MERIT\_UNLIKELY</span></span>                                                                                     |

    

     

    <span data-ttu-id="970f7-142">如果您提供的篩選準則 \_ \_ 不 \_ 使用，請考慮您是否需要在一開始就註冊這項資訊。</span><span class="sxs-lookup"><span data-stu-id="970f7-142">If you are giving a filter a merit of MERIT\_DO\_NOT\_USE, consider whether you need to register this information in the first place.</span></span> <span data-ttu-id="970f7-143"> (請參閱專案 1. ) </span><span class="sxs-lookup"><span data-stu-id="970f7-143">(See item 1.)</span></span>

5.  <span data-ttu-id="970f7-144">請勿在接受24位 RGB 的「DirectShow 篩選」類別中註冊篩選。</span><span class="sxs-lookup"><span data-stu-id="970f7-144">Do not register a filter in the "DirectShow Filters" category that accepts 24-bit RGB.</span></span> <span data-ttu-id="970f7-145">您的篩選準則會干擾色彩空間轉換器篩選。</span><span class="sxs-lookup"><span data-stu-id="970f7-145">Your filter will interfere with the Color Space Converter filter.</span></span>

## <a name="related-topics"></a><span data-ttu-id="970f7-146">相關主題</span><span class="sxs-lookup"><span data-stu-id="970f7-146">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="970f7-147">如何註冊 DirectShow 篩選器</span><span class="sxs-lookup"><span data-stu-id="970f7-147">How to Register DirectShow Filters</span></span>](how-to-register-directshow-filters.md)
</dt> </dl>

 

 



