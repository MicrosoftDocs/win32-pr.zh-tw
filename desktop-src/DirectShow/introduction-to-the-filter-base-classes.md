---
description: 篩選基礎類別簡介
ms.assetid: db6324d7-1914-44a8-a202-dff752b61c1a
title: 篩選基礎類別簡介
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f44c104d8fe155a7c9f0edba72770a508c8ec43d
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/06/2021
ms.locfileid: "104385509"
---
# <a name="introduction-to-the-filter-base-classes"></a><span data-ttu-id="e4a81-103">篩選基礎類別簡介</span><span class="sxs-lookup"><span data-stu-id="e4a81-103">Introduction to the Filter Base Classes</span></span>

<span data-ttu-id="e4a81-104">本文說明 Microsoft 的 DirectShow 基礎類別庫。</span><span class="sxs-lookup"><span data-stu-id="e4a81-104">This article describes the Microsoft DirectShow base class library.</span></span> <span data-ttu-id="e4a81-105">此程式庫適用于篩選開發人員，但應用程式寫入器可能會發現某些協助程式類別和偵測公用程式很有用。</span><span class="sxs-lookup"><span data-stu-id="e4a81-105">This library is intended for filter developers, but application writers might find some of the helper classes and debugging utilities useful.</span></span> <span data-ttu-id="e4a81-106">但是，不需要基底類別庫來進行 DirectShow 程式設計。</span><span class="sxs-lookup"><span data-stu-id="e4a81-106">The base class library is not required for DirectShow programming, however.</span></span>

<span data-ttu-id="e4a81-107">下列各節摘要說明程式庫中最重要的基類。</span><span class="sxs-lookup"><span data-stu-id="e4a81-107">The following sections summarize the most important base classes in the library.</span></span>

<span data-ttu-id="e4a81-108">**COM 物件類別**</span><span class="sxs-lookup"><span data-stu-id="e4a81-108">**COM Object Classes**</span></span>

<span data-ttu-id="e4a81-109">下列類別支援 COM 物件的建立：</span><span class="sxs-lookup"><span data-stu-id="e4a81-109">The following classes support the creation of COM objects:</span></span>



| <span data-ttu-id="e4a81-110">類別</span><span class="sxs-lookup"><span data-stu-id="e4a81-110">Class</span></span>                              | <span data-ttu-id="e4a81-111">描述</span><span class="sxs-lookup"><span data-stu-id="e4a81-111">Description</span></span>                            |
|------------------------------------|----------------------------------------|
| [<span data-ttu-id="e4a81-112">**CBaseObject**</span><span class="sxs-lookup"><span data-stu-id="e4a81-112">**CBaseObject**</span></span>](cbaseobject.md) | <span data-ttu-id="e4a81-113">基底物件類別。</span><span class="sxs-lookup"><span data-stu-id="e4a81-113">Base object class.</span></span>                     |
| [<span data-ttu-id="e4a81-114">**CUnknown**</span><span class="sxs-lookup"><span data-stu-id="e4a81-114">**CUnknown**</span></span>](cunknown.md)       | <span data-ttu-id="e4a81-115">實行 **IUnknown** 介面。</span><span class="sxs-lookup"><span data-stu-id="e4a81-115">Implements the **IUnknown** interface.</span></span> |



 

<span data-ttu-id="e4a81-116">大部分的 DirectShow 類別都是衍生自 **CBaseObject**。</span><span class="sxs-lookup"><span data-stu-id="e4a81-116">Most of the DirectShow classes derive from **CBaseObject**.</span></span> <span data-ttu-id="e4a81-117">這個類別會在執行時間保留 DLL 中所有使用中物件的計數，以提供偵錯工具的協助。</span><span class="sxs-lookup"><span data-stu-id="e4a81-117">This class provides debugging assistance by keeping a count of all the active objects in the DLL at run time.</span></span> <span data-ttu-id="e4a81-118">在偵錯工具組建中，如果物件計數大於零，則 DLL 會判斷提示是否已卸載。</span><span class="sxs-lookup"><span data-stu-id="e4a81-118">In debug builds, the DLL asserts if it is unloaded while the object count is greater than zero.</span></span> <span data-ttu-id="e4a81-119">這可讓您更輕鬆地追蹤參考計數問題所造成的流失問題。</span><span class="sxs-lookup"><span data-stu-id="e4a81-119">This makes it easier to track down leaks caused by reference-counting problems.</span></span>

<span data-ttu-id="e4a81-120">所有支援 COM 介面的基類都衍生自 **CUnknown**，它會繼承 **CBaseObject**。</span><span class="sxs-lookup"><span data-stu-id="e4a81-120">All of the base classes that support COM interfaces derive from **CUnknown**, which inherits **CBaseObject**.</span></span> <span data-ttu-id="e4a81-121">**CUnknown** 類別支援參考計數、 **QueryInterface** 和匯總。</span><span class="sxs-lookup"><span data-stu-id="e4a81-121">The **CUnknown** class supports reference counting, **QueryInterface**, and aggregration.</span></span> <span data-ttu-id="e4a81-122">如需詳細資訊，請參閱 [如何執行 IUnknown](how-to-implement-iunknown.md)。</span><span class="sxs-lookup"><span data-stu-id="e4a81-122">For more information, see [How to Implement IUnknown](how-to-implement-iunknown.md).</span></span>

<span data-ttu-id="e4a81-123">**篩選和釘選類別**</span><span class="sxs-lookup"><span data-stu-id="e4a81-123">**Filter and Pin Classes**</span></span>

<span data-ttu-id="e4a81-124">下列類別支援建立 DirectShow 篩選器和釘選物件：</span><span class="sxs-lookup"><span data-stu-id="e4a81-124">The following classes support the creation of DirectShow filter and pin objects:</span></span>



| <span data-ttu-id="e4a81-125">類別</span><span class="sxs-lookup"><span data-stu-id="e4a81-125">Class</span></span>                                    | <span data-ttu-id="e4a81-126">描述</span><span class="sxs-lookup"><span data-stu-id="e4a81-126">Description</span></span>                                                                                                                                                     |
|------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="e4a81-127">**CBaseFilter**</span><span class="sxs-lookup"><span data-stu-id="e4a81-127">**CBaseFilter**</span></span>](cbasefilter.md)       | <span data-ttu-id="e4a81-128">篩選準則的基類。</span><span class="sxs-lookup"><span data-stu-id="e4a81-128">Base class for filters.</span></span> <span data-ttu-id="e4a81-129">實行 [**IBaseFilter**](/windows/desktop/api/Strmif/nn-strmif-ibasefilter) 介面。</span><span class="sxs-lookup"><span data-stu-id="e4a81-129">Implements the [**IBaseFilter**](/windows/desktop/api/Strmif/nn-strmif-ibasefilter) interface.</span></span>                                                                            |
| [<span data-ttu-id="e4a81-130">**CBasePin**</span><span class="sxs-lookup"><span data-stu-id="e4a81-130">**CBasePin**</span></span>](cbasepin.md)             | <span data-ttu-id="e4a81-131">圖釘的基類。</span><span class="sxs-lookup"><span data-stu-id="e4a81-131">Base class for pins.</span></span> <span data-ttu-id="e4a81-132">實行 [**IPin**](/windows/desktop/api/Strmif/nn-strmif-ipin) 和 [**IQualityControl**](/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol) 介面。</span><span class="sxs-lookup"><span data-stu-id="e4a81-132">Implements the [**IPin**](/windows/desktop/api/Strmif/nn-strmif-ipin) and [**IQualityControl**](/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol) interfaces.</span></span>                                             |
| [<span data-ttu-id="e4a81-133">**CBaseInputPin**</span><span class="sxs-lookup"><span data-stu-id="e4a81-133">**CBaseInputPin**</span></span>](cbaseinputpin.md)   | <span data-ttu-id="e4a81-134">使用本機記憶體傳輸的輸入針腳的基類。</span><span class="sxs-lookup"><span data-stu-id="e4a81-134">Base class for input pins that use local memory transport.</span></span> <span data-ttu-id="e4a81-135">實行 [**IMemInputPin**](/windows/desktop/api/Strmif/nn-strmif-imeminputpin) 介面。</span><span class="sxs-lookup"><span data-stu-id="e4a81-135">Implements the [**IMemInputPin**](/windows/desktop/api/Strmif/nn-strmif-imeminputpin) interface.</span></span> <span data-ttu-id="e4a81-136">這個類別衍生自 **CBasePin**。</span><span class="sxs-lookup"><span data-stu-id="e4a81-136">This class derives from **CBasePin**.</span></span> |
| [<span data-ttu-id="e4a81-137">**CBaseOutputPin**</span><span class="sxs-lookup"><span data-stu-id="e4a81-137">**CBaseOutputPin**</span></span>](cbaseoutputpin.md) | <span data-ttu-id="e4a81-138">使用 **IMemInputPin** 連接之輸出圖釘的基類。</span><span class="sxs-lookup"><span data-stu-id="e4a81-138">Base class for output pins that use **IMemInputPin** connections.</span></span> <span data-ttu-id="e4a81-139">這個類別衍生自 **CBasePin**。</span><span class="sxs-lookup"><span data-stu-id="e4a81-139">This class derives from **CBasePin**.</span></span>                                                         |



 

<span data-ttu-id="e4a81-140">下列類別適用于建立更特製化的篩選類型：</span><span class="sxs-lookup"><span data-stu-id="e4a81-140">The following classes are useful for creating more specialized types of filters:</span></span>



| <span data-ttu-id="e4a81-141">類別</span><span class="sxs-lookup"><span data-stu-id="e4a81-141">Class</span></span>                                                  | <span data-ttu-id="e4a81-142">描述</span><span class="sxs-lookup"><span data-stu-id="e4a81-142">Description</span></span>                                                                                                                                                                                                                                                                                               |
|--------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="e4a81-143">**CSource**</span><span class="sxs-lookup"><span data-stu-id="e4a81-143">**CSource**</span></span>](csource.md)                             | <span data-ttu-id="e4a81-144">來源篩選準則的基類。</span><span class="sxs-lookup"><span data-stu-id="e4a81-144">Base class for source filters.</span></span> <span data-ttu-id="e4a81-145">這個類別是專為建立推播來源所設計。</span><span class="sxs-lookup"><span data-stu-id="e4a81-145">This class is designed for creating push sources.</span></span> <span data-ttu-id="e4a81-146">它不適合提取來源，例如檔案讀取器。</span><span class="sxs-lookup"><span data-stu-id="e4a81-146">It is not suitable for pull sources, such as file readers.</span></span> <span data-ttu-id="e4a81-147">若要建立此類別的輸出針腳，請使用 [**CSourceStream**](csourcestream.md) 類別。</span><span class="sxs-lookup"><span data-stu-id="e4a81-147">To create output pins for this class, use the [**CSourceStream**](csourcestream.md) class.</span></span>                                                                   |
| [<span data-ttu-id="e4a81-148">**CTransformFilter**</span><span class="sxs-lookup"><span data-stu-id="e4a81-148">**CTransformFilter**</span></span>](ctransformfilter.md)           | <span data-ttu-id="e4a81-149">轉換篩選準則的基類。</span><span class="sxs-lookup"><span data-stu-id="e4a81-149">Base class for transform filters.</span></span> <span data-ttu-id="e4a81-150">此類別會在資料上執行複製。</span><span class="sxs-lookup"><span data-stu-id="e4a81-150">This class performs a copy on the data.</span></span> <span data-ttu-id="e4a81-151">此類別的釘選為 [**CTransformInputPin**](ctransforminputpin.md) 和 [**CTransformOutputPin**](ctransformoutputpin.md)。</span><span class="sxs-lookup"><span data-stu-id="e4a81-151">The pins for this class are [**CTransformInputPin**](ctransforminputpin.md) and [**CTransformOutputPin**](ctransformoutputpin.md).</span></span>                                                                                            |
| [<span data-ttu-id="e4a81-152">**CTransInPlaceFilter**</span><span class="sxs-lookup"><span data-stu-id="e4a81-152">**CTransInPlaceFilter**</span></span>](ctransinplacefilter.md)     | <span data-ttu-id="e4a81-153">不復制資料之轉換篩選準則的基類。</span><span class="sxs-lookup"><span data-stu-id="e4a81-153">Base class for transform filters that do not copy data.</span></span> <span data-ttu-id="e4a81-154">此類別會直接在輸入資料上執行資料處理，再將其傳遞至下游。</span><span class="sxs-lookup"><span data-stu-id="e4a81-154">This class performs the data processing directly on the input data before passing it downstream.</span></span> <span data-ttu-id="e4a81-155">此類別的釘選為 [**CTransInPlaceInputPin**](ctransinplaceinputpin.md) 和 [**CTransInPlaceOutputPin**](ctransinplaceoutputpin.md)。</span><span class="sxs-lookup"><span data-stu-id="e4a81-155">The pins for this class are [**CTransInPlaceInputPin**](ctransinplaceinputpin.md) and [**CTransInPlaceOutputPin**](ctransinplaceoutputpin.md).</span></span> |
| [<span data-ttu-id="e4a81-156">**CVideoTransformFilter**</span><span class="sxs-lookup"><span data-stu-id="e4a81-156">**CVideoTransformFilter**</span></span>](cvideotransformfilter.md) | <span data-ttu-id="e4a81-157">影片轉換篩選準則的基類。</span><span class="sxs-lookup"><span data-stu-id="e4a81-157">Base class for video transform filters.</span></span> <span data-ttu-id="e4a81-158">這個類別衍生自 **CTransformFilter** ，並加入品質控制的支援。</span><span class="sxs-lookup"><span data-stu-id="e4a81-158">This class derives from **CTransformFilter** and adds support for quality control.</span></span>                                                                                                                                                                                |
| [<span data-ttu-id="e4a81-159">**CBaseRenderer**</span><span class="sxs-lookup"><span data-stu-id="e4a81-159">**CBaseRenderer**</span></span>](cbaserenderer.md)                 | <span data-ttu-id="e4a81-160">轉譯器篩選的基類。</span><span class="sxs-lookup"><span data-stu-id="e4a81-160">Base class for renderer filters.</span></span> <span data-ttu-id="e4a81-161">此類別的輸入 pin 碼為 [**CRendererInputPin**](crendererinputpin.md)。</span><span class="sxs-lookup"><span data-stu-id="e4a81-161">The input pin for this class is [**CRendererInputPin**](crendererinputpin.md).</span></span>                                                                                                                                                                                          |
| [<span data-ttu-id="e4a81-162">**CBaseVideoRenderer**</span><span class="sxs-lookup"><span data-stu-id="e4a81-162">**CBaseVideoRenderer**</span></span>](cbasevideorenderer.md)       | <span data-ttu-id="e4a81-163">影片轉譯器的基類。</span><span class="sxs-lookup"><span data-stu-id="e4a81-163">Base class for video renderers.</span></span> <span data-ttu-id="e4a81-164">這個類別衍生自 **CBaseRenderer**。</span><span class="sxs-lookup"><span data-stu-id="e4a81-164">This class derives from **CBaseRenderer**.</span></span>                                                                                                                                                                                                                                |



 

<span data-ttu-id="e4a81-165">若要使用這些類別，您必須衍生自己的類別，並撰寫程式碼以支援您篩選準則的特定功能。</span><span class="sxs-lookup"><span data-stu-id="e4a81-165">To use these classes, you must derive your own class and write code to support the functionality that is specific to your filter.</span></span> <span data-ttu-id="e4a81-166">基類越特製化，您需要在衍生類別中撰寫的程式碼就越少。</span><span class="sxs-lookup"><span data-stu-id="e4a81-166">The more specialized the base class, the less code you will need to write in your derived class.</span></span>

<span data-ttu-id="e4a81-167">**Helper 物件**</span><span class="sxs-lookup"><span data-stu-id="e4a81-167">**Helper Objects**</span></span>

<span data-ttu-id="e4a81-168">下列類別會執行篩選器和釘選所使用的協助程式物件。</span><span class="sxs-lookup"><span data-stu-id="e4a81-168">The following classes implement helper objects that are used by filters and pins.</span></span> <span data-ttu-id="e4a81-169">您可以使用這些類別，而不需要從這些類別衍生新的類別：</span><span class="sxs-lookup"><span data-stu-id="e4a81-169">Most of these classes can be used without deriving new classes from them:</span></span>



| <span data-ttu-id="e4a81-170">類別</span><span class="sxs-lookup"><span data-stu-id="e4a81-170">Class</span></span>                                              | <span data-ttu-id="e4a81-171">描述</span><span class="sxs-lookup"><span data-stu-id="e4a81-171">Description</span></span>                                                                                                                                                        |
|----------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="e4a81-172">**CPullPin**</span><span class="sxs-lookup"><span data-stu-id="e4a81-172">**CPullPin**</span></span>](cpullpin.md)                       | <span data-ttu-id="e4a81-173">剖析器篩選器上輸入 pin 的 Helper 物件。</span><span class="sxs-lookup"><span data-stu-id="e4a81-173">Helper object for input pins on parser filters.</span></span> <span data-ttu-id="e4a81-174">支援使用提取來源的 [**IAsyncReader**](/windows/desktop/api/Strmif/nn-strmif-iasyncreader) 連接。</span><span class="sxs-lookup"><span data-stu-id="e4a81-174">Supports [**IAsyncReader**](/windows/desktop/api/Strmif/nn-strmif-iasyncreader) connections with pull sources.</span></span>                                       |
| [<span data-ttu-id="e4a81-175">**COutputQueue**</span><span class="sxs-lookup"><span data-stu-id="e4a81-175">**COutputQueue**</span></span>](coutputqueue.md)               | <span data-ttu-id="e4a81-176">輸出圖釘的 Helper 物件，可在背景工作執行緒上將傳遞範例排入佇列。</span><span class="sxs-lookup"><span data-stu-id="e4a81-176">Helper object for output pins that queue samples for delivery on a worker thread.</span></span>                                                                                  |
| [<span data-ttu-id="e4a81-177">**CSourceSeeking**</span><span class="sxs-lookup"><span data-stu-id="e4a81-177">**CSourceSeeking**</span></span>](csourceseeking.md)           | <span data-ttu-id="e4a81-178">用來在來源篩選器上執行搜尋的說明物件，只需一個輸出圖釘。</span><span class="sxs-lookup"><span data-stu-id="e4a81-178">Help object for implementing seeking on a source filter with exactly one output pin.</span></span> <span data-ttu-id="e4a81-179"> (此類別不是針對具有多個 pin 的篩選而設計，例如剖析器。 ) </span><span class="sxs-lookup"><span data-stu-id="e4a81-179">(This class is not designed for filters with multiple pins, such as parsers.)</span></span> |
| [<span data-ttu-id="e4a81-180">**CEnumPins**</span><span class="sxs-lookup"><span data-stu-id="e4a81-180">**CEnumPins**</span></span>](cenumpins.md)                     | <span data-ttu-id="e4a81-181">列舉篩選上的釘選的列舉值物件。</span><span class="sxs-lookup"><span data-stu-id="e4a81-181">Enumerator object for enumerating pins on a filter.</span></span> <span data-ttu-id="e4a81-182">實行 [**IEnumPins**](/windows/desktop/api/Strmif/nn-strmif-ienumpins) 介面。</span><span class="sxs-lookup"><span data-stu-id="e4a81-182">Implements the [**IEnumPins**](/windows/desktop/api/Strmif/nn-strmif-ienumpins) interface.</span></span>                                                       |
| [<span data-ttu-id="e4a81-183">**CEnumMediaTypes**</span><span class="sxs-lookup"><span data-stu-id="e4a81-183">**CEnumMediaTypes**</span></span>](cenummediatypes.md)         | <span data-ttu-id="e4a81-184">列舉 pin 上慣用媒體類型的列舉值物件。</span><span class="sxs-lookup"><span data-stu-id="e4a81-184">Enumerator object for enumerating preferred media types on a pin.</span></span> <span data-ttu-id="e4a81-185">實行 [**IEnumMediaTypes**](/windows/desktop/api/Strmif/nn-strmif-ienummediatypes) 介面。</span><span class="sxs-lookup"><span data-stu-id="e4a81-185">Implements the [**IEnumMediaTypes**](/windows/desktop/api/Strmif/nn-strmif-ienummediatypes) interface.</span></span>                             |
| [<span data-ttu-id="e4a81-186">**CMemAllocator**</span><span class="sxs-lookup"><span data-stu-id="e4a81-186">**CMemAllocator**</span></span>](cmemallocator.md)             | <span data-ttu-id="e4a81-187">記憶體配置器物件。</span><span class="sxs-lookup"><span data-stu-id="e4a81-187">Memory allocator object.</span></span> <span data-ttu-id="e4a81-188">實行 [**IMemAllocator**](/windows/desktop/api/Strmif/nn-strmif-imemallocator) 介面。</span><span class="sxs-lookup"><span data-stu-id="e4a81-188">Implements the [**IMemAllocator**](/windows/desktop/api/Strmif/nn-strmif-imemallocator) interface.</span></span>                                                                          |
| [<span data-ttu-id="e4a81-189">**CMediaSample**</span><span class="sxs-lookup"><span data-stu-id="e4a81-189">**CMediaSample**</span></span>](cmediasample.md)               | <span data-ttu-id="e4a81-190">媒體範例物件。</span><span class="sxs-lookup"><span data-stu-id="e4a81-190">Media sample object.</span></span> <span data-ttu-id="e4a81-191">實行 [**IMediaSample2**](/windows/desktop/api/Strmif/nn-strmif-imediasample2) 介面。</span><span class="sxs-lookup"><span data-stu-id="e4a81-191">Implements the [**IMediaSample2**](/windows/desktop/api/Strmif/nn-strmif-imediasample2) interface.</span></span>                                                                              |
| [<span data-ttu-id="e4a81-192">**CBaseReferenceClock**</span><span class="sxs-lookup"><span data-stu-id="e4a81-192">**CBaseReferenceClock**</span></span>](cbasereferenceclock.md) | <span data-ttu-id="e4a81-193">參考時鐘的基類。</span><span class="sxs-lookup"><span data-stu-id="e4a81-193">Base class for reference clocks.</span></span> <span data-ttu-id="e4a81-194">實行 [**IReferenceClock**](/windows/desktop/api/Strmif/nn-strmif-ireferenceclock) 介面。</span><span class="sxs-lookup"><span data-stu-id="e4a81-194">Implements the [**IReferenceClock**](/windows/desktop/api/Strmif/nn-strmif-ireferenceclock) interface.</span></span>                                                              |
| [<span data-ttu-id="e4a81-195">**CMediaType**</span><span class="sxs-lookup"><span data-stu-id="e4a81-195">**CMediaType**</span></span>](cmediatype.md)                   | <span data-ttu-id="e4a81-196">用於操作 [**\_ 媒體 \_ 類型**](/windows/win32/api/strmif/ns-strmif-am_media_type) 結構的 Helper 物件。</span><span class="sxs-lookup"><span data-stu-id="e4a81-196">Helper object for manipulating [**AM\_MEDIA\_TYPE**](/windows/win32/api/strmif/ns-strmif-am_media_type) structures.</span></span>                                                                                |



 

 

 



