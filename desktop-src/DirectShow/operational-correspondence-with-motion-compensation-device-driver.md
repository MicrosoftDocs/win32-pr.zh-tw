---
description: 與動作補償設備磁碟機的操作對應
ms.assetid: bd92a0f4-98d9-497a-99b9-0cf432347daf
title: 與動作補償設備磁碟機的操作對應
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5cca960ed8cbdae212bbe5e9f3b25316125a7456
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/06/2021
ms.locfileid: "104187437"
---
# <a name="operational-correspondence-with-motion-compensation-device-driver"></a><span data-ttu-id="5a19a-103">與動作補償設備磁碟機的操作對應</span><span class="sxs-lookup"><span data-stu-id="5a19a-103">Operational Correspondence with Motion Compensation Device Driver</span></span>

<span data-ttu-id="5a19a-104">本節包含 DirectX VA 介面之動作補償設備磁碟機端的描述。</span><span class="sxs-lookup"><span data-stu-id="5a19a-104">This section contains a description of the Motion Compensation device driver side of the DirectX VA interface.</span></span> <span data-ttu-id="5a19a-105"> (參考： Windows 2000 DDK-圖形驅動程式-設計指南-3.0 DirectDraw DDI-3.12 動作補償。</span><span class="sxs-lookup"><span data-stu-id="5a19a-105">(Reference:Windows 2000 DDK - Graphics Drivers - Design Guide - 3.0 DirectDraw DDI - 3.12 Motion Compensation.</span></span> <span data-ttu-id="5a19a-106">如需以粗體顯示的結構相關檔，請參閱 Windows DDK。 ) </span><span class="sxs-lookup"><span data-stu-id="5a19a-106">See the Windows DDK for documentation on the structures in boldface.)</span></span>

<span data-ttu-id="5a19a-107">下列專案是指透過 **DD \_ MOTIONCOMPCALLBACKS** 結構存取的專案：</span><span class="sxs-lookup"><span data-stu-id="5a19a-107">The following items refer to entries accessed through the **DD\_MOTIONCOMPCALLBACKS** structure:</span></span>

1.  <span data-ttu-id="5a19a-108">在相關的處理開始時，設備磁碟機的 **DdMoCompCreate** 會用來通知驅動程式，軟體解碼器將使用 video 加速物件開始。</span><span class="sxs-lookup"><span data-stu-id="5a19a-108">At the start of the relevant processing, the device driver's **DdMoCompCreate** is used to notify the driver that the software decoder will start using a video acceleration object.</span></span>
2.  <span data-ttu-id="5a19a-109">從 [**IAMVideoAccelerator：： GetVideoAcceleratorGUIDs**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-getvideoacceleratorguids) 收到的 guid 源自設備磁碟機的 **DdMoCompGetGUIDs**。</span><span class="sxs-lookup"><span data-stu-id="5a19a-109">GUIDs received from [**IAMVideoAccelerator::GetVideoAcceleratorGUIDs**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-getvideoacceleratorguids) originate from the device driver's **DdMoCompGetGUIDs**.</span></span>
3.  <span data-ttu-id="5a19a-110">對下游輸入 pin 的 [**IAMVideoAccelerator：： GetUncompFormatsSupported**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-getuncompformatssupported) 的呼叫會從設備磁碟機的 **DdMoCompGetFormats** 傳回資料。</span><span class="sxs-lookup"><span data-stu-id="5a19a-110">A call to the downstream input pin's [**IAMVideoAccelerator::GetUncompFormatsSupported**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-getuncompformatssupported) returns data from the device driver's **DdMoCompGetFormats**.</span></span>
4.  <span data-ttu-id="5a19a-111">\_從解碼器的 [**IAMVideoAcceleratorNotify：： GetCreateVideoAcceleratorData**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoacceleratornotify-getcreatevideoacceleratordata) DXVA ConnectMode 資料結構會傳遞至設備磁碟機的 **DdMoCompCreate**。</span><span class="sxs-lookup"><span data-stu-id="5a19a-111">The DXVA\_ConnectMode data structure from the decoder's [**IAMVideoAcceleratorNotify::GetCreateVideoAcceleratorData**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoacceleratornotify-getcreatevideoacceleratordata) is passed to the device driver's **DdMoCompCreate**.</span></span>
5.  <span data-ttu-id="5a19a-112">從 [**IAMVideoAccelerator：： GetCompBufferInfo**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-getcompbufferinfo) 傳回的資料來源自設備磁碟機的 **DdMoCompGetBuffInfo**。</span><span class="sxs-lookup"><span data-stu-id="5a19a-112">Data returned from [**IAMVideoAccelerator::GetCompBufferInfo**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-getcompbufferinfo) originates from the device driver's **DdMoCompGetBuffInfo**.</span></span>
6.  <span data-ttu-id="5a19a-113">使用 [**IAMVideoAccelerator：： Execute**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-execute) 傳送的緩衝區是由設備磁碟機的 **DdMoCompRender** 所接收。</span><span class="sxs-lookup"><span data-stu-id="5a19a-113">Buffers sent using [**IAMVideoAccelerator::Execute**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-execute) are received by the device driver's **DdMoCompRender**.</span></span>
7.  <span data-ttu-id="5a19a-114">使用 [**IAMVideoAccelerator：： QueryRenderStatus**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-queryrenderstatus) 會叫用設備磁碟機的 **DdMoCompQueryStatus**。</span><span class="sxs-lookup"><span data-stu-id="5a19a-114">Use of [**IAMVideoAccelerator::QueryRenderStatus**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-queryrenderstatus) invokes the device driver's **DdMoCompQueryStatus**.</span></span> <span data-ttu-id="5a19a-115">\_主機解碼器會看到來自 DdMoCompQueryStatus 的 DDERR WASSTILLDRAWING 傳回碼，作為 \_ **IAMVideoAccelerator：： QueryRenderStatus** 暫止之 E 的傳回碼。</span><span class="sxs-lookup"><span data-stu-id="5a19a-115">A return code of DDERR\_WASSTILLDRAWING from DdMoCompQueryStatus will be seen by the host decoder as a return code of E\_PENDING from **IAMVideoAccelerator::QueryRenderStatus**.</span></span>
8.  <span data-ttu-id="5a19a-116">傳送至 [**IAMVideoAccelerator：： BeginFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-beginframe) 的資料是由設備磁碟機的 **DdMoCompBeginFrame** 所接收。</span><span class="sxs-lookup"><span data-stu-id="5a19a-116">Data sent to [**IAMVideoAccelerator::BeginFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-beginframe) are received by the device driver's **DdMoCompBeginFrame**.</span></span> <span data-ttu-id="5a19a-117">DdMoCompBeginFrame 需要有 E 暫止的傳回碼，才能 \_ 讓 \_ 主機解碼器看到 e 暫止，以回應 **IAMVideoAccelerator：： BeginFrame**。</span><span class="sxs-lookup"><span data-stu-id="5a19a-117">A return code of E\_PENDING is needed from DdMoCompBeginFrame in order for E\_PENDING to be seen by the host decoder in response to **IAMVideoAccelerator::BeginFrame**.</span></span>
9.  <span data-ttu-id="5a19a-118">傳送至 [**IAMVideoAccelerator：： EndFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-endframe) 的資料是由設備磁碟機的 **DdMoCompEndFrame** 所接收。</span><span class="sxs-lookup"><span data-stu-id="5a19a-118">Data sent to [**IAMVideoAccelerator::EndFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-endframe) are received by the device driver's **DdMoCompEndFrame**.</span></span>
10. <span data-ttu-id="5a19a-119">在相關的處理結束時，設備磁碟機的 **DdMoCompDestroy** 會用來通知驅動程式，將不再使用目前的影片加速物件，讓驅動程式可以執行任何必要的清除。</span><span class="sxs-lookup"><span data-stu-id="5a19a-119">At the end of the relevant processing, the device driver's **DdMoCompDestroy** is used to notify the driver that the current video acceleration object will no longer be used, so that the driver can perform any necessary cleanup.</span></span>

 

 



