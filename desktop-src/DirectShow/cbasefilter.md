---
description: CBaseFilter 類別是用來執行篩選的抽象類別。
ms.assetid: 4610c8d6-9d7d-47ca-b1d5-0a867153a5f6
title: 'CBaseFilter 類別 (Amfilter) '
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- APIRef
- kbSyntax
api_name:
- CBaseFilter
api_type:
- COM
api_location:
- Strmbase.lib
- Strmbase.dll
- Strmbasd.lib
- Strmbasd.dll
ms.openlocfilehash: fe032d0614b1067c9351b643d457a718b4917a8b
ms.sourcegitcommit: c8ec1ded1ffffc364d3c4f560bb2171da0dc5040
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 03/22/2021
ms.locfileid: "106993523"
---
# <a name="cbasefilter-class"></a><span data-ttu-id="9e4a2-103">CBaseFilter 類別</span><span class="sxs-lookup"><span data-stu-id="9e4a2-103">CBaseFilter class</span></span>

![cbasefilter 類別階層](images/filter01.png)

<span data-ttu-id="9e4a2-105">`CBaseFilter`類別是用來執行篩選的抽象類別。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-105">The `CBaseFilter` class is an abstract class for implementing filters.</span></span> <span data-ttu-id="9e4a2-106">若要使用這個類別來執行篩選，您必須至少執行下列步驟：</span><span class="sxs-lookup"><span data-stu-id="9e4a2-106">To implement a filter using this class, you must perform at least the following steps:</span></span>

-   <span data-ttu-id="9e4a2-107">從衍生新的類別 `CBaseFilter` 。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-107">Derive a new class from `CBaseFilter`.</span></span>
-   <span data-ttu-id="9e4a2-108">包含定義篩選準則之圖釘的成員變數。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-108">Include member variables that define the pins on the filter.</span></span> <span data-ttu-id="9e4a2-109">Pin 必須繼承自 [**CBasePin**](cbasepin.md) 類別。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-109">The pins must inherit from the [**CBasePin**](cbasepin.md) class.</span></span>
-   <span data-ttu-id="9e4a2-110">覆寫純虛擬方法 [**CBaseFilter：： GetPin**](cbasefilter-getpin.md)，它會在篩選上抓取圖釘。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-110">Override the pure virtual method [**CBaseFilter::GetPin**](cbasefilter-getpin.md), which retrieves pins on the filter.</span></span>
-   <span data-ttu-id="9e4a2-111">覆寫單純的虛擬方法 [**CBaseFilter：： GetPinCount**](cbasefilter-getpincount.md)，以抓取釘選數目。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-111">Override the pure virtual method [**CBaseFilter::GetPinCount**](cbasefilter-getpincount.md), which retrieves the number of pins.</span></span>
-   <span data-ttu-id="9e4a2-112">提供用來產生、處理或轉譯媒體範例的方法。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-112">Provide methods for generating, processing, or rendering media samples.</span></span>

<span data-ttu-id="9e4a2-113">有幾個基類衍生自 `CBaseFilter` ，包括 [**CSource**](csource.md)、 [**CBaseRenderer**](cbaserenderer.md)和 [**CTransformFilter**](ctransformfilter.md)。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-113">Several base classes derive from `CBaseFilter`, including [**CSource**](csource.md), [**CBaseRenderer**](cbaserenderer.md), and [**CTransformFilter**](ctransformfilter.md).</span></span> <span data-ttu-id="9e4a2-114">使用其中一個特製化類別來執行篩選通常會更輕鬆，而不是 `CBaseFilter` 直接使用。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-114">It is usually easier to implement a filter with one of these specialized classes, rather than use `CBaseFilter` directly.</span></span>



| <span data-ttu-id="9e4a2-115">受保護的成員變數</span><span class="sxs-lookup"><span data-stu-id="9e4a2-115">Protected Member Variables</span></span>                                     | <span data-ttu-id="9e4a2-116">Description</span><span class="sxs-lookup"><span data-stu-id="9e4a2-116">Description</span></span>                                                                                        |
|----------------------------------------------------------------|----------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="9e4a2-117">**m \_ 狀態**</span><span class="sxs-lookup"><span data-stu-id="9e4a2-117">**m\_State**</span></span>](cbasefilter-m-state.md)                        | <span data-ttu-id="9e4a2-118">篩選準則的目前狀態。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-118">Current state of the filter.</span></span>                                                                       |
| [<span data-ttu-id="9e4a2-119">**m \_ pClock**</span><span class="sxs-lookup"><span data-stu-id="9e4a2-119">**m\_pClock**</span></span>](cbasefilter-m-pclock.md)                      | <span data-ttu-id="9e4a2-120">篩選參考時鐘的指標。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-120">Pointer to the filter's reference clock.</span></span>                                                           |
| [<span data-ttu-id="9e4a2-121">**m \_ tStart**</span><span class="sxs-lookup"><span data-stu-id="9e4a2-121">**m\_tStart**</span></span>](cbasefilter-m-tstart.md)                      | <span data-ttu-id="9e4a2-122">對應于資料流程時間0的參考時間。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-122">Reference time that corresponds to stream time 0.</span></span>                                                  |
| [<span data-ttu-id="9e4a2-123">**m \_ clsid**</span><span class="sxs-lookup"><span data-stu-id="9e4a2-123">**m\_clsid**</span></span>](cbasefilter-m-clsid.md)                        | <span data-ttu-id="9e4a2-124">篩選準則 (CLSID) 的類別識別碼。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-124">Class identifier (CLSID) of the filter.</span></span>                                                            |
| [<span data-ttu-id="9e4a2-125">**m \_ pLock**</span><span class="sxs-lookup"><span data-stu-id="9e4a2-125">**m\_pLock**</span></span>](cbasefilter-m-plock.md)                        | <span data-ttu-id="9e4a2-126">用來序列化狀態變更的重要區段指標。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-126">Pointer to a critical section that is used to serialize state changes.</span></span>                             |
| [<span data-ttu-id="9e4a2-127">**m \_ pName**</span><span class="sxs-lookup"><span data-stu-id="9e4a2-127">**m\_pName**</span></span>](cbasefilter-m-pname.md)                        | <span data-ttu-id="9e4a2-128">篩選器名稱。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-128">Filter name.</span></span>                                                                                       |
| [<span data-ttu-id="9e4a2-129">**m \_ pGraph**</span><span class="sxs-lookup"><span data-stu-id="9e4a2-129">**m\_pGraph**</span></span>](cbasefilter-m-pgraph.md)                      | <span data-ttu-id="9e4a2-130">篩選圖形管理員的指標。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-130">Pointer to the filter graph manager.</span></span>                                                               |
| [<span data-ttu-id="9e4a2-131">**m \_ pSink**</span><span class="sxs-lookup"><span data-stu-id="9e4a2-131">**m\_pSink**</span></span>](cbasefilter-m-psink.md)                        | <span data-ttu-id="9e4a2-132">篩選圖形管理員上 [**IMediaEventSink**](/windows/desktop/api/Strmif/nn-strmif-imediaeventsink) 介面的指標。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-132">Pointer to the [**IMediaEventSink**](/windows/desktop/api/Strmif/nn-strmif-imediaeventsink) interface on the filter graph manager.</span></span>   |
| [<span data-ttu-id="9e4a2-133">**m \_ PinVersion**</span><span class="sxs-lookup"><span data-stu-id="9e4a2-133">**m\_PinVersion**</span></span>](cbasefilter-m-pinversion.md)              | <span data-ttu-id="9e4a2-134">此篩選器上的釘選集的目前版本。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-134">Current version of the set of pins on this filter.</span></span>                                                 |
| <span data-ttu-id="9e4a2-135">公用方法</span><span class="sxs-lookup"><span data-stu-id="9e4a2-135">Public Methods</span></span>                                                 | <span data-ttu-id="9e4a2-136">Description</span><span class="sxs-lookup"><span data-stu-id="9e4a2-136">Description</span></span>                                                                                        |
| [<span data-ttu-id="9e4a2-137">**CBaseFilter**</span><span class="sxs-lookup"><span data-stu-id="9e4a2-137">**CBaseFilter**</span></span>](cbasefilter-cbasefilter.md)                 | <span data-ttu-id="9e4a2-138">函式方法。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-138">Constructor method.</span></span>                                                                                |
| [<span data-ttu-id="9e4a2-139">**~ CBaseFilter**</span><span class="sxs-lookup"><span data-stu-id="9e4a2-139">**~ CBaseFilter**</span></span>](cbasefilter--cbasefilter.md)              | <span data-ttu-id="9e4a2-140">函式方法。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-140">Destructor method.</span></span>                                                                                 |
| [<span data-ttu-id="9e4a2-141">**StreamTime**</span><span class="sxs-lookup"><span data-stu-id="9e4a2-141">**StreamTime**</span></span>](cbasefilter-streamtime.md)                   | <span data-ttu-id="9e4a2-142">抓取目前的資料流程時間。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-142">Retrieves the current stream time.</span></span> <span data-ttu-id="9e4a2-143">虛擬。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-143">Virtual.</span></span>                                                        |
| [<span data-ttu-id="9e4a2-144">**IsActive**</span><span class="sxs-lookup"><span data-stu-id="9e4a2-144">**IsActive**</span></span>](cbasefilter-isactive.md)                       | <span data-ttu-id="9e4a2-145">判斷篩選目前是否正在使用中 (執行中或已暫停) 。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-145">Determines whether the filter is currently active (running or paused).</span></span>                             |
| [<span data-ttu-id="9e4a2-146">**IsStopped**</span><span class="sxs-lookup"><span data-stu-id="9e4a2-146">**IsStopped**</span></span>](cbasefilter-isstopped.md)                     | <span data-ttu-id="9e4a2-147">判斷篩選目前是否已停止。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-147">Determines whether the filter is currently stopped.</span></span>                                                |
| [<span data-ttu-id="9e4a2-148">**NotifyEvent**</span><span class="sxs-lookup"><span data-stu-id="9e4a2-148">**NotifyEvent**</span></span>](cbasefilter-notifyevent.md)                 | <span data-ttu-id="9e4a2-149">將事件通知傳送至篩選圖形管理員。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-149">Sends an event notification to the filter graph manager.</span></span>                                           |
| [<span data-ttu-id="9e4a2-150">**GetFilterGraph**</span><span class="sxs-lookup"><span data-stu-id="9e4a2-150">**GetFilterGraph**</span></span>](cbasefilter-getfiltergraph.md)           | <span data-ttu-id="9e4a2-151">捕獲篩選圖形管理員的指標。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-151">Retrieves a pointer to the filter graph manager.</span></span>                                                   |
| [<span data-ttu-id="9e4a2-152">**ReconnectPin**</span><span class="sxs-lookup"><span data-stu-id="9e4a2-152">**ReconnectPin**</span></span>](cbasefilter-reconnectpin.md)               | <span data-ttu-id="9e4a2-153">中斷現有的 pin 連線，並使用指定的媒體類型將它重新連接到相同的 pin。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-153">Breaks an existing pin connection and reconnects it to the same pin, using a specified media type.</span></span> |
| [<span data-ttu-id="9e4a2-154">**GetPinVersion**</span><span class="sxs-lookup"><span data-stu-id="9e4a2-154">**GetPinVersion**</span></span>](cbasefilter-getpinversion.md)             | <span data-ttu-id="9e4a2-155">抓取此篩選器集合的版本號碼。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-155">Retrieves a version number for the set of pins on this filter.</span></span> <span data-ttu-id="9e4a2-156">虛擬。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-156">Virtual.</span></span>                            |
| [<span data-ttu-id="9e4a2-157">**IncrementPinVersion**</span><span class="sxs-lookup"><span data-stu-id="9e4a2-157">**IncrementPinVersion**</span></span>](cbasefilter-incrementpinversion.md) | <span data-ttu-id="9e4a2-158">在一組 pin 上遞增版本號碼。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-158">Increments the version number on the set of pins.</span></span>                                                  |
| [<span data-ttu-id="9e4a2-159">**GetSetupData**</span><span class="sxs-lookup"><span data-stu-id="9e4a2-159">**GetSetupData**</span></span>](cbasefilter-getsetupdata.md)               | <span data-ttu-id="9e4a2-160">捕獲篩選的註冊資料。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-160">Retrieves the registration data for the filter.</span></span> <span data-ttu-id="9e4a2-161">虛擬。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-161">Virtual.</span></span>                                           |
| <span data-ttu-id="9e4a2-162">純虛擬方法</span><span class="sxs-lookup"><span data-stu-id="9e4a2-162">Pure Virtual Methods</span></span>                                           | <span data-ttu-id="9e4a2-163">Description</span><span class="sxs-lookup"><span data-stu-id="9e4a2-163">Description</span></span>                                                                                        |
| [<span data-ttu-id="9e4a2-164">**GetPinCount**</span><span class="sxs-lookup"><span data-stu-id="9e4a2-164">**GetPinCount**</span></span>](cbasefilter-getpincount.md)                 | <span data-ttu-id="9e4a2-165">抓取釘選數目。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-165">Retrieves the number of pins.</span></span>                                                                      |
| [<span data-ttu-id="9e4a2-166">**GetPin**</span><span class="sxs-lookup"><span data-stu-id="9e4a2-166">**GetPin**</span></span>](cbasefilter-getpin.md)                           | <span data-ttu-id="9e4a2-167">捕獲 pin。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-167">Retrieves a pin.</span></span>                                                                                   |
| <span data-ttu-id="9e4a2-168">IPersist 方法</span><span class="sxs-lookup"><span data-stu-id="9e4a2-168">IPersist Methods</span></span>                                               | <span data-ttu-id="9e4a2-169">Description</span><span class="sxs-lookup"><span data-stu-id="9e4a2-169">Description</span></span>                                                                                        |
| [<span data-ttu-id="9e4a2-170">**GetClassID**</span><span class="sxs-lookup"><span data-stu-id="9e4a2-170">**GetClassID**</span></span>](cbasefilter-getclassid.md)                   | <span data-ttu-id="9e4a2-171">捕獲類別識別碼。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-171">Retrieves the class identifier.</span></span>                                                                    |
| <span data-ttu-id="9e4a2-172">IMediaFilter 方法</span><span class="sxs-lookup"><span data-stu-id="9e4a2-172">IMediaFilter Methods</span></span>                                           | <span data-ttu-id="9e4a2-173">Description</span><span class="sxs-lookup"><span data-stu-id="9e4a2-173">Description</span></span>                                                                                        |
| [<span data-ttu-id="9e4a2-174">**GetState**</span><span class="sxs-lookup"><span data-stu-id="9e4a2-174">**GetState**</span></span>](cbasefilter-getstate.md)                       | <span data-ttu-id="9e4a2-175">抓取篩選器的狀態 (執行中、已停止或已暫停) 。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-175">Retrieves the filter's state (running, stopped, or paused).</span></span>                                        |
| [<span data-ttu-id="9e4a2-176">**SetSyncSource**</span><span class="sxs-lookup"><span data-stu-id="9e4a2-176">**SetSyncSource**</span></span>](cbasefilter-setsyncsource.md)             | <span data-ttu-id="9e4a2-177">設定篩選的參考時鐘。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-177">Sets a reference clock for the filter.</span></span>                                                             |
| [<span data-ttu-id="9e4a2-178">**GetSyncSource**</span><span class="sxs-lookup"><span data-stu-id="9e4a2-178">**GetSyncSource**</span></span>](cbasefilter-getsyncsource.md)             | <span data-ttu-id="9e4a2-179">抓取篩選所使用的參考時鐘。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-179">Retrieves the reference clock that the filter is using.</span></span>                                            |
| [<span data-ttu-id="9e4a2-180">**停止**</span><span class="sxs-lookup"><span data-stu-id="9e4a2-180">**Stop**</span></span>](cbasefilter-stop.md)                               | <span data-ttu-id="9e4a2-181">停止篩選。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-181">Stops the filter.</span></span>                                                                                  |
| [<span data-ttu-id="9e4a2-182">**暫停**</span><span class="sxs-lookup"><span data-stu-id="9e4a2-182">**Pause**</span></span>](cbasefilter-pause.md)                             | <span data-ttu-id="9e4a2-183">暫停篩選。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-183">Pauses the filter.</span></span>                                                                                 |
| [<span data-ttu-id="9e4a2-184">**執行**</span><span class="sxs-lookup"><span data-stu-id="9e4a2-184">**Run**</span></span>](cbasefilter-run.md)                                 | <span data-ttu-id="9e4a2-185">執行篩選。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-185">Runs the filter.</span></span>                                                                                   |
| <span data-ttu-id="9e4a2-186">IBaseFilter 方法</span><span class="sxs-lookup"><span data-stu-id="9e4a2-186">IBaseFilter Methods</span></span>                                            | <span data-ttu-id="9e4a2-187">Description</span><span class="sxs-lookup"><span data-stu-id="9e4a2-187">Description</span></span>                                                                                        |
| [<span data-ttu-id="9e4a2-188">**EnumPins**</span><span class="sxs-lookup"><span data-stu-id="9e4a2-188">**EnumPins**</span></span>](cbasefilter-enumpins.md)                       | <span data-ttu-id="9e4a2-189">列舉此篩選器上的釘選。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-189">Enumerates the pins on this filter.</span></span>                                                                |
| [<span data-ttu-id="9e4a2-190">**FindPin**</span><span class="sxs-lookup"><span data-stu-id="9e4a2-190">**FindPin**</span></span>](cbasefilter-findpin.md)                         | <span data-ttu-id="9e4a2-191">使用指定的識別碼抓取 pin。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-191">Retrieves the pin with the specified identifier.</span></span>                                                   |
| [<span data-ttu-id="9e4a2-192">**QueryFilterInfo**</span><span class="sxs-lookup"><span data-stu-id="9e4a2-192">**QueryFilterInfo**</span></span>](cbasefilter-queryfilterinfo.md)         | <span data-ttu-id="9e4a2-193">捕獲篩選的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-193">Retrieves information about the filter.</span></span>                                                            |
| [<span data-ttu-id="9e4a2-194">**JoinFilterGraph**</span><span class="sxs-lookup"><span data-stu-id="9e4a2-194">**JoinFilterGraph**</span></span>](cbasefilter-joinfiltergraph.md)         | <span data-ttu-id="9e4a2-195">通知篩選其已加入或離開篩選圖形。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-195">Notifies the filter that it has joined or left a filter graph.</span></span>                                     |
| [<span data-ttu-id="9e4a2-196">**QueryVendorInfo**</span><span class="sxs-lookup"><span data-stu-id="9e4a2-196">**QueryVendorInfo**</span></span>](cbasefilter-queryvendorinfo.md)         | <span data-ttu-id="9e4a2-197">抓取包含廠商資訊的字串。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-197">Retrieves a string containing vendor information.</span></span>                                                  |
| <span data-ttu-id="9e4a2-198">IAMovieSetup 方法</span><span class="sxs-lookup"><span data-stu-id="9e4a2-198">IAMovieSetup Methods</span></span>                                           | <span data-ttu-id="9e4a2-199">Description</span><span class="sxs-lookup"><span data-stu-id="9e4a2-199">Description</span></span>                                                                                        |
| [<span data-ttu-id="9e4a2-200">**註冊**</span><span class="sxs-lookup"><span data-stu-id="9e4a2-200">**Register**</span></span>](cbasefilter-register.md)                       | <span data-ttu-id="9e4a2-201">將篩選新增至登錄。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-201">Adds the filter to the registry.</span></span>                                                                   |
| [<span data-ttu-id="9e4a2-202">**登出**</span><span class="sxs-lookup"><span data-stu-id="9e4a2-202">**Unregister**</span></span>](cbasefilter-unregister.md)                   | <span data-ttu-id="9e4a2-203">從登錄中移除篩選。</span><span class="sxs-lookup"><span data-stu-id="9e4a2-203">Removes the filter from the registry.</span></span>                                                              |



 

## <a name="requirements"></a><span data-ttu-id="9e4a2-204">規格需求</span><span class="sxs-lookup"><span data-stu-id="9e4a2-204">Requirements</span></span>



| <span data-ttu-id="9e4a2-205">需求</span><span class="sxs-lookup"><span data-stu-id="9e4a2-205">Requirement</span></span> | <span data-ttu-id="9e4a2-206">值</span><span class="sxs-lookup"><span data-stu-id="9e4a2-206">Value</span></span> |
|--------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="9e4a2-207">標頭</span><span class="sxs-lookup"><span data-stu-id="9e4a2-207">Header</span></span><br/>  | <dl> <span data-ttu-id="9e4a2-208"><dt>Amfilter (包含： .h) </dt></span><span class="sxs-lookup"><span data-stu-id="9e4a2-208"><dt>Amfilter.h (include Streams.h)</dt></span></span> </dl>                                                                                  |
| <span data-ttu-id="9e4a2-209">程式庫</span><span class="sxs-lookup"><span data-stu-id="9e4a2-209">Library</span></span><br/> | <dl> <span data-ttu-id="9e4a2-210"><dt> (零售組建的 Strmbase .lib) ;</dt><dt>Strmbasd (debug 組建) </dt></span><span class="sxs-lookup"><span data-stu-id="9e4a2-210"><dt>Strmbase.lib (retail builds); </dt> <dt>Strmbasd.lib (debug builds)</dt></span></span> </dl> |



 

 




