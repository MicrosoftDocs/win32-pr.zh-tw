---
description: 內容需求是以傳遞給 InitializeSecurityCoNtext (一般) 或 AcceptSecurityCoNtext (一般) 函式的位旗標組合來表示。
ms.assetid: 4a44b829-4202-46c0-b17e-04943fa067ab
title: 內容需求
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 86af5f71557bdd53229b5c8ed6afc14dc24edb46
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/08/2021
ms.locfileid: "104193281"
---
# <a name="context-requirements"></a>內容需求

內容需求是以傳遞給 [**InitializeSecurityCoNtext (一般)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) 或 [**AcceptSecurityCoNtext (一般)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) 函式的位旗標組合來表示。 這些旗標會以數種方式影響 [*內容*](/windows/desktop/SecGloss/c-gly) 。 並非所有旗標都適用于所有內容。 有些只適用于伺服器，其他只適用于用戶端。

呼叫端會使用 [**InitializeSecurityCoNtext (一般)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta)的 *FCoNtextReq* 參數或 [**AcceptSecurityCoNtext (一般)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext)呼叫來指定一組表示所需功能的旗標。 當函式傳回時， *pfCoNtextAttr* 參數會指出已建立之內容的屬性。 呼叫端會判斷是否可接受最終的內容屬性。

[**InitializeSecurityCoNtext (一般)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta)所要求或傳回的旗標會以 ISC 作為前置詞。 [**AcceptSecurityCoNtext (一般)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext)所要求或傳回的要求，會前面加上 ASC。 傳遞至函式的旗標包含需求，而傳回的旗標則包含 RET。 例如，傳遞給 **InitializeSecurityCoNtext (一般)** 的雙向驗證要求旗標是 ISC 要求 \_ 的 \_ 相互 \_ 驗證。 要求相互驗證的伺服器會將 ASC 要求 \_ \_ 相互 \_ 驗證傳遞給 **AcceptSecurityCoNtext (一般)**。 如果達到相互驗證， **InitializeSecurityCoNtext (一般)** 會傳回 ISC \_ ret \_ 相互驗證 \_ 和 **ACCEPTSECURITYCONTEXT (一般)** 會傳回 ASC \_ ret \_ 相互 \_ 驗證。 如果呼叫端要求相互驗證，但 [*安全性封裝*](/windows/desktop/SecGloss/s-gly) 指出無法執行，則呼叫端必須決定是否要取消內容或繼續。

下表說明各種內容需求旗標。



| 旗標                             | 描述                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|----------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 委託<br/>              | 傳輸應用程式中的伺服器可以建立新的安全性內容，模擬用戶端將被其他伺服器接受的用戶端內容。 只有在 \_ 設定了相互驗證時，委派才能運作。 目前只有 [*Kerberos*](/windows/desktop/SecGloss/k-gly)才支援委派。 此外，Kerberos 只會委派給有旗標受信任委派的 \_ 伺服器 \_ 。 請勿將此旗標用於 [*限制委派*](/windows/desktop/SecGloss/c-gly)。<br/> |
| 相互 \_ 驗證<br/>          | 通訊方必須彼此驗證其身分識別。 如果沒有相互 \_ 驗證，用戶端會向伺服器驗證其身分識別。 透過相互 \_ 驗證，伺服器也必須向用戶端驗證其身分識別。<br/> 使用 [*安全通道*](/windows/desktop/SecGloss/s-gly)安全性套件時，伺服器只會在 [**AcceptSecurityCoNtext (協商)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext)的最後一個呼叫中，設定 **ASC \_ RET \_ 相互 \_ 驗證** 常數，之後才能順利完成憑證對應。<br/>           |
| 重新執行偵測 \_<br/>        | [*安全性封裝*](/windows/desktop/SecGloss/s-gly)會偵測重新執行的封包，並在重新執行封包時通知呼叫者。 使用此旗標表示完整性旗標所指定的所有條件。<br/>                                                                                                                                                                                                                                                                                                                      |
| 順序 \_ 偵測<br/>      | 您稍後必須透過訊息支援函式，允許內容偵測封包的順序傳遞。 使用此旗標表示完整性旗標所指定的所有條件。<br/>                                                                                                                                                                                                                                                                                                                                                                                             |
| 保密<br/>       | 內容可以使用 [**EncryptMessage (一般)**](/windows/win32/api/sspi/nf-sspi-encryptmessage) 和 [**DecryptMessage (一般)**](/windows/win32/api/sspi/nf-sspi-decryptmessage) 函式，來保護傳輸中的資料。 如果為來賓帳戶產生的內容，則機密性旗標無法運作。<br/>                                                                                                                                                                                                                                                                                                      |
| 使用 \_ 會話 \_ 金鑰<br/>     | 必須協商新的 [*工作階段金鑰*](/windows/desktop/SecGloss/s-gly) 。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 提示 \_ 輸入 \_ 認證<br/>    | 如果用戶端是互動式使用者，則安全性套件必須盡可能提示使用者提供適當的 [*認證*](/windows/desktop/SecGloss/c-gly)。<br/>                                                                                                                                                                                                                                                                                                                                                                                          |
| 使用 \_ 提供的認證 \_<br/>  | 封裝特定的認證資訊可在輸入緩衝區中取得。 安全性封裝可以使用這些 [*認證*](/windows/desktop/SecGloss/c-gly) 來驗證連接。<br/>                                                                                                                                                                                                                                                                                                                                                                |
| 儲存 \_ 提供的認證 \_<br/> | 提供的認證應使用補充認證進行快取。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| 配置 \_ 記憶體<br/>      | [*安全性封裝*](/windows/desktop/SecGloss/s-gly)必須配置記憶體。 呼叫端最後必須呼叫 [**FreeCoNtextBuffer**](/windows/desktop/api/Sspi/nf-sspi-freecontextbuffer) 函式，以釋放安全性封裝所配置的記憶體。<br/>                                                                                                                                                                                                                                                                                                                      |
| 使用 \_ DCE \_ 樣式<br/>       | 呼叫端需要三階段驗證 [*交易*](/windows/desktop/SecGloss/t-gly)。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 傳送<br/>              | 必須使用 [*資料包*](/windows/desktop/SecGloss/d-gly)語義。 如需詳細資訊，請參閱 [資料包環境](datagram-contexts.md)。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                        |
| CONNECTION<br/>            | 必須使用連接語義。 如需詳細資訊，請參閱 [連線導向的](connection-oriented-contexts.md)內容。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| 資料流<br/>                | 必須使用資料流程語義。 如需詳細資訊，請參閱 [資料流程](stream-contexts.md)內容。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 擴充 \_ 錯誤<br/>       | 如果內容失敗，就必須產生對等的錯誤回復訊息。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 誠信<br/>             | 緩衝區完整性可進行驗證，但不會啟用排序或回復偵測。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| 無 \_ 完整性<br/>         | 已忽略 **完整性** 需求。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 識別<br/>              | 當伺服器模擬已設定此旗標的內容時，該模擬會產生極有限的存取權。 使用識別集的模擬是用來驗證用戶端的身分識別。<br/>                                                                                                                                                                                                                                                                                                                                                                                                       |



 

 

