---
description: Microsoft Digest 的挑戰是由伺服器對 AcceptSecurityCoNtext (Digest) 函數的初始呼叫所產生。
ms.assetid: d33383c2-5c0d-401f-ab28-2a985f6508e0
title: 產生摘要挑戰
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 511ec4f01c90acf08669835f9728cc711dfd1023
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/08/2021
ms.locfileid: "104194524"
---
# <a name="generating-the-digest-challenge"></a><span data-ttu-id="15ba0-103">產生摘要挑戰</span><span class="sxs-lookup"><span data-stu-id="15ba0-103">Generating the Digest Challenge</span></span>

<span data-ttu-id="15ba0-104">Microsoft Digest 的挑戰是由伺服器對 [**AcceptSecurityCoNtext (Digest)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) 函數的初始呼叫所產生。</span><span class="sxs-lookup"><span data-stu-id="15ba0-104">The Microsoft Digest challenge is generated by the server's initial call to the [**AcceptSecurityContext (Digest)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) function.</span></span> <span data-ttu-id="15ba0-105">此函式呼叫會產生 nonce，這是唯一的值，其中包含可用來偵測安全性違規的資訊。</span><span class="sxs-lookup"><span data-stu-id="15ba0-105">This function call generates a nonce, which is a unique value that contains information that can be used to detect security violations.</span></span> <span data-ttu-id="15ba0-106">此呼叫也會產生用來維護狀態資訊的部分 [*安全性內容*](/windows/desktop/SecGloss/s-gly) 。</span><span class="sxs-lookup"><span data-stu-id="15ba0-106">This call also generates a partial [*security context*](/windows/desktop/SecGloss/s-gly) which is used to maintain state information.</span></span> <span data-ttu-id="15ba0-107">呼叫 **AcceptSecurityCoNtext (Digest 時)** 您指定內容需求旗標來控制 Microsoft Digest 的行為，以及設定保護的品質。</span><span class="sxs-lookup"><span data-stu-id="15ba0-107">When calling **AcceptSecurityContext (Digest)** you specify context requirements flags to control the behavior of Microsoft Digest and to set the quality of protection.</span></span> <span data-ttu-id="15ba0-108">如需詳細資訊，請參閱 [摘要挑戰內容需求](#digest-challenge-context-requirements)。</span><span class="sxs-lookup"><span data-stu-id="15ba0-108">For more information, see [Digest Challenge Context Requirements](#digest-challenge-context-requirements).</span></span>

<span data-ttu-id="15ba0-109">[**AcceptSecurityCoNtext (Digest)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext)函式初始呼叫的輸出是包含權杖的安全性緩衝區，[*它會使用*](/windows/desktop/SecGloss/c-gly)HTTP 401 回應傳送給用戶端， (拒絕存取) 。</span><span class="sxs-lookup"><span data-stu-id="15ba0-109">The output from the initial call to the [**AcceptSecurityContext (Digest)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) [*function*](/windows/desktop/SecGloss/c-gly) is a security buffer that contains a token that is sent to the client with an HTTP 401 response (Access Denied).</span></span>

> [!Note]  
> <span data-ttu-id="15ba0-110">在輸入緩衝區中不含資訊的 [**AcceptSecurityCoNtext (摘要)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) 的呼叫會傳回摘要挑戰。</span><span class="sxs-lookup"><span data-stu-id="15ba0-110">Calls to [**AcceptSecurityContext (Digest)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) that do not contain information in the input buffers return a Digest challenge.</span></span>

 

## <a name="digest-challenge-context-requirements"></a><span data-ttu-id="15ba0-111">摘要挑戰內容需求</span><span class="sxs-lookup"><span data-stu-id="15ba0-111">Digest Challenge Context Requirements</span></span>

<span data-ttu-id="15ba0-112">內容需求是決定下列事項的旗標：</span><span class="sxs-lookup"><span data-stu-id="15ba0-112">Context requirements are flags that determine:</span></span>

-   <span data-ttu-id="15ba0-113">Microsoft Digest 是否做為 SASL 機制或 HTTP 驗證通訊協定。</span><span class="sxs-lookup"><span data-stu-id="15ba0-113">Whether Microsoft Digest functions as a SASL mechanism or HTTP authentication protocol.</span></span>
-   <span data-ttu-id="15ba0-114">用戶端和伺服器所共用的安全性內容所支援的保護品質。</span><span class="sxs-lookup"><span data-stu-id="15ba0-114">The quality of protection supported by the security context shared by the client and server.</span></span>

<span data-ttu-id="15ba0-115">根據預設，Microsoft Digest 會作為 SASL 機制。</span><span class="sxs-lookup"><span data-stu-id="15ba0-115">By default, Microsoft Digest functions as a SASL mechanism.</span></span> <span data-ttu-id="15ba0-116">若要將它用於 HTTP 驗證，則 \_ \_ 必須由伺服器設定 ASC 需求 HTTP ( 0x10000000) 旗標。</span><span class="sxs-lookup"><span data-stu-id="15ba0-116">To use it for HTTP authentication, the ASC\_REQ\_HTTP ( 0x10000000) flag must be set by the server.</span></span>

<span data-ttu-id="15ba0-117">內容需求會指定為傳遞給 [**AcceptSecurityCoNtext (Digest)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext)函數之 *fCoNtextReq* 參數的旗標。</span><span class="sxs-lookup"><span data-stu-id="15ba0-117">Context requirements are specified as flags passed to the *fContextReq* parameter of the [**AcceptSecurityContext (Digest)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) function.</span></span> <span data-ttu-id="15ba0-118">旗標會藉由控制挑戰中的 qop 指示詞，來影響安全性內容的保護品質。</span><span class="sxs-lookup"><span data-stu-id="15ba0-118">The flags affect the security context's quality of protection by controlling the qop directive in the challenge.</span></span>

<span data-ttu-id="15ba0-119">根據預設，qop 指示詞會設定為 "auth"。</span><span class="sxs-lookup"><span data-stu-id="15ba0-119">By default, the qop directive is set to "auth".</span></span> <span data-ttu-id="15ba0-120">若要產生將 qop 指示詞設定為 "auth-int" 的挑戰，伺服器必須指定下列一或多個旗標：</span><span class="sxs-lookup"><span data-stu-id="15ba0-120">To generate a challenge that sets the qop directive to "auth-int", the server must specify one or more of the following flags:</span></span>

-   <span data-ttu-id="15ba0-121">ASC \_ 需求 \_ 完整性</span><span class="sxs-lookup"><span data-stu-id="15ba0-121">ASC\_REQ\_INTEGRITY</span></span>
-   <span data-ttu-id="15ba0-122">ASC 要求重新執行偵測 \_ \_ \_</span><span class="sxs-lookup"><span data-stu-id="15ba0-122">ASC\_REQ\_REPLAY\_DETECT</span></span>
-   <span data-ttu-id="15ba0-123">ASC \_ 需求 \_ 序列 \_ 偵測</span><span class="sxs-lookup"><span data-stu-id="15ba0-123">ASC\_REQ\_SEQUENCE\_DETECT</span></span>

<span data-ttu-id="15ba0-124">僅限 SASL：藉由指定 ASC \_ \_ 要求機密性內容需求旗標，以將 qop 指示詞設定為 "auth" 來產生挑戰。</span><span class="sxs-lookup"><span data-stu-id="15ba0-124">For SASL only: Generate a challenge with the qop directive set to "auth-conf" by specifying the ASC\_REQ\_CONFIDENTIALITY context requirement flag.</span></span> <span data-ttu-id="15ba0-125">因為此旗標對 HTTP 驗證無效，所以無法搭配 ASC 要求 \_ HTTP 旗標使用 \_ 。</span><span class="sxs-lookup"><span data-stu-id="15ba0-125">Because this flag is not valid for HTTP authentication, it cannot be used with the ASC\_REQ\_HTTP flag.</span></span>

<span data-ttu-id="15ba0-126">如需 qop 指示詞的詳細資訊，請參閱 [保護品質和密碼](quality-of-protection-and-ciphers.md)。</span><span class="sxs-lookup"><span data-stu-id="15ba0-126">For more information about the qop directive, see [Quality of Protection and Ciphers](quality-of-protection-and-ciphers.md).</span></span>

<span data-ttu-id="15ba0-127">如需挑戰的詳細資訊，請參閱 [摘要挑戰的內容](contents-of-a-digest-challenge.md)。</span><span class="sxs-lookup"><span data-stu-id="15ba0-127">For more information about challenges, see [Contents of a Digest Challenge](contents-of-a-digest-challenge.md).</span></span>

 

 
