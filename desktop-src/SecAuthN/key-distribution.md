---
description: 秘密金鑰驗證技術並不會說明用戶端和伺服器如何取得秘密工作階段金鑰，以在會話中使用。
ms.assetid: 90ab0359-5079-49e9-809c-0c0005cc61bf
title: 金鑰散發
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9f04a2968e8b7b978bc7b325d65b4a2acf08e1f6
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/08/2021
ms.locfileid: "103693315"
---
# <a name="key-distribution"></a><span data-ttu-id="62fdd-103">金鑰散發</span><span class="sxs-lookup"><span data-stu-id="62fdd-103">Key Distribution</span></span>

<span data-ttu-id="62fdd-104">秘密金鑰驗證技術並不會說明用戶端和伺服器如何取得秘密 [*工作階段金鑰*](../secgloss/s-gly.md) ，以在會話中使用。</span><span class="sxs-lookup"><span data-stu-id="62fdd-104">The secret key authentication technique does not explain how the client and server get the secret [*session key*](../secgloss/s-gly.md) to use in sessions with each other.</span></span> <span data-ttu-id="62fdd-105">如果它們是人員，他們可能會在秘密中符合，並同意金鑰。</span><span class="sxs-lookup"><span data-stu-id="62fdd-105">If they are people, they could meet in secret and agree on the key.</span></span> <span data-ttu-id="62fdd-106">但是，如果用戶端是在工作站上執行的程式，而伺服器是在網路伺服器上執行的服務，則該方法將無法運作。</span><span class="sxs-lookup"><span data-stu-id="62fdd-106">But if the client is a program running on a workstation and the server is a service running on a network server, that method will not work.</span></span>

<span data-ttu-id="62fdd-107">用戶端會想要與許多伺服器通訊，而且每個伺服器都需要不同的金鑰。</span><span class="sxs-lookup"><span data-stu-id="62fdd-107">A client will want to communicate with many servers and will need different keys for each of them.</span></span> <span data-ttu-id="62fdd-108">伺服器會與許多用戶端通訊，而且每個用戶端也需要不同的金鑰。</span><span class="sxs-lookup"><span data-stu-id="62fdd-108">A server communicates with many clients and needs different keys for each of them, as well.</span></span> <span data-ttu-id="62fdd-109">如果每個用戶端的每一部伺服器都需要不同的金鑰，且每部伺服器的每個用戶端都需要不同的金鑰，則金鑰散發會變成問題。</span><span class="sxs-lookup"><span data-stu-id="62fdd-109">If each client needs a different key for every server, and each server needs a different key for every client, key distribution becomes a problem.</span></span> <span data-ttu-id="62fdd-110">此外，在許多電腦上儲存和保護許多金鑰的需求會產生巨大的安全性風險。</span><span class="sxs-lookup"><span data-stu-id="62fdd-110">In addition, the need to store and protect many keys on many computers creates an enormous security risk.</span></span>

<span data-ttu-id="62fdd-111">[*Kerberos 通訊協定*](../secgloss/k-gly.md)的名稱會建議其解決方案，以解決金鑰散發的問題。</span><span class="sxs-lookup"><span data-stu-id="62fdd-111">The name of the [*Kerberos protocol*](../secgloss/k-gly.md) suggests its solution to the problem of key distribution.</span></span> <span data-ttu-id="62fdd-112">Kerberos (或 Cerberus) 是傳統希臘文神話中的一個圖表，這是一種強力的三向狗，可讓即時入侵者進入 Underworld。</span><span class="sxs-lookup"><span data-stu-id="62fdd-112">Kerberos (or Cerberus) was a figure in classical Greek mythology—a fierce, three-headed dog who kept living intruders from entering the Underworld.</span></span> <span data-ttu-id="62fdd-113">如同測防護，Kerberos 通訊協定有三個標頭：用戶端、伺服器和受信任的協力廠商，可協調它們之間的協調。</span><span class="sxs-lookup"><span data-stu-id="62fdd-113">Like the mythical guard, the Kerberos protocol has three heads: a client, a server, and a trusted third party to mediate between them.</span></span> <span data-ttu-id="62fdd-114">此通訊協定中受信任的媒介是金鑰發佈中心 (KDC) 。</span><span class="sxs-lookup"><span data-stu-id="62fdd-114">The trusted intermediary in this protocol is the Key Distribution Center (KDC).</span></span>

<span data-ttu-id="62fdd-115">KDC 是在實際安全的伺服器上執行的服務。</span><span class="sxs-lookup"><span data-stu-id="62fdd-115">The KDC is a service running on a physically secure server.</span></span> <span data-ttu-id="62fdd-116">它會維護資料庫，其中包含其領域中所有 [*安全性主體*](../secgloss/s-gly.md) 的帳戶資訊。</span><span class="sxs-lookup"><span data-stu-id="62fdd-116">It maintains a database with account information for all [*security principals*](../secgloss/s-gly.md) in its realm.</span></span> <span data-ttu-id="62fdd-117">領域是 Windows 中網域的 Kerberos 對等專案。</span><span class="sxs-lookup"><span data-stu-id="62fdd-117">A realm is the Kerberos equivalent of a domain in Windows.</span></span>

<span data-ttu-id="62fdd-118">除了每個安全性主體的其他資訊，KDC 也會儲存僅已知于主體和 KDC 的密碼編譯金鑰。</span><span class="sxs-lookup"><span data-stu-id="62fdd-118">Along with other information about each security principal, the KDC stores a cryptographic key known only to the principal and the KDC.</span></span> <span data-ttu-id="62fdd-119">這是在每個安全性主體與 KDC 之間的交換中使用的 [*主要金鑰*](../secgloss/m-gly.md) 。</span><span class="sxs-lookup"><span data-stu-id="62fdd-119">This is the [*master key*](../secgloss/m-gly.md) used in exchanges between each security principal and the KDC.</span></span> <span data-ttu-id="62fdd-120">在 Kerberos 通訊協定的大部分執行中，此主要金鑰是使用來自安全性主體密碼的 [*雜湊*](../secgloss/h-gly.md) 函式所衍生。</span><span class="sxs-lookup"><span data-stu-id="62fdd-120">In most implementations of the Kerberos protocol, this master key is derived using a [*hash*](../secgloss/h-gly.md) function from a security principal's password.</span></span>

<span data-ttu-id="62fdd-121">當用戶端想要建立與伺服器的安全連線時，用戶端一開始會將要求傳送至 KDC，而不是傳送至它想要連線的伺服器。</span><span class="sxs-lookup"><span data-stu-id="62fdd-121">When a client wants to create a secure connection with a server, the client begins by sending a request to the KDC, not to the server that it wants to reach.</span></span> <span data-ttu-id="62fdd-122">KDC 會為用戶端建立唯一的 [*工作階段金鑰*](../secgloss/s-gly.md) ，並將其傳送給用戶端，並使用伺服器來彼此驗證。</span><span class="sxs-lookup"><span data-stu-id="62fdd-122">The KDC creates and sends to the client a unique [*session key*](../secgloss/s-gly.md) for the client and a server to use to authenticate each other.</span></span> <span data-ttu-id="62fdd-123">KDC 可以存取用戶端的主要金鑰和伺服器的主要金鑰。</span><span class="sxs-lookup"><span data-stu-id="62fdd-123">The KDC has access to both the client's master key and the server's master key.</span></span> <span data-ttu-id="62fdd-124">KDC 會使用伺服器的主要金鑰來加密伺服器的工作階段金鑰複本，並使用用戶端的主要金鑰來加密用戶端的複本。</span><span class="sxs-lookup"><span data-stu-id="62fdd-124">The KDC encrypts the server's copy of the session key using the server's master key, and the client's copy using the client's master key.</span></span>

<span data-ttu-id="62fdd-125">KDC 可以將工作階段金鑰直接傳送給相關的每個安全性主體，以將其角色視為受信任的媒介，但實際上，此程式將無法運作，原因有很多。</span><span class="sxs-lookup"><span data-stu-id="62fdd-125">The KDC could fulfill its role as trusted intermediary by sending the session key directly to each of the security principals involved, but in practice this procedure will not work, for a number of reasons.</span></span> <span data-ttu-id="62fdd-126">相反地，KDC 會將加密的工作階段金鑰傳送給用戶端。</span><span class="sxs-lookup"><span data-stu-id="62fdd-126">Instead, the KDC sends both encrypted session keys to the client.</span></span> <span data-ttu-id="62fdd-127">伺服器的工作階段金鑰包含在 [會話票證](session-tickets.md)中。</span><span class="sxs-lookup"><span data-stu-id="62fdd-127">The session key for the server is included in a [session ticket](session-tickets.md).</span></span>

 

 
