---
description: 如同原先設計的 Kerberos 通訊協定，使用者的主要金鑰是衍生自使用者提供的密碼。
ms.assetid: b8fcb68d-751e-4495-ab92-8b70c96aaa7a
title: Ticket-Granting 票證
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 39dff161ba2d905f676fe6b6b5e7e7d5289ee550
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/07/2021
ms.locfileid: "104113197"
---
# <a name="ticket-granting-tickets"></a>Ticket-Granting 票證

如同原先設計的 [*Kerberos 通訊協定*](../secgloss/k-gly.md) ，使用者的主要金鑰是衍生自使用者提供的密碼。 當使用者登入時，使用者工作站上的 Kerberos 用戶端會接受使用者的密碼，並透過單向 [*雜湊*](../secgloss/h-gly.md) 函式傳遞文字，將密碼轉換成加密金鑰。 產生的雜湊是使用者的 [*主要金鑰*](../secgloss/m-gly.md)。 用戶端使用此 *主要金鑰* 來解密從 KDC 接收的 [*工作階段金鑰*](../secgloss/s-gly.md) 。

原始的 Kerberos 設計有個問題，就是用戶端每次從 KDC 解密工作階段金鑰時，都需要使用者的主要金鑰。 這表示用戶端必須在每個用戶端/伺服器交換的開頭要求使用者輸入密碼，否則用戶端必須將使用者金鑰儲存在工作站上。 頻繁的使用者中斷太過干擾。 將金鑰儲存在工作站上，會危及衍生自使用者密碼的金鑰，這是長期的金鑰。

Kerberos 通訊協定的解決方法是讓用戶端從 KDC 取得暫存金鑰。 這個暫時金鑰只適用于此 [*登入會話*](../secgloss/l-gly.md)。 當使用者登入時，用戶端會要求 KDC 的票證，就如同要求任何其他服務的票證一樣。 KDC 的回應方式是建立登入工作階段金鑰和特殊伺服器的票證（KDC 的完整票證授與服務）。 登入工作階段金鑰的其中一個複本內嵌在票證中，並使用 KDC 的主要金鑰來加密票證。 另一個登入工作階段金鑰複本會以使用者的登入密碼所衍生的使用者主要金鑰進行加密。 票證和加密工作階段金鑰都會傳送至用戶端。

當用戶端取得 KDC 的回復時，它會使用從使用者的密碼衍生的使用者主要金鑰來解密登入工作階段金鑰。 用戶端不再需要從使用者的密碼衍生的金鑰，因為用戶端現在會使用登入工作階段金鑰，將它從 KDC 取得之任何伺服器工作階段金鑰的複本解密。 用戶端會在其票證快取中儲存登入工作階段金鑰，並將其票證儲存至 KDC 的完整票證授與服務的票證。

完整票證授權服務的票證稱為 (TGT) 的票證授與票證。 當用戶端向伺服器要求 KDC 的票證時，它會以驗證器訊息和票證（在此案例中為 TGT）的 [*形式呈現認證*](../secgloss/c-gly.md) ，就像向任何其他服務出示認證一樣。 票證授與服務會以其主要金鑰來開啟 TGT，並解壓縮此用戶端的登入工作階段金鑰，並使用登入工作階段金鑰來加密用戶端伺服器工作階段金鑰的複本。

 

 
