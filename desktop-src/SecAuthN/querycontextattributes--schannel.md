---
description: 可讓傳輸應用程式查詢 [*安全性內容*](../secgloss/s-gly.md)特定屬性的安全通道 [*安全性封裝*](../secgloss/s-gly.md)。
ms.assetid: 0329e525-a743-4e6c-aac4-9f74274dadd2
title: QueryContextAttributes (Schannel) 函式 (Sspi.h)
ms.topic: reference
ms.date: 07/25/2019
ms.openlocfilehash: 9ec53dcca1e31742f13d934fa9957e3c73eb6db70b58860b87fae5591fad721a
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/11/2021
ms.locfileid: "118920116"
---
# <a name="querycontextattributes-schannel-function"></a>QueryCoNtextAttributes (Schannel) 函數

**QueryCoNtextAttributes (Schannel)** 函數可讓傳輸應用程式查詢 [*安全性內容*](../secgloss/s-gly.md)特定 [*屬性*](../secgloss/a-gly.md#_security_attribute_gly)的安全通道 [*安全性封裝*](../secgloss/s-gly.md)。

## <a name="syntax"></a>語法


```C++
SECURITY_STATUS SEC_ENTRY QueryContextAttributes(
  _In_  PCtxtHandle phContext,
  _In_  ULONG       ulAttribute,
  _Out_ PVOID       pBuffer
);
```



## <a name="parameters"></a>參數

<dl> <dt>

*phCoNtext* \[在\]
</dt> <dd>

要查詢的 [*安全性內容*](../secgloss/s-gly.md) 控制碼。

</dd> <dt>

*ulAttribute* \[在\]
</dt> <dd>

指定要傳回之內容的屬性。 此參數可以是下列其中一個值。



| 值                                                                                                                                                                                                                                                                              | 意義                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span id="SECPKG_ATTR_ACCESS_TOKEN"></span><span id="secpkg_attr_access_token"></span><dl> <dt>**SECPKG \_ATTR \_ 存取 \_ 權杖**</dt> <dt>13</dt> </dl>                           | *PBuffer* 參數包含 [**SecPkgCoNtext \_ AccessToken**](/windows/win32/api/sspi/ns-sspi-secpkgcontext_accesstoken)結構的指標。<br/> 傳回存取權杖的控制碼。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| <span id="SECPKG_ATTR_APP_DATA"></span><span id="secpkg_attr_app_data"></span><dl> <dt>**SECPKG \_ATTR \_ 應用程式 \_ 資料**</dt> <dt>0x5e</dt> </dl>                                     | *PBuffer* 參數包含 [**SecPkgCoNtext \_ SessionAppData**](/windows/win32/api/schannel/ns-schannel-secpkgcontext_sessionappdata)結構的指標。<br/> 傳回或指定會話的應用程式資料。<br/> 只有 Schannel [*安全性套件*](../secgloss/s-gly.md)支援此屬性。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| <span id="SECPKG_ATTR_AUTHORITY"></span><span id="secpkg_attr_authority"></span><dl> <dt>**SECPKG \_ATTR \_ 授權**</dt>單位 <dt>6</dt> </dl>                                      | *PBuffer* 參數包含 [**SecPkgCoNtext \_ 授權**](/windows/win32/api/sspi/ns-sspi-secpkgcontext_authoritya)單位結構的指標。<br/> 查詢驗證授權單位的名稱。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| <span id="SECPKG_ATTR_[*cipher*](../secgloss/c-gly.md)_INFO"></span><span id="secpkg_attr_[*cipher*](../secgloss/c-gly.md)_info"></span><dl> <dt>**SECPKG \_ATTR \_ [*密碼*](../secgloss/c-gly.md) \_ 資訊**</dt> <dt>0x64</dt> </dl>                            | *PBuffer* 參數包含 [**SecPkgCoNtext \_ [*加密*](../secgloss/c-gly.md)資訊**](secpkgcontext-[*cipher*](../secgloss/c-gly.md)info.md)結構的指標。<br/> 傳回新的 CNG [*加密*](../secgloss/c-gly.md) 資訊結構。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| <span id="SECPKG_ATTR_CONNECTION_INFO"></span><span id="secpkg_attr_connection_info"></span><dl> <dt>**SECPKG \_ATTR \_ 連接 \_ 資訊**</dt> <dt>0x5a</dt> </dl>                | *PBuffer* 參數包含 [**SecPkgCoNtext \_ ConnectionInfo**](/windows/win32/api/schannel/ns-schannel-secpkgcontext_connectioninfo)結構的指標。<br/> 傳回所建立連接的詳細資訊。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span id="SECPKG_ATTR_KEYING_MATERIAL"></span><span id="secpkg_attr_keying_material"></span><dl> <dt>**SECPKG \_ATTR \_ 金鑰 \_ 材質**</dt> <dt>0x6b</dt> </dl>                | *PBuffer* 參數包含 [**SecPkgCoNtext \_ KeyingMaterial**](/windows/win32/api/schannel/ns-schannel-secpkgcontext_keyingmaterial)結構的指標。 金鑰內容匯出功能遵循 [RFC 5705 標準](https://tools.ietf.org/html/rfc5705)。<br/> 在產生主要密碼之前，或在設定 **SECPKG \_ ATTR \_ 加密 \_ 材料 \_ 資訊** 屬性之前，查詢此屬性會產生錯誤。<br/> 只有 Windows 10 和 Windows Server 2016 或更新版本中的 Schannel [*安全性封裝*](../secgloss/s-gly.md)才支援這個屬性。<br/>                                                                                                                                                                                                                                                                                                                                   |
| <span id="SECPKG_ATTR_CREDS_2"></span><span id="secpkg_attr_creds_2"></span><dl> <dt>**SECPKG \_ATTR \_ 認證 \_ 2**</dt> <dt>0x80000086</dt> </dl>                                  | *PBuffer* 參數包含 [**SecPkgCoNtext \_ ClientCreds**](/windows/win32/api/credssp/ns-credssp-secpkgcontext_clientcreds)結構的指標，該結構會指定用戶端認證。 <br/> 如果用戶端認證是使用者名稱和密碼，則緩衝區是壓縮的 [**KERB \_ 互動式 \_ 登錄**](/windows/win32/api/ntsecapi/ns-ntsecapi-kerb_interactive_logon) 結構。<br/> 如果用戶端認證是使用者名稱和智慧卡 PIN，則緩衝區是封裝的 [**KERB \_ 憑證 \_ 登**](/windows/win32/api/ntsecapi/ns-ntsecapi-kerb_certificate_logon) 入結構。<br/> 如果用戶端認證是線上身分識別認證，則緩衝區會是已封送處理的 [**SEC \_ \_ AUTH \_ identity \_ EX2**](/windows/win32/api/sspi/ns-sspi-sec_winnt_auth_identity_ex2) 結構。<br/> 只有 CredSSP 伺服器才支援此屬性。<br/> **Windows server 2008 R2、Windows 7、Windows Server 2008、Windows Vista、Windows Server 2003 和 Windows XP：** 不支援這個值。<br/> |
| <span id="SECPKG_ATTR_DCE_INFO"></span><span id="secpkg_attr_dce_info"></span><dl> <dt>**SECPKG \_ATTR \_ DCE \_ INFO**</dt> <dt>3</dt> </dl>                                        | *PBuffer* 參數包含 [**SecPkgCoNtext \_ DceInfo**](/windows/win32/api/sspi/ns-sspi-secpkgcontext_dceinfo)結構的指標。<br/> 查詢 DCE 服務所使用的授權資料。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span id="SECPKG_ATTR_EAP_KEY_BLOCK"></span><span id="secpkg_attr_eap_key_block"></span><dl> <dt>**SECPKG \_ATTR \_ EAP \_ KEY \_ BLOCK**</dt> <dt>0x5b</dt> </dl>                     | *PBuffer* 參數包含 [**SecPkgCoNtext \_ EapKeyBlock**](/windows/win32/api/schannel/ns-schannel-secpkgcontext_eapkeyblock)結構的指標。<br/> 查詢 EAP TLS 通訊協定所使用的金鑰資料。<br/> 只有 Schannel [*安全性套件*](../secgloss/s-gly.md)支援此屬性。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| <span id="SECPKG_ATTR_ENDPOINT_BINDINGS"></span><span id="secpkg_attr_endpoint_bindings"></span><dl> <dt>**SECPKG \_ATTR \_ 端點 \_**</dt>系結 <dt>26</dt> </dl>            | *PBuffer* 參數包含 SecPkgCoNtext 系結結構的 [**指標 \_**](/windows/win32/api/sspi/ns-sspi-secpkgcontext_bindings) ，其中包含 TLS (RFC 5929) 的通道系結。 <br/> **Windows server 2008、Windows Vista Windows server 2003 和 Windows XP：** 不支援這個值。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <span id="SECPKG_ATTR_FLAGS"></span><span id="secpkg_attr_flags"></span><dl> <dt>**SECPKG \_ATTR \_ 旗標**</dt> <dt>14</dt> </dl>                                                 | *PBuffer* 參數包含 [**SecPkgCoNtext \_ 旗標**](/windows/win32/api/sspi/ns-sspi-secpkgcontext_flags)結構的指標。<br/> 傳回已協商內容旗標的相關資訊。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| <span id="SECPKG_ATTR_ISSUER_LIST_EX"></span><span id="secpkg_attr_issuer_list_ex"></span><dl> <dt>**SECPKG \_ATTR \_ 簽發者 \_ 清單， \_ 例如**</dt> <dt>0x59</dt> </dl>                  | *PBuffer* 參數包含 [**SecPkgCoNtext \_ IssuerListInfoEx**](/windows/win32/api/schannel/ns-schannel-secpkgcontext_issuerlistinfoex)結構的指標。<br/> 傳回伺服器所接受的憑證簽發者清單。<br/> 只有 Schannel [*安全性套件*](../secgloss/s-gly.md)支援此屬性。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span id="SECPKG_ATTR_KEY_INFO"></span><span id="secpkg_attr_key_info"></span><dl> <dt>**SECPKG \_ATTR 索引 \_ 鍵 \_ 資訊**</dt> <dt>5</dt> </dl>                                        | *PBuffer* 參數包含 [**SecPkgCoNtext \_ KeyInfo**](/windows/win32/api/sspi/ns-sspi-secpkgcontext_keyinfoa)結構的指標。<br/> 查詢 [*安全性內容*](../secgloss/s-gly.md)中所使用之索引鍵的相關資訊。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| <span id="SECPKG_ATTR_LIFESPAN"></span><span id="secpkg_attr_lifespan"></span><dl> <dt>**SECPKG \_ATTR \_**</dt>存留期 <dt>2</dt> </dl>                                         | *PBuffer* 參數包含 [**SecPkgCoNtext \_ 生命週期**](/windows/win32/api/sspi/ns-sspi-secpkgcontext_lifespan)結構的指標。<br/> 查詢內容的存留期範圍。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span id="SECPKG_ATTR_LOCAL_CERT_CONTEXT"></span><span id="secpkg_attr_local_cert_context"></span><dl> <dt>**SECPKG \_ATTR \_ LOCAL \_ CERT \_ CONTEXT**</dt> <dt>0x54</dt> </dl>      | *PBuffer* 參數包含 [**PCCERT \_ 內容**](/windows/win32/api/wincrypt/ns-wincrypt-cert_context)結構的指標。<br/> 尋找包含本機終端憑證的憑證內容。<br/> 只有 Schannel [*安全性套件*](../secgloss/s-gly.md)支援此屬性。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span id="SECPKG_ATTR_LOCAL_CRED"></span><span id="secpkg_attr_local_cred"></span><dl> <dt>**SECPKG \_ ATTR \_ 本機 \_ 認證**</dt> </dl>                                                                                         | *PBuffer* 參數包含 **SecPkgCoNtext \_ LocalCredentialInfo** 結構的指標。 (已過時)<br/> 由 SECPKG \_ ATTR \_ LOCAL \_ CERT CONTEXT 取代 \_ 。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| <span id="SECPKG_ATTR_NAMES"></span><span id="secpkg_attr_names"></span><dl> <dt>**SECPKG \_ATTR \_ 名稱**</dt> <dt>1</dt> </dl>                                                  | *PBuffer* 參數包含 [**SecPkgCoNtext \_ 名稱**](/windows/win32/api/sspi/ns-sspi-secpkgcontext_namesa)結構的指標。<br/> 查詢與內容相關聯的名稱。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span id="SECPKG_ATTR_NATIVE_NAMES"></span><span id="secpkg_attr_native_names"></span><dl> <dt>**SECPKG \_ATTR \_ 原生 \_ 名稱**</dt> <dt>13</dt> </dl>                           | *PBuffer* 參數包含 [**SecPkgCoNtext \_ NativeNames**](https://docs.microsoft.com/windows/win32/api/sspi/ns-sspi-_secpkgcontext_nativenamesa)結構的指標。<br/> 從輸出票證傳回主體名稱 (CNAME) 。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span id="SECPKG_ATTR_NEGOTIATION_INFO"></span><span id="secpkg_attr_negotiation_info"></span><dl> <dt>**SECPKG \_ATTR \_ 協商 \_ 資訊**</dt> <dt>12</dt> </dl>               | *PBuffer* 參數包含 [**SecPkgCoNtext \_ NegotiationInfo**](/windows/win32/api/sspi/ns-sspi-secpkgcontext_negotiationinfoa)結構的指標。<br/> 傳回 [*安全性封裝*](../secgloss/s-gly.md) 的相關資訊，這些資訊與協調程式搭配使用，以及使用該封裝之協商的目前狀態。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| <span id="SECPKG_ATTR_PACKAGE_INFO"></span><span id="secpkg_attr_package_info"></span><dl> <dt>**SECPKG \_ATTR \_ 封裝 \_ 資訊**</dt> <dt>10</dt> </dl>                           | *PBuffer* 參數包含 [**SecPkgCoNtext \_ PackageInfo**](/windows/win32/api/sspi/ns-sspi-secpkginfoa)結構的指標。<br/> 傳回使用中 SSP 的資訊。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| <span id="SECPKG_ATTR_PASSWORD_EXPIRY"></span><span id="secpkg_attr_password_expiry"></span><dl> <dt>**SECPKG \_ATTR \_ 密碼 \_ 到期**</dt> <dt>8</dt> </dl>                   | *PBuffer* 參數包含 [**SecPkgCoNtext \_ PasswordExpiry**](/windows/win32/api/sspi/ns-sspi-secpkgcontext_passwordexpiry)結構的指標。<br/> 傳回密碼到期資訊。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span id="SECPKG_ATTR_REMOTE_CERT_CONTEXT"></span><span id="secpkg_attr_remote_cert_context"></span><dl> <dt>**SECPKG \_ATTR \_ REMOTE \_ CERT \_ CONTEXT**</dt> <dt>0x53</dt> </dl>   | *PBuffer* 參數包含 [**PCCERT \_ 內容**](/windows/win32/api/wincrypt/ns-wincrypt-cert_context)結構的指標。<br/> 尋找包含伺服器所提供之終端憑證的憑證內容。<br/> 只有 Schannel [*安全性套件*](../secgloss/s-gly.md)支援此屬性。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span id="SECPKG_ATTR_ROOT_STORE"></span><span id="secpkg_attr_root_store"></span><dl> <dt>**SECPKG \_ATTR \_ 根 \_ 存放區**</dt> <dt>0x55</dt> </dl>                               | *PBuffer* 參數包含 **HCERTCONTEXT** 的指標。 尋找包含根存放區所提供之憑證的憑證內容。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span id="SECPKG_ATTR_SESSION_INFO"></span><span id="secpkg_attr_session_info"></span><dl> <dt>**SECPKG \_ATTR \_ 會話 \_ 資訊**</dt> <dt>0x5d</dt> </dl>                         | *PBuffer* 參數包含 [**SecPkgCoNtext \_ SessionInfo**](/windows/win32/api/schannel/ns-schannel-secpkgcontext_sessioninfo)結構的指標。<br/> 傳回會話的相關資訊。<br/> **Windows server 2008、Windows Vista Windows server 2003 和 Windows XP：** 不支援這個值。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| <span id="SECPKG_ATTR_SESSION_KEY"></span><span id="secpkg_attr_session_key"></span><dl> <dt>**SECPKG \_ATTR \_ 會話 \_ 金鑰**</dt> <dt>9</dt> </dl>                               | *PBuffer* 參數包含 [**SecPkgCoNtext \_ setsessionkey**](/windows/win32/api/sspi/ns-sspi-secpkgcontext_sessionkey)結構的指標。<br/> 傳回 [*工作階段金鑰*](../secgloss/s-gly.md)s 的相關資訊。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <span id="SECPKG_ATTR_SIZES"></span><span id="secpkg_attr_sizes"></span><dl> <dt>**SECPKG \_ATTR \_ 大小**</dt> <dt>0</dt> </dl>                                                  | *PBuffer* 參數包含 [**SecPkgCoNtext \_ 大小**](/windows/win32/api/sspi/ns-sspi-secpkgcontext_sizes)結構的指標。<br/> 查詢每個訊息函數中使用的結構大小。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| <span id="SECPKG_ATTR_STREAM_SIZES"></span><span id="secpkg_attr_stream_sizes"></span><dl> <dt>**SECPKG \_ATTR \_ 資料流程 \_ 大小**</dt> <dt>4</dt> </dl>                            | *PBuffer* 參數包含 [**SecPkgCoNtext \_ StreamSizes**](/windows/win32/api/sspi/ns-sspi-secpkgcontext_streamsizes)結構的指標。<br/> 查詢每個訊息函數中所使用之資料流程各部分的大小。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| <span id="SECPKG_ATTR_SUPPORTED_SIGNATURES"></span><span id="secpkg_attr_supported_signatures"></span><dl> <dt>**SECPKG \_ATTR \_ 支援的 \_ 特徵**</dt>標記 <dt>0x66</dt> </dl> | *PBuffer* 參數包含 [**SecPkgCoNtext \_ SupportedSignatures**](/windows/win32/api/schannel/ns-schannel-secpkgcontext_supportedsignatures)結構的指標。<br/> 此值會傳回連接所支援之簽章類型的相關資訊。<br/> **Windows server 2008、Windows Vista Windows server 2003 和 Windows XP：** 不支援這個值。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| <span id="SECPKG_ATTR_TARGET_INFORMATION"></span><span id="secpkg_attr_target_information"></span><dl> <dt>**SECPKG \_ATTR \_ 目標 \_ 資訊**</dt> <dt>17</dt> </dl>         | *PBuffer* 參數包含 [**SecPkgCoNtext \_ TargetInformation**](/windows/win32/api/sspi/ns-sspi-secpkgcontext_targetinformation)結構的指標。<br/> 傳回遠端伺服器名稱的相關資訊。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| <span id="SECPKG_ATTR_UNIQUE_BINDINGS"></span><span id="secpkg_attr_unique_bindings"></span><dl> <dt>**SECPKG \_ATTR \_ 唯一 \_**</dt>系結 <dt>25</dt> </dl>                  | *PBuffer* 參數包含 SecPkgCoNtext 系結結構的 [**指標 \_**](/windows/win32/api/sspi/ns-sspi-secpkgcontext_bindings) ，該結構包含通道系結資訊。<br/> **Windows server 2008、Windows Vista Windows server 2003 和 Windows XP：** 不支援這個值。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span id="SECPKG_ATTR_APPLICATION_PROTOCOL"></span><span id="secpkg_attr_application_protocol"></span><dl> <dt>**SECPKG \_ATTR \_ 應用程式 \_ 通訊協定**</dt> <dt>35</dt> </dl>   | *PBuffer* 參數包含已協商的應用程式協定。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| <span id="SECPKG_ATTR_DTLS_MTU"></span><span id="secpkg_attr_dtls_mtu"></span><dl> <dt>**SECPKG \_ATTR \_ DTLS \_ MTU**</dt> <dt>34</dt> </dl>                                       | 設定及抓取 MTU (傳輸單位) 值的最大值，以與 DTLS 搭配使用。 如果 [*安全性內容*](../secgloss/s-gly.md)中未啟用 DTLS，則不支援此屬性。 <br/> 有效的值介於200個位元組到 64 kb 之間。 Schannel 中的預設 DTLS MTU 值是1096個位元組。 <br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |



 

</dd> <dt>

*pBuffer* \[擴展\]
</dt> <dd>

接收屬性之結構的指標。 所指向結構的類型取決於 *ulAttribute* 參數中指定的值。

</dd> </dl>

## <a name="return-value"></a>傳回值

如果函式成功，則傳回值為 **SEC \_ E \_ OK**。

如果函式失敗，則傳回值為非零的錯誤碼。

## <a name="remarks"></a>備註

*PBuffer* 參數所指向的結構會根據所查詢的屬性而有所不同。 呼叫端必須配置 *pBuffer* 結構本身，但 SSP 會配置所需的記憶體，以保存 *pBuffer* 結構的變數大小成員。 當您完成使用 SSP 配置的記憶體時，請呼叫 [**FreeCoNtextBuffer**](/windows/win32/api/sspi/nf-sspi-freecontextbuffer) 函式來釋放它。

\_讀取 SECPKG ATTR \_ REMOTE \_ CERT \_ coNtext 或 SECPKG \_ ATTR \_ LOCAL \_ cert \_ coNtext 值之後， **hCertStore** 成員會設定為包含中繼憑證（如果有的話）的憑證存放區控制碼。 此外，應用程式必須負責呼叫 [**CertFreeCertificateCoNtext**](/windows/win32/api/wincrypt/nf-wincrypt-certfreecertificatecontext) ，以釋放憑證內容所使用的記憶體。

## <a name="requirements"></a>規格需求



| 需求 | 值 |
|-------------------------------------|--------------------------------------------------------------------------------------------------------|
| 最低支援的用戶端<br/> | Windows 8.1 \[僅限桌面應用程式\]<br/>                                                           |
| 最低支援的伺服器<br/> | Windows Server 2012\[僅限 R2 desktop 應用程式\]<br/>                                                |
| 標頭<br/>                   | <dl> <dt>Sspi (包含 Security .h) </dt> </dl> |
| 程式庫<br/>                  | <dl> <dt>Secur32 .lib</dt> </dl>                 |
| DLL<br/>                      | <dl> <dt>Secur32.dll</dt> </dl>                 |
| Unicode 與 ANSI 名稱<br/>   | **QueryCoNtextAttributesW** (Unicode) 和 **QueryCoNtextAttributesA** (ANSI) <br/>                |



## <a name="see-also"></a>另請參閱

<dl> <dt>

[SSPI 函數](authentication-functions.md#sspi-functions)
</dt> <dt>

[**憑證 \_ 內容**](/windows/win32/api/wincrypt/ns-wincrypt-cert_context)
</dt> <dt>

[**FreeCoNtextBuffer**](/windows/win32/api/sspi/nf-sspi-freecontextbuffer)
</dt> <dt>

[**SecPkgCoNtext \_ 授權單位**](/windows/win32/api/sspi/ns-sspi-secpkgcontext_authoritya)
</dt> <dt>

[**SecPkgCoNtext \_ ConnectionInfo**](/windows/win32/api/schannel/ns-schannel-secpkgcontext_connectioninfo)
</dt> <dt>

[**SecPkgCoNtext \_ DceInfo**](/windows/win32/api/sspi/ns-sspi-secpkgcontext_dceinfo)
</dt> <dt>

[**SecPkgCoNtext \_ IssuerListInfoEx**](/windows/win32/api/schannel/ns-schannel-secpkgcontext_issuerlistinfoex)
</dt> <dt>

[**SecPkgCoNtext \_ KeyInfo**](/windows/win32/api/sspi/ns-sspi-secpkgcontext_keyinfoa)
</dt> <dt>

[**SecPkgCoNtext \_ 生命週期**](/windows/win32/api/sspi/ns-sspi-secpkgcontext_lifespan)
</dt> <dt>

[**SecPkgCoNtext \_ 名稱**](/windows/win32/api/sspi/ns-sspi-secpkgcontext_namesa)
</dt> <dt>

[**SecPkgCoNtext \_ 大小**](/windows/win32/api/sspi/ns-sspi-secpkgcontext_sizes)
</dt> <dt>

[**SecPkgCoNtext \_ StreamSizes**](/windows/win32/api/sspi/ns-sspi-secpkgcontext_streamsizes)
</dt> </dl>

 

 
