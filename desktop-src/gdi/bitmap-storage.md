---
description: 點陣圖應儲存在使用已建立點陣圖檔案格式的檔案中，並指派具有三個字元 .bmp 副檔名的名稱。
ms.assetid: 44f19d14-4e0e-4512-8c86-6bd34ca4e87b
title: 點陣圖儲存體
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 83688f240899ded49227264b716d8c5d1fb609aa747fc358184a78ad18c8d17f
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/11/2021
ms.locfileid: "119038206"
---
# <a name="bitmap-storage"></a>點陣圖儲存體

點陣圖應儲存在使用已建立點陣圖檔案格式的檔案中，並指派具有三個字元 .bmp 副檔名的名稱。 所建立的點陣圖檔案格式包含 [**BITMAPFILEHEADER**](/windows/win32/api/wingdi/ns-wingdi-bitmapfileheader) 結構，後面接著 [**BITMAPINFOHEADER**](/previous-versions//dd183376(v=vs.85))、 [**BITMAPV4HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv4header)或 [**BITMAPV5HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv5header) 結構。 [**RGBQUAD**](/windows/win32/api/wingdi/ns-wingdi-rgbquad)結構的陣列 (也稱為色彩資料表) 遵循點陣圖資訊標頭結構。 色彩表後面接著第二個索引陣列， (實際的點陣圖資料) 。

點陣圖檔案格式如下圖所示。

![點陣圖檔案格式的圖表，其中顯示 bitmapfileheader、bitmapinfoheader、rgbquad 陣列和色彩索引陣列](images/csbmp-02.png)

[**BITMAPFILEHEADER**](/windows/win32/api/wingdi/ns-wingdi-bitmapfileheader)結構的成員會識別檔案;指定檔案的大小（以位元組為單位）。並指定從標頭中第一個位元組到點陣圖資料之第一個位元組的位移。 [**BITMAPINFOHEADER**](/previous-versions//dd183376(v=vs.85))、 [**BITMAPV4HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv4header)或 [**BITMAPV5HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv5header)結構的成員會指定點陣圖的寬度和高度（以圖元為單位）。色彩格式 (色彩平面的計數和點陣圖建立所在之顯示裝置的每圖元色彩位) ;點陣圖資料是否在儲存體之前壓縮，以及使用的壓縮類型;點陣圖資料的位元組數目;點陣圖建立所在之顯示裝置的解析度;以及資料中表示的色彩數目。 [**RGBQUAD**](/windows/win32/api/wingdi/ns-wingdi-rgbquad)結構會針對裝置的調色板中的每個色彩指定 RGB 濃度值。

色彩索引陣列會將一種色彩（以索引的形式）與 [**RGBQUAD**](/windows/win32/api/wingdi/ns-wingdi-rgbquad) 結構建立關聯，並將每個圖元以點陣圖表示。 因此，色彩索引陣列中的位數會等於為 **RGBQUAD** 結構編制索引所需的位元組數目。 例如，8x8 的黑色和白色點陣圖具有 8 \* 8 \* 1 = 64 位的色彩索引陣列，因為有一位需要用來為兩個色彩編制索引。 「 [關於點陣圖](about-bitmaps.md)」中提及的 Redbrick.bmp 是具有16色的32x32 點陣圖;其色彩索引陣列為 32 \* 32 \* 4 = 4096 位，因為四個位索引16色。

若要建立由上而下點陣圖的色彩索引陣列，請從點陣圖的頂端行開始。 最左邊圖元之色彩的 [**RGBQUAD**](/windows/win32/api/wingdi/ns-wingdi-rgbquad) 索引是以色彩索引陣列 (的第一個 *n* 位，其中 *n* 是指出所有 **RGBQUAD** 結構) 所需的位數。 右邊的下一個圖元色彩是陣列中的下一個 *n* 位，依此類推。 當您到達行中最右邊的圖元之後，請繼續下一行中最左邊的圖元。 繼續進行，直到完成整個點陣圖為止。 如果是自下而上的點陣圖，請從點陣圖底部的位置開始，而不是從上一行開始，從左至右，然後繼續前往點陣圖的頂端行。

下列十六進位輸出顯示 Redbrick.bmp 檔案的內容。


```C++
0000    42 4d 76 02 00 00 00 00  00 00 76 00 00 00 28 00 
0010    00 00 20 00 00 00 20 00  00 00 01 00 04 00 00 00 
0020    00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00 
0030    00 00 00 00 00 00 00 00  00 00 00 00 80 00 00 80 
0040    00 00 00 80 80 00 80 00  00 00 80 00 80 00 80 80 
0050    00 00 80 80 80 00 c0 c0  c0 00 00 00 ff 00 00 ff 
0060    00 00 00 ff ff 00 ff 00  00 00 ff 00 ff 00 ff ff 
0070    00 00 ff ff ff 00 00 00  00 00 00 00 00 00 00 00 
0080    00 00 00 00 00 00 00 00  00 00 00 00 00 00 09 00 
0090    00 00 00 00 00 00 11 11  01 19 11 01 10 10 09 09 
00a0    01 09 11 11 01 90 11 01  19 09 09 91 11 10 09 11 
00b0    09 11 19 10 90 11 19 01  19 19 10 10 11 10 09 01 
00c0    91 10 91 09 10 10 90 99  11 11 11 11 19 00 09 01 
00d0    91 01 01 19 00 99 11 10  11 91 99 11 09 90 09 91 
00e0    01 11 11 11 91 10 09 19  01 00 11 90 91 10 09 01 
00f0    11 99 10 01 11 11 91 11  11 19 10 11 99 10 09 10 
0100    01 11 11 11 19 10 11 09  09 10 19 10 10 10 09 01 
0110    11 19 00 01 10 19 10 11  11 01 99 01 11 90 09 19 
0120    11 91 11 91 01 11 19 10  99 00 01 19 09 10 09 19 
0130    10 91 11 01 11 11 91 01  91 19 11 00 99 90 09 01 
0140    01 99 19 01 91 10 19 91  91 09 11 99 11 10 09 91 
0150    11 10 11 91 99 10 90 11  01 11 11 19 11 90 09 11 
0160    00 19 10 11 01 11 99 99  99 99 99 99 99 99 09 99 
0170    99 99 99 99 99 99 00 00  00 00 00 00 00 00 00 00 
0180    00 00 00 00 00 00 90 00  00 00 00 00 00 00 00 00 
0190    00 00 00 00 00 00 99 11  11 11 19 10 19 19 11 09 
01a0    10 90 91 90 91 00 91 19  19 09 01 10 09 01 11 11 
01b0    91 11 11 11 10 00 91 11  01 19 10 11 10 01 01 11 
01c0    90 11 11 11 91 00 99 09  19 10 11 90 09 90 91 01 
01d0    19 09 91 11 01 00 90 10  19 11 00 11 11 00 10 11 
01e0    01 10 11 19 11 00 90 19  10 91 01 90 19 99 00 11 
01f0    91 01 11 01 91 00 99 09  09 01 10 11 91 01 10 91 
0200    99 11 10 90 91 00 91 11  00 10 11 01 10 19 19 09 
0210    10 00 99 01 01 00 91 01  19 91 19 91 11 09 10 11 
0220    00 91 00 10 90 00 99 01  11 10 09 10 10 19 09 01 
0230    91 90 11 09 11 00 90 99  11 11 11 90 19 01 19 01 
0240    91 01 01 19 09 00 91 10  11 91 99 09 09 90 11 91 
0250    01 19 11 11 91 00 91 19  01 00 11 00 91 10 11 01 
0260    11 11 10 01 11 00 99 99  99 99 99 99 99 99 99 99 
0270    99 99 99 99 99 90 
```



下表顯示與點陣圖檔案中的結構相關聯的資料位元組。



| 結構                                    | 對應的位元組 |
|----------------------------------------------|---------------------|
| [**BITMAPFILEHEADER**](/windows/win32/api/wingdi/ns-wingdi-bitmapfileheader) | 0x00 0x0D           |
| [**BITMAPINFOHEADER**](/previous-versions//dd183376(v=vs.85)) | 0x0E 0x35           |
| [**RGBQUAD**](/windows/win32/api/wingdi/ns-wingdi-rgbquad) 陣列             | 0x36 0x75           |
| 色彩索引陣列                            | 0x76 0x275          |



 

 

 
