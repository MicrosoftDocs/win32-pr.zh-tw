---
description: Windows 支援將點陣圖壓縮的格式，這些點陣圖會以8或4位的每個圖元來定義色彩。 壓縮會減少點陣圖所需的磁片和記憶體儲存體。
ms.assetid: 14d14662-910a-4f3f-914e-6ccfc602c822
title: 點陣圖壓縮
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: dcefec93bb5583ba066e35d5143410d1c249bb09
ms.sourcegitcommit: 0dec0044816af3f2b2e6403659e1cf11138c90cd
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/13/2021
ms.locfileid: "121812844"
---
# <a name="bitmap-compression"></a>點陣圖壓縮

Windows 支援將點陣圖壓縮的格式，這些點陣圖會以8或4位的每個圖元來定義色彩。 壓縮會減少點陣圖所需的磁片和記憶體儲存體。

當點陣圖資訊標頭結構的 **壓縮** 成員是 BI \_ RLE8 時，會使用 (RLE) 格式的執行長度編碼來壓縮8位點陣圖。 這種格式可以用編碼或絕對模式壓縮。 這兩種模式都可以出現在相同點陣圖中的任何位置：

-   *編碼模式* 包含兩個位元組：第一個位元組指定使用第二個位元組中包含的色彩索引來繪製的連續圖元數。 此外，配對的第一個位元組可以設定為零，表示表示行尾、點陣圖結尾或 delta 的 escape 字元（視第二個位元組的值而定）。 Escape 的解讀取決於配對的第二個位元組值，它可以是下列值之一。



| 值 | 意義                                                                                                                                                     |
|-------|-------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 0     | 行結尾。                                                                                                                                                |
| 1     | 點陣圖結尾。                                                                                                                                              |
| 2     | 三角洲。 在 escape 之後的2個位元組包含不帶正負號的值，指出下一個圖元與目前位置的水準和垂直位移。 |



 

-   在 *絕對模式* 中，第一個位元組為零，而第二個位元組是範圍03H 到 FFH 的值。 第二個位元組代表後面的位元組數目，每個位元組都包含單一圖元的色彩索引。 當第二個位元組為兩個或更少時，表示 escape 的意義與編碼模式相同。 在絕對模式中，每次執行都必須以零填補，以在16位字邊界上結束。

下列範例會顯示8位壓縮點陣圖的十六進位值：


```C++
[03 04] [05 06] [00 03 45 56 67 00] [02 78] [00 02 05 01] 
[02 78] [00 00] [09 1E] [00 01] 
```



點陣圖會依下列方式展開 (兩位數值代表單一圖元) 的色彩索引：


```C++
04 04 04 
06 06 06 06 06 
45 56 67 
78 78 
move current position 5 right and 1 down 
78 78 
end of line 
1E 1E 1E 1E 1E 1E 1E 1E 1E 
end of RLE bitmap 
```



當 **壓縮** 成員是 BI \_ RLE4 時，會使用4位點陣圖的執行長度編碼格式來壓縮點陣圖，這也會使用編碼和絕對模式：

-   在編碼模式中，配對的第一個位元組會包含要使用第二個位元組中的色彩索引繪製的圖元數。 第二個位元組包含兩個色彩索引，一個在其高序位4位，另一個則為低序位4位。 第一個圖元是使用由高序位4位所指定的色彩來繪製，第二個是使用低序位4位中的色彩繪製，第三個則是使用高序位4位中的色彩來繪製，依此類推，直到第一個位元組指定的所有圖元都已繪製為止。
-   在絕對模式中，第一個位元組是零。 第二個位元組包含後面的色彩索引數目。 後續的位元組包含其高和低序位4位的色彩索引，每個圖元一個色彩索引。 在絕對模式中，每次執行都必須對齊字邊界。 BI RLE8 說明的行結尾、點陣圖結尾和 delta esc \_ 也適用于 bi \_ RLE4 壓縮。

下列範例顯示4位壓縮點陣圖的十六進位值：


```C++
03 04 05 06 00 06 45 56 67 00 04 78 00 02 05 01 
04 78 00 00 09 1E 00 01 
```



點陣圖會依下列方式展開 (單一位數值代表單一圖元) 的色彩索引：


```C++
0 4 0 
0 6 0 6 0 
4 5 5 6 6 7 
7 8 7 8 
move current position 5 right and 1 down 
7 8 7 8 
end of line 
1 E 1 E 1 E 1 E 1 
end of RLE bitmap 
```



 

 



