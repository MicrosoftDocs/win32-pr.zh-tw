---
description: 應用程式必須先開啟金鑰，才能將資料新增至登錄。
ms.assetid: db747656-b414-4594-ad39-6b476799060c
title: 預先定義的金鑰
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3805aaababb1a8fbdb41ca51e10e263bdee6c78f852b79a8baaa8c0fa6c200b7
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/11/2021
ms.locfileid: "118885275"
---
# <a name="predefined-keys"></a>預先定義的金鑰

應用程式必須先開啟金鑰，才能將資料新增至登錄。 若要開啟金鑰，應用程式必須在已經開啟的登錄中提供另一個索引鍵的控制碼。 系統會定義永遠開啟的預先定義金鑰。 預先定義的金鑰可協助應用程式在登錄中流覽，並讓系統管理員能夠開發可讓系統管理員運算元據類別的工具。 將資料新增至登錄的應用程式應該一律在預先定義的金鑰架構內運作，因此系統管理工具可以尋找並使用新的資料。

應用程式可以使用這些機碼的控制碼作為登錄的進入點。 這些控制碼對登錄的所有執行都有效，不過使用控制碼可能會因平臺而異。 此外，還針對特定平臺定義了其他預先定義的控制碼。 以下是預先定義之索引鍵的控制碼。



| Handle                                              | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|-----------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **HKEY \_ 類別 \_ 根目錄**<br/>                  | 此索引鍵的登錄專案會定義類型 (或類別) 檔以及與這些類型相關聯的屬性。 Shell 和 COM 應用程式會使用儲存在此機碼下的資訊。<br/> 這個金鑰也會藉由儲存 DDE 和 OLE 支援的資訊，提供與 Windows 3.1 註冊資料庫的回溯相容性。 檔案檢視器和使用者介面延伸會將其 OLE 類別識別碼儲存在 **HKEY \_ 類別的 \_ 根目錄** 中，而同進程伺服器則會在此機碼中註冊。<br/> 這個控制碼不應用於模擬不同使用者的服務或應用程式。<br/> 如需詳細資訊，請參閱 [HKEY \_ 類別 \_ 根](hkey-classes-root-key.md)。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| **HKEY \_ 目前的設定 \_**<br/>                | 包含本機電腦系統目前硬體設定檔的相關資訊。 **HKEY \_ 目前 \_** 的設定下的資訊只描述目前硬體設定與標準設定之間的差異。 標準硬體設定的相關資訊會儲存在 **HKEY \_ 本機 \_ 電腦** 的 **軟體** 和 **系統** 金鑰下。<br/> **HKEY \_目前 \_** 的設定是 **HKEY \_ 本機 \_ 電腦 \\ 系統 \\ CurrentControlSet \\ 硬體設定檔 \\ 目前** 的別名。<br/> 如需詳細資訊，請參閱 [HKEY \_ 目前 \_ ](/previous-versions/windows/it-pro/windows-server-2003/cc776168(v=ws.10))的設定。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **HKEY \_ 目前的 \_ 使用者**<br/>                  | 此機碼的次級登錄專案會定義目前使用者的喜好設定。 這些喜好設定包括環境變數的設定、程式群組的相關資料、色彩、印表機、網路連線和應用程式喜好設定。 此金鑰可讓您更輕鬆地建立目前使用者的設定;此索引鍵會對應到 **HKEY \_ 使用者** 中目前使用者的分支。 在 **HKEY \_ 目前的 \_ 使用者** 中，軟體廠商會儲存目前的使用者專屬喜好設定，以在其應用程式中使用。 例如，microsoft 會建立 **HKEY 目前的 \_ \_ 使用者 \\ 軟體 \\ microsoft** 金鑰供其應用程式使用，而每個應用程式會在 **microsoft** 金鑰下建立自己的子機碼。<br/> **HKEY \_ CURRENT \_ user** 和 **HKEY \_ USERS** 之間的對應是每個進程，而且會在第一次進程參考 **HKEY \_ 目前 \_ 使用者** 時建立。 對應是以參考 **HKEY \_ 目前 \_ 使用者** 的第一個執行緒的安全性內容為基礎。 如果此安全性內容未在 **HKEY \_ 使用者** 中載入登錄 hive，則會與 HKEY 使用者建立對應 **\_ \\ 。預設值**。 建立此對應之後，它會持續存在，即使執行緒的安全性內容有所變更。<br/> 除了 **HKEY \_ 目前 \_ 使用者 \\ 軟體 \\ 類別** 下的所有登錄專案，都包含在漫遊使用者設定檔的每個使用者登錄 **部分中。 \_ \_** 若要排除漫遊使用者設定檔中的其他專案，請將其儲存在 **HKEY \_ 目前 \_ 使用者的 \_ 本機 \_ 設定** 中。<br/> 這個控制碼不應用於模擬不同使用者的服務或應用程式。 請改為呼叫 [**RegOpenCurrentUser**](/windows/desktop/api/Winreg/nf-winreg-regopencurrentuser) 函數。<br/> 如需詳細資訊，請參閱 [HKEY \_ 目前的 \_ 使用者](/previous-versions/windows/it-pro/windows-server-2003/cc779816(v=ws.10))。<br/> |
| **HKEY \_ 目前 \_ 使用者的 \_ 本機 \_ 設定**<br/> | 此機碼的次級登錄專案會定義電腦本機的目前使用者喜好設定。 漫遊使用者設定檔的每個使用者登錄部分都不會包含這些專案。 **Windows server 2008、Windows Vista Windows server 2003 和 Windows XP/2000：** 從 Windows 7 和 Windows Server 2008 R2 開始支援此金鑰。<br/> <br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| **HKEY \_ 本機 \_ 電腦**<br/>                 | 此機碼的次級登錄專案會定義電腦的實體狀態，包括匯流排類型、系統記憶體和已安裝硬體和軟體的相關資料。 它包含的子機碼會保存目前的設定資料，包括 (**列舉** 分支的隨插即用資訊，其中包含曾經在系統) 的所有硬體的完整清單、網路登入喜好設定、網路安全性資訊、軟體相關資訊 (例如伺服器名稱和伺服器的位置) ，以及其他系統資訊。<br/> 如需詳細資訊，請參閱 [HKEY \_ 本機 \_ 電腦](/previous-versions/windows/it-pro/windows-server-2003/cc784983(v=ws.10))。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **HKEY \_ 效能 \_ 資料**<br/>              | 此機碼的子登錄專案可讓您存取效能資料。 資料實際上不會儲存在登錄中;登錄功能會導致系統從其來源收集資料。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **HKEY \_ 效能 \_ NLSTEXT**<br/>           | 此機碼附屬的登錄專案會參考文字字串，以電腦系統執行所在區域的當地語言來描述計數器。 這些專案無法用來 Regedit.exe 和 Regedt32.exe。**Windows 2000：** 不支援此機碼。<br/> <br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| **HKEY \_ 效能 \_ 文字**<br/>              | 此機碼附屬的登錄專案會參考以美式英文描述計數器的文字字串。 這些專案無法用來 Regedit.exe 和 Regedt32.exe。**Windows 2000：** 不支援此機碼。<br/> <br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **HKEY \_ 使用者**<br/>                          | 此機碼的登錄專案會定義本機電腦上新使用者的預設使用者設定，以及目前使用者的使用者設定。<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |



 

[**RegOverridePredefKey**](/windows/desktop/api/Winreg/nf-winreg-regoverridepredefkey)函式可讓您將預先定義的登錄機碼對應到登錄中的指定機碼。 例如，軟體安裝程式可能會重新對應預先定義的金鑰，然後再安裝 DLL 元件。 這可讓安裝程式輕鬆地檢查 DLL 安裝程式寫入預先定義金鑰的資訊。

[**RegDisablePredefinedCache**](/windows/desktop/api/Winreg/nf-winreg-regdisablepredefinedcache)和 [**RegDisablePredefinedCacheEx**](/windows/desktop/api/Winreg/nf-winreg-regdisablepredefinedcacheex)函數會停用預先定義之登錄控制碼的控制碼快取。 使用模擬的服務應該在使用預先定義的登錄控制碼之前呼叫 **RegDisablePredefinedCacheEx** 。

預先定義的控制碼不是安全線程。 關閉某個執行緒中預先定義的控制碼，會影響任何其他使用該控制碼的執行緒。

 

