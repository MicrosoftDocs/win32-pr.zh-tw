---
title: 使用網域使用者帳戶做為服務登入帳戶
description: 網域使用者帳戶可讓服務充分利用 Windows 和 Microsoft Active Directory Domain Services 的服務安全性功能。
ms.assetid: 03c486fd-faec-450c-9348-314680eb73cb
ms.tgt_platform: multiple
ms.topic: article
ms.date: 05/31/2018
ms.custom: contperf-fy21q3
ms.openlocfilehash: f482359eb8445cacef12c46716ecde662a95d46d
ms.sourcegitcommit: 11f52354f570aacaf1ba2a266b2e507abd73352a
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 03/19/2021
ms.locfileid: "106988629"
---
# <a name="using-a-domain-user-account-as-a-service-logon-account"></a><span data-ttu-id="57005-103">使用網域使用者帳戶做為服務登入帳戶</span><span class="sxs-lookup"><span data-stu-id="57005-103">Using a Domain User Account as a Service Logon Account</span></span>

<span data-ttu-id="57005-104">網域使用者帳戶可讓服務充分利用 Windows 和 Microsoft Active Directory Domain Services 的服務安全性功能。</span><span class="sxs-lookup"><span data-stu-id="57005-104">A domain user account enables the service to take full advantage of the service security features of Windows and Microsoft Active Directory Domain Services.</span></span> <span data-ttu-id="57005-105">服務具有授與帳戶的任何本機和網路存取權，或帳戶為其成員的任何群組。</span><span class="sxs-lookup"><span data-stu-id="57005-105">The service has whatever local and network access is granted to the account, or to any groups of which the account is a member.</span></span> <span data-ttu-id="57005-106">服務可以支援 Kerberos 相互驗證。</span><span class="sxs-lookup"><span data-stu-id="57005-106">The service can support Kerberos mutual authentication.</span></span>

> [!Note]  
> <span data-ttu-id="57005-107">下列檔適用于開發人員。</span><span class="sxs-lookup"><span data-stu-id="57005-107">The following documentation is for developers.</span></span> <span data-ttu-id="57005-108">如果您是使用者尋找有關網域使用者帳戶之錯誤訊息的資訊，請參閱 [Microsoft 社區論壇](https://answers.microsoft.com)。</span><span class="sxs-lookup"><span data-stu-id="57005-108">If you are an end-user looking for information about an error message involving domain user accounts, see the [Microsoft community forums](https://answers.microsoft.com).</span></span> <span data-ttu-id="57005-109">如需管理網域使用者帳戶的相關資訊，請參閱 [TechNet](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc754217(v=ws.11))。</span><span class="sxs-lookup"><span data-stu-id="57005-109">For information about managing domain user accounts, see [TechNet](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc754217(v=ws.11)).</span></span>

<span data-ttu-id="57005-110">使用網域使用者帳戶的優點是，服務的動作受限於與帳戶相關聯的存取權限和許可權。</span><span class="sxs-lookup"><span data-stu-id="57005-110">The advantage of using a domain user account is that the service's actions are limited by the access rights and privileges associated with the account.</span></span> <span data-ttu-id="57005-111">不同于 `LocalSystem` 服務，使用者帳戶服務中的 bug 無法損毀系統。</span><span class="sxs-lookup"><span data-stu-id="57005-111">Unlike a `LocalSystem` service, bugs in a user-account service cannot damage the system.</span></span> <span data-ttu-id="57005-112">如果服務受到安全性攻擊的危害，則損毀會與系統允許使用者帳戶執行的作業隔離。</span><span class="sxs-lookup"><span data-stu-id="57005-112">If the service is compromised by a security attack, the damage is isolated to the operations that the system allows the user account to perform.</span></span> <span data-ttu-id="57005-113">同時，在不同許可權層級上執行的用戶端可以連接到服務，這可讓服務模擬用戶端來執行敏感性作業。</span><span class="sxs-lookup"><span data-stu-id="57005-113">At the same time, clients running at varying privilege levels can connect to the service, which enables the service to impersonate a client to perform sensitive operations.</span></span>

<span data-ttu-id="57005-114">服務的使用者帳戶不能是任何屬於本機、網域或企業之系統管理員群組的成員。</span><span class="sxs-lookup"><span data-stu-id="57005-114">A service's user account should not be a member of any administrators groups that are local, domain, or enterprise.</span></span> <span data-ttu-id="57005-115">如果您的服務需要本機系統管理許可權，請在帳戶下執行它 `LocalSystem` 。</span><span class="sxs-lookup"><span data-stu-id="57005-115">If your service needs local administrative privileges, run it under the `LocalSystem` account.</span></span> <span data-ttu-id="57005-116">對於需要網域系統管理許可權的作業，請模擬用戶端應用程式的安全性內容來執行這些作業。</span><span class="sxs-lookup"><span data-stu-id="57005-116">For operations that require domain administrative privileges, perform them by impersonating the security context of a client application.</span></span>

<span data-ttu-id="57005-117">使用網域使用者帳戶的服務實例需要定期系統管理動作來維護帳戶密碼。</span><span class="sxs-lookup"><span data-stu-id="57005-117">A service instance that uses a domain user account requires periodic administrative action to maintain the account password.</span></span> <span data-ttu-id="57005-118">服務實例的主機電腦上的服務控制管理員 (SCM) 快取帳戶密碼，以便用於服務的記錄。</span><span class="sxs-lookup"><span data-stu-id="57005-118">The service control manager (SCM) on the host computer of a service instance caches the account password for use in logging on the service.</span></span> <span data-ttu-id="57005-119">當您變更帳戶密碼時，也必須更新安裝服務之主機電腦上的快取密碼。</span><span class="sxs-lookup"><span data-stu-id="57005-119">When you change the account password, you must also update the cached password on the host computer where the service is installed.</span></span> <span data-ttu-id="57005-120">如需詳細資訊和程式碼範例，請參閱 [變更服務使用者帳戶的密碼](changing-the-password-on-a-serviceampaposs-user-account.md)。</span><span class="sxs-lookup"><span data-stu-id="57005-120">For more information and a code example, see [Changing the Password on a Service's User Account](changing-the-password-on-a-serviceampaposs-user-account.md).</span></span> <span data-ttu-id="57005-121">您可以將密碼保持不變，以避免定期維護，但是這樣會增加對服務帳戶進行密碼攻擊的可能性。</span><span class="sxs-lookup"><span data-stu-id="57005-121">You could avoid the regular maintenance by leaving the password unchanged, but that would increase the likelihood of a password attack on the service account.</span></span> <span data-ttu-id="57005-122">請注意，即使 SCM 將密碼儲存在登錄的安全部分中，還是可能受到攻擊。</span><span class="sxs-lookup"><span data-stu-id="57005-122">Be aware that even though the SCM stores the password in a secure portion of the registry, it is nevertheless subject to attack.</span></span>

<span data-ttu-id="57005-123">網域使用者帳戶有兩種名稱格式：目錄中使用者物件的辨別名稱，以及 <domain> \\ <username> 本機服務控制管理員所使用的 "" 格式。</span><span class="sxs-lookup"><span data-stu-id="57005-123">A domain user account has two name formats: the distinguished name of the user object in the directory and the "<domain>\\<username>" format used by the local service control manager.</span></span> <span data-ttu-id="57005-124">如需詳細資訊和從某種格式轉換成另一種格式的程式碼範例，請參閱 [轉換網域帳戶名稱格式](converting-domain-account-name-formats.md)。</span><span class="sxs-lookup"><span data-stu-id="57005-124">For more information and a code example that converts from one format to the other, see [Converting Domain Account Name Formats](converting-domain-account-name-formats.md).</span></span>

 

 
