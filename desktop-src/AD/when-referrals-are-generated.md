---
title: 當您產生參考時
description: 參考是目錄伺服器通訊的方式，它不包含完成查詢所需的資料，而是參考可能包含必要資料的伺服器。
ms.assetid: 2c11a52a-26e2-4a50-a0a3-5463a0852b27
ms.tgt_platform: multiple
keywords:
- 參考世代 Active Directory
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 06e47c1e172f3eaed34dad452aa46847980cd66f
ms.sourcegitcommit: 803f3ccd65bdefe36bd851b9c6e7280be9489016
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/17/2020
ms.locfileid: "103842015"
---
# <a name="when-referrals-are-generated"></a><span data-ttu-id="94384-104">當您產生參考時</span><span class="sxs-lookup"><span data-stu-id="94384-104">When Referrals Are Generated</span></span>

<span data-ttu-id="94384-105">參考是目錄伺服器通訊的方式，它不包含完成查詢所需的資料，而是參考可能包含必要資料的伺服器。</span><span class="sxs-lookup"><span data-stu-id="94384-105">A referral is the way that a directory server communicates that it does not contain the data required to complete a query, but has a reference to a server that may contain the required data.</span></span> <span data-ttu-id="94384-106">請注意，參考不是由查詢要求所產生。</span><span class="sxs-lookup"><span data-stu-id="94384-106">Be aware that referrals are not just generated by query requests.</span></span>

<span data-ttu-id="94384-107">下列作業可能會導致一個或多個參考：</span><span class="sxs-lookup"><span data-stu-id="94384-107">The following operations can result in one or more referrals:</span></span>

-   <span data-ttu-id="94384-108">系結至不包含所要求之辨別名稱所指定之物件的伺服器，但其資料可能包含該物件的伺服器或網域。</span><span class="sxs-lookup"><span data-stu-id="94384-108">Binding to a server that does not contain the object specified by the requested distinguished name but has data about a server or domain that may contain that object.</span></span> <span data-ttu-id="94384-109">在 ADSI 中，如果應用程式呼叫 [**ADsGetObject**](/windows/desktop/api/adshlp/nf-adshlp-adsgetobject) 或 [**ADsOpenObject**](/windows/desktop/api/adshlp/nf-adshlp-adsopenobject) 來系結至樹系中另一個網域 (內部參考) 或與樹系 (外部參考) 完全分開的命名內容，就會發生這種情況。</span><span class="sxs-lookup"><span data-stu-id="94384-109">For ADSI, this can occur if the application calls [**ADsGetObject**](/windows/desktop/api/adshlp/nf-adshlp-adsgetobject) or [**ADsOpenObject**](/windows/desktop/api/adshlp/nf-adshlp-adsopenobject) to bind to an object that exists in another domain in the forest (internal referral) or a naming context that is completely separate from the forest (external referral).</span></span> <span data-ttu-id="94384-110">針對 LDAP API，執行加入、修改、刪除或搜尋作業時，可能會發生這種情況，此作業會指定存在於樹系中其他網域的物件 (內部參考) 或與樹系 (外部參考) 完全分開的命名內容。</span><span class="sxs-lookup"><span data-stu-id="94384-110">For the LDAP API, this can occur when performing add, modify, delete, or search operations that specify an object that exists in another domain in the forest (internal referral) or a naming context that is completely separate from the forest (external referral).</span></span>

    <span data-ttu-id="94384-111">如果名稱解析在本機找不到物件，且該部分的命名空間沒有可 **交叉** 參考的物件，則網域控制站將嘗試根據辨別名稱的網域元件來建立外部參考。</span><span class="sxs-lookup"><span data-stu-id="94384-111">If name resolution fails to find an object locally and there are no **crossRef** objects for that portion of the namespace, the domain controller will attempt to construct an external referral based on the domain components of the distinguished name.</span></span> <span data-ttu-id="94384-112">例如，如果搜尋是以 "CN = a，CN = b，DC = c，DC = d，DC = e" 為基礎，網域控制站將會在 DNS 位址 "c." 上建立對 LDAP 伺服器的參考。</span><span class="sxs-lookup"><span data-stu-id="94384-112">For example, if a search was based at "CN=a,CN=b,DC=c,DC=d,DC=e", the domain controller will construct a referral to the LDAP server at DNS address "c.d.e".</span></span>

    <span data-ttu-id="94384-113">所有 Windows 2000 網域控制站 (僅支援 DC = 命名上層元件) 彼此辨識，而且用戶端不需要外部交互參照，就能從一個樹系系結至另一個樹系。</span><span class="sxs-lookup"><span data-stu-id="94384-113">All Windows 2000 domain controllers (which support only DC= naming for the upper components) recognize each other, and no external cross references are required for a client to bind from one forest to another.</span></span> <span data-ttu-id="94384-114">如果其他非 Windows 2000 目錄伺服器（例如 Netscape 伺服器）使用 DC = 命名，並且在 DNS 中登錄了適當的 SRV RR，則也會獲得自動參考的優點。</span><span class="sxs-lookup"><span data-stu-id="94384-114">If other non-Windows 2000 directory servers, such as a Netscape server, is using DC= naming and has an appropriate SRV RR registered in DNS, it will get the advantage of the automatic referrals as well.</span></span> <span data-ttu-id="94384-115">如果不是，則必須手動加入外部 **交叉引用** 物件。</span><span class="sxs-lookup"><span data-stu-id="94384-115">If not, an external **crossRef** object must be added manually.</span></span>

-   <span data-ttu-id="94384-116">在包含樹系或次級外部網域、架構或設定容器之次級網域的網域上執行子樹搜尋。</span><span class="sxs-lookup"><span data-stu-id="94384-116">Performing a subtree search on a domain that contains subordinate domains in the forest or subordinate external domains, schema, or configuration containers.</span></span> <span data-ttu-id="94384-117">將會建立從屬網域、外部網域、架構或設定容器的參考。</span><span class="sxs-lookup"><span data-stu-id="94384-117">A referral to the subordinate domain, external domain, schema or configuration container will be created.</span></span> <span data-ttu-id="94384-118">如果已啟用參考追蹤，對呼叫端的參考將會是透明的。</span><span class="sxs-lookup"><span data-stu-id="94384-118">If referral chasing is enabled, the referral will be transparent to the caller.</span></span>

 

 