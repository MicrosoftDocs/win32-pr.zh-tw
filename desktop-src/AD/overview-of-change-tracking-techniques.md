---
title: 變更追蹤技術總覽
description: 有幾種方式可讓變更追蹤機制不同範圍來追蹤變更，應用程式可以追蹤單一物件的單一屬性變更、網域中的所有物件等等。
ms.assetid: 7359e851-61b7-420d-beb0-f7f33f79b007
ms.tgt_platform: multiple
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 036a16362a7f27da47fc086d8758b28619f34d1475c7bb911050deb20c86f08d
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/11/2021
ms.locfileid: "119025506"
---
# <a name="overview-of-change-tracking-techniques"></a>變更追蹤技術總覽

有幾種方式可讓變更追蹤機制有所不同：

-   追蹤變更的範圍：應用程式可以追蹤單一物件之單一屬性的變更、網域中的所有物件等等。 如果機制符合應用程式的需求，應用程式就會收到最少不相關的資料，因此這會增強效能。
-   時效性：應用程式會在每次發生變更時收到通知，或可在一段分鐘或幾小時內收到變更的淨影響通知。

    處理較不及時的資料可能更有效率，因為許多變更可能會折迭成一個。 例如，如果屬性在一小時的間隔內變更三次，則在一小時內累積變更的應用程式將只會收到一個屬性變更的通知，而非三個。

    考慮時效性時，請考慮複寫延遲的影響。 源自某個網域控制站的更新不會立即複寫到另一個網域控制站。 比預期的複寫延遲需要更好的變更追蹤時效性，通常對應用程式沒有真正的好處。

-   輪詢與通知：使用輪詢時，應用程式會定期對網域控制站提出要求，以接收變更追蹤資料。 使用通知時，網域控制站只會在發生變更時將變更傳送至應用程式。

    輪詢的額外負荷很明顯：應用程式可能會在未發生任何重大狀況時要求變更追蹤資料。 通知的額外負荷更微妙。 伺服器必須維護通知要求的相關資料，而且必須參考此資料來決定是否要傳送通知。 這可能會增加一般更新要求的負擔。

-   表示應用程式的知識：持續性和暫時性：每個變更追蹤機制都必須包含部分伺服器的方法，讓伺服器保留追蹤的資料，以瞭解應用程式的知識狀態，以便妥善定義「變更」的概念。 例如，應用程式的知識狀態可能會表示為「已更新，並以 DC d 之前發生的所有變更」。 以這種方式來表示應用程式知識的機制，可提供有效率的方式讓應用程式取得晚于指定時間所發生的變更。

    如果應用程式知識的運算式可保存，也就是儲存 recoverably （如同在檔案或資料庫中），則應用程式重新開機所耗用的資源會比無法進行的資源更少。 在上述範例中，您可以藉由錄製 DC d 和 time t 來保存應用程式知識的運算式。 某些變更通知機制不允許保存此資料。 當應用程式啟動時，伺服器和應用程式必須與一些其他機制進行同步處理。 如果涉及多個物件，則這會耗用大量資源，而且可能牽涉到複雜的程式設計。

使用下列技巧來追蹤 Active Directory Domain Services 中的變更：

-   使用變更通知控制項，針對符合指定篩選準則的變更起始持續性非同步搜尋。 如需詳細資訊，請參閱 [Active Directory Domain Services 中的變更通知](change-notifications-in-active-directory-domain-services.md)。
-   使用目錄同步作業 (DirSync) 搜尋來取出先前的 DirSync 搜尋之後發生的變更。 如需詳細資訊，請參閱 [使用 DirSync 控制項輪詢變更](polling-for-changes-using-the-dirsync-control.md)。
-   使用 USNChanged 屬性來搜尋自上一次搜尋之後變更的物件。 如需詳細資訊，請參閱 [使用 USNChanged 輪詢變更](polling-for-changes-using-usnchanged.md)。

變更通知控制項是針對需要對不頻繁變更的適當提示通知的應用程式或服務所設計。 其中一個範例是將設定資料儲存在 Active Directory 伺服器上的服務或程式，且必須在發生變更時立即收到通知。 請注意，通知控制項有一些限制。

-   通知 promptness 取決於複寫延遲和發生變更的位置。 當變更複寫到您正在監視的複本時，您可能會收到通知，但變更可能會在較早的部分複本上產生。
-   控制項受限於監視單一物件或容器的直屬子系。 必須監視多個容器或不相關物件的應用程式，最多可以註冊五個通知要求。
-   如果有太多用戶端接聽頻繁發生的變更，就會影響伺服器的效能。 一般而言，應用程式應該限制在伺服器上使用此控制項的效能原因。 如果您不需要立即瞭解變更，最好是定期輪詢變更，而不是使用變更通知。

DirSync 和 USNChanged 搜尋技術是針對在 Active Directory 伺服器上的資料與某些其他儲存體中的對應資料維持一致性的應用程式所設計。 這些技術是由定期輪詢變更的應用程式所使用。 DirSync 技術是以您可以透過 ADSI 或 LDAP Api 使用的 LDAP 伺服器控制項為基礎。 DirSync 控制項的缺點是它只能由高度許可權的帳戶（例如網域系統管理員）使用。 以下是 DirSync 控制項的限制清單：

-   DirSync 控制項只能由高度許可權的帳戶（例如網域系統管理員）使用。
-   DirSync 控制項只能監視整個命名內容。 您無法限制 DirSync 搜尋的範圍，只監視命名內容中特定的子樹、容器或物件。

USNChanged 技術並沒有這些限制，不過它比 DirSync 更複雜一點。

 

 




