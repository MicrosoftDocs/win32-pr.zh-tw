---
title: 架構延伸應用程式的建議
description: 本主題包含架構延伸應用程式的建議。
ms.assetid: 615e927e-a113-4557-b354-55a208a649eb
ms.tgt_platform: multiple
keywords:
- 架構延伸應用程式 AD 的建議
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2393211eb910ce4bc490667398da7f38d212ddcf
ms.sourcegitcommit: 803f3ccd65bdefe36bd851b9c6e7280be9489016
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/17/2020
ms.locfileid: "104092626"
---
# <a name="recommendations-for-schema-extension-applications"></a><span data-ttu-id="fee19-104">架構延伸應用程式的建議</span><span class="sxs-lookup"><span data-stu-id="fee19-104">Recommendations for Schema Extension Applications</span></span>

<span data-ttu-id="fee19-105">除了必要條件之外，建議針對架構延伸應用程式使用下列最佳作法：</span><span class="sxs-lookup"><span data-stu-id="fee19-105">In addition to the prerequisites, the following best practices are recommended for schema extension applications:</span></span>

-   <span data-ttu-id="fee19-106">尋找架構主機。</span><span class="sxs-lookup"><span data-stu-id="fee19-106">Find the schema master.</span></span> <span data-ttu-id="fee19-107">系結至位於架構主機之 DC 上的架構。</span><span class="sxs-lookup"><span data-stu-id="fee19-107">Bind to the schema on the DC that is the schema master.</span></span> <span data-ttu-id="fee19-108">避免不必要變更 Dc 之間的架構主機角色。</span><span class="sxs-lookup"><span data-stu-id="fee19-108">Avoid unnecessarily changing the schema master role between DCs.</span></span> <span data-ttu-id="fee19-109">系結至架構主機上的架構容器。</span><span class="sxs-lookup"><span data-stu-id="fee19-109">To bind to the schema container on the schema master.</span></span> <span data-ttu-id="fee19-110">如需詳細資訊，請參閱 [安裝架構延伸模組的必要條件](prerequisites-for-installing-a-schema-extension.md)。</span><span class="sxs-lookup"><span data-stu-id="fee19-110">For more information, see [Prerequisites for Installing a Schema Extension](prerequisites-for-installing-a-schema-extension.md).</span></span>
-   <span data-ttu-id="fee19-111">在執行任何動作之前，請檢查架構容器的 **allowedChildClassesEffective** 屬性，以確認您可以建立屬性和/或類別。</span><span class="sxs-lookup"><span data-stu-id="fee19-111">Before performing any action, check the **allowedChildClassesEffective** property of the schema container to verify that you can create attributes and/or classes.</span></span> <span data-ttu-id="fee19-112">如果 **attributeSchema** 和 **classSchema** 不是該屬性中的值，您就沒有足夠的許可權可以將屬性或類別加入至架構。</span><span class="sxs-lookup"><span data-stu-id="fee19-112">If **attributeSchema** and **classSchema** are not values in that property, you do not have sufficient rights to add attributes or classes to the schema.</span></span> <span data-ttu-id="fee19-113">如需詳細資訊，請參閱 [檢查許可權以建立架構物件的範例程式碼](example-code-for-checking-for-rights-to-create-schema-objects.md)。</span><span class="sxs-lookup"><span data-stu-id="fee19-113">For more information, see [Example Code for Checking for Rights to Create Schema Objects](example-code-for-checking-for-rights-to-create-schema-objects.md).</span></span>
-   <span data-ttu-id="fee19-114">確定已在架構主機的登錄中正確設定允許的架構更新。</span><span class="sxs-lookup"><span data-stu-id="fee19-114">Ensure that the Schema Update Allowed is set appropriately in the registry of the schema master.</span></span> <span data-ttu-id="fee19-115">若要建立或設定此值，請在應用程式清除常式中將其還原為其原始狀態。</span><span class="sxs-lookup"><span data-stu-id="fee19-115">To create or set this value, restore it to its original state as part of your application clean-up routine.</span></span> <span data-ttu-id="fee19-116">如需檢查和設定此值的詳細資訊，請參閱 [在架構主機上啟用架構變更](enabling-schema-changes-at-the-schema-master.md)。</span><span class="sxs-lookup"><span data-stu-id="fee19-116">For more information about checking and setting this value, see [Enabling Schema Changes at the Schema Master](enabling-schema-changes-at-the-schema-master.md).</span></span>
-   <span data-ttu-id="fee19-117">新增屬性或類別之前，請先確定它們不存在。</span><span class="sxs-lookup"><span data-stu-id="fee19-117">Before adding attributes or classes, be sure that they do not already exist.</span></span> <span data-ttu-id="fee19-118">如果存在，請確認它們是您要新增的相同屬性或類別，而不是使用與您的屬性或類別不相容之不同語法和屬性的其他人所建立的屬性或類別。</span><span class="sxs-lookup"><span data-stu-id="fee19-118">If they do exist, verify that they are the same attributes or classes you are adding and not an attribute or class created by someone with different syntax and properties that are incompatible with your attributes or classes.</span></span>

    <span data-ttu-id="fee19-119">針對屬性，請查詢 **cn**、 **attributeID**、 **governsID**、 **lDAPDisplayName** 和 **schemaIDGUID** ，以確定尚未使用這些屬性。</span><span class="sxs-lookup"><span data-stu-id="fee19-119">For attributes, query for **cn**, **attributeID**, **governsID**, **lDAPDisplayName**, and **schemaIDGUID** to ensure they are not already used.</span></span> <span data-ttu-id="fee19-120">如果您將一組連結屬性新增 (一個轉寄連結，) 一個上一頁連結，請確定 **linkID** 尚未使用。</span><span class="sxs-lookup"><span data-stu-id="fee19-120">If you add a set of linked attributes (one forward link, one back link), ensure that the **linkID** s are not already used.</span></span> <span data-ttu-id="fee19-121">查詢 **governsID** ，因為 (OID) 的物件識別碼在屬性和類別之間必須是唯一的。</span><span class="sxs-lookup"><span data-stu-id="fee19-121">Query for **governsID** because the object identifier (OID) must be unique among attributes and classes.</span></span>

    <span data-ttu-id="fee19-122">針對類別，請查詢 **cn**、 **governsID**、 **attributeID**、 **lDAPDisplayName** 和 **schemaIDGUID** ，以確保它們尚未使用。</span><span class="sxs-lookup"><span data-stu-id="fee19-122">For classes, query for **cn**, **governsID**, **attributeID**, **lDAPDisplayName**, and **schemaIDGUID** to ensure they are not already used.</span></span> <span data-ttu-id="fee19-123">**AttributeID** 的查詢，因為 OID 在類別和屬性之間必須是唯一的。</span><span class="sxs-lookup"><span data-stu-id="fee19-123">Query for **attributeID** because the OID must be unique among classes and attributes.</span></span>

    <span data-ttu-id="fee19-124">如需檢查命名衝突的詳細資訊，請參閱偵測 [架構命名衝突的範例程式碼](example-code-for-detecting-schema-naming-collisions.md)。</span><span class="sxs-lookup"><span data-stu-id="fee19-124">For more information about checking for naming collisions, see [Example Code for Detecting Schema Naming Collisions](example-code-for-detecting-schema-naming-collisions.md).</span></span>

    <span data-ttu-id="fee19-125">如果有屬性或類別與您的新屬性或類別發生衝突，您的應用程式不應該套用架構變更。</span><span class="sxs-lookup"><span data-stu-id="fee19-125">If attributes or classes exist that conflict with your new attributes or classes, your application should not apply your schema changes.</span></span>

-   <span data-ttu-id="fee19-126">如果有這類衝突，您的應用程式不應該套用架構變更。</span><span class="sxs-lookup"><span data-stu-id="fee19-126">If such a collision exists, your application should not apply your schema changes.</span></span> <span data-ttu-id="fee19-127">架構系統管理員可能需要解決衝突，然後再次執行您的應用程式。</span><span class="sxs-lookup"><span data-stu-id="fee19-127">The schema administrator may need to resolve the collision and then run your application again.</span></span> <span data-ttu-id="fee19-128">或者，您可以使用不同的 **lDAPDisplayName** ;不過，使用屬性或物件的任何應用程式都必須知道該變更。</span><span class="sxs-lookup"><span data-stu-id="fee19-128">Alternatively, a different **lDAPDisplayName** could be used; however, any applications using the attribute or object must be aware of that change.</span></span> <span data-ttu-id="fee19-129">若要協助避免 OID 衝突，請從 ISO 名稱登錄授權單位取得 OID。</span><span class="sxs-lookup"><span data-stu-id="fee19-129">To help avoid OID collisions, obtain an OID from an ISO name registration authority.</span></span>
-   <span data-ttu-id="fee19-130">如果您的應用程式相依于其已加入的屬性或類別，請先更新架構快取，再加入相依于這些屬性或類別的新屬性或類別。</span><span class="sxs-lookup"><span data-stu-id="fee19-130">If your application is dependent on attributes or classes that it has added, update the schema cache before adding the new attributes or classes that are dependent on those attributes or classes.</span></span> <span data-ttu-id="fee19-131">請注意， **schemaUpdateNow** 操作屬性是同步的。</span><span class="sxs-lookup"><span data-stu-id="fee19-131">Be aware that the **schemaUpdateNow** operational attribute is synchronous.</span></span> <span data-ttu-id="fee19-132">也就是說， [**IADs：:P**](/windows/desktop/api/iads/nf-iads-iads-put) 的工作區方法呼叫會封鎖，直到更新架構快取為止。</span><span class="sxs-lookup"><span data-stu-id="fee19-132">That is, the [**IADs::Put**](/windows/desktop/api/iads/nf-iads-iads-put) method call will block until the schema cache is updated.</span></span> <span data-ttu-id="fee19-133">當呼叫傳回時，就會更新架構快取，而且可以存取新的屬性和/或類別。</span><span class="sxs-lookup"><span data-stu-id="fee19-133">When the call returns, the schema cache has been updated and the new attributes and/or classes are accessible.</span></span>

    <span data-ttu-id="fee19-134">如需有關如何更新架構快取的詳細資訊，請參閱更新架構快取的 [範例程式碼](example-code-for-updating-the-schema-cache.md)。</span><span class="sxs-lookup"><span data-stu-id="fee19-134">For more information about how to update the schema cache, see [Example Code for Updating the Schema Cache](example-code-for-updating-the-schema-cache.md).</span></span>

 

 