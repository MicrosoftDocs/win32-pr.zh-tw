---
description: Windows 支援的所有檔案系統都會使用檔案和目錄的概念來存取儲存在磁片或裝置上的資料。
ms.assetid: 121cd5b2-e6fd-4eb4-99b4-b652d27b53e8
title: 命名檔案、路徑和命名空間
ms.custom: contperf-fy21q1
ms.topic: article
ms.date: 09/15/2020
ms.openlocfilehash: 59f626c931a61255cef8be9ede594cb97924cfb0
ms.sourcegitcommit: f374b50b37160b683da16b59ac9340282a8f50a5
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/04/2021
ms.locfileid: "106971271"
---
# <a name="naming-files-paths-and-namespaces"></a><span data-ttu-id="7dc07-103">命名檔案、路徑和命名空間</span><span class="sxs-lookup"><span data-stu-id="7dc07-103">Naming Files, Paths, and Namespaces</span></span>

<span data-ttu-id="7dc07-104">Windows 支援的所有檔案系統都會使用檔案和目錄的概念來存取儲存在磁片或裝置上的資料。</span><span class="sxs-lookup"><span data-stu-id="7dc07-104">All file systems supported by Windows use the concept of files and directories to access data stored on a disk or device.</span></span> <span data-ttu-id="7dc07-105">使用 Windows Api 進行檔案和裝置 i/o 的 windows 開發人員應該瞭解檔案和目錄的各種規則、慣例和名稱限制。</span><span class="sxs-lookup"><span data-stu-id="7dc07-105">Windows developers working with the Windows APIs for file and device I/O should understand the various rules, conventions, and limitations of names for files and directories.</span></span>

<span data-ttu-id="7dc07-106">您可以使用檔案 i/o Api，從磁片、裝置和網路共用存取資料。</span><span class="sxs-lookup"><span data-stu-id="7dc07-106">Data can be accessed from disks, devices, and network shares using file I/O APIs.</span></span> <span data-ttu-id="7dc07-107">檔案和目錄（以及命名空間）都屬於路徑概念的一部分，這是在何處取得資料的字串表示，無論資料是從磁片或裝置或特定作業的網路連接。</span><span class="sxs-lookup"><span data-stu-id="7dc07-107">Files and directories, along with namespaces, are part of the concept of a path, which is a string representation of where to get the data regardless if it's from a disk or a device or a network connection for a specific operation.</span></span>

<span data-ttu-id="7dc07-108">某些檔案系統（例如 NTFS）支援連結的檔案和目錄，也跟一般檔案或目錄一樣，也遵循檔案命名慣例和規則。</span><span class="sxs-lookup"><span data-stu-id="7dc07-108">Some file systems, such as NTFS, support linked files and directories, which also follow file naming conventions and rules just as a regular file or directory would.</span></span> <span data-ttu-id="7dc07-109">如需詳細資訊，請參閱永久 [連結和](hard-links-and-junctions.md) 連接以及重新 [分析點和檔案作業](reparse-points-and-file-operations.md)。</span><span class="sxs-lookup"><span data-stu-id="7dc07-109">For additional information, see [Hard Links and Junctions](hard-links-and-junctions.md) and [Reparse Points and File Operations](reparse-points-and-file-operations.md).</span></span>

<span data-ttu-id="7dc07-110">如需詳細資訊，請參閱下列小節：</span><span class="sxs-lookup"><span data-stu-id="7dc07-110">For additional information, see the following subsections:</span></span>

-   [<span data-ttu-id="7dc07-111">檔案和目錄名稱</span><span class="sxs-lookup"><span data-stu-id="7dc07-111">File and Directory Names</span></span>](#file-and-directory-names)
    -   [<span data-ttu-id="7dc07-112">命名慣例</span><span class="sxs-lookup"><span data-stu-id="7dc07-112">Naming Conventions</span></span>](#naming-conventions)
    -   [<span data-ttu-id="7dc07-113">簡短名稱與完整名稱</span><span class="sxs-lookup"><span data-stu-id="7dc07-113">Short vs. Long Names</span></span>](#short-vs-long-names)
-   [<span data-ttu-id="7dc07-114">路徑</span><span class="sxs-lookup"><span data-stu-id="7dc07-114">Paths</span></span>](#fully-qualified-vs-relative-paths)
    -   [<span data-ttu-id="7dc07-115">完整和相對路徑</span><span class="sxs-lookup"><span data-stu-id="7dc07-115">Fully Qualified vs. Relative Paths</span></span>](#fully-qualified-vs-relative-paths)
    -   [<span data-ttu-id="7dc07-116">最大路徑長度限制</span><span class="sxs-lookup"><span data-stu-id="7dc07-116">Maximum Path Length Limitation</span></span>](#maximum-path-length-limitation)
-   [<span data-ttu-id="7dc07-117">命名空間</span><span class="sxs-lookup"><span data-stu-id="7dc07-117">Namespaces</span></span>](#win32-file-namespaces)
    -   [<span data-ttu-id="7dc07-118">Win32 檔案命名空間</span><span class="sxs-lookup"><span data-stu-id="7dc07-118">Win32 File Namespaces</span></span>](#win32-file-namespaces)
    -   [<span data-ttu-id="7dc07-119">Win32 裝置命名空間</span><span class="sxs-lookup"><span data-stu-id="7dc07-119">Win32 Device Namespaces</span></span>](#win32-device-namespaces)
    -   [<span data-ttu-id="7dc07-120">NT 命名空間</span><span class="sxs-lookup"><span data-stu-id="7dc07-120">NT Namespaces</span></span>](#nt-namespaces)
-   [<span data-ttu-id="7dc07-121">相關主題</span><span class="sxs-lookup"><span data-stu-id="7dc07-121">Related topics</span></span>](#related-topics)


<span data-ttu-id="7dc07-122">若要瞭解如何將 Windows 10 設定為支援長檔案路徑，請參閱 [最大路徑長度限制](./maximum-file-path-limitation.md)。</span><span class="sxs-lookup"><span data-stu-id="7dc07-122">To learn about configuring Windows 10 to support long file paths, see [Maximum Path Length Limitation](./maximum-file-path-limitation.md).</span></span>


## <a name="file-and-directory-names"></a><span data-ttu-id="7dc07-123">檔案和目錄名稱</span><span class="sxs-lookup"><span data-stu-id="7dc07-123">File and Directory Names</span></span>

<span data-ttu-id="7dc07-124">所有檔案系統都會針對個別檔案遵循相同的一般命名慣例：基底檔案名和選用副檔名（以句號分隔）。</span><span class="sxs-lookup"><span data-stu-id="7dc07-124">All file systems follow the same general naming conventions for an individual file: a base file name and an optional extension, separated by a period.</span></span> <span data-ttu-id="7dc07-125">不過，每個檔案系統（例如 NTFS、CDFS.SYS、exFAT、UDF、FAT 和 FAT32）都可以有特定且不同的規則，以便在目錄或檔案的路徑中構成個別元件的形式。</span><span class="sxs-lookup"><span data-stu-id="7dc07-125">However, each file system, such as NTFS, CDFS, exFAT, UDFS, FAT, and FAT32, can have specific and differing rules about the formation of the individual components in the path to a directory or file.</span></span> <span data-ttu-id="7dc07-126">請注意， *目錄* 只是具有特殊屬性的檔案，並將它指定為目錄，但必須遵循所有與一般檔案相同的命名規則。</span><span class="sxs-lookup"><span data-stu-id="7dc07-126">Note that a *directory* is simply a file with a special attribute designating it as a directory, but otherwise must follow all the same naming rules as a regular file.</span></span> <span data-ttu-id="7dc07-127">由於「 *目錄* 」一詞是指檔案系統所關心的特殊檔案類型，因此有些參考資料會使用 *一般詞彙檔案* 來包含目錄和資料檔案的概念。</span><span class="sxs-lookup"><span data-stu-id="7dc07-127">Because the term *directory* simply refers to a special type of file as far as the file system is concerned, some reference material will use the general term *file* to encompass both concepts of directories and data files as such.</span></span> <span data-ttu-id="7dc07-128">基於這個原因，除非另有指定，否則檔案的任何命名或使用規則或範例也應套用至目錄。</span><span class="sxs-lookup"><span data-stu-id="7dc07-128">Because of this, unless otherwise specified, any naming or usage rules or examples for a file should also apply to a directory.</span></span> <span data-ttu-id="7dc07-129">「詞彙 *路徑* 」（path）是指一或多個目錄、反斜線，以及可能的磁片區名稱。</span><span class="sxs-lookup"><span data-stu-id="7dc07-129">The term *path* refers to one or more directories, backslashes, and possibly a volume name.</span></span> <span data-ttu-id="7dc07-130">如需詳細資訊，請參閱 [路徑](#fully-qualified-vs-relative-paths) 一節。</span><span class="sxs-lookup"><span data-stu-id="7dc07-130">For more information, see the [Paths](#fully-qualified-vs-relative-paths) section.</span></span>

<span data-ttu-id="7dc07-131">字元計數限制也可以不同，而且會根據所使用的檔案系統和路徑名稱首碼格式而有所不同。</span><span class="sxs-lookup"><span data-stu-id="7dc07-131">Character count limitations can also be different and can vary depending on the file system and path name prefix format used.</span></span> <span data-ttu-id="7dc07-132">這對回溯相容性機制的支援會更複雜。</span><span class="sxs-lookup"><span data-stu-id="7dc07-132">This is further complicated by support for backward compatibility mechanisms.</span></span> <span data-ttu-id="7dc07-133">例如，較舊的 MS-DOS FAT 檔案系統最多支援8個字元作為基底檔案名和3個字元的副檔名，總共12個字元，包括點分隔符號。</span><span class="sxs-lookup"><span data-stu-id="7dc07-133">For example, the older MS-DOS FAT file system supports a maximum of 8 characters for the base file name and 3 characters for the extension, for a total of 12 characters including the dot separator.</span></span> <span data-ttu-id="7dc07-134">這通常稱為 *8.3 檔案名*。</span><span class="sxs-lookup"><span data-stu-id="7dc07-134">This is commonly known as an *8.3 file name*.</span></span> <span data-ttu-id="7dc07-135">Windows FAT 和 NTFS 檔案系統不限於8.3 檔案名，因為它們的檔案名 *支援很長*，但仍支援8.3 版的長檔名。</span><span class="sxs-lookup"><span data-stu-id="7dc07-135">The Windows FAT and NTFS file systems are not limited to 8.3 file names, because they have *long file name support*, but they still support the 8.3 version of long file names.</span></span>

### <a name="naming-conventions"></a><span data-ttu-id="7dc07-136">命名規範</span><span class="sxs-lookup"><span data-stu-id="7dc07-136">Naming Conventions</span></span>

<span data-ttu-id="7dc07-137">下列基本規則可讓應用程式建立及處理檔案和目錄的有效名稱，而不論檔案系統為何：</span><span class="sxs-lookup"><span data-stu-id="7dc07-137">The following fundamental rules enable applications to create and process valid names for files and directories, regardless of the file system:</span></span>

-   <span data-ttu-id="7dc07-138">使用句點將基底檔案名與目錄或檔案的名稱中的副檔名分隔開來。</span><span class="sxs-lookup"><span data-stu-id="7dc07-138">Use a period to separate the base file name from the extension in the name of a directory or file.</span></span>
-   <span data-ttu-id="7dc07-139">使用反斜線 (\\) 來分隔 *路徑* 的 *元件*。</span><span class="sxs-lookup"><span data-stu-id="7dc07-139">Use a backslash (\\) to separate the *components* of a *path*.</span></span> <span data-ttu-id="7dc07-140">反斜線會將檔案名與路徑的路徑分開，並將另一個目錄名稱從路徑中的另一個目錄名稱分割。</span><span class="sxs-lookup"><span data-stu-id="7dc07-140">The backslash divides the file name from the path to it, and one directory name from another directory name in a path.</span></span> <span data-ttu-id="7dc07-141">您不能在實際的檔案或目錄名稱中使用反斜線，因為它是將名稱分隔成元件的保留字元。</span><span class="sxs-lookup"><span data-stu-id="7dc07-141">You cannot use a backslash in the name for the actual file or directory because it is a reserved character that separates the names into components.</span></span>
-   <span data-ttu-id="7dc07-142">使用反斜線做為[磁片區名稱](naming-a-volume.md)的一部分，例如，通用命名慣例的 "c：" 中的 "c："、" \\ c： \\ path \\ file" 或 "server \\ \\ \\ share" （ \\ \\ \\ \\ \\ 適用于通用命名慣例 (UNC) 名稱）。</span><span class="sxs-lookup"><span data-stu-id="7dc07-142">Use a backslash as required as part of [volume names](naming-a-volume.md), for example, the "C:\\" in "C:\\path\\file" or the "\\\\server\\share" in "\\\\server\\share\\path\\file" for Universal Naming Convention (UNC) names.</span></span> <span data-ttu-id="7dc07-143">如需 UNC 名稱的詳細資訊，請參閱 [最大路徑長度限制](#maximum-path-length-limitation) 一節。</span><span class="sxs-lookup"><span data-stu-id="7dc07-143">For more information about UNC names, see the [Maximum Path Length Limitation](#maximum-path-length-limitation) section.</span></span>
-   <span data-ttu-id="7dc07-144">請勿採用區分大小寫。</span><span class="sxs-lookup"><span data-stu-id="7dc07-144">Do not assume case sensitivity.</span></span> <span data-ttu-id="7dc07-145">例如，假設有一些檔案系統 (（例如 POSIX 相容的檔案系統）時，將 OSCAR、Oscar 和 oscar 的名稱視為相同，) 可能會將它們視為不同。</span><span class="sxs-lookup"><span data-stu-id="7dc07-145">For example, consider the names OSCAR, Oscar, and oscar to be the same, even though some file systems (such as a POSIX-compliant file system) may consider them as different.</span></span> <span data-ttu-id="7dc07-146">請注意，NTFS 支援 POSIX 語義以區分大小寫，但這不是預設行為。</span><span class="sxs-lookup"><span data-stu-id="7dc07-146">Note that NTFS supports POSIX semantics for case sensitivity but this is not the default behavior.</span></span> <span data-ttu-id="7dc07-147">如需詳細資訊，請參閱 [**CreateFile**](/windows/desktop/api/FileAPI/nf-fileapi-createfilea)。</span><span class="sxs-lookup"><span data-stu-id="7dc07-147">For more information, see [**CreateFile**](/windows/desktop/api/FileAPI/nf-fileapi-createfilea).</span></span>
-   <span data-ttu-id="7dc07-148">磁片區指示項 (磁碟機號) 同樣不區分大小寫。</span><span class="sxs-lookup"><span data-stu-id="7dc07-148">Volume designators (drive letters) are similarly case-insensitive.</span></span> <span data-ttu-id="7dc07-149">例如，"D： \\ " 和 "D： \\ " 指的是相同的磁片區。</span><span class="sxs-lookup"><span data-stu-id="7dc07-149">For example, "D:\\" and "d:\\" refer to the same volume.</span></span>
-   <span data-ttu-id="7dc07-150">使用目前字碼頁中的任何字元做為名稱，包括擴充字元集中的 Unicode 字元和字元 (128 – 255) ，但下列情況除外：</span><span class="sxs-lookup"><span data-stu-id="7dc07-150">Use any character in the current code page for a name, including Unicode characters and characters in the extended character set (128–255), except for the following:</span></span>

    -   <span data-ttu-id="7dc07-151">下列保留字元：</span><span class="sxs-lookup"><span data-stu-id="7dc07-151">The following reserved characters:</span></span>

        -   <span data-ttu-id="7dc07-152">< (小於)</span><span class="sxs-lookup"><span data-stu-id="7dc07-152">< (less than)</span></span>
        -   <span data-ttu-id="7dc07-153">\> (大於) </span><span class="sxs-lookup"><span data-stu-id="7dc07-153">\> (greater than)</span></span>
        -   <span data-ttu-id="7dc07-154">： (冒號) </span><span class="sxs-lookup"><span data-stu-id="7dc07-154">: (colon)</span></span>
        -   <span data-ttu-id="7dc07-155">" (雙引號)</span><span class="sxs-lookup"><span data-stu-id="7dc07-155">" (double quote)</span></span>
        -   <span data-ttu-id="7dc07-156">/ (正斜線)</span><span class="sxs-lookup"><span data-stu-id="7dc07-156">/ (forward slash)</span></span>
        -   <span data-ttu-id="7dc07-157">\\ (反斜線) </span><span class="sxs-lookup"><span data-stu-id="7dc07-157">\\ (backslash)</span></span>
        -   <span data-ttu-id="7dc07-158">\| (分隔號形圖或管道) </span><span class="sxs-lookup"><span data-stu-id="7dc07-158">\| (vertical bar or pipe)</span></span>
        -   <span data-ttu-id="7dc07-159">?</span><span class="sxs-lookup"><span data-stu-id="7dc07-159">?</span></span> <span data-ttu-id="7dc07-160">(問號)</span><span class="sxs-lookup"><span data-stu-id="7dc07-160">(question mark)</span></span>
        -   <span data-ttu-id="7dc07-161">\* (星號) </span><span class="sxs-lookup"><span data-stu-id="7dc07-161">\* (asterisk)</span></span>

    -   <span data-ttu-id="7dc07-162">整數值零，有時稱為 ASCII *NUL* 字元。</span><span class="sxs-lookup"><span data-stu-id="7dc07-162">Integer value zero, sometimes referred to as the ASCII *NUL* character.</span></span>
    -   <span data-ttu-id="7dc07-163">整數表示的字元在1到31的範圍內，但允許這些字元的替換資料流程除外。</span><span class="sxs-lookup"><span data-stu-id="7dc07-163">Characters whose integer representations are in the range from 1 through 31, except for alternate data streams where these characters are allowed.</span></span> <span data-ttu-id="7dc07-164">如需檔案資料流程的詳細資訊，請參閱檔案 [資料流程](file-streams.md)。</span><span class="sxs-lookup"><span data-stu-id="7dc07-164">For more information about file streams, see [File Streams](file-streams.md).</span></span>
    -   <span data-ttu-id="7dc07-165">目的檔案系統不允許的其他任何字元。</span><span class="sxs-lookup"><span data-stu-id="7dc07-165">Any other character that the target file system does not allow.</span></span>

-   <span data-ttu-id="7dc07-166">使用句點做為路徑中的目錄 *元件* 以表示目前的目錄，例如 "。 \\temp.txt」。</span><span class="sxs-lookup"><span data-stu-id="7dc07-166">Use a period as a directory *component* in a path to represent the current directory, for example ".\\temp.txt".</span></span> <span data-ttu-id="7dc07-167">如需詳細資訊，請參閱 [路徑](#fully-qualified-vs-relative-paths)。</span><span class="sxs-lookup"><span data-stu-id="7dc07-167">For more information, see [Paths](#fully-qualified-vs-relative-paths).</span></span>
-   <span data-ttu-id="7dc07-168"> (，請使用兩個連續的句點。) 做為路徑中的目錄 *元件* ，以代表目前的目錄的父系，例如 ".. \\temp.txt」。</span><span class="sxs-lookup"><span data-stu-id="7dc07-168">Use two consecutive periods (..) as a directory *component* in a path to represent the parent of the current directory, for example "..\\temp.txt".</span></span> <span data-ttu-id="7dc07-169">如需詳細資訊，請參閱 [路徑](#fully-qualified-vs-relative-paths)。</span><span class="sxs-lookup"><span data-stu-id="7dc07-169">For more information, see [Paths](#fully-qualified-vs-relative-paths).</span></span>
-   <span data-ttu-id="7dc07-170">請勿使用下列保留名稱作為檔案名：</span><span class="sxs-lookup"><span data-stu-id="7dc07-170">Do not use the following reserved names for the name of a file:</span></span>

    <span data-ttu-id="7dc07-171">CON、PRN、AUX、NUL、COM1、COM2、COM3、COM4、COM5、COM6、COM7、COM8、COM9、LPT1、LPT2、LPT3、LPT4、LPT5、LPT6、LPT7、LPT8 和 LPT9。</span><span class="sxs-lookup"><span data-stu-id="7dc07-171">CON, PRN, AUX, NUL, COM1, COM2, COM3, COM4, COM5, COM6, COM7, COM8, COM9, LPT1, LPT2, LPT3, LPT4, LPT5, LPT6, LPT7, LPT8, and LPT9.</span></span> <span data-ttu-id="7dc07-172">也請避免這些名稱後面緊接著延伸模組;例如，不建議使用 NUL.txt。</span><span class="sxs-lookup"><span data-stu-id="7dc07-172">Also avoid these names followed immediately by an extension; for example, NUL.txt is not recommended.</span></span> <span data-ttu-id="7dc07-173">如需詳細資訊，請參閱[命名空間](#win32-file-namespaces)。</span><span class="sxs-lookup"><span data-stu-id="7dc07-173">For more information, see [Namespaces](#win32-file-namespaces).</span></span>

-   <span data-ttu-id="7dc07-174">請勿以空格或句號結束檔案或目錄名稱。</span><span class="sxs-lookup"><span data-stu-id="7dc07-174">Do not end a file or directory name with a space or a period.</span></span> <span data-ttu-id="7dc07-175">雖然基礎檔案系統可能支援這類名稱，但 Windows shell 和使用者介面則不支援。</span><span class="sxs-lookup"><span data-stu-id="7dc07-175">Although the underlying file system may support such names, the Windows shell and user interface does not.</span></span> <span data-ttu-id="7dc07-176">不過，您可以將句號指定為名稱的第一個字元。</span><span class="sxs-lookup"><span data-stu-id="7dc07-176">However, it is acceptable to specify a period as the first character of a name.</span></span> <span data-ttu-id="7dc07-177">例如，"temp"。</span><span class="sxs-lookup"><span data-stu-id="7dc07-177">For example, ".temp".</span></span>

### <a name="short-vs-long-names"></a><span data-ttu-id="7dc07-178">簡短名稱與完整名稱</span><span class="sxs-lookup"><span data-stu-id="7dc07-178">Short vs. Long Names</span></span>

<span data-ttu-id="7dc07-179">很長的檔案名會視為任何檔案名，而不是超過簡短的 MS-DOS (也稱為 *8.3*) 樣式的命名慣例。</span><span class="sxs-lookup"><span data-stu-id="7dc07-179">A long file name is considered to be any file name that exceeds the short MS-DOS (also called *8.3*) style naming convention.</span></span> <span data-ttu-id="7dc07-180">當您建立較長的檔案名時，Windows 也可能會建立名稱為 *8.3 別名* 或簡短名稱的簡短8.3 格式，並將它儲存在磁片上。</span><span class="sxs-lookup"><span data-stu-id="7dc07-180">When you create a long file name, Windows may also create a short 8.3 form of the name, called the *8.3 alias* or short name, and store it on disk also.</span></span> <span data-ttu-id="7dc07-181">根據特定檔案系統而定，您可以針對全系統或指定磁片區的效能原因來停用此8.3 別名。</span><span class="sxs-lookup"><span data-stu-id="7dc07-181">This 8.3 aliasing can be disabled for performance reasons either systemwide or for a specified volume, depending on the particular file system.</span></span>

<span data-ttu-id="7dc07-182">在 Windows 7 和 Windows Server 2008 R2 之前，無法停用指定磁片區的 **Windows server 2008、Windows Vista、Windows server 2003 和 WINDOWS XP：** 8.3 別名。</span><span class="sxs-lookup"><span data-stu-id="7dc07-182">**Windows Server 2008, Windows Vista, Windows Server 2003 and Windows XP:** 8.3 aliasing cannot be disabled for specified volumes until Windows 7 and Windows Server 2008 R2.</span></span>

<span data-ttu-id="7dc07-183">在許多檔案系統中，檔案名會包含一個波狀符號 (~) 名稱太長而不符合8.3 命名規則的每個元件中。</span><span class="sxs-lookup"><span data-stu-id="7dc07-183">On many file systems, a file name will contain a tilde (~) within each component of the name that is too long to comply with 8.3 naming rules.</span></span>

> [!Note]  
> <span data-ttu-id="7dc07-184">並非所有檔案系統都遵循波狀符號替代慣例，而系統也可以設定為停用8.3 別名產生（即使它們通常支援的話）。</span><span class="sxs-lookup"><span data-stu-id="7dc07-184">Not all file systems follow the tilde substitution convention, and systems can be configured to disable 8.3 alias generation even if they normally support it.</span></span> <span data-ttu-id="7dc07-185">因此，請勿假設8.3 別名已經存在於磁片上。</span><span class="sxs-lookup"><span data-stu-id="7dc07-185">Therefore, do not make the assumption that the 8.3 alias already exists on-disk.</span></span>

 

<span data-ttu-id="7dc07-186">若要從系統要求8.3 檔案名、長檔名或檔案的完整路徑，請考慮下列選項：</span><span class="sxs-lookup"><span data-stu-id="7dc07-186">To request 8.3 file names, long file names, or the full path of a file from the system, consider the following options:</span></span>

-   <span data-ttu-id="7dc07-187">若要取得完整檔案名的8.3 格式，請使用 [**GetShortPathName**](/windows/desktop/api/FileAPI/nf-fileapi-getshortpathnamew) 函數。</span><span class="sxs-lookup"><span data-stu-id="7dc07-187">To get the 8.3 form of a long file name, use the [**GetShortPathName**](/windows/desktop/api/FileAPI/nf-fileapi-getshortpathnamew) function.</span></span>
-   <span data-ttu-id="7dc07-188">若要取得簡短名稱的完整檔案名版本，請使用 [**GetLongPathName**](/windows/desktop/api/FileAPI/nf-fileapi-getlongpathnamea) 函數。</span><span class="sxs-lookup"><span data-stu-id="7dc07-188">To get the long file name version of a short name, use the [**GetLongPathName**](/windows/desktop/api/FileAPI/nf-fileapi-getlongpathnamea) function.</span></span>
-   <span data-ttu-id="7dc07-189">若要取得檔案的完整路徑，請使用 [**>getfullpathname**](/windows/desktop/api/FileAPI/nf-fileapi-getfullpathnamea) 函數。</span><span class="sxs-lookup"><span data-stu-id="7dc07-189">To get the full path to a file, use the [**GetFullPathName**](/windows/desktop/api/FileAPI/nf-fileapi-getfullpathnamea) function.</span></span>

<span data-ttu-id="7dc07-190">在較新的檔案系統（例如 NTFS、exFAT、UDF 和 FAT32）上，Windows 會以 Unicode 將長檔名儲存在磁片上，這表示一律會保留原始的長檔名。</span><span class="sxs-lookup"><span data-stu-id="7dc07-190">On newer file systems, such as NTFS, exFAT, UDFS, and FAT32, Windows stores the long file names on disk in Unicode, which means that the original long file name is always preserved.</span></span> <span data-ttu-id="7dc07-191">即使在磁片讀取或寫入作業期間使用中的字碼頁，這也是如此。</span><span class="sxs-lookup"><span data-stu-id="7dc07-191">This is true even if a long file name contains extended characters, regardless of the code page that is active during a disk read or write operation.</span></span>

<span data-ttu-id="7dc07-192">使用長檔名的檔案可在 NTFS 檔案系統磁碟分割和 Windows FAT 檔案系統分割區之間複製，而不會遺失任何檔案名資訊。</span><span class="sxs-lookup"><span data-stu-id="7dc07-192">Files using long file names can be copied between NTFS file system partitions and Windows FAT file system partitions without losing any file name information.</span></span> <span data-ttu-id="7dc07-193">這可能不適合舊版 MS-DOS FAT 和某些類型的 CDFS.SYS (CD-ROM) 檔案系統，視實際的檔案名而定。</span><span class="sxs-lookup"><span data-stu-id="7dc07-193">This may not be true for the older MS-DOS FAT and some types of CDFS (CD-ROM) file systems, depending on the actual file name.</span></span> <span data-ttu-id="7dc07-194">在此情況下，會在可能的情況下替換簡短的檔案名。</span><span class="sxs-lookup"><span data-stu-id="7dc07-194">In this case, the short file name is substituted if possible.</span></span>

## <a name="paths"></a><span data-ttu-id="7dc07-195">路徑</span><span class="sxs-lookup"><span data-stu-id="7dc07-195">Paths</span></span>

<span data-ttu-id="7dc07-196">指定檔案的 *路徑* 是由一或多個 *元件* 所組成，以特殊字元 (反斜線) ，每個元件通常是目錄名稱或檔案名，但有一些值得注意的例外狀況，如下所述。</span><span class="sxs-lookup"><span data-stu-id="7dc07-196">The *path* to a specified file consists of one or more *components*, separated by a special character (a backslash), with each component usually being a directory name or file name, but with some notable exceptions discussed below.</span></span> <span data-ttu-id="7dc07-197">在系統解釋路徑的開頭或 *前置* 詞外觀時，通常是很重要的。</span><span class="sxs-lookup"><span data-stu-id="7dc07-197">It is often critical to the system's interpretation of a path what the beginning, or *prefix*, of the path looks like.</span></span> <span data-ttu-id="7dc07-198">這個前置詞會決定路徑所使用的 *命名空間* ，以及在路徑內的哪個位置（包括最後一個字元）使用哪些特殊字元。</span><span class="sxs-lookup"><span data-stu-id="7dc07-198">This prefix determines the *namespace* the path is using, and additionally what special characters are used in which position within the path, including the last character.</span></span>

<span data-ttu-id="7dc07-199">如果路徑的元件是檔案名，它必須是最後一個元件。</span><span class="sxs-lookup"><span data-stu-id="7dc07-199">If a component of a path is a file name, it must be the last component.</span></span>

<span data-ttu-id="7dc07-200">路徑的每個元件也會受限於針對特定檔案系統指定的最大長度。</span><span class="sxs-lookup"><span data-stu-id="7dc07-200">Each component of a path will also be constrained by the maximum length specified for a particular file system.</span></span> <span data-ttu-id="7dc07-201">一般而言，這些規則分為兩個類別： *short* 和 *long*。</span><span class="sxs-lookup"><span data-stu-id="7dc07-201">In general, these rules fall into two categories: *short* and *long*.</span></span> <span data-ttu-id="7dc07-202">請注意，檔案系統會將目錄名稱儲存為特殊類型的檔案，但檔案的命名規則也適用于目錄名稱。</span><span class="sxs-lookup"><span data-stu-id="7dc07-202">Note that directory names are stored by the file system as a special type of file, but naming rules for files also apply to directory names.</span></span> <span data-ttu-id="7dc07-203">總而言之，路徑只是存在於特定檔案或目錄名稱的所有目錄之間的階層字串表示。</span><span class="sxs-lookup"><span data-stu-id="7dc07-203">To summarize, a path is simply the string representation of the hierarchy between all of the directories that exist for a particular file or directory name.</span></span>

### <a name="fully-qualified-vs-relative-paths"></a><span data-ttu-id="7dc07-204">完整和相對路徑</span><span class="sxs-lookup"><span data-stu-id="7dc07-204">Fully Qualified vs. Relative Paths</span></span>

<span data-ttu-id="7dc07-205">對於操作檔案的 Windows API 函式，檔案名通常會相對於目前的目錄，而某些 Api 則需要完整路徑。</span><span class="sxs-lookup"><span data-stu-id="7dc07-205">For Windows API functions that manipulate files, file names can often be relative to the current directory, while some APIs require a fully qualified path.</span></span> <span data-ttu-id="7dc07-206">如果檔案名的開頭不是下列其中一項，則會是相對於目前的目錄的檔案名：</span><span class="sxs-lookup"><span data-stu-id="7dc07-206">A file name is relative to the current directory if it does not begin with one of the following:</span></span>

-   <span data-ttu-id="7dc07-207">任何格式的 UNC 名稱，一律以兩個反斜線字元開頭 ( " \\ \\ " ) 。</span><span class="sxs-lookup"><span data-stu-id="7dc07-207">A UNC name of any format, which always start with two backslash characters ("\\\\").</span></span> <span data-ttu-id="7dc07-208">如需詳細資訊，請參閱下一節。</span><span class="sxs-lookup"><span data-stu-id="7dc07-208">For more information, see the next section.</span></span>
-   <span data-ttu-id="7dc07-209">具有反斜線的磁片指示項，例如 "C： \\ " 或 "d： \\ "。</span><span class="sxs-lookup"><span data-stu-id="7dc07-209">A disk designator with a backslash, for example "C:\\" or "d:\\".</span></span>
-   <span data-ttu-id="7dc07-210">單一反斜線，例如 " \\ directory" 或 " \\file.txt"。</span><span class="sxs-lookup"><span data-stu-id="7dc07-210">A single backslash, for example, "\\directory" or "\\file.txt".</span></span> <span data-ttu-id="7dc07-211">這也稱為 *絕對路徑*。</span><span class="sxs-lookup"><span data-stu-id="7dc07-211">This is also referred to as an *absolute path*.</span></span>

<span data-ttu-id="7dc07-212">如果檔案名的開頭只有磁片指示項，但不是冒號之後的反斜線，則會以指定的字母解釋為磁片磁碟機上目前目錄的相對路徑。</span><span class="sxs-lookup"><span data-stu-id="7dc07-212">If a file name begins with only a disk designator but not the backslash after the colon, it is interpreted as a relative path to the current directory on the drive with the specified letter.</span></span> <span data-ttu-id="7dc07-213">請注意，根據在該磁片上最新的「變更目錄」作業期間所設定的內容而定，目前目錄可能會或可能不是根目錄。</span><span class="sxs-lookup"><span data-stu-id="7dc07-213">Note that the current directory may or may not be the root directory depending on what it was set to during the most recent "change directory" operation on that disk.</span></span> <span data-ttu-id="7dc07-214">此格式的範例如下所示：</span><span class="sxs-lookup"><span data-stu-id="7dc07-214">Examples of this format are as follows:</span></span>

-   <span data-ttu-id="7dc07-215">"C:tmp.txt" 指的是磁片磁碟機 C 上目前目錄中名為 "tmp.txt" 的檔案。</span><span class="sxs-lookup"><span data-stu-id="7dc07-215">"C:tmp.txt" refers to a file named "tmp.txt" in the current directory on drive C.</span></span>
-   <span data-ttu-id="7dc07-216">「C:tempdir \\tmp.txt」指的是在磁片磁碟機 C 上的目前的目錄子目錄中的檔案。</span><span class="sxs-lookup"><span data-stu-id="7dc07-216">"C:tempdir\\tmp.txt" refers to a file in a subdirectory to the current directory on drive C.</span></span>

<span data-ttu-id="7dc07-217">如果路徑包含「雙點」，則也稱為相對路徑;也就是說，路徑的一個元件中有兩個句號。</span><span class="sxs-lookup"><span data-stu-id="7dc07-217">A path is also said to be relative if it contains "double-dots"; that is, two periods together in one component of the path.</span></span> <span data-ttu-id="7dc07-218">這個特殊規範是用來表示目前目錄上方的目錄，也就是所謂的「上層目錄」。</span><span class="sxs-lookup"><span data-stu-id="7dc07-218">This special specifier is used to denote the directory above the current directory, otherwise known as the "parent directory".</span></span> <span data-ttu-id="7dc07-219">此格式的範例如下所示：</span><span class="sxs-lookup"><span data-stu-id="7dc07-219">Examples of this format are as follows:</span></span>

-   <span data-ttu-id="7dc07-220">"..\\tmp.txt」會指定名為 tmp.txt 的檔案，該檔案位於目前的目錄的父系。</span><span class="sxs-lookup"><span data-stu-id="7dc07-220">"..\\tmp.txt" specifies a file named tmp.txt located in the parent of the current directory.</span></span>
-   <span data-ttu-id="7dc07-221">"..\\..\\tmp.txt」指定的檔案是目前目錄上方的兩個目錄。</span><span class="sxs-lookup"><span data-stu-id="7dc07-221">"..\\..\\tmp.txt" specifies a file that is two directories above the current directory.</span></span>
-   <span data-ttu-id="7dc07-222">"..\\tempdir \\tmp.txt」會指定名為 tmp.txt 的檔案，該目錄位於名為 tempdir 的目錄中，而該目錄是目前目錄的對等目錄。</span><span class="sxs-lookup"><span data-stu-id="7dc07-222">"..\\tempdir\\tmp.txt" specifies a file named tmp.txt located in a directory named tempdir that is a peer directory to the current directory.</span></span>

<span data-ttu-id="7dc07-223">相對路徑可以結合這兩種範例類型，例如 "C:.. \\tmp.txt」。</span><span class="sxs-lookup"><span data-stu-id="7dc07-223">Relative paths can combine both example types, for example "C:..\\tmp.txt".</span></span> <span data-ttu-id="7dc07-224">這項功能很有用，因為雖然系統會追蹤目前磁片磁碟機以及該磁片磁碟機的目前的目錄，但它也會追蹤每個不同磁碟機號的目前目錄 (如果您的系統有一個以上的) ，不論哪一個磁片磁碟機指示項設定為目前磁片磁碟機。</span><span class="sxs-lookup"><span data-stu-id="7dc07-224">This is useful because, although the system keeps track of the current drive along with the current directory of that drive, it also keeps track of the current directories in each of the different drive letters (if your system has more than one), regardless of which drive designator is set as the current drive.</span></span>

### <a name="maximum-path-length-limitation"></a><span data-ttu-id="7dc07-225">最大路徑長度限制</span><span class="sxs-lookup"><span data-stu-id="7dc07-225">Maximum Path Length Limitation</span></span>


<span data-ttu-id="7dc07-226">在 Windows 10 1607 版之前的 Windows 版本中，路徑的最大長度是定義為260個字元的 **最大 \_ 路徑**。</span><span class="sxs-lookup"><span data-stu-id="7dc07-226">In editions of Windows before Windows 10 version 1607, the maximum length for a path is **MAX\_PATH**, which is defined as 260 characters.</span></span> <span data-ttu-id="7dc07-227">在更新版本的 Windows 中，必須變更登錄機碼或使用群組原則工具，才能移除限制。</span><span class="sxs-lookup"><span data-stu-id="7dc07-227">In later versions of Windows, changing a registry key or using the Group Policy tool is required to remove the limit.</span></span> <span data-ttu-id="7dc07-228">如需完整的詳細資料，請參閱 [最大路徑長度限制](./maximum-file-path-limitation.md) 。</span><span class="sxs-lookup"><span data-stu-id="7dc07-228">See [Maximum Path Length Limitation](./maximum-file-path-limitation.md) for full details.</span></span>


## <a name="namespaces"></a><span data-ttu-id="7dc07-229">命名空間</span><span class="sxs-lookup"><span data-stu-id="7dc07-229">Namespaces</span></span>

<span data-ttu-id="7dc07-230">Windows Api 中使用的命名空間慣例有兩種主要類別，通常稱為 *NT 命名* 空間和 *Win32 命名空間*。</span><span class="sxs-lookup"><span data-stu-id="7dc07-230">There are two main categories of namespace conventions used in the Windows APIs, commonly referred to as *NT namespaces* and the *Win32 namespaces*.</span></span> <span data-ttu-id="7dc07-231">NT 命名空間的設計是將其他子系統和命名空間存在的最低層級命名空間，包括 Win32 子系統和延伸模組（Win32 namespace）。</span><span class="sxs-lookup"><span data-stu-id="7dc07-231">The NT namespace was designed to be the lowest level namespace on which other subsystems and namespaces could exist, including the Win32 subsystem and, by extension, the Win32 namespaces.</span></span> <span data-ttu-id="7dc07-232">POSIX 是 Windows 中以 NT 命名空間為基礎的另一個子系統範例。</span><span class="sxs-lookup"><span data-stu-id="7dc07-232">POSIX is another example of a subsystem in Windows that is built on top of the NT namespace.</span></span> <span data-ttu-id="7dc07-233">早期版本的 Windows 也為某些特殊裝置定義了數個預先定義或保留的名稱，例如通訊 (串列和平行) 埠，而預設顯示主控台則是現在稱為 NT 裝置命名空間的一部分，而且在目前的 Windows 版本中仍支援，以提供回溯相容性。</span><span class="sxs-lookup"><span data-stu-id="7dc07-233">Early versions of Windows also defined several predefined, or reserved, names for certain special devices such as communications (serial and parallel) ports and the default display console as part of what is now called the NT device namespace, and are still supported in current versions of Windows for backward compatibility.</span></span>

### <a name="win32-file-namespaces"></a><span data-ttu-id="7dc07-234">Win32 檔案命名空間</span><span class="sxs-lookup"><span data-stu-id="7dc07-234">Win32 File Namespaces</span></span>

<span data-ttu-id="7dc07-235">Win32 命名空間前置和慣例會在本節和下一節中摘要說明，並說明其使用方式的說明。</span><span class="sxs-lookup"><span data-stu-id="7dc07-235">The Win32 namespace prefixing and conventions are summarized in this section and the following section, with descriptions of how they are used.</span></span> <span data-ttu-id="7dc07-236">請注意，這些範例適用于 Windows API 函式，而且不一定能搭配 Windows shell 應用程式使用，例如 Windows 檔案總管。</span><span class="sxs-lookup"><span data-stu-id="7dc07-236">Note that these examples are intended for use with the Windows API functions and do not all necessarily work with Windows shell applications such as Windows Explorer.</span></span> <span data-ttu-id="7dc07-237">基於這個理由，您可以使用這些命名空間慣例，從通常可從 Windows shell 應用程式取得的可能路徑範圍更廣，並且可以使用這些命名空間慣例來開發利用此功能的 Windows 應用程式。</span><span class="sxs-lookup"><span data-stu-id="7dc07-237">For this reason there is a wider range of possible paths than is usually available from Windows shell applications, and Windows applications that take advantage of this can be developed using these namespace conventions.</span></span>

<span data-ttu-id="7dc07-238">若為檔案 i/o， \\ \\ 路徑字串的 "？ \\ " 前置詞會指示 Windows api 停用所有的字串剖析，並將緊接在它的字串直接傳送到檔案系統。</span><span class="sxs-lookup"><span data-stu-id="7dc07-238">For file I/O, the "\\\\?\\" prefix to a path string tells the Windows APIs to disable all string parsing and to send the string that follows it straight to the file system.</span></span> <span data-ttu-id="7dc07-239">例如，如果檔案系統支援大型路徑和檔案名，您可以超過 Windows Api 所強制執行的 **最大 \_ 路徑** 限制。</span><span class="sxs-lookup"><span data-stu-id="7dc07-239">For example, if the file system supports large paths and file names, you can exceed the **MAX\_PATH** limits that are otherwise enforced by the Windows APIs.</span></span> <span data-ttu-id="7dc07-240">如需一般最大路徑限制的詳細資訊，請參閱上一節 [最大路徑長度限制](#maximum-path-length-limitation)。</span><span class="sxs-lookup"><span data-stu-id="7dc07-240">For more information about the normal maximum path limitation, see the previous section [Maximum Path Length Limitation](#maximum-path-length-limitation).</span></span>

<span data-ttu-id="7dc07-241">因為它會關閉路徑字串的自動展開，所以 " \\ \\ ？ \\ " 前置詞也允許在路徑名稱中使用 ".." 和 "."，如果您嘗試使用這些其他保留的相對路徑規範來執行檔案作業，這會很有用。</span><span class="sxs-lookup"><span data-stu-id="7dc07-241">Because it turns off automatic expansion of the path string, the "\\\\?\\" prefix also allows the use of ".." and "." in the path names, which can be useful if you are attempting to perform operations on a file with these otherwise reserved relative path specifiers as part of the fully qualified path.</span></span>

<span data-ttu-id="7dc07-242">許多檔案 i/o api 都支援 " \\ \\ ？ \\ "; 您應該查看每個 API 的參考主題以確定。</span><span class="sxs-lookup"><span data-stu-id="7dc07-242">Many but not all file I/O APIs support "\\\\?\\"; you should look at the reference topic for each API to be sure.</span></span> 

<span data-ttu-id="7dc07-243">請注意，您應該使用 Unicode api 來確定 " \\ \\ ？ \\ " 前置詞允許超過 **最大 \_ 路徑**</span><span class="sxs-lookup"><span data-stu-id="7dc07-243">Note that Unicode APIs should be used to make sure the "\\\\?\\" prefix allows you to exceed the **MAX\_PATH**</span></span> 

### <a name="win32-device-namespaces"></a><span data-ttu-id="7dc07-244">Win32 裝置命名空間</span><span class="sxs-lookup"><span data-stu-id="7dc07-244">Win32 Device Namespaces</span></span>

<span data-ttu-id="7dc07-245">" \\ \\ . \\ " 前置詞會存取 win32 裝置命名空間，而不是 win32 檔案命名空間。</span><span class="sxs-lookup"><span data-stu-id="7dc07-245">The "\\\\.\\" prefix will access the Win32 device namespace instead of the Win32 file namespace.</span></span> <span data-ttu-id="7dc07-246">如果 API 支援這種類型的存取，就可以直接完成實體磁片和磁片區的存取，而不需要透過檔案系統。</span><span class="sxs-lookup"><span data-stu-id="7dc07-246">This is how access to physical disks and volumes is accomplished directly, without going through the file system, if the API supports this type of access.</span></span> <span data-ttu-id="7dc07-247">您可以使用 [**CreateFile**](/windows/desktop/api/FileAPI/nf-fileapi-createfilea) 和 [**DefineDosDevice**](/windows/desktop/api/FileAPI/nf-fileapi-definedosdevicew) 功能來存取 (磁片以外的許多裝置，例如) 。</span><span class="sxs-lookup"><span data-stu-id="7dc07-247">You can access many devices other than disks this way (using the [**CreateFile**](/windows/desktop/api/FileAPI/nf-fileapi-createfilea) and [**DefineDosDevice**](/windows/desktop/api/FileAPI/nf-fileapi-definedosdevicew) functions, for example).</span></span>

<span data-ttu-id="7dc07-248">例如，如果您想要開啟系統的序列通訊埠1，您可以在對 [**CreateFile**](/windows/desktop/api/FileAPI/nf-fileapi-createfilea) 函式的呼叫中使用 "COM1"。</span><span class="sxs-lookup"><span data-stu-id="7dc07-248">For example, if you want to open the system's serial communications port 1, you can use "COM1" in the call to the [**CreateFile**](/windows/desktop/api/FileAPI/nf-fileapi-createfilea) function.</span></span> <span data-ttu-id="7dc07-249">這是因為 COM1 – COM9 是 NT 命名空間中保留名稱的一部分，不過使用 " \\ \\ . \\ " 前置詞也可以使用這些裝置名稱。</span><span class="sxs-lookup"><span data-stu-id="7dc07-249">This works because COM1–COM9 are part of the reserved names in the NT namespace, although using the "\\\\.\\" prefix will also work with these device names.</span></span> <span data-ttu-id="7dc07-250">相較之下，如果您已安裝100埠序列擴充面板，而且想要開啟 COM56，則無法使用 "COM56" 開啟它，因為沒有預先定義的 NT 命名空間可供 COM56。</span><span class="sxs-lookup"><span data-stu-id="7dc07-250">By comparison, if you have a 100 port serial expansion board installed and want to open COM56, you cannot open it using "COM56" because there is no predefined NT namespace for COM56.</span></span> <span data-ttu-id="7dc07-251">您將需要使用 "來開啟它 \\ \\ 。 \\COM56 "，因為" \\ \\ . \\ "會直接移至裝置命名空間，而不會嘗試找出預先定義的別名。</span><span class="sxs-lookup"><span data-stu-id="7dc07-251">You will need to open it using "\\\\.\\COM56" because "\\\\.\\" goes directly to the device namespace without attempting to locate a predefined alias.</span></span>

<span data-ttu-id="7dc07-252">使用 Win32 裝置命名空間的另一個範例是使用 [**CreateFile**](/windows/desktop/api/FileAPI/nf-fileapi-createfilea)函數搭配 " \\ \\ 。 \\PhysicalDisk *x*" (其中 *x* 是有效的整數值) 或" \\ \\ 。 \\CdRom *X*」。</span><span class="sxs-lookup"><span data-stu-id="7dc07-252">Another example of using the Win32 device namespace is using the [**CreateFile**](/windows/desktop/api/FileAPI/nf-fileapi-createfilea) function with "\\\\.\\PhysicalDisk *X*" (where *X* is a valid integer value) or "\\\\.\\CdRom *X*".</span></span> <span data-ttu-id="7dc07-253">這可讓您直接存取這些裝置，略過檔案系統。</span><span class="sxs-lookup"><span data-stu-id="7dc07-253">This allows you to access those devices directly, bypassing the file system.</span></span> <span data-ttu-id="7dc07-254">這是因為這些裝置名稱是由系統所建立，因為系統會列舉這些裝置，而某些驅動程式也會在系統中建立其他別名。</span><span class="sxs-lookup"><span data-stu-id="7dc07-254">This works because these device names are created by the system as these devices are enumerated, and some drivers will also create other aliases in the system.</span></span> <span data-ttu-id="7dc07-255">例如，執行名稱 "C：" 的設備磁碟機 \\ 有自己的命名空間，也就是檔案系統。</span><span class="sxs-lookup"><span data-stu-id="7dc07-255">For example, the device driver that implements the name "C:\\" has its own namespace that also happens to be the file system.</span></span>

<span data-ttu-id="7dc07-256">經過 [**CreateFile**](/windows/desktop/api/FileAPI/nf-fileapi-createfilea)函式的 api 通常會使用 " \\ \\ . \\ " 前置詞，因為 **CreateFile** 是用來開啟檔案和裝置的函式，取決於您使用的參數。</span><span class="sxs-lookup"><span data-stu-id="7dc07-256">APIs that go through the [**CreateFile**](/windows/desktop/api/FileAPI/nf-fileapi-createfilea) function generally work with the "\\\\.\\" prefix because **CreateFile** is the function used to open both files and devices, depending on the parameters you use.</span></span>

<span data-ttu-id="7dc07-257">如果您正在使用 Windows API 函式，您應該使用 " \\ \\ . \\ " 前置詞來只存取裝置，而不是存取檔案。</span><span class="sxs-lookup"><span data-stu-id="7dc07-257">If you're working with Windows API functions, you should use the "\\\\.\\" prefix to access devices only and not files.</span></span>

<span data-ttu-id="7dc07-258">大部分的 api 不支援 " \\ \\ . \\ "; 只有設計用來處理裝置命名空間的 api 才能辨識它。</span><span class="sxs-lookup"><span data-stu-id="7dc07-258">Most APIs won't support "\\\\.\\"; only those that are designed to work with the device namespace will recognize it.</span></span> <span data-ttu-id="7dc07-259">請一律檢查每個 API 的參考主題以確定。</span><span class="sxs-lookup"><span data-stu-id="7dc07-259">Always check the reference topic for each API to be sure.</span></span>

### <a name="nt-namespaces"></a><span data-ttu-id="7dc07-260">NT 命名空間</span><span class="sxs-lookup"><span data-stu-id="7dc07-260">NT Namespaces</span></span>

<span data-ttu-id="7dc07-261">此外，也有 Api 可允許使用 NT 命名空間慣例，但 Windows 物件管理員在大部分情況下都不需要這樣做。</span><span class="sxs-lookup"><span data-stu-id="7dc07-261">There are also APIs that allow the use of the NT namespace convention, but the Windows Object Manager makes that unnecessary in most cases.</span></span> <span data-ttu-id="7dc07-262">為了說明這一點，使用 Windows Sysinternals [WinObj](/sysinternals/downloads/winobj) 工具在系統物件瀏覽器中流覽 windows 命名空間相當有用。</span><span class="sxs-lookup"><span data-stu-id="7dc07-262">To illustrate, it is useful to browse the Windows namespaces in the system object browser using the Windows Sysinternals [WinObj](/sysinternals/downloads/winobj) tool.</span></span> <span data-ttu-id="7dc07-263">當您執行此工具時，您看到的是 NT 命名空間（從根目錄開始）或 " \\ "。</span><span class="sxs-lookup"><span data-stu-id="7dc07-263">When you run this tool, what you see is the NT namespace beginning at the root, or "\\".</span></span> <span data-ttu-id="7dc07-264">名為 "Global？？" 的子資料夾</span><span class="sxs-lookup"><span data-stu-id="7dc07-264">The subfolder called "Global??"</span></span> <span data-ttu-id="7dc07-265">是 Win32 命名空間所在的位置。</span><span class="sxs-lookup"><span data-stu-id="7dc07-265">is where the Win32 namespace resides.</span></span> <span data-ttu-id="7dc07-266">命名裝置物件位於 "Device" 子目錄內的 NT 命名空間中。</span><span class="sxs-lookup"><span data-stu-id="7dc07-266">Named device objects reside in the NT namespace within the "Device" subdirectory.</span></span> <span data-ttu-id="7dc07-267">您也可以在這裡找到 Serial0 和 Serial1，代表您的系統上的前兩個 COM 埠的裝置物件。</span><span class="sxs-lookup"><span data-stu-id="7dc07-267">Here you may also find Serial0 and Serial1, the device objects representing the first two COM ports if present on your system.</span></span> <span data-ttu-id="7dc07-268">代表磁片區的裝置物件會是類似 "HarddiskVolume1" 的內容，雖然數值尾碼可能不同。</span><span class="sxs-lookup"><span data-stu-id="7dc07-268">A device object representing a volume would be something like "HarddiskVolume1", although the numeric suffix may vary.</span></span> <span data-ttu-id="7dc07-269">子目錄 "Harddisk0" 下的名稱 "DR0" 是代表磁片的裝置物件範例，依此類推。</span><span class="sxs-lookup"><span data-stu-id="7dc07-269">The name "DR0" under subdirectory "Harddisk0" is an example of the device object representing a disk, and so on.</span></span>

<span data-ttu-id="7dc07-270">為了讓 Windows 應用程式能夠存取這些裝置物件，設備磁碟機會建立符號連結， (在 Win32 命名空間中將) 的符號連結，也就是在其各自的裝置物件中。</span><span class="sxs-lookup"><span data-stu-id="7dc07-270">To make these device objects accessible by Windows applications, the device drivers create a symbolic link (symlink) in the Win32 namespace, "Global??", to their respective device objects.</span></span> <span data-ttu-id="7dc07-271">例如，在 "Global？？" 底下的 COM0 和 COM1</span><span class="sxs-lookup"><span data-stu-id="7dc07-271">For example, COM0 and COM1 under the "Global??"</span></span> <span data-ttu-id="7dc07-272">子目錄只是符號連結至 Serial0 和 Serial1，"C：" 是 HarddiskVolume1 的連結，">physicaldrive0" 是要 DR0 的符號連結，依此類推。</span><span class="sxs-lookup"><span data-stu-id="7dc07-272">subdirectory are simply symlinks to Serial0 and Serial1, "C:" is a symlink to HarddiskVolume1, "Physicaldrive0" is a symlink to DR0, and so on.</span></span> <span data-ttu-id="7dc07-273">如果沒有連結，則會使用先前所述的 Win32 命名空間慣例，將指定的裝置 "Xxx" 提供給任何 Windows 應用程式。</span><span class="sxs-lookup"><span data-stu-id="7dc07-273">Without a symlink, a specified device "Xxx" will not be available to any Windows application using Win32 namespace conventions as described previously.</span></span> <span data-ttu-id="7dc07-274">不過，您可以使用任何支援 NT 命名空間絕對路徑 " \\ device Xxx" 格式的 api，將控制碼開啟至該裝置 \\ 。</span><span class="sxs-lookup"><span data-stu-id="7dc07-274">However, a handle could be opened to that device using any APIs that support the NT namespace absolute path of the format "\\Device\\Xxx".</span></span>

<span data-ttu-id="7dc07-275">透過終端機服務和虛擬機器加入多使用者支援，就能進一步將 Win32 命名空間內整個系統的根裝置虛擬化。</span><span class="sxs-lookup"><span data-stu-id="7dc07-275">With the addition of multi-user support via Terminal Services and virtual machines, it has further become necessary to virtualize the system-wide root device within the Win32 namespace.</span></span> <span data-ttu-id="7dc07-276">這是藉由將名稱為 "GLOBALROOT" 的符號新增至 Win32 命名空間來完成，您可以在 "Global？？" 中看到這個命名空間。</span><span class="sxs-lookup"><span data-stu-id="7dc07-276">This was accomplished by adding the symlink named "GLOBALROOT" to the Win32 namespace, which you can see in the "Global??"</span></span> <span data-ttu-id="7dc07-277">先前討論過的 WinObj 瀏覽器工具子目錄，並可透過「？」路徑存取 \\ \\ 。 \\GLOBALROOT".</span><span class="sxs-lookup"><span data-stu-id="7dc07-277">subdirectory of the WinObj browser tool previously discussed, and can access via the path "\\\\?\\GLOBALROOT".</span></span> <span data-ttu-id="7dc07-278">這個前置詞可確保之後的路徑會查看系統物件管理員的真實根路徑，而不是會話相依的路徑。</span><span class="sxs-lookup"><span data-stu-id="7dc07-278">This prefix ensures that the path following it looks in the true root path of the system object manager and not a session-dependent path.</span></span>

## <a name="related-topics"></a><span data-ttu-id="7dc07-279">相關主題</span><span class="sxs-lookup"><span data-stu-id="7dc07-279">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="7dc07-280">檔案系統功能比較</span><span class="sxs-lookup"><span data-stu-id="7dc07-280">File System Functionality Comparison</span></span>](filesystem-functionality-comparison.md)
</dt> </dl>

 

 