---
description: MS-DOS 裝置名稱是指向 MS-DOS 裝置路徑的連接點。 這些連接會組成 MS-DOS 裝置命名空間。
ms.assetid: 7d802e9f-dc09-4e3d-b064-e9b57af396e2
title: 定義 MS-DOS 裝置名稱
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7ed89e1d9938e320ecce3ff0b35b8ae0792fe219
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/07/2021
ms.locfileid: "106993062"
---
# <a name="defining-an-ms-dos-device-name"></a><span data-ttu-id="5b7d0-104">定義 MS-DOS 裝置名稱</span><span class="sxs-lookup"><span data-stu-id="5b7d0-104">Defining an MS-DOS Device Name</span></span>

<span data-ttu-id="5b7d0-105">MS-DOS 裝置名稱是指向 MS-DOS 裝置路徑的連接點。</span><span class="sxs-lookup"><span data-stu-id="5b7d0-105">An MS-DOS device name is a junction that points to the path of an MS-DOS device.</span></span> <span data-ttu-id="5b7d0-106">這些連接會組成 MS-DOS 裝置命名空間。</span><span class="sxs-lookup"><span data-stu-id="5b7d0-106">These junctions make up the MS-DOS device namespace.</span></span> <span data-ttu-id="5b7d0-107">呼叫 [**DefineDosDevice**](/windows/desktop/api/FileAPI/nf-fileapi-definedosdevicew) 和 [**SetVolumeMountPoint**](/windows/desktop/api/WinBase/nf-winbase-setvolumemountpointa) 函數來建立和修改這些連接。</span><span class="sxs-lookup"><span data-stu-id="5b7d0-107">Call the [**DefineDosDevice**](/windows/desktop/api/FileAPI/nf-fileapi-definedosdevicew) and [**SetVolumeMountPoint**](/windows/desktop/api/WinBase/nf-winbase-setvolumemountpointa) functions to create and modify these junctions.</span></span> <span data-ttu-id="5b7d0-108">[**DeleteVolumeMountPoint**](/windows/desktop/api/FileAPI/nf-fileapi-deletevolumemountpointw) 會刪除 **SetVolumeMountPoint** 所建立的連接點，而 **DefineDosDevice** 會刪除它所建立的連接。</span><span class="sxs-lookup"><span data-stu-id="5b7d0-108">[**DeleteVolumeMountPoint**](/windows/desktop/api/FileAPI/nf-fileapi-deletevolumemountpointw) deletes a junction created by **SetVolumeMountPoint**, and **DefineDosDevice** deletes junctions it creates.</span></span>

<span data-ttu-id="5b7d0-109">定義 MS-DOS 裝置名稱之後，所有進程都可以看到它。</span><span class="sxs-lookup"><span data-stu-id="5b7d0-109">After an MS-DOS device name is defined, it remains visible to all processes.</span></span>

-   <span data-ttu-id="5b7d0-110">所有 MS-DOS 裝置都會透過驗證識別碼以 Windows 識別。</span><span class="sxs-lookup"><span data-stu-id="5b7d0-110">All MS-DOS devices are identified by Windows through an authentication ID.</span></span> <span data-ttu-id="5b7d0-111">驗證識別碼是在建立時，與每個登入會話相關聯的 LUID (本機唯一識別碼) 。</span><span class="sxs-lookup"><span data-stu-id="5b7d0-111">An authentication ID is the LUID (locally unique identifier) associated with each logon session when created.</span></span>
-   <span data-ttu-id="5b7d0-112">MS-DOS 裝置名稱的可見度會分類為全域或本機，並定義為包含在全域 MS-DOS 裝置和本機 MS-DOS 裝置命名空間中。</span><span class="sxs-lookup"><span data-stu-id="5b7d0-112">The visibility of an MS-DOS device name is categorized as either global or local, and is defined as such by its inclusion in the Global MS-DOS Device and Local MS-DOS Device namespaces.</span></span> <span data-ttu-id="5b7d0-113">所有使用者都可以存取全域命名空間中的 MS-DOS 裝置內容，而且只有存取權杖包含與該本機 MS-DOS 裝置命名空間相關聯的 AuthenticationID，才能存取本機命名空間中的 MS-DOS 裝置內容。</span><span class="sxs-lookup"><span data-stu-id="5b7d0-113">The contents of MS-DOS devices in the Global namespace can be accessed by all users, and the contents of MS-DOS devices in the Local namespace can be accessed only by the user whose access token contains the AuthenticationID associated with that Local MS-DOS device namespace.</span></span>

<span data-ttu-id="5b7d0-114">多個本機 MS-DOS 裝置命名空間，一次只能存在於一部電腦上。</span><span class="sxs-lookup"><span data-stu-id="5b7d0-114">Multiple Local MS-DOS Device namespaces and only one Global MS-DOS Device namespace may exist at one time and on one machine.</span></span>

<span data-ttu-id="5b7d0-115">請注意，只有在 LocalSystem 內容中執行的處理常式可以呼叫 [**DefineDosDevice**](/windows/desktop/api/FileAPI/nf-fileapi-definedosdevicew) ，以在全域 MS-DOS 裝置命名空間中建立 MS-DOS 裝置。</span><span class="sxs-lookup"><span data-stu-id="5b7d0-115">Note that only processes running in the LocalSystem context can call [**DefineDosDevice**](/windows/desktop/api/FileAPI/nf-fileapi-definedosdevicew) to create an MS-DOS device in the Global MS-DOS device namespace.</span></span> <span data-ttu-id="5b7d0-116">此外，當移除該 AuthenticationID 的最後一個參考時，會刪除對應至特定 AuthenticationID 的本機 MS-DOS 裝置命名空間。</span><span class="sxs-lookup"><span data-stu-id="5b7d0-116">Also, the Local MS-DOS device namespace corresponding to a specific AuthenticationID is deleted when the last reference to that AuthenticationID is removed.</span></span>

<span data-ttu-id="5b7d0-117">當您的程式碼藉由呼叫 [**QueryDosDevice**](/windows/desktop/api/FileAPI/nf-fileapi-querydosdevicew)來查詢現有的 ms-dos 裝置名稱時，它會先搜尋本機 MS-DOS 裝置命名空間。</span><span class="sxs-lookup"><span data-stu-id="5b7d0-117">When your code queries an existing MS-DOS device name by calling [**QueryDosDevice**](/windows/desktop/api/FileAPI/nf-fileapi-querydosdevicew), it first searches the Local MS-DOS Device namespace.</span></span> <span data-ttu-id="5b7d0-118">如果在該處找不到，此函式就會搜尋全域 MS-DOS 裝置命名空間。</span><span class="sxs-lookup"><span data-stu-id="5b7d0-118">If it is not found there, the function will then search the Global MS-DOS Device namespace.</span></span> <span data-ttu-id="5b7d0-119">當您的程式碼透過此函式查詢所有現有的 MS-DOS 裝置名稱時，傳回的名稱清單取決於是否正在 LocalSystem 內容中執行。</span><span class="sxs-lookup"><span data-stu-id="5b7d0-119">When your code queries all existing MS-DOS device names through this function, the list of names that are returned is dependent on whether it is running in the LocalSystem context.</span></span> <span data-ttu-id="5b7d0-120">如果是，則只會傳回全域 MS-DOS 裝置命名空間中包含的 MS-DOS 裝置名稱。</span><span class="sxs-lookup"><span data-stu-id="5b7d0-120">If so, only the MS-DOS device names included in the Global MS-DOS Device namespace will be returned.</span></span> <span data-ttu-id="5b7d0-121">如果不是，將會傳回全域和本機 MS-DOS 裝置命名空間中的裝置名稱串連。</span><span class="sxs-lookup"><span data-stu-id="5b7d0-121">If not, a concatenation of the device names in the Global and Local MS-DOS Device namespaces will be returned.</span></span> <span data-ttu-id="5b7d0-122">如果兩個命名空間都有裝置名稱， **QueryDosDevice** 會傳回本機 MS-DOS 裝置命名空間中的專案。</span><span class="sxs-lookup"><span data-stu-id="5b7d0-122">If a device name exists in both namespaces, **QueryDosDevice** will return the entry in the Local MS-DOS Device namespace.</span></span> <span data-ttu-id="5b7d0-123">這也適用于 [**GetLogicalDrives**](/windows/desktop/api/FileAPI/nf-fileapi-getlogicaldrives) 和 [**GetLogicalDriveStrings**](/windows/desktop/api/FileAPI/nf-fileapi-getlogicaldrivestringsw)傳回的所有 MS-DOS 裝置名稱清單。</span><span class="sxs-lookup"><span data-stu-id="5b7d0-123">This also applies to the list of all MS-DOS device names returned by [**GetLogicalDrives**](/windows/desktop/api/FileAPI/nf-fileapi-getlogicaldrives) and [**GetLogicalDriveStrings**](/windows/desktop/api/FileAPI/nf-fileapi-getlogicaldrivestringsw).</span></span>

<span data-ttu-id="5b7d0-124">請注意，可能會發生下列情況：</span><span class="sxs-lookup"><span data-stu-id="5b7d0-124">Note that the following scenario may occur:</span></span>

1.  <span data-ttu-id="5b7d0-125">使用者 A （未在 LocalSystem 內容中執行）會在對應的本機 MS-DOS 裝置命名空間中建立裝置名稱，且該裝置名稱不存在於全域 MS-DOS 裝置命名空間中。</span><span class="sxs-lookup"><span data-stu-id="5b7d0-125">User A, who is not running within the LocalSystem context, creates a device name in the corresponding Local MS-DOS Device namespace, and that device name does not exist in the Global MS-DOS Device namespace.</span></span>
2.  <span data-ttu-id="5b7d0-126">使用者 B 在 LocalSystem 內容中執行時，會在全域 MS-DOS 裝置命名空間中建立相同的裝置名稱。</span><span class="sxs-lookup"><span data-stu-id="5b7d0-126">User B, who is running within the LocalSystem context, creates the same device name in the Global MS-DOS Device namespace.</span></span>

<span data-ttu-id="5b7d0-127">在此案例中，使用者 A 將無法存取全域 MS-DOS 裝置命名空間中的裝置名稱，除非他或她移除或重新命名其本機 MS-DOS 裝置命名空間中的裝置名稱。</span><span class="sxs-lookup"><span data-stu-id="5b7d0-127">In this scenario, User A will not have access to the device name in the Global MS-DOS Device namespace until he or she removes or renames the device name in his or her Local MS-DOS Device namespace.</span></span> <span data-ttu-id="5b7d0-128">若要降低發生這種情況的可能性，您應該在全域 MS-DOS 裝置命名空間中配置 MS-DOS 磁碟機號（開頭為 C：），並以 Z:. 結尾。</span><span class="sxs-lookup"><span data-stu-id="5b7d0-128">To reduce the likelihood of this scenario occurring, MS-DOS drive letters should be allocated in the Global MS-DOS Device namespace starting with C: and ending with Z:.</span></span> <span data-ttu-id="5b7d0-129">此順序應該針對本機 MS-DOS 裝置命名空間中的 MS-DOS 磁碟機號配置進行反轉。</span><span class="sxs-lookup"><span data-stu-id="5b7d0-129">This sequence should be reversed for the allocation of MS-DOS drive letters in the Local MS-DOS Device namespace.</span></span>

<span data-ttu-id="5b7d0-130">如果您不是在 LocalSystem 內容中執行， [**DefineDosDevice**](/windows/desktop/api/FileAPI/nf-fileapi-definedosdevicew) 將不允許您在本機 MS-DOS 裝置命名空間中定義裝置名稱，如果該裝置名稱已存在於您的本機或全域 MS-DOS 裝置命名空間中。</span><span class="sxs-lookup"><span data-stu-id="5b7d0-130">If you are not running within the LocalSystem context, [**DefineDosDevice**](/windows/desktop/api/FileAPI/nf-fileapi-definedosdevicew) will not allow you to define a device name in the Local MS-DOS Device namespace if that device name already exists in your Local or Global MS-DOS Device namespaces.</span></span> <span data-ttu-id="5b7d0-131">呼叫 **DefineDosDevice** 之前，請先呼叫 [**QueryDosDevice**](/windows/desktop/api/FileAPI/nf-fileapi-querydosdevicew) ，以判斷您想要定義的裝置名稱是否存在於 MS-DOS 裝置命名空間中。</span><span class="sxs-lookup"><span data-stu-id="5b7d0-131">Call [**QueryDosDevice**](/windows/desktop/api/FileAPI/nf-fileapi-querydosdevicew) before calling **DefineDosDevice** to determine whether the device name you intend to define exists in your MS-DOS Device namespaces.</span></span>

## <a name="related-topics"></a><span data-ttu-id="5b7d0-132">相關主題</span><span class="sxs-lookup"><span data-stu-id="5b7d0-132">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="5b7d0-133">命名檔案、路徑和命名空間</span><span class="sxs-lookup"><span data-stu-id="5b7d0-133">Naming Files, Paths, and Namespaces</span></span>](naming-a-file.md)
</dt> </dl>

 

 



