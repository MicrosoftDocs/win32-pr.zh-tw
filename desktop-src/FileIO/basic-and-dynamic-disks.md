---
description: 描述兩種磁片儲存體類型，並討論分割區樣式。
ms.assetid: 5d511654-92e0-4236-80e7-bb2417403186
title: 基本和動態磁碟
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cd3b52767983c7707f619b83c93e987b51879fdd
ms.sourcegitcommit: 3d9dce1bd6c84e2b51759e940aa95aa9b459cd20
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 03/04/2021
ms.locfileid: "103945728"
---
# <a name="basic-and-dynamic-disks"></a><span data-ttu-id="6ba69-103">基本和動態磁碟</span><span class="sxs-lookup"><span data-stu-id="6ba69-103">Basic and Dynamic Disks</span></span>

<span data-ttu-id="6ba69-104">在分割磁片磁碟機或取得磁片磁碟機磁碟分割配置的相關資訊之前，您必須先瞭解基本和動態磁碟儲存體類型的功能和限制。</span><span class="sxs-lookup"><span data-stu-id="6ba69-104">Before partitioning a drive or getting information about the partition layout of a drive, you must first understand the features and limitations of basic and dynamic disk storage types.</span></span>

<span data-ttu-id="6ba69-105">基於本主題的目的，「磁片區」一詞是用來參考磁碟分割的概念，該磁片 *分區是由* Windows 作業系統用來儲存檔案的有效檔案系統（最常使用 NTFS）所格式化。</span><span class="sxs-lookup"><span data-stu-id="6ba69-105">For the purposes of this topic, the term *volume* is used to refer to the concept of a disk partition formatted with a valid file system, most commonly NTFS, that is used by the Windows operating system to store files.</span></span> <span data-ttu-id="6ba69-106">磁片區具有 Win32 路徑名稱，可由 [**FindFirstVolume**](/windows/desktop/api/FileAPI/nf-fileapi-findfirstvolumew) 和 [**FindNextVolume**](/windows/desktop/api/FileAPI/nf-fileapi-findnextvolumew) 函式列舉，而且通常會有指派給它的磁碟機號，例如 c：</span><span class="sxs-lookup"><span data-stu-id="6ba69-106">A volume has a Win32 path name, can be enumerated by the [**FindFirstVolume**](/windows/desktop/api/FileAPI/nf-fileapi-findfirstvolumew) and [**FindNextVolume**](/windows/desktop/api/FileAPI/nf-fileapi-findnextvolumew) functions, and usually has a drive letter assigned to it, such as C:.</span></span> <span data-ttu-id="6ba69-107">如需有關磁片區和檔案系統的詳細資訊，請參閱 [檔案系統](file-systems.md)。</span><span class="sxs-lookup"><span data-stu-id="6ba69-107">For more information about volumes and file systems, see [File Systems](file-systems.md).</span></span>

<span data-ttu-id="6ba69-108">本主題內容：</span><span class="sxs-lookup"><span data-stu-id="6ba69-108">In this topic:</span></span>

-   [<span data-ttu-id="6ba69-109">基本磁碟</span><span class="sxs-lookup"><span data-stu-id="6ba69-109">Basic Disks</span></span>](#basic-disks)
-   [<span data-ttu-id="6ba69-110">動態磁碟</span><span class="sxs-lookup"><span data-stu-id="6ba69-110">Dynamic Disks</span></span>](#dynamic-disks)
-   [<span data-ttu-id="6ba69-111">分割區樣式</span><span class="sxs-lookup"><span data-stu-id="6ba69-111">Partition Styles</span></span>](#partition-styles)
    -   [<span data-ttu-id="6ba69-112">主開機記錄</span><span class="sxs-lookup"><span data-stu-id="6ba69-112">Master Boot Record</span></span>](#master-boot-record)
    -   [<span data-ttu-id="6ba69-113">GUID 磁碟分割表格</span><span class="sxs-lookup"><span data-stu-id="6ba69-113">GUID Partition Table</span></span>](#guid-partition-table)
-   [<span data-ttu-id="6ba69-114">偵測磁片類型</span><span class="sxs-lookup"><span data-stu-id="6ba69-114">Detecting the Type of Disk</span></span>](#detecting-the-type-of-disk)
-   [<span data-ttu-id="6ba69-115">相關主題</span><span class="sxs-lookup"><span data-stu-id="6ba69-115">Related topics</span></span>](#related-topics)

<span data-ttu-id="6ba69-116">在此內容中參考儲存體類型時，有兩種類型的磁片： *基本磁碟* 和 *動態磁碟*。</span><span class="sxs-lookup"><span data-stu-id="6ba69-116">There are two types of disks when referring to storage types in this context: *basic disks* and *dynamic disks*.</span></span> <span data-ttu-id="6ba69-117">請注意，此處所討論的儲存體類型與實體磁片或分割區樣式不同，但有不同的概念。</span><span class="sxs-lookup"><span data-stu-id="6ba69-117">Note that the storage types discussed here are not the same as physical disks or partition styles, which are related but separate concepts.</span></span> <span data-ttu-id="6ba69-118">例如，參考基本磁碟並不代表特定的磁碟分割樣式，也需要指定用於討論之磁片的磁碟分割樣式。</span><span class="sxs-lookup"><span data-stu-id="6ba69-118">For example, referring to a basic disk does not imply a particular partition style—the partition style used for the disk under discussion would also need to be specified.</span></span> <span data-ttu-id="6ba69-119">如需基本磁碟儲存體類型與實體硬碟的關聯方式的簡化說明，請參閱 [磁片裝置和磁碟分割](disk-devices-and-partitions.md)。</span><span class="sxs-lookup"><span data-stu-id="6ba69-119">For a simplified description of how a basic disk storage type relates to a physical hard disk, see [Disk Devices and Partitions](disk-devices-and-partitions.md).</span></span>

## <a name="basic-disks"></a><span data-ttu-id="6ba69-120">基本磁碟</span><span class="sxs-lookup"><span data-stu-id="6ba69-120">Basic Disks</span></span>

<span data-ttu-id="6ba69-121">*基本磁碟* 是最常搭配 Windows 使用的儲存體類型。</span><span class="sxs-lookup"><span data-stu-id="6ba69-121">*Basic disks* are the storage types most often used with Windows.</span></span> <span data-ttu-id="6ba69-122">*基本磁碟* 一詞是指包含磁碟分割的磁片，例如主要磁碟分割和邏輯磁片磁碟機，而這些磁碟分割通常會以檔案系統格式化，以成為檔案儲存的磁片區。</span><span class="sxs-lookup"><span data-stu-id="6ba69-122">The term *basic disk* refers to a disk that contains partitions, such as primary partitions and logical drives, and these in turn are usually formatted with a file system to become a volume for file storage.</span></span> <span data-ttu-id="6ba69-123">基本磁碟提供簡單的儲存體解決方案，可容納一系列實用的儲存體需求案例。</span><span class="sxs-lookup"><span data-stu-id="6ba69-123">Basic disks provide a simple storage solution that can accommodate a useful array of changing storage requirement scenarios.</span></span> <span data-ttu-id="6ba69-124">基本磁碟也支援叢集磁片、美國的電氣和電子技術工程師 (IEEE) 1394 磁片，以及通用序列匯流排 (USB) 抽取式磁碟機。</span><span class="sxs-lookup"><span data-stu-id="6ba69-124">Basic disks also support clustered disks, Institute of Electrical and Electronics Engineers (IEEE) 1394 disks, and universal serial bus (USB) removable drives.</span></span> <span data-ttu-id="6ba69-125">為了回溯相容性，基本磁碟通常會使用相同的主開機記錄 (MBR) 磁碟分割樣式作為 Microsoft MS-DOS 作業系統和所有 Windows 版本所使用的磁片，但也可以在支援的系統上支援 **GUID** 磁碟分割表格 (GPT) 磁碟分割。</span><span class="sxs-lookup"><span data-stu-id="6ba69-125">For backward compatibility, basic disks usually use the same Master Boot Record (MBR) partition style as the disks used by the Microsoft MS-DOS operating system and all versions of Windows but can also support **GUID** Partition Table (GPT) partitions on systems that support it.</span></span> <span data-ttu-id="6ba69-126">如需有關 MBR 和 GPT 磁碟分割樣式的詳細資訊，請參閱 [磁碟分割樣式](#partition-styles) 一節。</span><span class="sxs-lookup"><span data-stu-id="6ba69-126">For more information about MBR and GPT partition styles, see the [Partition Styles](#partition-styles) section.</span></span>

<span data-ttu-id="6ba69-127">您可以藉由將現有的主要磁碟分割及邏輯磁碟機延伸到相同磁碟上相鄰的連續未配置空間，將更多空間新增至這些磁碟區。</span><span class="sxs-lookup"><span data-stu-id="6ba69-127">You can add more space to existing primary partitions and logical drives by extending them into adjacent, contiguous unallocated space on the same disk.</span></span> <span data-ttu-id="6ba69-128">若要延伸基本磁碟區，必須以 NTFS 檔案系統來格式化該磁碟區。</span><span class="sxs-lookup"><span data-stu-id="6ba69-128">To extend a basic volume, it must be formatted with the NTFS file system.</span></span> <span data-ttu-id="6ba69-129">您可以在包含邏輯磁碟機之延伸磁碟分割的連續可用空間內延伸該磁碟機。</span><span class="sxs-lookup"><span data-stu-id="6ba69-129">You can extend a logical drive within contiguous free space in the extended partition that contains it.</span></span> <span data-ttu-id="6ba69-130">如果您延伸邏輯磁碟機超出延伸磁碟分割中提供的可用空間，只要延伸磁碟分割後面接著連續未配置的空間，延伸磁碟分割就會擴大來包含邏輯磁碟機。</span><span class="sxs-lookup"><span data-stu-id="6ba69-130">If you extend a logical drive beyond the free space available in the extended partition, the extended partition grows to contain the logical drive as long as the extended partition is followed by contiguous unallocated space.</span></span> <span data-ttu-id="6ba69-131">如需詳細資訊，請參閱 [基本磁碟和磁片區的運作方式](/previous-versions/windows/it-pro/windows-server-2003/cc739412(v=ws.10))。</span><span class="sxs-lookup"><span data-stu-id="6ba69-131">For more information, see [How Basic Disks and Volumes Work](/previous-versions/windows/it-pro/windows-server-2003/cc739412(v=ws.10)).</span></span>

<span data-ttu-id="6ba69-132">您只能在基本磁碟上執行下列作業：</span><span class="sxs-lookup"><span data-stu-id="6ba69-132">The following operations can be performed only on basic disks:</span></span>

-   <span data-ttu-id="6ba69-133">建立和刪除主要和延伸磁碟分割。</span><span class="sxs-lookup"><span data-stu-id="6ba69-133">Create and delete primary and extended partitions.</span></span>
-   <span data-ttu-id="6ba69-134">建立和刪除延伸磁碟分割內的邏輯磁碟機。</span><span class="sxs-lookup"><span data-stu-id="6ba69-134">Create and delete logical drives within an extended partition.</span></span>
-   <span data-ttu-id="6ba69-135">格式化分割區，並將它標示為作用中。</span><span class="sxs-lookup"><span data-stu-id="6ba69-135">Format a partition and mark it as active.</span></span>

## <a name="dynamic-disks"></a><span data-ttu-id="6ba69-136">動態磁碟</span><span class="sxs-lookup"><span data-stu-id="6ba69-136">Dynamic Disks</span></span>

> [!NOTE]
> <span data-ttu-id="6ba69-137">針對鏡像開機磁碟區以外的所有使用方式 (使用鏡像磁片區來裝載作業系統) ，動態磁碟已淘汰。</span><span class="sxs-lookup"><span data-stu-id="6ba69-137">For all usages except mirror boot volumes (using a mirror volume to host the operating system), dynamic disks are deprecated.</span></span> <span data-ttu-id="6ba69-138">對於需要針對磁片磁碟機失敗進行復原的資料，請使用儲存空間，這是一個彈性的儲存體虛擬化解決方案。</span><span class="sxs-lookup"><span data-stu-id="6ba69-138">For data that requires resiliency against drive failure, use Storage Spaces, a resilient storage virtualization solution.</span></span> <span data-ttu-id="6ba69-139">如需詳細資訊，請參閱 [儲存空間總覽](/windows-server/storage/storage-spaces/overview)。</span><span class="sxs-lookup"><span data-stu-id="6ba69-139">For more info, see [Storage Spaces Overview](/windows-server/storage/storage-spaces/overview).</span></span>

<span data-ttu-id="6ba69-140">*動態磁碟* 提供基本磁碟所沒有的功能，例如能夠建立跨多個磁片的磁片區， (跨距和等量磁片區) ，以及建立容錯磁片區 (鏡像和 raid-5 磁片區) 的能力。</span><span class="sxs-lookup"><span data-stu-id="6ba69-140">*Dynamic disks* provide features that basic disks do not, such as the ability to create volumes that span multiple disks (spanned and striped volumes) and the ability to create fault-tolerant volumes (mirrored and RAID-5 volumes).</span></span> <span data-ttu-id="6ba69-141">就像基本磁碟一樣，動態磁碟也可以在同時支援這兩者的系統上使用 MBR 或 GPT 磁碟分割樣式。</span><span class="sxs-lookup"><span data-stu-id="6ba69-141">Like basic disks, dynamic disks can use the MBR or GPT partition styles on systems that support both.</span></span> <span data-ttu-id="6ba69-142">動態磁碟上的所有磁片區都稱為動態磁碟區。</span><span class="sxs-lookup"><span data-stu-id="6ba69-142">All volumes on dynamic disks are known as dynamic volumes.</span></span> <span data-ttu-id="6ba69-143">動態磁碟提供大量管理的彈性，因為它們會使用資料庫來追蹤磁片上的動態磁碟區以及電腦中其他動態磁碟的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="6ba69-143">Dynamic disks offer greater flexibility for volume management because they use a database to track information about dynamic volumes on the disk and about other dynamic disks in the computer.</span></span> <span data-ttu-id="6ba69-144">因為電腦中的每個動態磁碟都會儲存動態磁碟資料庫的複本，所以損毀的動態磁碟資料庫可以使用另一個動態磁碟上的資料庫修復一個動態磁碟。</span><span class="sxs-lookup"><span data-stu-id="6ba69-144">Because each dynamic disk in a computer stores a replica of the dynamic disk database, for example, a corrupted dynamic disk database can repair one dynamic disk by using the database on another dynamic disk.</span></span> <span data-ttu-id="6ba69-145">資料庫的位置取決於磁片的磁碟分割樣式。</span><span class="sxs-lookup"><span data-stu-id="6ba69-145">The location of the database is determined by the partition style of the disk.</span></span> <span data-ttu-id="6ba69-146">在 MBR 磁碟分區上，資料庫會包含在磁片的最後 1 mb (MB) 中。</span><span class="sxs-lookup"><span data-stu-id="6ba69-146">On MBR partitions, the database is contained in the last 1 megabyte (MB) of the disk.</span></span> <span data-ttu-id="6ba69-147">在 GPT 磁碟分割上，資料庫會包含在 1 MB 保留的 (隱藏) 分割區中。</span><span class="sxs-lookup"><span data-stu-id="6ba69-147">On GPT partitions, the database is contained in a 1-MB reserved (hidden) partition.</span></span>

<span data-ttu-id="6ba69-148">動態磁碟是一種不同的磁片區管理格式，可讓磁片區在一或多個實體磁片上具有非連續的範圍。</span><span class="sxs-lookup"><span data-stu-id="6ba69-148">Dynamic disks are a separate form of volume management that allows volumes to have noncontiguous extents on one or more physical disks.</span></span> <span data-ttu-id="6ba69-149">動態磁碟和磁片區依賴邏輯磁片管理員 (LDM) 和虛擬磁碟服務 (VDS) 與其相關聯的功能。</span><span class="sxs-lookup"><span data-stu-id="6ba69-149">Dynamic disks and volumes rely on the Logical Disk Manager (LDM) and Virtual Disk Service (VDS) and their associated features.</span></span> <span data-ttu-id="6ba69-150">這些功能可讓您執行工作，例如將基本磁碟轉換為動態磁碟，以及建立容錯磁片區。</span><span class="sxs-lookup"><span data-stu-id="6ba69-150">These features enable you to perform tasks such as converting basic disks into dynamic disks, and creating fault-tolerant volumes.</span></span> <span data-ttu-id="6ba69-151">為了鼓勵使用動態磁碟，已從基本磁碟移除多磁碟分割磁片區支援，而且現在可在動態磁碟上獨佔支援。</span><span class="sxs-lookup"><span data-stu-id="6ba69-151">To encourage the use of dynamic disks, multi-partition volume support was removed from basic disks, and is now exclusively supported on dynamic disks.</span></span>

<span data-ttu-id="6ba69-152">您只能在動態磁碟上執行下列作業：</span><span class="sxs-lookup"><span data-stu-id="6ba69-152">The following operations can be performed only on dynamic disks:</span></span>

-   <span data-ttu-id="6ba69-153">建立和刪除簡單、跨距、等量、鏡像和 RAID-5 磁片區。</span><span class="sxs-lookup"><span data-stu-id="6ba69-153">Create and delete simple, spanned, striped, mirrored, and RAID-5 volumes.</span></span>
-   <span data-ttu-id="6ba69-154">延伸簡單或跨距磁片區。</span><span class="sxs-lookup"><span data-stu-id="6ba69-154">Extend a simple or spanned volume.</span></span>
-   <span data-ttu-id="6ba69-155">從鏡像磁片區移除鏡像，或將鏡像磁片區分成兩個磁片區。</span><span class="sxs-lookup"><span data-stu-id="6ba69-155">Remove a mirror from a mirrored volume or break the mirrored volume into two volumes.</span></span>
-   <span data-ttu-id="6ba69-156">修復鏡像或 RAID-5 磁片區。</span><span class="sxs-lookup"><span data-stu-id="6ba69-156">Repair mirrored or RAID-5 volumes.</span></span>
-   <span data-ttu-id="6ba69-157">重新開機遺失或離線的磁片。</span><span class="sxs-lookup"><span data-stu-id="6ba69-157">Reactivate a missing or offline disk.</span></span>

<span data-ttu-id="6ba69-158">基本和動態磁碟之間的另一項差異是，動態磁碟區可以由一或多個實體磁片上的一組非連續範圍所組成。</span><span class="sxs-lookup"><span data-stu-id="6ba69-158">Another difference between basic and dynamic disks is that dynamic disk volumes can be composed of a set of noncontiguous extents on one or multiple physical disks.</span></span> <span data-ttu-id="6ba69-159">相較之下，基本磁碟上的磁片區是由單一磁片上的一組連續範圍所組成。</span><span class="sxs-lookup"><span data-stu-id="6ba69-159">By contrast, a volume on a basic disk consists of one set of contiguous extents on a single disk.</span></span> <span data-ttu-id="6ba69-160">由於 LDM 資料庫所需的磁碟空間的位置和大小，因此 Windows 無法將基本磁碟轉換為動態磁碟，除非磁片上至少有 1 MB 的未使用空間。</span><span class="sxs-lookup"><span data-stu-id="6ba69-160">Because of the location and size of the disk space needed by the LDM database, Windows cannot convert a basic disk to a dynamic disk unless there is at least 1 MB of unused space on the disk.</span></span>

<span data-ttu-id="6ba69-161">無論系統上的動態磁碟是否使用 MBR 或 GPT 磁碟分割樣式，您都可以在系統上建立高達2000的動態磁碟區，雖然建議的動態磁碟區數目是32或更少。</span><span class="sxs-lookup"><span data-stu-id="6ba69-161">Regardless of whether the dynamic disks on a system use the MBR or GPT partition style, you can create up to 2,000 dynamic volumes on a system, although the recommended number of dynamic volumes is 32 or less.</span></span> <span data-ttu-id="6ba69-162">如需使用動態磁碟和磁片區的詳細資訊和其他考慮，請參閱 [動態磁碟和磁片](/previous-versions/windows/it-pro/windows-server-2003/cc757696(v=ws.10))區。</span><span class="sxs-lookup"><span data-stu-id="6ba69-162">For details and other considerations about using dynamic disks and volumes, see [Dynamic disks and volumes](/previous-versions/windows/it-pro/windows-server-2003/cc757696(v=ws.10)).</span></span>

<span data-ttu-id="6ba69-163">如需動態磁碟的更多功能和使用案例，請參閱 [何謂動態磁碟和磁片區？](/previous-versions/windows/it-pro/windows-server-2003/cc737048(v=ws.10))。</span><span class="sxs-lookup"><span data-stu-id="6ba69-163">For more features of and usage scenarios for dynamic disks, see [What Are Dynamic Disks and Volumes?](/previous-versions/windows/it-pro/windows-server-2003/cc737048(v=ws.10)).</span></span>

<span data-ttu-id="6ba69-164">基本和動態磁碟的一般作業如下：</span><span class="sxs-lookup"><span data-stu-id="6ba69-164">The operations common to basic and dynamic disks are the following:</span></span>

-   <span data-ttu-id="6ba69-165">支援 MBR 和 GPT 磁碟分割樣式。</span><span class="sxs-lookup"><span data-stu-id="6ba69-165">Support both MBR and GPT partition styles.</span></span>
-   <span data-ttu-id="6ba69-166">檢查磁片屬性，例如容量、可用空間和目前狀態。</span><span class="sxs-lookup"><span data-stu-id="6ba69-166">Check disk properties, such as capacity, available free space, and current status.</span></span>
-   <span data-ttu-id="6ba69-167">查看磁碟分割屬性，例如 offset、length、type，以及是否可在開機時將資料分割當做系統磁碟區使用。</span><span class="sxs-lookup"><span data-stu-id="6ba69-167">View partition properties, such as offset, length, type, and if the partition can be used as the system volume at boot.</span></span>
-   <span data-ttu-id="6ba69-168">查看磁片區屬性，例如大小、磁碟機號指派、標籤、類型、Win32 路徑名稱、磁碟分割類型和檔案系統。</span><span class="sxs-lookup"><span data-stu-id="6ba69-168">View volume properties, such as size, drive-letter assignment, label, type, Win32 path name, partition type, and file system.</span></span>
-   <span data-ttu-id="6ba69-169">為磁片區或磁碟分割建立磁碟機號指派，以及為 CD-ROM 裝置建立磁碟機號指派。</span><span class="sxs-lookup"><span data-stu-id="6ba69-169">Establish drive-letter assignments for disk volumes or partitions, and for CD-ROM devices.</span></span>
-   <span data-ttu-id="6ba69-170">將基本磁碟轉換成動態磁碟，或是將動態磁碟轉換為基本磁碟。</span><span class="sxs-lookup"><span data-stu-id="6ba69-170">Convert a basic disk to a dynamic disk, or a dynamic disk to a basic disk.</span></span>

<span data-ttu-id="6ba69-171">除非另有指定，否則 Windows 最初預設會將磁片磁碟機分割為基本磁碟。</span><span class="sxs-lookup"><span data-stu-id="6ba69-171">Unless specified otherwise, Windows initially partitions a drive as a basic disk by default.</span></span> <span data-ttu-id="6ba69-172">您必須明確地將基本磁碟轉換為動態磁碟。</span><span class="sxs-lookup"><span data-stu-id="6ba69-172">You must explicitly convert a basic disk to a dynamic disk.</span></span> <span data-ttu-id="6ba69-173">不過，在您嘗試這麼做之前，必須先考慮一些磁碟空間的考慮。</span><span class="sxs-lookup"><span data-stu-id="6ba69-173">However, there are disk space considerations that must be accounted for before you attempt to do this.</span></span> <span data-ttu-id="6ba69-174">如需詳細資訊，請參閱 [如何在 WINDOWS XP Professional 中轉換為基本和動態磁碟](https://support.microsoft.com/kb/309044)。</span><span class="sxs-lookup"><span data-stu-id="6ba69-174">For more information, see [How To Convert to Basic and Dynamic Disks in Windows XP Professional](https://support.microsoft.com/kb/309044).</span></span>

## <a name="partition-styles"></a><span data-ttu-id="6ba69-175">分割區樣式</span><span class="sxs-lookup"><span data-stu-id="6ba69-175">Partition Styles</span></span>

<span data-ttu-id="6ba69-176">*分割區樣式*（有時也稱為資料 *分割* 配置）是指磁片配置的特定基礎結構，以及資料分割的實際相片順序、功能是什麼，以及限制為何的詞彙。</span><span class="sxs-lookup"><span data-stu-id="6ba69-176">*Partition styles*, also sometimes called *partition schemes*, is a term that refers to the particular underlying structure of the disk layout and how the partitioning is actually arranged, what the capabilities are, and also what the limitations are.</span></span> <span data-ttu-id="6ba69-177">若要啟動 Windows，x86 型和 x64 型電腦中的 BIOS 執行需要至少包含一個主要開機記錄的基本磁碟， (MBR) 磁碟分割標示為作用中，其中包含 Windows 作業系統的相關資訊 (但不一定是整個作業系統安裝) 以及磁碟分割的相關資訊儲存位置。</span><span class="sxs-lookup"><span data-stu-id="6ba69-177">To boot Windows, the BIOS implementations in x86-based and x64-based computers require a basic disk that must contain at least one master boot record (MBR) partition marked as active where information about the Windows operating system (but not necessarily the entire operating system installation) and where information about the partitions on the disk are stored.</span></span> <span data-ttu-id="6ba69-178">這項資訊會放在不同的位置，而這兩個位置可能位於不同的資料分割或單一分割區中。</span><span class="sxs-lookup"><span data-stu-id="6ba69-178">This information is placed in separate places, and these two places may be located in separate partitions or in a single partition.</span></span> <span data-ttu-id="6ba69-179">所有其他實體磁片儲存體都可以設定為兩個可用分割區樣式的組合，如下列各節所述。</span><span class="sxs-lookup"><span data-stu-id="6ba69-179">All other physical disk storage can be set up as various combinations of the two available partition styles, described in the following sections.</span></span> <span data-ttu-id="6ba69-180">如需其他系統類型的詳細資訊，請參閱有關資料 [分割樣式](/previous-versions/windows/it-pro/windows-server-2003/cc738081(v=ws.10))的 TechNet 主題。</span><span class="sxs-lookup"><span data-stu-id="6ba69-180">For more information about other system types, see the TechNet topic on [partition styles](/previous-versions/windows/it-pro/windows-server-2003/cc738081(v=ws.10)).</span></span>

<span data-ttu-id="6ba69-181">如先前所述，動態磁碟會遵循稍有不同的使用案例，而且使用這兩個數據分割樣式的方式會受到該使用方式的影響。</span><span class="sxs-lookup"><span data-stu-id="6ba69-181">Dynamic disks follow slightly different usage scenarios, as previously outlined, and the way they utilize the two partition styles is affected by that usage.</span></span> <span data-ttu-id="6ba69-182">因為動態磁碟通常不會用來包含系統開機磁碟區，所以會簡化此討論以排除特殊案例。</span><span class="sxs-lookup"><span data-stu-id="6ba69-182">Because dynamic disks are not generally used to contain system boot volumes, this discussion is simplified to exclude special-case scenarios.</span></span> <span data-ttu-id="6ba69-183">如需分割區資料區塊配置的詳細資訊，以及與磁碟分割樣式相關的基本或動態磁碟使用案例，請參閱 [基本磁碟和](/previous-versions/windows/it-pro/windows-server-2003/cc739412(v=ws.10)) 磁片區的運作方式，以及 [動態磁碟和磁片區的運作方式](/previous-versions/windows/it-pro/windows-server-2003/cc758035(v=ws.10))。</span><span class="sxs-lookup"><span data-stu-id="6ba69-183">For more detailed information about partition data block layouts, and basic or dynamic disk usage scenarios related to partition styles, see [How Basic Disks and Volumes Work](/previous-versions/windows/it-pro/windows-server-2003/cc739412(v=ws.10)) and [How Dynamic Disks and Volumes Work](/previous-versions/windows/it-pro/windows-server-2003/cc758035(v=ws.10)).</span></span>

### <a name="master-boot-record"></a><span data-ttu-id="6ba69-184">主開機記錄</span><span class="sxs-lookup"><span data-stu-id="6ba69-184">Master Boot Record</span></span>

<span data-ttu-id="6ba69-185">所有執行 Windows 的 x86 型和 x64 型電腦都可以使用稱為「 *主開機記錄* 」 (MBR) 的磁碟分割樣式。</span><span class="sxs-lookup"><span data-stu-id="6ba69-185">All x86-based and x64-based computers running Windows can use the partition style known as *master boot record* (MBR).</span></span> <span data-ttu-id="6ba69-186">MBR 磁碟分區樣式包含描述磁碟分割位於磁片上的磁碟分割資料表。</span><span class="sxs-lookup"><span data-stu-id="6ba69-186">The MBR partition style contains a partition table that describes where the partitions are located on the disk.</span></span> <span data-ttu-id="6ba69-187">因為 MBR 是在 Windows Server 2003 Service Pack 1 (SP1) 之前 x86 電腦上唯一可用的磁碟分割樣式，所以您不需要選擇此樣式。</span><span class="sxs-lookup"><span data-stu-id="6ba69-187">Because MBR is the only partition style available on x86-based computers prior to Windows Server 2003 with Service Pack 1 (SP1), you do not need to choose this style.</span></span> <span data-ttu-id="6ba69-188">它會自動使用。</span><span class="sxs-lookup"><span data-stu-id="6ba69-188">It is used automatically.</span></span>

<span data-ttu-id="6ba69-189">您可以使用 MBR 磁碟分區配置在基本磁碟上最多建立四個磁碟分割：四個主要分割區，或三個主要分割區，以及一個擴充。</span><span class="sxs-lookup"><span data-stu-id="6ba69-189">You can create up to four partitions on a basic disk using the MBR partition scheme: either four primary partitions, or three primary and one extended.</span></span> <span data-ttu-id="6ba69-190">延伸磁碟分割可包含一或多個邏輯磁碟機。</span><span class="sxs-lookup"><span data-stu-id="6ba69-190">The extended partition can contain one or more logical drives.</span></span> <span data-ttu-id="6ba69-191">下圖說明三個主要磁碟分割的範例版面配置，以及基本磁碟上使用 MBR 的一個延伸磁碟分割。</span><span class="sxs-lookup"><span data-stu-id="6ba69-191">The following figure illustrates an example layout of three primary partitions and one extended partition on a basic disk using MBR.</span></span> <span data-ttu-id="6ba69-192">延伸磁碟分割中包含四個擴充的邏輯磁碟機。</span><span class="sxs-lookup"><span data-stu-id="6ba69-192">The extended partition contains four extended logical drives within it.</span></span> <span data-ttu-id="6ba69-193">延伸磁碟分割可能會位於磁片的結尾，但不一定是邏輯磁碟機 1-n 的單一連續空間。</span><span class="sxs-lookup"><span data-stu-id="6ba69-193">The extended partition may or may not be located at the end of the disk, but it is always a single contiguous space for logical drives 1-n.</span></span>

![在基本磁碟上使用 mbr 的三個主要磁碟分割和一個擴充磁碟分割](images/basic-mbr.png)

<span data-ttu-id="6ba69-195">每個分割區（不論是主要或擴充）都可以格式化為 Windows 磁片區，並具有與磁片區間的一對一關聯性。</span><span class="sxs-lookup"><span data-stu-id="6ba69-195">Each partition, whether primary or extended, can be formatted to be a Windows volume, with a one-to-one correlation of volume-to-partition.</span></span> <span data-ttu-id="6ba69-196">換句話說，單一分割區不能包含多個單一磁片區。</span><span class="sxs-lookup"><span data-stu-id="6ba69-196">In other words, a single partition cannot contain more than a single volume.</span></span> <span data-ttu-id="6ba69-197">在此範例中，有七個磁片區可供 Windows 用來儲存檔案。</span><span class="sxs-lookup"><span data-stu-id="6ba69-197">In this example, there would be a total of seven volumes available to Windows for file storage.</span></span> <span data-ttu-id="6ba69-198">Windows 中的檔案儲存體無法使用未格式化的磁碟分割。</span><span class="sxs-lookup"><span data-stu-id="6ba69-198">An unformatted partition is not available for file storage in Windows.</span></span>

<span data-ttu-id="6ba69-199">動態磁碟 MBR 配置看起來與基本磁碟 MBR 配置非常類似，不同之處在于只允許一個主要磁碟分割 (稱為 LDM 磁碟分割) 、不允許任何擴充的資料分割，而且在 LDM 資料庫的磁片結尾有隱藏的磁碟分割。</span><span class="sxs-lookup"><span data-stu-id="6ba69-199">The dynamic disk MBR layout looks very similar to the basic disk MBR layout, except that only one primary partition is allowed (referred to as the LDM partition), no extended partitioning is allowed, and there is a hidden partition at the end of the disk for the LDM database.</span></span> <span data-ttu-id="6ba69-200">如需有關 LDM 的詳細資訊，請參閱「 [動態磁碟](#basic-and-dynamic-disks) 」一節。</span><span class="sxs-lookup"><span data-stu-id="6ba69-200">For more information on the LDM, see the [Dynamic Disks](#basic-and-dynamic-disks) section.</span></span>

### <a name="guid-partition-table"></a><span data-ttu-id="6ba69-201">GUID 磁碟分割表格</span><span class="sxs-lookup"><span data-stu-id="6ba69-201">GUID Partition Table</span></span>

<span data-ttu-id="6ba69-202">執行 Windows Server 2003 SP1 和更新版本的系統，除了 MBR 分割區樣式之外，還可以使用稱為「全域唯一識別碼」（ (**GUID**) 磁碟分割)  (表格）的磁碟分割樣式。</span><span class="sxs-lookup"><span data-stu-id="6ba69-202">Systems running Windows Server 2003 with SP1 and later can use a partition style known as the globally unique identifier (**GUID**) partition table (GPT) in addition to the MBR partition style.</span></span> <span data-ttu-id="6ba69-203">使用 GPT 磁碟分割樣式的基本磁碟最多可有128的主要磁碟分割，而動態磁碟則會有單一的 LDM 磁碟分割，如同 MBR 分割一樣。</span><span class="sxs-lookup"><span data-stu-id="6ba69-203">A basic disk using the GPT partition style can have up to 128 primary partitions, while dynamic disks will have a single LDM partition as with MBR partitioning.</span></span> <span data-ttu-id="6ba69-204">因為使用 GPT 磁碟分割的基本磁碟不會將您限制為四個磁碟分割，所以您不需要建立延伸磁碟分割或邏輯磁碟機。</span><span class="sxs-lookup"><span data-stu-id="6ba69-204">Because basic disks using GPT partitioning do not limit you to four partitions, you do not need to create extended partitions or logical drives.</span></span>

<span data-ttu-id="6ba69-205">GPT 磁碟分割樣式也有下列屬性：</span><span class="sxs-lookup"><span data-stu-id="6ba69-205">The GPT partition style also has the following properties:</span></span>

-   <span data-ttu-id="6ba69-206">允許大於 2 tb 的磁碟分割。</span><span class="sxs-lookup"><span data-stu-id="6ba69-206">Allows partitions larger than 2 terabytes.</span></span>
-   <span data-ttu-id="6ba69-207">已新增複寫和迴圈冗余檢查的可靠性 (CRC) 資料分割資料表的保護。</span><span class="sxs-lookup"><span data-stu-id="6ba69-207">Added reliability from replication and cyclic redundancy check (CRC) protection of the partition table.</span></span>
-   <span data-ttu-id="6ba69-208">支援由原始設備製造商所定義的其他磁碟分割類型 **GUID** (oem) 、獨立軟體廠商 (isv) 和其他作業系統。</span><span class="sxs-lookup"><span data-stu-id="6ba69-208">Support for additional partition type **GUID** s defined by original equipment manufacturers (OEMs), independent software vendors (ISVs), and other operating systems.</span></span>

<span data-ttu-id="6ba69-209">下圖說明基本磁碟的 GPT 磁碟分割版面配置。</span><span class="sxs-lookup"><span data-stu-id="6ba69-209">The GPT partitioning layout for a basic disk is illustrated in the following figure.</span></span>

![gpt 版面配置](images/basic-gpt.png)

<span data-ttu-id="6ba69-211">GPT 磁碟分割配置有保護 MBR 區域，可回溯相容于在 MBR 上運作的磁片管理公用程式。</span><span class="sxs-lookup"><span data-stu-id="6ba69-211">The protective MBR area exists on a GPT partition layout for backward compatibility with disk management utilities that operate on MBR.</span></span> <span data-ttu-id="6ba69-212">GPT 標頭會定義分割區專案可使用的邏輯區塊位址範圍。</span><span class="sxs-lookup"><span data-stu-id="6ba69-212">The GPT header defines the range of logical block addresses that are usable by partition entries.</span></span> <span data-ttu-id="6ba69-213">GPT 標頭也會定義其在磁片上的位置、其 **GUID** 和32位迴圈冗余檢查 (CRC32) checksum，用來確認 GPT 標頭的完整性。</span><span class="sxs-lookup"><span data-stu-id="6ba69-213">The GPT header also defines its location on the disk, its **GUID**, and a 32-bit cyclic redundancy check (CRC32) checksum that is used to verify the integrity of the GPT header.</span></span> <span data-ttu-id="6ba69-214">每個 **GUID** 資料分割專案的開頭都是磁碟分割類型 GUID。</span><span class="sxs-lookup"><span data-stu-id="6ba69-214">Each **GUID** partition entry begins with a partition type GUID.</span></span> <span data-ttu-id="6ba69-215">16位元組磁碟分割類型 **GUID**（類似于 MBR 磁碟的磁碟分割資料表中的系統識別碼）會識別分割區包含的資料類型，並識別磁碟分割的使用方式，例如，如果是基本磁碟或動態磁碟。</span><span class="sxs-lookup"><span data-stu-id="6ba69-215">The 16-byte partition type **GUID**, which is similar to a System ID in the partition table of an MBR disk, identifies the type of data that the partition contains and identifies how the partition is used, for example if it is a basic disk or a dynamic disk.</span></span> <span data-ttu-id="6ba69-216">請注意，每個 **GUID** 磁碟分割專案都有備份複本。</span><span class="sxs-lookup"><span data-stu-id="6ba69-216">Note that each **GUID** partition entry has a backup copy.</span></span>

<span data-ttu-id="6ba69-217">動態磁碟 **GPT** 磁碟分割配置看起來類似此基本磁碟範例，但如先前所述，只有一個 LDM 分割專案，而不是基本磁碟上允許的 1-n 個主要磁碟分割。</span><span class="sxs-lookup"><span data-stu-id="6ba69-217">Dynamic disk **GPT** partition layouts looks similar to this basic disk example, but as stated previously have only one LDM partition entry rather than 1-n primary partitions as allowed on basic disks.</span></span> <span data-ttu-id="6ba69-218">另外還有隱藏的 LDM 資料庫分割區，其中包含對應的 **GUID** 資料分割專案。</span><span class="sxs-lookup"><span data-stu-id="6ba69-218">There is also a hidden LDM database partition with a corresponding **GUID** partition entry for it.</span></span> <span data-ttu-id="6ba69-219">如需有關 LDM 的詳細資訊，請參閱「 [動態磁碟](#basic-and-dynamic-disks) 」一節。</span><span class="sxs-lookup"><span data-stu-id="6ba69-219">For more information on the LDM, see the [Dynamic Disks](#basic-and-dynamic-disks) section.</span></span>

## <a name="detecting-the-type-of-disk"></a><span data-ttu-id="6ba69-220">偵測磁片類型</span><span class="sxs-lookup"><span data-stu-id="6ba69-220">Detecting the Type of Disk</span></span>

<span data-ttu-id="6ba69-221">沒有特定的函式可透過程式設計方式偵測特定檔案或目錄所在的磁片類型。</span><span class="sxs-lookup"><span data-stu-id="6ba69-221">There is no specific function to programmatically detect the type of disk a particular file or directory is located on.</span></span> <span data-ttu-id="6ba69-222">有間接方法。</span><span class="sxs-lookup"><span data-stu-id="6ba69-222">There is an indirect method.</span></span>

* <span data-ttu-id="6ba69-223">將檔案或目錄路徑傳遞至 [**GetVolumePathName**](/windows/desktop/api/FileAPI/nf-fileapi-getvolumepathnamew) ，以取得掛接點。</span><span class="sxs-lookup"><span data-stu-id="6ba69-223">Pass the file or directory path to [**GetVolumePathName**](/windows/desktop/api/FileAPI/nf-fileapi-getvolumepathnamew) to obtain the mount point.</span></span>
* <span data-ttu-id="6ba69-224">將掛接點傳遞至 [**GetVolumeNameForVolumeMountPoint**](/windows/desktop/api/FileAPI/nf-fileapi-getvolumenameforvolumemountpointw) 以取得磁片區名稱。</span><span class="sxs-lookup"><span data-stu-id="6ba69-224">Pass the mount point to [**GetVolumeNameForVolumeMountPoint**](/windows/desktop/api/FileAPI/nf-fileapi-getvolumenameforvolumemountpointw) to obtain the volume name.</span></span>
* <span data-ttu-id="6ba69-225">從磁片區名稱中移除尾端的反斜線。</span><span class="sxs-lookup"><span data-stu-id="6ba69-225">Remove the trailing backslash from the volume name.</span></span>
* <span data-ttu-id="6ba69-226">將沒有尾端反斜線的磁片區名稱傳遞至 [**CreateFile**](/windows/desktop/api/FileAPI/nf-fileapi-createfilea) ，以開啟磁片區。</span><span class="sxs-lookup"><span data-stu-id="6ba69-226">Pass the volume name without the trailing backslash to [**CreateFile**](/windows/desktop/api/FileAPI/nf-fileapi-createfilea) to open the volume.</span></span>
* <span data-ttu-id="6ba69-227">搭配 [**使用 \_ IOCTL \_ 磁片區和磁片 \_ \_ \_ 區磁片區**](/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_volume_get_volume_disk_extents) 來取得磁片編號。</span><span class="sxs-lookup"><span data-stu-id="6ba69-227">Use [**IOCTL\_VOLUME\_GET\_VOLUME\_DISK\_EXTENTS**](/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_volume_get_volume_disk_extents) with the volume handle to obtain the disk numbers.</span></span>
* <span data-ttu-id="6ba69-228">使用磁片編號來建立磁片路徑，例如 " \\ \\ ？ \\PhysicalDrive *X*」。</span><span class="sxs-lookup"><span data-stu-id="6ba69-228">Use the disk numbers to construct the disk paths, such as "\\\\?\\PhysicalDrive *X*".</span></span>
* <span data-ttu-id="6ba69-229">將每個磁片路徑傳遞至 [**CreateFile**](/windows/desktop/api/FileAPI/nf-fileapi-createfilea) 以開啟磁片。</span><span class="sxs-lookup"><span data-stu-id="6ba69-229">Pass each disk path to [**CreateFile**](/windows/desktop/api/FileAPI/nf-fileapi-createfilea) to open the disk.</span></span>
* <span data-ttu-id="6ba69-230">使用 [**IOCTL \_ 磁片 \_ 取得 \_ 磁片 \_ 磁碟機 \_**](/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_disk_get_drive_layout_ex) 配置，例如取得分割區清單。</span><span class="sxs-lookup"><span data-stu-id="6ba69-230">Use [**IOCTL\_DISK\_GET\_DRIVE\_LAYOUT\_EX**](/windows/desktop/api/WinIoCtl/ni-winioctl-ioctl_disk_get_drive_layout_ex) to obtain the partition list.</span></span>
* <span data-ttu-id="6ba69-231">檢查資料分割清單中每個專案的 **PartitionType** 。</span><span class="sxs-lookup"><span data-stu-id="6ba69-231">Check the **PartitionType** for each entry in the partition list.</span></span>

## <a name="related-topics"></a><span data-ttu-id="6ba69-232">相關主題</span><span class="sxs-lookup"><span data-stu-id="6ba69-232">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="6ba69-233">關於磁片區管理</span><span class="sxs-lookup"><span data-stu-id="6ba69-233">About Volume Management</span></span>](about-volume-management.md)
</dt> <dt>

<span data-ttu-id="6ba69-234">[基本磁碟和磁片區技術參考](/previous-versions/windows/it-pro/windows-server-2003/cc784732(v=ws.10))</span><span class="sxs-lookup"><span data-stu-id="6ba69-234">[Basic Disks and Volumes Technical Reference](/previous-versions/windows/it-pro/windows-server-2003/cc784732(v=ws.10))</span></span>
</dt> <dt>

<span data-ttu-id="6ba69-235">[動態磁碟與磁片區技術參考](/previous-versions/windows/it-pro/windows-server-2003/cc785638(v=ws.10))</span><span class="sxs-lookup"><span data-stu-id="6ba69-235">[Dynamic Disks and Volumes Technical Reference](/previous-versions/windows/it-pro/windows-server-2003/cc785638(v=ws.10))</span></span>
</dt> <dt>

[<span data-ttu-id="6ba69-236">Windows XP 中的基本儲存體與動態儲存體</span><span class="sxs-lookup"><span data-stu-id="6ba69-236">Basic Storage Versus Dynamic Storage in Windows XP</span></span>]( https://support.microsoft.com/kb/314343/)
</dt> </dl>

 

 
