---
description: 您可以將應用程式對其他用戶端所造成的影響降至最低、盡可能授與最少的共用、要求所需的最低存取層級，以及使用適用于您應用程式的最小無侵入性隨機鎖定，來降低應用程式對其他用戶端的影響。
ms.assetid: c28b0ae0-0d35-4b59-9f54-87c55ca72716
title: 對鎖定檔案開啟要求的伺服器回應
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8d397613f6b54f2b42c26a5674a787b796f5f19e
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/07/2021
ms.locfileid: "104511900"
---
# <a name="server-response-to-open-requests-on-locked-files"></a>對鎖定檔案開啟要求的伺服器回應

隨機鎖定的存留期包含三個不同的時間範圍。 在每一種情況下，伺服器會以不同的方式來判斷它對用戶端要求的回應，以開啟另一個用戶端鎖定的檔案。 一般而言，您可以將應用程式對其他用戶端所造成的影響降至最低，並藉由授與最少的共用、要求必要的最低存取層級，以及使用適合您應用程式的最少侵入式隨機鎖定，來將應用程式的影響降至最低。

第一個是在伺服器開啟用戶端檔案之後，但在授與鎖定之前的期間。 在這段期間內，檔案上不會有鎖定，且伺服器相依于共用、存取模式，以及您所要求的隨機鎖定類型，以判斷其對另一個開啟相同檔案之要求的回應。 例如，如果您開啟有問題的檔案進行寫入存取，您可能會禁止將可讀取快取存取權的隨機鎖定授與其他用戶端。 伺服器授與鎖定之前的時間範圍通常是以毫秒為單位，但可能較長。

在授與隨機鎖定之後，伺服器會檢查鎖定，以判斷鎖定檔案上開啟要求的伺服器回應。 同樣地，您的應用程式如何開啟檔案，以及它所保留的鎖定類型會影響伺服器的回應方式。 如需有關如何在每個案例中回應伺服器的詳細資訊，請參閱隨機 [鎖定類型](types-of-opportunistic-locks.md)。

最後，在伺服器判斷出您的鎖定應該中斷 (結束) 但在您的應用程式完成其對中斷的回應之前，會有範圍。 根據鎖定的類型而定，您的應用程式可以將鎖定降級為較低的層級，也可以降級為無。 您的應用程式也可以關閉檔案和鎖定。 在這段期間，伺服器會將來自其他用戶端的任何要求保存在 abeyance 中，以開啟先前鎖定的檔案。 此時間範圍的範圍可能從毫秒到數十秒。 如需詳細資訊，請參閱 [中斷隨機鎖定](breaking-opportunistic-locks.md)。

 

 



