---
description: 交易式 NTFS (TxF) 控制代碼。
ms.assetid: b66d322a-a971-4219-bb5b-dc69b10b2581
title: TxF 控制項碼
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8ef99a111a32aa5d2a7fd5997a855ce08e595ad6
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/07/2021
ms.locfileid: "106991712"
---
# <a name="txf-control-codes"></a><span data-ttu-id="e80cb-103">TxF 控制項碼</span><span class="sxs-lookup"><span data-stu-id="e80cb-103">TxF Control Codes</span></span>

<span data-ttu-id="e80cb-104">\[Microsoft 強烈建議開發人員利用替代方法來達成您的應用程式需求。</span><span class="sxs-lookup"><span data-stu-id="e80cb-104">\[Microsoft strongly recommends developers utilize alternative means to achieve your application s needs.</span></span> <span data-ttu-id="e80cb-105">針對 TxF 開發的許多案例，都可以透過更簡單且更容易使用的技術來達成。</span><span class="sxs-lookup"><span data-stu-id="e80cb-105">Many scenarios that TxF was developed for can be achieved through simpler and more readily available techniques.</span></span> <span data-ttu-id="e80cb-106">此外，Microsoft Windows 的未來版本可能不提供 TxF。</span><span class="sxs-lookup"><span data-stu-id="e80cb-106">Furthermore, TxF may not be available in future versions of Microsoft Windows.</span></span> <span data-ttu-id="e80cb-107">如需詳細資訊以及 TxF 的替代方案，請參閱 [使用交易式 NTFS 的替代方案](deprecation-of-txf.md)。\]</span><span class="sxs-lookup"><span data-stu-id="e80cb-107">For more information, and alternatives to TxF, please see [Alternatives to using Transactional NTFS](deprecation-of-txf.md).\]</span></span>

<span data-ttu-id="e80cb-108">交易式 NTFS (TxF) 提供下列控制項碼。</span><span class="sxs-lookup"><span data-stu-id="e80cb-108">Transactional NTFS (TxF) provides the following control codes.</span></span>

## <a name="in-this-section"></a><span data-ttu-id="e80cb-109">本節內容</span><span class="sxs-lookup"><span data-stu-id="e80cb-109">In this section</span></span>



| <span data-ttu-id="e80cb-110">控制程式代碼</span><span class="sxs-lookup"><span data-stu-id="e80cb-110">Control Code</span></span>                                                                                                 | <span data-ttu-id="e80cb-111">Description</span><span class="sxs-lookup"><span data-stu-id="e80cb-111">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                             |
|--------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="e80cb-112">**FSCTL \_ TXFS \_ 建立 \_ 迷你**</span><span class="sxs-lookup"><span data-stu-id="e80cb-112">**FSCTL\_TXFS\_CREATE\_MINIVERSION**</span></span>](/windows/win32/api/winioctl/ni-winioctl-fsctl_txfs_create_miniversion)<br/>                         | <span data-ttu-id="e80cb-113">為指定的檔案建立新的 [迷你版本](glossary.md) 。</span><span class="sxs-lookup"><span data-stu-id="e80cb-113">Creates a new [miniversion](glossary.md) for the specified file.</span></span> <br/> <span data-ttu-id="e80cb-114">Miniversions 可讓您在交易期間參考檔案的快照集。</span><span class="sxs-lookup"><span data-stu-id="e80cb-114">Miniversions allow you to refer to a snapshot of the file during a transaction.</span></span> <span data-ttu-id="e80cb-115">認可或回復交易時，將會捨棄 Miniversions。</span><span class="sxs-lookup"><span data-stu-id="e80cb-115">Miniversions are discarded when a transaction is committed or rolled back.</span></span><br/>                                                                                                                                                                      |
| [<span data-ttu-id="e80cb-116">**FSCTL \_ TXFS \_ 取得 \_ 中繼資料 \_ 資訊**</span><span class="sxs-lookup"><span data-stu-id="e80cb-116">**FSCTL\_TXFS\_GET\_METADATA\_INFO**</span></span>](/windows/win32/api/winioctl/ni-winioctl-fsctl_txfs_get_metadata_info)<br/>                          | <span data-ttu-id="e80cb-117">抓取交易的 NTFS (TxF) 檔案的中繼資料，以及已鎖定所指定檔案之交易的 **GUID** (如果檔案已鎖定) 。</span><span class="sxs-lookup"><span data-stu-id="e80cb-117">Retrieves Transacted NTFS (TxF) metadata for a file and the **GUID** of the transaction that has locked the specified file (if the file is locked).</span></span> <br/>                                                                                                                                                                                                                                                                         |
| [<span data-ttu-id="e80cb-118">**FSCTL \_ TXFS \_ 取得 \_ 交易 \_ 版本**</span><span class="sxs-lookup"><span data-stu-id="e80cb-118">**FSCTL\_TXFS\_GET\_TRANSACTED\_VERSION**</span></span>](/windows/win32/api/winioctl/ni-winioctl-fsctl_txfs_get_transacted_version)<br/>                | <span data-ttu-id="e80cb-119">傳回 [**TXFS \_ 取得 \_ 交易 \_ 版本**](/windows/desktop/api/WinIoCtl/ns-winioctl-txfs_get_transacted_version) 結構。</span><span class="sxs-lookup"><span data-stu-id="e80cb-119">Returns a [**TXFS\_GET\_TRANSACTED\_VERSION**](/windows/desktop/api/WinIoCtl/ns-winioctl-txfs_get_transacted_version) structure.</span></span> <span data-ttu-id="e80cb-120">結構會識別指定檔案的最新認可版本，也就是控制碼的版本號碼。</span><span class="sxs-lookup"><span data-stu-id="e80cb-120">The structure identifies the most recently committed version of the specified file, the version number of the handle.</span></span> <br/>                                                                                                                                                                                                            |
| [<span data-ttu-id="e80cb-121">**FSCTL \_ TXFS \_ 列出 \_ 交易 \_ 鎖定 \_ 的檔案**</span><span class="sxs-lookup"><span data-stu-id="e80cb-121">**FSCTL\_TXFS\_LIST\_TRANSACTION\_LOCKED\_FILES**</span></span>](/windows/win32/api/winioctl/ni-winioctl-fsctl_txfs_list_transaction_locked_files)<br/> | <span data-ttu-id="e80cb-122">傳回指定之交易目前鎖定的所有檔案清單。</span><span class="sxs-lookup"><span data-stu-id="e80cb-122">Returns a list of all files currently locked by the specified transaction.</span></span> <span data-ttu-id="e80cb-123">如果傳回值是 **錯誤的 \_ \_ 資料**，它會傳回在此呼叫時保存完整檔案清單所需的緩衝區長度。</span><span class="sxs-lookup"><span data-stu-id="e80cb-123">If the return value is **ERROR\_MORE\_DATA**, it returns the length of the buffer required to hold the complete list of files at the time of this call.</span></span><br/>                                                                                                                                                                                           |
| [<span data-ttu-id="e80cb-124">**FSCTL \_ TXFS \_ 列出 \_ 交易**</span><span class="sxs-lookup"><span data-stu-id="e80cb-124">**FSCTL\_TXFS\_LIST\_TRANSACTIONS**</span></span>](/windows/win32/api/winioctl/ni-winioctl-fsctl_txfs_list_transactions)<br/>                           | <span data-ttu-id="e80cb-125">傳回目前所指定資源管理員所牽涉的所有交易清單。</span><span class="sxs-lookup"><span data-stu-id="e80cb-125">Returns a list of all the transactions currently involved in the specified resource manager.</span></span><br/>                                                                                                                                                                                                                                                                                                                                 |
| [<span data-ttu-id="e80cb-126">**FSCTL \_ TXFS \_ 修改 \_ RM**</span><span class="sxs-lookup"><span data-stu-id="e80cb-126">**FSCTL\_TXFS\_MODIFY\_RM**</span></span>](/windows/win32/api/winioctl/ni-winioctl-fsctl_txfs_modify_rm)<br/>                                           | <span data-ttu-id="e80cb-127">設定次要資源管理員 (RM) 的記錄模式和記錄參數資訊。</span><span class="sxs-lookup"><span data-stu-id="e80cb-127">Sets the log mode and log parameter information for a secondary resource manager (RM).</span></span><br/>                                                                                                                                                                                                                                                                                                                                       |
| [<span data-ttu-id="e80cb-128">**FSCTL \_ TXFS \_ 查詢 \_ RM \_ 資訊**</span><span class="sxs-lookup"><span data-stu-id="e80cb-128">**FSCTL\_TXFS\_QUERY\_RM\_INFORMATION**</span></span>](/windows/win32/api/winioctl/ni-winioctl-fsctl_txfs_query_rm_information)<br/>                    | <span data-ttu-id="e80cb-129">取得資源管理員 (RM) 的資訊。</span><span class="sxs-lookup"><span data-stu-id="e80cb-129">Retrieves information for a resource manager (RM).</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                           |
| [<span data-ttu-id="e80cb-130">**FSCTL \_ TXFS \_ 讀取 \_ 備份 \_ 資訊**</span><span class="sxs-lookup"><span data-stu-id="e80cb-130">**FSCTL\_TXFS\_READ\_BACKUP\_INFORMATION**</span></span>](/windows/win32/api/winioctl/ni-winioctl-fsctl_txfs_read_backup_information)<br/>              | <span data-ttu-id="e80cb-131">傳回交易式 NTFS (TxF) 指定之檔案的特定資訊。</span><span class="sxs-lookup"><span data-stu-id="e80cb-131">Returns Transactional NTFS (TxF) specific information for the specified file.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="e80cb-132">**FSCTL \_ TXFS 儲存 \_ 點 \_ 資訊**</span><span class="sxs-lookup"><span data-stu-id="e80cb-132">**FSCTL\_TXFS\_SAVEPOINT\_INFORMATION**</span></span>](/windows/win32/api/winioctl/ni-winioctl-fsctl_txfs_savepoint_information)<br/>                   | <span data-ttu-id="e80cb-133">[**FSCTL \_ TXFS 儲存 \_ 點 \_ 資訊**](/windows/win32/api/winioctl/ni-winioctl-fsctl_txfs_savepoint_information)控制程式代碼可控制設定、清除和回復至指定的儲存點。</span><span class="sxs-lookup"><span data-stu-id="e80cb-133">The [**FSCTL\_TXFS\_SAVEPOINT\_INFORMATION**](/windows/win32/api/winioctl/ni-winioctl-fsctl_txfs_savepoint_information) control code controls setting, clearing, and rolling back to the specified savepoint.</span></span><br/> <span data-ttu-id="e80cb-134">若要執行這項作業，請使用下列參數呼叫 [**DeviceIoControl**](/windows/desktop/api/ioapiset/nf-ioapiset-deviceiocontrol) 函數。</span><span class="sxs-lookup"><span data-stu-id="e80cb-134">To perform this operation, call the [**DeviceIoControl**](/windows/desktop/api/ioapiset/nf-ioapiset-deviceiocontrol) function with the following parameters.</span></span><br/>                                                                                                                 |
| [<span data-ttu-id="e80cb-135">**FSCTL \_ TXFS \_ 交易使用中 \_**</span><span class="sxs-lookup"><span data-stu-id="e80cb-135">**FSCTL\_TXFS\_TRANSACTION\_ACTIVE**</span></span>](/windows/win32/api/winioctl/ni-winioctl-fsctl_txfs_transaction_active)<br/>                         | <span data-ttu-id="e80cb-136">傳回布林值，這個值會指出建立快照集時，關聯的磁片區上是否有任何作用中的交易。</span><span class="sxs-lookup"><span data-stu-id="e80cb-136">Returns a Boolean value that indicates if there were any transactions active on the associated volume when the snapshot was taken.</span></span> <span data-ttu-id="e80cb-137">此呼叫只對唯讀快照集磁片區有效。</span><span class="sxs-lookup"><span data-stu-id="e80cb-137">This call is only valid for read-only snapshot volumes.</span></span><br/>                                                                                                                                                                                                                                   |
| [<span data-ttu-id="e80cb-138">**FSCTL \_ TXFS \_ 寫入 \_ 備份 \_ 資訊**</span><span class="sxs-lookup"><span data-stu-id="e80cb-138">**FSCTL\_TXFS\_WRITE\_BACKUP\_INFORMATION**</span></span>](/windows/win32/api/winioctl/ni-winioctl-fsctl_txfs_write_backup_information)<br/>            | <span data-ttu-id="e80cb-139">將交易式 NTFS (TxF) 特定資訊寫入至指定的檔案。</span><span class="sxs-lookup"><span data-stu-id="e80cb-139">Writes Transactional NTFS (TxF) specific information to a specified file.</span></span> <span data-ttu-id="e80cb-140">[**TXFS \_ 寫入 \_ 備份 \_ 資訊**](/windows/desktop/api/WinIoCtl/ns-winioctl-txfs_write_backup_information)結構的 **緩衝區** 成員必須是 [**FSCTL \_ TXFS \_ 讀取 \_ 備份 \_ 資訊**](/windows/win32/api/winioctl/ni-winioctl-fsctl_txfs_read_backup_information)所傳回之 [**TXFS \_ read \_ backup \_ information \_ OUT**](/windows/desktop/api/WinIoCtl/ns-winioctl-txfs_read_backup_information_out)結構的 **緩衝區** 成員。</span><span class="sxs-lookup"><span data-stu-id="e80cb-140">The **Buffer** member of the [**TXFS\_WRITE\_BACKUP\_INFORMATION**](/windows/desktop/api/WinIoCtl/ns-winioctl-txfs_write_backup_information) structure must be the **Buffer** member of the [**TXFS\_READ\_BACKUP\_INFORMATION\_OUT**](/windows/desktop/api/WinIoCtl/ns-winioctl-txfs_read_backup_information_out) structure returned by [**FSCTL\_TXFS\_READ\_BACKUP\_INFORMATION**](/windows/win32/api/winioctl/ni-winioctl-fsctl_txfs_read_backup_information).</span></span><br/> |



 

 

