---
description: 提供數個函式，可從存取控制清單取得存取控制資訊 (ACL) 。
ms.assetid: a0839c49-09e9-4407-8702-051b88ef2231
title: 從 ACL 取得資訊
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5f87aebc2bc9b05191b5026b990714c2519091be
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/08/2021
ms.locfileid: "104194502"
---
# <a name="getting-information-from-an-acl"></a><span data-ttu-id="7f771-103">從 ACL 取得資訊</span><span class="sxs-lookup"><span data-stu-id="7f771-103">Getting Information from an ACL</span></span>

<span data-ttu-id="7f771-104">提供數個函式，可從 [*存取控制清單*](/windows/desktop/SecGloss/a-gly) 取得存取控制資訊 (ACL) 。</span><span class="sxs-lookup"><span data-stu-id="7f771-104">Several functions are provided that retrieve access control information from an [*access control list*](/windows/desktop/SecGloss/a-gly) (ACL).</span></span> <span data-ttu-id="7f771-105">這些函式包括用來決定 ACL 授與或審核指定 [信任者](trustees.md)的存取權限。</span><span class="sxs-lookup"><span data-stu-id="7f771-105">These include functions for determining the access rights that an ACL grants or audits for a specified [trustee](trustees.md).</span></span> <span data-ttu-id="7f771-106">其他函式可讓您將 [*存取控制專案*](/windows/desktop/SecGloss/a-gly) 的相關資訊解壓縮 (ace) 在 ACL 中。</span><span class="sxs-lookup"><span data-stu-id="7f771-106">Other functions enable you to extract information about the [*access control entries*](/windows/desktop/SecGloss/a-gly) (ACEs) in an ACL.</span></span>

<span data-ttu-id="7f771-107">[**GetExplicitEntriesFromAcl**](/windows/desktop/api/Aclapi/nf-aclapi-getexplicitentriesfromacla)函式會取得 [**明確 \_ 存取**](/windows/desktop/api/AccCtrl/ns-accctrl-explicit_access_a)結構的陣列，以描述 ACL 中的 ace。</span><span class="sxs-lookup"><span data-stu-id="7f771-107">The [**GetExplicitEntriesFromAcl**](/windows/desktop/api/Aclapi/nf-aclapi-getexplicitentriesfromacla) function retrieves an array of [**EXPLICIT\_ACCESS**](/windows/desktop/api/AccCtrl/ns-accctrl-explicit_access_a) structures that describe the ACEs in an ACL.</span></span> <span data-ttu-id="7f771-108">將 ACE 資訊從某個 ACL 複製到另一個 ACL 時，這會很有用。</span><span class="sxs-lookup"><span data-stu-id="7f771-108">This can be useful when copying ACE information from one ACL to another.</span></span> <span data-ttu-id="7f771-109">例如，若要在某個 ACL 中取得 Ace 的相關資訊，您可以在呼叫 [**SetEntriesInAcl**](/windows/desktop/api/Aclapi/nf-aclapi-setentriesinacla)函式的呼叫中傳遞傳回的 **明確 \_ 存取** 結構，以在新的 Acl 中建立對等 ace，來呼叫 **GetExplicitEntriesFromAcl** 。</span><span class="sxs-lookup"><span data-stu-id="7f771-109">For example, a call to **GetExplicitEntriesFromAcl** to get information about the ACEs in one ACL can be followed by passing the returned **EXPLICIT\_ACCESS** structures in a call to the [**SetEntriesInAcl**](/windows/desktop/api/Aclapi/nf-aclapi-setentriesinacla) function to create equivalent ACEs in a new ACL.</span></span>

<span data-ttu-id="7f771-110">[**GetEffectiveRightsFromAcl**](/windows/desktop/api/Aclapi/nf-aclapi-geteffectiverightsfromacla)函式可讓您判斷 DACL 授與給指定之信任者的有效存取權限。</span><span class="sxs-lookup"><span data-stu-id="7f771-110">The [**GetEffectiveRightsFromAcl**](/windows/desktop/api/Aclapi/nf-aclapi-geteffectiverightsfromacla) function enables you to determine the effective access rights that a DACL grants to a specified trustee.</span></span> <span data-ttu-id="7f771-111">信任者的有效存取權限是 DACL 授與信任者的存取權限，或信任者為其成員的任何群組。</span><span class="sxs-lookup"><span data-stu-id="7f771-111">The trustee's effective access rights are the access rights that a DACL grants to the trustee or to any groups of which the trustee is a member.</span></span> <span data-ttu-id="7f771-112">**GetEffectiveRightsFromAcl** 會在指定的 DACL 中檢查所有允許存取和拒絕存取的 ace。</span><span class="sxs-lookup"><span data-stu-id="7f771-112">**GetEffectiveRightsFromAcl** checks all access-allowed and access-denied ACEs in the specified DACL.</span></span>

<span data-ttu-id="7f771-113">**使用下列步驟來判斷信任者對物件的存取權限**</span><span class="sxs-lookup"><span data-stu-id="7f771-113">**Use the following steps to determine a trustee's access rights to an object**</span></span>

1.  <span data-ttu-id="7f771-114">呼叫 [**GetSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-getsecurityinfo) 或 [**GetNamedSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-getnamedsecurityinfoa) 函式，以取得物件 DACL 的指標。</span><span class="sxs-lookup"><span data-stu-id="7f771-114">Call the [**GetSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-getsecurityinfo) or [**GetNamedSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-getnamedsecurityinfoa) function to get a pointer to an object's DACL.</span></span>
2.  <span data-ttu-id="7f771-115">呼叫 [**GetEffectiveRightsFromAcl**](/windows/desktop/api/Aclapi/nf-aclapi-geteffectiverightsfromacla) 函式，以取得 DACL 授與給指定之信任者的存取權限。</span><span class="sxs-lookup"><span data-stu-id="7f771-115">Call the [**GetEffectiveRightsFromAcl**](/windows/desktop/api/Aclapi/nf-aclapi-geteffectiverightsfromacla) function to retrieve the access rights that the DACL grants to a specified trustee.</span></span>

<span data-ttu-id="7f771-116">[**GetAuditedPermissionsFromAcl**](/windows/desktop/api/Aclapi/nf-aclapi-getauditedpermissionsfromacla)函式可讓您檢查 SACL，以判斷指定信任者或受信任者為其成員之任何群組的已審核存取權限。</span><span class="sxs-lookup"><span data-stu-id="7f771-116">The [**GetAuditedPermissionsFromAcl**](/windows/desktop/api/Aclapi/nf-aclapi-getauditedpermissionsfromacla) function enables you to check a SACL to determine the audited access rights for a specified trustee or for any groups of which the trustee is a member.</span></span> <span data-ttu-id="7f771-117">已審核的許可權會指出導致系統在安全性事件記錄檔中產生審核記錄的存取嘗試類型。</span><span class="sxs-lookup"><span data-stu-id="7f771-117">The audited rights indicate the types of access attempts that cause the system to generate an audit record in the security event log.</span></span> <span data-ttu-id="7f771-118">此函式會傳回兩個 [*存取遮罩*](/windows/desktop/SecGloss/a-gly)：一個包含針對失敗存取嘗試所監視的存取權限，另一個則包含針對成功存取所監視的存取權。</span><span class="sxs-lookup"><span data-stu-id="7f771-118">The function returns two [*access masks*](/windows/desktop/SecGloss/a-gly): one containing the access rights monitored for failed access attempts, and another containing the access rights monitored for successful access.</span></span> <span data-ttu-id="7f771-119">**GetAuditedPermissionsFromAcl** 會檢查 SACL 中的所有系統-audit ace。</span><span class="sxs-lookup"><span data-stu-id="7f771-119">**GetAuditedPermissionsFromAcl** checks all system-audit ACEs in a SACL.</span></span>

 

 
