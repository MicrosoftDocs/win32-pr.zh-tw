---
description: 存取權杖中 (SID) 的每個使用者和群組安全識別碼都有一組屬性，可控制系統在存取檢查中使用 SID 的方式。 下表列出控制存取檢查的屬性。
ms.assetid: c902f876-f05e-4b0c-ab65-a0c6cebca933
title: 存取權杖中的 SID 屬性
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e6a93e180c8c6ffe03a26591d5b9f722c2266356
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/07/2021
ms.locfileid: "103691048"
---
# <a name="sid-attributes-in-an-access-token"></a><span data-ttu-id="50bd3-104">存取權杖中的 SID 屬性</span><span class="sxs-lookup"><span data-stu-id="50bd3-104">SID Attributes in an Access Token</span></span>

<span data-ttu-id="50bd3-105">[*存取權杖*](/windows/desktop/SecGloss/a-gly)中 (sid) 的每個使用者和群組 [*安全識別碼*](/windows/desktop/SecGloss/s-gly)都有一組屬性，可控制系統在存取檢查中使用 SID 的方式。</span><span class="sxs-lookup"><span data-stu-id="50bd3-105">Each user and group [*security identifier*](/windows/desktop/SecGloss/s-gly) (SID) in an [*access token*](/windows/desktop/SecGloss/a-gly) has a set of attributes that control how the system uses the SID in an access check.</span></span> <span data-ttu-id="50bd3-106">下表列出控制存取檢查的屬性。</span><span class="sxs-lookup"><span data-stu-id="50bd3-106">The following table lists the attributes that control access checking.</span></span>



| <span data-ttu-id="50bd3-107">屬性</span><span class="sxs-lookup"><span data-stu-id="50bd3-107">Attribute</span></span>                       | <span data-ttu-id="50bd3-108">描述</span><span class="sxs-lookup"><span data-stu-id="50bd3-108">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|---------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="50bd3-109">\_ \_ 已啟用 SE 群組</span><span class="sxs-lookup"><span data-stu-id="50bd3-109">SE\_GROUP\_ENABLED</span></span>              | <span data-ttu-id="50bd3-110">啟用此屬性的 SID 可進行存取檢查。</span><span class="sxs-lookup"><span data-stu-id="50bd3-110">A SID with this attribute is enabled for access checks.</span></span> <span data-ttu-id="50bd3-111">當系統執行存取檢查時，它會檢查是否有存取允許和拒絕存取的 [*存取控制專案*](/windows/desktop/SecGloss/a-gly) (ace) 套用至存取權杖中其中一個已啟用的 sid。</span><span class="sxs-lookup"><span data-stu-id="50bd3-111">When the system performs an access check, it checks for access-allowed and access-denied [*access control entries*](/windows/desktop/SecGloss/a-gly) (ACEs) that apply to one of the enabled SIDs in the access token.</span></span> <span data-ttu-id="50bd3-112">除非已設定「SE \_ 群組」 \_ 使用「 \_ \_ \_ 僅限拒絕」屬性，否則在存取檢查期間會忽略沒有這個屬性的 SID。</span><span class="sxs-lookup"><span data-stu-id="50bd3-112">A SID without this attribute is ignored during an access check unless the SE\_GROUP\_USE\_FOR\_DENY\_ONLY attribute is set.</span></span><br/> |
| <span data-ttu-id="50bd3-113">SE \_ 群組 \_ \_ 僅用於 \_ 拒絕 \_</span><span class="sxs-lookup"><span data-stu-id="50bd3-113">SE\_GROUP\_USE\_FOR\_DENY\_ONLY</span></span> | <span data-ttu-id="50bd3-114">具有這個屬性的 SID 是僅限拒絕的 SID。</span><span class="sxs-lookup"><span data-stu-id="50bd3-114">A SID with this attribute is a deny-only SID.</span></span> <span data-ttu-id="50bd3-115">當系統執行存取檢查時，它會檢查套用至 SID 的拒絕存取的 Ace，但會忽略 SID 的存取允許 Ace。</span><span class="sxs-lookup"><span data-stu-id="50bd3-115">When the system performs an access check, it checks for access-denied ACEs that apply to the SID, but it ignores access-allowed ACEs for the SID.</span></span> <span data-ttu-id="50bd3-116">如果設定此屬性， \_ \_ 就不會設定 SE 群組 ENABLED 屬性，也無法重新啟用 SID。</span><span class="sxs-lookup"><span data-stu-id="50bd3-116">If this attribute is set, the SE\_GROUP\_ENABLED attribute is not set and the SID cannot be reenabled.</span></span><br/>                                                                                                                                                          |



 

<span data-ttu-id="50bd3-117">若要設定或清除 \_ 群組 SID 的 [已啟用 SE 群組] \_ 屬性，請使用 [**AdjustTokenGroups**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-adjusttokengroups) 函數。</span><span class="sxs-lookup"><span data-stu-id="50bd3-117">To set or clear the SE\_GROUP\_ENABLED attribute of a group SID, use the [**AdjustTokenGroups**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-adjusttokengroups) function.</span></span> <span data-ttu-id="50bd3-118">您無法停用具有「SE 群組強制」屬性的群組 SID \_ \_ 。</span><span class="sxs-lookup"><span data-stu-id="50bd3-118">You cannot disable a group SID that has the SE\_GROUP\_MANDATORY attribute.</span></span> <span data-ttu-id="50bd3-119">您無法使用 **AdjustTokenGroups** 來停用存取權杖的使用者 SID。</span><span class="sxs-lookup"><span data-stu-id="50bd3-119">You cannot use **AdjustTokenGroups** to disable the user SID of an access token.</span></span>

<span data-ttu-id="50bd3-120">若要判斷是否已在權杖中啟用 SID，也就是是否有啟用 SE \_ 群組的 \_ 屬性，請呼叫 [**CheckTokenMembership**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-checktokenmembership) 函數。</span><span class="sxs-lookup"><span data-stu-id="50bd3-120">To determine whether a SID is enabled in a token, that is, whether it has the SE\_GROUP\_ENABLED attribute, call the [**CheckTokenMembership**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-checktokenmembership) function.</span></span>

<span data-ttu-id="50bd3-121">若要將 SE \_ 群組 \_ 用於 \_ SID 的 [ \_ \_ 僅限拒絕] 屬性，請在您呼叫 [**CreateRestrictedToken**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-createrestrictedtoken) 函式時指定的僅限拒絕 sid 清單中包含 sid。</span><span class="sxs-lookup"><span data-stu-id="50bd3-121">To set the SE\_GROUP\_USE\_FOR\_DENY\_ONLY attribute of a SID, include the SID in the list of deny-only SIDs that you specify when you call the [**CreateRestrictedToken**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-createrestrictedtoken) function.</span></span> <span data-ttu-id="50bd3-122">**CreateRestrictedToken** 可將「僅限拒絕」屬性的「se 群組」套用 \_ \_ \_ \_ \_ 至任何 SID，包括具有「SE 群組強制」屬性的使用者 SID 和群組 sid \_ \_ 。</span><span class="sxs-lookup"><span data-stu-id="50bd3-122">**CreateRestrictedToken** can apply the SE\_GROUP\_USE\_FOR\_DENY\_ONLY attribute to any SID, including the user SID and group SIDs that have the SE\_GROUP\_MANDATORY attribute.</span></span> <span data-ttu-id="50bd3-123">不過，您無法從 SID 移除僅限拒絕的屬性，也不能使用 [**AdjustTokenGroups**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-adjusttokengroups) 來設定 \_ \_ 僅限拒絕 SID 上的「SE 群組啟用」屬性。</span><span class="sxs-lookup"><span data-stu-id="50bd3-123">However, you cannot remove the deny-only attribute from a SID, nor can you use [**AdjustTokenGroups**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-adjusttokengroups) to set the SE\_GROUP\_ENABLED attribute on a deny-only SID.</span></span>

<span data-ttu-id="50bd3-124">若要取得 SID 的屬性，請使用 TokenGroups 值來呼叫 [**GetTokenInformation**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-gettokeninformation) 函數。</span><span class="sxs-lookup"><span data-stu-id="50bd3-124">To get the attributes of a SID, call the [**GetTokenInformation**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-gettokeninformation) function with the TokenGroups value.</span></span> <span data-ttu-id="50bd3-125">此函式會傳回 [**SID \_ 和 \_ 屬性**](/windows/desktop/api/Winnt/ns-winnt-sid_and_attributes) 結構的陣列，以識別群組 sid 和其屬性。</span><span class="sxs-lookup"><span data-stu-id="50bd3-125">The function returns an array of [**SID\_AND\_ATTRIBUTES**](/windows/desktop/api/Winnt/ns-winnt-sid_and_attributes) structures that identify the group SIDs and their attributes.</span></span>

 

