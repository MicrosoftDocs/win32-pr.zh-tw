---
description: 使用 GetSecurityInfo 和 GetNamedSecurityInfo 函式，以取得物件安全描述項的指標。
ms.assetid: 834f1b58-d403-4899-865e-5721a37587e9
title: 安全描述項作業
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b5574a504468a4f4bb7dc14effe1f4717d695846
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/07/2021
ms.locfileid: "104113789"
---
# <a name="security-descriptor-operations"></a><span data-ttu-id="de9e2-103">安全描述項作業</span><span class="sxs-lookup"><span data-stu-id="de9e2-103">Security Descriptor Operations</span></span>

<span data-ttu-id="de9e2-104">Windows API 提供的函式可用來取得和設定與安全物件相關聯之 [*安全描述項*](/windows/desktop/SecGloss/s-gly) 的元件。</span><span class="sxs-lookup"><span data-stu-id="de9e2-104">The Windows API provides functions for getting and setting the components of the [*security descriptor*](/windows/desktop/SecGloss/s-gly) associated with a securable object.</span></span> <span data-ttu-id="de9e2-105">使用 [**GetSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-getsecurityinfo) 和 [**GetNamedSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-getnamedsecurityinfoa) 函式，以取得物件安全描述項的指標。</span><span class="sxs-lookup"><span data-stu-id="de9e2-105">Use the [**GetSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-getsecurityinfo) and [**GetNamedSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-getnamedsecurityinfoa) functions to retrieve a pointer to an object's security descriptor.</span></span> <span data-ttu-id="de9e2-106">這些函式也可以取得安全描述項之個別元件的指標： DACL、SACL、擁有者 SID 和主要群組 SID。</span><span class="sxs-lookup"><span data-stu-id="de9e2-106">These functions can also retrieve pointers to the individual components of the security descriptor: DACL, SACL, owner SID, and primary group SID.</span></span> <span data-ttu-id="de9e2-107">您可以使用 [**SetSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setsecurityinfo) 和 [**SetNamedSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setnamedsecurityinfoa) 函數來設定物件安全描述項的元件。</span><span class="sxs-lookup"><span data-stu-id="de9e2-107">Use the [**SetSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setsecurityinfo) and [**SetNamedSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setnamedsecurityinfoa) functions to set the components of an object's security descriptor.</span></span>

<span data-ttu-id="de9e2-108">一般情況下，您應該使用 [**GetSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-getsecurityinfo) 和 [**SetSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setsecurityinfo) 搭配控制碼所識別的物件，並使用名稱所識別的物件 [**SetNamedSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setnamedsecurityinfoa) 和 [**GetNamedSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-getnamedsecurityinfoa) 。</span><span class="sxs-lookup"><span data-stu-id="de9e2-108">In general, you should use [**GetSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-getsecurityinfo) and [**SetSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setsecurityinfo) with objects identified by a handle, and [**SetNamedSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setnamedsecurityinfoa) and [**GetNamedSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-getnamedsecurityinfoa) with objects identified by a name.</span></span> <span data-ttu-id="de9e2-109">如需使用各種物件類型時所要使用之特定函式的詳細資訊，請參閱 [安全物件](securable-objects.md)。</span><span class="sxs-lookup"><span data-stu-id="de9e2-109">For more information about the specific functions to use when working with the various types of objects, see [Securable Objects](securable-objects.md).</span></span>

<span data-ttu-id="de9e2-110">Windows API 提供其他函式來操作安全描述項的元件。</span><span class="sxs-lookup"><span data-stu-id="de9e2-110">The Windows API provides additional functions for manipulating the components of a security descriptor.</span></span> <span data-ttu-id="de9e2-111">如需使用 (Dacl 或 Sacl) 之存取控制清單的詳細資訊，請參閱 [從 Acl 取得資訊](getting-information-from-an-acl.md) 和 [建立或修改 acl](creating-or-modifying-an-acl.md)。</span><span class="sxs-lookup"><span data-stu-id="de9e2-111">For information about working with access control lists (DACLs or SACLs), see [Getting Information from an ACL](getting-information-from-an-acl.md) and [Creating or Modifying an ACL](creating-or-modifying-an-acl.md).</span></span> <span data-ttu-id="de9e2-112">如需 Sid 的詳細資訊，請參閱 (Sid) 的 [安全性識別碼](security-identifiers.md) 。</span><span class="sxs-lookup"><span data-stu-id="de9e2-112">For information about SIDs, see [Security Identifiers](security-identifiers.md) (SIDs).</span></span>

<span data-ttu-id="de9e2-113">若要取得安全描述項中的控制項資訊，請呼叫 [**GetSecurityDescriptorControl**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-getsecuritydescriptorcontrol) 函數。</span><span class="sxs-lookup"><span data-stu-id="de9e2-113">To get the control information in a security descriptor, call the [**GetSecurityDescriptorControl**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-getsecuritydescriptorcontrol) function.</span></span> <span data-ttu-id="de9e2-114">若要設定與自動 ACE 繼承相關的控制項位，請呼叫 [**SetSecurityDescriptorControl**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-setsecuritydescriptorcontrol) 函數。</span><span class="sxs-lookup"><span data-stu-id="de9e2-114">To set the control bits that relate to automatic ACE inheritance, call the [**SetSecurityDescriptorControl**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-setsecuritydescriptorcontrol) function.</span></span> <span data-ttu-id="de9e2-115">其他控制位是由設定安全描述項元件的各種函數所設定。</span><span class="sxs-lookup"><span data-stu-id="de9e2-115">Other control bits are set by the various functions that set a security descriptor component.</span></span> <span data-ttu-id="de9e2-116">例如，如果您使用 [**SetSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setsecurityinfo) 來變更物件的 DACL，則函式會適當地設定或清除位，以指出安全描述項是否具有 DACL、是否為預設的 dacl 等等。</span><span class="sxs-lookup"><span data-stu-id="de9e2-116">For example, if you use [**SetSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setsecurityinfo) to change an object's DACL, the function sets or clears the bits as appropriate to indicate whether the security descriptor has a DACL, whether it is a default DACL, and so on.</span></span> <span data-ttu-id="de9e2-117">另一個範例是 [*資源管理員*](/windows/desktop/SecGloss/r-gly) (RM) 控制位包含在安全描述項中。</span><span class="sxs-lookup"><span data-stu-id="de9e2-117">Another example is the [*resource manager*](/windows/desktop/SecGloss/r-gly) (RM) control bits contained in the security descriptor.</span></span> <span data-ttu-id="de9e2-118">系統會根據資源管理員的執行來使用這些位，而且會透過 [**GetSecurityDescriptorRMControl**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-getsecuritydescriptorrmcontrol) 和 [**SetSecurityDescriptorRMControl**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-setsecuritydescriptorrmcontrol) 函數來存取。</span><span class="sxs-lookup"><span data-stu-id="de9e2-118">These bits are used according to the implementation of the resource manager, and are accessed through the [**GetSecurityDescriptorRMControl**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-getsecuritydescriptorrmcontrol) and [**SetSecurityDescriptorRMControl**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-setsecuritydescriptorrmcontrol) functions.</span></span>

 

 
