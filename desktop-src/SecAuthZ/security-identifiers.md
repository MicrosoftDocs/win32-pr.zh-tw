---
description: " (SID) 的安全識別碼是用來識別信任者之可變長度的唯一值。"
ms.assetid: 7cb07bcd-70f4-43dd-8382-320fcff151c7
title: 安全性識別元
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0368b2484cd8766aa7fa74c24679e82b10854e9d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/07/2021
ms.locfileid: "106971036"
---
# <a name="security-identifiers"></a><span data-ttu-id="85bb4-103">安全性識別元</span><span class="sxs-lookup"><span data-stu-id="85bb4-103">Security Identifiers</span></span>

<span data-ttu-id="85bb4-104"> (SID) 的 [*安全識別碼*](/windows/desktop/SecGloss/s-gly) 是用來識別 [信任者](trustees.md)之可變長度的唯一值。</span><span class="sxs-lookup"><span data-stu-id="85bb4-104">A [*security identifier*](/windows/desktop/SecGloss/s-gly) (SID) is a unique value of variable length used to identify a [trustee](trustees.md).</span></span> <span data-ttu-id="85bb4-105">每個帳戶都有一個由授權單位（例如 Windows 網域控制站）發出的唯一 SID，並儲存在安全性資料庫中。</span><span class="sxs-lookup"><span data-stu-id="85bb4-105">Each account has a unique SID issued by an authority, such as a Windows domain controller, and stored in a security database.</span></span> <span data-ttu-id="85bb4-106">每次使用者登入時，系統會從資料庫抓取該使用者的 SID，並將其放在該使用者的 [*存取權杖*](/windows/desktop/SecGloss/a-gly) 中。</span><span class="sxs-lookup"><span data-stu-id="85bb4-106">Each time a user logs on, the system retrieves the SID for that user from the database and places it in the [*access token*](/windows/desktop/SecGloss/a-gly) for that user.</span></span> <span data-ttu-id="85bb4-107">系統會在存取權杖中使用 SID，以在所有後續與 Windows 安全性的互動中識別使用者。</span><span class="sxs-lookup"><span data-stu-id="85bb4-107">The system uses the SID in the access token to identify the user in all subsequent interactions with Windows security.</span></span> <span data-ttu-id="85bb4-108">使用 SID 做為使用者或群組的唯一識別碼時，不能再次用來識別另一個使用者或群組。</span><span class="sxs-lookup"><span data-stu-id="85bb4-108">When a SID has been used as the unique identifier for a user or group, it cannot ever be used again to identify another user or group.</span></span>

<span data-ttu-id="85bb4-109">Windows 安全性在下列安全性元素中使用 Sid：</span><span class="sxs-lookup"><span data-stu-id="85bb4-109">Windows security uses SIDs in the following security elements:</span></span>

-   <span data-ttu-id="85bb4-110">在 [安全描述項](security-descriptors.md) 中識別物件和主要群組的擁有者</span><span class="sxs-lookup"><span data-stu-id="85bb4-110">In [security descriptors](security-descriptors.md) to identify the owner of an object and primary group</span></span>
-   <span data-ttu-id="85bb4-111">在 [存取控制專案](access-control-entries.md)中，識別允許、拒絕或審核存取權的信任者</span><span class="sxs-lookup"><span data-stu-id="85bb4-111">In [access control entries](access-control-entries.md), to identify the trustee for whom access is allowed, denied, or audited</span></span>
-   <span data-ttu-id="85bb4-112">在 [存取權杖](access-tokens.md)中，用來識別使用者和使用者所屬的群組</span><span class="sxs-lookup"><span data-stu-id="85bb4-112">In [access tokens](access-tokens.md), to identify the user and the groups to which the user belongs</span></span>

<span data-ttu-id="85bb4-113">除了指派給特定使用者和群組的唯一建立的特定網域 Sid 之外，也有已知的 [sid](well-known-sids.md) 可識別一般群組和一般使用者。</span><span class="sxs-lookup"><span data-stu-id="85bb4-113">In addition to the uniquely created, domain-specific SIDs assigned to specific users and groups, there are [well-known SIDs](well-known-sids.md) that identify generic groups and generic users.</span></span> <span data-ttu-id="85bb4-114">例如，已知的 Sid （Everyone 和 World）會識別包含所有使用者的群組。</span><span class="sxs-lookup"><span data-stu-id="85bb4-114">For example, the well-known SIDs, Everyone and World, identify a group that includes all users.</span></span>

<span data-ttu-id="85bb4-115">大部分的應用程式永遠都不需要使用 Sid。</span><span class="sxs-lookup"><span data-stu-id="85bb4-115">Most applications never need to work with SIDs.</span></span> <span data-ttu-id="85bb4-116">由於 [已知 sid](well-known-sids.md) 的名稱可能會不同，因此您應該使用函式從預先定義的常數建立 SID，而不是使用已知 SID 的名稱。</span><span class="sxs-lookup"><span data-stu-id="85bb4-116">Because the names of [well-known SIDs](well-known-sids.md) can vary, you should use the functions to build the SID from predefined constants rather than using the name of the well-known SID.</span></span> <span data-ttu-id="85bb4-117">例如，美國英文版的 Windows 作業系統擁有名為「內建 \\ 系統管理員」的已知 SID，在國際版的系統上可能會有不同的名稱。</span><span class="sxs-lookup"><span data-stu-id="85bb4-117">For example, the U.S. English version of the Windows operating system has a well-known SID named "BUILTIN\\Administrators" that might have a different name on international versions of the system.</span></span> <span data-ttu-id="85bb4-118">如需建立已知 SID 的範例，請參閱 [在 c + + 中搜尋存取權杖中的 sid](searching-for-a-sid-in-an-access-token-in-c--.md)。</span><span class="sxs-lookup"><span data-stu-id="85bb4-118">For an example that builds a well-known SID, see [Searching for a SID in an Access Token in C++](searching-for-a-sid-in-an-access-token-in-c--.md).</span></span>

<span data-ttu-id="85bb4-119">如果您需要使用 Sid，請勿直接操作它們。</span><span class="sxs-lookup"><span data-stu-id="85bb4-119">If you do need to work with SIDs, do not manipulate them directly.</span></span> <span data-ttu-id="85bb4-120">相反地，請使用下列函數。</span><span class="sxs-lookup"><span data-stu-id="85bb4-120">Instead, use the following functions.</span></span>



| <span data-ttu-id="85bb4-121">函式</span><span class="sxs-lookup"><span data-stu-id="85bb4-121">Function</span></span>                                                       | <span data-ttu-id="85bb4-122">描述</span><span class="sxs-lookup"><span data-stu-id="85bb4-122">Description</span></span>                                                                                                                                               |
|----------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="85bb4-123">**AllocateAndInitializeSid**</span><span class="sxs-lookup"><span data-stu-id="85bb4-123">**AllocateAndInitializeSid**</span></span>](/windows/win32/api/securitybaseapi/nf-securitybaseapi-allocateandinitializesid)   | <span data-ttu-id="85bb4-124">配置並初始化具有指定之 subauthorities 數目的 SID。</span><span class="sxs-lookup"><span data-stu-id="85bb4-124">Allocates and initializes a SID with the specified number of subauthorities.</span></span>                                                                              |
| [<span data-ttu-id="85bb4-125">**ConvertSidToStringSid**</span><span class="sxs-lookup"><span data-stu-id="85bb4-125">**ConvertSidToStringSid**</span></span>](/windows/desktop/api/Sddl/nf-sddl-convertsidtostringsida)         | <span data-ttu-id="85bb4-126">將 SID 轉換成適合顯示、儲存或傳輸的字串格式。</span><span class="sxs-lookup"><span data-stu-id="85bb4-126">Converts a SID to a string format suitable for display, storage, or transport.</span></span>                                                                            |
| [<span data-ttu-id="85bb4-127">**ConvertStringSidToSid**</span><span class="sxs-lookup"><span data-stu-id="85bb4-127">**ConvertStringSidToSid**</span></span>](/windows/desktop/api/Sddl/nf-sddl-convertstringsidtosida)         | <span data-ttu-id="85bb4-128">將字串格式 SID 轉換成有效的功能 SID。</span><span class="sxs-lookup"><span data-stu-id="85bb4-128">Converts a string-format SID to a valid, functional SID.</span></span>                                                                                                  |
| [<span data-ttu-id="85bb4-129">**CopySid**</span><span class="sxs-lookup"><span data-stu-id="85bb4-129">**CopySid**</span></span>](/windows/win32/api/securitybaseapi/nf-securitybaseapi-copysid)                                     | <span data-ttu-id="85bb4-130">將來源 SID 複製到緩衝區。</span><span class="sxs-lookup"><span data-stu-id="85bb4-130">Copies a source SID to a buffer.</span></span>                                                                                                                          |
| [<span data-ttu-id="85bb4-131">**EqualPrefixSid**</span><span class="sxs-lookup"><span data-stu-id="85bb4-131">**EqualPrefixSid**</span></span>](/windows/win32/api/securitybaseapi/nf-securitybaseapi-equalprefixsid)                       | <span data-ttu-id="85bb4-132">測試兩個 SID 首碼值是否相等。</span><span class="sxs-lookup"><span data-stu-id="85bb4-132">Tests two SID prefix values for equality.</span></span> <span data-ttu-id="85bb4-133">除了最後一個 subauthority 值以外，SID 首碼是整個 SID。</span><span class="sxs-lookup"><span data-stu-id="85bb4-133">A SID prefix is the entire SID except for the last subauthority value.</span></span>                                          |
| [<span data-ttu-id="85bb4-134">**EqualSid**</span><span class="sxs-lookup"><span data-stu-id="85bb4-134">**EqualSid**</span></span>](/windows/win32/api/securitybaseapi/nf-securitybaseapi-equalsid)                                   | <span data-ttu-id="85bb4-135">測試兩個 Sid 是否相等。</span><span class="sxs-lookup"><span data-stu-id="85bb4-135">Tests two SIDs for equality.</span></span> <span data-ttu-id="85bb4-136">它們必須完全相符才能視為相等。</span><span class="sxs-lookup"><span data-stu-id="85bb4-136">They must match exactly to be considered equal.</span></span>                                                                              |
| [<span data-ttu-id="85bb4-137">**FreeSid**</span><span class="sxs-lookup"><span data-stu-id="85bb4-137">**FreeSid**</span></span>](/windows/win32/api/securitybaseapi/nf-securitybaseapi-freesid)                                     | <span data-ttu-id="85bb4-138">使用 [**AllocateAndInitializeSid**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-allocateandinitializesid) 函數釋放先前配置的 SID。</span><span class="sxs-lookup"><span data-stu-id="85bb4-138">Frees a previously allocated SID by using the [**AllocateAndInitializeSid**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-allocateandinitializesid) function.</span></span>                                      |
| [<span data-ttu-id="85bb4-139">**GetLengthSid**</span><span class="sxs-lookup"><span data-stu-id="85bb4-139">**GetLengthSid**</span></span>](/windows/win32/api/securitybaseapi/nf-securitybaseapi-getlengthsid)                           | <span data-ttu-id="85bb4-140">抓取 SID 的長度。</span><span class="sxs-lookup"><span data-stu-id="85bb4-140">Retrieves the length of a SID.</span></span>                                                                                                                            |
| [<span data-ttu-id="85bb4-141">**GetSidIdentifierAuthority**</span><span class="sxs-lookup"><span data-stu-id="85bb4-141">**GetSidIdentifierAuthority**</span></span>](/windows/win32/api/securitybaseapi/nf-securitybaseapi-getsididentifierauthority) | <span data-ttu-id="85bb4-142">抓取 SID 的識別碼授權單位指標。</span><span class="sxs-lookup"><span data-stu-id="85bb4-142">Retrieves a pointer to the identifier authority for a SID.</span></span>                                                                                                |
| [<span data-ttu-id="85bb4-143">**GetSidLengthRequired**</span><span class="sxs-lookup"><span data-stu-id="85bb4-143">**GetSidLengthRequired**</span></span>](/windows/win32/api/securitybaseapi/nf-securitybaseapi-getsidlengthrequired)           | <span data-ttu-id="85bb4-144">抓取儲存具有指定 subauthorities 數目之 SID 所需的緩衝區大小。</span><span class="sxs-lookup"><span data-stu-id="85bb4-144">Retrieves the size of the buffer required to store a SID with a specified number of subauthorities.</span></span>                                                       |
| [<span data-ttu-id="85bb4-145">**GetSidSubAuthority**</span><span class="sxs-lookup"><span data-stu-id="85bb4-145">**GetSidSubAuthority**</span></span>](/windows/win32/api/securitybaseapi/nf-securitybaseapi-getsidsubauthority)               | <span data-ttu-id="85bb4-146">抓取 SID 中指定之 subauthority 的指標。</span><span class="sxs-lookup"><span data-stu-id="85bb4-146">Retrieves a pointer to a specified subauthority in a SID.</span></span>                                                                                                 |
| [<span data-ttu-id="85bb4-147">**GetSidSubAuthorityCount**</span><span class="sxs-lookup"><span data-stu-id="85bb4-147">**GetSidSubAuthorityCount**</span></span>](/windows/win32/api/securitybaseapi/nf-securitybaseapi-getsidsubauthoritycount)     | <span data-ttu-id="85bb4-148">捕獲 SID 中的 subauthorities 數目。</span><span class="sxs-lookup"><span data-stu-id="85bb4-148">Retrieves the number of subauthorities in a SID.</span></span>                                                                                                          |
| [<span data-ttu-id="85bb4-149">**InitializeSid**</span><span class="sxs-lookup"><span data-stu-id="85bb4-149">**InitializeSid**</span></span>](/windows/win32/api/securitybaseapi/nf-securitybaseapi-initializesid)                         | <span data-ttu-id="85bb4-150">初始化 [**SID**](/windows/desktop/api/Winnt/ns-winnt-sid) 結構。</span><span class="sxs-lookup"><span data-stu-id="85bb4-150">Initializes a [**SID**](/windows/desktop/api/Winnt/ns-winnt-sid) structure.</span></span>                                                                                                               |
| [<span data-ttu-id="85bb4-151">**IsValidSid**</span><span class="sxs-lookup"><span data-stu-id="85bb4-151">**IsValidSid**</span></span>](/windows/win32/api/securitybaseapi/nf-securitybaseapi-isvalidsid)                               | <span data-ttu-id="85bb4-152">藉由確認修訂編號在已知範圍內，且 subauthorities 數目小於最大值，來測試 SID 的有效性。</span><span class="sxs-lookup"><span data-stu-id="85bb4-152">Tests the validity of a SID by verifying that the revision number is within a known range and that the number of subauthorities is less than the maximum.</span></span> |
| [<span data-ttu-id="85bb4-153">**LookupAccountName**</span><span class="sxs-lookup"><span data-stu-id="85bb4-153">**LookupAccountName**</span></span>](/windows/desktop/api/Winbase/nf-winbase-lookupaccountnamea)                 | <span data-ttu-id="85bb4-154">抓取對應至指定之帳戶名稱的 SID。</span><span class="sxs-lookup"><span data-stu-id="85bb4-154">Retrieves the SID that corresponds to a specified account name.</span></span>                                                                                           |
| [<span data-ttu-id="85bb4-155">**LookupAccountSid**</span><span class="sxs-lookup"><span data-stu-id="85bb4-155">**LookupAccountSid**</span></span>](/windows/desktop/api/Winbase/nf-winbase-lookupaccountsida)                   | <span data-ttu-id="85bb4-156">抓取對應至指定之 SID 的帳戶名稱。</span><span class="sxs-lookup"><span data-stu-id="85bb4-156">Retrieves the account name that corresponds to a specified SID.</span></span>                                                                                           |



 

 

 
