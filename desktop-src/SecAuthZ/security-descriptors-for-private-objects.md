---
description: 若要建立安全描述項，受保護的伺服器可以使用應用程式用來建立安全物件安全描述項的相同程式。
ms.assetid: f40c4b62-a3f0-4e66-875e-2ef904d052e5
title: 私用物件的安全描述項
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 97c40dc5c4e9f0a3d0e641874153d2862d038a19
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/07/2021
ms.locfileid: "103943561"
---
# <a name="security-descriptors-for-private-objects"></a><span data-ttu-id="d1958-103">私用物件的安全描述項</span><span class="sxs-lookup"><span data-stu-id="d1958-103">Security Descriptors for Private Objects</span></span>

<span data-ttu-id="d1958-104">若要建立 [*安全描述項*](/windows/desktop/SecGloss/s-gly)，受保護的伺服器可以使用應用程式用來建立安全物件安全描述項的相同程式。</span><span class="sxs-lookup"><span data-stu-id="d1958-104">To create a [*security descriptor*](/windows/desktop/SecGloss/s-gly), a protected server can use the same procedure that an application would use to create a security descriptor for a securable object.</span></span> <span data-ttu-id="d1958-105">如需範例程式碼，請參閱 [在 c + + 中建立新物件的安全描述項](creating-a-security-descriptor-for-a-new-object-in-c--.md)。</span><span class="sxs-lookup"><span data-stu-id="d1958-105">For sample code, see [Creating a Security Descriptor for a New Object in C++](creating-a-security-descriptor-for-a-new-object-in-c--.md).</span></span> <span data-ttu-id="d1958-106">或者，受保護的伺服器應用程式可以呼叫 [**BuildSecurityDescriptor**](/windows/desktop/api/Aclapi/nf-aclapi-buildsecuritydescriptora) 函式來進行此作業。</span><span class="sxs-lookup"><span data-stu-id="d1958-106">Alternatively, a protected server application can call the [**BuildSecurityDescriptor**](/windows/desktop/api/Aclapi/nf-aclapi-buildsecuritydescriptora) function to do this.</span></span> <span data-ttu-id="d1958-107">如果將現有的 [*自我相關安全描述項*](/windows/desktop/SecGloss/s-gly) 指標提供給 **BuildSecurityDescriptor**，它會建立新的安全描述項，其中包含來自該安全描述項的資訊，並與新的存取控制資訊合併在函式呼叫中做為參數傳遞。</span><span class="sxs-lookup"><span data-stu-id="d1958-107">If a pointer to an existing [*self-relative security descriptor*](/windows/desktop/SecGloss/s-gly) is supplied to **BuildSecurityDescriptor**, it will build the new security descriptor with information taken from that security descriptor merged with new access control information passed as parameters in the function call.</span></span> <span data-ttu-id="d1958-108">傳遞給函式的信任結構可以選擇性地指定擁有 [**者**](/windows/desktop/api/AccCtrl/ns-accctrl-trustee_a) 和群組。</span><span class="sxs-lookup"><span data-stu-id="d1958-108">The owner and group are optionally specified by [**TRUSTEE**](/windows/desktop/api/AccCtrl/ns-accctrl-trustee_a) structures passed to the function.</span></span> <span data-ttu-id="d1958-109">**BuildSecurityDescriptor** 所建立的安全描述項會採用 *自我對應* 的格式。</span><span class="sxs-lookup"><span data-stu-id="d1958-109">The security descriptor created by **BuildSecurityDescriptor** is in *self-relative* format.</span></span>

<span data-ttu-id="d1958-110">此外，Windows API 還提供一組函式，用來合併用戶端安全性資訊，以及繼承自父物件之安全描述項或預設安全描述項的資訊。</span><span class="sxs-lookup"><span data-stu-id="d1958-110">In addition, the Windows API provides a set of functions for merging client security information with information inherited from the security descriptor for a parent object or from a default security descriptor.</span></span> <span data-ttu-id="d1958-111">[**CreatePrivateObjectSecurity**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-createprivateobjectsecurity)、 [**GetPrivateObjectSecurity**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-getprivateobjectsecurity)、 [**SetPrivateObjectSecurity**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-setprivateobjectsecurity)和 [**DestroyPrivateObjectSecurity**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-destroyprivateobjectsecurity)函數可讓您從 [*存取權杖*](/windows/desktop/SecGloss/a-gly)取出預設資訊、支援繼承，以及操作安全描述項的特定部分。</span><span class="sxs-lookup"><span data-stu-id="d1958-111">The [**CreatePrivateObjectSecurity**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-createprivateobjectsecurity), [**GetPrivateObjectSecurity**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-getprivateobjectsecurity), [**SetPrivateObjectSecurity**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-setprivateobjectsecurity), and [**DestroyPrivateObjectSecurity**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-destroyprivateobjectsecurity) functions provide the ability to retrieve default information from an [*access token*](/windows/desktop/SecGloss/a-gly), support inheritance, and manipulate specific parts of the security descriptor.</span></span> <span data-ttu-id="d1958-112">當用戶端在安全物件的階層中建立私用物件時，這會很有用。</span><span class="sxs-lookup"><span data-stu-id="d1958-112">This can be useful when a client creates a private object in a hierarchy of secured objects.</span></span> <span data-ttu-id="d1958-113">例如，您可以使用 **CreatePrivateObjectSecurity** 函式來建立安全描述項，其中包含用戶端所指定的 ace、繼承自父物件的 ace，以及建立用戶端存取權杖的預設擁有者。</span><span class="sxs-lookup"><span data-stu-id="d1958-113">For example, you could use the **CreatePrivateObjectSecurity** function to create a security descriptor that contained ACEs specified by the client, ACEs inherited from a parent object, and the default owner from the creating client's access token.</span></span> <span data-ttu-id="d1958-114">雖然 [**BuildSecurityDescriptor**](/windows/desktop/api/Aclapi/nf-aclapi-buildsecuritydescriptora) 會從傳遞至函式呼叫的存取控制資訊或從現有的安全描述項建立安全描述項，但 **CreatePrivateObjectSecurity** 只會根據現有安全描述項中的資訊來建立安全描述項。</span><span class="sxs-lookup"><span data-stu-id="d1958-114">While [**BuildSecurityDescriptor**](/windows/desktop/api/Aclapi/nf-aclapi-buildsecuritydescriptora) creates security descriptors either from access control information passed into the function call or from an existing security descriptor, **CreatePrivateObjectSecurity** creates a security descriptor solely from the information in existing security descriptors.</span></span>

<span data-ttu-id="d1958-115">[**LookupSecurityDescriptorParts**](/windows/desktop/api/Aclapi/nf-aclapi-lookupsecuritydescriptorpartsa) 函式會從現有的 [*自我相關安全描述項*](/windows/desktop/SecGloss/s-gly)取得安全描述項資訊。</span><span class="sxs-lookup"><span data-stu-id="d1958-115">[**LookupSecurityDescriptorParts**](/windows/desktop/api/Aclapi/nf-aclapi-lookupsecuritydescriptorpartsa) function obtains security descriptor information from an existing [*self-relative security descriptor*](/windows/desktop/SecGloss/s-gly).</span></span> <span data-ttu-id="d1958-116">這項資訊包括擁有者和群組規格、SACL 或 DACL 中的 Ace 數目，以及 SACL 或 DACL 中的 Ace 清單。</span><span class="sxs-lookup"><span data-stu-id="d1958-116">This information includes the owner and group specification, the number of ACEs in the SACL or DACL, and the list of ACEs in the SACL or DACL.</span></span>

 

 
