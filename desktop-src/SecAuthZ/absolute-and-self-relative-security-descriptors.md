---
description: 若要判斷安全描述項是否為自我或絕對安全描述項，請呼叫 GetSecurityDescriptorControl 函式，並檢查 \_ \_ 安全性 \_ 描述項控制參數的 SE 自我相對旗標 \_ 。
ms.assetid: dab2844b-7df9-446c-aacf-380a0a805cbc
title: 絕對和 Self-Relative 的安全描述項
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b57406e194a31e79594394913055609e2981e5cb
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/08/2021
ms.locfileid: "103944459"
---
# <a name="absolute-and-self-relative-security-descriptors"></a><span data-ttu-id="67b49-103">絕對和 Self-Relative 的安全描述項</span><span class="sxs-lookup"><span data-stu-id="67b49-103">Absolute and Self-Relative Security Descriptors</span></span>

<span data-ttu-id="67b49-104">[*安全描述項*](/windows/desktop/SecGloss/s-gly)可以是 [*絕對*](/windows/desktop/SecGloss/a-gly)或 [*自我相關*](/windows/desktop/SecGloss/s-gly)的格式。</span><span class="sxs-lookup"><span data-stu-id="67b49-104">A [*security descriptor*](/windows/desktop/SecGloss/s-gly) can be in either [*absolute*](/windows/desktop/SecGloss/a-gly) or [*self-relative*](/windows/desktop/SecGloss/s-gly) format.</span></span> <span data-ttu-id="67b49-105">在絕對格式中，安全描述項包含其資訊的指標，而不是資訊本身。</span><span class="sxs-lookup"><span data-stu-id="67b49-105">In absolute format, a security descriptor contains pointers to its information, not the information itself.</span></span> <span data-ttu-id="67b49-106">在自我相關的格式中，安全描述項會將 [**安全 \_ 描述項**](/windows/desktop/api/Winnt/ns-winnt-security_descriptor) 結構和相關聯的安全性資訊儲存在連續的記憶體區塊中。</span><span class="sxs-lookup"><span data-stu-id="67b49-106">In self-relative format, a security descriptor stores a [**SECURITY\_DESCRIPTOR**](/windows/desktop/api/Winnt/ns-winnt-security_descriptor) structure and associated security information in a contiguous block of memory.</span></span> <span data-ttu-id="67b49-107">若要判斷安全描述項是否為自我或絕對安全描述項，請呼叫 [**GetSecurityDescriptorControl**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-getsecuritydescriptorcontrol) 函式，並檢查 \_ \_ [**安全性 \_ 描述項 \_ 控制**](security-descriptor-control.md) 參數的 SE 自我相對旗標。</span><span class="sxs-lookup"><span data-stu-id="67b49-107">To determine whether a security descriptor is self-relative or absolute, call the [**GetSecurityDescriptorControl**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-getsecuritydescriptorcontrol) function and check the SE\_SELF\_RELATIVE flag of the [**SECURITY\_DESCRIPTOR\_CONTROL**](security-descriptor-control.md) parameter.</span></span> <span data-ttu-id="67b49-108">您可以使用 [**MakeSelfRelativeSD**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-makeselfrelativesd) 和 [**MakeAbsoluteSD**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-makeabsolutesd) 函數來轉換這兩種格式。</span><span class="sxs-lookup"><span data-stu-id="67b49-108">You can use the [**MakeSelfRelativeSD**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-makeselfrelativesd) and [**MakeAbsoluteSD**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-makeabsolutesd) functions for converting between these two formats.</span></span>

<span data-ttu-id="67b49-109">當您要建立安全描述項並且具有所有元件的指標時（例如，擁有者、群組和任意 ACL 的預設設定可用時），絕對格式會很有用。</span><span class="sxs-lookup"><span data-stu-id="67b49-109">The absolute format is useful when you are building a security descriptor and have pointers to all of the components, for example, when default settings for the owner, group, and discretionary ACL are available.</span></span> <span data-ttu-id="67b49-110">在此情況下，您可以呼叫 [**InitializeSecurityDescriptor**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-initializesecuritydescriptor) 函式來初始化 [**安全 \_ 描述項**](/windows/desktop/api/Winnt/ns-winnt-security_descriptor) 結構，然後呼叫 [**SetSecurityDescriptorDacl**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-setsecuritydescriptordacl) 之類的函式，將 ACL 和 SID 指標指派給安全描述項。</span><span class="sxs-lookup"><span data-stu-id="67b49-110">In this case, you can call the [**InitializeSecurityDescriptor**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-initializesecuritydescriptor) function to initialize a [**SECURITY\_DESCRIPTOR**](/windows/desktop/api/Winnt/ns-winnt-security_descriptor) structure, and then call functions such as [**SetSecurityDescriptorDacl**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-setsecuritydescriptordacl) to assign ACL and SID pointers to the security descriptor.</span></span>

<span data-ttu-id="67b49-111">在自我相關的格式中，安全描述項的開頭一律是 [**安全 \_ 描述項**](/windows/desktop/api/Winnt/ns-winnt-security_descriptor) 結構，但安全描述項的其他元件可以依照任何順序遵循結構。</span><span class="sxs-lookup"><span data-stu-id="67b49-111">In self-relative format, a security descriptor always begins with a [**SECURITY\_DESCRIPTOR**](/windows/desktop/api/Winnt/ns-winnt-security_descriptor) structure, but the other components of the security descriptor can follow the structure in any order.</span></span> <span data-ttu-id="67b49-112">安全描述項的元件是由描述項開頭的位移來識別，而不是使用記憶體位址。</span><span class="sxs-lookup"><span data-stu-id="67b49-112">Instead of using memory addresses, the security descriptor's components are identified by offsets from the beginning of the descriptor.</span></span> <span data-ttu-id="67b49-113">當安全描述項必須儲存在磁片上、透過通訊協定傳輸，或複製到記憶體時，此格式會很有用。</span><span class="sxs-lookup"><span data-stu-id="67b49-113">This format is useful when a security descriptor must be stored on disk, transmitted by means of a communications protocol, or copied in memory.</span></span>

<span data-ttu-id="67b49-114">除了 [**MakeAbsoluteSD**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-makeabsolutesd)以外，傳回安全描述項的所有函式都會使用自我相關格式來進行。</span><span class="sxs-lookup"><span data-stu-id="67b49-114">Except for [**MakeAbsoluteSD**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-makeabsolutesd), all functions that return a security descriptor do so using the self-relative format.</span></span> <span data-ttu-id="67b49-115">以引數形式傳遞至函式的安全描述項可以是自我或絕對形式。</span><span class="sxs-lookup"><span data-stu-id="67b49-115">Security descriptors passed as arguments to a function can be either self-relative or absolute form.</span></span> <span data-ttu-id="67b49-116">如需詳細資訊，請參閱函式的檔。</span><span class="sxs-lookup"><span data-stu-id="67b49-116">For more information, refer to the documentation for the function.</span></span>

 

 
