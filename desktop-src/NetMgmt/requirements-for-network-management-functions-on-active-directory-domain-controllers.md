---
title: Active Directory 網網域控制站上網路管理功能的需求
description: 如果您在執行 Active Directory 的網域控制站上，呼叫本主題所列的其中一個網路管理功能，則會根據物件的存取控制清單 (ACL) 來允許或拒絕存取安全物件。
ms.assetid: 4dfb3180-3ca5-4e22-b7a1-4e6b132431fb
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a8c6b646290ef6352a529a37243a6ea30c8b0d39
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/20/2020
ms.locfileid: "103842407"
---
# <a name="requirements-for-network-management-functions-on-active-directory-domain-controllers"></a><span data-ttu-id="bd8b5-103">Active Directory 網網域控制站上網路管理功能的需求</span><span class="sxs-lookup"><span data-stu-id="bd8b5-103">Requirements for Network Management Functions on Active Directory Domain Controllers</span></span>

<span data-ttu-id="bd8b5-104">如果您在執行 Active Directory 的網域控制站上，呼叫本主題所列的其中一個網路管理功能，則會根據物件的[存取控制清單](/windows/desktop/SecAuthZ/access-control-lists) (ACL) 來允許或拒絕存取[安全物件](/windows/desktop/SecAuthZ/securable-objects)。</span><span class="sxs-lookup"><span data-stu-id="bd8b5-104">If you call one of the network management functions listed in this topic on a domain controller running Active Directory, access to a [securable object](/windows/desktop/SecAuthZ/securable-objects) is allowed or denied based on the [access-control list](/windows/desktop/SecAuthZ/access-control-lists) (ACL) for the object.</span></span> <span data-ttu-id="bd8b5-105"> (Acl 是在目錄中指定。 ) </span><span class="sxs-lookup"><span data-stu-id="bd8b5-105">(ACLs are specified in the directory.)</span></span>

<span data-ttu-id="bd8b5-106">不同的存取需求適用于資訊查詢和資訊更新。</span><span class="sxs-lookup"><span data-stu-id="bd8b5-106">Different access requirements apply to information queries and information updates.</span></span>

## <a name="queries"></a><span data-ttu-id="bd8b5-107">查詢</span><span class="sxs-lookup"><span data-stu-id="bd8b5-107">Queries</span></span>

<span data-ttu-id="bd8b5-108">針對查詢，預設 ACL 允許所有已驗證的使用者和「[Windows 2000 相容存取權](/windows/desktop/SecAuthZ/allowing-anonymous-access)」群組的成員，來讀取和列舉資訊。</span><span class="sxs-lookup"><span data-stu-id="bd8b5-108">For queries, the default ACL permits all authenticated users and members of the "[Pre-Windows 2000 compatible access](/windows/desktop/SecAuthZ/allowing-anonymous-access)" group to read and enumerate information.</span></span> <span data-ttu-id="bd8b5-109">以下列出的函式會受到影響：</span><span class="sxs-lookup"><span data-stu-id="bd8b5-109">The functions listed following are affected:</span></span>

-   <span data-ttu-id="bd8b5-110">[**NetGroupEnum**](/windows/desktop/api/Lmaccess/nf-lmaccess-netgroupenum)、 [**NetGroupGetInfo**](/windows/desktop/api/Lmaccess/nf-lmaccess-netgroupgetinfo)、 [**NetGroupGetUsers**](/windows/desktop/api/Lmaccess/nf-lmaccess-netgroupgetusers)</span><span class="sxs-lookup"><span data-stu-id="bd8b5-110">[**NetGroupEnum**](/windows/desktop/api/Lmaccess/nf-lmaccess-netgroupenum), [**NetGroupGetInfo**](/windows/desktop/api/Lmaccess/nf-lmaccess-netgroupgetinfo), [**NetGroupGetUsers**](/windows/desktop/api/Lmaccess/nf-lmaccess-netgroupgetusers)</span></span>
-   <span data-ttu-id="bd8b5-111">[**NetLocalGroupEnum**](/windows/desktop/api/Lmaccess/nf-lmaccess-netlocalgroupenum)、 [**NetLocalGroupGetInfo**](/windows/desktop/api/Lmaccess/nf-lmaccess-netlocalgroupgetinfo)、 [**NetLocalGroupGetMembers**](/windows/desktop/api/Lmaccess/nf-lmaccess-netlocalgroupgetmembers)</span><span class="sxs-lookup"><span data-stu-id="bd8b5-111">[**NetLocalGroupEnum**](/windows/desktop/api/Lmaccess/nf-lmaccess-netlocalgroupenum), [**NetLocalGroupGetInfo**](/windows/desktop/api/Lmaccess/nf-lmaccess-netlocalgroupgetinfo), [**NetLocalGroupGetMembers**](/windows/desktop/api/Lmaccess/nf-lmaccess-netlocalgroupgetmembers)</span></span>
-   [<span data-ttu-id="bd8b5-112">**NetQueryDisplayInformation**</span><span class="sxs-lookup"><span data-stu-id="bd8b5-112">**NetQueryDisplayInformation**</span></span>](/windows/desktop/api/Lmaccess/nf-lmaccess-netquerydisplayinformation)
-   <span data-ttu-id="bd8b5-113">[**NetSessionGetInfo**](/windows/desktop/api/lmshare/nf-lmshare-netsessiongetinfo) (層級1和2僅) </span><span class="sxs-lookup"><span data-stu-id="bd8b5-113">[**NetSessionGetInfo**](/windows/desktop/api/lmshare/nf-lmshare-netsessiongetinfo) (levels 1 and 2 only)</span></span>
-   <span data-ttu-id="bd8b5-114">[**NetShareEnum**](/windows/desktop/api/lmshare/nf-lmshare-netshareenum) (層級2和502僅) </span><span class="sxs-lookup"><span data-stu-id="bd8b5-114">[**NetShareEnum**](/windows/desktop/api/lmshare/nf-lmshare-netshareenum) (levels 2 and 502 only)</span></span>
-   <span data-ttu-id="bd8b5-115">[**NetUserEnum**](/windows/desktop/api/Lmaccess/nf-lmaccess-netuserenum)、 [**NetUserGetGroups**](/windows/desktop/api/Lmaccess/nf-lmaccess-netusergetgroups)、 [**NetUserGetInfo**](/windows/desktop/api/Lmaccess/nf-lmaccess-netusergetinfo)、 [**NetUserGetLocalGroups**](/windows/desktop/api/Lmaccess/nf-lmaccess-netusergetlocalgroups)、 [**NetUserModalsGet**](/windows/desktop/api/Lmaccess/nf-lmaccess-netusermodalsget)</span><span class="sxs-lookup"><span data-stu-id="bd8b5-115">[**NetUserEnum**](/windows/desktop/api/Lmaccess/nf-lmaccess-netuserenum), [**NetUserGetGroups**](/windows/desktop/api/Lmaccess/nf-lmaccess-netusergetgroups), [**NetUserGetInfo**](/windows/desktop/api/Lmaccess/nf-lmaccess-netusergetinfo), [**NetUserGetLocalGroups**](/windows/desktop/api/Lmaccess/nf-lmaccess-netusergetlocalgroups), [**NetUserModalsGet**](/windows/desktop/api/Lmaccess/nf-lmaccess-netusermodalsget)</span></span>
-   <span data-ttu-id="bd8b5-116">[**NetWkstaGetInfo**](/windows/desktop/api/Lmwksta/nf-lmwksta-netwkstagetinfo)、 [ **NetWkstaUserEnum**](/windows/desktop/api/Lmwksta/nf-lmwksta-netwkstauserenum)</span><span class="sxs-lookup"><span data-stu-id="bd8b5-116">[**NetWkstaGetInfo**](/windows/desktop/api/Lmwksta/nf-lmwksta-netwkstagetinfo), [**NetWkstaUserEnum**](/windows/desktop/api/Lmwksta/nf-lmwksta-netwkstauserenum)</span></span>

<span data-ttu-id="bd8b5-117">匿名存取群組資訊需要將匿名的使用者明確新增至「Windows 2000 相容存取」群組。</span><span class="sxs-lookup"><span data-stu-id="bd8b5-117">Anonymous access to group information requires that the user Anonymous be explicitly added to the "Pre-Windows 2000 compatible access" group.</span></span> <span data-ttu-id="bd8b5-118">這是因為匿名權杖不包含 Everyone 群組 SID。</span><span class="sxs-lookup"><span data-stu-id="bd8b5-118">This is because anonymous tokens do not include the Everyone Group SID.</span></span>

<span data-ttu-id="bd8b5-119">**Windows 2000：** 依預設，「Windows 2000 相容存取」群組會將每個人都包含為成員。</span><span class="sxs-lookup"><span data-stu-id="bd8b5-119">**Windows 2000:** By default, the "Pre-Windows 2000 compatible access" group includes Everyone as a member.</span></span> <span data-ttu-id="bd8b5-120">如此一來，如果系統允許匿名存取，就可以匿名存取 (匿名登入) 資訊。</span><span class="sxs-lookup"><span data-stu-id="bd8b5-120">This enables anonymous access (Anonymous Logon) to information if the system allows anonymous access.</span></span> <span data-ttu-id="bd8b5-121">系統管理員隨時都可以從「Windows 2000 相容存取權」群組移除所有人。</span><span class="sxs-lookup"><span data-stu-id="bd8b5-121">Administrators can remove Everyone from the "Pre-Windows 2000 Compatible Access" group at any time.</span></span> <span data-ttu-id="bd8b5-122">將群組中的每個人從群組中移除，會限制只有驗證的使用者才能存取訊號。</span><span class="sxs-lookup"><span data-stu-id="bd8b5-122">Removing Everyone from the group restricts information access to authenticated users only.</span></span> <span data-ttu-id="bd8b5-123">如需匿名存取的詳細資訊，請參閱 [安全性識別](/windows/desktop/SecAuthZ/security-identifiers) 元和 [已知的 sid](/windows/desktop/SecAuthZ/well-known-sids)。</span><span class="sxs-lookup"><span data-stu-id="bd8b5-123">For more information about anonymous access, see [Security Identifiers](/windows/desktop/SecAuthZ/security-identifiers) and [Well-Known SIDs](/windows/desktop/SecAuthZ/well-known-sids).</span></span>

<span data-ttu-id="bd8b5-124">您可以藉由將登錄中的下列機碼設定為值1，來覆寫系統預設值：</span><span class="sxs-lookup"><span data-stu-id="bd8b5-124">You can override the system default by setting the following key in the registry to the value 1:</span></span>

<span data-ttu-id="bd8b5-125">**HKEY \_LOCAL \_ MACHINE \\ SYSTEM \\ CurrentControlSet \\ Control \\ Lsa** \\ **EveryoneIncludesAnonymous** = 1</span><span class="sxs-lookup"><span data-stu-id="bd8b5-125">**HKEY\_LOCAL\_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Lsa**\\**EveryoneIncludesAnonymous** = 1</span></span>

<span data-ttu-id="bd8b5-126">如需在呼叫這兩個函式時，匿名存取群組資訊的詳細資訊，請參閱 [**NetWkstaGetInfo**](/windows/desktop/api/Lmwksta/nf-lmwksta-netwkstagetinfo) 和 [**NetWkstaUserEnum**](/windows/desktop/api/Lmwksta/nf-lmwksta-netwkstauserenum) 。</span><span class="sxs-lookup"><span data-stu-id="bd8b5-126">See [**NetWkstaGetInfo**](/windows/desktop/api/Lmwksta/nf-lmwksta-netwkstagetinfo) and [**NetWkstaUserEnum**](/windows/desktop/api/Lmwksta/nf-lmwksta-netwkstauserenum) for additional information about anonymous access to group information when calling these two functions.</span></span>

## <a name="updates"></a><span data-ttu-id="bd8b5-127">更新</span><span class="sxs-lookup"><span data-stu-id="bd8b5-127">Updates</span></span>

<span data-ttu-id="bd8b5-128">針對更新，預設 ACL 只允許網域系統管理員和帳戶操作員寫入資訊。</span><span class="sxs-lookup"><span data-stu-id="bd8b5-128">For updates, the default ACL permits only Domain Administrators and Account Operators to write information.</span></span> <span data-ttu-id="bd8b5-129">其中一個例外狀況是使用者可以變更自己的密碼，並設定 usri 的 \* \_ usr \_ 批註欄位。</span><span class="sxs-lookup"><span data-stu-id="bd8b5-129">One exception is that users can change their own password and set the usri\*\_usr\_comment field.</span></span> <span data-ttu-id="bd8b5-130">另一個例外狀況是帳戶操作員無法修改管理帳戶。</span><span class="sxs-lookup"><span data-stu-id="bd8b5-130">Another exception is that Account Operators cannot modify administration accounts.</span></span> <span data-ttu-id="bd8b5-131">以下列出的函式會受到影響：</span><span class="sxs-lookup"><span data-stu-id="bd8b5-131">The functions listed following are affected:</span></span>

-   <span data-ttu-id="bd8b5-132">[**NetGroupAdd**](/windows/desktop/api/Lmaccess/nf-lmaccess-netgroupadd), [**NetGroupAddUser**](/windows/desktop/api/Lmaccess/nf-lmaccess-netgroupadduser), [**NetGroupDel**](/windows/desktop/api/Lmaccess/nf-lmaccess-netgroupdel), [**NetGroupDelUser**](/windows/desktop/api/Lmaccess/nf-lmaccess-netgroupdeluser), [**NetGroupSetInfo**](/windows/desktop/api/Lmaccess/nf-lmaccess-netgroupsetinfo), [**NetGroupSetUsers**](/windows/desktop/api/Lmaccess/nf-lmaccess-netgroupsetusers)</span><span class="sxs-lookup"><span data-stu-id="bd8b5-132">[**NetGroupAdd**](/windows/desktop/api/Lmaccess/nf-lmaccess-netgroupadd), [**NetGroupAddUser**](/windows/desktop/api/Lmaccess/nf-lmaccess-netgroupadduser), [**NetGroupDel**](/windows/desktop/api/Lmaccess/nf-lmaccess-netgroupdel), [**NetGroupDelUser**](/windows/desktop/api/Lmaccess/nf-lmaccess-netgroupdeluser), [**NetGroupSetInfo**](/windows/desktop/api/Lmaccess/nf-lmaccess-netgroupsetinfo), [**NetGroupSetUsers**](/windows/desktop/api/Lmaccess/nf-lmaccess-netgroupsetusers)</span></span>
-   <span data-ttu-id="bd8b5-133">[**NetLocalGroupAdd**](/windows/desktop/api/Lmaccess/nf-lmaccess-netlocalgroupadd)、 [**NetLocalGroupAddMembers**](/windows/desktop/api/Lmaccess/nf-lmaccess-netlocalgroupaddmembers)、 [**NetLocalGroupDel**](/windows/desktop/api/Lmaccess/nf-lmaccess-netlocalgroupdel)、 [**NetLocalGroupDelMembers**](/windows/desktop/api/Lmaccess/nf-lmaccess-netlocalgroupdelmembers)、 [**NetLocalGroupSetInfo**](/windows/desktop/api/Lmaccess/nf-lmaccess-netlocalgroupsetinfo)、 [**NetLocalGroupSetMembers**](/windows/desktop/api/Lmaccess/nf-lmaccess-netlocalgroupsetmembers)</span><span class="sxs-lookup"><span data-stu-id="bd8b5-133">[**NetLocalGroupAdd**](/windows/desktop/api/Lmaccess/nf-lmaccess-netlocalgroupadd), [**NetLocalGroupAddMembers**](/windows/desktop/api/Lmaccess/nf-lmaccess-netlocalgroupaddmembers), [**NetLocalGroupDel**](/windows/desktop/api/Lmaccess/nf-lmaccess-netlocalgroupdel), [**NetLocalGroupDelMembers**](/windows/desktop/api/Lmaccess/nf-lmaccess-netlocalgroupdelmembers), [**NetLocalGroupSetInfo**](/windows/desktop/api/Lmaccess/nf-lmaccess-netlocalgroupsetinfo), [**NetLocalGroupSetMembers**](/windows/desktop/api/Lmaccess/nf-lmaccess-netlocalgroupsetmembers)</span></span>
-   [<span data-ttu-id="bd8b5-134">**NetMessageBufferSend**</span><span class="sxs-lookup"><span data-stu-id="bd8b5-134">**NetMessageBufferSend**</span></span>](/windows/desktop/api/Lmmsg/nf-lmmsg-netmessagebuffersend)
-   <span data-ttu-id="bd8b5-135">[**NetUserAdd**](/windows/desktop/api/Lmaccess/nf-lmaccess-netuseradd)、 [**NetUserChangePassword**](/windows/desktop/api/Lmaccess/nf-lmaccess-netuserchangepassword)、 [**NetUserDel**](/windows/desktop/api/Lmaccess/nf-lmaccess-netuserdel)、 [**NetUserModalsSet**](/windows/desktop/api/Lmaccess/nf-lmaccess-netusermodalsset)、 [**NetUserSetGroups**](/windows/desktop/api/Lmaccess/nf-lmaccess-netusersetgroups)、 [**NetUserSetInfo**](/windows/desktop/api/Lmaccess/nf-lmaccess-netusersetinfo)</span><span class="sxs-lookup"><span data-stu-id="bd8b5-135">[**NetUserAdd**](/windows/desktop/api/Lmaccess/nf-lmaccess-netuseradd), [**NetUserChangePassword**](/windows/desktop/api/Lmaccess/nf-lmaccess-netuserchangepassword), [**NetUserDel**](/windows/desktop/api/Lmaccess/nf-lmaccess-netuserdel), [**NetUserModalsSet**](/windows/desktop/api/Lmaccess/nf-lmaccess-netusermodalsset), [**NetUserSetGroups**](/windows/desktop/api/Lmaccess/nf-lmaccess-netusersetgroups), [**NetUserSetInfo**](/windows/desktop/api/Lmaccess/nf-lmaccess-netusersetinfo)</span></span>

<span data-ttu-id="bd8b5-136">一般而言，呼叫端必須擁有整個物件的寫入存取權， [**NetUserModalsSet**](/windows/desktop/api/Lmaccess/nf-lmaccess-netusermodalsset)、 [**NetUserSetInfo**](/windows/desktop/api/Lmaccess/nf-lmaccess-netusersetinfo)、 [**NetGroupSetInfo**](/windows/desktop/api/Lmaccess/nf-lmaccess-netgroupsetinfo) 和 [**NetLocalGroupSetInfo**](/windows/desktop/api/Lmaccess/nf-lmaccess-netlocalgroupsetinfo) 的呼叫才會成功。</span><span class="sxs-lookup"><span data-stu-id="bd8b5-136">Typically, callers must have write access to the entire object for calls to [**NetUserModalsSet**](/windows/desktop/api/Lmaccess/nf-lmaccess-netusermodalsset), [**NetUserSetInfo**](/windows/desktop/api/Lmaccess/nf-lmaccess-netusersetinfo), [**NetGroupSetInfo**](/windows/desktop/api/Lmaccess/nf-lmaccess-netgroupsetinfo) and [**NetLocalGroupSetInfo**](/windows/desktop/api/Lmaccess/nf-lmaccess-netlocalgroupsetinfo) to succeed.</span></span> <span data-ttu-id="bd8b5-137">若要進行更精細的存取控制，您應該考慮使用 ADSI。</span><span class="sxs-lookup"><span data-stu-id="bd8b5-137">For finer access control, you should consider using ADSI.</span></span> <span data-ttu-id="bd8b5-138">如需 ADSI 的詳細資訊，請參閱 [Active Directory 服務介面](/windows/desktop/ADSI/active-directory-service-interfaces-adsi)。</span><span class="sxs-lookup"><span data-stu-id="bd8b5-138">For more information about ADSI, see [Active Directory Service Interfaces](/windows/desktop/ADSI/active-directory-service-interfaces-adsi).</span></span>

<span data-ttu-id="bd8b5-139">如需控制安全物件之存取的詳細資訊，請參閱 [存取控制](/windows/desktop/SecAuthZ/access-control)、 [許可權](/windows/desktop/SecAuthZ/privileges)和 [安全物件](/windows/desktop/SecAuthZ/securable-objects)。</span><span class="sxs-lookup"><span data-stu-id="bd8b5-139">For more information about controlling access to securable objects, see [Access Control](/windows/desktop/SecAuthZ/access-control), [Privileges](/windows/desktop/SecAuthZ/privileges), and [Securable Objects](/windows/desktop/SecAuthZ/securable-objects).</span></span> <span data-ttu-id="bd8b5-140">如需呼叫需要系統管理員許可權之函式的詳細資訊，請參閱 [以特殊許可權](/windows/desktop/SecBP/running-with-special-privileges)執行。</span><span class="sxs-lookup"><span data-stu-id="bd8b5-140">For more information about calling functions that require administrator privileges, see [Running with Special Privileges](/windows/desktop/SecBP/running-with-special-privileges).</span></span>

 

 