---
description: 每個視窗類別都有一個相關聯的視窗程式，由相同類別的所有視窗共用。 視窗程式會處理該類別的所有視窗的訊息，因此會控制其行為和外觀。
ms.assetid: db79fd4b-6a15-4bf9-a0d9-5f6415f6c75f
title: 關於視窗類別
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1b683176c3fd7904cf3f89b385ce0fa393b89e9f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/08/2021
ms.locfileid: "104194567"
---
# <a name="about-window-classes"></a><span data-ttu-id="f091c-104">關於視窗類別</span><span class="sxs-lookup"><span data-stu-id="f091c-104">About Window Classes</span></span>

<span data-ttu-id="f091c-105">每個視窗類別都有一個相關聯的視窗程式，由相同類別的所有視窗共用。</span><span class="sxs-lookup"><span data-stu-id="f091c-105">Each window class has an associated window procedure shared by all windows of the same class.</span></span> <span data-ttu-id="f091c-106">視窗程式會處理該類別的所有視窗的訊息，因此會控制其行為和外觀。</span><span class="sxs-lookup"><span data-stu-id="f091c-106">The window procedure processes messages for all windows of that class and therefore controls their behavior and appearance.</span></span> <span data-ttu-id="f091c-107">如需詳細資訊，請參閱 [Window 程序](window-procedures.md)。</span><span class="sxs-lookup"><span data-stu-id="f091c-107">For more information, see [Window Procedures](window-procedures.md).</span></span>

<span data-ttu-id="f091c-108">處理常式必須先註冊視窗類別，才能建立該類別的視窗。</span><span class="sxs-lookup"><span data-stu-id="f091c-108">A process must register a window class before it can create a window of that class.</span></span> <span data-ttu-id="f091c-109">註冊視窗類別會將視窗程式、類別樣式和其他類別屬性與類別名稱產生關聯。</span><span class="sxs-lookup"><span data-stu-id="f091c-109">Registering a window class associates a window procedure, class styles, and other class attributes with a class name.</span></span> <span data-ttu-id="f091c-110">當進程在 [**CreateWindow**](/windows/win32/api/winuser/nf-winuser-createwindowa) 或 [**CreateWindowEx**](/windows/win32/api/winuser/nf-winuser-createwindowexa) 函式中指定類別名稱時，系統會建立一個視窗，其中含有與該類別名稱相關聯的視窗程式、樣式和其他屬性。</span><span class="sxs-lookup"><span data-stu-id="f091c-110">When a process specifies a class name in the [**CreateWindow**](/windows/win32/api/winuser/nf-winuser-createwindowa) or [**CreateWindowEx**](/windows/win32/api/winuser/nf-winuser-createwindowexa) function, the system creates a window with the window procedure, styles, and other attributes associated with that class name.</span></span>

<span data-ttu-id="f091c-111">本節將討論下列主題。</span><span class="sxs-lookup"><span data-stu-id="f091c-111">This section discusses the following topics.</span></span>

-   [<span data-ttu-id="f091c-112">視窗類別的類型</span><span class="sxs-lookup"><span data-stu-id="f091c-112">Types of Window Classes</span></span>](#types-of-window-classes)
    -   [<span data-ttu-id="f091c-113">系統類別</span><span class="sxs-lookup"><span data-stu-id="f091c-113">System Classes</span></span>](#system-classes)
    -   [<span data-ttu-id="f091c-114">應用程式全域類別</span><span class="sxs-lookup"><span data-stu-id="f091c-114">Application Global Classes</span></span>](#application-global-classes)
    -   [<span data-ttu-id="f091c-115">應用程式區域類別</span><span class="sxs-lookup"><span data-stu-id="f091c-115">Application Local Classes</span></span>](#application-local-classes)
-   [<span data-ttu-id="f091c-116">系統如何尋找視窗類別</span><span class="sxs-lookup"><span data-stu-id="f091c-116">How the System Locates a Window Class</span></span>](#how-the-system-locates-a-window-class)
-   [<span data-ttu-id="f091c-117">註冊視窗類別</span><span class="sxs-lookup"><span data-stu-id="f091c-117">Registering a Window Class</span></span>](#registering-a-window-class)
-   [<span data-ttu-id="f091c-118">視窗類別的元素</span><span class="sxs-lookup"><span data-stu-id="f091c-118">Elements of a Window Class</span></span>](#elements-of-a-window-class)
    -   [<span data-ttu-id="f091c-119">類別名稱</span><span class="sxs-lookup"><span data-stu-id="f091c-119">Class Name</span></span>](#class-name)
    -   [<span data-ttu-id="f091c-120">視窗程式位址</span><span class="sxs-lookup"><span data-stu-id="f091c-120">Window Procedure Address</span></span>](#window-procedure-address)
    -   <span data-ttu-id="f091c-121">[執行個體控制代碼][](#instance-handle)</span><span class="sxs-lookup"><span data-stu-id="f091c-121">[Instance Handle](#instance-handle)</span></span>
    -   [<span data-ttu-id="f091c-122">類別資料指標</span><span class="sxs-lookup"><span data-stu-id="f091c-122">Class Cursor</span></span>](#class-cursor)
    -   [<span data-ttu-id="f091c-123">類別圖示</span><span class="sxs-lookup"><span data-stu-id="f091c-123">Class Icons</span></span>](#class-icons)
    -   [<span data-ttu-id="f091c-124">類別背景筆刷</span><span class="sxs-lookup"><span data-stu-id="f091c-124">Class Background Brush</span></span>](#class-background-brush)
    -   [<span data-ttu-id="f091c-125">類別功能表</span><span class="sxs-lookup"><span data-stu-id="f091c-125">Class Menu</span></span>](#class-menu)
    -   <span data-ttu-id="f091c-126">[類別樣式][](#class-styles)</span><span class="sxs-lookup"><span data-stu-id="f091c-126">[Class Styles](#class-styles)</span></span>
    -   [<span data-ttu-id="f091c-127">額外類別記憶體</span><span class="sxs-lookup"><span data-stu-id="f091c-127">Extra Class Memory</span></span>](#extra-class-memory)
    -   [<span data-ttu-id="f091c-128">額外的視窗記憶體</span><span class="sxs-lookup"><span data-stu-id="f091c-128">Extra Window Memory</span></span>](#extra-window-memory)

## <a name="types-of-window-classes"></a><span data-ttu-id="f091c-129">視窗類別的類型</span><span class="sxs-lookup"><span data-stu-id="f091c-129">Types of Window Classes</span></span>

<span data-ttu-id="f091c-130">有三種類型的視窗類別：</span><span class="sxs-lookup"><span data-stu-id="f091c-130">There are three types of window classes:</span></span>

-   [<span data-ttu-id="f091c-131">系統類別</span><span class="sxs-lookup"><span data-stu-id="f091c-131">System Classes</span></span>](#system-classes)
-   [<span data-ttu-id="f091c-132">應用程式全域類別</span><span class="sxs-lookup"><span data-stu-id="f091c-132">Application Global Classes</span></span>](#application-global-classes)
-   [<span data-ttu-id="f091c-133">應用程式區域類別</span><span class="sxs-lookup"><span data-stu-id="f091c-133">Application Local Classes</span></span>](#application-local-classes)

<span data-ttu-id="f091c-134">這些類型在範圍內與註冊和終結的方式和方式不同。</span><span class="sxs-lookup"><span data-stu-id="f091c-134">These types differ in scope and in when and how they are registered and destroyed.</span></span>

### <a name="system-classes"></a><span data-ttu-id="f091c-135">系統類別</span><span class="sxs-lookup"><span data-stu-id="f091c-135">System Classes</span></span>

<span data-ttu-id="f091c-136">系統類別是系統註冊的視窗類別。</span><span class="sxs-lookup"><span data-stu-id="f091c-136">A system class is a window class registered by the system.</span></span> <span data-ttu-id="f091c-137">許多系統類別都可供所有程式使用，而有些則只會由系統在內部使用。</span><span class="sxs-lookup"><span data-stu-id="f091c-137">Many system classes are available for all processes to use, while others are used only internally by the system.</span></span> <span data-ttu-id="f091c-138">由於系統會註冊這些類別，因此進程無法終結它們。</span><span class="sxs-lookup"><span data-stu-id="f091c-138">Because the system registers these classes, a process cannot destroy them.</span></span>

<span data-ttu-id="f091c-139">系統會線上程第一次呼叫使用者或 Windows 圖形裝置介面 (GDI) 函式時，註冊進程的系統類別。</span><span class="sxs-lookup"><span data-stu-id="f091c-139">The system registers the system classes for a process the first time one of its threads calls a User or a Windows Graphics Device Interface (GDI) function.</span></span>

<span data-ttu-id="f091c-140">每個應用程式都會收到自己的系統類別複本。</span><span class="sxs-lookup"><span data-stu-id="f091c-140">Each application receives its own copy of the system classes.</span></span> <span data-ttu-id="f091c-141">相同的 VDM 中所有16位 Windows 應用程式都會共用系統類別，就像在16位的 Windows 上一樣。</span><span class="sxs-lookup"><span data-stu-id="f091c-141">All 16-bit Windows-based applications in the same VDM share system classes, just as they do on 16-bit Windows.</span></span>

<span data-ttu-id="f091c-142">下表描述可供所有進程使用的系統類別。</span><span class="sxs-lookup"><span data-stu-id="f091c-142">The following table describes the system classes that are available for use by all processes.</span></span>



| <span data-ttu-id="f091c-143">類別</span><span class="sxs-lookup"><span data-stu-id="f091c-143">Class</span></span>     | <span data-ttu-id="f091c-144">描述</span><span class="sxs-lookup"><span data-stu-id="f091c-144">Description</span></span>                         |
|-----------|-------------------------------------|
| <span data-ttu-id="f091c-145">按鈕</span><span class="sxs-lookup"><span data-stu-id="f091c-145">Button</span></span>    | <span data-ttu-id="f091c-146">按鈕的類別。</span><span class="sxs-lookup"><span data-stu-id="f091c-146">The class for a button.</span></span>             |
| <span data-ttu-id="f091c-147">ComboBox</span><span class="sxs-lookup"><span data-stu-id="f091c-147">ComboBox</span></span>  | <span data-ttu-id="f091c-148">下拉式方塊的類別。</span><span class="sxs-lookup"><span data-stu-id="f091c-148">The class for a combo box.</span></span>          |
| <span data-ttu-id="f091c-149">編輯</span><span class="sxs-lookup"><span data-stu-id="f091c-149">Edit</span></span>      | <span data-ttu-id="f091c-150">編輯控制項的類別。</span><span class="sxs-lookup"><span data-stu-id="f091c-150">The class for an edit control.</span></span>      |
| <span data-ttu-id="f091c-151">ListBox</span><span class="sxs-lookup"><span data-stu-id="f091c-151">ListBox</span></span>   | <span data-ttu-id="f091c-152">清單方塊的類別。</span><span class="sxs-lookup"><span data-stu-id="f091c-152">The class for a list box.</span></span>           |
| <span data-ttu-id="f091c-153">MDIClient</span><span class="sxs-lookup"><span data-stu-id="f091c-153">MDIClient</span></span> | <span data-ttu-id="f091c-154">MDI 用戶端視窗的類別。</span><span class="sxs-lookup"><span data-stu-id="f091c-154">The class for an MDI client window.</span></span> |
| <span data-ttu-id="f091c-155">ScrollBar</span><span class="sxs-lookup"><span data-stu-id="f091c-155">ScrollBar</span></span> | <span data-ttu-id="f091c-156">捲軸的類別。</span><span class="sxs-lookup"><span data-stu-id="f091c-156">The class for a scroll bar.</span></span>         |
| <span data-ttu-id="f091c-157">Static</span><span class="sxs-lookup"><span data-stu-id="f091c-157">Static</span></span>    | <span data-ttu-id="f091c-158">靜態控制項的類別。</span><span class="sxs-lookup"><span data-stu-id="f091c-158">The class for a static control.</span></span>     |



 

<span data-ttu-id="f091c-159">下表說明僅供系統使用的系統類別。</span><span class="sxs-lookup"><span data-stu-id="f091c-159">The following table describes the system classes that are available only for use by the system.</span></span> <span data-ttu-id="f091c-160">在這裡會列出它們，以確保完整性。</span><span class="sxs-lookup"><span data-stu-id="f091c-160">They are listed here for completeness sake.</span></span>



| <span data-ttu-id="f091c-161">類別</span><span class="sxs-lookup"><span data-stu-id="f091c-161">Class</span></span>      | <span data-ttu-id="f091c-162">描述</span><span class="sxs-lookup"><span data-stu-id="f091c-162">Description</span></span>                                                            |
|------------|------------------------------------------------------------------------|
| <span data-ttu-id="f091c-163">ComboLBox</span><span class="sxs-lookup"><span data-stu-id="f091c-163">ComboLBox</span></span>  | <span data-ttu-id="f091c-164">下拉式方塊中所含清單方塊的類別。</span><span class="sxs-lookup"><span data-stu-id="f091c-164">The class for the list box contained in a combo box.</span></span>                   |
| <span data-ttu-id="f091c-165">DDEMLEvent</span><span class="sxs-lookup"><span data-stu-id="f091c-165">DDEMLEvent</span></span> | <span data-ttu-id="f091c-166">動態資料交換管理程式庫的類別會 (DDEML) 事件。</span><span class="sxs-lookup"><span data-stu-id="f091c-166">The class for Dynamic Data Exchange Management Library (DDEML) events.</span></span> |
| <span data-ttu-id="f091c-167">訊息</span><span class="sxs-lookup"><span data-stu-id="f091c-167">Message</span></span>    | <span data-ttu-id="f091c-168">僅限訊息視窗的類別。</span><span class="sxs-lookup"><span data-stu-id="f091c-168">The class for a message-only window.</span></span>                                   |
| <span data-ttu-id="f091c-169">\#32768</span><span class="sxs-lookup"><span data-stu-id="f091c-169">\#32768</span></span>    | <span data-ttu-id="f091c-170">功能表的類別。</span><span class="sxs-lookup"><span data-stu-id="f091c-170">The class for a menu.</span></span>                                                  |
| <span data-ttu-id="f091c-171">\#32769</span><span class="sxs-lookup"><span data-stu-id="f091c-171">\#32769</span></span>    | <span data-ttu-id="f091c-172">桌面視窗的類別。</span><span class="sxs-lookup"><span data-stu-id="f091c-172">The class for the desktop window.</span></span>                                      |
| <span data-ttu-id="f091c-173">\#32770</span><span class="sxs-lookup"><span data-stu-id="f091c-173">\#32770</span></span>    | <span data-ttu-id="f091c-174">對話方塊的類別。</span><span class="sxs-lookup"><span data-stu-id="f091c-174">The class for a dialog box.</span></span>                                            |
| <span data-ttu-id="f091c-175">\#32771</span><span class="sxs-lookup"><span data-stu-id="f091c-175">\#32771</span></span>    | <span data-ttu-id="f091c-176">工作切換視窗的類別。</span><span class="sxs-lookup"><span data-stu-id="f091c-176">The class for the task switch window.</span></span>                                  |
| <span data-ttu-id="f091c-177">\#32772</span><span class="sxs-lookup"><span data-stu-id="f091c-177">\#32772</span></span>    | <span data-ttu-id="f091c-178">圖示標題的類別。</span><span class="sxs-lookup"><span data-stu-id="f091c-178">The class for icon titles.</span></span>                                             |



 

### <a name="application-global-classes"></a><span data-ttu-id="f091c-179">應用程式全域類別</span><span class="sxs-lookup"><span data-stu-id="f091c-179">Application Global Classes</span></span>

<span data-ttu-id="f091c-180">[應用程式全域類別](#application-global-classes)是由可執行檔或 DLL 註冊的視窗類別，可供進程中的所有其他模組使用。</span><span class="sxs-lookup"><span data-stu-id="f091c-180">An [application global class](#application-global-classes) is a window class registered by an executable or DLL that is available to all other modules in the process.</span></span> <span data-ttu-id="f091c-181">例如，您的 .dll 可以呼叫 [**RegisterClassEx**](/windows/win32/api/winuser/nf-winuser-registerclassexa) 函式，以註冊將自訂控制項定義為應用程式全域類別的視窗類別，讓載入 .dll 的進程可以建立自訂控制項的實例。</span><span class="sxs-lookup"><span data-stu-id="f091c-181">For example, your .dll can call the [**RegisterClassEx**](/windows/win32/api/winuser/nf-winuser-registerclassexa) function to register a window class that defines a custom control as an application global class so that a process that loads the .dll can create instances of the custom control.</span></span>

<span data-ttu-id="f091c-182">若要建立可用於每個進程的類別，請在 .dll 中建立視窗類別，並在每個進程中載入 .dll。</span><span class="sxs-lookup"><span data-stu-id="f091c-182">To create a class that can be used in every process, create the window class in a .dll and load the .dll in every process.</span></span> <span data-ttu-id="f091c-183">若要在每個進程中載入 .dll，請在下列登錄機碼中，將其名稱加入至 **AppInit \_ dll** 值：</span><span class="sxs-lookup"><span data-stu-id="f091c-183">To load the .dll in every process, add its name to the **AppInit\_DLLs** value in following registry key:</span></span>

<span data-ttu-id="f091c-184">**HKEY \_本機 \_ 電腦** \\ **軟體** \\ **Microsoft** \\ **Windows NT** \\ **CurrentVersion** \\ **Windows**</span><span class="sxs-lookup"><span data-stu-id="f091c-184">**HKEY\_LOCAL\_MACHINE**\\**Software**\\**Microsoft**\\**Windows NT**\\**CurrentVersion**\\**Windows**</span></span>

<span data-ttu-id="f091c-185">每次處理常式啟動時，系統就會在新啟動的進程的內容中載入指定的 .dll，然後呼叫其進入點函數。</span><span class="sxs-lookup"><span data-stu-id="f091c-185">Whenever a process starts, the system loads the specified .dll in the context of the newly started process before calling its entry-point function.</span></span> <span data-ttu-id="f091c-186">.Dll 必須在其初始化程式中註冊類別，而且必須指定 **CS \_ GLOBALCLASS** 樣式。</span><span class="sxs-lookup"><span data-stu-id="f091c-186">The .dll must register the class during its initialization procedure and must specify the **CS\_GLOBALCLASS** style.</span></span> <span data-ttu-id="f091c-187">如需詳細資訊，請參閱 [類別樣式](#class-styles)。</span><span class="sxs-lookup"><span data-stu-id="f091c-187">For more information, see [Class Styles](#class-styles).</span></span>

<span data-ttu-id="f091c-188">若要移除應用程式全域類別並釋放與其相關聯的儲存體，請使用 [**UnregisterClass**](/windows/win32/api/winuser/nf-winuser-unregisterclassa) 函數。</span><span class="sxs-lookup"><span data-stu-id="f091c-188">To remove an application global class and free the storage associated with it, use the [**UnregisterClass**](/windows/win32/api/winuser/nf-winuser-unregisterclassa) function.</span></span>

### <a name="application-local-classes"></a><span data-ttu-id="f091c-189">應用程式區域類別</span><span class="sxs-lookup"><span data-stu-id="f091c-189">Application Local Classes</span></span>

<span data-ttu-id="f091c-190">[應用程式區域類別](#application-local-classes)是可執行檔或 .dll 註冊以供其獨佔使用的任何視窗類別。</span><span class="sxs-lookup"><span data-stu-id="f091c-190">An [application local class](#application-local-classes) is any window class that an executable or .dll registers for its exclusive use.</span></span> <span data-ttu-id="f091c-191">雖然您可以註冊任意數目的本機類別，但通常只會註冊一個。</span><span class="sxs-lookup"><span data-stu-id="f091c-191">Although you can register any number of local classes, it is typical to register only one.</span></span> <span data-ttu-id="f091c-192">此視窗類別支援應用程式主視窗的視窗程式。</span><span class="sxs-lookup"><span data-stu-id="f091c-192">This window class supports the window procedure of the application's main window.</span></span>

<span data-ttu-id="f091c-193">當註冊的模組關閉時，系統會終結區域類別。</span><span class="sxs-lookup"><span data-stu-id="f091c-193">The system destroys a local class when the module that registered it closes.</span></span> <span data-ttu-id="f091c-194">應用程式也可以使用 [**UnregisterClass**](/windows/win32/api/winuser/nf-winuser-unregisterclassa) 函式來移除區域類別，並釋放與其相關聯的儲存體。</span><span class="sxs-lookup"><span data-stu-id="f091c-194">An application can also use the [**UnregisterClass**](/windows/win32/api/winuser/nf-winuser-unregisterclassa) function to remove a local class and free the storage associated with it.</span></span>

## <a name="how-the-system-locates-a-window-class"></a><span data-ttu-id="f091c-195">系統如何尋找視窗類別</span><span class="sxs-lookup"><span data-stu-id="f091c-195">How the System Locates a Window Class</span></span>

<span data-ttu-id="f091c-196">系統會為這三種視窗類別的類型維護一份結構清單。</span><span class="sxs-lookup"><span data-stu-id="f091c-196">The system maintains a list of structures for each of the three types of window classes.</span></span> <span data-ttu-id="f091c-197">當應用程式呼叫 [**CreateWindow**](/windows/win32/api/winuser/nf-winuser-createwindowa) 或 [**CreateWindowEx**](/windows/win32/api/winuser/nf-winuser-createwindowexa) 函式來建立具有指定類別的視窗時，系統會使用下列程式來找出類別。</span><span class="sxs-lookup"><span data-stu-id="f091c-197">When an application calls the [**CreateWindow**](/windows/win32/api/winuser/nf-winuser-createwindowa) or [**CreateWindowEx**](/windows/win32/api/winuser/nf-winuser-createwindowexa) function to create a window with a specified class, the system uses the following procedure to locate the class.</span></span>

1.  <span data-ttu-id="f091c-198">搜尋具有指定名稱之類別的應用程式區域類別清單，其實例控制碼符合模組的實例控制碼。</span><span class="sxs-lookup"><span data-stu-id="f091c-198">Search the list of application local classes for a class with the specified name whose instance handle matches the module's instance handle.</span></span> <span data-ttu-id="f091c-199"> (數個模組可使用相同的名稱，在相同的進程中註冊本機類別。 ) </span><span class="sxs-lookup"><span data-stu-id="f091c-199">(Several modules can use the same name to register local classes in the same process.)</span></span>
2.  <span data-ttu-id="f091c-200">如果名稱不在 [應用程式區域類別] 清單中，請搜尋應用程式全域類別的清單。</span><span class="sxs-lookup"><span data-stu-id="f091c-200">If the name is not in the application local class list, search the list of application global classes.</span></span>
3.  <span data-ttu-id="f091c-201">如果名稱不在 [應用程式全域類別] 清單中，請搜尋系統類別清單。</span><span class="sxs-lookup"><span data-stu-id="f091c-201">If the name is not in the application global class list, search the list of system classes.</span></span>

<span data-ttu-id="f091c-202">應用程式所建立的所有視窗都會使用此程式，包括代表系統在應用程式上建立的 windows，例如對話方塊。</span><span class="sxs-lookup"><span data-stu-id="f091c-202">All windows created by the application use this procedure, including windows created by the system on the application's behalf, such as dialog boxes.</span></span> <span data-ttu-id="f091c-203">您可以覆寫系統類別，而不會影響其他應用程式。</span><span class="sxs-lookup"><span data-stu-id="f091c-203">It is possible to override system classes without affecting other applications.</span></span> <span data-ttu-id="f091c-204">也就是說，應用程式可以註冊應用程式區域類別，其名稱與系統類別相同。</span><span class="sxs-lookup"><span data-stu-id="f091c-204">That is, an application can register an application local class having the same name as a system class.</span></span> <span data-ttu-id="f091c-205">這會取代應用程式內容中的系統類別，但不會防止其他應用程式使用系統類別。</span><span class="sxs-lookup"><span data-stu-id="f091c-205">This replaces the system class in the context of the application but does not prevent other applications from using the system class.</span></span>

## <a name="registering-a-window-class"></a><span data-ttu-id="f091c-206">註冊視窗類別</span><span class="sxs-lookup"><span data-stu-id="f091c-206">Registering a Window Class</span></span>

<span data-ttu-id="f091c-207">視窗類別會定義視窗的屬性，例如其樣式、圖示、游標、功能表和視窗程式。</span><span class="sxs-lookup"><span data-stu-id="f091c-207">A window class defines the attributes of a window, such as its style, icon, cursor, menu, and window procedure.</span></span> <span data-ttu-id="f091c-208">註冊視窗類別的第一個步驟是在 [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) 結構中填入視窗類別資訊。</span><span class="sxs-lookup"><span data-stu-id="f091c-208">The first step in registering a window class is to fill in a [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) structure with the window class information.</span></span> <span data-ttu-id="f091c-209">如需詳細資訊，請參閱 [視窗類別的元素](#elements-of-a-window-class)。</span><span class="sxs-lookup"><span data-stu-id="f091c-209">For more information, see [Elements of a Window Class](#elements-of-a-window-class).</span></span> <span data-ttu-id="f091c-210">接下來，將結構傳遞給 [**RegisterClassEx**](/windows/win32/api/winuser/nf-winuser-registerclassexa) 函數。</span><span class="sxs-lookup"><span data-stu-id="f091c-210">Next, pass the structure to the [**RegisterClassEx**](/windows/win32/api/winuser/nf-winuser-registerclassexa) function.</span></span> <span data-ttu-id="f091c-211">如需詳細資訊，請參閱 [使用視窗類別](using-window-classes.md)。</span><span class="sxs-lookup"><span data-stu-id="f091c-211">For more information, see [Using Window Classes](using-window-classes.md).</span></span>

<span data-ttu-id="f091c-212">若要註冊應用程式全域類別，請 \_ 在 [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa)結構的 **STYLE** 成員中指定 CS GLOBALCLASS 樣式。</span><span class="sxs-lookup"><span data-stu-id="f091c-212">To register an application global class, specify the CS\_GLOBALCLASS style in the **style** member of the [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) structure.</span></span> <span data-ttu-id="f091c-213">註冊應用程式區域類別時，請勿指定 **CS \_ GLOBALCLASS** 樣式。</span><span class="sxs-lookup"><span data-stu-id="f091c-213">When registering an application local class, do not specify the **CS\_GLOBALCLASS** style.</span></span>

<span data-ttu-id="f091c-214">如果您使用 ANSI 版本的 [**RegisterClassEx**](/windows/win32/api/winuser/nf-winuser-registerclassexa)（ **RegisterClassExA**）來註冊視窗類別，則應用程式會要求系統使用 ansi 字元集將訊息的文字參數傳遞至所建立類別的視窗;如果您使用 Unicode 版本的 **RegisterClassEx**（ **RegisterClassExW**）來註冊類別，則應用程式會要求系統使用 unicode 字元集，將訊息的文字參數傳遞至所建立類別的視窗。</span><span class="sxs-lookup"><span data-stu-id="f091c-214">If you register the window class using the ANSI version of [**RegisterClassEx**](/windows/win32/api/winuser/nf-winuser-registerclassexa), **RegisterClassExA**, the application requests that the system pass text parameters of messages to the windows of the created class using the ANSI character set; if you register the class using the Unicode version of **RegisterClassEx**, **RegisterClassExW**, the application requests that the system pass text parameters of messages to the windows of the created class using the Unicode character set.</span></span> <span data-ttu-id="f091c-215">[**IsWindowUnicode**](/windows/win32/api/winuser/nf-winuser-iswindowunicode)函數可讓應用程式查詢每個視窗的本質。</span><span class="sxs-lookup"><span data-stu-id="f091c-215">The [**IsWindowUnicode**](/windows/win32/api/winuser/nf-winuser-iswindowunicode) function enables applications to query the nature of each window.</span></span> <span data-ttu-id="f091c-216">如需有關 ANSI 和 Unicode 函數的詳細資訊，請參閱 [函數原型的慣例](/windows/desktop/Intl/conventions-for-function-prototypes)。</span><span class="sxs-lookup"><span data-stu-id="f091c-216">For more information on ANSI and Unicode functions, see [Conventions for Function Prototypes](/windows/desktop/Intl/conventions-for-function-prototypes).</span></span>

<span data-ttu-id="f091c-217">註冊類別的可執行檔或 DLL 是類別的擁有者。</span><span class="sxs-lookup"><span data-stu-id="f091c-217">The executable or DLL that registered the class is the owner of the class.</span></span> <span data-ttu-id="f091c-218">當註冊類別時，系統會從傳遞給 [**RegisterClassEx**](/windows/win32/api/winuser/nf-winuser-registerclassexa)函式之 [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa)結構的 **hInstance** 成員判斷類別擁有權。</span><span class="sxs-lookup"><span data-stu-id="f091c-218">The system determines class ownership from the **hInstance** member of the [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) structure passed to the [**RegisterClassEx**](/windows/win32/api/winuser/nf-winuser-registerclassexa) function when the class is registered.</span></span> <span data-ttu-id="f091c-219">若為 Dll， **hInstance** 成員必須是 .dll 實例的控制碼。</span><span class="sxs-lookup"><span data-stu-id="f091c-219">For DLLs, the **hInstance** member must be the handle to the .dll instance.</span></span>

<span data-ttu-id="f091c-220">當擁有它的 .dll 卸載時，不會終結類別。</span><span class="sxs-lookup"><span data-stu-id="f091c-220">The class is not destroyed when the .dll that owns it is unloaded.</span></span> <span data-ttu-id="f091c-221">因此，如果系統呼叫該類別之視窗的視窗程式，則會造成存取違規，因為包含視窗程式的 .dll 已不在記憶體中。</span><span class="sxs-lookup"><span data-stu-id="f091c-221">Therefore, if the system calls the window procedure for a window of that class, it will cause an access violation, because the .dll containing the window procedure is no longer in memory.</span></span> <span data-ttu-id="f091c-222">此程式必須在卸載 .dll 之前使用類別終結所有視窗，然後呼叫 [**UnregisterClass**](/windows/win32/api/winuser/nf-winuser-unregisterclassa) 函數。</span><span class="sxs-lookup"><span data-stu-id="f091c-222">The process must destroy all windows using the class before the .dll is unloaded and call the [**UnregisterClass**](/windows/win32/api/winuser/nf-winuser-unregisterclassa) function.</span></span>

## <a name="elements-of-a-window-class"></a><span data-ttu-id="f091c-223">視窗類別的元素</span><span class="sxs-lookup"><span data-stu-id="f091c-223">Elements of a Window Class</span></span>

<span data-ttu-id="f091c-224">視窗類別的元素會定義屬於類別之 windows 的預設行為。</span><span class="sxs-lookup"><span data-stu-id="f091c-224">The elements of a window class define the default behavior of windows belonging to the class.</span></span> <span data-ttu-id="f091c-225">註冊視窗類別的應用程式會在 [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) 結構中設定適當的成員，並將結構傳遞至 [**RegisterClassEx**](/windows/win32/api/winuser/nf-winuser-registerclassexa) 函式，以將元素指派給類別。</span><span class="sxs-lookup"><span data-stu-id="f091c-225">The application that registers a window class assigns elements to the class by setting appropriate members in a [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) structure and passing the structure to the [**RegisterClassEx**](/windows/win32/api/winuser/nf-winuser-registerclassexa) function.</span></span> <span data-ttu-id="f091c-226">[**GetClassInfoEx**](/windows/win32/api/winuser/nf-winuser-getclassinfoexa)和 [**GetClassLong**](/windows/win32/api/winuser/nf-winuser-getclasslonga)函式會取得指定之視窗類別的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="f091c-226">The [**GetClassInfoEx**](/windows/win32/api/winuser/nf-winuser-getclassinfoexa) and [**GetClassLong**](/windows/win32/api/winuser/nf-winuser-getclasslonga) functions retrieve information about a given window class.</span></span> <span data-ttu-id="f091c-227">[**SetClassLong**](/windows/win32/api/winuser/nf-winuser-setclasslonga)函式會變更應用程式已經註冊之本機或全域類別的元素。</span><span class="sxs-lookup"><span data-stu-id="f091c-227">The [**SetClassLong**](/windows/win32/api/winuser/nf-winuser-setclasslonga) function changes elements of a local or global class that the application has already registered.</span></span>

<span data-ttu-id="f091c-228">雖然完整的視窗類別包含許多元素，但系統只要求應用程式提供類別名稱、視窗程式位址和實例控制碼。</span><span class="sxs-lookup"><span data-stu-id="f091c-228">Although a complete window class consists of many elements, the system requires only that an application supply a class name, the window-procedure address, and an instance handle.</span></span> <span data-ttu-id="f091c-229">您可以使用其他元素來定義類別視窗的預設屬性，例如游標的形狀和視窗的功能表內容。</span><span class="sxs-lookup"><span data-stu-id="f091c-229">Use the other elements to define default attributes for windows of the class, such as the shape of the cursor and the content of the menu for the window.</span></span> <span data-ttu-id="f091c-230">您必須將 [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) 結構中任何未使用的成員初始化為零或 **Null**。</span><span class="sxs-lookup"><span data-stu-id="f091c-230">You must initialize any unused members of the [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) structure to zero or **NULL**.</span></span> <span data-ttu-id="f091c-231">視窗類別元素如下表所示。</span><span class="sxs-lookup"><span data-stu-id="f091c-231">The window class elements are as shown in the following table.</span></span>



| <span data-ttu-id="f091c-232">元素</span><span class="sxs-lookup"><span data-stu-id="f091c-232">Element</span></span>                                               | <span data-ttu-id="f091c-233">目的</span><span class="sxs-lookup"><span data-stu-id="f091c-233">Purpose</span></span>                                                                                                                                                                                                                                       |
|-------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="f091c-234">類別名稱</span><span class="sxs-lookup"><span data-stu-id="f091c-234">Class Name</span></span>](#class-name)                             | <span data-ttu-id="f091c-235">區分類別與其他已註冊的類別。</span><span class="sxs-lookup"><span data-stu-id="f091c-235">Distinguishes the class from other registered classes.</span></span>                                                                                                                                                                                        |
| [<span data-ttu-id="f091c-236">視窗程式位址</span><span class="sxs-lookup"><span data-stu-id="f091c-236">Window Procedure Address</span></span>](#window-procedure-address) | <span data-ttu-id="f091c-237">函式的指標，該函式會處理傳送至類別中之 windows 的所有訊息，並定義視窗的行為。</span><span class="sxs-lookup"><span data-stu-id="f091c-237">Pointer to the function that processes all messages sent to windows in the class and defines the behavior of the window.</span></span>                                                                                                                      |
| <span data-ttu-id="f091c-238">[執行個體控制代碼][](#instance-handle)</span><span class="sxs-lookup"><span data-stu-id="f091c-238">[Instance Handle](#instance-handle)</span></span>                   | <span data-ttu-id="f091c-239">識別註冊類別的應用程式或 .dll。</span><span class="sxs-lookup"><span data-stu-id="f091c-239">Identifies the application or .dll that registered the class.</span></span>                                                                                                                                                                                 |
| [<span data-ttu-id="f091c-240">類別資料指標</span><span class="sxs-lookup"><span data-stu-id="f091c-240">Class Cursor</span></span>](#class-cursor)                         | <span data-ttu-id="f091c-241">定義系統為類別的視窗顯示的滑鼠游標。</span><span class="sxs-lookup"><span data-stu-id="f091c-241">Defines the mouse cursor that the system displays for a window of the class.</span></span>                                                                                                                                                                  |
| [<span data-ttu-id="f091c-242">類別圖示</span><span class="sxs-lookup"><span data-stu-id="f091c-242">Class Icons</span></span>](#class-icons)                           | <span data-ttu-id="f091c-243">定義大型圖示和小圖示。</span><span class="sxs-lookup"><span data-stu-id="f091c-243">Defines the large icon and the small icon.</span></span>                                                                                                                                                                                                    |
| [<span data-ttu-id="f091c-244">類別背景筆刷</span><span class="sxs-lookup"><span data-stu-id="f091c-244">Class Background Brush</span></span>](#class-background-brush)     | <span data-ttu-id="f091c-245">定義在開啟或繪製視窗時，填滿工作區的色彩和模式。</span><span class="sxs-lookup"><span data-stu-id="f091c-245">Defines the color and pattern that fill the client area when the window is opened or painted.</span></span>                                                                                                                                                 |
| [<span data-ttu-id="f091c-246">類別功能表</span><span class="sxs-lookup"><span data-stu-id="f091c-246">Class Menu</span></span>](#class-menu)                             | <span data-ttu-id="f091c-247">指定未明確定義功能表的 windows 預設功能表。</span><span class="sxs-lookup"><span data-stu-id="f091c-247">Specifies the default menu for windows that do not explicitly define a menu.</span></span>                                                                                                                                                                  |
| <span data-ttu-id="f091c-248">[類別樣式][](#class-styles)</span><span class="sxs-lookup"><span data-stu-id="f091c-248">[Class Styles](#class-styles)</span></span>                         | <span data-ttu-id="f091c-249">定義如何在移動或調整視窗大小時，更新視窗、如何處理滑鼠的按兩下、如何針對裝置內容配置空間，以及視窗的其他層面。</span><span class="sxs-lookup"><span data-stu-id="f091c-249">Defines how to update the window after moving or resizing it, how to process double-clicks of the mouse, how to allocate space for the device context, and other aspects of the window.</span></span>                                                       |
| [<span data-ttu-id="f091c-250">額外類別記憶體</span><span class="sxs-lookup"><span data-stu-id="f091c-250">Extra Class Memory</span></span>](#extra-class-memory)             | <span data-ttu-id="f091c-251">指定系統應為類別保留的額外記憶體量（以位元組為單位）。</span><span class="sxs-lookup"><span data-stu-id="f091c-251">Specifies the amount of extra memory, in bytes, that the system should reserve for the class.</span></span> <span data-ttu-id="f091c-252">類別中的所有視窗都會共用額外的記憶體，而且可以將它用於任何應用程式定義的用途。</span><span class="sxs-lookup"><span data-stu-id="f091c-252">All windows in the class share the extra memory and can use it for any application-defined purpose.</span></span> <span data-ttu-id="f091c-253">系統會將此記憶體初始化為零。</span><span class="sxs-lookup"><span data-stu-id="f091c-253">The system initializes this memory to zero.</span></span> |
| [<span data-ttu-id="f091c-254">額外的視窗記憶體</span><span class="sxs-lookup"><span data-stu-id="f091c-254">Extra Window Memory</span></span>](#extra-window-memory)           | <span data-ttu-id="f091c-255">指定系統應為屬於類別的每個視窗保留的額外記憶體量（以位元組為單位）。</span><span class="sxs-lookup"><span data-stu-id="f091c-255">Specifies the amount of extra memory, in bytes, that the system should reserve for each window belonging to the class.</span></span> <span data-ttu-id="f091c-256">額外的記憶體可用於任何應用程式定義的用途。</span><span class="sxs-lookup"><span data-stu-id="f091c-256">The extra memory can be used for any application-defined purpose.</span></span> <span data-ttu-id="f091c-257">系統會將此記憶體初始化為零。</span><span class="sxs-lookup"><span data-stu-id="f091c-257">The system initializes this memory to zero.</span></span>          |



 

### <a name="class-name"></a><span data-ttu-id="f091c-258">類別名稱</span><span class="sxs-lookup"><span data-stu-id="f091c-258">Class Name</span></span>

<span data-ttu-id="f091c-259">每個視窗類別都需要 [類別名稱](#class-name) ，才能區分某個類別與另一個類別。</span><span class="sxs-lookup"><span data-stu-id="f091c-259">Every window class needs a [Class Name](#class-name) to distinguish one class from another.</span></span> <span data-ttu-id="f091c-260">將 [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa)結構的 **lpszClassName** 成員設定為指定名稱之以 null 結束的字串位址，藉以指派類別名稱。</span><span class="sxs-lookup"><span data-stu-id="f091c-260">Assign a class name by setting the **lpszClassName** member of the [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) structure to the address of a null-terminated string that specifies the name.</span></span> <span data-ttu-id="f091c-261">因為視窗類別是進程特定的，所以視窗類別名稱在相同的進程中必須是唯一的。</span><span class="sxs-lookup"><span data-stu-id="f091c-261">Because window classes are process specific, window class names need to be unique only within the same process.</span></span> <span data-ttu-id="f091c-262">此外，由於類別名稱會佔用系統私用 atom 資料表中的空間，因此您應該盡可能將類別名稱字串保持在最短的位置。</span><span class="sxs-lookup"><span data-stu-id="f091c-262">Also, because class names occupy space in the system's private atom table, you should keep class name strings as short a possible.</span></span>

<span data-ttu-id="f091c-263">[**GetClassName**](/windows/win32/api/winuser/nf-winuser-getclassname)函式會抓取給定視窗所屬類別的名稱。</span><span class="sxs-lookup"><span data-stu-id="f091c-263">The [**GetClassName**](/windows/win32/api/winuser/nf-winuser-getclassname) function retrieves the name of the class to which a given window belongs.</span></span>

### <a name="window-procedure-address"></a><span data-ttu-id="f091c-264">視窗程式位址</span><span class="sxs-lookup"><span data-stu-id="f091c-264">Window Procedure Address</span></span>

<span data-ttu-id="f091c-265">每個類別都需要一個視窗程式位址，以定義視窗程式的進入點，用來處理類別中的所有 windows 訊息。</span><span class="sxs-lookup"><span data-stu-id="f091c-265">Every class needs a window-procedure address to define the entry point of the window procedure used to process all messages for windows in the class.</span></span> <span data-ttu-id="f091c-266">當系統要求視窗執行工作時，系統會將訊息傳遞至程式，例如，繪製其工作區或回應使用者的輸入。</span><span class="sxs-lookup"><span data-stu-id="f091c-266">The system passes messages to the procedure when it requires the window to carry out tasks, such as painting its client area or responding to input from the user.</span></span> <span data-ttu-id="f091c-267">進程會將視窗程式指派給類別，方法是將其位址複製到 [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa)結構的 **lpfnWndProc** 成員。</span><span class="sxs-lookup"><span data-stu-id="f091c-267">A process assigns a window procedure to a class by copying its address to the **lpfnWndProc** member of the [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) structure.</span></span> <span data-ttu-id="f091c-268">如需詳細資訊，請參閱 [Window 程序](window-procedures.md)。</span><span class="sxs-lookup"><span data-stu-id="f091c-268">For more information, see [Window Procedures](window-procedures.md).</span></span>

### <a name="instance-handle"></a><span data-ttu-id="f091c-269">[執行個體控制代碼]</span><span class="sxs-lookup"><span data-stu-id="f091c-269">Instance Handle</span></span>

<span data-ttu-id="f091c-270">每個視窗類別都需要實例控制碼，以識別註冊類別的應用程式或 .dll。</span><span class="sxs-lookup"><span data-stu-id="f091c-270">Every window class requires an instance handle to identify the application or .dll that registered the class.</span></span> <span data-ttu-id="f091c-271">系統需要實例控制碼來追蹤所有模組。</span><span class="sxs-lookup"><span data-stu-id="f091c-271">The system requires instance handles to keep track of all of modules.</span></span> <span data-ttu-id="f091c-272">系統會將控制碼指派給執行中的可執行檔或 .dll 的每個複本。</span><span class="sxs-lookup"><span data-stu-id="f091c-272">The system assigns a handle to each copy of a running executable or .dll.</span></span>

<span data-ttu-id="f091c-273">系統會將實例控制碼傳遞至每個可執行檔的進入點函數 (請參閱 [**WinMain**](/windows/win32/api/winbase/nf-winbase-winmain)) 和 .dll (查看 [**DllMain**](/windows/desktop/Dlls/dllmain)) 。</span><span class="sxs-lookup"><span data-stu-id="f091c-273">The system passes an instance handle to the entry-point function of each executable (see [**WinMain**](/windows/win32/api/winbase/nf-winbase-winmain)) and .dll (see [**DllMain**](/windows/desktop/Dlls/dllmain)).</span></span> <span data-ttu-id="f091c-274">可執行檔或 .dll 會將這個實例控制碼複製到 [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa)結構的 **hInstance** 成員，藉此將這個實例控制碼指派給類別。</span><span class="sxs-lookup"><span data-stu-id="f091c-274">The executable or .dll assigns this instance handle to the class by copying it to the **hInstance** member of the [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) structure.</span></span>

### <a name="class-cursor"></a><span data-ttu-id="f091c-275">類別資料指標</span><span class="sxs-lookup"><span data-stu-id="f091c-275">Class Cursor</span></span>

<span data-ttu-id="f091c-276">當 *資料指標位於* 類別中視窗的工作區時，會定義資料指標的形狀。</span><span class="sxs-lookup"><span data-stu-id="f091c-276">The *class cursor* defines the shape of the cursor when it is in the client area of a window in the class.</span></span> <span data-ttu-id="f091c-277">當游標進入視窗的工作區時，系統會自動將游標設定為指定的圖形，並確保它會保留在工作區中。</span><span class="sxs-lookup"><span data-stu-id="f091c-277">The system automatically sets the cursor to the given shape when the cursor enters the window's client area and ensures it keeps that shape while it remains in the client area.</span></span> <span data-ttu-id="f091c-278">若要將資料指標圖形指派給視窗類別，請使用 [**LoadCursor**](/windows/desktop/api/winuser/nf-winuser-loadcursora)函數載入預先定義的資料指標圖形，然後將傳回的資料指標控制碼指派給 [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa)結構的 **hCursor** 成員。</span><span class="sxs-lookup"><span data-stu-id="f091c-278">To assign a cursor shape to a window class, load a predefined cursor shape by using the [**LoadCursor**](/windows/desktop/api/winuser/nf-winuser-loadcursora) function and then assign the returned cursor handle to the **hCursor** member of the [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) structure.</span></span> <span data-ttu-id="f091c-279">或者，提供自訂的資料指標資源，並使用 **LoadCursor** 函式從應用程式的資源載入它。</span><span class="sxs-lookup"><span data-stu-id="f091c-279">Alternatively, provide a custom cursor resource and use the **LoadCursor** function to load it from the application's resources.</span></span>

<span data-ttu-id="f091c-280">系統不需要類別資料指標。</span><span class="sxs-lookup"><span data-stu-id="f091c-280">The system does not require a class cursor.</span></span> <span data-ttu-id="f091c-281">如果應用程式將 [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa)結構的 **hCursor** 成員設定為 **Null**，則不會定義任何類別資料指標。</span><span class="sxs-lookup"><span data-stu-id="f091c-281">If an application sets the **hCursor** member of the [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) structure to **NULL**, no class cursor is defined.</span></span> <span data-ttu-id="f091c-282">系統會假設在每次游標移至視窗時，視窗都會設定資料指標圖形。</span><span class="sxs-lookup"><span data-stu-id="f091c-282">The system assumes the window sets the cursor shape each time the cursor moves into the window.</span></span> <span data-ttu-id="f091c-283">視窗可以在每次視窗收到 [**WM \_ MOUSEMOVE**](/windows/desktop/inputdev/wm-mousemove)訊息時呼叫 [**SetCursor**](/windows/desktop/api/winuser/nf-winuser-setcursor)函式，藉以設定資料指標圖形。</span><span class="sxs-lookup"><span data-stu-id="f091c-283">A window can set the cursor shape by calling the [**SetCursor**](/windows/desktop/api/winuser/nf-winuser-setcursor) function whenever the window receives the [**WM\_MOUSEMOVE**](/windows/desktop/inputdev/wm-mousemove) message.</span></span> <span data-ttu-id="f091c-284">如需資料指標的詳細資訊，請參閱資料 [指標](/windows/desktop/menurc/cursors)。</span><span class="sxs-lookup"><span data-stu-id="f091c-284">For more information about cursors, see [Cursors](/windows/desktop/menurc/cursors).</span></span>

### <a name="class-icons"></a><span data-ttu-id="f091c-285">類別圖示</span><span class="sxs-lookup"><span data-stu-id="f091c-285">Class Icons</span></span>

<span data-ttu-id="f091c-286">*類別圖示* 是系統用來表示特定類別之視窗的圖片。</span><span class="sxs-lookup"><span data-stu-id="f091c-286">A *class icon* is a picture that the system uses to represent a window of a particular class.</span></span> <span data-ttu-id="f091c-287">應用程式可以有兩個類別圖示—一個是大型的，一個很小。</span><span class="sxs-lookup"><span data-stu-id="f091c-287">An application can have two class icons—one large and one small.</span></span> <span data-ttu-id="f091c-288">當使用者按下 ALT + TAB，以及在工作列和 explorer 的大型圖示視圖中時，系統會在工作切換視窗中顯示視窗的 *大型類別圖示* 。</span><span class="sxs-lookup"><span data-stu-id="f091c-288">The system displays a window's *large class icon* in the task-switch window that appears when the user presses ALT+TAB, and in the large icon views of the task bar and explorer.</span></span> <span data-ttu-id="f091c-289">*小型類別圖示* 會出現在視窗的標題列，以及工作列和 explorer 的小圖示視圖中。</span><span class="sxs-lookup"><span data-stu-id="f091c-289">The *small class icon* appears in a window's title bar and in the small icon views of the task bar and explorer.</span></span>

<span data-ttu-id="f091c-290">若要將大型和小型圖示指派給視窗類別，請在 [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa)結構的 **hIcon** 和 **hIconSm** 成員中指定圖示的控制碼。</span><span class="sxs-lookup"><span data-stu-id="f091c-290">To assign a large and small icon to a window class, specify the handles of the icons in the **hIcon** and **hIconSm** members of the [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) structure.</span></span> <span data-ttu-id="f091c-291">圖示維度必須符合大型和小型類別圖示的必要維度。</span><span class="sxs-lookup"><span data-stu-id="f091c-291">The icon dimensions must conform to required dimensions for large and small class icons.</span></span> <span data-ttu-id="f091c-292">針對大型類別的圖示，您可以在 [**GetSystemMetrics**](/windows/desktop/api/winuser/nf-winuser-getsystemmetrics)函式的呼叫中指定 **Sm \_ CXICON** 和 **sm \_ CYICON** 值，以判斷所需的維度。</span><span class="sxs-lookup"><span data-stu-id="f091c-292">For a large class icon, you can determine the required dimensions by specifying the **SM\_CXICON** and **SM\_CYICON** values in a call to the [**GetSystemMetrics**](/windows/desktop/api/winuser/nf-winuser-getsystemmetrics) function.</span></span> <span data-ttu-id="f091c-293">若為小型類別圖示，請指定 **sm \_ CXSMICON** 和 **sm \_ CYSMICON** 值。</span><span class="sxs-lookup"><span data-stu-id="f091c-293">For a small class icon, specify the **SM\_CXSMICON** and **SM\_CYSMICON** values.</span></span> <span data-ttu-id="f091c-294">如需詳細資訊，請參閱 [圖示](/windows/desktop/menurc/icons)。</span><span class="sxs-lookup"><span data-stu-id="f091c-294">For information, see [Icons](/windows/desktop/menurc/icons).</span></span>

<span data-ttu-id="f091c-295">如果應用程式將 [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa)結構的 **hIcon** 和 **hIconSm** 成員設為 **Null**，系統就會使用預設應用程式圖示作為視窗類別的大型和小型類別圖示。</span><span class="sxs-lookup"><span data-stu-id="f091c-295">If an application sets the **hIcon** and **hIconSm** members of the [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) structure to **NULL**, the system uses the default application icon as the large and small class icons for the window class.</span></span> <span data-ttu-id="f091c-296">如果您指定大型類別圖示，而不是小圖示，系統會根據大型類別圖示來建立小型類別圖示。</span><span class="sxs-lookup"><span data-stu-id="f091c-296">If you specify a large class icon but not a small one, the system creates a small class icon based on the large one.</span></span> <span data-ttu-id="f091c-297">但是，如果您指定小型類別圖示，但不是大型類別圖示，系統會使用預設應用程式圖示作為大型類別圖示，並使用指定的圖示作為小型類別圖示。</span><span class="sxs-lookup"><span data-stu-id="f091c-297">However, if you specify a small class icon but not a large one, the system uses the default application icon as the large class icon and the specified icon as the small class icon.</span></span>

<span data-ttu-id="f091c-298">您可以使用 [**WM \_ SETICON**](wm-seticon.md) 訊息，覆寫特定視窗的大型或小型類別圖示。</span><span class="sxs-lookup"><span data-stu-id="f091c-298">You can override the large or small class icon for a particular window by using the [**WM\_SETICON**](wm-seticon.md) message.</span></span> <span data-ttu-id="f091c-299">您可以使用 [**WM \_ GETICON**](wm-geticon.md) 訊息來取出目前的大型或小型類別圖示。</span><span class="sxs-lookup"><span data-stu-id="f091c-299">You can retrieve the current large or small class icon by using the [**WM\_GETICON**](wm-geticon.md) message.</span></span>

### <a name="class-background-brush"></a><span data-ttu-id="f091c-300">類別背景筆刷</span><span class="sxs-lookup"><span data-stu-id="f091c-300">Class Background Brush</span></span>

<span data-ttu-id="f091c-301">*類別背景筆刷* 會準備視窗的工作區，以供應用程式後續繪製。</span><span class="sxs-lookup"><span data-stu-id="f091c-301">A *class background brush* prepares the client area of a window for subsequent drawing by the application.</span></span> <span data-ttu-id="f091c-302">系統會使用筆刷來填滿純色或模式的工作區，藉此從該位置移除所有先前的影像（不論它們是否屬於視窗）。</span><span class="sxs-lookup"><span data-stu-id="f091c-302">The system uses the brush to fill the client area with a solid color or pattern, thereby removing all previous images from that location whether they belong to the window or not.</span></span> <span data-ttu-id="f091c-303">系統會將 [**WM \_ ERASEBKGND**](wm-erasebkgnd.md) 訊息傳送至視窗，以通知視窗應繪製其背景。</span><span class="sxs-lookup"><span data-stu-id="f091c-303">The system notifies a window that its background should be painted by sending the [**WM\_ERASEBKGND**](wm-erasebkgnd.md) message to the window.</span></span> <span data-ttu-id="f091c-304">如需詳細資訊，請參閱 [筆刷](/windows/desktop/gdi/brushes)。</span><span class="sxs-lookup"><span data-stu-id="f091c-304">For more information, see [Brushes](/windows/desktop/gdi/brushes).</span></span>

<span data-ttu-id="f091c-305">若要將背景筆刷指派給類別，請使用適當的 GDI 函數建立筆刷，然後將傳回的筆刷控制碼指派給 [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa)結構的 **hbrBackground** 成員。</span><span class="sxs-lookup"><span data-stu-id="f091c-305">To assign a background brush to a class, create a brush by using the appropriate GDI functions and assign the returned brush handle to the **hbrBackground** member of the [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) structure.</span></span>

<span data-ttu-id="f091c-306">應用程式可以將 **hbrBackground** 成員設定為其中一個標準系統色彩值，而不是建立筆刷。</span><span class="sxs-lookup"><span data-stu-id="f091c-306">Instead of creating a brush, an application can set the **hbrBackground** member to one of the standard system color values.</span></span> <span data-ttu-id="f091c-307">如需標準系統色彩值的清單，請參閱 [**SetSysColors**](/windows/desktop/api/winuser/nf-winuser-setsyscolors)。</span><span class="sxs-lookup"><span data-stu-id="f091c-307">For a list of the standard system color values, see [**SetSysColors**](/windows/desktop/api/winuser/nf-winuser-setsyscolors).</span></span>

<span data-ttu-id="f091c-308">若要使用標準系統色彩，應用程式必須將背景色彩值增加一。</span><span class="sxs-lookup"><span data-stu-id="f091c-308">To use a standard system color, the application must increase the background-color value by one.</span></span> <span data-ttu-id="f091c-309">例如， **COLOR \_ background** + 1 是系統背景色彩。</span><span class="sxs-lookup"><span data-stu-id="f091c-309">For example, **COLOR\_BACKGROUND** + 1 is the system background color.</span></span> <span data-ttu-id="f091c-310">或者，您可以使用 [**GetSysColorBrush**](/windows/desktop/api/winuser/nf-winuser-getsyscolorbrush)函式來取得對應至標準系統色彩之筆刷的控制碼，然後在 [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa)結構的 **hbrBackground** 成員中指定控制碼。</span><span class="sxs-lookup"><span data-stu-id="f091c-310">Alternatively, you can use the [**GetSysColorBrush**](/windows/desktop/api/winuser/nf-winuser-getsyscolorbrush) function to retrieve a handle to a brush that corresponds to a standard system color, and then specify the handle in the **hbrBackground** member of the [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) structure.</span></span>

<span data-ttu-id="f091c-311">系統不需要視窗類別具有類別背景筆刷。</span><span class="sxs-lookup"><span data-stu-id="f091c-311">The system does not require that a window class have a class background brush.</span></span> <span data-ttu-id="f091c-312">如果此參數設定為 **Null**，則視窗必須在收到 [**WM \_ ERASEBKGND**](wm-erasebkgnd.md) 訊息時繪製自己的背景。</span><span class="sxs-lookup"><span data-stu-id="f091c-312">If this parameter is set to **NULL**, the window must paint its own background whenever it receives the [**WM\_ERASEBKGND**](wm-erasebkgnd.md) message.</span></span>

### <a name="class-menu"></a><span data-ttu-id="f091c-313">類別功能表</span><span class="sxs-lookup"><span data-stu-id="f091c-313">Class Menu</span></span>

<span data-ttu-id="f091c-314">如果在建立視窗時未指定明確功能表， *類別功能表* 會定義類別中的視窗所要使用的預設功能表。</span><span class="sxs-lookup"><span data-stu-id="f091c-314">A *class menu* defines the default menu to be used by the windows in the class if no explicit menu is given when the windows are created.</span></span> <span data-ttu-id="f091c-315">功能表是一份命令清單，使用者可以從中選擇要執行應用程式的動作。</span><span class="sxs-lookup"><span data-stu-id="f091c-315">A menu is a list of commands from which a user can choose actions for the application to carry out.</span></span>

<span data-ttu-id="f091c-316">您可以藉由將 [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa)結構的 **lpszMenuName** 成員設定為以 null 結束的字串位址（指定功能表的資源名稱），將功能表指派給類別。</span><span class="sxs-lookup"><span data-stu-id="f091c-316">You can assign a menu to a class by setting the **lpszMenuName** member of the [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) structure to the address of a null-terminated string that specifies the resource name of the menu.</span></span> <span data-ttu-id="f091c-317">此功能表會假設為指定之應用程式中的資源。</span><span class="sxs-lookup"><span data-stu-id="f091c-317">The menu is assumed to be a resource in the given application.</span></span> <span data-ttu-id="f091c-318">系統會在需要時自動載入功能表。</span><span class="sxs-lookup"><span data-stu-id="f091c-318">The system automatically loads the menu when it is needed.</span></span> <span data-ttu-id="f091c-319">如果功能表資源是以整數來識別，而不是由名稱所識別，應用程式可以在指派值之前套用 [**MAKEINTRESOURCE**](/windows/desktop/api/winuser/nf-winuser-makeintresourcea)宏，藉此將 **lpszMenuName** 成員設定為該整數。</span><span class="sxs-lookup"><span data-stu-id="f091c-319">If the menu resource is identified by an integer and not by a name, the application can set the **lpszMenuName** member to that integer by applying the [**MAKEINTRESOURCE**](/windows/desktop/api/winuser/nf-winuser-makeintresourcea) macro before assigning the value.</span></span>

<span data-ttu-id="f091c-320">系統不需要類別功能表。</span><span class="sxs-lookup"><span data-stu-id="f091c-320">The system does not require a class menu.</span></span> <span data-ttu-id="f091c-321">如果應用程式將 [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa)結構的 **lpszMenuName** 成員設定為 **Null**，則類別中的視窗沒有功能表列。</span><span class="sxs-lookup"><span data-stu-id="f091c-321">If an application sets the **lpszMenuName** member of the [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) structure to **NULL**, windows in the class have no menu bars.</span></span> <span data-ttu-id="f091c-322">即使沒有指定 [類別] 功能表，應用程式還是可以在建立視窗時定義視窗的功能表列。</span><span class="sxs-lookup"><span data-stu-id="f091c-322">Even if no class menu is given, an application can still define a menu bar for a window when it creates the window.</span></span>

<span data-ttu-id="f091c-323">如果為類別指定了功能表，並建立該類別的子視窗，則會忽略該功能表。</span><span class="sxs-lookup"><span data-stu-id="f091c-323">If a menu is given for a class and a child window of that class is created, the menu is ignored.</span></span> <span data-ttu-id="f091c-324">如需詳細資訊，請參閱 [功能表](/windows/desktop/menurc/menus)。</span><span class="sxs-lookup"><span data-stu-id="f091c-324">For more information, see [Menus](/windows/desktop/menurc/menus).</span></span>

### <a name="class-styles"></a><span data-ttu-id="f091c-325">[類別樣式]</span><span class="sxs-lookup"><span data-stu-id="f091c-325">Class Styles</span></span>

<span data-ttu-id="f091c-326">類別樣式定義視窗類別的其他元素。</span><span class="sxs-lookup"><span data-stu-id="f091c-326">The class styles define additional elements of the window class.</span></span> <span data-ttu-id="f091c-327">您可以使用位 OR () 運算子來結合兩個或多個樣式 \| 。</span><span class="sxs-lookup"><span data-stu-id="f091c-327">Two or more styles can be combined by using the bitwise OR (\|) operator.</span></span> <span data-ttu-id="f091c-328">若要將樣式指派給視窗類別，請將樣式指派給 [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa)結構的 **樣式** 成員。</span><span class="sxs-lookup"><span data-stu-id="f091c-328">To assign a style to a window class, assign the style to the **style** member of the [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) structure.</span></span> <span data-ttu-id="f091c-329">如需類別樣式的清單，請參閱 [**視窗類別樣式**](window-class-styles.md)。</span><span class="sxs-lookup"><span data-stu-id="f091c-329">For a list of class styles, see [**Window Class Styles**](window-class-styles.md).</span></span>

### <a name="classes-and-device-contexts"></a><span data-ttu-id="f091c-330">類別和裝置內容</span><span class="sxs-lookup"><span data-stu-id="f091c-330">Classes and Device Contexts</span></span>

<span data-ttu-id="f091c-331">*裝置內容* 是一組特殊的值，應用程式會在其視窗的工作區中用來繪圖。</span><span class="sxs-lookup"><span data-stu-id="f091c-331">A *device context* is a special set of values that applications use for drawing in the client area of their windows.</span></span> <span data-ttu-id="f091c-332">系統需要顯示畫面上每個視窗的裝置內容，但可讓系統儲存和處理該裝置內容的方式有一些彈性。</span><span class="sxs-lookup"><span data-stu-id="f091c-332">The system requires a device context for each window on the display but allows some flexibility in how the system stores and treats that device context.</span></span>

<span data-ttu-id="f091c-333">如果未明確指定任何裝置內容樣式，系統會假設每個視窗使用從系統維護的內容集區中抓取的裝置內容。</span><span class="sxs-lookup"><span data-stu-id="f091c-333">If no device-context style is explicitly given, the system assumes each window uses a device context retrieved from a pool of contexts maintained by the system.</span></span> <span data-ttu-id="f091c-334">在這種情況下，每個視窗都必須先取出並初始化裝置內容，再進行繪製，並在繪製之後釋放。</span><span class="sxs-lookup"><span data-stu-id="f091c-334">In such cases, each window must retrieve and initialize the device context before painting and free it after painting.</span></span>

<span data-ttu-id="f091c-335">為了避免每次需要在視窗內繪製裝置內容時，應用程式可以指定視窗類別的 **CS \_ OWNDC** 樣式。</span><span class="sxs-lookup"><span data-stu-id="f091c-335">To avoid retrieving a device context each time it needs to paint inside a window, an application can specify the **CS\_OWNDC** style for the window class.</span></span> <span data-ttu-id="f091c-336">此類別樣式會指示系統建立私用裝置內容，也就是為類別中的每個視窗配置唯一的裝置內容。</span><span class="sxs-lookup"><span data-stu-id="f091c-336">This class style directs the system to create a private device context—that is, to allocate a unique device context for each window in the class.</span></span> <span data-ttu-id="f091c-337">應用程式只需要取出內容一次，然後將它用於所有後續的繪製。</span><span class="sxs-lookup"><span data-stu-id="f091c-337">The application need only retrieve the context once and then use it for all subsequent painting.</span></span>

### <a name="extra-class-memory"></a><span data-ttu-id="f091c-338">額外類別記憶體</span><span class="sxs-lookup"><span data-stu-id="f091c-338">Extra Class Memory</span></span>

<span data-ttu-id="f091c-339">系統會在內部針對系統中的每個視窗類別維護 [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) 結構。</span><span class="sxs-lookup"><span data-stu-id="f091c-339">The system maintains a [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) structure internally for each window class in the system.</span></span> <span data-ttu-id="f091c-340">當應用程式註冊視窗類別時，它可以指示系統組態和附加一些額外的記憶體位元組至 **WNDCLASSEX** 結構的結尾。</span><span class="sxs-lookup"><span data-stu-id="f091c-340">When an application registers a window class, it can direct the system to allocate and append a number of additional bytes of memory to the end of the **WNDCLASSEX** structure.</span></span> <span data-ttu-id="f091c-341">這個記憶體稱為 *額外的類別記憶體* ，且由屬於該類別的所有 windows 共用。</span><span class="sxs-lookup"><span data-stu-id="f091c-341">This memory is called *extra class memory* and is shared by all windows belonging to the class.</span></span> <span data-ttu-id="f091c-342">使用額外的類別記憶體來儲存與類別有關的任何資訊。</span><span class="sxs-lookup"><span data-stu-id="f091c-342">Use the extra class memory to store any information pertaining to the class.</span></span>

<span data-ttu-id="f091c-343">由於系統的本機堆積會配置額外的記憶體，因此應用程式應謹慎使用額外的類別記憶體。</span><span class="sxs-lookup"><span data-stu-id="f091c-343">Because extra memory is allocated from the system's local heap, an application should use extra class memory sparingly.</span></span> <span data-ttu-id="f091c-344">如果要求的額外類別記憶體數量大於40個位元組， [**RegisterClassEx**](/windows/win32/api/winuser/nf-winuser-registerclassexa) 函式會失敗。</span><span class="sxs-lookup"><span data-stu-id="f091c-344">The [**RegisterClassEx**](/windows/win32/api/winuser/nf-winuser-registerclassexa) function fails if the amount of extra class memory requested is greater than 40 bytes.</span></span> <span data-ttu-id="f091c-345">如果應用程式需要超過40個位元組，它應該配置自己的記憶體，並將記憶體指標儲存在額外的類別記憶體中。</span><span class="sxs-lookup"><span data-stu-id="f091c-345">If an application requires more than 40 bytes, it should allocate its own memory and store a pointer to the memory in the extra class memory.</span></span>

<span data-ttu-id="f091c-346">[**SetClassWord**](/windows/win32/api/winuser/nf-winuser-setclassword)和 [**SetClassLong**](/windows/win32/api/winuser/nf-winuser-setclasslonga)函數會將值複製到額外的類別記憶體。</span><span class="sxs-lookup"><span data-stu-id="f091c-346">The [**SetClassWord**](/windows/win32/api/winuser/nf-winuser-setclassword) and [**SetClassLong**](/windows/win32/api/winuser/nf-winuser-setclasslonga) functions copy a value to the extra class memory.</span></span> <span data-ttu-id="f091c-347">若要從額外的類別記憶體取出值，請使用 [**GetClassWord**](/windows/win32/api/winuser/nf-winuser-getclassword) 和 [**GetClassLong**](/windows/win32/api/winuser/nf-winuser-getclasslonga) 函數。</span><span class="sxs-lookup"><span data-stu-id="f091c-347">To retrieve a value from the extra class memory, use the [**GetClassWord**](/windows/win32/api/winuser/nf-winuser-getclassword) and [**GetClassLong**](/windows/win32/api/winuser/nf-winuser-getclasslonga) functions.</span></span> <span data-ttu-id="f091c-348">[**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa)結構的 **cbClsExtra** 成員會指定要配置的額外類別記憶體量。</span><span class="sxs-lookup"><span data-stu-id="f091c-348">The **cbClsExtra** member of the [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) structure specifies the amount of extra class memory to allocate.</span></span> <span data-ttu-id="f091c-349">未使用額外類別記憶體的應用程式，必須將 **cbClsExtra** 成員初始化為零。</span><span class="sxs-lookup"><span data-stu-id="f091c-349">An application that does not use extra class memory must initialize the **cbClsExtra** member to zero.</span></span>

### <a name="extra-window-memory"></a><span data-ttu-id="f091c-350">額外的視窗記憶體</span><span class="sxs-lookup"><span data-stu-id="f091c-350">Extra Window Memory</span></span>

<span data-ttu-id="f091c-351">系統會維護每個視窗的內部資料結構。</span><span class="sxs-lookup"><span data-stu-id="f091c-351">The system maintains an internal data structure for each window.</span></span> <span data-ttu-id="f091c-352">註冊視窗類別時，應用程式可以指定額外的記憶體位元組數目，稱為 *額外的視窗記憶體*。</span><span class="sxs-lookup"><span data-stu-id="f091c-352">When registering a window class, an application can specify a number of additional bytes of memory, called *extra window memory*.</span></span> <span data-ttu-id="f091c-353">建立類別的視窗時，系統會配置指定的額外視窗記憶體量，並將其附加至視窗結構的結尾。</span><span class="sxs-lookup"><span data-stu-id="f091c-353">When creating a window of the class, the system allocates and appends the specified amount of extra window memory to the end of the window's structure.</span></span> <span data-ttu-id="f091c-354">應用程式可以使用此記憶體來儲存特定時間範圍的資料。</span><span class="sxs-lookup"><span data-stu-id="f091c-354">An application can use this memory to store window-specific data.</span></span>

<span data-ttu-id="f091c-355">由於系統的本機堆積會配置額外的記憶體，因此應用程式應該謹慎使用額外的視窗記憶體。</span><span class="sxs-lookup"><span data-stu-id="f091c-355">Because extra memory is allocated from the system's local heap, an application should use extra window memory sparingly.</span></span> <span data-ttu-id="f091c-356">如果要求的額外視窗記憶體數量大於40個位元組， [**RegisterClassEx**](/windows/win32/api/winuser/nf-winuser-registerclassexa) 函式會失敗。</span><span class="sxs-lookup"><span data-stu-id="f091c-356">The [**RegisterClassEx**](/windows/win32/api/winuser/nf-winuser-registerclassexa) function fails if the amount of extra window memory requested is greater than 40 bytes.</span></span> <span data-ttu-id="f091c-357">如果應用程式需要超過40個位元組，它應該配置自己的記憶體，並將記憶體指標儲存在額外的視窗記憶體中。</span><span class="sxs-lookup"><span data-stu-id="f091c-357">If an application requires more than 40 bytes, it should allocate its own memory and store a pointer to the memory in the extra window memory.</span></span>

<span data-ttu-id="f091c-358">[**SetWindowLong**](/windows/win32/api/winuser/nf-winuser-setwindowlonga)函式會將值複製到額外的記憶體。</span><span class="sxs-lookup"><span data-stu-id="f091c-358">The [**SetWindowLong**](/windows/win32/api/winuser/nf-winuser-setwindowlonga) function copies a value to the extra memory.</span></span> <span data-ttu-id="f091c-359">[**GetWindowLong**](/windows/win32/api/winuser/nf-winuser-getwindowlonga)函式會從額外的記憶體中抓取值。</span><span class="sxs-lookup"><span data-stu-id="f091c-359">The [**GetWindowLong**](/windows/win32/api/winuser/nf-winuser-getwindowlonga) function retrieves a value from the extra memory.</span></span> <span data-ttu-id="f091c-360">[**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa)結構的 **cbWndExtra** 成員會指定要配置的額外視窗記憶體量。</span><span class="sxs-lookup"><span data-stu-id="f091c-360">The **cbWndExtra** member of the [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) structure specifies the amount of extra window memory to allocate.</span></span> <span data-ttu-id="f091c-361">未使用記憶體的應用程式必須將 **cbWndExtra** 初始化為零。</span><span class="sxs-lookup"><span data-stu-id="f091c-361">An application that does not use the memory must initialize **cbWndExtra** to zero.</span></span>

 

 
