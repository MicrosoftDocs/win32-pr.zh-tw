---
description: 對使用者而言，系統似乎是開啟或關閉。
ms.assetid: 3d897a88-125e-457f-9ea7-ac2056b0767a
title: 系統電源狀態
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2eb93931326b67c7469b6a8ae256892e2dd77d4b
ms.sourcegitcommit: 9b5faa61c38b2d0c432b7f2dbee8c127b0e28a7e
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/19/2021
ms.locfileid: "122469905"
---
# <a name="system-power-states"></a>系統電源狀態

對使用者而言，系統似乎是開啟或關閉。 沒有其他可偵測的狀態。 不過，系統支援多個電源狀態，對應至進階組態與電源介面 (ACPI) 規格中定義的電源狀態。 這些狀態也有變化，例如混合式睡眠和快速啟動。 本主題將介紹這些狀態，並說明它們彼此之間的關聯性。

> [!NOTE]
> 使用系統服務建立驅動程式或應用程式的系統整合者和開發人員，應該特別注意驅動程式品質問題，例如記憶體流失。 雖然驅動程式品質一直很重要，但核心重新開機之間的時間可能會比舊版作業系統長很多，因為使用者起始睡眠和關機時，核心、驅動程式和服務將會保留並還原，而不會重新開機。

 

下表列出從最高到最低電源耗用量的 ACPI 電源狀態。




| 電源狀態 | ACPI 狀態 | Description | 
|-------------|------------|-------------|
| 運作中<br /> | S0<br /> | 系統完全可用。 未使用的硬體元件可以輸入較低的電源狀態，以節省電源。<br /> | 
| 睡眠<br />  (新式待命) <br /> | S0 低電力閒置<br /> | 某些 SoC 系統支援所謂的低電源閒置狀態，稱為 <a href="/windows-hardware/design/device-experiences/modern-standby">新式待命</a>。 在此狀態下，系統可能會非常快速地從低電源狀態切換至高電源狀態，讓它能夠快速回應硬體和網路事件。 支援新式待命的系統不會使用 S1-S3。<br /> | 
| 睡眠<br /> | S1<br /> S2<br /> S3<br /> | 系統似乎已關閉。 這些狀態中耗用的電源 (S1-S3) 小於 S0 且超過 S4;S3 耗用的電源比 S2 低，而 S2 耗用的電力低於 S1。 系統通常支援這三種狀態的其中一種，而不是全部三種狀態。<br /> 在這些狀態中 (S1-S3) ，動態記憶體會保持重新整理狀態，以維護系統狀態。 某些元件仍維持電源，因此電腦可以從鍵盤、LAN 或 USB 裝置的輸入喚醒。<br />在桌上型電腦上使用的「<em>混合式睡眠</em>」（system）是指系統使用具有 S1-S3 的休眠檔。 休眠檔會儲存系統狀態，以防系統在睡眠時失去電源。<br /><blockquote>[!Note]<br />支援新式待命的 SoC 系統 (低電源閒置狀態) 不使用 S1-S3。</blockquote><br /><br /> | 
| 休眠<br /> | S4<br /> | 系統似乎已關閉。 功率耗用量會縮減為最低層級。 系統會將 volatile 記憶體的內容儲存至休眠檔，以保留系統狀態。 某些元件仍維持電源，因此電腦可以從鍵盤、LAN 或 USB 裝置的輸入喚醒。 如果工作內容儲存在非靜態媒體上，則可以還原。 <br /><em>快速啟動</em> 是在休眠檔案建立之前登出使用者的位置。 這樣可以讓較小的休眠檔案更適合儲存功能較少的系統使用。<br /> | 
| 軟關閉<br /> | S5<br /> | 系統似乎已關閉。 此狀態是由完整關機和啟動週期所組成。<br /> | 
| 機械關閉<br /> | G3<br /> | 系統已完全關閉，且不會使用任何電源。 只有在完整重新開機後，系統才會返回工作狀態。<br /> | 




 

[**系統 \_ 電源 \_ 狀態**](/windows/desktop/api/WinNT/ne-winnt-system_power_state)列舉會定義用來指定系統電源狀態的值。

## <a name="working-state-s0"></a>工作狀態 (S0) 

在工作狀態期間，系統會處於喚醒並正在執行。 簡單來說，裝置是「開啟」。 無論是開啟或關閉畫面，裝置都處於完整執行狀態。 為了節省能源（尤其是在電源供電的裝置上），我們強烈建議您在未使用硬體元件時進行開機。

> [!IMPORTANT]
> 無論狀態為何，都不使用電源關閉的硬體元件。 低功率耗用量是行動裝置取用者的重要考慮。

 

## <a name="sleep-state-modern-standby"></a>睡眠狀態 (新式待命) 

在工作狀態的 S0 低電源閒置模式中（也稱為 [新式待命](/windows-hardware/design/device-experiences/modern-standby)），系統會維持部分執行。 在新式待命期間，只要有適當的網路可用，系統就會隨時保持最新狀態，而且也會在需要即時動作（例如 OS 維護）時喚醒。 新式待命喚醒的速度遠優於 S1-S3。 如需詳細資訊，請參閱 [新式待命](/windows-hardware/design/device-experiences/modern-standby)。

> [!Note]  
> 新式待命僅適用于一些 SoC 系統。 當系統支援時，系統不支援 S1-S3。

 

## <a name="sleep-state-s1-s3"></a>睡眠狀態 (S1-S3) 

系統會根據數個準則進入睡眠狀態，包括使用者或應用程式活動，以及使用者在 **設定** 應用程式的 [**電源 & 睡眠**] 頁面上設定的喜好設定。 根據預設，系統會使用所有啟用的喚醒裝置所支援的最低電源睡眠狀態。 如需系統如何判斷何時進入睡眠狀態的詳細資訊，請參閱 [系統睡眠準則](system-sleep-criteria.md)。

在系統進入睡眠狀態之前，它會判斷適當的睡眠狀態、通知應用程式和驅動程式的暫止轉換，然後將系統轉換成睡眠狀態。 在重大轉換的情況下，例如當達到電力不足閾值時，系統不會通知應用程式和驅動程式。 應用程式必須做好準備，並在系統返回工作狀態時採取適當的動作。

在這些狀態中 (S1-S3) ，動態記憶體會保持重新整理狀態，以維護系統狀態。 某些元件仍維持電源，因此電腦可以從鍵盤、LAN 或 USB 裝置的輸入喚醒。

系統也會從睡眠狀態喚醒，以回應使用者活動或應用程式所定義的喚醒事件。 如需詳細資訊，請參閱 [系統喚醒事件](system-wake-up-events.md)。 系統喚醒所需的時間量，取決於它所喚醒的睡眠狀態。 系統需要更多時間從較低電源的狀態 (S3) ，而不是從較高的電源 (S1) 因為硬體可能必須執行的額外工作 (穩定的電源供應器、重新初始化處理器等等) 。

> [!Caution]  
> 呼叫 [**SetThreadExecutionState**](/windows/desktop/api/Winbase/nf-winbase-setthreadexecutionstate)時，只有在需要系統執行背景工作（例如，將電視內容或串流媒體錄製至其他裝置，而系統似乎處於睡眠狀態）時，才應該使用 **ES \_ 離開模式 \_ 必要** 值。 不需要進行重要背景處理或在可攜式電腦上執行的應用程式不應啟用離開模式，因為它會進入真正的睡眠狀態，以防止系統節省電源。

 

### <a name="hybrid-sleep-s1-s3--hibernation-file"></a>混合式睡眠 (S1-S3 + 休眠檔案) 

「*混合式睡眠*」是一種特殊狀態，也就是睡眠和休眠狀態的組合，這是當系統使用具有 S1-S3 的休眠檔時。 只有在某些系統上才可使用。 啟用時，系統會寫入休眠檔案，但會進入較高的睡眠狀態。 如果在系統睡眠時遺失電源，系統就會從休眠喚醒，這需要較長的時間，但會還原使用者的系統狀態。

## <a name="hibernate-state-s4"></a>休眠狀態 (S4) 

Windows 使用休眠功能來提供快速的啟動體驗。 如果有的話，也可以在行動裝置上使用，藉由在關閉系統之前，提供一種機制來儲存所有使用者的狀態，以延長系統的可用電池壽命。 在休眠轉換中，記憶體的所有內容都會寫入至主要系統磁片磁碟機上的檔案，也就是 *休眠* 檔。 這會保留作業系統、應用程式和裝置的狀態。 在合併記憶體使用量耗用所有實體記憶體的情況下，休眠檔必須夠大，以確保會有空間可儲存實體記憶體的所有內容。 由於資料會寫入至非暫時性的儲存空間，因此 DRAM 不需要維護自我重新整理並可關閉電源，這表示休眠的電源耗用量非常低，幾乎與關閉電源一樣。

在完整關機和開機 (S5) 中，會在下一次開機時將整個使用者會話關機並重新啟動。 相反地，在休眠 (S4) 期間，使用者會話會關閉並儲存使用者狀態。

### <a name="fast-startup-reduced-hibernation-file"></a>快速啟動 (縮減休眠檔案) 

*快速啟動* 是一種關機類型，使用休眠檔來加速後續開機。 在這種關閉類型期間，使用者會先登出，再建立休眠檔。 快速啟動可讓您使用較小的休眠檔，更適合儲存功能較少的系統使用。 如需詳細資訊，請參閱 [休眠檔案類型](#hibernation-file-types)。

當使用 [快速啟動] 時，系統會向使用者顯示，因為已發生完整關機 (S5) ，即使系統真的已透過 S4 完成也是一樣。 這包括系統如何回應裝置喚醒警報。

使用者會話的快速啟動記錄，但是核心 (會話 0) 的內容會寫入硬碟。 這樣可加快開機速度。

若要以程式設計方式起始快速啟動樣式的關機，請使用 **關閉 \_ 混合** 式旗標或 [**ExitWindowsEx**](/windows/desktop/api/winuser/nf-winuser-exitwindowsex)函式搭配 **EWX \_ 混合式 \_ 關機** 旗標來呼叫 [**InitiateShutdown**](/windows/desktop/api/winreg/nf-winreg-initiateshutdowna)函式。

> [!Note]  
> 從 Windows 8 開始，在要求系統關機時，[快速啟動] 是預設的轉換。 當要求系統重新開機 (或應用程式呼叫關機 API) 時，會發生完整關機 (S5) 。

 

### <a name="entering-hibernation"></a>進入休眠

進行休眠要求時，會在系統進入休眠狀態時進行下列步驟：

1.  應用程式和服務會收到通知
2.  驅動程式會收到通知
3.  以壓縮格式將使用者和系統狀態儲存到磁片
4.  已通知固件

> [!Note]  
> 從 Windows 8 開始，系統上的所有核心都是用來壓縮記憶體中的資料，並將資料寫入磁片。

 

若要以程式設計方式起始休眠轉換，請呼叫 [**SetSuspendState**](/windows/desktop/api/PowrProf/nf-powrprof-setsuspendstate) 函式。

### <a name="resuming-from-hibernation"></a>從休眠狀態繼續

當系統從休眠狀態恢復時。

當系統開機時，會在系統從休眠狀態恢復時進行下列步驟。

1.  系統文章
2.  從休眠檔解壓縮和還原系統記憶體
3.  裝置初始化
4.  驅動程式會還原至休眠之前的狀態
5.  服務會還原至休眠之前的狀態
6.  系統變成可供登入

從休眠狀態開始會以類似于 S5 關機的系統 POST 開始。 OS 開機管理程式會偵測到有效的休眠檔，以判斷是否需要從休眠狀態繼續進行。 然後，它會指示系統繼續執行，並還原記憶體和所有架構暫存器的內容。 在從休眠狀態恢復時，系統記憶體的內容會從磁片讀取、解壓縮和還原，讓系統處於休眠狀態時的確切狀態中。 還原記憶體之後，會重新開機裝置，電腦會回到執行狀態，準備好進行登入。

> [!Note]  
> 從休眠狀態繼續進行時，驅動程式和服務會收到通知，但不會重新開機。 它們只會還原至休眠之前的狀態。

 

### <a name="hibernation-file-types"></a>休眠檔案類型

休眠檔案用於互動式睡眠、快速啟動和標準休眠 (，如先前的) 所述。 有兩種類型可依大社區分，也就是完整和縮減大小的休眠檔。 只有快速啟動才能使用較少的休眠檔。



| 休眠檔案類型 | 預設大小           | 支援。。。                           |
|-----------------------|------------------------|---------------------------------------|
| 完整                  | 40% 的實體記憶體 | 休眠、混合式睡眠、快速啟動 |
| 減少               | 20% 的實體記憶體 | 快速啟動                          |



 

若要確認或變更所用休眠檔案的類型，請執行 **powercfg.exe** 公用程式。 下列範例示範如何。 如需詳細資訊，請執行 `powercfg /? hibernate`。



| 範例                                                                        | 描述                                                                                                                                                                                                                                                                                                                                                   |
|-------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `powercfg /a`<br/>                                                | **確認休眠檔案類型。** 使用完整休眠檔案時，會產生休眠狀態，表示休眠是可用的選項。 使用較少的休眠檔案時，結果會顯示為不支援休眠。 如果系統完全沒有休眠檔，則結果會指出尚未啟用休眠。<br/> |
| `powercfg /h /type full`<br/>                                     | **將休眠檔案類型變更為 [完整]。** 不建議在儲存體低於32GB 的系統上使用此選項。<br/>                                                                                                                                                                                                                        |
| `powercfg /h /type reduced`<br/>                                  | **將休眠檔案類型變更為 [已縮減]。** 如果命令傳回「參數不正確」，請參閱下列範例。<br/>                                                                                                                                                                                                        |
| `powercfg /h /size 0`<br/> `powercfg /h /type reduced`<br/> | **請重試將休眠檔案類型變更為「減少」。** 如果休眠檔設為大於40% 的自訂大小，您必須先將檔案大小設定為零。 然後重試縮減的設定。<br/>                                                                                                                       |



 

## <a name="soft-off-state-s5"></a> (S5) 的軟關閉狀態

當系統完全關閉而沒有休眠檔案時，就會進入「軟關閉」狀態。 軟關閉也稱為「完整關機」。 在完整關機和開機期間，會在下一次開機時將整個使用者會話關機並重新啟動。 因此，從這個狀態開機/啟動的時間會比 S1-S4 長很多。 當要求系統重新開機 (或應用程式呼叫關機 API) 時，會發生完整關機 (S5) 。

## <a name="mechanical-off-state-g3"></a>機械關閉狀態 (G3) 

在此狀態下，系統會完全關閉，且不會使用任何電源。 只有在完整重新開機後，系統才會返回工作狀態。

## <a name="wake-on-lan-behavior"></a>網路喚醒行為

網路介面卡偵測到 WOL 事件 (通常是特殊的乙太網路封包) 時，網路喚醒 (WOL) 功能將電腦從低電源狀態喚醒。

從睡眠 (S3) 或休眠 (S4) 支援 WOL。 不支援從快速啟動或軟關閉 (S5) 關機狀態。 Nic 無法在這些狀態中喚醒，因為使用者不會預期系統會自行喚醒。

> [!Note]  
> 未正式支援的 WOL (S5) 。 不過，在某些系統上的 BIOS 可能會支援提供 nic 以進行喚醒，即使該程式未包含 Windows 也是一樣。

 

## <a name="related-topics"></a>相關主題

<dl> <dt>

[關於電源管理](about-power-management.md)
</dt> </dl>
