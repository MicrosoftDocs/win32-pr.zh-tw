---
title: 狀態伺服器設計考慮
description: 視您的設計而定，您可能需要伺服器來追蹤目前登入網路的使用者。
ms.assetid: 2f8d268b-5518-4ad2-aed6-5971c913db6d
ms.tgt_platform: multiple
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7a0ef654f3641138075acc667d733b20c94c4840
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/16/2019
ms.locfileid: "104372428"
---
# <a name="state-server-design-considerations"></a>狀態伺服器設計考慮

> [!Note]  
> 從 Windows Server 2008 開始， (IAS) 的網際網路驗證服務已重新命名為網路原則伺服器 (NPS) 。 本主題的內容適用于 IAS 和 NPS。 在整個文字中，NPS 是用來參考服務的所有版本，包括原本稱為 IAS 的版本。

 

視您的設計而定，您可能需要伺服器來追蹤目前登入網路的使用者。 狀態伺服器的主要挑戰是讓狀態伺服器資料庫中的資訊與實際登入的使用者保持同步。 如果狀態伺服器中的資訊不同步，當使用者未獲授權時，使用者可能會成功擁有多個會話。 此外，沒有多個會話的使用者可能不小心懲罰。

在執行狀態伺服器時，應考慮下列事項：

-   狀態伺服器必須在幾秒鐘內讓決策上線。 基於這個理由，狀態伺服器需要可擴充的基礎結構，每秒可支援許多更新和查詢。 關係資料庫不適合同時更新的大型查詢。 關係資料庫主要是為了保持資料一致，並為所有取用者提供一致的資料檢視。 它們並不是為了快速更新所建立。
-   多個物件之間的更新交易一致性並不重要。 這是因為狀態伺服器可容忍很小的商機視窗。 但是，如果其中一部 RADIUS 伺服器在更新過程中關閉，則單一更新的交易一致性很重要，可減少狀態伺服器處於不一致狀態的機會。
-   持續性 (將網路的狀態儲存至持續性儲存體) 不重要，因為持續性資訊很快就會與網路的實際狀態進行同步處理。
-   如果網路上支援 ISDN 或其他形式的多重連結，則狀態伺服器應該能夠處理使用這些功能的案例。

其中一個可能的設計是同時執行驗證延伸模組 DLL 和授權延伸 DLL。 這些 Dll 都可以透過網路與資料庫進行通訊。 授權延伸模組 DLL 可以使用目前登入網路的相關資訊來更新資料庫。 驗證延伸模組 DLL 可以查詢資料庫以取得這項資訊，以決定是要接受還是拒絕特定使用者的驗證要求;如果使用者已登入，則會拒絕要求。

讓授權延伸模組 DLL 更新狀態伺服器資料庫的優點是，授權延伸模組 DLL 可以存取已驗證使用者的詳細資訊。 授權延伸模組 DLL 可從 NPS 授權機制存取所有的授權屬性。 例如，有些使用者可能會有允許他們有多個會話的授權。 狀態伺服器應該將這類使用者視為特殊案例。

 

 




