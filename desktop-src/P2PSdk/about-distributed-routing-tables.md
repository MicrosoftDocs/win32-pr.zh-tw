---
description: 分散式路由表 (的 DRT) 存在作為合作節點的網格，其中每個節點都是使用 DRT API 的應用程式實例。
ms.assetid: 257ad7ea-636b-45f2-b514-4a213939d107
title: 關於分散式路由表
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: dc8e82b25fee0bb6733bb21db82193d14e6cc8d621148b6d5c671fb04a3b2d85
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/11/2021
ms.locfileid: "119011836"
---
# <a name="about-distributed-routing-tables"></a>關於分散式路由表

分散式路由表 (的 DRT) 存在作為合作節點的網格，其中每個節點都是使用 DRT API 的應用程式實例。 發佈金鑰的節點負責協助其他節點發布和解析金鑰。 節點也可以參與「僅解決」的方式，這不需要它們來協助對等。 DRT 通訊協定會透過 UDP/IPv6 傳輸來執行。

一個節點，它會發佈金鑰組建，並維護網格中其他節點的本機路由表。 此路由表經過優化，可讓節點藉由直接在本機路由表中尋找金鑰，或要求其他節點以接近目標的方式來發佈索引鍵，來快速找到網格中的特定索引鍵。 此動作會重複，直到找到必要的索引鍵或節點判斷沒有這類金鑰存在為止。

DRT 金鑰是256位不帶正負號的整數。 索引鍵之間的接近程度會以兩者之間的數值差異來定義。 將 DRT keyspace 視為圓形。 例如，第一個可能的索引鍵值和最後一個可能的金鑰值視為相鄰。

在安全的 DRT 中，需要有節點來驗證它們所發佈的金鑰。 當您初始化了 DRT 時，必須使用 DRT API 來設定節點用來驗證金鑰的機制。 這是藉由選擇適用于 DRT 的安全性提供者來完成。 安全性提供者是一個模組，可產生用來驗證金鑰的權杖，以及驗證其他節點所產生的權杖。 它必須執行本檔中定義的安全性提供者介面。 Windows 7 DRT 隨附兩個完全實行的安全性提供者，可用來建立 Windows 的應用程式。

在初始化期間，應用程式也必須提供啟動程式提供者的 DRT。 啟動載入器提供者是一個模組，可抓取在 DRT 網狀中已存在之節點的網路端點，並在建立新節點時由該模組呼叫。 和安全性提供者模組一樣，啟動載入器提供者必須執行妥善定義的介面。 Windows 7 DRT 隨附兩個完全實行的啟動程式提供者。

DRT 會考慮金鑰的直屬鄰居（特殊）。 這五個最接近的索引鍵會以較小的數位，而最接近的五個索引鍵則會大於已發佈的按鍵格式 DRT 會透過 DRT API，將變更回報給某個金鑰的分葉組。

## <a name="drt-life-cycle-and-state-transitions"></a>DRT 生命週期和狀態轉換

應用程式可以使用 [**DrtOpen**](/windows/desktop/api/drt/nf-drt-drtopen) 函式來初始化本機的 DRT 實例。 此函式會觸發開機載入程式，其中的 DRT API 會在啟動載入器提供者上呼叫，以瞭解已參與 DRT 的其他節點的金鑰和網路端點。 如果啟動載入器提供者成功找到至少一個其他節點，則 DRT 會進入 [DRT \_ 主動] 狀態。 在此狀態下，應用程式可以搜尋由其他節點發布的金鑰，並且可以發佈可以解析的金鑰。 如果啟動載入器提供者無法成功找出其他節點，則 DRT 會進入「僅限 DRT」 \_ 狀態。 此 DRT 將保持在「僅限在 DRT」 \_ 狀態，並會嘗試定期啟動以找出對等，並移至「drt \_ 主動」狀態。

節點可以從「DRT 主動」轉換至這些狀態 \_ 。

| 生命週期狀態 | 條件                                                                                                                                                                                                                                                                                                                                                                                                                 |
|------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 單獨的 DRT \_       | 本機節點尚未探索到在 DRT 中的其他節點。 處於此狀態時，節點會繼續接聽在 DRT 內的其他節點。<br/> 如果另一個節點加入了 DRT，本機節點將會轉換為 [DRT \_ 主動] 狀態。 如果網路已關閉，則會轉換為「 \_ 無法進行 \_ 網路」。 發生嚴重錯誤時，節點將會轉換為「DRT 錯誤」 \_ 狀態。<br/> |
| DRT \_ 無 \_ 網路 | 當節點失去網路連線時，它會轉換為「 \_ 無 \_ 網路」狀態。 此時，應用程式可以等待還原網路連線，並可關閉 DRT。<br/>                                                                                                                                                                                                                    |
| DRT \_ 發生錯誤     | 本機節點內發生嚴重錯誤。 例如，如果本機電腦用盡實體記憶體。<br/> 當節點進入此狀態時，應用程式必須呼叫 [**DrtClose**](/windows/desktop/api/drt/nf-drt-drtclose) API、更正問題，然後使用 [**DrtOpen**](/windows/desktop/api/drt/nf-drt-drtopen)重新初始化該 DRT。<br/>                                                                                                   |



 

## <a name="related-topics"></a>相關主題

<dl> <dt>

[使用分散式路由資料表 API](using-the-distributed-routing-table-api.md)
</dt> <dt>

[分散式路由資料表 API 參考](distributed-routing-table-api-reference.md)
</dt> </dl>

 

 




