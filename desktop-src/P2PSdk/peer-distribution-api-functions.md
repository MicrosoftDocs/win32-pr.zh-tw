---
description: Microsoft 對等散發服務支援取用者角色和發行者角色案例的功能。
ms.assetid: 3f5af891-4f5d-4523-8fe6-47fc6ff13b35
title: 對等散發 API 函數
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b2532ad8bf5cbb14e18bd16a14bb1be2d79c1791
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/07/2021
ms.locfileid: "107000282"
---
# <a name="peer-distribution-api-functions"></a><span data-ttu-id="81407-103">對等散發 API 函數</span><span class="sxs-lookup"><span data-stu-id="81407-103">Peer Distribution API Functions</span></span>

<span data-ttu-id="81407-104">Microsoft 對等散發服務支援取用者角色和發行者角色案例的功能。</span><span class="sxs-lookup"><span data-stu-id="81407-104">The Microsoft Peer Distribution service supports functions for both consumer role and publisher role scenarios.</span></span>

## <a name="the-following-functions-are-common-in-both-client-and-server-scenarios"></a><span data-ttu-id="81407-105">下列函式在「用戶端」和「伺服器」案例中都很常見。</span><span class="sxs-lookup"><span data-stu-id="81407-105">The following functions are common in both "client" and "server" scenarios.</span></span>



| <span data-ttu-id="81407-106">一般函數</span><span class="sxs-lookup"><span data-stu-id="81407-106">Common Functions</span></span>                                                                                       | <span data-ttu-id="81407-107">Description</span><span class="sxs-lookup"><span data-stu-id="81407-107">Description</span></span>                                                                                                     |
|--------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="81407-108">**PeerDistStartup**</span><span class="sxs-lookup"><span data-stu-id="81407-108">**PeerDistStartup**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdiststartup)                                                             | <span data-ttu-id="81407-109">建立新的 **PEERDIST \_ 實例 \_ 控制碼** 實例，必須傳遞給所有其他對等散發 api。</span><span class="sxs-lookup"><span data-stu-id="81407-109">Creates a new **PEERDIST\_INSTANCE\_HANDLE** instance which must be passed to all other Peer Distribution APIs.</span></span> |
| [<span data-ttu-id="81407-110">**PeerDistShutdown**</span><span class="sxs-lookup"><span data-stu-id="81407-110">**PeerDistShutdown**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistshutdown)                                                           | <span data-ttu-id="81407-111">釋放呼叫 [**PeerDistStartup**](/windows/desktop/api/PeerDist/nf-peerdist-peerdiststartup)所配置的資源。</span><span class="sxs-lookup"><span data-stu-id="81407-111">Releases resources allocated by the call to [**PeerDistStartup**](/windows/desktop/api/PeerDist/nf-peerdist-peerdiststartup).</span></span>                         |
| [<span data-ttu-id="81407-112">**PeerDistGetStatus**</span><span class="sxs-lookup"><span data-stu-id="81407-112">**PeerDistGetStatus**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistgetstatus)                                                         | <span data-ttu-id="81407-113">傳回對等散發服務的目前狀態。</span><span class="sxs-lookup"><span data-stu-id="81407-113">Returns the current status of Peer Distribution service.</span></span>                                                        |
| [<span data-ttu-id="81407-114">**PeerDistGetStatusEx**</span><span class="sxs-lookup"><span data-stu-id="81407-114">**PeerDistGetStatusEx**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistgetstatusex)                                                     | <span data-ttu-id="81407-115">傳回對等散發服務的目前狀態和功能。</span><span class="sxs-lookup"><span data-stu-id="81407-115">Returns the current status and capabilities of the Peer Distribution service.</span></span>                                   |
| [<span data-ttu-id="81407-116">**PeerDistGetOverlappedResult**</span><span class="sxs-lookup"><span data-stu-id="81407-116">**PeerDistGetOverlappedResult**</span></span>](/windows/desktop/api/peerdist/nf-peerdist-peerdistgetoverlappedresult)                                     | <span data-ttu-id="81407-117">捕獲非同步作業的結果。</span><span class="sxs-lookup"><span data-stu-id="81407-117">Retrieves the results of asynchronous operations.</span></span>                                                               |
| [<span data-ttu-id="81407-118">**PeerDistRegisterForStatusChangeNotification**</span><span class="sxs-lookup"><span data-stu-id="81407-118">**PeerDistRegisterForStatusChangeNotification**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistregisterforstatuschangenotification)     | <span data-ttu-id="81407-119">要求對等散發服務在狀態變更發生時通知呼叫者。</span><span class="sxs-lookup"><span data-stu-id="81407-119">Requests that the Peer Distribution service notify the caller when a status change occurs.</span></span>                      |
| [<span data-ttu-id="81407-120">**PeerDistRegisterForStatusChangeNotificationEx**</span><span class="sxs-lookup"><span data-stu-id="81407-120">**PeerDistRegisterForStatusChangeNotificationEx**</span></span>](/windows/desktop/api/peerdist/nf-peerdist-peerdistregisterforstatuschangenotificationex) | <span data-ttu-id="81407-121">要求對等散發服務在狀態變更發生時通知呼叫者。</span><span class="sxs-lookup"><span data-stu-id="81407-121">Requests that the Peer Distribution service notify the caller when a status change occurs.</span></span>                      |
| [<span data-ttu-id="81407-122">**PeerDistUnregisterForStatusChangeNotification**</span><span class="sxs-lookup"><span data-stu-id="81407-122">**PeerDistUnregisterForStatusChangeNotification**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistunregisterforstatuschangenotification) | <span data-ttu-id="81407-123">取消註冊與所提供控制碼相關聯之會話的狀態變更通知。</span><span class="sxs-lookup"><span data-stu-id="81407-123">Deregisters the status change notification for the session associated with the supplied handle.</span></span>                 |



 

## <a name="the-following-functions-are-only-supported-in-client-scenarios"></a><span data-ttu-id="81407-124">只有在「用戶端」案例中才支援下列函數。</span><span class="sxs-lookup"><span data-stu-id="81407-124">The following functions are only supported in "client" scenarios.</span></span>



| <span data-ttu-id="81407-125">用戶端函數</span><span class="sxs-lookup"><span data-stu-id="81407-125">Client Functions</span></span>                                                                             | <span data-ttu-id="81407-126">Description</span><span class="sxs-lookup"><span data-stu-id="81407-126">Description</span></span>                                                                                                                                                                                                                                                                                                                                      |
|----------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="81407-127">**PeerDistClientOpenContent**</span><span class="sxs-lookup"><span data-stu-id="81407-127">**PeerDistClientOpenContent**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientopencontent)                               | <span data-ttu-id="81407-128">開啟並傳回要參考該內容的 **PEERDIST \_ 內容 \_ 控制碼** 。</span><span class="sxs-lookup"><span data-stu-id="81407-128">Opens and returns a **PEERDIST\_CONTENT\_HANDLE** to reference that content.</span></span>                                                                                                                                                                                                                                                                     |
| [<span data-ttu-id="81407-129">**PeerDistClientCloseContent**</span><span class="sxs-lookup"><span data-stu-id="81407-129">**PeerDistClientCloseContent**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientclosecontent)                             | <span data-ttu-id="81407-130">關閉 **PEERDIST \_ 內容 \_ 控制碼**。</span><span class="sxs-lookup"><span data-stu-id="81407-130">Closes the **PEERDIST\_CONTENT\_HANDLE**.</span></span>                                                                                                                                                                                                                                                                                                        |
| [<span data-ttu-id="81407-131">**PeerDistClientGetInformationByHandle**</span><span class="sxs-lookup"><span data-stu-id="81407-131">**PeerDistClientGetInformationByHandle**</span></span>](/windows/desktop/api/peerdist/nf-peerdist-peerdistclientgetinformationbyhandle)         | <span data-ttu-id="81407-132">從對等散發服務取得特定內容控制碼的其他資訊。</span><span class="sxs-lookup"><span data-stu-id="81407-132">Retrieves additional information from the Peer Distribution service for a specific content handle.</span></span>                                                                                                                                                                                                                                               |
| [<span data-ttu-id="81407-133">**PeerDistClientAddContentInformation**</span><span class="sxs-lookup"><span data-stu-id="81407-133">**PeerDistClientAddContentInformation**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientaddcontentinformation)           | <span data-ttu-id="81407-134">新增與 **PEERDIST \_ 內容 \_ 控制碼** 相關聯的內容資訊。</span><span class="sxs-lookup"><span data-stu-id="81407-134">Adds content information which is then associated with the **PEERDIST\_CONTENT\_HANDLE**.</span></span> <span data-ttu-id="81407-135">可與任何內容資訊相關聯的 **PEERDIST \_ 內容 \_ 控制碼** 。</span><span class="sxs-lookup"><span data-stu-id="81407-135">A **PEERDIST\_CONTENT\_HANDLE** can be associated with any content information.</span></span>                                                                                                                                                                        |
| [<span data-ttu-id="81407-136">**PeerDistClientCompleteContentInformation**</span><span class="sxs-lookup"><span data-stu-id="81407-136">**PeerDistClientCompleteContentInformation**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientcompletecontentinformation) | <span data-ttu-id="81407-137">指出內容資訊的結尾。</span><span class="sxs-lookup"><span data-stu-id="81407-137">Indicates the end of the content information.</span></span>                                                                                                                                                                                                                                                                                                    |
| [<span data-ttu-id="81407-138">**PeerDistClientAddData**</span><span class="sxs-lookup"><span data-stu-id="81407-138">**PeerDistClientAddData**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientadddata)                                       | <span data-ttu-id="81407-139">用來將內容提供給本機快取。</span><span class="sxs-lookup"><span data-stu-id="81407-139">Used to supply content to the local cache.</span></span> <span data-ttu-id="81407-140">這通常會在本機網路上找不到資料時完成，如 [**PeerDistClientBlockRead**](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientblockread) 或 [**PeerDistClientStreamRead**](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientstreamread) 完成時所示，但 **發生錯誤 \_ 超時** 或錯誤的 **\_ \_ \_ 資料遺失**。</span><span class="sxs-lookup"><span data-stu-id="81407-140">Typically this is done when data could not be found on the local network as indicated when either [**PeerDistClientBlockRead**](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientblockread) or [**PeerDistClientStreamRead**](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientstreamread) complete with **ERROR\_TIMEOUT** or **PEERDIST\_ERROR\_MISSING\_DATA**..</span></span> |
| [<span data-ttu-id="81407-141">**PeerDistClientBlockRead**</span><span class="sxs-lookup"><span data-stu-id="81407-141">**PeerDistClientBlockRead**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientblockread)                                   | <span data-ttu-id="81407-142">提供內容資料流程的隨機存取。</span><span class="sxs-lookup"><span data-stu-id="81407-142">Provides random access to the content stream.</span></span>                                                                                                                                                                                                                                                                                                    |
| [<span data-ttu-id="81407-143">**PeerDistClientStreamRead**</span><span class="sxs-lookup"><span data-stu-id="81407-143">**PeerDistClientStreamRead**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientstreamread)                                 | <span data-ttu-id="81407-144">提供內容資料流程的順序存取。</span><span class="sxs-lookup"><span data-stu-id="81407-144">Provides sequential access to the content stream.</span></span>                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="81407-145">**PeerDistClientFlushContent**</span><span class="sxs-lookup"><span data-stu-id="81407-145">**PeerDistClientFlushContent**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientflushcontent)                             | <span data-ttu-id="81407-146">移除先前已新增至本機對等散發系統的內容。</span><span class="sxs-lookup"><span data-stu-id="81407-146">Removes content that has been previously added to the local Peer Distribution system.</span></span>                                                                                                                                                                                                                                                            |
| [<span data-ttu-id="81407-147">**PeerDistClientCancelAsyncOperation**</span><span class="sxs-lookup"><span data-stu-id="81407-147">**PeerDistClientCancelAsyncOperation**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientcancelasyncoperation)             | <span data-ttu-id="81407-148">取消與重 [迭結構相關](/windows/win32/api/minwinbase/ns-minwinbase-overlapped) 聯的非同步作業，以及 [**PeerDistClientOpenContent**](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientopencontent)所傳回的內容控制碼。</span><span class="sxs-lookup"><span data-stu-id="81407-148">Cancels asynchronous operation associated with an [OVERLAPPED](/windows/win32/api/minwinbase/ns-minwinbase-overlapped) structure and the content handle returned by [**PeerDistClientOpenContent**](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientopencontent).</span></span>                                                                                                                     |



 

## <a name="the-following-functions-are-only-supported-in-server-scenarios"></a><span data-ttu-id="81407-149">只有在「伺服器」案例中才支援下列函數。</span><span class="sxs-lookup"><span data-stu-id="81407-149">The following functions are only supported in "server" scenarios.</span></span>



| <span data-ttu-id="81407-150">伺服器函數</span><span class="sxs-lookup"><span data-stu-id="81407-150">Server Functions</span></span>                                                                             | <span data-ttu-id="81407-151">Description</span><span class="sxs-lookup"><span data-stu-id="81407-151">Description</span></span>                                                                                                                                                                                        |
|----------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="81407-152">**PeerDistServerPublishStream**</span><span class="sxs-lookup"><span data-stu-id="81407-152">**PeerDistServerPublishStream**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistserverpublishstream)                           | <span data-ttu-id="81407-153">建立可與 [**PeerDistServerPublishAddToStream**](/windows/desktop/api/PeerDist/nf-peerdist-peerdistserverpublishaddtostream)搭配使用的 **PEERDIST \_ 資料流程 \_ 控制碼**，以建立內容資料流程的內容資訊。</span><span class="sxs-lookup"><span data-stu-id="81407-153">Creates the **PEERDIST\_STREAM\_HANDLE** which can be used with [**PeerDistServerPublishAddToStream**](/windows/desktop/api/PeerDist/nf-peerdist-peerdistserverpublishaddtostream) to create content information for the content stream.</span></span> |
| [<span data-ttu-id="81407-154">**PeerDistServerPublishAddToStream**</span><span class="sxs-lookup"><span data-stu-id="81407-154">**PeerDistServerPublishAddToStream**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistserverpublishaddtostream)                 | <span data-ttu-id="81407-155">將資料加入至由 PeerDist 資料流程控制碼所參考的資料流程。</span><span class="sxs-lookup"><span data-stu-id="81407-155">Adds data to the stream referenced by the PeerDist stream handle.</span></span>                                                                                                                                  |
| [<span data-ttu-id="81407-156">**PeerDistServerPublishCompleteStream**</span><span class="sxs-lookup"><span data-stu-id="81407-156">**PeerDistServerPublishCompleteStream**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistserverpublishcompletestream)           | <span data-ttu-id="81407-157">呼叫以表示所有資料都已新增至資料流程。</span><span class="sxs-lookup"><span data-stu-id="81407-157">Called to indicate that all data has been added to the stream.</span></span>                                                                                                                                     |
| [<span data-ttu-id="81407-158">**PeerDistServerCloseStreamHandle**</span><span class="sxs-lookup"><span data-stu-id="81407-158">**PeerDistServerCloseStreamHandle**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistserverclosestreamhandle)                   | <span data-ttu-id="81407-159">關閉資料流程控制碼。</span><span class="sxs-lookup"><span data-stu-id="81407-159">Closes the stream handle.</span></span>                                                                                                                                                                          |
| [<span data-ttu-id="81407-160">**PeerDistServerUnpublish**</span><span class="sxs-lookup"><span data-stu-id="81407-160">**PeerDistServerUnpublish**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistserverunpublish)                                   | <span data-ttu-id="81407-161">Unpublishes 對等散發服務中先前發行的內容。</span><span class="sxs-lookup"><span data-stu-id="81407-161">Unpublishes previously published content in the Peer Distribution service.</span></span>                                                                                                                         |
| [<span data-ttu-id="81407-162">**PeerDistServerOpenContentInformation**</span><span class="sxs-lookup"><span data-stu-id="81407-162">**PeerDistServerOpenContentInformation**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistserveropencontentinformation)         | <span data-ttu-id="81407-163">開啟已發佈內容的 **PEERDIST \_ CONTENTINFO \_ 控制碼** 。</span><span class="sxs-lookup"><span data-stu-id="81407-163">Opens a **PEERDIST\_CONTENTINFO\_HANDLE** for published content.</span></span>                                                                                                                                   |
| [<span data-ttu-id="81407-164">**PeerDistServerOpenContentInformationEx**</span><span class="sxs-lookup"><span data-stu-id="81407-164">**PeerDistServerOpenContentInformationEx**</span></span>](/windows/desktop/api/peerdist/nf-peerdist-peerdistserveropencontentinformationex)     | <span data-ttu-id="81407-165">開啟已發佈內容的 **PEERDIST \_ CONTENTINFO \_ 控制碼** 。</span><span class="sxs-lookup"><span data-stu-id="81407-165">Opens a **PEERDIST\_CONTENTINFO\_HANDLE** for published content.</span></span>                                                                                                                                   |
| [<span data-ttu-id="81407-166">**PeerDistServerRetrieveContentInformation**</span><span class="sxs-lookup"><span data-stu-id="81407-166">**PeerDistServerRetrieveContentInformation**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistserverretrievecontentinformation) | <span data-ttu-id="81407-167">抓取與已發佈內容相關聯的內容資訊。</span><span class="sxs-lookup"><span data-stu-id="81407-167">Retrieves the content information associated with published content.</span></span>                                                                                                                               |
| [<span data-ttu-id="81407-168">**PeerDistServerCloseContentInformation**</span><span class="sxs-lookup"><span data-stu-id="81407-168">**PeerDistServerCloseContentInformation**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistserverclosecontentinformation)       | <span data-ttu-id="81407-169">**PEERDIST \_PeerDistServerOpenContentInformation 開啟的 CONTENTINFO \_ 控制碼**。 [](/windows/desktop/api/PeerDist/nf-peerdist-peerdistserveropencontentinformation)</span><span class="sxs-lookup"><span data-stu-id="81407-169">**PEERDIST\_CONTENTINFO\_HANDLE** opened by [**PeerDistServerOpenContentInformation**](/windows/desktop/api/PeerDist/nf-peerdist-peerdistserveropencontentinformation).</span></span>                                                                  |
| [<span data-ttu-id="81407-170">**PeerDistServerCancelAsyncOperation**</span><span class="sxs-lookup"><span data-stu-id="81407-170">**PeerDistServerCancelAsyncOperation**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistservercancelasyncoperation)             | <span data-ttu-id="81407-171">取消與內容 [識別碼和重](/windows/win32/api/minwinbase/ns-minwinbase-overlapped) 迭結構相關聯的非同步作業。</span><span class="sxs-lookup"><span data-stu-id="81407-171">Cancels the asynchronous operation associated with the content identifier and [OVERLAPPED](/windows/win32/api/minwinbase/ns-minwinbase-overlapped) structure.</span></span>                                             |



 

 

 
