---
description: 磁片區物件
ms.assetid: 92013015-b0f5-4b92-937b-c2637f65810c
title: 磁片區物件
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4e47092a237e7b0e9441b08c410d95d0836dbdb7
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/08/2021
ms.locfileid: "106985155"
---
# <a name="volume-object"></a><span data-ttu-id="e9a9a-103">磁片區物件</span><span class="sxs-lookup"><span data-stu-id="e9a9a-103">Volume Object</span></span>

<span data-ttu-id="e9a9a-104">\[從 Windows 8 和 Windows Server 2012 開始， [虛擬磁碟服務](virtual-disk-service-portal.md) COM 介面會被 [Windows 儲存體管理 API](/previous-versions/windows/desktop/stormgmt/windows-storage-management-api-portal)取代。\]</span><span class="sxs-lookup"><span data-stu-id="e9a9a-104">\[Beginning with Windows 8 and Windows Server 2012, the [Virtual Disk Service](virtual-disk-service-portal.md) COM interface is superseded by the [Windows Storage Management API](/previous-versions/windows/desktop/stormgmt/windows-storage-management-api-portal).\]</span></span>

<span data-ttu-id="e9a9a-105">磁片區物件會建立軟體提供者所建立之邏輯儲存體單位的模型，並以磁片的形式呈現給檔案系統。</span><span class="sxs-lookup"><span data-stu-id="e9a9a-105">A volume object models a logical storage unit that is created by a software provider and presented to the file system as a disk.</span></span> <span data-ttu-id="e9a9a-106">每個磁片區都包含至少一個磁片區 plex，而該磁片區是由一或多個磁片的範圍所組成。</span><span class="sxs-lookup"><span data-stu-id="e9a9a-106">Each volume comprises at least one volume plex, which is in turn composed of extents from one or more disks.</span></span>

## <a name="volume-types"></a><span data-ttu-id="e9a9a-107">磁碟區類型</span><span class="sxs-lookup"><span data-stu-id="e9a9a-107">Volume Types</span></span>

<span data-ttu-id="e9a9a-108">VDS 支援五種磁片區類型：簡單、跨距、等量、鏡像，以及具有同位的等量。</span><span class="sxs-lookup"><span data-stu-id="e9a9a-108">VDS supports five volume types: simple, spanned, striped, mirrored, and striped with parity.</span></span> <span data-ttu-id="e9a9a-109">簡單、跨距和等量磁片區無法容錯;鏡像和同位磁片區具有容錯能力。</span><span class="sxs-lookup"><span data-stu-id="e9a9a-109">Simple, spanned, and striped volumes are non-fault tolerant; mirrored and parity volumes are fault tolerant.</span></span> <span data-ttu-id="e9a9a-110">本節的其餘部分將說明每個 VDS 磁片區類型。</span><span class="sxs-lookup"><span data-stu-id="e9a9a-110">The remainder of this section describes each of the VDS volume types.</span></span>

-   <span data-ttu-id="e9a9a-111">簡單磁片區是實體磁片的一部分，其運作方式就如同實際的個別單元一樣。</span><span class="sxs-lookup"><span data-stu-id="e9a9a-111">A simple volume is a portion of a physical disk that functions as though it were a physically separate unit.</span></span> <span data-ttu-id="e9a9a-112">簡單磁碟區可以包含磁碟上的單一區域，或是同一個磁碟中互相連結的多重區域。</span><span class="sxs-lookup"><span data-stu-id="e9a9a-112">A simple volume can consist of a single region on a disk or multiple regions of the same disk that are linked together.</span></span>
-   <span data-ttu-id="e9a9a-113">跨距磁片區會將多個磁片的未配置空間區域結合為一個邏輯磁片區，讓您更有效率地使用多磁片系統上的所有空間和所有磁碟機號。</span><span class="sxs-lookup"><span data-stu-id="e9a9a-113">A spanned volume combines areas of unallocated space from multiple disks into one logical volume, allowing you to more efficiently use all of the space and all the drive letters on a multiple-disk system.</span></span>
-   <span data-ttu-id="e9a9a-114">建立等量磁片區的方式是將兩個或多個磁片上的可用空間區域組合成一個邏輯磁片區。</span><span class="sxs-lookup"><span data-stu-id="e9a9a-114">A striped volume is created by combining areas of free space on two or more disks into one logical volume.</span></span> <span data-ttu-id="e9a9a-115">等量磁片區使用 RAID-0，這會將資料分割到多個磁片上。</span><span class="sxs-lookup"><span data-stu-id="e9a9a-115">Striped volumes use RAID-0, which stripes data across multiple disks.</span></span> <span data-ttu-id="e9a9a-116">等量磁片區無法擴充或鏡像，且不提供容錯功能。</span><span class="sxs-lookup"><span data-stu-id="e9a9a-116">Striped volumes cannot be extended or mirrored, and do not offer fault tolerance.</span></span> <span data-ttu-id="e9a9a-117">如果其中一個包含等量磁片區的磁片失敗，整個磁片區將會失敗。</span><span class="sxs-lookup"><span data-stu-id="e9a9a-117">If one of the disks containing a striped volume fails, the entire volume fails.</span></span> <span data-ttu-id="e9a9a-118">建立等量磁片區時，最好使用大小、型號和製造商相同的磁片。</span><span class="sxs-lookup"><span data-stu-id="e9a9a-118">When creating striped volumes, it is best to use disks that are of the same size, model, and manufacturer.</span></span>
-   <span data-ttu-id="e9a9a-119">鏡像磁片區是一種容錯磁片區，可使用磁片區的兩個複本（或 plex）來複製儲存在磁片區上的資料，藉此提供資料冗余。</span><span class="sxs-lookup"><span data-stu-id="e9a9a-119">A mirrored volume is a fault-tolerant volume that provides data redundancy by using two copies, or plexes, of the volume to duplicate the data that is stored on the volume.</span></span> <span data-ttu-id="e9a9a-120">寫入至鏡像磁片區的所有資料都會寫入至位於不同實體磁片上的 plex。</span><span class="sxs-lookup"><span data-stu-id="e9a9a-120">All data that is written to the mirrored volume is written to both plexes, which are located on separate physical disks.</span></span> <span data-ttu-id="e9a9a-121">如果其中一個實體磁片失敗，則故障磁片上的資料會變成無法使用，但系統會使用未受影響的磁片繼續運作。</span><span class="sxs-lookup"><span data-stu-id="e9a9a-121">If one of the physical disks fails, the data on the failed disk becomes unavailable, but the system continues to operate using the unaffected disk.</span></span>
-   <span data-ttu-id="e9a9a-122">具有同位檢查磁片區的等量是容錯磁片區，其中的資料和同位會間歇性地跨三個或多個實體磁片。</span><span class="sxs-lookup"><span data-stu-id="e9a9a-122">A striped with parity volume is a fault-tolerant volume with data and parity striped intermittently across three or more physical disks.</span></span> <span data-ttu-id="e9a9a-123">如果實體磁片的一部分故障，您可以從剩餘的資料和同位重新建立失敗部分的資料。</span><span class="sxs-lookup"><span data-stu-id="e9a9a-123">If a portion of a physical disk fails, you can recreate the data that was on the failed portion from the remaining data and parity.</span></span> <span data-ttu-id="e9a9a-124">此磁片區類型 (也稱為 RAID-5 磁片區) 在大部分活動都包含讀取資料的電腦環境中，這是很好的資料冗余解決方案。</span><span class="sxs-lookup"><span data-stu-id="e9a9a-124">This volume type (also called a RAID-5 volume) is a good solution for data redundancy in a computer environment in which most activity consists of reading data.</span></span>

### <a name="volume-creation"></a><span data-ttu-id="e9a9a-125">磁片區建立</span><span class="sxs-lookup"><span data-stu-id="e9a9a-125">Volume Creation</span></span>

<span data-ttu-id="e9a9a-126">基本和動態軟體提供者支援部分導向的磁片區建立;呼叫端只會指定特別感興趣的屬性，並允許提供者選擇其餘部分。</span><span class="sxs-lookup"><span data-stu-id="e9a9a-126">Basic and dynamic software providers support partially directed volume creation; a caller specifies only those attributes that are of particular interest, and allows the provider to choose the rest.</span></span> <span data-ttu-id="e9a9a-127">VDS 會自動掛接新建立的磁片區，但 Windows Server 2003、Enterprise Edition 和 Windows Server 2003、Datacenter Edition 平臺除外。</span><span class="sxs-lookup"><span data-stu-id="e9a9a-127">VDS mounts a newly created volume automatically, except on Windows Server 2003, Enterprise Edition and Windows Server 2003, Datacenter Edition platforms.</span></span>

### <a name="working-with-volumes"></a><span data-ttu-id="e9a9a-128">使用磁片區</span><span class="sxs-lookup"><span data-stu-id="e9a9a-128">Working with Volumes</span></span>

<span data-ttu-id="e9a9a-129">一律在與提供給它的磁片相同的套件中建立磁片區。</span><span class="sxs-lookup"><span data-stu-id="e9a9a-129">Always create a volume within the same pack as the disks that contribute to it.</span></span> <span data-ttu-id="e9a9a-130">使用 [**IVdsPack：： CreateVolume**](/windows/desktop/api/Vds/nf-vds-ivdspack-createvolume) 方法來建立新的磁片區物件。</span><span class="sxs-lookup"><span data-stu-id="e9a9a-130">Use the [**IVdsPack::CreateVolume**](/windows/desktop/api/Vds/nf-vds-ivdspack-createvolume) method to create a new volume object.</span></span> <span data-ttu-id="e9a9a-131">您可以叫用 [**QueryVolumes**](/windows/desktop/api/Vds/nf-vds-ivdspack-queryvolumes) 方法（也會由 [**IVdsPack**](/windows/desktop/api/Vds/nn-vds-ivdspack)公開），以判斷包含在特定套件內的磁片區。</span><span class="sxs-lookup"><span data-stu-id="e9a9a-131">You can determine the volumes that are contained within a specific pack by invoking the [**QueryVolumes**](/windows/desktop/api/Vds/nf-vds-ivdspack-queryvolumes) method, also exposed by [**IVdsPack**](/windows/desktop/api/Vds/nn-vds-ivdspack).</span></span> <span data-ttu-id="e9a9a-132">呼叫端可以從 **QueryVolumes** 傳回的列舉中選取所需的磁片區物件，以取得特定磁片區的指標。</span><span class="sxs-lookup"><span data-stu-id="e9a9a-132">A caller can get a pointer to a specific volume by selecting the desired volume object from the enumeration that is returned by **QueryVolumes**.</span></span> <span data-ttu-id="e9a9a-133">使用磁片區物件，您可以設定狀態;針對 plex 進行查詢;擴充和壓縮磁片區;新增、中斷和移除 plex;並刪除磁片區。</span><span class="sxs-lookup"><span data-stu-id="e9a9a-133">With a volume object, you can set the status; query for plexes; extend and shrink the volume; add, break, and remove plexes; and delete the volume.</span></span>

<span data-ttu-id="e9a9a-134">除了物件識別碼、名稱和序號之外，磁片區物件屬性還包括磁片區類型、大小、狀態、健康情況、轉換狀態、旗標，以及建議的檔案系統類型。</span><span class="sxs-lookup"><span data-stu-id="e9a9a-134">In addition to an object identifier, a name, and a serial number, volume object properties include the volume type, size, status, health, transition state, flags, and a recommended file system type.</span></span>

<span data-ttu-id="e9a9a-135">下表列出相關的介面、列舉和結構。</span><span class="sxs-lookup"><span data-stu-id="e9a9a-135">The following table lists related interfaces, enumerations, and structures.</span></span>



| <span data-ttu-id="e9a9a-136">類型</span><span class="sxs-lookup"><span data-stu-id="e9a9a-136">Type</span></span>                                              | <span data-ttu-id="e9a9a-137">元素</span><span class="sxs-lookup"><span data-stu-id="e9a9a-137">Element</span></span>                                                                                                                                                                                                               |
|---------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="e9a9a-138">一律由這個物件公開的介面</span><span class="sxs-lookup"><span data-stu-id="e9a9a-138">Interfaces that are always exposed by this object</span></span> | <span data-ttu-id="e9a9a-139">[**IVdsVolume**](/windows/desktop/api/Vds/nn-vds-ivdsvolume)、 [**IVdsVolumeMF**](/windows/desktop/api/Vds/nn-vds-ivdsvolumemf)、 [**IVdsVolumeMF2**](/windows/desktop/api/Vds/nn-vds-ivdsvolumemf2) \* 、 [**IVdsVolumeOnline**](/windows/desktop/api/Vds/nn-vds-ivdsvolumeonline) \* 和 [**IVdsVolumeShrink**](/windows/desktop/api/Vds/nn-vds-ivdsvolumeshrink) \* 。</span><span class="sxs-lookup"><span data-stu-id="e9a9a-139">[**IVdsVolume**](/windows/desktop/api/Vds/nn-vds-ivdsvolume), [**IVdsVolumeMF**](/windows/desktop/api/Vds/nn-vds-ivdsvolumemf), [**IVdsVolumeMF2**](/windows/desktop/api/Vds/nn-vds-ivdsvolumemf2)\*, [**IVdsVolumeOnline**](/windows/desktop/api/Vds/nn-vds-ivdsvolumeonline)\*, and [**IVdsVolumeShrink**](/windows/desktop/api/Vds/nn-vds-ivdsvolumeshrink)\*.</span></span> |
| <span data-ttu-id="e9a9a-140">相關聯的列舉</span><span class="sxs-lookup"><span data-stu-id="e9a9a-140">Associated enumerations</span></span>                           | <span data-ttu-id="e9a9a-141">[**VDS \_磁片區 \_ 旗標**](/windows/desktop/api/Vds/ne-vds-vds_volume_flag)、vds 磁片區 [**\_ \_ 狀態**](/windows/desktop/api/Vds/ne-vds-vds_volume_status)、Vds 磁片區 [**\_ \_ 類型**](/windows/desktop/api/Vds/ne-vds-vds_volume_type)，以及 [**vds \_ 磁片 \_ 區 \_ 類型**](/windows/desktop/api/Vds/ne-vds-vds_disk_extent_type)。</span><span class="sxs-lookup"><span data-stu-id="e9a9a-141">[**VDS\_VOLUME\_FLAG**](/windows/desktop/api/Vds/ne-vds-vds_volume_flag), [**VDS\_VOLUME\_STATUS**](/windows/desktop/api/Vds/ne-vds-vds_volume_status), [**VDS\_VOLUME\_TYPE**](/windows/desktop/api/Vds/ne-vds-vds_volume_type), and [**VDS\_DISK\_EXTENT\_TYPE**](/windows/desktop/api/Vds/ne-vds-vds_disk_extent_type).</span></span>            |
| <span data-ttu-id="e9a9a-142">相關聯的結構</span><span class="sxs-lookup"><span data-stu-id="e9a9a-142">Associated structures</span></span>                             | <span data-ttu-id="e9a9a-143">[**VDS \_磁片 \_**](/windows/desktop/api/Vds/ns-vds-vds_volume_prop) 區和 [**VDS \_ 大量 \_ 通知**](/windows/desktop/api/Vds/ns-vds-vds_volume_notification)。</span><span class="sxs-lookup"><span data-stu-id="e9a9a-143">[**VDS\_VOLUME\_PROP**](/windows/desktop/api/Vds/ns-vds-vds_volume_prop) and [**VDS\_VOLUME\_NOTIFICATION**](/windows/desktop/api/Vds/ns-vds-vds_volume_notification).</span></span>                                                                                                        |



 

<span data-ttu-id="e9a9a-144">**\* Windows Server 2003：** 在 windows Vista 之前，不支援這些介面。</span><span class="sxs-lookup"><span data-stu-id="e9a9a-144">**\*Windows Server 2003:** These interfaces are not supported until Windows Vista.</span></span>

## <a name="related-topics"></a><span data-ttu-id="e9a9a-145">相關主題</span><span class="sxs-lookup"><span data-stu-id="e9a9a-145">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="e9a9a-146">軟體提供者物件</span><span class="sxs-lookup"><span data-stu-id="e9a9a-146">Software Provider Objects</span></span>](software-provider-objects.md)
</dt> </dl>

 

 
