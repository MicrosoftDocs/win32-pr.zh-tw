---
title: '效果 (DirectComposition) '
description: 本主題討論 Microsoft DirectComposition 效果的基本概念，並說明 DirectComposition 支援的效果類型。
ms.assetid: 805B17D2-2F6B-4C25-8C6D-41FFA5DFC774
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4cfd1ca154dcbc7e55ca65cc34d04cfa7d73ccee
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/20/2020
ms.locfileid: "104375672"
---
# <a name="effects-directcomposition"></a><span data-ttu-id="3ccea-103">效果 (DirectComposition) </span><span class="sxs-lookup"><span data-stu-id="3ccea-103">Effects (DirectComposition)</span></span>

> [!NOTE]
> <span data-ttu-id="3ccea-104">針對 Windows 10 上的應用程式，我們建議使用 DirectComposition，而不是使用。</span><span class="sxs-lookup"><span data-stu-id="3ccea-104">For apps on Windows 10, we recommend using Windows.UI.Composition APIs instead of DirectComposition.</span></span> <span data-ttu-id="3ccea-105">如需詳細資訊，請參閱 [使用視覺分層將您的桌面應用程式現代化](/windows/uwp/composition/visual-layer-in-desktop-apps)。</span><span class="sxs-lookup"><span data-stu-id="3ccea-105">For more info, see [Modernize your desktop app using the Visual layer](/windows/uwp/composition/visual-layer-in-desktop-apps).</span></span>

<span data-ttu-id="3ccea-106">本主題討論 Microsoft DirectComposition 效果的基本概念，並說明 DirectComposition 支援的效果類型。</span><span class="sxs-lookup"><span data-stu-id="3ccea-106">This topic discusses the basics of Microsoft DirectComposition effects, and describes the types of effects that DirectComposition supports.</span></span>

<span data-ttu-id="3ccea-107">本主題包含下列幾節：</span><span class="sxs-lookup"><span data-stu-id="3ccea-107">This topic contains the following sections:</span></span>

-   [<span data-ttu-id="3ccea-108">什麼是 DirectComposition 效果？</span><span class="sxs-lookup"><span data-stu-id="3ccea-108">What is a DirectComposition effect?</span></span>](#what-is-a-directcomposition-effect)
-   [<span data-ttu-id="3ccea-109">不透明度</span><span class="sxs-lookup"><span data-stu-id="3ccea-109">Opacity</span></span>](#opacity)
-   [<span data-ttu-id="3ccea-110">3D 透視轉換效果</span><span class="sxs-lookup"><span data-stu-id="3ccea-110">3D perspective transform effects</span></span>](#3d-perspective-transform-effects)
    -   [<span data-ttu-id="3ccea-111">DirectComposition 3D 座標空間</span><span class="sxs-lookup"><span data-stu-id="3ccea-111">The DirectComposition 3D coordinate space</span></span>](#the-directcomposition-3d-coordinate-space)
    -   [<span data-ttu-id="3ccea-112">3D 旋轉轉換效果</span><span class="sxs-lookup"><span data-stu-id="3ccea-112">3D rotation transform effect</span></span>](#3d-rotation-transform-effect)
    -   [<span data-ttu-id="3ccea-113">3D 縮放轉換效果</span><span class="sxs-lookup"><span data-stu-id="3ccea-113">3D scaling transform effect</span></span>](#3d-scaling-transform-effect)
    -   [<span data-ttu-id="3ccea-114">3D 轉譯轉換效果</span><span class="sxs-lookup"><span data-stu-id="3ccea-114">3D translation transform effect</span></span>](#3d-translation-transform-effect)
    -   [<span data-ttu-id="3ccea-115">3D 矩陣轉換效果</span><span class="sxs-lookup"><span data-stu-id="3ccea-115">3D matrix transform effect</span></span>](#3d-matrix-transform-effect)
    -   [<span data-ttu-id="3ccea-116">3D 轉換效果群組</span><span class="sxs-lookup"><span data-stu-id="3ccea-116">3D transform effect group</span></span>](#3d-transform-effect-group)
-   [<span data-ttu-id="3ccea-117">效果物件</span><span class="sxs-lookup"><span data-stu-id="3ccea-117">Effect objects</span></span>](#effect-objects)
-   [<span data-ttu-id="3ccea-118">相關主題</span><span class="sxs-lookup"><span data-stu-id="3ccea-118">Related topics</span></span>](#related-topics)

## <a name="what-is-a-directcomposition-effect"></a><span data-ttu-id="3ccea-119">什麼是 DirectComposition 效果？</span><span class="sxs-lookup"><span data-stu-id="3ccea-119">What is a DirectComposition effect?</span></span>

<span data-ttu-id="3ccea-120">DirectComposition *效果* 是一種點陣圖作業，會在視覺效果的點陣化期間套用，以某種方式變更視覺效果的外觀。</span><span class="sxs-lookup"><span data-stu-id="3ccea-120">A DirectComposition *effect* is a bitmap operation that is applied during the rasterization of a visual to change the appearance of the visual in some way.</span></span>

<span data-ttu-id="3ccea-121">DirectComposition 會建立效果，方法是取得視覺化子樹，然後將它轉譯成單一點陣圖，然後再套用效果。</span><span class="sxs-lookup"><span data-stu-id="3ccea-121">DirectComposition creates an effect by taking a visual subtree and rendering it into a single bitmap before applying the effect.</span></span> <span data-ttu-id="3ccea-122">例如，若要建立3D 外觀轉換效果，DirectComposition 會產生視覺子樹狀結構的影像，然後將影像紋理至3D 平面，此平面會根據3D 轉換效果的產生矩陣進行轉換。</span><span class="sxs-lookup"><span data-stu-id="3ccea-122">For example, to create a 3D perspective transform effect, DirectComposition produces an image of a visual sub-tree and then textures the image onto a 3D plane that is transformed according to the 3D transform effect’s resulting matrix.</span></span>

<span data-ttu-id="3ccea-123">DirectComposition 支援下列類型的效果。</span><span class="sxs-lookup"><span data-stu-id="3ccea-123">DirectComposition supports the following types of effects.</span></span>



| <span data-ttu-id="3ccea-124">效果類型</span><span class="sxs-lookup"><span data-stu-id="3ccea-124">Effect type</span></span>                                                   | <span data-ttu-id="3ccea-125">Description</span><span class="sxs-lookup"><span data-stu-id="3ccea-125">Description</span></span>                                                                |
|---------------------------------------------------------------|----------------------------------------------------------------------------|
| [<span data-ttu-id="3ccea-126">不透明度</span><span class="sxs-lookup"><span data-stu-id="3ccea-126">Opacity</span></span>](#opacity)                                           | <span data-ttu-id="3ccea-127">設定整個視覺效果的不透明度。</span><span class="sxs-lookup"><span data-stu-id="3ccea-127">Sets the opacity of an entire visual.</span></span>                                      |
| [<span data-ttu-id="3ccea-128">3D 透視轉換</span><span class="sxs-lookup"><span data-stu-id="3ccea-128">3D perspective transform</span></span>](#3d-perspective-transform-effects) | <span data-ttu-id="3ccea-129">將三維 (3D) 透視圖效果轉換成視覺效果。</span><span class="sxs-lookup"><span data-stu-id="3ccea-129">Applies a three-dimensional (3D) perspective transform effect to a visual.</span></span> |



 

> [!Note]  
> <span data-ttu-id="3ccea-130">將效果套用至3D 身歷聲內容時，DirectComposition 不會執行任何特殊處理。</span><span class="sxs-lookup"><span data-stu-id="3ccea-130">DirectComposition does no special processing when applying effects to 3D stereo content.</span></span> <span data-ttu-id="3ccea-131">這表示在套用效果時，3D 內容可能會失真。</span><span class="sxs-lookup"><span data-stu-id="3ccea-131">This means the 3D content might appear distorted when an effect is applied to it.</span></span>

 

## <a name="opacity"></a><span data-ttu-id="3ccea-132">不透明度</span><span class="sxs-lookup"><span data-stu-id="3ccea-132">Opacity</span></span>

<span data-ttu-id="3ccea-133">不透明度效果可讓您設定在呈現視覺效果時，套用至整個視覺效果的不透明度因數。</span><span class="sxs-lookup"><span data-stu-id="3ccea-133">The opacity effect lets you set the opacity factor that is applied to an entire visual when the visual is rendered.</span></span> <span data-ttu-id="3ccea-134">它與 Alpha 遮罩不同之處在于，相同的不透明度因數會套用至視覺效果中的所有圖元。</span><span class="sxs-lookup"><span data-stu-id="3ccea-134">It differs from an alpha mask in that the same opacity factor is applied to all pixels in the visual.</span></span> <span data-ttu-id="3ccea-135">指定不透明度的值範圍為 0 (完全透明) 為 1 (完全不透明) 。</span><span class="sxs-lookup"><span data-stu-id="3ccea-135">Opacity is specified as a value ranging from 0 (completely transparent) to 1 (completely opaque).</span></span>

<span data-ttu-id="3ccea-136">不透明度因數會從父代套用至子視覺效果，但是不會在個別子視覺效果的屬性值中指出嵌套不透明度設定的可見效果。</span><span class="sxs-lookup"><span data-stu-id="3ccea-136">The opacity factor is applied from parent to child visuals, but the visible effects of the nested opacity settings are not indicated in the property value of individual child visuals.</span></span> <span data-ttu-id="3ccea-137">比方說，如果根視覺效果有 50% (0.5) 不透明度，其中一個子系具有20% 的 (0.2) 不透明度，該子系的淨不透明度會轉譯為 10% (0.1) ，但子系的不透明度屬性值仍會是0.2。</span><span class="sxs-lookup"><span data-stu-id="3ccea-137">For instance, if a root visual has a 50% (0.5) opacity and one of its children has a 20% (0.2) opacity, the net opacity for that child is rendered as 10% (0.1), but the value of the child’s Opacity property would still be 0.2.</span></span>

## <a name="3d-perspective-transform-effects"></a><span data-ttu-id="3ccea-138">3D 透視轉換效果</span><span class="sxs-lookup"><span data-stu-id="3ccea-138">3D perspective transform effects</span></span>

<span data-ttu-id="3ccea-139">本節說明 DirectComposition 用於執行3D 透視圖轉換效果的座標空間。</span><span class="sxs-lookup"><span data-stu-id="3ccea-139">This section describes the coordinate space that DirectComposition uses for performing 3D perspective transform effects.</span></span> <span data-ttu-id="3ccea-140">它也會說明 DirectComposition 支援的3D 透視圖轉換效果類型。</span><span class="sxs-lookup"><span data-stu-id="3ccea-140">It also describes the types of 3D perspective transform effects that DirectComposition supports.</span></span>

-   [<span data-ttu-id="3ccea-141">DirectComposition 3D 座標空間</span><span class="sxs-lookup"><span data-stu-id="3ccea-141">The DirectComposition 3D coordinate space</span></span>](#the-directcomposition-3d-coordinate-space)
-   [<span data-ttu-id="3ccea-142">3D 旋轉轉換效果</span><span class="sxs-lookup"><span data-stu-id="3ccea-142">3D rotation transform effect</span></span>](#3d-rotation-transform-effect)
-   [<span data-ttu-id="3ccea-143">3D 縮放轉換效果</span><span class="sxs-lookup"><span data-stu-id="3ccea-143">3D scaling transform effect</span></span>](#3d-scaling-transform-effect)
-   [<span data-ttu-id="3ccea-144">3D 轉譯轉換效果</span><span class="sxs-lookup"><span data-stu-id="3ccea-144">3D translation transform effect</span></span>](#3d-translation-transform-effect)
-   [<span data-ttu-id="3ccea-145">3D 矩陣轉換效果</span><span class="sxs-lookup"><span data-stu-id="3ccea-145">3D matrix transform effect</span></span>](#3d-matrix-transform-effect)
-   [<span data-ttu-id="3ccea-146">3D 轉換效果群組</span><span class="sxs-lookup"><span data-stu-id="3ccea-146">3D transform effect group</span></span>](#3d-transform-effect-group)

> [!Note]  
> <span data-ttu-id="3ccea-147">在 DirectComposition 中，將3D 效果套用至視覺化樹狀結構中的多個層級，其運作方式與使用完整3D 引擎（例如 Microsoft Direct3D）時的方式相同。</span><span class="sxs-lookup"><span data-stu-id="3ccea-147">In DirectComposition, applying 3D effects to multiple levels in the visual tree does not work in the same way as it does with a full 3D engine such as Microsoft Direct3D.</span></span> <span data-ttu-id="3ccea-148">例如，假設有一個具有單一子視覺效果的父視覺效果。</span><span class="sxs-lookup"><span data-stu-id="3ccea-148">For example, consider a parent visual that has a single child visual.</span></span> <span data-ttu-id="3ccea-149">如果子視覺效果在 z 方向向前旋轉 (圍繞90度的 y 軸) ，則子視覺效果邊緣的邊緣會顯示檢視器，因此我們預期視覺效果將不會顯示 (因為點陣圖沒有真正的深度) 。</span><span class="sxs-lookup"><span data-stu-id="3ccea-149">If the child visual is rotated forward in the z direction (around the y-axis) by 90 degrees, the edge of the child visual edge would face the viewer, and so we’d expect the visual to not be visible (because a bitmap has no real depth).</span></span> <span data-ttu-id="3ccea-150">如果父視覺效果接著以負 z 方向向前旋轉 (y 軸) 90 度，則可能會預期子視覺效果會變成完全可見的 (，因為轉換會將每個) 都否定。</span><span class="sxs-lookup"><span data-stu-id="3ccea-150">If the parent visual is then rotated backward in the negative z direction (around the y-axis) by 90 degrees, we might expect the child visual to become fully visibly (since the transformations negate each other).</span></span> <span data-ttu-id="3ccea-151">不過，在 DirectComposition 中不是這樣。</span><span class="sxs-lookup"><span data-stu-id="3ccea-151">However, in DirectComposition this is not the case.</span></span> <span data-ttu-id="3ccea-152">子視覺效果將不會顯示，因為它已「壓平合併為」父點陣圖。</span><span class="sxs-lookup"><span data-stu-id="3ccea-152">The child visual will not be visible because it was "flattened into" the parent bitmap.</span></span>

 

### <a name="the-directcomposition-3d-coordinate-space"></a><span data-ttu-id="3ccea-153">DirectComposition 3D 座標空間</span><span class="sxs-lookup"><span data-stu-id="3ccea-153">The DirectComposition 3D coordinate space</span></span>

<span data-ttu-id="3ccea-154">3D 轉換效果的 DirectComposition 座標空間會找出點陣圖介面左上角的原點 (0、0、0) ，其中正 X 軸的值會往右、正 y 軸的值往下往下，而從原點往外的正 Z 軸值朝檢視器往外移動。</span><span class="sxs-lookup"><span data-stu-id="3ccea-154">The DirectComposition coordinate space for 3D transform effects locates the origin (0,0,0) at the upper-left corner of the bitmap surface, with positive x-axis values proceeding to the right, positive y-axis values proceeding downward, and positive z-axis values proceeding outward from the origin, toward the viewer.</span></span> <span data-ttu-id="3ccea-155">下圖顯示 DirectComposition 3D 座標空間。</span><span class="sxs-lookup"><span data-stu-id="3ccea-155">This illustration shows the DirectComposition 3D coordinate space.</span></span>

![directcompostion 3d 座標空間](images/3d-coordinate-space.png)

### <a name="3d-rotation-transform-effect"></a><span data-ttu-id="3ccea-157">3D 旋轉轉換效果</span><span class="sxs-lookup"><span data-stu-id="3ccea-157">3D rotation transform effect</span></span>

<span data-ttu-id="3ccea-158">3D 旋轉轉換效果會依據旋轉軸向量 \[ x、y、z \] 位於指定中心 (點的旋轉軸向量 x、y、z) 來旋轉三個維度中的視覺效果。</span><span class="sxs-lookup"><span data-stu-id="3ccea-158">A 3D rotation transform effect rotates a visual in three dimensions by the specified angle about a rotation axis vector \[x,y,z\] located at the specified center point (x,y,z).</span></span> <span data-ttu-id="3ccea-159">角度是以度為單位來指定。</span><span class="sxs-lookup"><span data-stu-id="3ccea-159">The angle is specified in degrees.</span></span> <span data-ttu-id="3ccea-160">預設的旋轉軸向量為 \[ 0、0、-1 \] ，而預設中心點是 (0、0、0) 。</span><span class="sxs-lookup"><span data-stu-id="3ccea-160">The default rotation axis vector is \[0,0,-1\], and the default center point is (0,0,0).</span></span>

<span data-ttu-id="3ccea-161">使用 [**IDCompositionDevice：： CreateRotateTransform3D**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createrotatetransform3d) 方法來建立3d 旋轉轉換物件。</span><span class="sxs-lookup"><span data-stu-id="3ccea-161">Use the [**IDCompositionDevice::CreateRotateTransform3D**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createrotatetransform3d) method to create a 3D rotation transform object.</span></span> <span data-ttu-id="3ccea-162">方法會抓取 [**IDCompositionRotateTransform3D**](/windows/win32/api/dcomp/nn-dcomp-idcompositionrotatetransform3d) 介面，讓您用來設定物件的屬性。</span><span class="sxs-lookup"><span data-stu-id="3ccea-162">The method retrieves an [**IDCompositionRotateTransform3D**](/windows/win32/api/dcomp/nn-dcomp-idcompositionrotatetransform3d) interface that you can use to set the properties of the object.</span></span>

### <a name="3d-scaling-transform-effect"></a><span data-ttu-id="3ccea-163">3D 縮放轉換效果</span><span class="sxs-lookup"><span data-stu-id="3ccea-163">3D scaling transform effect</span></span>

<span data-ttu-id="3ccea-164">3D 縮放轉換效果可讓視覺效果更大或更小。</span><span class="sxs-lookup"><span data-stu-id="3ccea-164">A 3D scaling transform effect makes a visual larger or smaller.</span></span> <span data-ttu-id="3ccea-165">它會以 x、y、z) 的中心點縮放視覺效果， \[ \] (x，y，z。</span><span class="sxs-lookup"><span data-stu-id="3ccea-165">It scales a visual in the \[x,y,z\] direction about the center point (x,y,z).</span></span> <span data-ttu-id="3ccea-166">預設中心點是 (0、0、0) 。</span><span class="sxs-lookup"><span data-stu-id="3ccea-166">The default center point is (0,0,0).</span></span>

<span data-ttu-id="3ccea-167">使用 [**IDCompositionDevice：： CreateScaleTransform3D**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createscaletransform3d) 方法來建立3d 縮放轉換物件。</span><span class="sxs-lookup"><span data-stu-id="3ccea-167">Use the [**IDCompositionDevice::CreateScaleTransform3D**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createscaletransform3d) method to create a 3D scaling transform object.</span></span> <span data-ttu-id="3ccea-168">方法會抓取 [**IDCompositionScaleTransform3D**](/windows/win32/api/dcomp/nn-dcomp-idcompositionscaletransform3d) 介面，讓您用來設定物件的屬性。</span><span class="sxs-lookup"><span data-stu-id="3ccea-168">The method retrieves an [**IDCompositionScaleTransform3D**](/windows/win32/api/dcomp/nn-dcomp-idcompositionscaletransform3d) interface that you can use to set the properties of the object.</span></span>

### <a name="3d-translation-transform-effect"></a><span data-ttu-id="3ccea-169">3D 轉譯轉換效果</span><span class="sxs-lookup"><span data-stu-id="3ccea-169">3D translation transform effect</span></span>

<span data-ttu-id="3ccea-170">3D 轉譯轉換效果會以 \[ x、y、z 方向變更視覺效果的位置 \] 。</span><span class="sxs-lookup"><span data-stu-id="3ccea-170">A 3D translation transform effect changes the position of a visual in the \[x,y,z\] direction.</span></span>

<span data-ttu-id="3ccea-171">使用 [**IDCompositionDevice：： CreateTranslateTransform3D**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createtranslatetransform3d) 方法來建立3d 轉譯轉換物件。</span><span class="sxs-lookup"><span data-stu-id="3ccea-171">Use the [**IDCompositionDevice::CreateTranslateTransform3D**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createtranslatetransform3d) method to create a 3D translation transform object.</span></span> <span data-ttu-id="3ccea-172">方法會抓取 [**IDCompositionTranslateTransform3D**](/windows/win32/api/dcomp/nn-dcomp-idcompositiontranslatetransform3d) 介面，讓您用來設定物件的屬性。</span><span class="sxs-lookup"><span data-stu-id="3ccea-172">The method retrieves an [**IDCompositionTranslateTransform3D**](/windows/win32/api/dcomp/nn-dcomp-idcompositiontranslatetransform3d) interface that you can use to set the properties of the object.</span></span>

### <a name="3d-matrix-transform-effect"></a><span data-ttu-id="3ccea-173">3D 矩陣轉換效果</span><span class="sxs-lookup"><span data-stu-id="3ccea-173">3D matrix transform effect</span></span>

<span data-ttu-id="3ccea-174">[**IDCompositionMatrixTransform3D**](/windows/win32/api/dcomp/nn-dcomp-idcompositionmatrixtransform)介面可讓您定義自己的 4 4 轉換矩陣，並將其套用至視覺效果。</span><span class="sxs-lookup"><span data-stu-id="3ccea-174">The [**IDCompositionMatrixTransform3D**](/windows/win32/api/dcomp/nn-dcomp-idcompositionmatrixtransform) interface enables you to define your own 4-by-4 transformation matrix and apply it to a visual.</span></span> <span data-ttu-id="3ccea-175">如果您需要套用無法透過其他 DirectComposition 3D 轉換效果介面使用的3D 透視圖轉換效果類型，這個介面會很有用。</span><span class="sxs-lookup"><span data-stu-id="3ccea-175">This interface is useful if you need to apply a type of 3D perspective transform effect that is not available through the other DirectComposition 3D transform effect interfaces.</span></span> <span data-ttu-id="3ccea-176">您可以藉由填滿 [**D3DMATRIX**](/windows/desktop/direct3d10/d3d10-d3dmatrix) 結構，並將它傳遞至 [**IDCompositionMatrixTransform3D：： SetMatrix**](/windows/win32/api/dcomp/nf-dcomp-idcompositionmatrixtransform-setmatrix) 方法，來定義矩陣。</span><span class="sxs-lookup"><span data-stu-id="3ccea-176">You define the matrix by filling a [**D3DMATRIX**](/windows/desktop/direct3d10/d3d10-d3dmatrix) structure and passing it to the [**IDCompositionMatrixTransform3D::SetMatrix**](/windows/win32/api/dcomp/nf-dcomp-idcompositionmatrixtransform-setmatrix) method.</span></span> <span data-ttu-id="3ccea-177">或者，您可以使用 [**IDCompositionMatrixTransform3D：： SetMatrixElement**](/previous-versions/windows/desktop/legacy/hh437429(v=vs.85)) 方法來設定矩陣的每個元素。</span><span class="sxs-lookup"><span data-stu-id="3ccea-177">Alternatively, you can set each element of the matrix by using the [**IDCompositionMatrixTransform3D::SetMatrixElement**](/previous-versions/windows/desktop/legacy/hh437429(v=vs.85)) method.</span></span>

### <a name="3d-transform-effect-group"></a><span data-ttu-id="3ccea-178">3D 轉換效果群組</span><span class="sxs-lookup"><span data-stu-id="3ccea-178">3D transform effect group</span></span>

<span data-ttu-id="3ccea-179">[**IDCompositionDevice：： CreateTransform3DGroup**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createtransform3dgroup)會建立3d 轉換效果的集合，您可以將其套用至視覺效果做為群組。</span><span class="sxs-lookup"><span data-stu-id="3ccea-179">The [**IDCompositionDevice::CreateTransform3DGroup**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createtransform3dgroup) creates a collection of 3D transform effects that you can apply to a visual as a group.</span></span> <span data-ttu-id="3ccea-180">陣列可包含任意數目的轉換物件，而且可以包含矩陣、旋轉、縮放和轉譯轉換。</span><span class="sxs-lookup"><span data-stu-id="3ccea-180">The array can include any number of transform objects, and can include matrix, rotate, scale, and translate transforms.</span></span> <span data-ttu-id="3ccea-181">3D 轉換物件的集合會產生轉換，其值為集合中個別轉換矩陣的矩陣乘法。</span><span class="sxs-lookup"><span data-stu-id="3ccea-181">The collection of 3D transform objects results in a transform whose value is the matrix multiplication of the individual transform matrices in the collection.</span></span>

<span data-ttu-id="3ccea-182">群組中個別轉換的順序很重要。</span><span class="sxs-lookup"><span data-stu-id="3ccea-182">The order of individual transforms in the group is important.</span></span> <span data-ttu-id="3ccea-183">例如，如果您第一次旋轉，然後進行調整，然後轉譯，則會得到不同的結果，而不是您第一次轉譯、接著旋轉然後調整規模。</span><span class="sxs-lookup"><span data-stu-id="3ccea-183">For example, if you first rotate, then scale, then translate, you get a different result than if you first translate, then rotate, then scale.</span></span> <span data-ttu-id="3ccea-184">DirectComposition 遵循在轉換3D 群組內指定3D 轉換的順序，與2D 轉換的方式相同。</span><span class="sxs-lookup"><span data-stu-id="3ccea-184">DirectComposition respects the order in which you specify 3D transforms within a transform 3D group the same way it does for 2D transforms.</span></span> <span data-ttu-id="3ccea-185">此外，3D 透視轉換會在套用目前視覺效果中的所有3D 轉換之後，將視覺樹狀結構壓平合併。</span><span class="sxs-lookup"><span data-stu-id="3ccea-185">Additionally, 3D perspective transforms result in flattening of the visual tree after all 3D transforms in the current visual have been applied.</span></span> <span data-ttu-id="3ccea-186">這樣做的目的是為了確保場景盡可能接近3D。</span><span class="sxs-lookup"><span data-stu-id="3ccea-186">This is done to ensure that the scene looks as close to 3D as possible.</span></span>

## <a name="effect-objects"></a><span data-ttu-id="3ccea-187">效果物件</span><span class="sxs-lookup"><span data-stu-id="3ccea-187">Effect objects</span></span>

<span data-ttu-id="3ccea-188">若要將效果套用至視覺效果，您必須先建立並設定效果物件的屬性，該物件表示您想要在視覺效果上產生的效果類型。</span><span class="sxs-lookup"><span data-stu-id="3ccea-188">To apply an effect to a visual, you first need to create and set the properties of an effect object that represents the type of effect that you want to produce on the visual.</span></span> <span data-ttu-id="3ccea-189">然後，您必須將效果物件套用至視覺效果的效果屬性。</span><span class="sxs-lookup"><span data-stu-id="3ccea-189">Then, you need to apply the effect object to the visual's Effect property.</span></span>

<span data-ttu-id="3ccea-190">若要建立效果物件，請使用下列其中一個 [**IDCompositionDevice**](/windows/win32/api/dcomp/nn-dcomp-idcompositiondevice) 介面方法，針對您想要的效果類型建立效果物件。</span><span class="sxs-lookup"><span data-stu-id="3ccea-190">To create an effect object, use one of the following [**IDCompositionDevice**](/windows/win32/api/dcomp/nn-dcomp-idcompositiondevice) interface methods to create an effect object for the type of effect that you want.</span></span> <span data-ttu-id="3ccea-191">下列方法會建立效果物件：</span><span class="sxs-lookup"><span data-stu-id="3ccea-191">The following methods create effect objects:</span></span>

-   [<span data-ttu-id="3ccea-192">**CreateMatrixTransform3D**</span><span class="sxs-lookup"><span data-stu-id="3ccea-192">**CreateMatrixTransform3D**</span></span>](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-creatematrixtransform3d)
-   [<span data-ttu-id="3ccea-193">**CreateRotateTransform3D**</span><span class="sxs-lookup"><span data-stu-id="3ccea-193">**CreateRotateTransform3D**</span></span>](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createrotatetransform3d)
-   [<span data-ttu-id="3ccea-194">**CreateScaleTransform3D**</span><span class="sxs-lookup"><span data-stu-id="3ccea-194">**CreateScaleTransform3D**</span></span>](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createscaletransform3d)
-   [<span data-ttu-id="3ccea-195">**CreateTranslateTransform3D**</span><span class="sxs-lookup"><span data-stu-id="3ccea-195">**CreateTranslateTransform3D**</span></span>](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createtranslatetransform3d)

<span data-ttu-id="3ccea-196">上述每個方法都會抓取介面，您可用來設定新建立之效果物件的屬性。</span><span class="sxs-lookup"><span data-stu-id="3ccea-196">Each of the preceding methods retrieves an interface that you can use to set the properties of the newly created effect object.</span></span> <span data-ttu-id="3ccea-197">您可以視需要使用介面方法來設定屬性，以產生您想要的視覺效果。</span><span class="sxs-lookup"><span data-stu-id="3ccea-197">Use the interface methods to set the properties as necessary to produce the visual effect that you want.</span></span>

<span data-ttu-id="3ccea-198">效果物件的大部分屬性都可以動畫顯示。</span><span class="sxs-lookup"><span data-stu-id="3ccea-198">Most properties of an effect object can be animated.</span></span> <span data-ttu-id="3ccea-199">若要建立特定屬性的動畫，請建立一個動畫物件，並將它套用至您想要建立動畫的屬性;否則，請將屬性設定為會產生您想要之效果的靜態值。</span><span class="sxs-lookup"><span data-stu-id="3ccea-199">To animate a particular property, create an animation object and apply it to the property that you want to animate; otherwise, set the property to a static value that produces the effect that you want.</span></span> <span data-ttu-id="3ccea-200">如需有關製作屬性動畫的詳細資訊，請參閱 [動畫](animation.md)。</span><span class="sxs-lookup"><span data-stu-id="3ccea-200">For more information about animating properties, see [Animation](animation.md).</span></span>

<span data-ttu-id="3ccea-201">若要將效果物件套用至視覺效果，請呼叫 [**IDCompositionVisual：： SetEffect**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-seteffect) 方法。</span><span class="sxs-lookup"><span data-stu-id="3ccea-201">To apply an effect object to visual, call the [**IDCompositionVisual::SetEffect**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-seteffect) method.</span></span> <span data-ttu-id="3ccea-202">當您將效果套用至視覺效果時，效果會套用至根于該視覺效果的整個視覺化子樹。</span><span class="sxs-lookup"><span data-stu-id="3ccea-202">When you apply an effect to a visual, the effect is applied to the entire visual subtree rooted at that visual.</span></span> <span data-ttu-id="3ccea-203">比方說，如果您將視覺效果的不透明度設定為50%，視覺效果子樹中所有子視覺效果的不透明度將會降低50%。</span><span class="sxs-lookup"><span data-stu-id="3ccea-203">So, for example, if you set the opacity of a visual to 50 percent, the opacity of all child visuals in the visual subtree will be reduced by 50 percent.</span></span> <span data-ttu-id="3ccea-204">您可以將相同的效果物件套用至一或多個視覺效果。</span><span class="sxs-lookup"><span data-stu-id="3ccea-204">You can apply the same effect object to one or more visuals.</span></span> <span data-ttu-id="3ccea-205">如果您在將效果物件套用至視覺效果之後修改其屬性，則會重新撰寫所有視覺效果以反映變更。</span><span class="sxs-lookup"><span data-stu-id="3ccea-205">If you modify the properties of an effect object after applying it to visuals, all of the visuals are re-composed to reflect the change.</span></span>

<span data-ttu-id="3ccea-206">藉由使用效果群組物件，您可以同時將多個效果套用至視覺效果。</span><span class="sxs-lookup"><span data-stu-id="3ccea-206">By using an effect group object, you can simultaneously apply multiple effects to a visual.</span></span> <span data-ttu-id="3ccea-207">首先，呼叫 [**IDCompositionDevice：： CreateEffectGroup**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createeffectgroup) 來建立效果群組物件，然後使用物件的 [**IDCompositionEffectGroup**](/windows/win32/api/dcomp/nn-dcomp-idcompositioneffectgroup) 介面，將效果新增至該群組。</span><span class="sxs-lookup"><span data-stu-id="3ccea-207">First call [**IDCompositionDevice::CreateEffectGroup**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createeffectgroup) to create the effect group object, and then add effects to the group by using the object's [**IDCompositionEffectGroup**](/windows/win32/api/dcomp/nn-dcomp-idcompositioneffectgroup) interface.</span></span>

## <a name="related-topics"></a><span data-ttu-id="3ccea-208">相關主題</span><span class="sxs-lookup"><span data-stu-id="3ccea-208">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="3ccea-209">DirectComposition 概念</span><span class="sxs-lookup"><span data-stu-id="3ccea-209">DirectComposition Concepts</span></span>](directcomposition-concepts.md)
</dt> </dl>

 

 