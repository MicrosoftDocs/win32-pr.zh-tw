---
description: 提供者會管理執行中的磁片區，並視需要建立這些磁片區的陰影複製。
ms.assetid: 4e6b46b0-df9e-4458-b0ac-e237d7656337
title: 提供者
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6bb336dbb51fcbd715ea236ecdc0c62d81daf29d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/07/2021
ms.locfileid: "106977861"
---
# <a name="providers"></a>提供者

[*提供者*](vssgloss-p.md) 會管理執行中的磁片區，並視需要建立這些磁片區的陰影複製。

為了回應要求者提出的要求，提供者會產生 COM 事件以表示應用程式的陰影複製，然後建立並維護該複本，直到不再需要該複本為止。

當陰影複製存在時，提供者會建立一個環境，在此環境中，已有陰影複製的任何磁片區實際上有兩個獨立的複本：一個是正在使用的磁片磁碟機，而另一個則是磁片固定且穩定的備份。

雖然提供了預設提供者作為 Windows 的一部分，但其他廠商也可免費提供自己的實作為其本身的儲存體硬體和軟體供應專案的實施。

從使用者或備份/還原應用程式開發人員的觀點來看，所有提供者都有相同的介面 (請參閱) [選取提供者](selecting-providers.md) 。

所有提供者都必須能夠執行下列作業：

-   攔截檔案系統與基礎大型儲存系統之間的 i/o 要求。
-   在陰影複製時，捕捉並取出磁片區的狀態，維護磁片上檔案的「時間點」查看，而不會在其狀態中反映部分 i/o 作業。
-   您可以使用此「時間點」視圖，在包含陰影複製資料的虛擬磁片區) 的情況下，對啟用 VSS 的應用程式公開 (。

視完成的方式而定，提供者可以是下列三種類型之一：

-   [系統提供者](#system-provider)
-   [軟體提供者](#software-providers)
-   [硬體提供者](#hardware-providers)

## <a name="system-provider"></a>系統提供者

系統提供一個陰影複製提供者（ [*系統提供者*](vssgloss-s.md)），是 Windows 作業系統安裝的預設部分。 目前，系統提供者是軟體提供者的特定實例。 不過，未來可能會變更。

為了維護陰影複製所包含之磁片區的「時間點」視圖，系統提供者會使用寫入時複製技術。 磁片上已修改的磁區複本 (稱為「差異」 ) ，因為陰影複製建立的開頭是儲存在陰影複製存放區域中。

因此，系統提供者可以公開即時磁片區，該磁片區可以正常寫入和讀取，並將「差異」套用至即時磁片區的資料，以有效地公開陰影複製的凍結資料。

系統提供者的陰影複製存放區域必須位於 NTFS 磁碟區上。 要進行陰影複製的磁碟區不需要是 NTFS 磁碟區，但是系統上掛接的磁碟區必須至少有一個是 NTFS 磁碟區。

## <a name="software-providers"></a>軟體提供者

軟體陰影複製提供者會在檔案系統與磁片區管理員軟體之間的軟體層中攔截及處理 i/o 要求。 這些提供者會實作為使用者模式 DLL 元件，以及至少一個核心模式設備磁碟機，通常 (但不一定) 存放裝置篩選器驅動程式。 建立這些陰影複製的工作是在軟體中完成。

軟體陰影複製提供者必須藉由存取一組檔案來維護磁片區的「時間點」視圖，才能在陰影複製之前，用來精確地重新建立磁片區狀態。 其中一個範例是系統提供者的寫入時複製技術。

不過，VSS 對軟體提供者用來建立和維護陰影複製的技術沒有任何限制，而協力廠商廠商可以自由地依照自己的需要來執行軟體提供者。

此外，VSS 也提供軟體陰影複製提供者大部分功能的支援，例如定義時間點、資料同步處理和清除、提供備份應用程式的通用介面，以及陰影複製的管理。

軟體提供者將依定義適用于比硬體提供者更廣泛的儲存平臺，而且應該能夠同樣地使用基本磁碟或邏輯磁片區。 此一般性犧牲可透過在硬體中執行陰影複製來取得效能，而不會使用任何廠商特定的磁片區捕獲或檔案鏡像功能。

## <a name="hardware-providers"></a>硬體提供者

硬體陰影複製提供者會在硬體層級與硬體存放裝置介面卡或控制器一起運作，以攔截來自檔案系統的 i/o 要求。 建立陰影複製的工作是由作業系統以外的主機介面卡、存放裝置或 RAID 控制器所執行。

這些提供者會實作為使用者模式 DLL 元件，並與將公開陰影複製資料的硬體通訊：因此，硬體陰影複製提供者可能需要呼叫或建立其他核心模式元件。

硬體提供者會公開給整個磁片的 VSS 陰影複製，或 (Lun) 的邏輯單元。 要求者仍會處理磁片區的陰影複製;所有磁片區對磁片的對應都是由 VSS 在內部處理。 由位於動態磁碟上的磁片區之硬體提供者所建立的陰影複製具有特定需求：它們無法匯入到相同的系統上。 您必須在第二個系統上建立可轉移和匯入的使用者。

雖然硬體陰影複製提供者會使用可定義時間點的 VSS 功能、允許資料同步處理、管理陰影複製，以及提供備份應用程式的通用介面，但 VSS 不會指定硬體提供者產生和維護陰影複製的基礎機制。

 

 



