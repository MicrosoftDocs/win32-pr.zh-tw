---
description: 呼叫 >ivssbackupcomponents：： GatherWriterMetadata 之後，要求者會使用從這個呼叫傳回的 IVssAsync 介面實例，判斷系統上的所有寫入器何時完成其寫入器元資料檔案的建立。
ms.assetid: 04658d50-04f0-4189-8b88-ff152f1bf482
title: 備份探索階段總覽
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3d2d2a2d05220ecf3e25c77c18cc62b07726964f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/07/2021
ms.locfileid: "106977269"
---
# <a name="overview-of-the-backup-discovery-phase"></a><span data-ttu-id="50d6d-103">備份探索階段總覽</span><span class="sxs-lookup"><span data-stu-id="50d6d-103">Overview of the Backup Discovery Phase</span></span>

<span data-ttu-id="50d6d-104">呼叫 [**>ivssbackupcomponents：： GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata)之後，要求者會使用從這個呼叫傳回的 [**IVssAsync**](/windows/desktop/api/Vss/nn-vss-ivssasync) 介面實例，判斷系統上的所有寫入器何時完成其寫入器元資料檔案的建立。</span><span class="sxs-lookup"><span data-stu-id="50d6d-104">After calling [**IVssBackupComponents::GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata), a requester uses the instance of the [**IVssAsync**](/windows/desktop/api/Vss/nn-vss-ivssasync) interface returned from this call to determine when all writers on the system have finished constructing their Writer Metadata Documents.</span></span> <span data-ttu-id="50d6d-105">如需詳細資訊，請參閱 [在 VSS 下處理備份的總覽](overview-of-processing-a-backup-under-vss.md)。</span><span class="sxs-lookup"><span data-stu-id="50d6d-105">For more information, see [Overview of Processing a Backup Under VSS](overview-of-processing-a-backup-under-vss.md).</span></span>

<span data-ttu-id="50d6d-106">此時，要求者可以開始探索階段，檢查中繼資料以判斷哪些應用程式正在執行，以及哪些磁片區必須是陰影複製才能取得完整備份。</span><span class="sxs-lookup"><span data-stu-id="50d6d-106">At this point, the requester can begin a discovery phase, examining metadata to determine what applications are running and which volumes must be shadow copied to get a complete backup.</span></span> <span data-ttu-id="50d6d-107">下表顯示備份探索階段所需的動作和事件的順序。</span><span class="sxs-lookup"><span data-stu-id="50d6d-107">The following table shows the sequence of actions and events that are required for the backup discovery phase.</span></span>



| <span data-ttu-id="50d6d-108">要求者動作</span><span class="sxs-lookup"><span data-stu-id="50d6d-108">Requester action</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | <span data-ttu-id="50d6d-109">事件</span><span class="sxs-lookup"><span data-stu-id="50d6d-109">Event</span></span> | <span data-ttu-id="50d6d-110">寫入器動作</span><span class="sxs-lookup"><span data-stu-id="50d6d-110">Writer action</span></span>                                                                     |
|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------|-----------------------------------------------------------------------------------|
| <span data-ttu-id="50d6d-111">取出寫入器元資料檔案 (參閱 [**>ivssbackupcomponents：： GetWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritermetadata)、 [**IVssExamineWriterMetadata**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssexaminewritermetadata)) 。</span><span class="sxs-lookup"><span data-stu-id="50d6d-111">Retrieve Writer Metadata Documents (see [**IVssBackupComponents::GetWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritermetadata), [**IVssExamineWriterMetadata**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssexaminewritermetadata)).</span></span>                                                                                                                                                                                                                                                                                                                                                 | <span data-ttu-id="50d6d-112">無</span><span class="sxs-lookup"><span data-stu-id="50d6d-112">None</span></span>  | <span data-ttu-id="50d6d-113">在這段期間，寫入器可能仍能繼續正常操作。</span><span class="sxs-lookup"><span data-stu-id="50d6d-113">During this period, writers may be able to continue with their normal operations.</span></span> |
| <span data-ttu-id="50d6d-114">您可以使用元件及其檔案 [*集*](vssgloss-f.md)清單以及已排除的檔案，取得備份所牽涉的磁片區和檔案清單 (參閱 [**IVssWMComponent**](/windows/desktop/api/VsBackup/nl-vsbackup-ivsswmcomponent)、 [**IVssWMFiledesc**](/windows/desktop/api/VsWriter/nl-vswriter-ivsswmfiledesc)) 。</span><span class="sxs-lookup"><span data-stu-id="50d6d-114">Use the list of components and their [*file sets*](vssgloss-f.md), as well as excluded files, to obtain a list of volumes and files involved in the backup (see [**IVssWMComponent**](/windows/desktop/api/VsBackup/nl-vsbackup-ivsswmcomponent), [**IVssWMFiledesc**](/windows/desktop/api/VsWriter/nl-vswriter-ivsswmfiledesc)).</span></span>                                                                                                                                                                                                                                                                      | <span data-ttu-id="50d6d-115">無</span><span class="sxs-lookup"><span data-stu-id="50d6d-115">None</span></span>  | <span data-ttu-id="50d6d-116">無</span><span class="sxs-lookup"><span data-stu-id="50d6d-116">None</span></span>                                                                              |
| <span data-ttu-id="50d6d-117">選擇要備份的寫入器寫入器元資料檔案中的哪些元件。</span><span class="sxs-lookup"><span data-stu-id="50d6d-117">Choose which components in the writer's Writer Metadata Document to back up.</span></span> <span data-ttu-id="50d6d-118">針對每個元件呼叫 [**>ivssbackupcomponents：： AddComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addcomponent) ，將它新增至備份元件檔。</span><span class="sxs-lookup"><span data-stu-id="50d6d-118">Call [**IVssBackupComponents::AddComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addcomponent) for each component to add it to the Backup Components Document.</span></span> <span data-ttu-id="50d6d-119"> (請參閱使用 [Selectability 進行備份](working-with-selectability-for-backup.md) ，並使用 [備份元件檔](working-with-the-backup-components-document.md)。 ) </span><span class="sxs-lookup"><span data-stu-id="50d6d-119">(See [Working with Selectability for Backup](working-with-selectability-for-backup.md) and [Working with the Backup Components Document](working-with-the-backup-components-document.md).)</span></span>                                                                                                                      | <span data-ttu-id="50d6d-120">無</span><span class="sxs-lookup"><span data-stu-id="50d6d-120">None</span></span>  | <span data-ttu-id="50d6d-121">無</span><span class="sxs-lookup"><span data-stu-id="50d6d-121">None</span></span>                                                                              |
| <span data-ttu-id="50d6d-122">初始化陰影複製集、內容和檢查支援的磁片區 (參閱 [**>ivssbackupcomponents：： StartSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-startsnapshotset)， [**>ivssbackupcomponents：： IsVolumeSupported**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-isvolumesupported)) 。</span><span class="sxs-lookup"><span data-stu-id="50d6d-122">Initialize the shadow copy set, context and check for supported volumes (see [**IVssBackupComponents::StartSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-startsnapshotset), [**IVssBackupComponents::IsVolumeSupported**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-isvolumesupported)).</span></span>                                                                                                                                                                                                                                                                                   | <span data-ttu-id="50d6d-123">無</span><span class="sxs-lookup"><span data-stu-id="50d6d-123">None</span></span>  | <span data-ttu-id="50d6d-124">無</span><span class="sxs-lookup"><span data-stu-id="50d6d-124">None</span></span>                                                                              |
| <span data-ttu-id="50d6d-125">如果執行非元件備份，請針對每個磁片區呼叫 [**>ivssbackupcomponents：： AddToSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addtosnapshotset) ，將所需的目標磁片區從寫入器元資料檔案新增至陰影複製集。</span><span class="sxs-lookup"><span data-stu-id="50d6d-125">If performing a non-component backup, add the desired target volumes from the Writer Metadata Document to the shadow copy set by calling [**IVssBackupComponents::AddToSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addtosnapshotset) for each volume.</span></span> <span data-ttu-id="50d6d-126">否則，針對寫入器元資料檔案中已經加入至備份元件檔的元件 (藉由呼叫 [**AddComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addcomponent)) ，要求者也必須針對每個受影響的磁片區呼叫 **>ivssbackupcomponents：： AddToSnapshotSet** 。</span><span class="sxs-lookup"><span data-stu-id="50d6d-126">Otherwise, for the components in the Writer Metadata Document that were already added to the Backup Components Document (by calling [**AddComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addcomponent)), the requester must also call **IVssBackupComponents::AddToSnapshotSet** for each affected volume.</span></span> | <span data-ttu-id="50d6d-127">無</span><span class="sxs-lookup"><span data-stu-id="50d6d-127">None</span></span>  | <span data-ttu-id="50d6d-128">無</span><span class="sxs-lookup"><span data-stu-id="50d6d-128">None</span></span>                                                                              |



 

## <a name="writer-actions-during-the-discovery-phase"></a><span data-ttu-id="50d6d-129">探索階段期間的寫入器動作</span><span class="sxs-lookup"><span data-stu-id="50d6d-129">Writer Actions during the Discovery Phase</span></span>

<span data-ttu-id="50d6d-130">因為備份的探索階段主要是由要求者處理從寫入器元資料檔案中取出的資訊所組成，所以在寫入器上有一些需求。</span><span class="sxs-lookup"><span data-stu-id="50d6d-130">Because the discovery phase of a backup consists primarily of a requester processing the information it has retrieved from Writer Metadata Documents, there are few if any requirements on a writer.</span></span>

<span data-ttu-id="50d6d-131">理論上，寫入器可能會在此時繼續正常執行。</span><span class="sxs-lookup"><span data-stu-id="50d6d-131">In theory, a writer could continue to run normally at this point.</span></span> <span data-ttu-id="50d6d-132">但是，寫入器可能會開始準備進行陰影複製和備份作業。</span><span class="sxs-lookup"><span data-stu-id="50d6d-132">However, it may be desirable for writers to begin preparations for the coming shadow copy and backup operations.</span></span>

## <a name="requester-actions-during-the-discovery-phase"></a><span data-ttu-id="50d6d-133">探索階段期間的要求者動作</span><span class="sxs-lookup"><span data-stu-id="50d6d-133">Requester Actions during the Discovery Phase</span></span>

<span data-ttu-id="50d6d-134">要求者會使用透過 [**>ivssbackupcomponents：： GetWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritermetadata)取得的 [**IVssExamineWriterMetadata**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssexaminewritermetadata)物件，以反復查看所有寫入器的中繼資料，並選取要備份其資料的寫入器。</span><span class="sxs-lookup"><span data-stu-id="50d6d-134">A requester uses the [**IVssExamineWriterMetadata**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssexaminewritermetadata) objects obtained through [**IVssBackupComponents::GetWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritermetadata) to iterate over all the writers' metadata and selecting those writers whose data it intends to back up.</span></span>

<span data-ttu-id="50d6d-135">此時，要求者必須使用 [**IVssExamineWriterMetadata：： GetComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getcomponent)逐一查看寫入器的元件，以產生每個寫入器備份候選項目的初始清單。</span><span class="sxs-lookup"><span data-stu-id="50d6d-135">At this point, the requester will need to generate an initial list of each writer's backup candidates by iterating over the writer's components using [**IVssExamineWriterMetadata::GetComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getcomponent).</span></span> <span data-ttu-id="50d6d-136">這會為要求者提供 [**IVssWMComponent**](/windows/desktop/api/VsBackup/nl-vsbackup-ivsswmcomponent) 物件，讓您可以使用 [**IVssWMComponent：： GetFile**](/windows/desktop/api/VsBackup/nf-vsbackup-ivsswmcomponent-getfile)、 [**IVssWMComponent：： GetDatabaseFile**](/windows/desktop/api/VsBackup/nf-vsbackup-ivsswmcomponent-getdatabasefile)和 [**IVssWMComponent：： GetDatabaseLogFile**](/windows/desktop/api/VsBackup/nf-vsbackup-ivsswmcomponent-getdatabaselogfile)來取得要備份之檔案的規格。</span><span class="sxs-lookup"><span data-stu-id="50d6d-136">This provides the requester with [**IVssWMComponent**](/windows/desktop/api/VsBackup/nl-vsbackup-ivsswmcomponent) objects, from which you can get the specifications for the files to be backed up using [**IVssWMComponent::GetFile**](/windows/desktop/api/VsBackup/nf-vsbackup-ivsswmcomponent-getfile), [**IVssWMComponent::GetDatabaseFile**](/windows/desktop/api/VsBackup/nf-vsbackup-ivsswmcomponent-getdatabasefile), and [**IVssWMComponent::GetDatabaseLogFile**](/windows/desktop/api/VsBackup/nf-vsbackup-ivsswmcomponent-getdatabaselogfile).</span></span>

<span data-ttu-id="50d6d-137">由於 [**IVssWMFiledesc**](/windows/desktop/api/VsWriter/nl-vswriter-ivsswmfiledesc) 物件可以使用萬用字元來保存檔案位置資訊，因此可能需要使用 [**FindFirstFile**](/windows/win32/api/fileapi/nf-fileapi-findfirstfilea)、 [**FindFirstFileEx**](/windows/win32/api/fileapi/nf-fileapi-findfirstfileexa)和 [**FindNextFile**](/windows/win32/api/fileapi/nf-fileapi-findnextfilea)等函數。</span><span class="sxs-lookup"><span data-stu-id="50d6d-137">Because the [**IVssWMFiledesc**](/windows/desktop/api/VsWriter/nl-vswriter-ivsswmfiledesc) object can use wildcard characters to hold file location information, it may be necessary to use functions such as [**FindFirstFile**](/windows/win32/api/fileapi/nf-fileapi-findfirstfilea), [**FindFirstFileEx**](/windows/win32/api/fileapi/nf-fileapi-findfirstfileexa), and [**FindNextFile**](/windows/win32/api/fileapi/nf-fileapi-findnextfilea).</span></span>

<span data-ttu-id="50d6d-138">在完成陰影複製之前，寫入器仍有可能在工作正常的情況下，從磁片新增或移除檔案，因此您不應該在此時產生實際要備份的檔案清單。</span><span class="sxs-lookup"><span data-stu-id="50d6d-138">Until the shadow copy has been completed, it is still possible for writers to add or remove files from disk in the normal course of their work, so you should not generate the actual list of files to be backed up at this time.</span></span>

<span data-ttu-id="50d6d-139">相反地，您可以藉由執行下列動作，在這裡找到要備份的檔案和磁片區的初始清單：</span><span class="sxs-lookup"><span data-stu-id="50d6d-139">Instead, the initial list of files and volumes to be backed up is found at this point by doing the following:</span></span>

1.  <span data-ttu-id="50d6d-140">在每個寫入器的寫入器元資料檔案中檢查所有可選取的備份和其元件 (使用 [**IVssExamineWriterMetadata**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssexaminewritermetadata)) 並將它們組織成 [*元件集*](vssgloss-c.md) 使用 [*邏輯路徑*](vssgloss-l.md) (請參閱使用 [Selectability 和邏輯路徑](working-with-selectability-and-logical-paths.md)) </span><span class="sxs-lookup"><span data-stu-id="50d6d-140">Examining all selectable for backup and nonselectable components in each writer's Writer Metadata Document (using [**IVssExamineWriterMetadata**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssexaminewritermetadata)) and organizing them into [*component sets*](vssgloss-c.md) use [*logical path*](vssgloss-l.md) (see [Working with Selectability and Logical Paths](working-with-selectability-and-logical-paths.md))</span></span>
2.  <span data-ttu-id="50d6d-141">[](vssgloss-e.md)使用 [ **>ivssbackupcomponents：： AddComponent** ，包括明確其備份元件的所有必要元件 (，而不是可選擇備份元件檔中的備份父項目)](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addcomponent)</span><span class="sxs-lookup"><span data-stu-id="50d6d-141">[*Including explicitly*](vssgloss-e.md) all required components (nonselectable for backup components without selectable for backup ancestors) in the Backup Components Document using [**IVssBackupComponents::AddComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addcomponent)</span></span>
3.  <span data-ttu-id="50d6d-142">選擇明確包含選用的，可供未使用 [**>ivssbackupcomponents：： AddComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addcomponent) 定義元件集 (的備份元件使用) </span><span class="sxs-lookup"><span data-stu-id="50d6d-142">Choosing to explicitly include optional selectable for backup components that do not define a component set (using [**IVssBackupComponents::AddComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addcomponent))</span></span>
4.  <span data-ttu-id="50d6d-143">藉由使用 [**>ivssbackupcomponents：： AddComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addcomponent)) （[*隱含地包含*](vssgloss-i.md)元件集的 [*子*](vssgloss-s.md)元件）明確地新增其定義可選取的備份 (元件，來選取要參與備份的 [*元件集*](vssgloss-c.md)。</span><span class="sxs-lookup"><span data-stu-id="50d6d-143">Selecting [*component sets*](vssgloss-c.md) for participation in a backup by explicitly adding their defining selectable for backup component (using [**IVssBackupComponents::AddComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addcomponent)), which [*implicitly includes*](vssgloss-i.md) the component set's [*subcomponents*](vssgloss-s.md).</span></span>
5.  <span data-ttu-id="50d6d-144">在選取的寫入器的寫入器元資料檔案和磁片區管理函式中使用檔案 [*集*](vssgloss-f.md) 資訊時，要求者會決定要備份的檔案路徑，以及需要陰影複製的磁片區。</span><span class="sxs-lookup"><span data-stu-id="50d6d-144">Using [*file set*](vssgloss-f.md) information in the selected writers' Writer Metadata Document and volume management functions, a requester determines the paths of files to be backed up and the volumes that will need to be shadow copied</span></span>

<span data-ttu-id="50d6d-145">請注意，只有在備份和備份元件檔中使用 [**>ivssbackupcomponents：： AddComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addcomponent)) 明確包含 (的元件，才會有新增至該檔之 [**>ivsscomponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) 介面的實例。</span><span class="sxs-lookup"><span data-stu-id="50d6d-145">Note that only the components explicitly included (using [**IVssBackupComponents::AddComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addcomponent)) in the backup and in the Backup Components Document will have instances of the [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) interface added to that document.</span></span> <span data-ttu-id="50d6d-146">這些實例將用來檢查和修改明確包含的元件及其任何隱含包含子群組件的元件設定 (參閱 [Selectability 和使用元件屬性](selectability-and-working-with-component-properties.md)) 。</span><span class="sxs-lookup"><span data-stu-id="50d6d-146">These instances will be used to examine and modify component settings for both explicitly included components and any of their implicitly included subcomponents (see [Selectability and Working with Component Properties](selectability-and-working-with-component-properties.md)).</span></span>

<span data-ttu-id="50d6d-147">如果寫入器包含任何寫入器的元件，則必須加入其所有必要的元件。</span><span class="sxs-lookup"><span data-stu-id="50d6d-147">If a writer includes any of a writer's components, it must add all of its required components.</span></span> <span data-ttu-id="50d6d-148">不過，要求者也可以完全略過所有寫入器的元件集。</span><span class="sxs-lookup"><span data-stu-id="50d6d-148">However, a requester is also free to entirely skip all of a writer's component sets.</span></span> <span data-ttu-id="50d6d-149">如果未明確選取任何寫入器的元件，則不會選取寫入器，而 VSS 會禁止該寫入器參與備份作業的其餘部分。</span><span class="sxs-lookup"><span data-stu-id="50d6d-149">If none of a writer's components are explicitly selected, the writer is not selected, and VSS inhibits that writer from participating in the rest of the backup operation.</span></span>

<span data-ttu-id="50d6d-150">要求者會藉由呼叫 [**>ivssbackupcomponents：： StartSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-startsnapshotset)來起始包含所選磁片區的陰影複製集。</span><span class="sxs-lookup"><span data-stu-id="50d6d-150">The requester initiates the shadow copy set that will contain the selected volumes by calling [**IVssBackupComponents::StartSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-startsnapshotset).</span></span>

<span data-ttu-id="50d6d-151">如果磁片區可參與陰影複製 (可使用 [**>ivssbackupcomponents：：) IsVolumeSupported**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-isvolumesupported) 檢查，則要求者可以使用 [**>ivssbackupcomponents：： AddToSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addtosnapshotset)，將該磁片區新增至陰影複製集。</span><span class="sxs-lookup"><span data-stu-id="50d6d-151">If the volume can participate in a shadow copy (which can be checked with [**IVssBackupComponents::IsVolumeSupported**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-isvolumesupported)), the requester can add that volume to the shadow copy set using [**IVssBackupComponents::AddToSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addtosnapshotset).</span></span>

<span data-ttu-id="50d6d-152">雖然通常不會有用處，但要求者有時也可以選擇要為指定的磁片區維持陰影複製的 [*提供者*](vssgloss-p.md) (請參閱 [選取提供者](selecting-providers.md) 以取得詳細資料) 。</span><span class="sxs-lookup"><span data-stu-id="50d6d-152">Although it is not generally useful, a requester can sometimes also choose which [*provider*](vssgloss-p.md) will maintain the shadow copy for a given volume (see [Selecting Providers](selecting-providers.md) for details).</span></span>

<span data-ttu-id="50d6d-153">請小心處理包含已載入資料夾或重新分析點的磁片區。</span><span class="sxs-lookup"><span data-stu-id="50d6d-153">Care should be given to the handling of a volume containing mounted folders or reparse points.</span></span> <span data-ttu-id="50d6d-154">載入的資料夾或重新分析點可以出現在陰影複製中，並可進行備份。</span><span class="sxs-lookup"><span data-stu-id="50d6d-154">A mounted folder or reparse point can appear in a shadow copy and can be backed up.</span></span> <span data-ttu-id="50d6d-155">但是，無法在陰影複製的磁片區上，執行裝載的資料夾或重新分析點 (請參閱) [使用掛接的資料夾和重新分析點](working-with-reparse-and-mount-points.md) 。</span><span class="sxs-lookup"><span data-stu-id="50d6d-155">However, a mounted folder or reparse point cannot be traversed on the shadow copied volume (see [Working with Mounted Folders and Reparse Points](working-with-reparse-and-mount-points.md)).</span></span>

<span data-ttu-id="50d6d-156">在備份中的這個階段，會將備份元件檔初始化和填滿。</span><span class="sxs-lookup"><span data-stu-id="50d6d-156">At this point in the backup, the Backup Components Document is initialized and filled.</span></span> <span data-ttu-id="50d6d-157">在未來作業中，寫入器和要求者可以使用 [**>ivsscomponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) 介面來彼此通訊。</span><span class="sxs-lookup"><span data-stu-id="50d6d-157">In future operations, writers and requesters can use the [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) interface to communicate with each other.</span></span>

<span data-ttu-id="50d6d-158">處理 [*PrepareForBackup*](vssgloss-p.md)、 [*PostSnapshot*](vssgloss-p.md)和 [*BackupComplete*](vssgloss-b.md)事件時，寫入器會獲得 [**>ivsscomponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent)介面的存取權。</span><span class="sxs-lookup"><span data-stu-id="50d6d-158">Writers are given access to the [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) interface when handling the [*PrepareForBackup*](vssgloss-p.md), [*PostSnapshot*](vssgloss-p.md), and [*BackupComplete*](vssgloss-b.md) events.</span></span>

 

 
